<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="favicon" rel="shortcut icon" href="/favicon.ico" />
        <title>Centos 系统引导损坏修复、密码破解与加密-金色之谜-51CTO博客</title>
    <meta name="keywords" content="Centos,系统,引导">
<meta name="description" content="ramdisk(ramfs)丢失损坏 内核中的特性之一：使用缓冲和缓存来加速对磁盘上的文件访问，并加载相应的硬件驱动没有此文件，系统无法加载 / 分区，也就无法启动系统。CentOS 5 文件名: initrdCentOS 6，7文件名: initramfs当系统的ramfs文件丢失或损坏时，系统启动时表现为修复如下：进入救援模式，重新生成ramdisk文件即可。为当前正在使用的内核重新制作ra">    <link href="https://static1.51cto.com/edu/blog/css/header.css" rel="stylesheet"><link href="https://static1.51cto.com/edu/blog/css/other.css" rel="stylesheet"><link href="https://static1.51cto.com/edu/blog/css/right.css?v=3.1.7" rel="stylesheet"><link href="https://static1.51cto.com/edu/blog/css/blog_details.css" rel="stylesheet"><link href="https://static1.51cto.com/edu/blog/css/highlight.css" rel="stylesheet">
    <script>
        var HOME_URL = 'https://home.51cto.com/';
    </script>
    <script src="https://static1.51cto.com/edu/center/js/jquery.min.js"></script><script src="https://static1.51cto.com/edu/blog/js/cookie.js"></script><script src="https://static1.51cto.com/edu/blog/js/login.js"></script><script src="https://static1.51cto.com/edu/blog/js/common.js"></script><script src="https://static1.51cto.com/edu/blog/js/mbox.js"></script><script src="https://static1.51cto.com/edu/blog/js/follow.js"></script><script src="https://static1.51cto.com/edu/blog/js/vip.js"></script><script src="https://static1.51cto.com/edu/blog/js/window.js"></script></head>
<body>
<img src="https://static1.51cto.com/edu/blog/mobile/images/share_default.jpg" border="0" style="width:0; height:0; position:absolute;">
<style type="text/css">
	.service-btn{
		width: 53px;
height: 36px;
color: #1ac6fe;
line-height: 16px;
padding-top: 50px;
		display: inline-block;
		background: url(https://s1.51cto.com/images/blog/201811/02/463350acf4c693cfb3dc248bc8a2a0eb.png) no-repeat center;
	}
	.service-btn:hover{
		background: url(https://s1.51cto.com/images/blog/201811/02/2d5fa2ff4eb9ef66847aff20ba4c8bae.png) no-repeat center;
height: 36px;
color: #fff;
line-height: 16px;
padding-top: 50px;
	}
</style>
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
<div id="topbanner14" style="position: relative;width:100%;height:40px;background:url(https://s1.51cto.com/images/blog/201905/29/489c3eaa7a5cd2d47a468e69665b5772.jpg)">
<a class="close fl" href="javascript:;" style="position:absolute;width:13px;height:13px;top:0px;z-index: 20;background: url('https://s1.51cto.com/images/blog/201808/23/0363c65f527ea7c9880ab5f275303d1a.png') 0 0 no-repeat;background-size: 100% 100%;left: 50%;margin-left: 587px;"></a>
<a href="https://blog.51cto.com/cloumn/composedetail?id=9&banner" target="_blank">
  <img src="https://s1.51cto.com/images/blog/201905/29/42bd8bef0cd70d00b64970cadf526e69.jpg" alt="" style="position:absolute;width:1200px;height:40px;margin-left: -600px;left:50%;z-index: 10;">
</a>
</div>
<script>
    $("#topbanner14").on("click",".close",function(){
        $("#topbanner14").remove();
    })
</script>
<div class="Header">
  <div class="Page ">
    <h1 class="Logo"><a href="https://blog.51cto.com/">Logo</a></h1>
    <ul class="Navigates fl">
      <li ><a href="https://blog.51cto.com/">首页</a></li>
      <li ><a href="https://blog.51cto.com/original">文章</a></li>
      <li ><a href="https://blog.51cto.com/blog/follow">关注</a></li>
      <li class="">
        <a class="column-stress" href="https://blog.51cto.com/cloumn/index" target="_blank">订阅专栏</a>
      </li>
                    
                  </ul>
    <ul class="Navigates Navigates-right fr">
      <li class="more maps">
        <a href="javascript:void(0);">网站导航</a>
        <div>
            <a href="https://edu.51cto.com/" target="_blank">学院</a>
            <a href="https://e.51cto.com/" target="_blank">微职位</a>
            <a href="https://blog.51cto.com/" target="_blank">博客</a>
            <a href="http://down.51cto.com/" target="_blank">下载</a>
            <a href="https://home.51cto.com/" target="_blank">家园</a>
            <a href="http://bbs.51cto.com/" target="_blank">论坛</a>
            <a href="http://x.51cto.com" target="_blank">CTO训练营</a>
            <!--a href=" http://club.51cto.com?blog" target="_blank">CTO俱乐部</a-->
            <a href="http://wot.51cto.com" target="_blank">WOT</a>
            <a href="http://www.51cto.com" target="_blank">51CTO</a>
            <i class="arrow"></i>
        </div>
      </li>
                <li><a href="/site/login?reback=https%3A%2F%2Fblog.51cto.com%2F191226139%2F2058884%3Futm_source%3Doschina-app&logintype=reg" target="_self">注册</a></li>
          <li class="login"><a href="/site/login?reback=https%3A%2F%2Fblog.51cto.com%2F191226139%2F2058884%3Futm_source%3Doschina-app" target="_self">登录</a></li>
                        <li class="mRead">
          <a href="javascript:;">手机阅读</a>
          <div>
            <img src="https://static1.51cto.com/edu/blog/images/blog_qr.png">
            <p>扫一扫体验手机阅读</p>
            <i class="arrow"></i>
          </div>
        </li>
            <li class="search"><a href="https://blog.51cto.com/search/index"  target="_self">搜索</a></li>
                  <li class="write"><a href="javascript:;" onClick="Login()">写文章</a></li>
                  </ul>

          <div class="clear"></div>
  </div>
</div>
<script src="https://static1.51cto.com/edu/blog/mobile/js/lib/box.js"></script> 
<script>
    var isLogin = '0';
    var userId = '';
    var imgpath = 'https://s1.51cto.com/';
    var BLOG_URL = 'https://blog.51cto.com/';
    var msg_num_url = '/index/ajax-msg-num';
    $('.msg-follow, .msg-follow-max').eq(1).css({top: '91px'});
    $('.msg-follow, .msg-follow-max').eq(2).css({top: '121px'});
    setTimeout(function(){
            $.ajax({
                url:msg_num_url,
                type:"get",
                dataType:'json',
                success:function(res){
                    if(res.status == '0'){
                       //
                       var hasNewMsg = false;
                       if(res.data.msgNum > 0 && !$('#myMsg i').hasClass('dot')){
                            $('#myMsg i').addClass('dot');
                            hasNewMsg = true;
                       }
                       if(res.data.notifyNum > 0 && !$('#myNotify i').hasClass('dot')){
                           $('#myNotify i').addClass('dot');
                           hasNewMsg = true;
                       }
                       if(res.data.recommend_new > 0 && !$('#myRecommend i').hasClass('dot')){
                           $('#myRecommend i').addClass('dot');
                           hasNewMsg = true;
                       }
                       if(hasNewMsg && !$('#myAllMsg i').hasClass('dot')){
                           $('#myAllMsg i').addClass('dot');
                       }
                    }

                }
            });
    },70);
    //广告图
$(function(){
     new AutoAD({
      ADD:$('<a href="https://blog.51cto.com/cloumn/composedetail?id=4" class="closeMB" target="_blank" styel="display:block;"><img src="https://s1.51cto.com/images/blog/201906/13/379c45091637c6167ae046ceecea020d.jpg"></a><a class="closeMB" style="position: absolute;right:2px;top: 3px;width: 50px;height: 40px;cursor: pointer;" href="javascript:;"></a>'),
      W:500,
      H:400,
      cookie:'blog_activity_blog75',
      mask:"#000",
      ts:'21600',
      noCBtn: true
    }) 
})    
</script>
 <script src="//www.sobot.com/chat/frame/js/entrance.js?sysNum=a8d9379eaf884b4f81a48348979e3b1a" id="zhichiScript" class="zhiCustomBtn" data-args="manual=true"></script>
<a href="javascript:;" class="zhiCustomBtn" style="position: fixed;z-index: 2147483583;width: 60px;height: 6px;text-align: center;bottom:275px;right:0px;">
<span class="service-btn">在线<br/>客服</span>
</a>

<script type="text/javascript">
var zhiManager = (getzhiSDKInstance());
zhiManager.on("load", function() {
    zhiManager.initBtnDOM();
});
//zhiManager.set('title','垃圾/广告信息举报');
zhiManager.set('powered',false);
zhiManager.set('color', '4285f4');
zhiManager.set('customBtn', 'true');
zhiManager.set('moduleType',2);
zhiManager.set('size',{'width':360,'height':500});

zhiManager.set('userinfo', {partnerId:'',uname:'',params:'{"用户名":""}'});
zhiManager.set('customMargin', 20);
zhiManager.set('horizontal', 20);
zhiManager.set('vertical', 90);
zhiManager.set('preVisitArgs',{'preVisitUrl': document.referrer?document.referrer:''});
zhiManager.set('curVisitArgs',{'curVisitUrl': location.href,curVisitTitle:document.title,});
</script>
<div class="Content-box">
      <link rel="stylesheet" href="https://static1.51cto.com/edu/blog/css/mdeShow.css">
  <link rel="stylesheet" href="https://blog.51cto.com/static/js/ueditor1.4.3/prism.css">
  <script type="text/javascript" charset="utf-8" src="https://blog.51cto.com/static/js/ueditor1.4.3/prism.js"></script>
<link rel="stylesheet" href="https://static1.51cto.com/edu/blog/css/tinyscrollbar.css"/>
<script type="text/javascript" src="https://static1.51cto.com/edu/blog/js/jquery.tinyscrollbar.js"></script>
<div class="Content Index" style="padding-bottom: 50px;">
	<div class="Page M764">
		<!-- left start -->
		<div class="artical-Left-blog">
			<div class="status">
	        					<a class="tab_name original">原创</a>
							</div>
			<h1 class="artical-title">Centos 系统引导损坏修复、密码破解与加密</h1>
			<div class="artical-title-list">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/191226139" class="a-img" target="_blank"><img class="is-vip-img is-vip-img-4" data-uid="211244" src="https://ucenter.51cto.com/images/noavatar_middle.gif"></a>
				</div>
				<a href="https://blog.51cto.com/191226139" class="name fl" target="_blank" style="margin-right:0;">ljpwinxp</a>
									                	                    <a id="checkFollow1_211244" class="checkFollow-btn on fl" style="margin-left:8px;">关注</a>
	                	            				<a class="comment comment-num fr"><font class="comment_number">0</font>人评论</a>
				<span class="fr"></span>
				<a href="javascript:;" class="read fr">10597人阅读</a>
				<a href="javascript:;" class="time fr">2018-01-09 00:39:41</a>
				<div class="clear"></div>
			</div>
							<div class="artical-content-bak main-content editor-side-new">
          <div class="con editor-preview-side" id="result"><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;"></span></p><p><span style="font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;">Centos 6</span></p><p><span style="font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;"></span></p><p><span style="font-weight: bold;">实验环境：</span>VMware Workstation Pro 14（试用版）</p><p><span style="font-weight: bold;">系统平台：</span></p><p>CentOS release 6.9 (Final) 		 &nbsp; &nbsp; &nbsp; 内核 &nbsp;2.6.32-696.el6.x86_64</p><p><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;"></span><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">ramdisk(ramfs)丢失损坏</span></p><p> 内核中的特性之一：使用缓冲和缓存来加速对磁盘上的文件访问，并加载相应的硬件驱动</p><p>没有此文件，系统无法加载 / 分区，也就无法启动系统。</p><p>CentOS 5 文件名: initrd</p><p>CentOS 6，7文件名: initramfs</p><p><br/></p><p>当系统的ramfs文件丢失或损坏时，系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/d9dae4c70c814c6f88b2996bb2b6df8a/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428451262103.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428451262103.png" alt="1.png"/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>进入救援模式，重新生成ramdisk文件即可。</p><p>为当前正在使用的内核重新制作ramdisk文件，以下2种指令都可以。</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mkinitrd initramfs-`uname -r`.img `uname -r`</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># dracut initramfs-`uname -r`.img `uname -r`</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">GRUB相关</span></p><p><span style="font-weight: bold;"> MBR:</span></p><p>446: bootloader, 64: 分区表, 2: 55AA</p><p><span style="font-weight: bold;"> GRUB:</span></p><table><colgroup><col style="width: 97.667px;"/><col style="width: 175.667px;"/><col style="width: 346.667px;"/></colgroup><tbody><tr style="height: 16px;" class="firstRow"><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;">阶段</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;" width="70"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;">存放位置</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;" width="535.3333333333334"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;">作用</span></p></td></tr><tr style="height: 16px;"><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;">stage1</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;" width="225.33333333333334"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">MBR的446字节内</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;" width="535.3333333333334"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">MBR引导</span></p></td></tr><tr style="height: 16px;"><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;">stage1_5</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;" width="70"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">MBR之后的27个扇区</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap; word-break: break-all;" width="535.3333333333334"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">让stage1中的bootloader能识别stage2所在的</span><span style="color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;, STXihei;">分区上的文件系统，这个阶段可以加载驱动</span></p></td></tr><tr style="height: 16px;"><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;">stage2</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;" width="70"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">/boot/grub(grub2)</span></p></td><td style="font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;" width="535.3333333333334"><p><span style="font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);">grub的核心功能</span></p></td></tr></tbody></table><p>stage1是以二进制存放于磁盘，并不是文件形式。</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/d706407e59384181a285043d7545a165/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428502143881.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428502143881.png" alt="1.png"/></p><p><span style="font-weight: bold;"><br/></span></p><p><span style="font-weight: bold;">/boot/grub下的文件为：</span></p><p><span style="font-weight: bold;">主要是驱动与grub配置文件。这个目录下的文件只保留grub.conf的时候，系统是可以正常启动的</span></p><p><span style="font-weight: bold;"><br/></span></p><p><span style="font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;">stage1破坏修复</span></p><p><span style="font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;"><br/></span></p><p>stage1也就是bootloader所在,</p><p>模拟破坏(请不拿生产中的机器来做试验，本人不负责任)</p><p>#dd if=/dev/zero of=/dev/sda bs=1 count=446</p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/bf3335bd1a6b440c8730422675f2c1c0/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428543791642.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428543791642.png" alt="1.png"/></p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>1.进入救援模式</p><p>2.启动一个shell</p><p><img src="https://s1.51cto.com/images/20180109/1515428568954757.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428568954757.png" alt="1.png"/><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/2284dea5b7cb4f84ac3197889f5f65d3/clipboard.png" alt=""/></p><p>3.切换至原系统的根目录，一般救援模式进来的时候会提醒.(假如能找到/文件系统)</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># chroot /mnt/sysimage</span></p><p>4.<span style="color: rgb(223, 64, 42);">安装grub</span></p><p><span style="font-weight: bold;">方法(1) grub-install</span></p><p>安装grub stage1和stage1_5到/dev/DISK磁盘上，并复制GRUB相关文件到 DIR/boot目录下</p><p>grub-install &nbsp;/dev/DISK .<span style="color: rgb(223, 64, 42); font-weight: bold;">注意，是磁盘而非分区。</span>--root-directory=DIR 参数可选</p><p>此方法会一并重新生成/boot/grub下除了grub.conf之外的文件</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/4ccc2f095ba24967931294e4a49e4c59/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428587570888.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428587570888.png" alt="1.png"/></p><p><span style="font-weight: bold;">方法(2) grub</span></p><p><span style="color: rgb(223, 64, 42);">grub&gt; root (hd#,#) </span></p><p><span style="color: rgb(223, 64, 42);">grub&gt; setup (hd#) &nbsp;</span></p><p>可以看到系统已经写入GRUB信息至MBR</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/59881d4cc3b54121883c0e4cc4b4b0cb/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428604773076.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428604773076.png" alt="1.png"/></p><p><br/></p><p>第2种方法修复时，需要/boot/grub下有这些文件</p><p># ls -1</p><p>device.map &nbsp;e2fs_stage1_5 fat_stage1_5 ffs_stage1_5 grub.conf iso9660_stage1_5 jfs_stage1_5</p><p>menu.lst minix_stage1_5 reiserfs_stage1_5 splash.xpm.gz stage1 stage2 ufs2_stage1_5</p><p>vstafs_stage1_5 xfs_stage1_5</p><p>5.重启系统</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#exit 并reboot</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">开机直接出现grub&gt;</span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>grub&gt;<span style="color: rgb(223, 64, 42); font-weight: bold;"> root (hd#,#)</span> <span style="color: rgb(255, 255, 255);"> &nbsp;</span><span style="color: rgb(255, 255, 255); background-color: rgb(24, 78, 135);">root目录指的是/boot分区所在的磁盘位置。</span></p><p>grub&gt; <span style="color: rgb(223, 64, 42); font-weight: bold;">setup (hd#) </span> &nbsp;</p><p>小提示：root (hd0,然后按tab键补全，会有如下显示</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/3b8d957ce7e346ed8b34b666a2ff8d44/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428646281445.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428646281445.png" alt="1.png"/></p><p>输入<span style="color: rgb(223, 64, 42); font-weight: bold;">kernel /vm 按tab键</span>如果可以补全则说明是正确的，接着输入<span style="color: rgb(223, 64, 42); font-weight: bold;">ro root=/dev/sda1</span> 回车.注意(hd0,0)=/dev/sda1 (hd0,1)=/dev/sda2如图</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/7f0f911fcda942089a8163be9469bc41/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428663866412.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428663866412.png" alt="1.png"/></p><p>接着输入<span style="color: rgb(223, 64, 42); font-weight: bold;">initrd /ini 按tab键补全</span>，回车</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/63aecf16c7444e4891323bad325c2f4a/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428679516762.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428679516762.png" alt="1.png"/></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">输入boot</span>命令，这时系统会重新启动</p><p><br/></p><p><br/></p><p><span style="font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;">stage1.5破坏修复</span></p><p>模拟破坏</p><p># dd if=/dev/zero of=/dev/sda bs=1 count=13000 skip=512 seek=512</p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/db4c3bf43ba044a583779d3a87c1311f/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428699719252.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428699719252.png" alt="1.png"/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>进入救援模式</p><p>1.<span style="color: rgb(223, 64, 42); font-weight: bold;"># chroot /mnt/sysimage</span></p><p>2.<span style="color: rgb(223, 64, 42); font-weight: bold;">安装grub (上面有方法)</span></p><p>3.<span style="color: rgb(223, 64, 42);">多输入几次</span><span style="color: rgb(223, 64, 42); font-weight: bold;">sync</span></p><p>4.<span style="color: rgb(223, 64, 42); font-weight: bold;">#exit并reboot</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">stage2破坏修复</span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">grub.conf丢失</span></p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/c7adbfd7f33245af8f89ce73d8923e26/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428726253921.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428726253921.png" alt="1.png"/></p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>进入救援模式</p><p>1.<span style="color: rgb(223, 64, 42); font-weight: bold;"># chroot /mnt/sysimage</span></p><p>2.<span style="color: rgb(223, 64, 42); font-weight: bold;">安装grub (上面有方法)</span></p><p>3.<span style="color: rgb(223, 64, 42); font-weight: bold;">检查/boot/grub/grub.conf是否存在且正确</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/a176786eb673444ba23237b524ffad1e/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428744692600.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428744692600.png" alt="1.png"/></p><p>4.重启系统</p><p><br/></p><p><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">内核文件被破坏</span></p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/a7003e3e59cc48f38f25edd4c154d982/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428830850439.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428830850439.png" alt="1.png"/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>进入救援模式</p><p>1.<span style="color: rgb(223, 64, 42); font-weight: bold;"># chroot /mnt/sysimage</span></p><p>2.touch 一个文件 /boot检查磁盘是可写，如果为只读，mount -o remount,rw /dev/sdX /boot</p><p>3.如果挂载的救援模式是原ISO的DVD1的话，里面会有内核文件，如果没有DVD1光盘，请去其他地方下载同一内核版本的rpm包。</p><p>执行安装指令</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># rpm -ivh /光盘位置或指定位置/Packages/kernel-2.6.32-696.el6.x86_64.rpm --force</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/6a68bc2a813349f7b2d6851978eb350b/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428851407958.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428851407958.png" alt="1.png"/></p><p>4.重启系统</p><p><br/></p><p><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">/sbin/init 丢失破坏</span></p><p>模拟破坏</p><p># rm -rf /sbin/init</p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/9c907a091144408c99a7260ad1f072ec/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428874346065.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428874346065.png" alt="1.png"/></p><p>此时输入什么都是报错误的</p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>1.重启系统至引导菜单，注意按上下箭头，以免超时跳过去。按<span style="color: rgb(223, 64, 42); font-weight: bold;"> e</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/fb40a439c9134fbd8b202c733895c92b/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428889424167.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428889424167.png" alt="1.png"/></p><p>2 在<span style="color: rgb(223, 64, 42); font-weight: bold;">kernel</span>一行中，按 <span style="color: rgb(223, 64, 42); font-weight: bold;">e</span> 编辑</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/75c9d9ff100a447a95ebeae78f99dc44/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428903509597.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428903509597.png" alt="1.png"/></p><p>使用<span style="color: rgb(223, 64, 42); font-weight: bold;"> /bin/bash</span> 代替sbin/init</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/3a29f6b08fcb47b6acde43248c1f4b1d/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428917178401.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428917178401.png" alt="1.png"/></p><p>按 <span style="color: rgb(223, 64, 42); font-weight: bold;">b</span> 启动系统</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/dc90c87c8ad64a81a6bc203b10f59c38/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428935724455.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428935724455.png" alt="1.png"/></p><p>任意输入一条命令，如果能出来结果，表示 系统启用/bin/bash为第一个进程</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/b5899645158543b7bf83f26aa8b11ca7/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428957744934.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428957744934.png" alt="1.png"/></p><p>3. 重新挂载<span style="color: rgb(223, 64, 42); font-weight: bold;"> /</span> 分区为 读写模式</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#mount -o remount,rw /</span></p><p>4 挂载光盘</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mount /dev/sr0 /mnt</span></p><p>5.重新安装/sbin/init 。此执行文件对应的安装为<span style="color: rgb(223, 64, 42); font-weight: bold;">upstart &nbsp;</span><span style="font-weight: bold;">各个操作系统版本不一样，注意即可。</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># rpm -ivh /mnt/Packages/upstart-0.6.5-16.el6.x86_64.rpm --force</span></p><p><span style="color: rgb(128, 128, 128); font-weight: bold;">使用以下方法也能达到同样效果：</span></p><p><span style="color: rgb(128, 128, 128); font-weight: bold;"># rpm2cpio /mnt/Packages/upstart-0.6.5-16.el6.x86_64.rpm | cpio -idv ./sbin/init</span></p><p><span style="color: rgb(128, 128, 128); font-weight: bold;"># cp sbin/init /sbin/</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/0a335e95a80d449c8e1fdeb9fbcf3981/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515428977802802.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515428977802802.png" alt="1.png"/></p><p>6. <span style="color: rgb(223, 64, 42); font-weight: bold;"># ls /sbin/init </span>是否已经生成。</p><p>7.直接按硬件按钮的<span style="color: rgb(223, 64, 42); font-weight: bold;">重启</span>吧</p><p>至此，修复完成</p><p><br/></p><p><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">逻辑卷环境下 /boot分区破坏，/etc/fstab丢失</span></p><p>原先的系统是以LVM卷方式安装的</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/e425e6bfdfde4789b11568da6fdbf108/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429015936131.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429015936131.png" alt="1.png"/></p><p>模拟破坏</p><p># rm -rf /boot/ /etc/fstab</p><p>系统启动时表现为</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/d1e65f6e510b4176bc24317131ddb9ca/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429030371605.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429030371605.png" alt="1.png"/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p>进入救援模式</p><p>会提示</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/743d525daf5c490688b6b650875912e4/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429053163928.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429053163928.png" alt="1.png"/></p><p>启动shell</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/6128182f106f4998afea469fa465235a/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429066872941.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429066872941.png" alt="1.png"/></p><p>1.<span style="color: rgb(223, 64, 42); font-weight: bold;">#vgs </span>查看下VG卷</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/73d3a6e5ae2b4e0e9edc504054121456/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429079980999.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429079980999.png" alt="1.png"/></p><p>2. <span style="color: rgb(223, 64, 42); font-weight: bold;">#fdisk -l</span>找出原来系统的boot分区,带*号启动的应该是/boot</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/61b21036c35a407e968b8014e13a86d7/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429091717600.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429091717600.png" alt="1.png"/></p><p>3.<span style="color: rgb(223, 64, 42); font-weight: bold;">#lvdisplay</span>查看LV卷状态，可以看到是未激活状态</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/f470c34b48dc4b17a2439820cbeee485/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429103515345.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429103515345.png" alt="1.png"/></p><p>4 .<span style="color: rgb(223, 64, 42); font-weight: bold;"># vgchange -ay </span>激活VG卷</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/4d78d7ac57ce4dd29bae8df39ee94a5e/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429117226429.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429117226429.png" alt="1.png"/></p><p>5 <span style="color: rgb(223, 64, 42); font-weight: bold;">#lvdisplay</span>查看LV卷状态，可以看到是已激活状态</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/86454e671fcb45ae908eff530434491a/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429133536634.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429133536634.png" alt="1.png"/></p><p>6 <span style="color: rgb(223, 64, 42); font-weight: bold;">#blkid </span>能看到分区文件系统和挂载路径和UUID</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/12ce10b490e34c6899648e736e28fc84/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429147723989.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429147723989.png" alt="1.png"/></p><p>7.创建临时目录挂载找到的分区，确认/和/boot分区。注意，这里是支持TAB键补全的。</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mkdir /mnt/root</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mount /dev/VolGroup/lv_root /mnt/root</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/ba5d39a464d541e3bf26cb2435b5f883/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429172912277.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429172912277.png" alt="1.png"/></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mkdir /mnt/boot &nbsp; </span>正常情况，因为是使用rm -rf /boot 挂载时应该是没有任何文件的</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mount /dev/sda1 /mnt/boot</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/95d704a559bc4afc816ce7c07cf8d4b8/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429194511322.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429194511322.png" alt="1.png"/></p><p>8<span style="color: rgb(223, 64, 42); font-weight: bold;"> cat /etc/mtab</span> 能看到目前挂载情况</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/42c2dfb15999413a912c68ba2cb0c0f2/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429206306272.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429206306272.png" alt="1.png"/></p><p>9 创建原有系统的fstab ,注意这里生成的文件位置</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#cat &gt; /mnt/root/etc/fstab &lt;&lt; eof</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">/dev/mapper/VolGroup-lv_root / ext4 defaults 0 0</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">/dev/sda1 /boot ext4 defaults 0 0</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">eof</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/f6816d4c4c8c4beb97405ccc57bd1e0e/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429221423744.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429221423744.png" alt="1.png"/></p><p>10 <span style="color: rgb(223, 64, 42); font-weight: bold;">#exit</span> 选reboot</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/ce74e57708854473929edc5959ff6687/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429236297857.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429236297857.png" alt="1.png"/></p><p>11.再次进入救援模式</p><p>现在救援模式能侦测到根系统了</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/d3e272522e4f493ebf315ac255d620ac/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429252635536.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429252635536.png" alt="1.png"/></p><p>按照向导开启shell</p><p>12<span style="color: rgb(223, 64, 42); font-weight: bold;"> # chroot /mnt/sysimage</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#lsblk </span>可以看出原有系统的挂载情况了</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/86d1f5eec348465c8d3475e09ec9b452/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429266555896.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429266555896.png" alt="1.png"/></p><p>13 挂载光盘</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mkdir /mnt/cdrom</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mount /dev/cdrom /mnt/cdrom</span></p><p>14 安装内核</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"> # rpm -ivh /mnt/cdrom/Packages/kernel-2.6.32-696.el6.x86_64.rpm --force</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/539cc1294cf64b1bbb435e19a44c1790/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429283974573.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429283974573.png" alt="1.png"/></p><p>15 修复Grub</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># grub-install /dev/sda</span></p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/51b2b123504f45ed837502c1b83d5987/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429314527274.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429314527274.png" alt="1.png"/></p><p>16 修复grub.conf</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># vi /boot/grub/grub.conf &nbsp; ,可以使用vi的命令这些功能</span></p><p>列出命令结果到当前编辑行的下一行，支持TAB补全</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/948e0f357c8f473bad3528dcb3b04afc/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429302254189.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429302254189.png" alt="1.png"/></p><p>列出设备的UUID</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/9c218628f18142a3b7022e4d1edef182/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429327537296.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429327537296.png" alt="1.png"/></p><p>最终写好的文件如下</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/d81072416fe7449c9093b45906f44d86/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429342180017.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429342180017.png" alt="1.png"/></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#exit</span> 重启</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/e9d18efdb7e648bbb90d90131ea69532/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429368644216.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429368644216.png" alt="1.png"/></p><p>如果启用了selinux的话，系统会在第一次重启时进行配置、</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/c8abdc19113f4b9d94c5ddc61fd74129/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429390836903.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429390836903.png" alt="1.png"/></p><p>第二次重新启动时，系统就正常了。之后再把把</p><p>17 把swap添加到fstab，并启用</p><p><span style="color: rgb(223, 64, 42);">UUID=8e0a6121-97d7-4c70-b113-bbe4cefe0380 swap swap defaults 0 0</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># swapon -a</span></p><p>建议把fstab文件重新修正为使用UUID方式</p><p>至此，系统修复完成。</p><p><br/></p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">手动在grub命令行接口启动系统</span></p><p>grub&gt; root (hd#,#)</p><p>grub&gt; kernel /vmlinuz-VERSION-RELEASE ro</p><p>root=/dev/DEVICE</p><p>grub&gt; initrd /initramfs-VERSION-RELEASE.img</p><p>grub&gt; boot</p><p><br/></p><p><br/></p><p><span style="font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;">root密码破解</span></p><p><span style="font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">方法1：</span></p><p>1.重启系统至引导菜单，注意按上下箭头，以免超时跳过去。</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/f776ee7fb8eb4bcfae690730f24d50cc/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429426235067.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429426235067.png" alt="1.png"/></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">按 a ,健入以下字符，1代表是单用户模式</span></p><p>1, s, S或single都可以，之后直接回车启动系统</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/6553be70c70e41f887bca48617764d39/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429440571071.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429440571071.png" alt="1.png"/></p><p>无需要输入密码就以root身份进入系统了，直接passwd root修改</p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">方法2：</span></p><p>进入救援模式，chroot /mnt/sysimage 之后，直拉用passwd root修改</p><p><br/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">方法3：</span></p><p>进入救援模式，chroot /mnt/sysimage 之后，直接修改/etc/shadow ，把root的密码栏位清空。需要vi时加入wq!</p><p>不过，重启后注意尽快修改密码</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/98fd8005e07245c0a64ea887d62589b6/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429459977882.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429459977882.png" alt="1.png"/></p><p><br/></p><p><br/></p><p><span style="background-color: rgb(250, 226, 32); font-weight: bold;">grub加密</span></p><p>当然，既然有破解密码的，也有相应加强安全的.</p><p>将下面一行放入不同位置将会有不同的效果</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">password [--md5|--encrypted ] 加密的字符串</span></p><p>放在每个title之前行 ： 启动grub菜单时进行进行认证</p><p>放在每个title之末尾行 ： 启动选定的内核或操作系统时进行认证</p><p><img src="C:/Users/Hunk/AppData/Local/YNote/data/ljpwinxp2@163.com/ea6a0d8a8c5c4d5aa8d37e18252e93cf/clipboard.png" alt=""/><img src="https://s1.51cto.com/images/20180109/1515429484427913.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515429484427913.png" alt="1.png"/></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">生成grub口令</span></p><p> grub-md5-crypt &nbsp; 	对应的是--md5</p><p> grub-crypt		对应的是--encrypted</p><p><br/></p><hr/><p><span style="font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;">Centos 7</span></p><p><span style="font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;"></span></p><p style="font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, 微软雅黑, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; max-width: 100%; font-weight: bold;">实验环境：</span>VMware Workstation Pro 14（试用版）</p><p style="font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, 微软雅黑, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);"><span style="margin: 0px; padding: 0px; max-width: 100%; font-weight: bold;">系统平台：</span></p><p style="font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, 微软雅黑, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);">CentOS Linux release 7.4.1708 (Core)	&nbsp; &nbsp; &nbsp; 内核 &nbsp;3.10.0-693.el7.x86_64</p><p><br/></p><p>模拟破坏(请不拿生产中的机器来做试验，本人不负责任)</p><p>模拟stage1 &nbsp;stage1.5 &nbsp;stage2 阶段破坏</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># dd if=/dev/zero of=/dev/sda bs=1 count=446</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># dd if=/dev/zero of=/dev/sda bs=1 count=13000 skip=512 seek=512</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># rm -rf /boot</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="background-color: rgb(119, 201, 75); font-weight: bold;">修复如下：</span></p><p><span style="font-weight: bold;">1.进入救援模式</span></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487336503786.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487336503786.png" alt="1.png"/></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487350942442.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487350942442.png" alt="1.png"/></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487367783543.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487367783543.png" alt="1.png"/></p><p>系统发现根系统</p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487381341738.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487381341738.png" alt="1.png"/></p><p><span style="font-weight: bold;">2. 切换至待修复的根系统</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># chroot /mnt/sysimage</span></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487395993153.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487395993153.png" alt="1.png"/></p><p>查看到/dev/sda确实没有MBR信息</p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487410628492.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487410628492.png" alt="1.png"/></p><p><span style="font-weight: bold;">3.修复Grub</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># grub2-install &nbsp;/dev/sda </span>.<span style="color: rgb(223, 64, 42); font-weight: bold;">注意，是磁盘而非分区</span></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487424471255.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487424471255.png" alt="1.png"/></p><p><span style="font-weight: bold;">4.安装内核</span></p><p>挂载光盘</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># mount /dev/sr0 /mnt</span></p><p>如果挂载的救援模式是原ISO的DVD1的话，里面会有内核文件，如果没有DVD1光盘，请去其他地方下载同一内核版本的rpm包。</p><p>执行安装指令</p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># rpm -ivh /光盘位置或指定位置/Packages/kernel-3.10.0-693.el7.x86_64.rpm --force</span></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487440502192.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487440502192.png" alt="1.png"/></p><p><span style="font-weight: bold;">5.生成gurb配置文件</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">注意这一步不能和第4步颠倒</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># grub2-mkconfig -o /boot/grub2/grub.cfg</span></p><p><img src="https://blog.51cto.com/static/js/ueditor1.4.3/themes/default/images/spacer.gif"/><img src="https://s1.51cto.com/images/20180109/1515487451277187.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" title="1515487451277187.png" alt="1.png"/></p><p><span style="font-weight: bold;">6.保存并重启</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"># exit</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#sync</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#sync</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;">#reboot</span></p><p><span style="color: rgb(223, 64, 42); font-weight: bold;"><br/></span></p><p><span style="color:#df402a"></span></p><p><span style="font-size: 16px; color: rgb(119, 201, 75); font-weight: bold;">至此，系统修复完成。</span></p><p><span style="color:#df402a"></span><br/></p><p>Centos 7修复与Centos 6相差不大，只是使用的命令有些不同。</p><p><br/></p></div>
				</div>
													<div class="artical-copyright mt26">©著作权归作者所有：来自51CTO博客作者ljpwinxp的原创作品，如需转载，请注明出处，否则将追究法律责任</div>
									<div class="for-tag mt26">
																						<a href="https://blog.51cto.com/search/result?q=Centos" target="_blank">Centos</a>
																								<a href="https://blog.51cto.com/search/result?q=%E7%B3%BB%E7%BB%9F" target="_blank">系统</a>
																								<a href="https://blog.51cto.com/search/result?q=%E5%BC%95%E5%AF%BC" target="_blank">引导</a>
															                				<a class="last" href="https://blog.51cto.com/191226139/category2.html" target="_blank"><i></i>Linux</a>
                				<div class="clear"></div>
			</div>
			<div class="more-list">
				<p class="is-praise fl "><span type="1" blog_id="2058884" userid='211244'>0</span></p>
				<div class="share-box fr">
					<p class="share"><i></i>分享</p>
					<div class="bdsharebuttonbox">
					  <span></span>
					  <a class="bds_tsina" data-cmd="tsina" >微博</a>
					  <a class="bds_sqq" data-cmd="sqq" >QQ</a>
					  <a class="bds_weixin" data-cmd="weixin" >微信</a>
					  <img src="/qr/qr-url?url=https%3A%2F%2Fblog.51cto.com%2F191226139%2F2058884">
					</div>
				</div>
				<p class="favorites favorites-opt fr"><i></i>收藏</p>
								<div class="clear"></div>
			</div>
							<div class="artical-list">
	            					<a class="fl" href="https://blog.51cto.com/191226139/2058878" title="Centos 系统引导与相关服务命令">
						上一篇：Centos 系统引导与相关服务...</a>
	            	            					<a class="fr" href="https://blog.51cto.com/191226139/2059117" title="Centos 7 源码编译安装内核4.14.12">
						下一篇：Centos 7 源码编译安装内...</a>
	            					<div class="clear"></div>
				</div>
						<div class="author-module">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/191226139" class="a-img" target="_blank">
						<img class="is-vip-img is-vip-img-4" data-uid="211244" src="https://ucenter.51cto.com/images/noavatar_middle.gif">
					</a>
				</div>
				<div class="author-module-center fl">
					<a class="h2" href="https://blog.51cto.com/191226139" target="_blank" style="display:inline-block;">ljpwinxp</a>
										<h3>110篇文章，336W+人气，88粉丝</h3>
									</div>
									<div class="author-module-right author-checkFollow fr">
          	                  <a id="checkFollow2_211244" class="follow-1 checkFollow on">关注</a>
              					</div>
        				<div class="clear"></div>
			</div>
		</div>
		<div class="artical-Left" id="comment">
			<!-- 发布评论 -->
			<div class="comment-creat">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/191226139" class="header-img" target="_blank">
						<img  src="https://ucenter.51cto.com/images/noavatar_middle.gif"/>
					</a>
				</div>
				<div class="first-publish fr publish_user_id">
					<textarea class="textareadiv textareadiv-publish" name="" id="" placeholder="提问和评论都可以，用心的回复会被更多人看到和认可"  maxlength="500"></textarea>
					<div class="comment-push">
						<p class="msg fl">Ctrl+Enter&nbsp;发布</p>
													<p class="publish-btn blue-btn fr" flag="1">发布</p>
												<p class="cancel-btn cancel-btn-1 fr">取消</p>
						<div class="clear"></div>
					</div>
					<input type="hidden" class="user_id" value="211244">
					<input type="hidden" class="reply_id" value="2058884">
					<input type="hidden" class="first_pid" value="">
				</div>
				<div class="clear"></div>
			</div>
						<div class="commentList">
			</div>
			<!-- page -->
			<div class="act_pageList_box"></div>
		</div>
		<!-- end left -->
		<!-- right start -->
		<div class="Blog-Right artical-Right">
			<a class="catalog"></a>
			<a class="scrollTop" href="javascript:void(0);" onclick="$(window).scrollTop(0);"></a>
		</div>
		<!-- end right  -->
	</div>
			<div class="special-column">
			<div class="Page M764">
									<div class="column-1">
						<h2 class="column-tit">推荐专栏<a href="/cloumn/index?utm_source=p" target="_blank"><span class="recommend-more-span" style="">更多</span></a></h2>
													<div class="column-box">
								<a href="https://blog.51cto.com/cloumn/detail/30" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="https://s1.51cto.com/images/blog/201811/06/5353379fc95da1d7d34fd243b9ace17f.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space" href="https://blog.51cto.com/cloumn/detail/30" target="_blank"> 全局视角看大型园区网</a>
									<h3 class="white-space">路由交换+安全+无线+优化+运维</h3>
									<h4 class="white-space">共40章&nbsp;|&nbsp;<a href="https://blog.51cto.com/weilan2222" target="_blank">51CTO夏杰</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>1735人订阅</span></h5>
								</div>
								<div class="right fr">
							        																							<a class="cloumn-subscribe" cid="30" href="/cloumn/detail/30" ask='1' target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box">
								<a href="https://blog.51cto.com/cloumn/detail/18" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="https://s1.51cto.com/images/blog/201808/20/45862f289339dc922ffda669fd74ad9b.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space" href="https://blog.51cto.com/cloumn/detail/18" target="_blank"> 网工2.0晋级攻略 ——零基础入门Python/Ansible</a>
									<h3 class="white-space">网络工程师2.0进阶指南</h3>
									<h4 class="white-space">共30章&nbsp;|&nbsp;<a href="https://blog.51cto.com/gingerbeer" target="_blank">姜汁啤酒</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>1584人订阅</span></h5>
								</div>
								<div class="right fr">
							        																							<a class="cloumn-subscribe" cid="18" href="/cloumn/detail/18" ask='1' target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box">
								<a href="https://blog.51cto.com/cloumn/detail/13" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="https://s1.51cto.com/images/blog/201808/03/a940c66317ecbe58436a2ad3831c2d7d.png">
                													</a>
								<div class="center fl">
									<a class="h2 white-space" href="https://blog.51cto.com/cloumn/detail/13" target="_blank"> 基于Python的DevOps实战</a>
									<h3 class="white-space">自动化运维开发新概念</h3>
									<h4 class="white-space">共20章&nbsp;|&nbsp;<a href="https://blog.51cto.com/yuhongchun" target="_blank">抚琴煮酒</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>432人订阅</span></h5>
								</div>
								<div class="right fr">
							        																							<a class="cloumn-subscribe" cid="13" href="/cloumn/detail/13" ask='1' target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box">
								<a href="https://blog.51cto.com/cloumn/detail/6" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="https://s1.51cto.com/images/blog/201811/28/629650e188ddde78b213e564c2e9ebff.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space" href="https://blog.51cto.com/cloumn/detail/6" target="_blank"> 负载均衡高手炼成记</a>
									<h3 class="white-space">高并发架构之路</h3>
									<h4 class="white-space">共15章&nbsp;|&nbsp;<a href="https://blog.51cto.com/sery" target="_blank">sery</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>509人订阅</span></h5>
								</div>
								<div class="right fr">
							        																							<a class="cloumn-subscribe" cid="6" href="/cloumn/detail/6" ask='1' target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box">
								<a href="https://blog.51cto.com/cloumn/detail/5" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="https://s1.51cto.com/images/blog/201804/27/dc6736c5fd50474b5df8b76b040e3d03.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space" href="https://blog.51cto.com/cloumn/detail/5" target="_blank"> 带你玩转高可用</a>
									<h3 class="white-space">前百度高级工程师的架构高可用实战</h3>
									<h4 class="white-space">共15章&nbsp;|&nbsp;<a href="https://blog.51cto.com/13527416" target="_blank">曹林华</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>463人订阅</span></h5>
								</div>
								<div class="right fr">
							        																							<a class="cloumn-subscribe" cid="5" href="/cloumn/detail/5" ask='1' target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
											</div>
													<div class="column-2" style="margin-top: 76px;">
						<h2 class="column-tit">猜你喜欢</h2>
						<div class="column-box">
															<a class="white-space" href="https://blog.51cto.com/191226139/2362894?source=dra" target="_blank">gitlab 11.3.0 迁移至 docker 版本gitlab 11.8.1</a>
															<a class="white-space" href="https://blog.51cto.com/191226139/2362758?source=dra" target="_blank">docker 部署 gitlab最新版本( 当前 11.8.1通过验证)</a>
															<a class="white-space" href="https://blog.51cto.com/14204744/2366896?source=drt" target="_blank">DNS域名系统</a>
															<a class="white-space" href="https://blog.51cto.com/467754239/1700828?source=drt" target="_blank">ELK 日志分析系统</a>
															<a class="white-space" href="https://blog.51cto.com/yulp2010/317398?source=drt" target="_blank">如何查看Linux操作系统版本？</a>
															<a class="white-space" href="https://blog.51cto.com/12800391/1933714?source=drt" target="_blank">免费的上网行为管理系统和软路由系统推荐。</a>
															<a class="white-space" href="https://blog.51cto.com/feihan21/1174650?source=drt" target="_blank">linux 的date命令及系统时间设置</a>
															<a class="white-space" href="https://blog.51cto.com/wangchunhai/278207?source=drt" target="_blank">Panabit流量管理系统使用经验</a>
															<a class="white-space" href="https://blog.51cto.com/liguxk/152912?source=drt" target="_blank">常用查看Linux系统信息命令 </a>
															<a class="white-space" href="https://blog.51cto.com/rickyfang/214913?source=drt" target="_blank">64位系统上使用××× Client端</a>
															<a class="white-space" href="https://blog.51cto.com/nameyjj/557424?source=drt" target="_blank">linux查看内核版本、系统版本、系统位数（32or64）</a>
															<a class="white-space" href="https://blog.51cto.com/wangchunhai/100036?source=drt" target="_blank">Linux操作系统基本使用知识</a>
															<a class="white-space" href="https://blog.51cto.com/14163901/2412775?source=drh" target="_blank">Tomcat实现session会话保持（一）</a>
															<a class="white-space" href="https://blog.51cto.com/14322729/2412355?source=drh" target="_blank">Linux内核+Busybox自制linux系统</a>
															<a class="white-space" href="https://blog.51cto.com/13760351/2412169?source=drh" target="_blank">Shell 脚本自动安装cobbler（改进+填坑）</a>
															<a class="white-space" href="https://blog.51cto.com/13613726/2411867?source=drh" target="_blank">【我的Linux，我做主！】碉堡了！大神带你飞--Linux运维实战</a>
															<a class="white-space" href="https://blog.51cto.com/14234542/2410959?source=drh" target="_blank">KVM实现haproxy+keepalived高可用调度分离小架构</a>
															<a class="white-space" href="https://blog.51cto.com/14154700/2410203?source=drh" target="_blank">centos  7配置firewall防火墙的地址伪装和端口转发实例</a>
															<a class="white-space" href="https://blog.51cto.com/xbzy007/2410081?source=drh" target="_blank">zabbix 日志监控（自定义插件开发）</a>
															<a class="white-space" href="https://blog.51cto.com/14309999/2409598?source=drh" target="_blank">部署zabbix监控平台</a>
														<div class="clear"></div>
						</div>
					</div>
							</div>
		</div>
		<div class="group_img_box">
		<div class="group_git_box">
                	 <img src="https://s1.51cto.com/images/blog/201905/05/f92360e227f9d91cdff7ea95120630ef.png" style="width:70px;height:70px;"/> 	
			<!--<img src="https://s1.51cto.com/images/blog/201810/22/078772c84eb23213ea90f577d9316ce4.png"/>-->
        		</div>
			<div class="group_code_box">
			<img src="https://static1.51cto.com/edu/blog/mobile/images/left-qr.jpg" width="130" height="130">
			<p>扫一扫,领取大礼包</p>
		</div>
	</div>		
	<div class="the-lowest-bg">
		<div class="the-lowest Page M764">
			<p class="is-praise fl "><span type="1" blog_id="2058884" userid='211244'></span></p>
			<p class="b-favorites favorites-opt fl"><i></i><b>2</b></p>
			<a class="b-reply fl"><i></i><font class="comment_number"></font></a>
			<div class="b-share fl">
				<i></i>分享
				<div class="bdsharebuttonbox">
				  <a class="bds_tsina p2" data-cmd="tsina"></a>
				  <a class="bds_sqq p3" data-cmd="sqq"></a>
				  <a class="bds_weixin p1" data-cmd="weixin"><em class="code-icon"></em><img class="code-img" src="/qr/qr-url?url=https%3A%2F%2Fblog.51cto.com%2F191226139%2F2058884"></a>
				</div>
			</div>
      				<div class="b-fllow author-checkFollow fr" style="margin-left: 20px;">
                        <a id="checkFollow3_211244" class="follow-1 checkFollow on">关注</a>
          				</div>
      						<a href="https://blog.51cto.com/191226139" class="b-name fr">ljpwinxp</a>
			<div class="is-vip-bg-6 fr">
				<a href="https://blog.51cto.com/191226139" class="b-img"><img class="is-vip-img is-vip-img-4" data-uid="211244" src="https://ucenter.51cto.com/images/noavatar_middle.gif"></a>
			</div>
			<div class="clear"></div>

		</div>
	</div>
</div>
<!-- 老博文美观处理 -->
	<script src="https://static1.51cto.com/edu/blog/js/shCores.js"></script>
<script src="https://static1.51cto.com/edu/blog/js/countDown.js"></script>
<script>
	var praise_url = 'https://blog.51cto.com/praise/praise'
    	addReply_url = 'https://blog.51cto.com/comments/add'
    	removeUrl = 'https://blog.51cto.com/comments/del'
    	blog_id = '2058884'
    	pv_log_info = {
            'pv_type':'blog',
            'user_id':'211244',
            'blog_id':'2058884'
        };
    	rid = '0'
    	is_comment = '0'
    	comment_list = '/blog/ajax-comment-list'
    	comment_sort = "asc"
    	index_url = 'https://blog.51cto.com/191226139';
    	uc_url = 'https://ucenter.51cto.com/'
    	blog_url = 'https://blog.51cto.com/'
    	img_url = 'https://static1.51cto.com/edu/blog/'
    	i_user_id = ''
    	c_user_id ='211244'
    	collect_url = 'https://blog.51cto.com/collect/add'
    	is_old = '1'
    	nicknameurl = 'https://blog.51cto.com/191226139'
    	nickname = 'ljpwinxp'
    	myself = window.location.href;
	$('.you-like-list li:odd').css({'margin-left': '10%'});
	$('.column-box a:odd').addClass('left-list')
	$('.myUrl').text(myself).click(function(){window.open(myself)})
	setTimeout(function(){$('.Footer').css({'margin-top':'-50px'})},50)
    		function FollowBtnSucc(e){//1:未关注,2:已关注,3:互相关注
		    if(e==2||e==3){
		        $.post('/index/wxbind',{uid:userId},function(res){
		            if(res.data.wxBind == 0){//没绑定
	                    if(getCookie('follow1'))return false;
	                    box1()
	                }else{
	                    if(getCookie('follow2'))return false;
	                    box2()
	                }
		        },'json')
		    }
		}
		FollowBtn = new Follow($('#checkFollow1_211244'),'211244','1',['on','in','mutual','off']);
		FollowBtn.success=FollowBtnSucc;
		FollowBtn = new Follow($('#checkFollow2_211244'),'211244','1',['on','in','mutual','off']);
		FollowBtn.success=FollowBtnSucc;
		FollowBtn = new Follow($('#checkFollow3_211244'),'211244','1',['on','in','mutual','off']);
		FollowBtn.success=FollowBtnSucc;
        	if(is_old==1){
    // SyntaxHighlighter.all();
    insertCodeElement("<p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\"><\/span><\/p><p><span style=\"font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;\">Centos 6<\/span><\/p><p><span style=\"font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;\"><\/span><\/p><p><span style=\"font-weight: bold;\">\u5b9e\u9a8c\u73af\u5883\uff1a<\/span>VMware Workstation Pro 14\uff08\u8bd5\u7528\u7248\uff09<\/p><p><span style=\"font-weight: bold;\">\u7cfb\u7edf\u5e73\u53f0\uff1a<\/span><\/p><p>CentOS release 6.9 (Final) \t\t &nbsp; &nbsp; &nbsp; \u5185\u6838 &nbsp;2.6.32-696.el6.x86_64<\/p><p><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\"><\/span><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">ramdisk(ramfs)\u4e22\u5931\u635f\u574f<\/span><\/p><p>\uf076 \u5185\u6838\u4e2d\u7684\u7279\u6027\u4e4b\u4e00\uff1a\u4f7f\u7528\u7f13\u51b2\u548c\u7f13\u5b58\u6765\u52a0\u901f\u5bf9\u78c1\u76d8\u4e0a\u7684\u6587\u4ef6\u8bbf\u95ee\uff0c\u5e76\u52a0\u8f7d\u76f8\u5e94\u7684\u786c\u4ef6\u9a71\u52a8<\/p><p>\u6ca1\u6709\u6b64\u6587\u4ef6\uff0c\u7cfb\u7edf\u65e0\u6cd5\u52a0\u8f7d \/ \u5206\u533a\uff0c\u4e5f\u5c31\u65e0\u6cd5\u542f\u52a8\u7cfb\u7edf\u3002<\/p><p>CentOS 5 \u6587\u4ef6\u540d: initrd<\/p><p>CentOS 6\uff0c7\u6587\u4ef6\u540d: initramfs<\/p><p><br\/><\/p><p>\u5f53\u7cfb\u7edf\u7684ramfs\u6587\u4ef6\u4e22\u5931\u6216\u635f\u574f\u65f6\uff0c\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/d9dae4c70c814c6f88b2996bb2b6df8a\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428451262103.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428451262103.png\" alt=\"1.png\"\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f\uff0c\u91cd\u65b0\u751f\u6210ramdisk\u6587\u4ef6\u5373\u53ef\u3002<\/p><p>\u4e3a\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u5185\u6838\u91cd\u65b0\u5236\u4f5cramdisk\u6587\u4ef6\uff0c\u4ee5\u4e0b2\u79cd\u6307\u4ee4\u90fd\u53ef\u4ee5\u3002<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mkinitrd initramfs-`uname -r`.img `uname -r`<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># dracut initramfs-`uname -r`.img `uname -r`<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">GRUB\u76f8\u5173<\/span><\/p><p><span style=\"font-weight: bold;\">\uf076 MBR:<\/span><\/p><p>446: bootloader, 64: \u5206\u533a\u8868, 2: 55AA<\/p><p><span style=\"font-weight: bold;\">\uf076 GRUB:<\/span><\/p><table><colgroup><col style=\"width: 97.667px;\"\/><col style=\"width: 175.667px;\"\/><col style=\"width: 346.667px;\"\/><\/colgroup><tbody><tr style=\"height: 16px;\" class=\"firstRow\"><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;\">\u9636\u6bb5<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;\" width=\"70\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;\">\u5b58\u653e\u4f4d\u7f6e<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; background-color: rgb(251, 192, 140); white-space: pre-wrap;\" width=\"535.3333333333334\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); background-color: transparent; font-weight: bold;\">\u4f5c\u7528<\/span><\/p><\/td><\/tr><tr style=\"height: 16px;\"><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;\">stage1<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\" width=\"225.33333333333334\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">MBR\u7684446\u5b57\u8282\u5185<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\" width=\"535.3333333333334\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">MBR\u5f15\u5bfc<\/span><\/p><\/td><\/tr><tr style=\"height: 16px;\"><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;\">stage1_5<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\" width=\"70\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">MBR\u4e4b\u540e\u768427\u4e2a\u6247\u533a<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap; word-break: break-all;\" width=\"535.3333333333334\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">\u8ba9stage1\u4e2d\u7684bootloader\u80fd\u8bc6\u522bstage2\u6240\u5728\u7684<\/span><span style=\"color: rgb(0, 0, 0); font-family: &quot;Microsoft YaHei&quot;, STXihei;\">\u5206\u533a\u4e0a\u7684\u6587\u4ef6\u7cfb\u7edf\uff0c\u8fd9\u4e2a\u9636\u6bb5\u53ef\u4ee5\u52a0\u8f7d\u9a71\u52a8<\/span><\/p><\/td><\/tr><tr style=\"height: 16px;\"><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0); font-weight: bold;\">stage2<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\" width=\"70\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">\/boot\/grub(grub2)<\/span><\/p><\/td><td style=\"font-size: 14px; color: rgb(57, 57, 57); border-color: rgb(167, 167, 167); overflow: hidden; word-wrap: break-word; white-space: pre-wrap;\" width=\"535.3333333333334\"><p><span style=\"font-family: &quot;Microsoft YaHei&quot;, STXihei; color: rgb(0, 0, 0);\">grub\u7684\u6838\u5fc3\u529f\u80fd<\/span><\/p><\/td><\/tr><\/tbody><\/table><p>stage1\u662f\u4ee5\u4e8c\u8fdb\u5236\u5b58\u653e\u4e8e\u78c1\u76d8\uff0c\u5e76\u4e0d\u662f\u6587\u4ef6\u5f62\u5f0f\u3002<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/d706407e59384181a285043d7545a165\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428502143881.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428502143881.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"font-weight: bold;\">\/boot\/grub\u4e0b\u7684\u6587\u4ef6\u4e3a\uff1a<\/span><\/p><p><span style=\"font-weight: bold;\">\u4e3b\u8981\u662f\u9a71\u52a8\u4e0egrub\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u4e2a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u53ea\u4fdd\u7559grub.conf\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u662f\u53ef\u4ee5\u6b63\u5e38\u542f\u52a8\u7684<\/span><\/p><p><span style=\"font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;\">stage1\u7834\u574f\u4fee\u590d<\/span><\/p><p><span style=\"font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;\"><br\/><\/span><\/p><p>stage1\u4e5f\u5c31\u662fbootloader\u6240\u5728,<\/p><p>\u6a21\u62df\u7834\u574f(\u8bf7\u4e0d\u62ff\u751f\u4ea7\u4e2d\u7684\u673a\u5668\u6765\u505a\u8bd5\u9a8c\uff0c\u672c\u4eba\u4e0d\u8d1f\u8d23\u4efb)<\/p><p>#dd if=\/dev\/zero of=\/dev\/sda bs=1 count=446<\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/bf3335bd1a6b440c8730422675f2c1c0\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428543791642.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428543791642.png\" alt=\"1.png\"\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>1.\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>2.\u542f\u52a8\u4e00\u4e2ashell<\/p><p><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428568954757.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428568954757.png\" alt=\"1.png\"\/><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/2284dea5b7cb4f84ac3197889f5f65d3\/clipboard.png\" alt=\"\"\/><\/p><p>3.\u5207\u6362\u81f3\u539f\u7cfb\u7edf\u7684\u6839\u76ee\u5f55\uff0c\u4e00\u822c\u6551\u63f4\u6a21\u5f0f\u8fdb\u6765\u7684\u65f6\u5019\u4f1a\u63d0\u9192.(\u5047\u5982\u80fd\u627e\u5230\/\u6587\u4ef6\u7cfb\u7edf)<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># chroot \/mnt\/sysimage<\/span><\/p><p>4.<span style=\"color: rgb(223, 64, 42);\">\u5b89\u88c5grub<\/span><\/p><p><span style=\"font-weight: bold;\">\u65b9\u6cd5(1) grub-install<\/span><\/p><p>\u5b89\u88c5grub stage1\u548cstage1_5\u5230\/dev\/DISK\u78c1\u76d8\u4e0a\uff0c\u5e76\u590d\u5236GRUB\u76f8\u5173\u6587\u4ef6\u5230 DIR\/boot\u76ee\u5f55\u4e0b<\/p><p>grub-install &nbsp;\/dev\/DISK .<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u6ce8\u610f\uff0c\u662f\u78c1\u76d8\u800c\u975e\u5206\u533a\u3002<\/span>--root-directory=DIR \u53c2\u6570\u53ef\u9009<\/p><p>\u6b64\u65b9\u6cd5\u4f1a\u4e00\u5e76\u91cd\u65b0\u751f\u6210\/boot\/grub\u4e0b\u9664\u4e86grub.conf\u4e4b\u5916\u7684\u6587\u4ef6<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/4ccc2f095ba24967931294e4a49e4c59\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428587570888.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428587570888.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">\u65b9\u6cd5(2) grub<\/span><\/p><p><span style=\"color: rgb(223, 64, 42);\">grub&gt; root (hd#,#) <\/span><\/p><p><span style=\"color: rgb(223, 64, 42);\">grub&gt; setup (hd#) &nbsp;<\/span><\/p><p>\u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u5df2\u7ecf\u5199\u5165GRUB\u4fe1\u606f\u81f3MBR<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/59881d4cc3b54121883c0e4cc4b4b0cb\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428604773076.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428604773076.png\" alt=\"1.png\"\/><\/p><p><br\/><\/p><p>\u7b2c2\u79cd\u65b9\u6cd5\u4fee\u590d\u65f6\uff0c\u9700\u8981\/boot\/grub\u4e0b\u6709\u8fd9\u4e9b\u6587\u4ef6<\/p><p># ls -1<\/p><p>device.map &nbsp;e2fs_stage1_5 fat_stage1_5 ffs_stage1_5 grub.conf iso9660_stage1_5 jfs_stage1_5<\/p><p>menu.lst minix_stage1_5 reiserfs_stage1_5 splash.xpm.gz stage1 stage2 ufs2_stage1_5<\/p><p>vstafs_stage1_5 xfs_stage1_5<\/p><p>5.\u91cd\u542f\u7cfb\u7edf<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#exit \u5e76reboot<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">\u5f00\u673a\u76f4\u63a5\u51fa\u73b0grub&gt;<\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>grub&gt;<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> root (hd#,#)<\/span> <span style=\"color: rgb(255, 255, 255);\"> &nbsp;<\/span><span style=\"color: rgb(255, 255, 255); background-color: rgb(24, 78, 135);\">root\u76ee\u5f55\u6307\u7684\u662f\/boot\u5206\u533a\u6240\u5728\u7684\u78c1\u76d8\u4f4d\u7f6e\u3002<\/span><\/p><p>grub&gt; <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">setup (hd#) <\/span> &nbsp;<\/p><p>\u5c0f\u63d0\u793a\uff1aroot (hd0,\u7136\u540e\u6309tab\u952e\u8865\u5168\uff0c\u4f1a\u6709\u5982\u4e0b\u663e\u793a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/3b8d957ce7e346ed8b34b666a2ff8d44\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428646281445.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428646281445.png\" alt=\"1.png\"\/><\/p><p>\u8f93\u5165<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">kernel \/vm \u6309tab\u952e<\/span>\u5982\u679c\u53ef\u4ee5\u8865\u5168\u5219\u8bf4\u660e\u662f\u6b63\u786e\u7684\uff0c\u63a5\u7740\u8f93\u5165<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">ro root=\/dev\/sda1<\/span> \u56de\u8f66.\u6ce8\u610f(hd0,0)=\/dev\/sda1 (hd0,1)=\/dev\/sda2\u5982\u56fe<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/7f0f911fcda942089a8163be9469bc41\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428663866412.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428663866412.png\" alt=\"1.png\"\/><\/p><p>\u63a5\u7740\u8f93\u5165<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">initrd \/ini \u6309tab\u952e\u8865\u5168<\/span>\uff0c\u56de\u8f66<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/63aecf16c7444e4891323bad325c2f4a\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428679516762.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428679516762.png\" alt=\"1.png\"\/><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u8f93\u5165boot<\/span>\u547d\u4ee4\uff0c\u8fd9\u65f6\u7cfb\u7edf\u4f1a\u91cd\u65b0\u542f\u52a8<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;\">stage1.5\u7834\u574f\u4fee\u590d<\/span><\/p><p>\u6a21\u62df\u7834\u574f<\/p><p># dd if=\/dev\/zero of=\/dev\/sda bs=1 count=13000 skip=512 seek=512<\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/db4c3bf43ba044a583779d3a87c1311f\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428699719252.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428699719252.png\" alt=\"1.png\"\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>1.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># chroot \/mnt\/sysimage<\/span><\/p><p>2.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u5b89\u88c5grub (\u4e0a\u9762\u6709\u65b9\u6cd5)<\/span><\/p><p>3.<span style=\"color: rgb(223, 64, 42);\">\u591a\u8f93\u5165\u51e0\u6b21<\/span><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">sync<\/span><\/p><p>4.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#exit\u5e76reboot<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">stage2\u7834\u574f\u4fee\u590d<\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">grub.conf\u4e22\u5931<\/span><\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/c7adbfd7f33245af8f89ce73d8923e26\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428726253921.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428726253921.png\" alt=\"1.png\"\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>1.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># chroot \/mnt\/sysimage<\/span><\/p><p>2.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u5b89\u88c5grub (\u4e0a\u9762\u6709\u65b9\u6cd5)<\/span><\/p><p>3.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u68c0\u67e5\/boot\/grub\/grub.conf\u662f\u5426\u5b58\u5728\u4e14\u6b63\u786e<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/a176786eb673444ba23237b524ffad1e\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428744692600.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428744692600.png\" alt=\"1.png\"\/><\/p><p>4.\u91cd\u542f\u7cfb\u7edf<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">\u5185\u6838\u6587\u4ef6\u88ab\u7834\u574f<\/span><\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/a7003e3e59cc48f38f25edd4c154d982\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428830850439.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428830850439.png\" alt=\"1.png\"\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>1.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># chroot \/mnt\/sysimage<\/span><\/p><p>2.touch \u4e00\u4e2a\u6587\u4ef6 \/boot\u68c0\u67e5\u78c1\u76d8\u662f\u53ef\u5199\uff0c\u5982\u679c\u4e3a\u53ea\u8bfb\uff0cmount -o remount,rw \/dev\/sdX \/boot<\/p><p>3.\u5982\u679c\u6302\u8f7d\u7684\u6551\u63f4\u6a21\u5f0f\u662f\u539fISO\u7684DVD1\u7684\u8bdd\uff0c\u91cc\u9762\u4f1a\u6709\u5185\u6838\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709DVD1\u5149\u76d8\uff0c\u8bf7\u53bb\u5176\u4ed6\u5730\u65b9\u4e0b\u8f7d\u540c\u4e00\u5185\u6838\u7248\u672c\u7684rpm\u5305\u3002<\/p><p>\u6267\u884c\u5b89\u88c5\u6307\u4ee4<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># rpm -ivh \/\u5149\u76d8\u4f4d\u7f6e\u6216\u6307\u5b9a\u4f4d\u7f6e\/Packages\/kernel-2.6.32-696.el6.x86_64.rpm --force<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/6a68bc2a813349f7b2d6851978eb350b\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428851407958.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428851407958.png\" alt=\"1.png\"\/><\/p><p>4.\u91cd\u542f\u7cfb\u7edf<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">\/sbin\/init \u4e22\u5931\u7834\u574f<\/span><\/p><p>\u6a21\u62df\u7834\u574f<\/p><p># rm -rf \/sbin\/init<\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/9c907a091144408c99a7260ad1f072ec\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428874346065.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428874346065.png\" alt=\"1.png\"\/><\/p><p>\u6b64\u65f6\u8f93\u5165\u4ec0\u4e48\u90fd\u662f\u62a5\u9519\u8bef\u7684<\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>1.\u91cd\u542f\u7cfb\u7edf\u81f3\u5f15\u5bfc\u83dc\u5355\uff0c\u6ce8\u610f\u6309\u4e0a\u4e0b\u7bad\u5934\uff0c\u4ee5\u514d\u8d85\u65f6\u8df3\u8fc7\u53bb\u3002\u6309<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> e<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/fb40a439c9134fbd8b202c733895c92b\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428889424167.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428889424167.png\" alt=\"1.png\"\/><\/p><p>2 \u5728<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">kernel<\/span>\u4e00\u884c\u4e2d\uff0c\u6309 <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">e<\/span> \u7f16\u8f91<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/75c9d9ff100a447a95ebeae78f99dc44\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428903509597.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428903509597.png\" alt=\"1.png\"\/><\/p><p>\u4f7f\u7528<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> \/bin\/bash<\/span> \u4ee3\u66ffsbin\/init<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/3a29f6b08fcb47b6acde43248c1f4b1d\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428917178401.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428917178401.png\" alt=\"1.png\"\/><\/p><p>\u6309 <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">b<\/span> \u542f\u52a8\u7cfb\u7edf<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/dc90c87c8ad64a81a6bc203b10f59c38\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428935724455.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428935724455.png\" alt=\"1.png\"\/><\/p><p>\u4efb\u610f\u8f93\u5165\u4e00\u6761\u547d\u4ee4\uff0c\u5982\u679c\u80fd\u51fa\u6765\u7ed3\u679c\uff0c\u8868\u793a \u7cfb\u7edf\u542f\u7528\/bin\/bash\u4e3a\u7b2c\u4e00\u4e2a\u8fdb\u7a0b<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/b5899645158543b7bf83f26aa8b11ca7\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428957744934.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428957744934.png\" alt=\"1.png\"\/><\/p><p>3. \u91cd\u65b0\u6302\u8f7d<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> \/<\/span> \u5206\u533a\u4e3a \u8bfb\u5199\u6a21\u5f0f<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#mount -o remount,rw \/<\/span><\/p><p>4 \u6302\u8f7d\u5149\u76d8<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mount \/dev\/sr0 \/mnt<\/span><\/p><p>5.\u91cd\u65b0\u5b89\u88c5\/sbin\/init \u3002\u6b64\u6267\u884c\u6587\u4ef6\u5bf9\u5e94\u7684\u5b89\u88c5\u4e3a<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">upstart &nbsp;<\/span><span style=\"font-weight: bold;\">\u5404\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u4e0d\u4e00\u6837\uff0c\u6ce8\u610f\u5373\u53ef\u3002<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># rpm -ivh \/mnt\/Packages\/upstart-0.6.5-16.el6.x86_64.rpm --force<\/span><\/p><p><span style=\"color: rgb(128, 128, 128); font-weight: bold;\">\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4e5f\u80fd\u8fbe\u5230\u540c\u6837\u6548\u679c\uff1a<\/span><\/p><p><span style=\"color: rgb(128, 128, 128); font-weight: bold;\"># rpm2cpio \/mnt\/Packages\/upstart-0.6.5-16.el6.x86_64.rpm | cpio -idv .\/sbin\/init<\/span><\/p><p><span style=\"color: rgb(128, 128, 128); font-weight: bold;\"># cp sbin\/init \/sbin\/<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/0a335e95a80d449c8e1fdeb9fbcf3981\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515428977802802.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515428977802802.png\" alt=\"1.png\"\/><\/p><p>6. <span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># ls \/sbin\/init <\/span>\u662f\u5426\u5df2\u7ecf\u751f\u6210\u3002<\/p><p>7.\u76f4\u63a5\u6309\u786c\u4ef6\u6309\u94ae\u7684<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u91cd\u542f<\/span>\u5427<\/p><p>\u81f3\u6b64\uff0c\u4fee\u590d\u5b8c\u6210<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">\u903b\u8f91\u5377\u73af\u5883\u4e0b \/boot\u5206\u533a\u7834\u574f\uff0c\/etc\/fstab\u4e22\u5931<\/span><\/p><p>\u539f\u5148\u7684\u7cfb\u7edf\u662f\u4ee5LVM\u5377\u65b9\u5f0f\u5b89\u88c5\u7684<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/e425e6bfdfde4789b11568da6fdbf108\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429015936131.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429015936131.png\" alt=\"1.png\"\/><\/p><p>\u6a21\u62df\u7834\u574f<\/p><p># rm -rf \/boot\/ \/etc\/fstab<\/p><p>\u7cfb\u7edf\u542f\u52a8\u65f6\u8868\u73b0\u4e3a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/d1e65f6e510b4176bc24317131ddb9ca\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429030371605.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429030371605.png\" alt=\"1.png\"\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>\u4f1a\u63d0\u793a<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/743d525daf5c490688b6b650875912e4\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429053163928.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429053163928.png\" alt=\"1.png\"\/><\/p><p>\u542f\u52a8shell<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/6128182f106f4998afea469fa465235a\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429066872941.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429066872941.png\" alt=\"1.png\"\/><\/p><p>1.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#vgs <\/span>\u67e5\u770b\u4e0bVG\u5377<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/73d3a6e5ae2b4e0e9edc504054121456\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429079980999.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429079980999.png\" alt=\"1.png\"\/><\/p><p>2. <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#fdisk -l<\/span>\u627e\u51fa\u539f\u6765\u7cfb\u7edf\u7684boot\u5206\u533a,\u5e26*\u53f7\u542f\u52a8\u7684\u5e94\u8be5\u662f\/boot<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/61b21036c35a407e968b8014e13a86d7\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429091717600.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429091717600.png\" alt=\"1.png\"\/><\/p><p>3.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#lvdisplay<\/span>\u67e5\u770bLV\u5377\u72b6\u6001\uff0c\u53ef\u4ee5\u770b\u5230\u662f\u672a\u6fc0\u6d3b\u72b6\u6001<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/f470c34b48dc4b17a2439820cbeee485\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429103515345.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429103515345.png\" alt=\"1.png\"\/><\/p><p>4 .<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># vgchange -ay <\/span>\u6fc0\u6d3bVG\u5377<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/4d78d7ac57ce4dd29bae8df39ee94a5e\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429117226429.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429117226429.png\" alt=\"1.png\"\/><\/p><p>5 <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#lvdisplay<\/span>\u67e5\u770bLV\u5377\u72b6\u6001\uff0c\u53ef\u4ee5\u770b\u5230\u662f\u5df2\u6fc0\u6d3b\u72b6\u6001<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/86454e671fcb45ae908eff530434491a\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429133536634.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429133536634.png\" alt=\"1.png\"\/><\/p><p>6 <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#blkid <\/span>\u80fd\u770b\u5230\u5206\u533a\u6587\u4ef6\u7cfb\u7edf\u548c\u6302\u8f7d\u8def\u5f84\u548cUUID<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/12ce10b490e34c6899648e736e28fc84\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429147723989.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429147723989.png\" alt=\"1.png\"\/><\/p><p>7.\u521b\u5efa\u4e34\u65f6\u76ee\u5f55\u6302\u8f7d\u627e\u5230\u7684\u5206\u533a\uff0c\u786e\u8ba4\/\u548c\/boot\u5206\u533a\u3002\u6ce8\u610f\uff0c\u8fd9\u91cc\u662f\u652f\u6301TAB\u952e\u8865\u5168\u7684\u3002<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mkdir \/mnt\/root<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mount \/dev\/VolGroup\/lv_root \/mnt\/root<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/ba5d39a464d541e3bf26cb2435b5f883\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429172912277.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429172912277.png\" alt=\"1.png\"\/><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mkdir \/mnt\/boot &nbsp; <\/span>\u6b63\u5e38\u60c5\u51b5\uff0c\u56e0\u4e3a\u662f\u4f7f\u7528rm -rf \/boot \u6302\u8f7d\u65f6\u5e94\u8be5\u662f\u6ca1\u6709\u4efb\u4f55\u6587\u4ef6\u7684<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mount \/dev\/sda1 \/mnt\/boot<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/95d704a559bc4afc816ce7c07cf8d4b8\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429194511322.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429194511322.png\" alt=\"1.png\"\/><\/p><p>8<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> cat \/etc\/mtab<\/span> \u80fd\u770b\u5230\u76ee\u524d\u6302\u8f7d\u60c5\u51b5<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/42c2dfb15999413a912c68ba2cb0c0f2\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429206306272.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429206306272.png\" alt=\"1.png\"\/><\/p><p>9 \u521b\u5efa\u539f\u6709\u7cfb\u7edf\u7684fstab ,\u6ce8\u610f\u8fd9\u91cc\u751f\u6210\u7684\u6587\u4ef6\u4f4d\u7f6e<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#cat &gt; \/mnt\/root\/etc\/fstab &lt;&lt; eof<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\/dev\/mapper\/VolGroup-lv_root \/ ext4 defaults 0 0<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\/dev\/sda1 \/boot ext4 defaults 0 0<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">eof<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/f6816d4c4c8c4beb97405ccc57bd1e0e\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429221423744.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429221423744.png\" alt=\"1.png\"\/><\/p><p>10 <span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#exit<\/span> \u9009reboot<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/ce74e57708854473929edc5959ff6687\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429236297857.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429236297857.png\" alt=\"1.png\"\/><\/p><p>11.\u518d\u6b21\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/p><p>\u73b0\u5728\u6551\u63f4\u6a21\u5f0f\u80fd\u4fa6\u6d4b\u5230\u6839\u7cfb\u7edf\u4e86<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/d3e272522e4f493ebf315ac255d620ac\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429252635536.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429252635536.png\" alt=\"1.png\"\/><\/p><p>\u6309\u7167\u5411\u5bfc\u5f00\u542fshell<\/p><p>12<span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> # chroot \/mnt\/sysimage<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#lsblk <\/span>\u53ef\u4ee5\u770b\u51fa\u539f\u6709\u7cfb\u7edf\u7684\u6302\u8f7d\u60c5\u51b5\u4e86<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/86d1f5eec348465c8d3475e09ec9b452\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429266555896.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429266555896.png\" alt=\"1.png\"\/><\/p><p>13 \u6302\u8f7d\u5149\u76d8<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mkdir \/mnt\/cdrom<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mount \/dev\/cdrom \/mnt\/cdrom<\/span><\/p><p>14 \u5b89\u88c5\u5185\u6838<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"> # rpm -ivh \/mnt\/cdrom\/Packages\/kernel-2.6.32-696.el6.x86_64.rpm --force<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/539cc1294cf64b1bbb435e19a44c1790\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429283974573.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429283974573.png\" alt=\"1.png\"\/><\/p><p>15 \u4fee\u590dGrub<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># grub-install \/dev\/sda<\/span><\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/51b2b123504f45ed837502c1b83d5987\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429314527274.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429314527274.png\" alt=\"1.png\"\/><\/p><p>16 \u4fee\u590dgrub.conf<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># vi \/boot\/grub\/grub.conf &nbsp; ,\u53ef\u4ee5\u4f7f\u7528vi\u7684\u547d\u4ee4\u8fd9\u4e9b\u529f\u80fd<\/span><\/p><p>\u5217\u51fa\u547d\u4ee4\u7ed3\u679c\u5230\u5f53\u524d\u7f16\u8f91\u884c\u7684\u4e0b\u4e00\u884c\uff0c\u652f\u6301TAB\u8865\u5168<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/948e0f357c8f473bad3528dcb3b04afc\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429302254189.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429302254189.png\" alt=\"1.png\"\/><\/p><p>\u5217\u51fa\u8bbe\u5907\u7684UUID<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/9c218628f18142a3b7022e4d1edef182\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429327537296.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429327537296.png\" alt=\"1.png\"\/><\/p><p>\u6700\u7ec8\u5199\u597d\u7684\u6587\u4ef6\u5982\u4e0b<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/d81072416fe7449c9093b45906f44d86\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429342180017.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429342180017.png\" alt=\"1.png\"\/><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#exit<\/span> \u91cd\u542f<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/e9d18efdb7e648bbb90d90131ea69532\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429368644216.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429368644216.png\" alt=\"1.png\"\/><\/p><p>\u5982\u679c\u542f\u7528\u4e86selinux\u7684\u8bdd\uff0c\u7cfb\u7edf\u4f1a\u5728\u7b2c\u4e00\u6b21\u91cd\u542f\u65f6\u8fdb\u884c\u914d\u7f6e\u3001<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/c8abdc19113f4b9d94c5ddc61fd74129\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429390836903.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429390836903.png\" alt=\"1.png\"\/><\/p><p>\u7b2c\u4e8c\u6b21\u91cd\u65b0\u542f\u52a8\u65f6\uff0c\u7cfb\u7edf\u5c31\u6b63\u5e38\u4e86\u3002\u4e4b\u540e\u518d\u628a\u628a<\/p><p>17 \u628aswap\u6dfb\u52a0\u5230fstab\uff0c\u5e76\u542f\u7528<\/p><p><span style=\"color: rgb(223, 64, 42);\">UUID=8e0a6121-97d7-4c70-b113-bbe4cefe0380 swap swap defaults 0 0<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># swapon -a<\/span><\/p><p>\u5efa\u8bae\u628afstab\u6587\u4ef6\u91cd\u65b0\u4fee\u6b63\u4e3a\u4f7f\u7528UUID\u65b9\u5f0f<\/p><p>\u81f3\u6b64\uff0c\u7cfb\u7edf\u4fee\u590d\u5b8c\u6210\u3002<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u624b\u52a8\u5728grub\u547d\u4ee4\u884c\u63a5\u53e3\u542f\u52a8\u7cfb\u7edf<\/span><\/p><p>grub&gt; root (hd#,#)<\/p><p>grub&gt; kernel \/vmlinuz-VERSION-RELEASE ro<\/p><p>root=\/dev\/DEVICE<\/p><p>grub&gt; initrd \/initramfs-VERSION-RELEASE.img<\/p><p>grub&gt; boot<\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;\">root\u5bc6\u7801\u7834\u89e3<\/span><\/p><p><span style=\"font-size: 18px; background-color: rgb(250, 226, 32); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u65b9\u6cd51\uff1a<\/span><\/p><p>1.\u91cd\u542f\u7cfb\u7edf\u81f3\u5f15\u5bfc\u83dc\u5355\uff0c\u6ce8\u610f\u6309\u4e0a\u4e0b\u7bad\u5934\uff0c\u4ee5\u514d\u8d85\u65f6\u8df3\u8fc7\u53bb\u3002<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/f776ee7fb8eb4bcfae690730f24d50cc\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429426235067.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429426235067.png\" alt=\"1.png\"\/><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u6309 a ,\u5065\u5165\u4ee5\u4e0b\u5b57\u7b26\uff0c1\u4ee3\u8868\u662f\u5355\u7528\u6237\u6a21\u5f0f<\/span><\/p><p>1, s, S\u6216single\u90fd\u53ef\u4ee5\uff0c\u4e4b\u540e\u76f4\u63a5\u56de\u8f66\u542f\u52a8\u7cfb\u7edf<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/6553be70c70e41f887bca48617764d39\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429440571071.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429440571071.png\" alt=\"1.png\"\/><\/p><p>\u65e0\u9700\u8981\u8f93\u5165\u5bc6\u7801\u5c31\u4ee5root\u8eab\u4efd\u8fdb\u5165\u7cfb\u7edf\u4e86\uff0c\u76f4\u63a5passwd root\u4fee\u6539<\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u65b9\u6cd52\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f\uff0cchroot \/mnt\/sysimage \u4e4b\u540e\uff0c\u76f4\u62c9\u7528passwd root\u4fee\u6539<\/p><p><br\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u65b9\u6cd53\uff1a<\/span><\/p><p>\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f\uff0cchroot \/mnt\/sysimage \u4e4b\u540e\uff0c\u76f4\u63a5\u4fee\u6539\/etc\/shadow \uff0c\u628aroot\u7684\u5bc6\u7801\u680f\u4f4d\u6e05\u7a7a\u3002\u9700\u8981vi\u65f6\u52a0\u5165wq!<\/p><p>\u4e0d\u8fc7\uff0c\u91cd\u542f\u540e\u6ce8\u610f\u5c3d\u5feb\u4fee\u6539\u5bc6\u7801<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/98fd8005e07245c0a64ea887d62589b6\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429459977882.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429459977882.png\" alt=\"1.png\"\/><\/p><p><br\/><\/p><p><br\/><\/p><p><span style=\"background-color: rgb(250, 226, 32); font-weight: bold;\">grub\u52a0\u5bc6<\/span><\/p><p>\u5f53\u7136\uff0c\u65e2\u7136\u6709\u7834\u89e3\u5bc6\u7801\u7684\uff0c\u4e5f\u6709\u76f8\u5e94\u52a0\u5f3a\u5b89\u5168\u7684.<\/p><p>\u5c06\u4e0b\u9762\u4e00\u884c\u653e\u5165\u4e0d\u540c\u4f4d\u7f6e\u5c06\u4f1a\u6709\u4e0d\u540c\u7684\u6548\u679c<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">password [--md5|--encrypted ] \u52a0\u5bc6\u7684\u5b57\u7b26\u4e32<\/span><\/p><p>\u653e\u5728\u6bcf\u4e2atitle\u4e4b\u524d\u884c \uff1a \u542f\u52a8grub\u83dc\u5355\u65f6\u8fdb\u884c\u8fdb\u884c\u8ba4\u8bc1<\/p><p>\u653e\u5728\u6bcf\u4e2atitle\u4e4b\u672b\u5c3e\u884c \uff1a \u542f\u52a8\u9009\u5b9a\u7684\u5185\u6838\u6216\u64cd\u4f5c\u7cfb\u7edf\u65f6\u8fdb\u884c\u8ba4\u8bc1<\/p><p><img src=\"C:\/Users\/Hunk\/AppData\/Local\/YNote\/data\/ljpwinxp2@163.com\/ea6a0d8a8c5c4d5aa8d37e18252e93cf\/clipboard.png\" alt=\"\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515429484427913.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515429484427913.png\" alt=\"1.png\"\/><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u751f\u6210grub\u53e3\u4ee4<\/span><\/p><p>\uf0dc grub-md5-crypt &nbsp; \t\u5bf9\u5e94\u7684\u662f--md5<\/p><p>\uf0dc grub-crypt\t\t\u5bf9\u5e94\u7684\u662f--encrypted<\/p><p><br\/><\/p><hr\/><p><span style=\"font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;\">Centos 7<\/span><\/p><p><span style=\"font-size: 26px; background-color: rgb(250, 226, 32); font-weight: bold;\"><\/span><\/p><p style=\"font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, \u5fae\u8f6f\u96c5\u9ed1, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; font-weight: bold;\">\u5b9e\u9a8c\u73af\u5883\uff1a<\/span>VMware Workstation Pro 14\uff08\u8bd5\u7528\u7248\uff09<\/p><p style=\"font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, \u5fae\u8f6f\u96c5\u9ed1, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);\"><span style=\"margin: 0px; padding: 0px; max-width: 100%; font-weight: bold;\">\u7cfb\u7edf\u5e73\u53f0\uff1a<\/span><\/p><p style=\"font-family: &quot;Helvetica Neue&quot;, Helvetica, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, \u5fae\u8f6f\u96c5\u9ed1, Arial, sans-serif; margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 100%; color: rgb(51, 51, 51); white-space: normal; background-color: rgb(255, 255, 255);\">CentOS Linux release 7.4.1708 (Core)\t&nbsp; &nbsp; &nbsp; \u5185\u6838 &nbsp;3.10.0-693.el7.x86_64<\/p><p><br\/><\/p><p>\u6a21\u62df\u7834\u574f(\u8bf7\u4e0d\u62ff\u751f\u4ea7\u4e2d\u7684\u673a\u5668\u6765\u505a\u8bd5\u9a8c\uff0c\u672c\u4eba\u4e0d\u8d1f\u8d23\u4efb)<\/p><p>\u6a21\u62dfstage1 &nbsp;stage1.5 &nbsp;stage2 \u9636\u6bb5\u7834\u574f<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># dd if=\/dev\/zero of=\/dev\/sda bs=1 count=446<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># dd if=\/dev\/zero of=\/dev\/sda bs=1 count=13000 skip=512 seek=512<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># rm -rf \/boot<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"background-color: rgb(119, 201, 75); font-weight: bold;\">\u4fee\u590d\u5982\u4e0b\uff1a<\/span><\/p><p><span style=\"font-weight: bold;\">1.\u8fdb\u5165\u6551\u63f4\u6a21\u5f0f<\/span><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487336503786.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487336503786.png\" alt=\"1.png\"\/><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487350942442.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487350942442.png\" alt=\"1.png\"\/><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487367783543.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487367783543.png\" alt=\"1.png\"\/><\/p><p>\u7cfb\u7edf\u53d1\u73b0\u6839\u7cfb\u7edf<\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487381341738.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487381341738.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">2. \u5207\u6362\u81f3\u5f85\u4fee\u590d\u7684\u6839\u7cfb\u7edf<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># chroot \/mnt\/sysimage<\/span><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487395993153.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487395993153.png\" alt=\"1.png\"\/><\/p><p>\u67e5\u770b\u5230\/dev\/sda\u786e\u5b9e\u6ca1\u6709MBR\u4fe1\u606f<\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487410628492.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487410628492.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">3.\u4fee\u590dGrub<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># grub2-install &nbsp;\/dev\/sda <\/span>.<span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u6ce8\u610f\uff0c\u662f\u78c1\u76d8\u800c\u975e\u5206\u533a<\/span><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487424471255.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487424471255.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">4.\u5b89\u88c5\u5185\u6838<\/span><\/p><p>\u6302\u8f7d\u5149\u76d8<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># mount \/dev\/sr0 \/mnt<\/span><\/p><p>\u5982\u679c\u6302\u8f7d\u7684\u6551\u63f4\u6a21\u5f0f\u662f\u539fISO\u7684DVD1\u7684\u8bdd\uff0c\u91cc\u9762\u4f1a\u6709\u5185\u6838\u6587\u4ef6\uff0c\u5982\u679c\u6ca1\u6709DVD1\u5149\u76d8\uff0c\u8bf7\u53bb\u5176\u4ed6\u5730\u65b9\u4e0b\u8f7d\u540c\u4e00\u5185\u6838\u7248\u672c\u7684rpm\u5305\u3002<\/p><p>\u6267\u884c\u5b89\u88c5\u6307\u4ee4<\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># rpm -ivh \/\u5149\u76d8\u4f4d\u7f6e\u6216\u6307\u5b9a\u4f4d\u7f6e\/Packages\/kernel-3.10.0-693.el7.x86_64.rpm --force<\/span><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487440502192.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487440502192.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">5.\u751f\u6210gurb\u914d\u7f6e\u6587\u4ef6<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">\u6ce8\u610f\u8fd9\u4e00\u6b65\u4e0d\u80fd\u548c\u7b2c4\u6b65\u98a0\u5012<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># grub2-mkconfig -o \/boot\/grub2\/grub.cfg<\/span><\/p><p><img src=\"https:\/\/blog.51cto.com\/static\/js\/ueditor1.4.3\/themes\/default\/images\/spacer.gif\"\/><img src=\"https:\/\/s1.51cto.com\/images\/20180109\/1515487451277187.png?x-oss-process=image\/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=\" title=\"1515487451277187.png\" alt=\"1.png\"\/><\/p><p><span style=\"font-weight: bold;\">6.\u4fdd\u5b58\u5e76\u91cd\u542f<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"># exit<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#sync<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#sync<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\">#reboot<\/span><\/p><p><span style=\"color: rgb(223, 64, 42); font-weight: bold;\"><br\/><\/span><\/p><p><span style=\"color:#df402a\"><\/span><\/p><p><span style=\"font-size: 16px; color: rgb(119, 201, 75); font-weight: bold;\">\u81f3\u6b64\uff0c\u7cfb\u7edf\u4fee\u590d\u5b8c\u6210\u3002<\/span><\/p><p><span style=\"color:#df402a\"><\/span><br\/><\/p><p>Centos 7\u4fee\u590d\u4e0eCentos 6\u76f8\u5dee\u4e0d\u5927\uff0c\u53ea\u662f\u4f7f\u7528\u7684\u547d\u4ee4\u6709\u4e9b\u4e0d\u540c\u3002<\/p><p><br\/><\/p>", '#result');
  }

  function insertCodeElement(content, container){
    container = container || document;
    // 创建一个 div 来放置获取到的内容，这样就可以把 content 字符串内容转换成 dom
    // 方便我们对这个 dom 进行操作（只是创建 div，并没有插入到文档，他只存在于内存中）
    var parent = document.createElement('div');
    parent.innerHTML = content;

    // 找到 parent 中的所有 pre 标签，并遍历
    var $pres = $(parent).find('pre');
    $pres.each(function(index, el) {
      var $el = $(el),
          html = $el.html(),
          code = document.createElement('code'),
          elClass = $el.attr('class');
      if(!elClass) {return};
          // 获取 pre 标签中，class 属性中包含的本段代码所有的编程语言
      var language = elClass.substring(6, elClass.indexOf(';'));

      code.className = 'language-' + language;
      code.innerHTML = html;

      $el.html(code);
    });

    $(container).html(parent.innerHTML);

    // 最后，调用 Prism 的方法来高亮代码
    Prism.highlightAll();
  }
	window._bd_share_config={
    "common":{
      "bdText":"Centos 系统引导损坏修复、密码破解与加密",
      "bdDesc":$("#abstract_bdshare").text(),
      "bdMini":"2",
      "bdMiniList":false,
      "bdPic":"https://s1.51cto.com/images/201710/25/bd540a4f14d822f6e69087758699358b.jpg",
      "bdStyle":"0",
      "bdSize":"16"
    },
    "share":{}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
  setTimeout(function(){
  	$('.bdsharebuttonbox a').removeAttr('title')
  },1000);

	var now_time = 1561465748; //当前时间
  setInterval(function(){now_time+=0.01},10);

  // 初始化页面
  updatePage();
  // 页面tab切换
  zDate.visibilityAction(function () {
    zDate.getServerTime(function (e) {
      var updateResult = new Date(e).getTime();
      now_time = +updateResult.toString().substr(0, 10);
      updatePage();
    });
   })
  // 定时刷新现在时间
  setInterval(function () {
    zDate.getServerTime(function (e) {
      var updateResult = new Date(e).getTime();
      now_time = +updateResult.toString().substr(0, 10);
      updatePage();
    });
  }, 1000*60*2);
  // 页面刷新
  function updatePage() {
    $('.presell').each(function(index, item) {
      var end_time = $(this).data('end'); // 结束时间
      if (!end_time) {
        return;
      }
      var me = $(this);
      if (me.lastTime) {
        clearInterval(me.lastTime);
        me.lastTime = null;
      } else {
        me.lastTime = setInterval(function() {
          zDate.setLastTimePc(me.find('.timespan'), (end_time*1000-now_time*1000), me.lastTime, function() {
						me.parents('.right').find('.cloumn-subscribe').removeClass('presell-color');
						me.remove();
						$('.pre-tips').remove();
					});
        }, 10);
      }
    });
  }
		//二维码显示
		$(".group_git_box").hover(function(){
			$(this).parents('.group_img_box').find(".group_code_box").show()
		},function(){
			$(this).parents('.group_img_box').find(".group_code_box").hide()
		})  
</script>
</div>
<script src="https://static1.51cto.com/edu/blog/js/marked.min.js"></script><script src="https://static1.51cto.com/edu/blog/js/highlight.js"></script><script src="https://static1.51cto.com/edu/blog/js/detail_mp.js"></script><script src="https://static1.51cto.com/edu/blog/js/detail.js"></script><script src="https://static1.51cto.com/edu/blog/js/details_new.js"></script><script src="https://static1.51cto.com/edu/blog/js/copy.js"></script>    
<div style="display:none">
    <iframe frameborder="0" scrolling="no" width="0" height="0" src="http://log.51cto.com/pageview.php?frompos=blog_art"></iframe>
</div>

<script src="https://static1.51cto.com/edu/blog/js/pvlog.js"></script>
<script>
  $(".gotop").click(function(){$(window).scrollTop(0)})
</script>


    <script type="text/javascript">
    //百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2283d46608159c3b39fc9f1178809c21";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();

    //自动推送链接
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>

    <script type='text/javascript'>
      var _vds = _vds || [];
      window._vds = _vds;
      (function(){
        _vds.push(['setAccountId', '8c51975c40edfb67']);
        (function() {
          var vds = document.createElement('script');
          vds.type='text/javascript';
          vds.async = true;
          vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'assets.growingio.com/vds.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(vds, s);
        })();
      })();
      //document.write(decodeURI("%3Cscript src='https://tongji.51cto.com/frontend/tj.gif' type='text/javascript'%3E%3C/script%3E"));
    </script>
    
<script>
  var uid = '';
  var BLOG_URL = 'https://blog.51cto.com/';
</script>
<script src="https://static1.51cto.com/edu//blog/js/jquery.cookie.js"></script>
<script src="https://static1.51cto.com/edu/blog/js/time-on-page.js" charset="utf-8"></script>
<script>
    (function(){
        var wh=$(window).height(),fh=$('.Footer').outerHeight(true),hh=$('.Header').outerHeight(true)
        $('.Content-box').css({'min-height': wh-fh-hh})
    })()
</script>
</body>
</html>
