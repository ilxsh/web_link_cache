<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="referrer" content="never" />
    <title>解决Centos关闭You have new mail in /var/spool/mail/root提示 - archoncap - 博客园</title>
<meta property="og:description" content="昨天搬到阿里云了。 装的系统是Centos 6.3的加固版 今天查看内存的时候 出现一天奇怪的提示 You have new mail in /var/spool/mail/root 有的时候每敲一下" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=svlZeZMvc3He7PqOD4T7SOuQn0_kIfLBYiy3idqd35Y1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/ThinkInside/bundle-ThinkInside.css?v=RRjf6pEarGnbXZ86qxNycPfQivwSKWRa4heYLB15rVE1"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/ThinkInside/bundle-ThinkInside-mobile.css?v=dZdjlmVwTnNeYyn_3io0YWHboviYj5KY0ZYF2D-nD9U1"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/archoncap/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/archoncap/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/archoncap/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=213665;var currentBlogApp='archoncap',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="/bundles/blog-common.js?v=OFBZTzkHKauV7mtIFLF9jlqrX-sesK9-mY9KjurLrq01" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/archoncap/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/archoncap/">archoncap</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/archoncap/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/archoncap">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/archoncap/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/archoncap/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 574&nbsp; </span>
<span id="stats_article_count">文章 - 1&nbsp; </span>
<span id="stats-comment_count">评论 - 10</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
        <div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/archoncap/p/5449028.html">解决Centos关闭You have new mail in /var/spool/mail/root提示</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>昨天搬到阿里云了。</p>
<p>装的系统是Centos 6.3的加固版</p>
<p>今天查看内存的时候 出现一天奇怪的提示</p>
<p>You have new mail in /var/spool/mail/root</p>
<p>有的时候每敲一下回车，就出来You have new mail in /var/spool/mail/root的提示，究竟是为什么呢？</p>
<p>Linux 系统经常会自动发出一些<a href="http://www.111cn.net/list-54/" target="_blank">邮件</a>来提醒用户系统中出了哪些问题（收件箱位置：/var/mail/）。可是这些邮件都是发送给 root 用户的。出于系统安全考虑，通常不建议大家直接使用 root 帐户进行日常操作。所以要想点办法来让系统把发给 root 用户的邮件也给自己指定的外部邮箱发一份，或者是直接关闭此项服务。</p>
<p>&nbsp;</p>
<p>1、关闭sendmail服务，这里介绍一种不用关闭sendmail服务的方法</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>
</tr>
<tr>
<td id="copy7492" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">
<p><br />echo "unset MAILCHECK"&gt;&gt; /etc/profile;</p>
<p>source /etc/profile</p>


</td>


</tr>


</tbody>


</table>
<p><br />关闭sendmail的功能：</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy5739" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">
<p><br />chmod 0 /usr/sbin/sendmailmv /usr/sbin/sendmail /usr/sbin/sendmail.bakln -s /var/qmail/bin/sendmail /usr/sbin/sendmail</p>


</td>


</tr>


</tbody>


</table>
<p><br />清空 /var/spool/mail/root日志</p>
<p><br />&nbsp;</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy3661" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">cat /dev/null &gt; /var/spool/mail/rootcat /dev/null&gt;;/var/spool/mail/root</td>


</tr>


</tbody>


</table>
<p><br />或者转发到自己的邮箱，下面介绍下怎么转发到自己的邮箱（此方法未经本人亲自验证 来源于网络，有喜欢折腾的请自己研究，成功了 可以跟帖分享经验）</p>
<p>2、root邮件转发到自己的邮箱<br /><strong>方法一：<br /></strong>修改此文件</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy4057" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">/etc/log.d/logwatch.conf<br />添加MailTo = root,xxx@xxx.com</td>


</tr>


</tbody>


</table>
<p><strong>方法二<br /></strong></p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy3844" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">/etc/aliases</td>


</tr>


</tbody>


</table>
<p>添加root: xxx@xxx.com</p>
<p>注意：好像如果设置成和主机同域的，好像邮件就发不成，比如本机邮件就是moper.me，那么发这个就没法发，相应的发其他邮箱就可以成功。</p>
<p>关于&ldquo;/etc/aliases&rdquo;：</p>
<p>当sendmail收到一个要送给xxx的信时，它会依据/etc/aliases文件中的内容送给另一个使用者。这个功能可以创造一个只有在信件 系统内才有效的使用者。例如mai<a href="http://www.111cn.net/list-198/" target="_blank">ling</a>&nbsp;list就会用到这个功能，在 mailing list 中，我们可能会创造一个叫 red<a href="http://www.111cn.net/list-156/" target="_blank">linux</a>@link.ece.uci.edu的 mailinglist，但实际上并没有一个叫redlinux的使用者。实际 aliases档的内容是将送给这个使用者的信都收给mailing list处理程式负责分送的工作。</p>
<p>/etc/aliases是一个文本文档，而sendmail需要一个二进位格式的 /etc/aliases.db。newaliases的功能传是将/etc/aliases转换成一个sendmail所能了解的db文件：</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy6770" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">
<p>[root@centos ~]# newaliases</p>


</td>


</tr>


</tbody>


</table>
<p>除root外的其它用的邮件可以通过在用户/home/下建立一个.forward文件实现转发:</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#ffe7ce" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#ffe7ce" width="109">复制代码</td>


</tr>
<tr>
<td id="copy5186" class="copyclass" colspan="2" valign="top" bgcolor="#ffffff">//somebody<br />other1<br />other2</td>


</tr>


</tbody>


</table>
<p>文件权限设为600,作用一样,但.forward可以由用户自行维护,而aliases则只有治理员才能修改。</p>
<p>设定~/.forward档案加入转寄目的即可</p>
<p><span style="color: #ff0000;">网上很多教程是你抄我，我抄你，根本就没有验证过的，比如有种方法是修改&rdquo;/usr/share/logwatch/default.conf/logwatch.conf&ldquo;配置文件，在centos6中根本就没有这个文件，至于以前的版本有没有就不知道了。</span></p>
<p><span style="color: #ff0000;">还有很多教程，只有&ldquo;echo "unset MAILCHECK" &gt;&gt; /etc/profile&rdquo;，而没有&ldquo;source /etc/profile&rdquo;，这也是不对的。</span></p>
<p>&nbsp;</p>
<p>报错信息如下</p>
<p>&nbsp;</p>
<p>Error: ossl_pkey_ec.c:In functin 'ossl_ec_group_initialize': ossl_pkey_ec.c:816:error: 'EC_GROUP_new_curve_GF2m' undeclard (first use in this function) ossl_pkey_ec.c:816:error: (Each undeclard indentifier is reported only once ossl_pkey_ec.c:816 error:for each function it appearts in.)</p>
<p>&nbsp;</p>
<p>产生问题的原因是：centos6.4的openssl的配置变更取消了对EC_GROUP_new_curve_GF2m的支持，所以出现该错误.</p>
<p>&nbsp;</p>
<p><br />报错的文件为：ossl_pkey_ec.c</p>
<p>&nbsp;</p>
<p>用find命令找到ossl_pkey_ec.c文件路径</p>
<p>&nbsp;</p>
<p>find / -name ossl_pkey_ec.c&nbsp;<br />编辑文件ossl_pkey_ec.c，如下图所示，在相应位置添加红框内的代码即可<br />&nbsp;</p>
<p>&nbsp;</p>
<center><img src="http://filesimg.111cn.net/2014/03/14/image53228945b92670.95167756.jpg" alt="解决centos6.4编译ruby1.9.3报错:ossl_pkey_ec.c" /></center>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<center><img src="http://filesimg.111cn.net/2014/03/14/image53228945d009d1.15929360.jpg" alt="解决centos6.4编译ruby1.9.3报错:ossl_pkey_ec.c" /></center>
<p>&nbsp;</p>
<p>保存退出后，重新make</p>
<p>&nbsp;</p>
<p>报错如下:<br />&nbsp;<br />&nbsp;</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#FFE7CE" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#FFE7CE" width="109">复制代码</td>


</tr>
<tr>
<td id="copy1577" class="copyclass" colspan="2" valign="top" bgcolor="#FFFFFF" height="auto">Could not init font path element catalogue:/etc/X11/fontpath.d, removing from list!</td>


</tr>


</tbody>


</table>
<p>其日志内容如下:<br />&nbsp;</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#FFE7CE" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#FFE7CE" width="109">复制代码</td>


</tr>
<tr>
<td id="copy4966" class="copyclass" colspan="2" valign="top" bgcolor="#FFFFFF" height="auto">&nbsp;<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_MESA_copy_sub_buffer<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_INTEL_swap_event<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_ARB_create_context<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_ARB_create_context_profile<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_EXT_create_context_es2_profile<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: enabled GLX_SGI_swap_control and<br />GLX_MESA_swap_control<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: GLX_EXT_texture_from_pixmap backed by buffer<br />objects www.111cn.net<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) AIGLX: Loaded and initialized r600<br />[&nbsp;&nbsp;&nbsp; 22.264] (II) GLX: Initialized DRI2 GL provider for screen 0<br />[&nbsp;&nbsp;&nbsp; 22.269] (II) RADEON(0): Setting screen physical size to 846 x 238<br />[&nbsp;&nbsp;&nbsp; 22.269] [dix] Could not init font path element<br />catalogue:/etc/X11/fontpath.d, removing from list!<br />[&nbsp;&nbsp;&nbsp; 22.269] [dix] Could not init font path element built-ins, removing<br />from list!<br />[&nbsp;&nbsp;&nbsp; 22.269]<br />Fatal server error:<br />[&nbsp;&nbsp;&nbsp; 22.269] could not open default font 'fixed'<br />[&nbsp;&nbsp;&nbsp; 22.269] (EE)<br />Please consult the&nbsp;<a href="http://www.111cn.net/list-232/" target="_blank">CentOS</a>&nbsp;support<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; at http://wiki.centos.org/Documentation<br />for help.<br />[&nbsp;&nbsp;&nbsp; 22.269] (EE) Please also check the log file at<br />"/var/log/Xorg.1.log" for additional information.<br />[&nbsp;&nbsp;&nbsp; 22.269] (EE)<br />[&nbsp;&nbsp;&nbsp; 22.269] (II) AIGLX: Suspending AIGLX clients for VT switch<br />[&nbsp;&nbsp;&nbsp; 22.276] Server terminated with error (1). Closing log file.</td>


</tr>


</tbody>


</table>
<p>解决办法：<br />&nbsp;</p>
<table style="width: 620px;" border="0" cellspacing="1" cellpadding="1" align="center">
<tbody>
<tr>
<td bgcolor="#FFE7CE" width="464" height="27">&nbsp;代码如下</td>
<td align="center" bgcolor="#FFE7CE" width="109">复制代码</td>


</tr>
<tr>
<td id="copy6112" class="copyclass" colspan="2" valign="top" bgcolor="#FFFFFF" height="auto">yum install libXfont</td>


</tr>


</tbody>


</table>
<div id="pages" class="text-c"><a href="http://www.111cn.net/sys/CentOS/58622.htm">上一篇</a><a href="http://www.111cn.net/sys/CentOS/58620.htm">1</a><a href="http://www.111cn.net/sys/CentOS/58619.htm">2</a><a href="http://www.111cn.net/sys/CentOS/58493.htm">3</a>&nbsp;<a href="http://www.111cn.net/sys/CentOS/58620.htm">下一篇</a></div>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2016-04-30 17:40</span> <a href='https://www.cnblogs.com/archoncap/'>archoncap</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=5449028" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(5449028);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=213665,cb_entryId=5449028,cb_blogApp=currentBlogApp,cb_blogUserGuid='5f89c8e0-99a6-e411-b908-9dcfd8948a71',cb_entryCreatedDate='2016/4/30 17:40:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id='cnblogs_c1' class='c_ad_block'>
    <div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'></div>
</div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'></div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2019 archoncap
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->

</body>
</html>
