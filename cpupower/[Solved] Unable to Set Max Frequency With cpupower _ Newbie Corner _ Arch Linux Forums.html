<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0049)https://bbs.archlinux.org/viewtopic.php?id=245087 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>[Solved] Unable to Set Max Frequency With cpupower / Newbie Corner / Arch Linux Forums</title>
<link rel="stylesheet" type="text/css" href="./[Solved] Unable to Set Max Frequency With cpupower _ Newbie Corner _ Arch Linux Forums_files/ArchLinux.css">
<link rel="canonical" href="https://bbs.archlinux.org/viewtopic.php?id=245087" title="Page 1">
<link rel="alternate" type="application/atom+xml" href="https://bbs.archlinux.org/extern.php?action=feed&amp;tid=245087&amp;type=atom" title="Atom topic feed">
    <link rel="stylesheet" media="screen" href="./[Solved] Unable to Set Max Frequency With cpupower _ Newbie Corner _ Arch Linux Forums_files/arch.css">
        <link rel="stylesheet" media="screen" href="./[Solved] Unable to Set Max Frequency With cpupower _ Newbie Corner _ Arch Linux Forums_files/archnavbar.css">
    
<link rel="shortcut icon" href="https://bbs.archlinux.org/style/ArchLinux/favicon.ico">
</head>

<body>
<div id="archnavbar" class="anb-forum">
	<div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div>
	<div id="archnavbarmenu">
		<ul id="archnavbarlist">
			<li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-security"><a href="https://security.archlinux.org/">Security</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li>		</ul>
	</div>
</div>


<div id="punviewtopic" class="pun">
<div class="top-box"></div>
<div class="punwrap">

<div id="brdheader" class="block">
	<div class="box">
		<div id="brdmenu" class="inbox">
			<ul>
				<li id="navindex" class="isactive"><a href="https://bbs.archlinux.org/index.php">Index</a></li>
				<li id="navrules"><a href="https://bbs.archlinux.org/misc.php?action=rules">Rules</a></li>
				<li id="navsearch"><a href="https://bbs.archlinux.org/search.php">Search</a></li>
				<li id="navregister"><a href="https://bbs.archlinux.org/register.php">Register</a></li>
				<li id="navlogin"><a href="https://bbs.archlinux.org/login.php">Login</a></li>
			</ul>
		</div>
		<div id="brdwelcome" class="inbox">
			<p class="conl">You are not logged in.</p>
			<ul class="conr">
				<li><span>Topics: <a href="https://bbs.archlinux.org/search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="https://bbs.archlinux.org/search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li>
			</ul>
			<div class="clearer"></div>
		</div>
	</div>
</div>



<div id="brdmain">
<div class="linkst">
	<div class="inbox crumbsplus">
		<ul class="crumbs">
			<li><a href="https://bbs.archlinux.org/index.php">Index</a></li>
			<li><span>»&nbsp;</span><a href="https://bbs.archlinux.org/viewforum.php?id=23">Newbie Corner</a></li>
			<li><span>»&nbsp;</span><strong><a href="https://bbs.archlinux.org/viewtopic.php?id=245087">[Solved] Unable to Set Max Frequency With cpupower</a></strong></li>
		</ul>
		<div class="pagepost">
			<p class="pagelink conl"><span class="pages-label">Pages: </span><strong class="item1">1</strong></p>
		</div>
		<div class="clearer"></div>
	</div>
</div>

<div id="p1837846" class="blockpost rowodd firstpost blockpost1">
	<h2><span><span class="conr">#1</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1837846#p1837846">2019-03-19 16:58:35</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>A Future Pilot</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2008-10-17</span></dd>
						<dd><span>Posts: 120</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>[Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>Hello everyone,</p><p>I just recently got Arch setup on my old Dell laptop, and I'm trying to get cpupower configured, but I'm getting some weird behavior. As you can see below, the "current policy" forces the frequency to stay at 1.2 Ghz. I've tried setting the max frequency both via command, and in /etc/default/cpupower, but nothing changes it.</p><div class="codebox"><pre><code>$ sudo cpupower frequency-info
analyzing CPU 0:
  driver: acpi-cpufreq
  CPUs which run at the same hardware frequency: 0
  CPUs which need to have their frequency coordinated by software: 0
  maximum transition latency: 10.0 us
  hardware limits: 1.20 GHz - 2.53 GHz
  available frequency steps:  2.53 GHz, 2.53 GHz, 2.40 GHz, 2.27 GHz, 2.13 GHz, 2.00 GHz, 1.87 GHz, 1.73 GHz, 1.60 GHz, 1.47 GHz, 1.33 GHz, 1.20 GHz
  available cpufreq governors: performance schedutil
  current policy: frequency should be within 1.20 GHz and 1.20 GHz.
                  The governor "performance" may decide which speed to use
                  within this range.
  current CPU frequency: 1.20 GHz (asserted by call to hardware)
  boost state support:
    Supported: yes
    Active: yes
    2800 MHz max turbo 2 active cores
    3067 MHz max turbo 1 active cores</code></pre></div><div class="codebox"><pre><code>watch grep \"cpu MHz\" /proc/cpuinfo</code></pre></div><p> averages around 1.4Ghz at idle, but as soon as I do anything CPU-intensive it drops to 1.2Ghz.</p><p>According to </p><div class="codebox"><pre><code>sensors</code></pre></div><p> my CPU is only 50C which shouldn't be anywhere close to causing throttling.</p><div class="codebox"><pre class="vscroll"><code>$ cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i5 CPU       M 540  @ 2.53GHz
stepping	: 5
microcode	: 0x7
cpu MHz		: 1221.041
cache size	: 3072 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 2
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 popcnt aes lahf_lm pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid dtherm ida arat flush_l1d
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 5056.60
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i5 CPU       M 540  @ 2.53GHz
stepping	: 5
microcode	: 0x7
cpu MHz		: 1258.235
cache size	: 3072 KB
physical id	: 0
siblings	: 4
core id		: 2
cpu cores	: 2
apicid		: 4
initial apicid	: 4
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 popcnt aes lahf_lm pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid dtherm ida arat flush_l1d
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 5056.60
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 2
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i5 CPU       M 540  @ 2.53GHz
stepping	: 5
microcode	: 0x7
cpu MHz		: 1240.252
cache size	: 3072 KB
physical id	: 0
siblings	: 4
core id		: 0
cpu cores	: 2
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 popcnt aes lahf_lm pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid dtherm ida arat flush_l1d
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 5056.60
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 3
vendor_id	: GenuineIntel
cpu family	: 6
model		: 37
model name	: Intel(R) Core(TM) i5 CPU       M 540  @ 2.53GHz
stepping	: 5
microcode	: 0x7
cpu MHz		: 1248.885
cache size	: 3072 KB
physical id	: 0
siblings	: 4
core id		: 2
cpu cores	: 2
apicid		: 5
initial apicid	: 5
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm pcid sse4_1 sse4_2 popcnt aes lahf_lm pti ssbd ibrs ibpb stibp tpr_shadow vnmi flexpriority ept vpid dtherm ida arat flush_l1d
bugs		: cpu_meltdown spectre_v1 spectre_v2 spec_store_bypass l1tf
bogomips	: 5056.60
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:</code></pre></div><p>I've tried disabling intel_pstate through the kernel options, but that hasn't made any difference.</p><p>Any ideas?</p>
						<p class="postedit"><em>Last edited by A Future Pilot (2019-03-20 02:21:20)</em></p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1837887" class="blockpost roweven">
	<h2><span><span class="conr">#2</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1837887#p1837887">2019-03-19 20:40:36</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>V1del</strong></dt>
						<dd class="usertitle"><strong>Forum Moderator</strong></dd>
						<dd class="postavatar"><img src="./[Solved] Unable to Set Max Frequency With cpupower _ Newbie Corner _ Arch Linux Forums_files/64676.png" width="56" height="80" alt=""></dd>
						<dd><span>Registered: 2012-10-16</span></dd>
						<dd><span>Posts: 9,730</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>Dells seem to have a knack for this, shutdown, remove the power cable, take out the battery wait like a minute or so reinsert the battery, see if it works then.</p><p>also fwiw what exact command are you trying to use to set the frequency?</p>
						<p class="postedit"><em>Last edited by V1del (2019-03-19 20:42:10)</em></p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1837897" class="blockpost rowodd">
	<h2><span><span class="conr">#3</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1837897#p1837897">2019-03-19 22:40:26</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>bugsmanagement</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2017-04-21</span></dd>
						<dd><span>Posts: 201</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>Hello,</p><p>"cpupower configured," ?</p><div class="codebox"><pre><code> The governor "performance" </code></pre></div><p>Is that what you should expect?</p><p>Cheers</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1837928" class="blockpost roweven">
	<h2><span><span class="conr">#4</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1837928#p1837928">2019-03-20 02:03:12</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>A Future Pilot</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2008-10-17</span></dd>
						<dd><span>Posts: 120</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>Thanks for the replies!!</p><div class="quotebox"><cite>V1del wrote:</cite><blockquote><div><p>Dells seem to have a knack for this, shutdown, remove the power cable, take out the battery wait like a minute or so reinsert the battery, see if it works then.</p><p>also fwiw what exact command are you trying to use to set the frequency?</p></div></blockquote></div><p>I'll try the battery removal thing and let you know how it goes! I'm using this to set the frequency:</p><div class="codebox"><pre><code>$ sudo cpupower frequency-set -u 2.53Ghz</code></pre></div><p>I also have it set in /etc/default/cpupower:</p><div class="codebox"><pre class="vscroll"><code># Define CPUs governor
# valid governors: ondemand, performance, powersave, conservative, userspace.
governor='performance'

# Limit frequency range
# Valid suffixes: Hz, kHz (default), MHz, GHz, THz
min_freq="1.20GHz"
max_freq="2.53GHz"

# Specific frequency to be set.
# Requires userspace governor to be available.
# Do not set governor field if you use this one.
#freq=

# Utilizes cores in one processor package/socket first before processes are 
# scheduled to other processor packages/sockets.
# See man (1) CPUPOWER-SET for additional details.
#mc_scheduler=

# Utilizes thread siblings of one processor core first before processes are
# scheduled to other cores. See man (1) CPUPOWER-SET for additional details.
#smp_scheduler=

#  Sets a register on supported Intel processore which allows software to convey
# its policy for the relative importance of performance versus energy savings to
# the  processor. See man (1) CPUPOWER-SET for additional details.
#perf_bias=

# vim:set ts=2 sw=2 ft=sh et:</code></pre></div><p>@bugsmanagement:</p><p>I'm using the performance governor because according to the frequency-info command it's one of only two available options, the other being schedutil which I don't know anything about (there's not really any info on the wiki, and it's not listed in the comments in /etc/default/cpupower)</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1837930" class="blockpost rowodd">
	<h2><span><span class="conr">#5</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1837930#p1837930">2019-03-20 02:21:56</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>A Future Pilot</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2008-10-17</span></dd>
						<dd><span>Posts: 120</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>I discovered the problem was a BIOS limitation as mentioned at the bottom of the wiki. I disabled it with a kernel parameter, and everything is working as it should now!</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1838005" class="blockpost roweven">
	<h2><span><span class="conr">#6</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1838005#p1838005">2019-03-20 13:41:52</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>bugsmanagement</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2017-04-21</span></dd>
						<dd><span>Posts: 201</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [Solved] Unable to Set Max Frequency With cpupower</h3>
					<div class="postmsg">
						<p>FYI, shedutil is ondemand with the difference that it stores statistics of your workload over time to make better decision in the future when it comes to frequency scalling as oppose to ramping CPU frequency when higher workload is detected.</p><p>Cheers.</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div class="postlinksb">
	<div class="inbox crumbsplus">
		<div class="pagepost">
			<p class="pagelink conl"><span class="pages-label">Pages: </span><strong class="item1">1</strong></p>
		</div>
		<ul class="crumbs">
			<li><a href="https://bbs.archlinux.org/index.php">Index</a></li>
			<li><span>»&nbsp;</span><a href="https://bbs.archlinux.org/viewforum.php?id=23">Newbie Corner</a></li>
			<li><span>»&nbsp;</span><strong><a href="https://bbs.archlinux.org/viewtopic.php?id=245087">[Solved] Unable to Set Max Frequency With cpupower</a></strong></li>
		</ul>
		<div class="clearer"></div>
	</div>
</div>
</div>

<div id="brdfooter" class="block">
	<h2><span>Board footer</span></h2>
	<div class="box">
		<div id="brdfooternav" class="inbox">
			<div class="conl">
				<form id="qjump" method="get" action="https://bbs.archlinux.org/viewforum.php">
					<div><label><span>Jump to<br></span>
					<select name="id" onchange="window.location=(&#39;viewforum.php?id=&#39;+this.options[this.selectedIndex].value)">
						<optgroup label="Technical Issues and Assistance">
							<option value="23" selected="selected">Newbie Corner</option>
							<option value="17">Installation</option>
							<option value="22">Kernel &amp; Hardware</option>
							<option value="18">Applications &amp; Desktop Environments</option>
							<option value="31">Laptop Issues</option>
							<option value="8">Networking, Server, and Protection</option>
							<option value="32">Multimedia and Games</option>
							<option value="50">System Administration</option>
							<option value="35">Other Architectures</option>
						</optgroup>
						<optgroup label="Arch-centric">
							<option value="24">Announcements, Package &amp; Security Advisories</option>
							<option value="1">Arch Discussion</option>
							<option value="13">Forum &amp; Wiki discussion</option>
						</optgroup>
						<optgroup label="Pacman Upgrades, Packaging &amp; AUR">
							<option value="44">Pacman &amp; Package Upgrade Issues</option>
							<option value="49">[testing] Repo Forum</option>
							<option value="4">Creating &amp; Modifying Packages</option>
							<option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option>
						</optgroup>
						<optgroup label="Contributions &amp; Discussion">
							<option value="20">GNU/Linux Discussion</option>
							<option value="27">Community Contributions</option>
							<option value="33">Programming &amp; Scripting</option>
							<option value="30">Other Languages</option>
							<option value="47">Artwork and Screenshots</option>
						</optgroup>
					</select></label>
					<input type="submit" value=" Go " accesskey="g">
					</div>
				</form>
			</div>
			<div class="conr">
				<p id="feedlinks"><span class="atom"><a href="https://bbs.archlinux.org/extern.php?action=feed&amp;tid=245087&amp;type=atom">Atom topic feed</a></span></p>
				<p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p>
			</div>
			<div class="clearer"></div>
		</div>
	</div>
</div>

</div>
<div class="end-box"></div>
</div>



</body></html>