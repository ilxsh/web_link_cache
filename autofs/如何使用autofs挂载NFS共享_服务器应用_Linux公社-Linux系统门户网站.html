
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<title>如何使用autofs挂载NFS共享_服务器应用_Linux公社-Linux系统门户网站</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<link rel="icon" href="../../favicon.ico" type="image/x-icon"/>
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"/>
<meta name="description" content="有时您可能希望只在需求上挂载远程文件系统&amp;mdash;例如，通过减少网络带宽使用来提高性能，或者出于安全原因隐藏或混淆某些目录。"/>
<meta name="keywords" content="autofs,autofs挂载NFS共享,NFS共享,如何使用autofs挂载NFS共享,服务器,Linux服务器,Apache,Hadoop,集群,分布式,Nginx,Tomcat,分布式系统"/>
<link rel="canonical" href="https://www.linuxidc.com/Linux/2018-10/154836.htm"/>
<meta name="generator" content="Linux公社"/>
<meta name="generator" content="Linux"/>
<link rel="stylesheet" href="../../style/systems/style.css" type="text/css"/>
<meta name="generator" content="专业的Linux网站"/>
<script type="text/javascript" src="../../inc/jquery.js"></script>
<script type="text/javascript" src="../../inc/iwms.js"></script>
<script type="text/javascript">iwms.urlPrefix="../../";</script>

<script type="text/javascript" src="../../inc/show.js"></script>
</head>
<body>
<div class="topBar">
	<div class="twidth">
	
	<div style="float:right">
		<a href="http://m.linuxidc.com" rel="nofollow">手机版</a>
		<script type="text/javascript" src="../../inc/language.js"></script>
	</div>
	
	<div id="topUser">你好，游客 <a href="#" onclick="iwms.logPop()">登录</a>
	<a href="../../memberreg.aspx" rel="nofollow">注册</a>
	<a href="../../search.aspx" rel="nofollow">搜索</a>
	</div>
	</div>
</div>
<div class="twidth">
<div id="sitehead">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<table width="100%">
	<tr align="center"><td width="160">
	<a href="https://www.linuxidc.com/"><img style="filter: chroma(color=#FFFFFF);" src="../../pic/logo.jpg" alt="Linux公社" width="155" height="53" border="0" /></a>
	</td><td>
	<div align="center"><script type="text/javascript" src="/linuxfile/linux.js"></script></div>
	</td>
	</tr></table>
</div>
</div>
<div id="navbar">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="../../index.htm" class="first">首页</a><a href="../../it/">Linux新闻</a><a href="../../Linuxit/">Linux教程</a><a href="../../MySql/">数据库技术</a><a href="../../RedLinux/">Linux编程</a><a href="../../Apache/" class="thisclass">服务器应用</a><a href="../../Unix/">Linux安全</a><a href="../../download/">Linux下载</a><a href="../../theme/">Linux主题</a><a href="../../Linuxwallpaper/">Linux壁纸</a><a href="../../linuxsoft/">Linux软件</a><a href="../../digi/">数码</a><a href="../../mobile/">手机</a><a href="../../diannao/">电脑</a>

</div>
</div>

<div id="navsub">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="../../index.htm">首页</a> → <a href="../../Apache/">服务器应用</a>
</div>
</div>
<div class="linuxe1"><script type="text/javascript" src="/linuxfile/linuxe1.js"></script></div>
<div class="linux1"><script type="text/javascript" src="/linuxfile/linux1.js"></script></div>
<div class="linuxa"><script type="text/javascript" src="/linuxfile/linuxa.js"></script></div>
<div class="linuxa1"><script type="text/javascript" src="/linuxfile/linuxa1.js"></script></div>
<table id="middle" width="100%" cellspacing="0" cellpadding="0" style="table-layout:fixed">
<tr valign="top"><td>

	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<div class="moreR">
			背景：<script type="text/javascript">WriteBg()</script>
		</div>
		<span class="tt">阅读新闻</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm" id="bodyTd">
		<div id="printBody" style="word-break:break-all;">
			<div style="text-align:center"><h1 class="aTitle">如何使用autofs挂载NFS共享</h1></div>
			
			<table width="97%" align="center">
				<tr>
				<td width="140">[日期：2018-10-15]</td>
				<td align="center">来源：<a href="https://www.linuxidc.com/Linux/2018-10/154836.htm" target="_blank">Linux公社</a>&nbsp;
				作者：Linux</td>
				<td width="160" align="right">[字体：<a href="javascript:ContentSize(16)">大</a> <a href="javascript:ContentSize(0)">中</a> <a href="javascript:ContentSize(12)">小</a>]
				</td></tr>
			</table>
<div id="li_all">
<div id="li_1"><script type="text/javascript" src="/linuxfile/linux201.js"></script></div>
<div id="li_2"><script type="text/javascript" src="/linuxfile/linux2.js"></script></div>
</div>
			<div id="content"><p>大多数Linux文件系统都是在引导时挂载的，并且在系统运行时仍然挂载。在fstab文件中配置的任何远程文件系统也是如此。但是，有时您可能希望只在需求上挂载远程文件系统&mdash;例如，通过减少网络带宽使用来提高性能，或者出于安全原因隐藏或混淆某些目录。包autofs提供了这个特性。在本文中，我将描述如何启动和运行基本的自动加载配置。</p>
<p>首先，假设NFS服务器linux.linuxidc.com已经启动并运行。还假设这个服务器共享一个名为ourfiles的数据目录和两个用于linuxidc和Sarah的用户目录。</p>
<p>一些最佳实践将使事情更好地工作:在服务器上和任何客户端工作站上为用户使用相同的用户ID是一个好主意，因为他们有一个帐户。另外，您的工作站和服务器应该具有相同的域名。检查相关配置文件应予以确认。</p>
<p>alan@linuxidc:~$ sudo getent passwd linuxidc sarah<br />&nbsp;[sudo] password for alan:<br />&nbsp;linuxidc:x:1020:1020:linuxidc,,,:/home/linuxidc:/bin/bash<br />&nbsp;sarah:x:1021:1021:Sarah,,,:/home/sarah:/bin/bash</p>
<p>&nbsp;alan@linuxidc:~$ sudo getent hosts<br />&nbsp;127.0.0.1&nbsp; &nbsp; &nbsp;  localhost<br />&nbsp;127.0.1.1&nbsp; &nbsp; &nbsp;  linuxidc.linuxidc.com linuxidc<br />&nbsp;10.10.1.5&nbsp; &nbsp; &nbsp;  linux.linuxidc.com tree</p>
<p>如您所见，客户机工作站和NFS服务器都配置在主机文件中。我假设一个基本的家庭或甚至小的办公室网络可能缺乏适当的内部域名服务(即。,DNS)。</p>
<p><strong>安装包</strong></p>
<p>您只需要安装两个包:NFS客户端函数的常用NFS包，以及提供automount函数的autofs包。</p>
<p>alan@linuxidc:~$ sudo apt-get install nfs-common autofs</p>
<p>您可以验证autofs文件已被放置在etc目录:</p>
<p>alan@linuxidc:~$ cd /etc; ll auto*<br />&nbsp;-rw-r--r-- 1 root root 12596 Nov 19&nbsp; 2015 autofs.conf<br />&nbsp;-rw-r--r-- 1 root root&nbsp;  857 Mar 10&nbsp; 2017 auto.master<br />&nbsp;-rw-r--r-- 1 root root&nbsp;  708 Jul&nbsp; 6&nbsp; 2017 auto.misc<br />&nbsp;-rwxr-xr-x 1 root root&nbsp; 1039 Nov 19&nbsp; 2015 auto.net*<br />&nbsp;-rwxr-xr-x 1 root root&nbsp; 2191 Nov 19&nbsp; 2015 auto.smb*<br />&nbsp;alan@linuxidc:/etc$</p>
<p>配置autofs</p>
<p>现在您需要编辑其中几个文件，并添加文件auto.home。首先，向文件auto.master添加以下两行:</p>
<p>/mnt/tree&nbsp; /etc/auto.misc<br />&nbsp;/home/tree&nbsp; /etc/auto.home</p>
<p>每一行都以NFS共享所在的目录开头。继续创建这些目录:</p>
<p>alan@linuxidc:/etc$ sudo mkdir /mnt/tree /home/tree</p>
<p>第二步，在auto.misc文件中添加以下行:</p>
<p>ourfiles&nbsp; &nbsp; &nbsp; &nbsp; -fstype=nfs&nbsp; &nbsp;  tree:/share/ourfiles</p>
<p>这一行指示autofs在auto中匹配的位置挂载ourfiles共享。用于auto.misc的主文件。如上所示，这些文件可以在目录/mnt/树/ourfiles中找到。</p>
<p>第三，创建文件自动。家与以下线:</p>
<p>*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  -fstype=nfs&nbsp; &nbsp;  tree:/home/&amp;</p>
<p>这一行指示autofs在auto中匹配的位置挂载用户共享。自动.home的主文件。在本例中，linuxidc和Sarah的文件将分别在目录/home/tree/linuxidc或/home/tree/sarah中可用。星号(称为通配符)使每个用户的共享在登录时自动挂载成为可能。&amp; and也作为通配符在服务器端表示用户的目录。它们的主目录应该相应地映射到passwd文件中。如果您喜欢本地主目录，则不必这样做;相反，用户可以将其用作特定文件的简单远程存储。</p>
<p>最后，重新启动autofs守护进程，使其能够识别并加载这些配置文件更改。</p>
<p>alan@linuxidc:/etc$ sudo service autofs restart</p>
<p><strong>测试autofs</strong></p>
<p>如果您更改到文件中列出的目录之一，则自动。掌握并运行ls命令，您不会立即看到任何东西。例如，将目录(cd)更改为/mnt/tree。首先，ls的输出不会显示任何内容，但是在运行cd ourfiles之后，ourfiles共享目录将自动挂载。cd命令也将被执行，您将被放置到新挂载的目录中。</p>
<p>linuxidc@linuxidc:~$ cd /mnt/tree<br />&nbsp;linuxidc@linuxidc:/mnt/tree$ ls<br />&nbsp;linuxidc@linuxidc:/mnt/tree$ cd ourfiles<br />&nbsp;linuxidc@linuxidc:/mnt/tree/ourfiles$</p>
<p>为了进一步确认正在工作，mount命令将显示挂载共享的详细信息。</p>
<p>linuxidc@linuxidc:~$ mount<br />&nbsp;tree:/mnt/share/ourfiles on /mnt/tree/ourfiles type nfs4 (rw,relatime,vers=4.0,rsize=131072,wsize=131072,namlen=255,hard,proto=tcp,timeo=600,retrans=2,sec=sys,clientaddr=10.10.1.22,local_lock=none,addr=10.10.1.5)</p>
<p>对于linuxidc和Sarah来说，/home/tree目录也会以同样的方式工作。</p>
<p>我发现在我的文件管理器中书签这些目录很有用，以便更快地访问。</p>
<p><span style="color: #ff0000;">Linux公社的RSS地址</span>：<a href="../../rssFeed.aspx">https://www.linuxidc.com/rssFeed.aspx</a></p>
<p><strong>本文永久更新链接地址</strong>：<a href="../../Linux/2018-10/154836.htm">https://www.linuxidc.com/Linux/2018-10/154836.htm</a></p><a href="http://www.linuxidc.com" target="_blank"><img src="/linuxfile/logo.gif" alt="linux" width="15" height="17" /></div>
<div class="linux3"><script type="text/javascript" src="/linuxfile/linux3.js"></script></div>
<div class="linux302"><script type="text/javascript" src="/linuxfile/linux302.js"></script></div>		
			
			
		</div>
<div class="linuxfx"><script type="text/javascript" src="/linuxfile/fx.js"></script></div>	
<div class="linux8"><script type="text/javascript" src="/linuxfile/linux8.js"></script></div>
<div class="linux801"><script type="text/javascript" src="/linuxfile/linux801.js"></script></div>
		<div class="nearNews">
			<div class="prevNews"><a href="../../Linux/2018-10/154835.htm">树莓派自建 NAS 云盘之——树莓派搭建网络存储盘</a></div>
			<div class="nextNews"><a href="../../Linux/2018-10/154837.htm">树莓派自建 NAS 云盘之——数据自动备份</a></div>
		</div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux809"><script type="text/javascript" src="/linuxfile/linux809.js"></script></div>
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">相关资讯</span> &nbsp; &nbsp; &nbsp;
		<a href="../../search.aspx?where=nkey&amp;keyword=13271" target="_blank">autofs</a>&nbsp; <a href="../../search.aspx?where=nkey&amp;keyword=52248" target="_blank">NFS共享</a>&nbsp; <a href="../../search.aspx?where=nkey&amp;keyword=59671" target="_blank">autofs挂载NFS共享</a>&nbsp; 
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table width='100%'><tr><td width='50%' valign='top'><ul class='nl'><li><a href="../../Linux/2017-06/144467.htm"  target="_blank" >CentOS7上实现NFS共享</a>&nbsp; <span class="gray">(06/03/2017 15:20:59)</span></li>
<li><a href="../../Linux/2012-10/71794.htm"  target="_blank" >CIFS通过autofs自动挂载</a>&nbsp; <span class="gray">(10/05/2012 12:28:27)</span></li>
</ul></td><td width='50%' valign='top'><ul class='nl'><li><a href="../../Linux/2012-10/73012.htm"  target="_blank" >Autofs+NFS+NIS实现智能挂载</a>&nbsp; <span class="gray">(10/26/2012 10:19:29)</span></li>
</ul></td></tr></table>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux808"><script type="text/javascript" src="/linuxfile/linux808.js"></script></div>
	
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">本文评论</span>
		 	　　<a href="../../remark.aspx?id=154836" target="_blank">查看全部评论</a> <span class="gray">(0)</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table width="100%" style="margin:6px">		
		<tr><td width="50%">
			<form action="" name="fmRemarkSt" onsubmit="return remark.post(this);">
			<input type="hidden" value="1" name="face"/>
			表情： <img src="../../pic/b.gif" alt="表情" class="face1" style="cursor:pointer;vertical-align:middle" onclick="remark.dispFace(this)" onmouseout="remark.hideFace()"/>
			姓名： <input type="text" name="username" value="" maxlength="15" style="width:60px" class="inputbg"/>
			<input type="checkbox" id="rmAnonymitySt" onclick="remark.anony(this)"/><label for="rmAnonymitySt">匿名</label>
			字数 <input type="text" id="bodyLen" size="3" readonly="readonly" style="border-width:0;background:transparent;vertical-align:middle" value="0"/>
			<br/>
			<textarea name="body" cols="40" rows="4" onkeydown="remark.dispLen(this)" onkeyup="remark.handle(event,this);remark.dispLen(this)" style="width:39em;height:100px;margin:3px 0;overflow-y:auto"></textarea>
				<br/>
		　　　<input type="checkbox" checked="checked" id="rmAgreeSt"/><label for="rmAgreeSt">同意评论声明</label>
		　　　<button type="submit" style="width:50px">发表</button>
			</form><br>
			评论声明
			<ul style="list-style-type:square;margin:5px 0 0 1em;padding:0">
			<li>尊重网上道德，遵守中华人民共和国的各项有关法律法规</li>
			<li>承担一切因您的行为而直接或间接导致的民事或刑事法律责任</li>
			<li>本站管理人员有权保留或删除其管辖留言中的任意内容</li>
			<li>本站有权在网站内转载或引用您的评论</li>
			<li>参与本评论即表明您已经阅读并接受上述条款</li>
			</ul>
		</td>
		<td width="50%"><div class="linux799"><script type="text/javascript" src="/linuxfile/linux799.js"></script></div></td></tr>
		</table>
		<script type="text/javascript" src="../../inc/remark.js"></script>
		<script type="text/javascript">
			remark.maxSize=500;
			remark.minSize=2;
			remark.sourceEle=$(document.fmRemarkSt).find("button").get(0);
			iwms.vCode="CC74440A";
			iwms.user.name.length==0 ? $i("rmAnonymitySt").click() : $i("rmAnonymitySt").form.username.value=iwms.user.name;
		</script>
		<div class="reCont" id="reContainer"></div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	
</td><td width="300" valign="top">
<div class="linux901"><script type="text/javascript" src="/linuxfile/linux901.js"></script></div>
<div class="linux902"><script type="text/javascript" src="/linuxfile/linux902.js"></script></div>
<div class="linux903"><script type="text/javascript" src="/linuxfile/linux903.js"></script></div>
<div class="linux905"><script type="text/javascript" src="/linuxfile/linux905.js"></script></div>
	
	<div class="lframe">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">最新资讯</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<ul class="nl">
<li><a href="../../Linux/2018-10/154837.htm" target="_blank">树莓派自建 NAS 云盘之——数据自动备份</a></li>
<li><a href="../../Linux/2018-10/154836.htm" target="_blank">如何使用autofs挂载NFS共享</a></li>
<li><a href="../../Linux/2018-10/154835.htm" target="_blank" title="树莓派自建 NAS 云盘之——树莓派��建网络存储盘">树莓派自建 NAS 云盘之——树莓派搭建网络</a></li>
<li><a href="../../Linux/2018-10/154834.htm" target="_blank">Sysget：给主流的包管理器加个前端</a></li>
<li><a href="../../Linux/2018-10/154833.htm" target="_blank">Linux 系统上交换空间的介绍</a></li>
<li><a href="../../Linux/2018-10/154832.htm" target="_blank" title="如何将 Scikit-learn Python 库用于数据科学项目">如何将 Scikit-learn Python 库用于数据科</a></li>
<li><a href="../../Linux/2018-10/154831.htm" target="_blank">如何在 Linux 中列出可用的软件包组</a></li>
<li><a href="../../Linux/2018-10/154830.htm" target="_blank">我应该使用哪些Linux 稳定版内核？</a></li>
<li><a href="../../Linux/2018-10/154829.htm" target="_blank">C#的代码规范</a></li>
<li><a href="../../Linux/2018-10/154828.htm" target="_blank">GitHub简介、仓库的创建与维护</a></li>
</ul>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	<div class="u70"><script type="text/javascript" src="/linuxfile/u70.js"></script></div>
	<div class="u80"><script type="text/javascript" src="/linuxfile/u80.js"></script></div>
	<div class="u90"><script type="text/javascript" src="/linuxfile/u90.js"></script></div>
	<div class="space"></div>
	<div id="pin">
	<script type="text/javascript" src="/linuxfile/pin.js"></script>
	</div>
</td></tr>
</table>
<div class="linux906"><script type="text/javascript" src="/linuxfile/linux906.js"></script></div>
<div id="footer">
<a href="http://www.linuxidc.com/aboutus.htm">Linux公社简介</a> - <a href="http://www.linuxidc.com/adsense.htm">广告服务</a> - <a href="http://www.linuxidc.com/sitemap.aspx">网站地图</a> - <a href="http://www.linuxidc.com/help.htm">帮助信息</a> - <a href="http://www.linuxidc.com/contactus.htm">联系我们</a><br />本站（LinuxIDC）所刊载文章不代表同意其说法或描述，仅为提供更多信息，也不构成任何建议。<br /><script type="text/javascript" src="/linuxfile/qq.js"></script><br />
<script type="text/javascript" src="/linuxfile/foot.js"></script><br />Copyright &copy; 2006-2017　<a href="http://www.linuxidc.com/">Linux公社</a>　All rights reserved 浙ICP备07014134号-8
	<script type="text/javascript">iwms.aId=154836;$(function(){iwms.imgCont=$i('content');iwms.imgResize();InitContStyle();iwms.getVars();})</script>
	
</div>
</div>
<script type="text/javascript" src="/linuxren/linuxren1.js"></script>
<script type="text/javascript" src="/linuxren/linuxren2.js"></script>
<script type="text/javascript" src="/linuxren/linuxren3.js"></script>
</body>
</html>