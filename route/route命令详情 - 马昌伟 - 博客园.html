<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="origin">
    <meta property="og:description" content="基础命令学习目录首页 原文链接：https://www.cnblogs.com/lpfuture/p/5857738.html 考试题一：linux下如何添加路由(百度面试题) 以上是原题，老男孩老师">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>route命令详情 - 马昌伟 - 博客园</title>
    
    <link rel="stylesheet" href="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.css">
    <link id="MainCss" rel="stylesheet" href="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-coffee.css">
    <link type="text/css" rel="stylesheet" href="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/custom.css">
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-coffee-mobile.css">
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/machangwei-8/rss">
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/machangwei-8/rsd.xml">
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/machangwei-8/wlwmanifest.xml">
    <script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/amp4ads-host-v0.js"></script><script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_rendering_2020013001.js"></script><script async="" src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/analytics.js"></script><script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/jquery-2.js"></script>
    <script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.js"></script>
    <script>
        var currentBlogId = 412391;
        var currentBlogApp = 'machangwei-8';
        var cb_enable_mathjax = false;
        var isLogined = false;
    </script>
    
    
    
<link rel="preload" href="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js" as="script"><script type="text/javascript" src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js"></script><script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_2020013001.js" async=""></script></head>
<body>
    <a name="top"></a>
    <div id="page_begin_html"><script type="text/javascript">window['__document_write_ajax_callbacks__']['2']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['1']();</script>

<img src="http://39.106.31.74/wangli/picture/timg.gif" alt="" class="wodetu"></div>
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a href="https://www.cnblogs.com/machangwei-8/"><img id="blogLogo" src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/machangwei-8/">魔降风云变</a>
</h1>
<h2>

</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="navigator">
			
<ul id="navList">
	<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
	<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/machangwei-8/">
首页</a>
</li>
	<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
	<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E9%A9%AC%E6%98%8C%E4%BC%9F">
联系</a></li>
	<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
	<li>
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/machangwei-8/rss/">
订阅</a>
	
<a id="blog_nav_rss_image" href="https://www.cnblogs.com/machangwei-8/rss/">
    <img src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/xml.gif" alt="订阅">
</a></li>
</ul>



			<div class="blogStats">
				
				<!--done-->
随笔- 
378&nbsp;
文章- 
20&nbsp;
评论- 
12&nbsp;



				
			</div><!--end: blogStats -->
		</div><!--end: navigator 博客导航栏 -->
		<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			
<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/machangwei-8/p/10352872.html">route命令详情</a>

		</h1>
		<div class="clear"></div>
		<div class="postBody">
			
<div id="cnblogs_post_body" class="blogpost-body ">
    <p>&nbsp;</p>
<p><a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/machangwei-8/p/9299013.html">基础命令学习目录首页</a></p>
<p>&nbsp;</p>
<p>原文链接：https://www.cnblogs.com/lpfuture/p/5857738.html</p>
<p><strong>考试题一：linux下如何添加路由(百度面试题)</strong></p>
<p>&nbsp;</p>
<p><strong>以上是原题，老男孩老师翻译成如下3道题。</strong></p>
<p>&nbsp;</p>
<p>a.如何用命令行方式给linux机器添加一个默认网关，假设网关地址为10.0.0.254？</p>
<p>b. 192.168.1.0网段，&nbsp;192.168.1.1网关的某一服务器想连入172.16.1.0/24段,该如何添加路由（奇虎360）</p>
<p>c.如果添加一个主机路由？</p>
<p>请分别解答。</p>
<p><strong>解答：route</strong><strong>&nbsp;</strong>-net 172.16.1.0/24&nbsp;gw 192.168.1.1</p>
<p><strong>route 命令使用方法：</strong></p>
<p>&nbsp;</p>
<p><strong>a.缺省网关路由</strong></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;默认网关就是数据包不匹配任何设定的路由规则，最后流经的地址关口！网关按字面意思就是网络的关口，就相当于我们家里房子的门一样，如果外出就要经过房门，数据包也是一样。</p>
<p>&nbsp;</p>
<p>本题的答案：</p>
<p>&nbsp;</p>
<p>route del default gw 10.0.0.254</p>
<p>&nbsp;</p>
<p>解答实践：</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route -n&nbsp;</strong>#==&gt;查看路由表，netstat -rn也可以。</p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
 Metric Ref&nbsp;&nbsp;&nbsp;&nbsp;Use Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>#==&gt;这里就是系统的默认网关信息，表示去任何地方（0.0.0.0），都发给10.0.0.254，因为是默认网关，所以，放在了最后一条。路由也是有顺序的，如果不符合任何一条规则就交给默认网关处理。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route del default gw 10.0.0.254&nbsp;</strong>#==&gt;这个命令是删除默认的网关。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route -n</strong></p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
 Metric Ref&nbsp;&nbsp;&nbsp;&nbsp;Use Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route add default gw 10.0.0.254&nbsp;</strong>&nbsp;&nbsp;&nbsp;#==&gt;这个命令是添加默认的网关，也是本题的答案。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# netstat -rn</strong></p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags&nbsp;&nbsp;&nbsp;MSS
 Window&nbsp;&nbsp;irtt Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0&nbsp;#==&gt;又回来了</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route -n</strong></p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
 Metric Ref&nbsp;&nbsp;&nbsp;&nbsp;Use Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0&nbsp;#这里就是添加的默认网关记录。</p>
<p>&nbsp;</p>
<p><strong>特别强调：实际上route add default gw 10.0.0.254 就相当于route add -net 0.0.0.0 netmask 0.0.0.0 gw 10.0.0.254</strong></p>
<p>&nbsp;</p>
<p><strong>b.网络路由：即去往某一网络或网段的路由</strong></p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;一般多网段之间互相通信，希望建立一条优先路由，而不是通过默认网关时就可以配置网络路由。还是
拿房子比喻，你现在不是要出门，而是卧室，卫生间，去卧室就要经过卧室的门，去卫生间也要经过卫生间的门，这里的卧室和卫生间的门就可以认为是去往某一网
段的路由，而不是默认路由（即房子的门。）</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;实际工作中会有需求，两个不同的内部网络之间互访，而不是出网访问，就是上面例子的情况。</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;本题的答案：</p>
<p>&nbsp;</p>
<p>route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1</p>
<p>&nbsp;</p>
<p>解答实践：</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1</strong></p>
<p>&nbsp;</p>
<p>SIOCADDRT:&nbsp;网络不可达&nbsp;#==&gt;当连不通地址192.168.1.1时，无法添加路由。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# ifconfig eth0:0 192.168.1.1/24 up</strong>&nbsp;#==&gt;添加一个IP别名用于临时测试，如果永久生效最好加双网卡或写入到配置文件。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# ifconfig eth0:0&nbsp;</strong>#==&gt;查看添加的IP别名（网络里把这种多IP的方式称为子接口）</p>
<p>&nbsp;</p>
<p>eth0:0&nbsp;&nbsp;&nbsp;&nbsp;Link encap:Ethernet&nbsp;&nbsp;HWaddr 00:0C:29:65:A4:FD&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet 
addr:192.168.1.1&nbsp;&nbsp;Bcast:192.168.1.255&nbsp;&nbsp;Mask:255.255.255.0</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP 
BROADCAST RUNNING MULTICAST&nbsp;&nbsp;MTU:1500&nbsp;&nbsp;Metric:1</p>
<p>&nbsp;</p>
<p><strong>再来添加去192.168.1.0的数据包，交给192.168.1.1处理。</strong></p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1</strong></p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# netstat -rn&nbsp;</strong>&nbsp;&nbsp;#==&gt;和route -n很像。</p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags&nbsp;&nbsp;&nbsp;MSS
 Window&nbsp;&nbsp;irtt Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 
eth0&nbsp;#==&gt;这就是网络路由</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 eth0</p>
<p>&nbsp;</p>
<p>拓展：其他写法</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route add -net 192.168.1.0 netmask 255.255.255.0 dev eth0&nbsp;&nbsp;</strong>#==&gt;指定设备而不是地址。</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route -n</strong></p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
 Metric Ref&nbsp;&nbsp;&nbsp;&nbsp;Use Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;192.168.1.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route del -net 192.168.1.0/24 dev eth0&nbsp;&nbsp;&nbsp;</strong></p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route add -net 192.168.1.0/24 dev eth0&nbsp;&nbsp;&nbsp;</strong></p>
<p>&nbsp;</p>
<p><strong>[root@oldboy ~]# route -n</strong></p>
<p>&nbsp;</p>
<p>Kernel IP routing table</p>
<p>&nbsp;</p>
<p>Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Genmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags
 Metric Ref&nbsp;&nbsp;&nbsp;&nbsp;Use Iface</p>
<p>&nbsp;</p>
<p>10.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>192.168.1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.255.0&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>169.254.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;255.255.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10.0.0.254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UG&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0
 eth0</p>
<p>&nbsp;</p>
<p><strong>总结：</strong></p>
<p>&nbsp;</p>
<p><strong>route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1</strong></p>
<p>&nbsp;</p>
<p><strong>route add -net 192.168.1.0 netmask 255.255.255.0 dev eth0</strong></p>
<p>&nbsp;</p>
<p><strong>route add -net 192.168.1.0/24 dev eth0&nbsp;</strong></p>
<p>&nbsp;</p>
<p><strong>route del -net 192.168.1.0/24 dev eth0&nbsp;&nbsp;</strong></p>
<p>&nbsp;</p>
<p><strong>特别强调：以上配置在重启网络时都会失效，那么如何让它永久生效呢？</strong></p>
<p>&nbsp;</p>
<p>如果要是永久生效，有如下几种方法：</p>
<p><strong>方法一：</strong></p>
<p>&nbsp;</p>
<p>vi /etc/sysconfig/network-scripts/route-eth0&nbsp;&nbsp;#默认不存在此文件</p>
<p>&nbsp;</p>
<p>加入如下内容：</p>
<p>&nbsp;</p>
<p>192.168.1.0/24 via 192.168.1.1</p>
<p>&nbsp;</p>
<p>提示：写到配置里，重启网络服务和重启系统都会生效！</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>方法二：</strong></p>
<p>&nbsp;</p>
<p>vi /etc/sysconfig/static-routes&nbsp;&nbsp;#默认不存在此文件</p>
<p>&nbsp;</p>
<p>加入如下内容:</p>
<p>&nbsp;</p>
<p>any net 192.168.1.0/24 gw 192.168.1.1</p>
<p>&nbsp;</p>
<p>提示：写到配置里，重启网络服务和重启系统都会生效！</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>方法三：</strong></p>
<p>&nbsp;</p>
<p>vi /etc/rc.local</p>
<p>&nbsp;</p>
<p>加入如下内容：</p>
<p>&nbsp;</p>
<p>route add -net 192.168.1.0/24 gw 192.168.1.1</p>
<p>&nbsp;</p>
<p>PS:&nbsp;方法一推荐生产环境使用</p>
<p>&nbsp;</p>
<p>提示：方法三写到/etc/rc.local里只在开机时加载，当手工重启网络后会失效，但是重启系统后会生效！</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>如果是配置默认路由网关可以再网卡配置里：</p>
<p>[root@oldboy ~]# grep GATEWAY /etc/sysconfig/network-scripts/ifcfg-eth0</p>
<p>GATEWAY=10.0.0.254</p>
<p>&nbsp;</p>
<p><strong>c.主机路由：就是去往某个主机地址如何配置路由</strong></p>
<p>&nbsp;</p>
<p>/sbin/route add -host 192.168.2.13 dev eth2</p>
<p>&nbsp;</p>
<p>/sbin/route add -host 202.81.11.91 dev lo</p>
<p>&nbsp;</p>
<p>例如：keepalived或heartbeat高可用服务器对之间的使用单独网卡接心跳线通信就会用到以上主机路由。</p>
<p><strong>route命令拓展：</strong></p>
<p>&nbsp;</p>
<p>删除一条默认路由：</p>
<p>&nbsp;</p>
<p>route del default gw 10.0.0.254</p>
<p>&nbsp;</p>
<p>删除一条静态路由：</p>
<p>&nbsp;</p>
<p>route del&nbsp;&amp;ndash;net&nbsp;目标网络&nbsp;netmask</p>
<p>&nbsp;</p>
<p>如：route del -net 192.168.1.0/24&nbsp;或route&nbsp;del&nbsp;-net 192.168.1.0 netmask 255.225.255.0</p>
<p>&nbsp;</p>
<p>删除一条主机路由：</p>
<p>&nbsp;</p>
<p>route&nbsp;del&nbsp;-host 192.168.1.10 dev eth0</p>
<p>&nbsp;</p>
<p>有关route命令更详细的内容需要大家执行man route查看帮助，并仔细总结。</p>
<p>&nbsp;</p>
<p>有关此题，我们谈下多网段生产环境网段划分及路由的解决方案（1000台机器划分网段方案）。我们能感受到route命令不同功能应用案例</p>
<p>&nbsp;</p>
<div>1.&nbsp;&nbsp; 使用背景</div>
<div>需要接入两个网络，一个是部署环境所在内网环境，这个环境是上不了外网， 外网环境很可能是一个无线网络。如果两者都连接上，很可能导致有一方不能起作用，即外网或内网上不了，常常需要使用繁琐的“禁用网络连接”、“启用网络连接”的操作来进行内外网的切换，甚是麻烦。</div>
<div>&nbsp;</div>
<div>为了解决这个问题，可以使用route命令来使得同时内外网都可用。</div>
<div>&nbsp;</div>
<div>2.&nbsp;&nbsp; route命令</div>
<div>route命令是在本地 IP 路由表中显示和修改条目网络命令。</div>
<div>&nbsp;</div>
<div>route命令的语法如下：</div>
<div>&nbsp;</div>
<div>route [-f] [-p] [Command [Destination] [mask Netmask] [Gateway] [metric Metric]] [if Interface]]</div>
<div>route命令常用的命令如下：</div>
<div>&nbsp;</div>
<div>1）route delete：删除路由；</div>
<div>2）route print：打印路由的Destination；</div>
<div>3）route add：添加路由；</div>
<div>4）route change：更改现存路由。</div>
<div>&nbsp;</div>
<div>一般使用route delete、route add、route print这三条命令可解决路由的所有功能。</div>
<div>&nbsp;</div>
<div>2.1 打印路由信息</div>
<div>&nbsp;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 打印路由信息使用命令：route print。</div>
<div>&nbsp;</div>
<div>===========================================================================</div>
<div>Interface List</div>
<div>0x1&nbsp; MS TCP Loopback interface</div>
<div>0x2 00 26 18 31 4f d1&nbsp; Realtek RTL8168C(P)/8111C(P) PCI-E Gigabit Ether</div>
<div>net NIC - 数据包计划程序微型端口</div>
<div>0x50004 00 53 45 00 00 00&nbsp; WAN (PPP/SLIP) Interface</div>
<div>===========================================================================</div>
<div>===========================================================================</div>
<div>Active Routes:</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface Metric</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp; 116.69.106.119 
116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp; 192.168.2.226&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp;&nbsp; 115.168.64.94 255.255.255.255&nbsp;&nbsp; 116.69.106.119 116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp; 116.69.106.119 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50</div>
<div>&nbsp;116.255.255.255 255.255.255.255&nbsp;&nbsp; 116.69.106.119 116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.2.0&nbsp;&nbsp;&nbsp; 
255.255.255.0&nbsp;&nbsp;&nbsp;&nbsp; 192.168.2.79&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp; 192.168.2.79 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp;&nbsp; 192.168.2.255 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp; 192.168.2.79&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp;&nbsp;&nbsp; 192.168.2.79&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp; 116.69.106.119 
116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;255.255.255.255 255.255.255.255&nbsp;&nbsp; 116.69.106.119 116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;255.255.255.255 255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp; 
192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>Default Gateway:&nbsp;&nbsp;&nbsp; 116.69.106.119</div>
<div>===========================================================================</div>
<div>Persistent Routes:</div>
<div>&nbsp;None</div>
<div>第一列是网络目的地址。列出了路由器连接的所有的网段。</div>
<div>&nbsp;</div>
<div>第二行网络掩码列提供这个网段本身的子网掩码，而不是连接到这个网段的网卡的子网掩码。这基本上能够让路由器确定目的网络的地址类。</div>
<div>&nbsp;</div>
<div>第三列是网关。一旦路由器确定它要把这个数据包转发到哪一个目的网络，路由器就要查看网关列表。网关表告诉路由器这个数据包应该转发到哪一个IP地址才能达到目的网络。</div>
<div>&nbsp;</div>
<div>第四列接口列告诉路由器哪一个网卡连接到了合适的目的网络。从技术上说，接口列仅告诉路由器分配给网卡的IP地址。那个网卡把路由器连接到目的网络。然而，路由器很聪明，知道这个地址绑定到哪一个物理网卡。</div>
<div>&nbsp;</div>
<div>第五列是测量。测量本身是一种科学。该值越小的，可信度越高</div>
<div>&nbsp;</div>
<div>下面说说每一行内容代表的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Metric&nbsp;</div>
<div>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
116.69.106.119&nbsp; 116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
1&nbsp;</div>
<div>&nbsp;&nbsp; 这表示发向任意网段的数据通过本机接口116.69.106.119被送往一个默认的网关：116.69.106.119，它的管理距离是1，管理距离指的是在路径选择的过程中信息的可信度，管理距离越小的，可信度越高。</div>
<div>&nbsp;</div>
<div>第二行的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Metric&nbsp;</div>
<div>0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
192.168.2.226&nbsp; 192.168.2.79&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20</div>
<div>&nbsp;&nbsp; 这表示发向任意网段的数据通过本机接口192.168.2.79被送往网关192.168.2.226，但是因为该行的管理距离（Metric）比第一行大，即表示第二行的可信度没有第一行高，所以在默认情况下会优先选择第一行的网关出去。</div>
<div>&nbsp;</div>
<div>第三行的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Metric&nbsp;</div>
<div>115.168.64.94&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 255.255.255.255&nbsp;&nbsp;&nbsp; 116.69.106.119 
116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;</div>
<div>第四行的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Metric&nbsp;</div>
<div>116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 255.255.255.255&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 50</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
表示从自己的主机发送到自己主机的数据包，如果使用的是自己主机的IP地址，跟使用回环地址效果相同，通过同样的途径被路由，也就是如果我有自己的站点，
我要浏览自己的站点，在IE地质栏里面输入localhost与116.69.106.119是一样的，尽管localhost被解析为 
127.0.0.1。</div>
<div>&nbsp;</div>
<div>&nbsp;第五行的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Metric&nbsp;</div>
<div>116.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 255.255.255.255&nbsp;&nbsp;&nbsp; 116.69.106.119 
116.69.106.119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50</div>
<div>&nbsp;&nbsp; 这里的目的地址是一个局域广播地址，系统对这样的数据包的处理方法是把本机116..69.106.119作为网关，发送局域广播帧，这个帧将被路由器过滤。</div>
<div>&nbsp;</div>
<div>第六行的内容：</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Interface&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Metric&nbsp;</div>
<div>127.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;</div>
<div>2.2 删除路由信息</div>
<div>所用的命令为：</div>
<div>&nbsp;</div>
<div>route delete 网络目的地址 [mask] [子网掩码]</div>
<div>&nbsp;&nbsp; 例如想要删除网络目的地址为192.168.2.0，子网掩码为255.255.255.0的路由，可用：</div>
<div>&nbsp;</div>
<div>route delete 192.168.2.0 mask 255.255.0.0</div>
<div>&nbsp;&nbsp;&nbsp; 删除路由时还可以用模糊匹配，例如要删除以115开头的IP路由表中的所有路由时，可用：</div>
<div>&nbsp;</div>
<div>route delete 115*</div>
<div>&nbsp;</div>
<div>2.3 添加路由信息</div>
<div>&nbsp;</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 添加路由信息使用如下命令：</div>
<div>&nbsp;</div>
<div>route add 网络目的地址 mask 子网掩码网关 [metric] [测量值]</div>
<div>&nbsp;&nbsp; 例如若要向带有255.255.0.0子网掩码、10.27.0.1网关，测量值为7的10.41.0.0的目标地址添加一条路由，可使用如下命令：</div>
<div>&nbsp;</div>
<div>route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7</div>
<div>3.&nbsp;&nbsp; 应用实例</div>
<div>&nbsp;</div>
<div>以调试环境为例，需要接入内网进行调试，内网地址为5.0.217.47。另外接了个无线，可以上外网自动分配了个192.168.2.110。</div>
<div>插上内网网线，并成功连接上外网后，此时内网是通的，但是外网连接不上。在命令窗口使用ipconfig和route print命令可以打印出当前的信息：</div>
<div>&nbsp;</div>
<div>route print</div>
<div>===========================================================================</div>
<div>Interface List</div>
<div>0x1&nbsp; MS TCP Loopback interface</div>
<div>0x2 00 26 18 31 4f d1&nbsp; Realtek RTL8168C(P)/8111C(P) PCI-E Gigabit Ether</div>
<div>net NIC - 数据包计划程序微型端口</div>
<div>0x3 00 24 2c e7 57 11&nbsp; Atheros AR5006X Wireless Network Adapter - 数据</div>
<div>包计划程序微型端口</div>
<div>&nbsp;</div>
<div>===========================================================================</div>
<div>===========================================================================</div>
<div>Active Routes:</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface Metric</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.0.217.0 
255.255.255.192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.0.217.47 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp; 5.255.255.255 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.0&nbsp;&nbsp;&nbsp; 
255.255.255.0&nbsp;&nbsp;&nbsp; 192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp; 192.168.1.110 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp; 192.168.1.255 255.255.255.255&nbsp;&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp;&nbsp; 192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;255.255.255.255 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;255.255.255.255 255.255.255.255&nbsp;&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>Default Gateway:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1</div>
<div>===========================================================================</div>
<div>Persistent Routes:</div>
<div>&nbsp;None</div>
<div>&nbsp;</div>
<div>ipconfig</div>
<div>&nbsp;</div>
<div>Windows IP Configuration</div>
<div>Ethernet adapter 本地连接:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Connection-specific DNS Suffix . :</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IP Address. . . . . . . . . . . . : 5.0.217.47</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subnet Mask . . . . . . . . . . . : 255.255.255.192</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default Gateway . . . . . . . . . :</div>
<div>Ethernet adapter 无线网络连接:</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Connection-specific DNS Suffix . :</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IP Address. . . . . . . . . . . . : 192.168.1.110</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Subnet Mask . . . . . . . . . . . : 255.255.255.0</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Default Gateway . . . . . . . . . : 192.168.1.1</div>
<div>由route print命令的结果的第一行可以看到，只所以访问不到外网，是因为默认的情况是通过5.0.217.1的内网的网关出去的。</div>
<div>&nbsp;</div>
<div>为了达到能同时访问内外网的需求，只需要删除掉0.0.0.0的路由后，添加两条路由即可，将5开头的地址都通过5.0.217.1网关路由出去，而其余的地址都通过无线的网关192.168.1.110出去。参考如下：</div>
<div>&nbsp;</div>
<div>route delete 0.0.0.0</div>
<div>route add 0.0.0.0 mask 0.0.0.0 192.168.1.1</div>
<div>route add 5.0.0.0 mask 255.0.0.0 5.0.217.1</div>
<div>&nbsp;</div>
<div>此时运行route print命令，可看到运行结果如下：</div>
<div>route print</div>
<div>===========================================================================</div>
<div>Interface List</div>
<div>0x1&nbsp; MS TCP Loopback interface</div>
<div>0x2 00 26 18 31 4f d1&nbsp; Realtek RTL8168C(P)/8111C(P) PCI-E Gigabit Ether</div>
<div>net NIC - 数据包计划程序微型端口</div>
<div>0x3 00 24 2c e7 57 11&nbsp; Atheros AR5006X Wireless Network Adapter - 数据</div>
<div>包计划程序微型端口</div>
<div>===========================================================================</div>
<div>===========================================================================</div>
<div>Active Routes:</div>
<div>Network Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Netmask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Gateway&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface Metric</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
0.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.0.217.0 
255.255.255.192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.0.217.47 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp; 5.255.255.255 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
255.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.0&nbsp;&nbsp;&nbsp; 
255.255.255.0&nbsp;&nbsp;&nbsp; 192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp; 192.168.1.110 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
127.0.0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp; 192.168.1.255 255.255.255.255&nbsp;&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10</div>
<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
224.0.0.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
240.0.0.0&nbsp;&nbsp;&nbsp; 192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25</div>
<div>&nbsp;255.255.255.255 
255.255.255.255&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
5.0.217.47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>&nbsp;255.255.255.255 255.255.255.255&nbsp;&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp; 
192.168.1.110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</div>
<div>Default Gateway:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.1</div>
<div>===========================================================================</div>
<div>Persistent Routes:</div>
<div>&nbsp;None</div>
<div>&nbsp;&nbsp; 可看到默认是通过无线的192.168.1.110出去的，此时内外网都可以同时用了<br>--------------------- <br>作者：zqixiao_09 <br>来源：CSDN <br>原文：https://blog.csdn.net/zqixiao_09/article/details/53401818 <br>版权声明：本文为博主原创文章，转载请附上博文链接！</div>
<p>&nbsp;</p>
<p>原文链接：http://blog.51cto.com/13574027/2084953</p>
<p>一 路由的基础知识：<br>1）路由概念<br>路由：   跨越从源主机到目标主机的一个互联网络来转发数据包的过程<br>路由器：能够将数据包转发到正确的目的地，并在转发过程中选择最佳路径的设备<br>路由表：在路由器中维护的路由条目，路由器根据路由表做路径选择<br>直连路由：当在路由器上配置了接口的IP地址，并且接口状态为up的时候，路由表中就出现直连路由项<br>静态路由：是由管理员手工配置的，是单向的。<br>默认路由：当路由器在路由表中找不到目标网络的路由条目时，路由器把请求转发到默认路由接口 。</p>
<p>2）静态路由和默认路由的特点<br>静态路由特点:<br>路由表是手工设置的；<br>除非网络管理员干预，否则静态路由不会发生变化；<br>路由表的形成不需要占用网络资源；<br>适用环境：一般用于网络规模很小、拓扑结构固定的网络中。</p>
<p>默认路由特点:<br>在所有路由类型中，默认路由的优先级最低<br>适用环境：一般应用在只有一个出口的末端网络中或作为其他路由的补充</p>
<p>浮动静态路由：<br>路由表中存在相同目标网络的路由条目时，根据路由条目优先级的高低，将请求转发到相应端口；<br>链路冗余的作用；</p>
<p>3）路由器转发数据包时的封装过程<br>源IP和目标IP不发生变化，在网络的每一段传输时，源和目标MAC发生变化，进行重新封装，分别是每一段的源和目标地址</p>
<p>4）要完成对数据包的路由，一个路由器必须至少了解以下内容：<br>a）目的地址<br>b）相连路由器，并可以从哪里获得远程网络的信息<br>c）到所有远程网络的可能路由<br>d）到达每个远程网络的最佳路由<br>e）如何维护并验证路由信息<br>f）路由和交换的对比<br>路由工作在网络层<br>a)根据“路由表”转发数据<br>b)路由选择<br>c)路由转发<br>交换工作在数据链路层<br>d)根据“MAC地址表”转发数据<br>e)硬件转发<br>二．命令参数：<br>-c 显示更多信息<br>-n 不解析名字<br>-v 显示详细的处理信息<br>-F 显示发送信息<br>-C 显示路由缓存<br>-f 清除所有网关入口的路由表。 <br>-p 与 add 命令一起使用时使路由具有永久性。</p>
<p>add:添加一条新路由。<br>del:删除一条路由。<br>-net:目标地址是一个网络。<br>-host:目标地址是一个主机。<br>netmask:当添加一个网络路由时，需要使用网络掩码。<br>gw:路由数据包通过网关。注意，你指定的网关必须能够达到。<br>metric：设置路由跳数。<br>Command 指定您想运行的命令 (Add/Change/Delete/Print)。 <br>Destination 指定该路由的网络目标。 <br>mask Netmask 指定与网络目标相关的网络掩码（也被称作子网掩码）。 <br>Gateway 指定网络目标定义的地址集和子网掩码可以到达的前进或下一跃点 IP 地址。 <br>metric Metric 为路由指定一个整数成本值标（从 1 至 9999），当在路由表(与转发的数据包目标地址最匹配)的多个路由中进行选择时可以使用。 <br>if Interface 为可以访问目标的接口指定接口索引。若要获得一个接口列表和它们相应的接口索引，使用 route print 命令的显示功能。可以使用十进制或十六进制值进行接口索引。<br>三 命令使用例子<br>1.添加到主机的路由<br>#route add -host 192.168.1.2 dev eth0:0<br>#route add -host 10.20.30.148 gw 10.20.30.40<br>2.添加到网络的路由<br>#route add -net 10.20.30.40 netmask 255.255.255.248 eth0<br>#route add -net 10.20.30.48 netmask 255.255.255.248 gw 10.20.30.41<br>#route add -net 192.168.1.0/24 eth1<br>3.添加默认路由<br>#route add default gw 192.168.1.1</p>
<p>4.删除路由<br>#route del -host 192.168.1.2 dev eth0:0<br>#route del -host 10.20.30.148 gw 10.20.30.40<br>#route del -net 10.20.30.40 netmask 255.255.255.248 eth0<br>#route del -net 10.20.30.48 netmask 255.255.255.248 gw 10.20.30.41<br>#route del -net 192.168.1.0/24 eth1<br>#route del default gw 192.168.1.1  //route del default   删除所有的默认路由</p>
<p>添加一条默认路由<br>#route add default gw 10.0.0.1  //默认只在内存中生效开机自启动可以追加到/etc/rc.local文件里<br>#echo "route add default gw 10.0.0.1" &gt;&gt;/etc/rc.local</p>
<p>添加一条静态路由<br>#route add -net 192.168.2.0/24 gw 192.168.2.254<br>要永久生效的话要这样做：<br>#echo "any net 192.168.2.0/24 gw 192.168.2.254" &gt;&gt;/etc/sysconfig/static-routes</p>
<p>添加到一台主机的静态路由<br>route add -host 192.168.2.2 gw 192.168.2.254<br>要永久生效的话要这样做：<br>#echo "any  host 192.168.2.2 gw 192.168.2.254 " &gt;&gt;/etc/sysconfig/static-routes<br>注：Linux 默认没有这个文件 ，得手动创建一个<br>5设置包转发<br>在Linux中默认的内核配置已经包含了路由功能，但默认并没有在系统启动时启用此功能；<br>开启Linux的路由功能可以通过调整内核的网络参数来实现，方法如下：<br>临时开启路由功能：<br>#echo 1 &gt; /proc/sys/net/ipv4/ip_forward<br>或者# sysctl -w net.ipv4.ip_forward=1<br>永久开启路由功能<br>#vim /etc/sysctl.conf<br>net.ipv4.ip_forward = 1<br>#sysctl -p<br>6.静态路由配置<br>添加静态路由到路由表的语法如下：<br>1.ip route [destination_network] [mask] [next-hop_address]administrative_distance]<br>参数解析：<br>ip route        用于创建静态路由的命令。<br>Destination_network        需要发布到路由表中的网段。<br>Mask        在这一网络上使用的子网掩码。<br>Next-hop_address        下一跳路由器的地址。<br>administrative_distance      默认时，静态路由有一个取值为1 的管理性距离。在这个命令的尾部添加管理权来修改这个默认值。<br>例如<br>ip route 172.16.1.0 255.255.255.0 172.16.2.1<br>查看路由表除了使用route -n命令外，还可以使用ip route<br>[root@dev~]# ip route<br>192.168.1.17 dev ppp0  proto kernel  scope link  src 192.168.1.190<br>10.1.32.14 dev tun0  scope link<br>10.1.32.12 dev tun0  scope link<br>10.4.8.2 via 192.168.9.254 dev eth0  src 192.168.9.200  mtu 1500 advmss 1460<br>10.4.9.0/24 dev tun0  scope link<br>192.168.9.0/24 dev eth0  proto kernel  scope link  src 192.168.9.200  metric 1<br>10.2.0.0/16 dev tun0  scope link<br>10.0.0.0/16 dev tun0  scope link<br>10.1.0.0/16 dev tun0  scope link<br>192.168.0.0/16 dev tun0  scope link<br>default via 192.168.9.254 dev eth0<br>[root@dev ~]# ip route<br>192.168.1.17 dev ppp0  proto kernel  scope link  src 192.168.1.190<br>10.1.32.14 dev tun0  scope link<br>10.1.32.12 dev tun0  scope link<br>10.4.8.2 via 192.168.9.254 dev eth0  src 192.168.9.200  mtu 1500 advmss 1460<br>10.4.9.0/24 dev tun0  scope link<br>192.168.9.0/24 dev eth0  proto kernel  scope link  src 192.168.9.200  metric 1<br>10.2.0.0/16 dev tun0  scope link<br>10.0.0.0/16 dev tun0  scope link<br>10.1.0.0/16 dev tun0  scope link<br>192.168.0.0/16 dev tun0  scope link<br>default via 192.168.9.254 dev eth0<br>二. linux网卡命令<br><strong>Centos6</strong><br>ifconfig 查看所有网卡<br>ifconfig -网卡名         查看单个网卡信息<br>ifconfig up 网卡名     重启网卡<br>ifconfig down 网卡名 禁用网卡<br>/etc/sysconfig/network-scripts/  网卡配置文件<br><strong>Centos6手动改网卡:</strong><br>vim /etc/sysconfig/network-scripts/ifcfg-ethX<br>DEVICE=eth0  //设备名字<br>ONBOOT=yes  //是否开启<br>NM_CONTROLLED=yes //是否实时生效<br>BOOTPROTO=static  //ip的状态<br>IPADDR=172.18.253.211 //ip<br>PREFIX=16 //ip id<br>GATEWAY=172.18.0.1//网关<br>DNS1=172.18.0.1 //域名<br>HWADDR=00:0C:29:55:04:FE //mac地址</p>
<p><strong>Centos7 nmlic命令集</strong><br>显示所有网络连接：nmcli con show <br>显示活动网络连接：nmcli con show -active <br>显示指定网络连接的详情：nmcli con show eno16777728<br>显示网络设备连接状态：nmcli dev status<br>显示所有网络设备的详情：nmcli dev show <br>显示指定网络设备的详情：nmcli dev show eno16777728   <br>启用网络连接：nmcli con up eno16777728 停用网络连接（可被自动激活）：nmcli con down eno33554960 <br>禁用网卡，防止被自动激活：nmcli dev dis eth0  <br>删除网络连接的配置文件：nmcli con del eno33554960 <br>重新加载配置网络配置文件：nmcli con reload  <br>动态获取IP方式的网络连接配置：nmcli con add con-name eno16777728 type ethernet ifname eno16777728 <br>指
定静态IP方式的网络连接配置：nmcli con add con-name eno16777728 ifname eno16777728 
autoconnect yes type ethernet ip4 10.1.254.254/16 gw4 10.1.0.1  <br>启用/关闭所有的网络连接：nmcli net on/off 禁用网络设备并防止自动激活：nmcli con dis eno33554960 <br>查看添加网络连接配置的帮助：nmcli con add help </p>
<p><strong>修改网络连接单项参数</strong><br>nmcli con mod IF-NAME connection.autoconnect yes修改为自动连接<br>nmcli con mod IF-NAME ipv4.method manual | dhcp修改IP地址是静态还是DHCP<br>nmcli con mod IF-NAME ipv4.addresses “172.25.X.10/24 172.25.X.254”修改IP配置及网关<br>nmcli con mod IF-NAME ipv4.gateway 10.1.0.1修改默认网关<br>nmcli con mod IF-NAME +ipv4.addresses 10.10.10.10/16添加第二个IP地址<br>nmcli con mod IF-NAME ipv4.dns 114.114.114.114添加dns1<br>nmcli con mod IF-NAME +ipv4.dns  8.8.8.8添加dns2<br>nmcli con mod IF-NAME -ipv4.dns  8.8.8.8删除dns</p>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block"><div id="BlogPostCategory">
    分类: 
            <a href="https://www.cnblogs.com/machangwei-8/category/1164784.html" target="_blank">Linux命令</a></div>


    <div id="blog_post_info">
<div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(10352872,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
        <a id="green_channel_follow" onclick="follow('67eb649c-b9ec-451f-2de8-08d52fc34315');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/machangwei-8/">马昌伟</a><br>
            <a href="https://home.cnblogs.com/u/machangwei-8/followees/">关注 - 34</a><br>
            <a href="https://home.cnblogs.com/u/machangwei-8/followers/">粉丝 - 45</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('67eb649c-b9ec-451f-2de8-08d52fc34315');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(10352872,'Digg')">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(10352872,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>

<script type="text/javascript">
    currentDiggType = 0;
</script></div>
    <div class="clear"></div>
    <div id="post_next_prev">

    <a href="https://www.cnblogs.com/machangwei-8/p/10352808.html" class="p_n_p_prefix">« </a> 上一篇：    <a href="https://www.cnblogs.com/machangwei-8/p/10352808.html" title="发布于 2019-02-05 15:56">ping命令详解</a>
    <br>
    <a href="https://www.cnblogs.com/machangwei-8/p/10352887.html" class="p_n_p_prefix">» </a> 下一篇：    <a href="https://www.cnblogs.com/machangwei-8/p/10352887.html" title="发布于 2019-02-05 17:23">ifconfig命令详情</a>

</div>
</div>
		</div>
		<div class="postDesc">posted @ 
<span id="post-date">2019-02-05 17:07</span>&nbsp;
<a href="https://www.cnblogs.com/machangwei-8/">马昌伟</a>&nbsp;
阅读(<span id="post_view_count">2359</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=10352872" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(10352872);return false;">收藏</a></div>
	</div>
	
	
</div><!--end: topics 文章、评论容器-->
<script src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/highlight.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 412391, cb_blogApp = 'machangwei-8', cb_blogUserGuid = '67eb649c-b9ec-451f-2de8-08d52fc34315';
    var cb_entryId = 10352872, cb_entryCreatedDate = '2019-02-05 17:07', cb_postType = 1; 
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>

<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"><div class="login_tips">
    注册用户登录后才能发表评论，请 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login('commentform');">登录</a>
     或 
    <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，
    <a href="https://www.cnblogs.com/">访问</a> 网站首页。
</div></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-ucancode')">【推荐】超50万行VC++源码: 大型组态工控、电力仿真CAD与GIS源码库</a><br><a href="https://cloud.tencent.com/act/season?fromSource=gwzcw.3422970.3422970.3422970&amp;utm_medium=cpc&amp;utm_id=gwzcw.3422970.3422970.3422970" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-腾讯云')">【活动】腾讯云服务器推出云产品采购季 1核2G首年仅需99元</a><br><a href="https://developer.aliyun.com/article/718649?utm_content=g_1000088936" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-阿里云开发者社区')">【推荐】这6种编码方法，你掌握了几个？</a><br><a href="https://developer.aliyun.com/article/717197?utm_content=g_1000088944" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-阿里云开发者社区')">【推荐】开放下载！《长安十二时辰》爆款背后的优酷技术秘籍首次公开</a><br></div>
    <div id="opt_under_post"></div>
    <script async="async" src="route%E5%91%BD%E4%BB%A4%E8%AF%A6%E6%83%85%20-%20%E9%A9%AC%E6%98%8C%E4%BC%9F%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <script>
        googletag.cmd.push(function () {
            googletag.defineSlot("/1090369/C1", [300, 250], "div-gpt-ad-1546353474406-0").addService(googletag.pubads());
            googletag.defineSlot("/1090369/C2", [468, 60], "div-gpt-ad-1539008685004-0").addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CLCQ9f-23ucCFQ6MvQodJs4Iew"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" data-google-container-id="1" data-load-complete="true" width="300" height="250" frameborder="0"></iframe></div></div>
    </div>
    <div id="under_post_news"><div class="recomm-block"><b>相关博文：</b><br>·  <a title="route命令详解" href="https://www.cnblogs.com/danmiao/p/10024383.html" target="_blank" onclick="clickRecomItmem(10024383)">route命令详解</a><br>·  <a title="linux route" href="https://www.cnblogs.com/howhy/p/7250877.html" target="_blank" onclick="clickRecomItmem(7250877)">linux route</a><br>·  <a title="linux route命令详解" href="https://www.cnblogs.com/lpfuture/p/5857738.html" target="_blank" onclick="clickRecomItmem(5857738)">linux route命令详解</a><br>·  <a title="Linux route 使用" href="https://www.cnblogs.com/dongzhiquan/archive/2012/12/26/2834904.html" target="_blank" onclick="clickRecomItmem(2834904)">Linux route 使用</a><br>·  <a title="每天一个linux命令（02）：route命令" href="https://www.cnblogs.com/mrwuzs/p/8039892.html" target="_blank" onclick="clickRecomItmem(8039892)">每天一个linux命令（02）：route命令</a><br>»  <a target="_blank" href="https://recomm.cnblogs.com/blogpost/10352872">更多推荐...</a><div id="cnblogs_t5"><a href="https://developer.aliyun.com/article/726190?utm_content=g_1000088941" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T5-阿里云开发者社区')">深度回顾！30篇好文，解析历年双十一背后的阿里技术秘籍</a></div></div></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CLGQ9f-23ucCFQ6MvQodJs4Iew">
            <script>
                if (new Date() >= new Date(2018, 9, 13)) {
                    googletag.cmd.push(function () { googletag.display("div-gpt-ad-1539008685004-0"); });
                }
            </script>
        <div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none; width: 468px; height: 60px;"></div></div>
    </div>
    <div id="under_post_kb">
<div class="itnews c_ad_block">
    <b>最新 IT 新闻</b>:
    <br>
 ·              <a href="https://news.cnblogs.com/n/655993/" target="_blank">小米6 Pro工程机平台炒至2万余元，王腾：设计太超前</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/655992/" target="_blank">巴菲特：比特币像贝壳 能用来支付但毫无价值</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/655991/" target="_blank">去年ASML出货26台光刻机，卖给了谁？</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/655990/" target="_blank">人类首次在银河系外发现氧气，离外星人更近了吗？</a>
            <br>
 ·              <a href="https://news.cnblogs.com/n/655989/" target="_blank">“凭空”而来的电流，揭开了一个新时代</a>
            <br>
    » <a href="https://news.cnblogs.com/" title="IT 新闻" target="_blank">更多新闻...</a>
</div></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);        deliverAdT2();
        deliverAdC1();
        deliverAdC2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div></div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem"><!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	
<div id="blog-news">
    
    <div id="profile_block">
        昵称：
        <a href="https://home.cnblogs.com/u/machangwei-8/">
            马昌伟
        </a>
        <br>
        园龄：
        <a href="https://home.cnblogs.com/u/machangwei-8/" title="入园时间：2017-11-24">
            2年2个月
        </a>
        <br>
        粉丝：
        <a href="https://home.cnblogs.com/u/machangwei-8/followers/">
            45
        </a>
        <br>
        关注：
        <a href="https://home.cnblogs.com/u/machangwei-8/followees/">
            34
        </a>
        <div id="p_b_follow">
<a href="javascript:void(0)" onclick="follow('67eb649c-b9ec-451f-2de8-08d52fc34315')">+加关注</a></div>
        <script>getFollowStatus('67eb649c-b9ec-451f-2de8-08d52fc34315');</script>
    </div>
</div>
</div>

</div>

			<div id="calendar"><div id="blog-calendar" style="">

<table id="blogCalendar" class="Cal" title="Calendar" cellspacing="0" cellpadding="0" border="0">
    <tbody>
        <tr>
            <td colspan="7">
                <table class="CalTitle" cellspacing="0" border="0">
                    <tbody>
                        <tr>
                            <td class="CalNextPrev">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar('2020/01/20'); return false;">&lt;</a>
                            </td>
                            <td align="center">2020年2月</td>
                            <td class="CalNextPrev" align="right">
                                <a href="javascript:void(0);" onclick="loadBlogCalendar('2020/03/20'); return false;">&gt;</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </td>
        </tr>
        <tr>
                    <th class="CalDayHeader" abbr="日" scope="col" align="center">日</th>
                    <th class="CalDayHeader" abbr="一" scope="col" align="center">一</th>
                    <th class="CalDayHeader" abbr="二" scope="col" align="center">二</th>
                    <th class="CalDayHeader" abbr="三" scope="col" align="center">三</th>
                    <th class="CalDayHeader" abbr="四" scope="col" align="center">四</th>
                    <th class="CalDayHeader" abbr="五" scope="col" align="center">五</th>
                    <th class="CalDayHeader" abbr="六" scope="col" align="center">六</th>
        </tr>
            <tr>
                            <td class="CalOtherMonthDay" align="center">26</td>
                            <td class="CalOtherMonthDay" align="center">27</td>
                            <td class="CalOtherMonthDay" align="center">28</td>
                            <td class="CalOtherMonthDay" align="center">29</td>
                            <td class="CalOtherMonthDay" align="center">30</td>
                            <td class="CalOtherMonthDay" align="center">31</td>
                    <td class="CalWeekendDay" align="center">
                        1
                    </td>
            </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            2
                        </td>
                            <td class="" align="center">
                                3
                            </td>
                            <td class="" align="center">
                                4
                            </td>
                            <td class="" align="center">
                                5
                            </td>
                            <td class="" align="center">
                                6
                            </td>
                            <td class="" align="center">
                                7
                            </td>
                        <td class="CalWeekendDay" align="center">
                            8
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            9
                        </td>
                            <td class="" align="center">
                                10
                            </td>
                            <td class="" align="center">
                                11
                            </td>
                            <td class="" align="center">
                                12
                            </td>
                            <td class="" align="center">
                                13
                            </td>
                            <td class="" align="center">
                                14
                            </td>
                        <td class="CalWeekendDay" align="center">
                            15
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            16
                        </td>
                            <td class="" align="center">
                                17
                            </td>
                            <td class="" align="center">
                                18
                            </td>
                            <td class="" align="center">
                                19
                            </td>
                            <td class="CalTodayDay" align="center">
                                20
                            </td>
                            <td class="" align="center">
                                21
                            </td>
                        <td class="CalWeekendDay" align="center">
                            22
                        </td>
                </tr>
                <tr>
                        <td class="CalWeekendDay" align="center">
                            23
                        </td>
                            <td class="" align="center">
                                24
                            </td>
                            <td class="" align="center">
                                25
                            </td>
                            <td class="" align="center">
                                26
                            </td>
                            <td class="" align="center">
                                27
                            </td>
                            <td class="" align="center">
                                28
                            </td>
                        <td class="CalWeekendDay" align="center">
                            29
                        </td>
                </tr>
                <tr>
                        <td class="CalOtherMonthDay" align="center">
                            1
                        </td>
                            <td class="CalOtherMonthDay" align="center">
                                2
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                3
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                4
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                5
                            </td>
                            <td class="CalOtherMonthDay" align="center">
                                6
                            </td>
                        <td class="CalOtherMonthDay" align="center">
                            7
                        </td>
                </tr>
    </tbody>
</table></div><script>loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn">
<!-- 搜索 -->
<div id="sidebar_search" class="sidebar-block">
    <div id="sidebar_search" class="mySearch">
        <h3 class="catListTitle">搜索</h3>
        <div id="sidebar_search_box">
            <div id="widget_my_zzk" class="div_my_zzk">
                <input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk">
            </div>
            <div id="widget_my_google" class="div_my_zzk">
                <input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk">
            </div>
        </div>
    </div>
</div>

<!-- 常用链接 -->
<div id="sidebar_shortcut" class="sidebar-block">
    <div class="catListLink">
<h3 class="catListTitle">
常用链接
</h3>
<ul>
		<li>

<a href="https://www.cnblogs.com/machangwei-8/p/" title="我的博客的随笔列表">我的随笔</a>
</li>
		<li>

<a href="https://www.cnblogs.com/machangwei-8/MyComments.html" title="我的发表过的评论列表">我的评论</a>
</li>
		<li>

<a href="https://www.cnblogs.com/machangwei-8/OtherPosts.html" title="我评论过的随笔列表">我的参与</a>
</li>
		<li>

<a href="https://www.cnblogs.com/machangwei-8/RecentComments.html" title="我的博客的评论列表">最新评论</a>
</li>
		<li>

<a href="https://www.cnblogs.com/machangwei-8/tag/" title="我的博客的标签列表">我的标签</a>
</li>

<li><a id="itemListLink" onclick="this.blur();WarpClass('itemListLink', 'itemListLin_con');return false;" href="#">更多链接</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div>


</div>

<!-- 最新随笔 -->



<!-- 我的标签 -->
<div id="sidebar_toptags" class="sidebar-block">
    <div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>

        <li>
            <a href="https://www.cnblogs.com/machangwei-8/tag/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A6%82%E5%BF%B5/">计算机概念</a>(2)
        </li>
        <li>
            <a href="https://www.cnblogs.com/machangwei-8/tag/%E7%BD%91%E7%BB%9C/">网络</a>(1)
        </li>
        <li>
            <a href="https://www.cnblogs.com/machangwei-8/tag/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/">网络协议</a>(1)
        </li>
        <li>
            <a href="https://www.cnblogs.com/machangwei-8/tag/%E8%BF%90%E7%BB%B4/">运维</a>(1)
        </li>
        <li>
            <a href="https://www.cnblogs.com/machangwei-8/tag/Linux%E5%91%BD%E4%BB%A4/">Linux命令</a>(1)
        </li>

</ul>
</div>


</div>

<!-- 积分与排名 -->


<!-- 随笔分类、随笔档案、文章分类、新闻分类、相册、链接 -->
<div id="sidebar_categories">
    
<div class="catListPostCategory">
<h3 class="catListTitle">

随笔分类


</h3>


<ul>

<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164794.html" rel="" target="">
    bootstarp-vue等前端框架
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1247188.html" rel="" target="">
    go语言
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164792.html" rel="" target="">
    html,css(8)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1255131.html" rel="" target="">
    java(2)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164793.html" rel="" target="">
    javascript-jquery等(14)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164783.html" rel="" target="">
    Linux基础知识(32)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164784.html" rel="" target="">
    Linux命令(160)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164781.html" rel="" target="">
    MySQL(6)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164779.html" rel="" target="">
    Python(62)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164778.html" rel="" target="">
    shell(2)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1167557.html" rel="" target="">
    非公开笔记(7)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1405334.html" rel="" target="">
    非技术篇章(22)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164842.html" rel="" target="">
    计算机相关概念总结(12)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164795.html" rel="" target="">
    架构知识(1)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1252524.html" rel="" target="">
    目录(19)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164796.html" rel="" target="">
    爬虫(4)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164797.html" rel="" target="">
    网络知识(6)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164786.html" rel="" target="">
    云计算docker(2)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/category/1164785.html" rel="" target="">
    云计算openstack
</a>
 
</li>

</ul>


</div>
<div class="catListPostArchive">
<h3 class="catListTitle">

随笔档案


</h3>


<ul>

<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/09.html" rel="" target="">
    2019年9月(4)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/08.html" rel="" target="">
    2019年8月(13)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/07.html" rel="" target="">
    2019年7月(9)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/06.html" rel="" target="">
    2019年6月(25)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/05.html" rel="" target="">
    2019年5月(23)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/04.html" rel="" target="">
    2019年4月(27)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/03.html" rel="" target="">
    2019年3月(26)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/02.html" rel="" target="">
    2019年2月(146)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2019/01.html" rel="" target="">
    2019年1月(1)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/12.html" rel="" target="">
    2018年12月(1)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/10.html" rel="" target="">
    2018年10月(1)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/09.html" rel="" target="">
    2018年9月(37)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/08.html" rel="" target="">
    2018年8月(23)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/07.html" rel="" target="">
    2018年7月(4)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/04.html" rel="" target="">
    2018年4月(9)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/03.html" rel="" target="">
    2018年3月(7)
</a>
 
</li>
<li>
<a href="https://www.cnblogs.com/machangwei-8/archive/2018/02.html" rel="" target="">
    2018年2月(22)
</a>
 
</li>

</ul>


</div>


</div>

<!-- 最新评论 -->
<div id="sidebar_recentcomments" class="sidebar-block">
    <div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div class="RecentCommentBlock">
        <ul>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/machangwei-8/p/10859951.html#4469643">1. Re:windows  cmd命令学习</a></li>
                    <li class="recent_comment_body">这个稳，怎么去kill进程呢</li>
                    <li class="recent_comment_author">--喜马拉雅以南</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/machangwei-8/p/10976535.html#4461274">2. Re:js节点的创建添加删除</a></li>
                    <li class="recent_comment_body">你最后一个for循环添加节点的文本是怎么加进去的</li>
                    <li class="recent_comment_author">--你的子龙哥哥啊</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/machangwei-8/p/10402644.html#4422092">3. Re:numastat命令详解</a></li>
                    <li class="recent_comment_body">这里假设我要执行一个java param命令，此命令需要1G内存；一个python param命令，需要8G内存。最好的优化方案时python在node1中执行，而java在node0中执行，那命令是...</li>
                    <li class="recent_comment_author">--王小东大将军</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/machangwei-8/p/11215763.html#4312053">4. Re:yaml模块</a></li>
                    <li class="recent_comment_body">忒坏了，有这种好东西不早说</li>
                    <li class="recent_comment_author">--懒的写</li>
                    <li class="recent_comment_title"><a href="https://www.cnblogs.com/machangwei-8/p/10403626.html#4302875">5. Re:MegaCli64/MegaCli命令详解</a></li>
                    <li class="recent_comment_body"><a href="" target="_blank"></a></li>
                    <li class="recent_comment_author">--yielde</li>
        </ul>
    </div>
</div>


</div>



<!-- 阅读排行榜 -->
<div id="sidebar_topviewedposts" class="sidebar-block">
    <div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/8457372.html">
                            1. ls命令详解(17218)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/9572227.html">
                            2. zip命令详解(15342)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10350824.html">
                            3. ipmitool命令详解(9815)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10403533.html">
                            4. lsblk命令详解(9596)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10975912.html">
                            5. js获取标签的三种方式(8784)
                        </a>
                    </li>
        </ul>
    </div>
</div>


</div>

<!-- 评论排行榜 -->
<div id="sidebar_topcommentedposts" class="sidebar-block">
    <div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock">
        <ul style="word-break:break-all">
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/9570937.html">
                            1. sort命令详解(1)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10402644.html">
                            2. numastat命令详解(1)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10403626.html">
                            3. MegaCli64/MegaCli命令详解(1)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10636141.html">
                            4. python基础知识-04-字符串列表元组(1)
                        </a>
                    </li>
                    <li>
                        <a href="https://www.cnblogs.com/machangwei-8/p/10643474.html">
                            5. Python基础知识-05-数据类型总结字典(1)
                        </a>
                    </li>
        </ul>
    </div>
</div>


</div>

<!-- 推荐排行榜 -->
<div id="sidebar_topdiggedposts" class="sidebar-block">
    <div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">推荐排行榜</h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/machangwei-8/p/11023394.html">
                                1. Django图书管理系统(前端对有外键的数据表增删改查)(2)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/machangwei-8/p/11119446.html">
                                2. 在Python脚本中调用Django环境(1)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/machangwei-8/p/9572036.html">
                                3. diff命令详解(1)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/machangwei-8/p/10353690.html">
                                4. parted命令详解(1)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/machangwei-8/p/10402644.html">
                                5. numastat命令详解(1)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div>
</div></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright © 2020 马昌伟
<br><span id="poweredby">Powered by .NET Core on Linux</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <script language="javascript" type="text/javascript">
// 生成目录索引列表
// ref: http://www.cnblogs.com/wangqiguo/p/4355032.html
// modified by: zzq
function GenerateContentList()
{
    var mainContent = $('#cnblogs_post_body');
    var h2_list = $('#cnblogs_post_body h2');//如果你的章节标题不是h2,只需要将这里的h2换掉即可

    if(mainContent.length < 1)
        return;
 
    if(h2_list.length>0)
    {
        var content = '<a name="_labelTop"></a>';
        content += '<div id="navCategory" style="color:#152e97;">';
        content += '<p style="font-size:18px;"><b>目录</b></p>';
        content += '<ul>';
        for(var i=0; i<h2_list.length; i++)
        {
            var go_to_top = '<div style="text-align: right;"><a href="#_labelTop" style="color:#f68a33">回到顶部</a><a name="_label' + i + '"></a></div>';
            $(h2_list[i]).before(go_to_top);
            
            var h3_list = $(h2_list[i]).nextAll("h3");
            var li3_content = '';
            for(var j=0; j<h3_list.length; j++)
            {
                var tmp = $(h3_list[j]).prevAll('h2').first();
                if(!tmp.is(h2_list[i]))
                    break;
                var li3_anchor = '<a name="_label' + i + '_' + j + '"></a>';
                $(h3_list[j]).before(li3_anchor);
                li3_content += '<li><a href="#_label' + i + '_' + j + '">' + $(h3_list[j]).text() + '</a></li>';
            }
            
            var li2_content = '';
            if(li3_content.length > 0)
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a><ul>' + li3_content + '</ul></li>';
            else
                li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a></li>';
            content += li2_content;
        }
        content += '</ul>';
        content += '</div><p>&nbsp;</p>';
        content += '<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>';
        if($('#cnblogs_post_body').length != 0 )
        {
            $($('#cnblogs_post_body')[0]).prepend(content);
        }
    }   
}

GenerateContentList();
</script>
    </div>

<script type="text/javascript">
/*
    功能：生成博客目录的JS工具
    测试：IE8，火狐，google测试通过
    孤傲苍狼
    2014-5-11
*/
var BlogDirectory = {
    /*
        获取元素位置，距浏览器左边界的距离（left）和距浏览器上边界的距离（top）
    */
    getElementPosition:function (ele) {        
        var topPosition = 0;
        var leftPosition = 0;
        while (ele){              
            topPosition += ele.offsetTop;
            leftPosition += ele.offsetLeft;        
            ele = ele.offsetParent;     
        }  
        return {top:topPosition, left:leftPosition}; 
    },

    /*
    获取滚动条当前位置
    */
    getScrollBarPosition:function () {
        var scrollBarPosition = document.body.scrollTop || document.documentElement.scrollTop;
        return  scrollBarPosition;
    },
    
    /*
    移动滚动条，finalPos 为目的位置，internal 为移动速度
    */
    moveScrollBar:function(finalpos, interval) {

        //若不支持此方法，则退出
        if(!window.scrollTo) {
            return false;
        }

        //窗体滚动时，禁用鼠标滚轮
        window.onmousewheel = function(){
            return false;
        };
          
        //清除计时
        if (document.body.movement) { 
            clearTimeout(document.body.movement); 
        } 

        var currentpos =BlogDirectory.getScrollBarPosition();//获取滚动条当前位置

        var dist = 0; 
        if (currentpos == finalpos) {//到达预定位置，则解禁鼠标滚轮，并退出
            window.onmousewheel = function(){
                return true;
            }
            return true; 
        } 
        if (currentpos < finalpos) {//未到达，则计算下一步所要移动的距离
            dist = Math.ceil((finalpos - currentpos)/10); 
            currentpos += dist; 
        } 
        if (currentpos > finalpos) { 
            dist = Math.ceil((currentpos - finalpos)/10); 
            currentpos -= dist; 
        }
        
        var scrTop = BlogDirectory.getScrollBarPosition();//获取滚动条当前位置
        window.scrollTo(0, currentpos);//移动窗口
        if(BlogDirectory.getScrollBarPosition() == scrTop)//若已到底部，则解禁鼠标滚轮，并退出
        {
            window.onmousewheel = function(){
                return true;
            }
            return true;
        }
        
        //进行下一步移动
        var repeat = "BlogDirectory.moveScrollBar(" + finalpos + "," + interval + ")"; 
        document.body.movement = setTimeout(repeat, interval); 
    },
    
    htmlDecode:function (text){
        var temp = document.createElement("div");
        temp.innerHTML = text;
        var output = temp.innerText || temp.textContent;
        temp = null;
        return output;
    },

    /*
    创建博客目录，
    id表示包含博文正文的 div 容器的 id，
    mt 和 st 分别表示主标题和次级标题的标签名称（如 H2、H3，大写或小写都可以！），
    interval 表示移动的速度
    */
    createBlogDirectory:function (id, mt, st, interval){
         //获取博文正文div容器
        var elem = document.getElementById(id);
        if(!elem) return false;
        //获取div中所有元素结点
        var nodes = elem.getElementsByTagName("*");
        //创建博客目录的div容器
        var divSideBar = document.createElement('DIV');
        divSideBar.className = 'uprightsideBar';
        divSideBar.setAttribute('id', 'uprightsideBar');
        var divSideBarTab = document.createElement('DIV');
        divSideBarTab.setAttribute('id', 'sideBarTab');
        divSideBar.appendChild(divSideBarTab);
        var h2 = document.createElement('H2');
        divSideBarTab.appendChild(h2);
        var txt = document.createTextNode('目录导航');
        h2.appendChild(txt);
        var divSideBarContents = document.createElement('DIV');
        divSideBarContents.style.display = 'none';
        divSideBarContents.setAttribute('id', 'sideBarContents');
        divSideBar.appendChild(divSideBarContents);
        //创建自定义列表
        var dlist = document.createElement("dl");
        divSideBarContents.appendChild(dlist);
        var num = 0;//统计找到的mt和st
        mt = mt.toUpperCase();//转化成大写
        st = st.toUpperCase();//转化成大写
        //遍历所有元素结点
        for(var i=0; i<nodes.length; i++)
        {
            if(nodes[i].nodeName == mt|| nodes[i].nodeName == st)    
            {
                //获取标题文本
                var nodetext = nodes[i].innerHTML.replace(/<\/?[^>]+>/g,"");//innerHTML里面的内容可能有HTML标签，所以用正则表达式去除HTML的标签
                nodetext = nodetext.replace(/ /ig, "");//替换掉所有的 
                nodetext = BlogDirectory.htmlDecode(nodetext);
                //插入锚        
                nodes[i].setAttribute("id", "blogTitle" + num);
                var item;
                switch(nodes[i].nodeName)
                {
                    case mt:    //若为主标题 
                        item = document.createElement("dt");
                        break;
                    case st:    //若为子标题
                        item = document.createElement("dd");
                        break;
                }
                
                //创建锚链接
                var itemtext = document.createTextNode(nodetext);
                item.appendChild(itemtext);
                item.setAttribute("name", num);
                item.onclick = function(){        //添加鼠标点击触发函数
                    var pos = BlogDirectory.getElementPosition(document.getElementById("blogTitle" + this.getAttribute("name")));
                    if(!BlogDirectory.moveScrollBar(pos.top, interval)) return false;
                };            
                
                //将自定义表项加入自定义列表中
                dlist.appendChild(item);
                num++;
            }
        }
        
        if(num == 0) return false; 
        /*鼠标进入时的事件处理*/
        divSideBarTab.onmouseenter = function(){
            divSideBarContents.style.display = 'block';
        }
        /*鼠标离开时的事件处理*/
        divSideBar.onmouseleave = function() {
            divSideBarContents.style.display = 'none';
        }

        document.body.appendChild(divSideBar);
    }
    
};

window.onload=function(){
    /*页面加载完成之后生成博客目录*/
    BlogDirectory.createBlogDirectory("cnblogs_post_body","h2","h3",20);
}
</script></body></html>