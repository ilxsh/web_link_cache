<!DOCTYPE html>
<!-- saved from url=(0045)https://www.cnblogs.com/wjoyxt/p/9489549.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="referrer" content="origin">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园</title>
    <meta property="og:description" content="Windows下同时连接多个VPN的话，需要以管理员身份运行 C:\Program Files\TAP-Windows\bin\addtap.bat 添加虚拟网络适配器 1、安装OpenVPN 首先从">
    <link type="text/css" rel="stylesheet" href="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/bundle-marvin2-brown.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/bundle-marvin2-brown-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/wjoyxt/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/wjoyxt/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/wjoyxt/wlwmanifest.xml">
    <script async="" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/analytics.js.download"></script><script type="text/javascript" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/encoder.js.download"></script><script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/amp4ads-host-v0.js.download"></script><script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/pubads_impl_rendering_2019052001.js.download"></script><script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/jquery-2.2.0.min.js.download"></script>
    <script>var currentBlogId=185431;var currentBlogApp='wjoyxt',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/blog-common.js.download" type="text/javascript"></script>
<link rel="preload" href="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/f.txt" as="script"><script type="text/javascript" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/f.txt"></script><script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/pubads_impl_2019052001.js.download" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-33/html/container.html"></head>
<body>
<a name="top"></a>

<!--PageBeginHtml Block Begin-->
<canvas id="c_n9" width="1920" height="990" style="position: fixed; top: 0px; left: 0px; z-index: -1; opacity: 0.1;"></canvas>







<title>打赏</title>

<script>
        window.tctipConfig = {
            staticPrefix: "http://static.tctip.com",
            buttonImageId: 5,
            buttonTip:  "zanzhu",
            list:{
                alipay: { qrimg: "https://files.cnblogs.com/files/wjoyxt/zfb.bmp"}, //修改1
                weixin: { qrimg: "https://files.cnblogs.com/files/wjoyxt/wx.bmp"}, //修改2
            }
        };
</script>
<script src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/tctip.min.js.download"></script>



<!--PageBeginHtml Block End-->

<div id="top">

<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/wjoyxt/">艾欧里亚ゞ</a></h1>
<p id="tagline">That which does not kill us makes us stronger！</p>
</div>
<div id="leftmenu">

	
<h3>导航</h3>
<ul>
	<li>
		
	</li><li><a id="blog_nav_myhome" href="https://www.cnblogs.com/wjoyxt/">首页</a></li>
	<li><a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
	<li>
		<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/%E8%89%BE%E6%AC%A7%E9%87%8C%E4%BA%9A%E3%82%9E">联系</a>
	</li><li>
		
	</li><li>
		<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>

	<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
	
	
<h3>公告</h3>
	<div id="blog-news"><embed height="180" type="application/x-shockwave-flash" align="center" pluginspage="http://www.macromedia.com/go/getflashplayer" width="180" src="http://images.cnblogs.com/cnblogs_com/csharp/clock.swf" quality="high" wmode="transparent">

<!-- GoStats Simple HTML Based Code -->
<a target="_blank" title="流量统计网" href="http://gostats.cn/"><img alt="流量统计网" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/counter.png" style="border-width:0"></a>
<!-- End GoStats Simple HTML Based Code -->

<embed src="//music.163.com/style/swf/widget.swf?sid=428423168&amp;type=2&amp;auto=0&amp;width=320&amp;height=66" width="340" height="86" allownetworking="all"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/wjoyxt/">艾欧里亚ゞ</a><br>园龄：<a href="https://home.cnblogs.com/u/wjoyxt/" title="入园时间：2014-05-09">5年</a><br>粉丝：<a href="https://home.cnblogs.com/u/wjoyxt/followers/">50</a><br>关注：<a href="https://home.cnblogs.com/u/wjoyxt/followees/">12</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;10734916-42d7-e311-8d02-90b11c0b17d6&#39;)">+加关注</a></div><script>getFollowStatus('10734916-42d7-e311-8d02-90b11c0b17d6')</script></div></div><script type="text/javascript">loadBlogNews();</script>

	<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>

</div>
</div>

</div><div id="sidebar_categories">
		<h3>随笔分类</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/wjoyxt/category/763167.html">Ansible(6)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/wjoyxt/category/577839.html">Apache(3)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/wjoyxt/category/796484.html">Docker(13)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_3" href="https://www.cnblogs.com/wjoyxt/category/665644.html">Hadoop(13)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_4" href="https://www.cnblogs.com/wjoyxt/category/583106.html">Haproxy(5)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_5" href="https://www.cnblogs.com/wjoyxt/category/1332735.html">Kubernetes(20)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_6" href="https://www.cnblogs.com/wjoyxt/category/577806.html">Linux(119)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_7" href="https://www.cnblogs.com/wjoyxt/category/1229395.html">Mac(2)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_8" href="https://www.cnblogs.com/wjoyxt/category/577810.html">MySQL(57)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_9" href="https://www.cnblogs.com/wjoyxt/category/577838.html">Nginx(27)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_10" href="https://www.cnblogs.com/wjoyxt/category/578804.html">Oracle(18)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_11" href="https://www.cnblogs.com/wjoyxt/category/577813.html">Python(28)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_12" href="https://www.cnblogs.com/wjoyxt/category/652981.html">Redis(13)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_13" href="https://www.cnblogs.com/wjoyxt/category/772192.html">Saltstack(6)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_14" href="https://www.cnblogs.com/wjoyxt/category/577808.html">Shell(30)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_15" href="https://www.cnblogs.com/wjoyxt/category/577926.html">TCP(2)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_16" href="https://www.cnblogs.com/wjoyxt/category/579105.html">Tomcat(12)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_17" href="https://www.cnblogs.com/wjoyxt/category/811493.html">Zabbix(14)</a> </li>
			
				<li><a id="CatList_LinkList_0_Link_18" href="https://www.cnblogs.com/wjoyxt/category/586007.html">其它(40)</a> </li>
			
				</ul>
			
	
		<h3>相册</h3>
		
				<ul>
			
				<li><a id="CatList_LinkList_1_Link_0" href="https://www.cnblogs.com/wjoyxt/gallery/1127671.html" rel="nofollow">Photo(5)</a> </li>
			
				</ul>
			
	</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<h3 class="catListTitle">最新评论</h3>
<div class="RecentComment" id="RecentComments">
	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103859">1. Re:Centos7搭建OpenVPN服务器</a></li>
        <li class="recent_comment_body">@慎独则心里平静如果出现你说的这种情况，不科学呀。我是没遇到过，服务端修改后会即时生效，客户端再连的话就会报错。建议你去仔细查看服务端的日志信息查找端倪...</li>
        <li class="recent_comment_author">--艾欧里亚ゞ</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103841">2. Re:Centos7搭建OpenVPN服务器</a></li>
        <li class="recent_comment_body">@艾欧里亚ゞ我在服务端修改了用户名客户端还是可以连接上。...</li>
        <li class="recent_comment_author">--慎独则心里平静</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103756">3. Re:Centos7搭建OpenVPN服务器</a></li>
        <li class="recent_comment_body">@慎独则心里平静psw-file 不就是在服务端修改用户名和密码吗？...</li>
        <li class="recent_comment_author">--艾欧里亚ゞ</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103703">4. Re:Centos7搭建OpenVPN服务器</a></li>
        <li class="recent_comment_body">@艾欧里亚ゞ楼主我觉得有个缺陷就是不能在服务端修改 秘密，不知道是我不知道还是什么原因，在客户端修改密码感觉密码这个环节有点鸡肋。...</li>
        <li class="recent_comment_author">--慎独则心里平静</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096985">5. Re:Centos7搭建OpenVPN服务器</a></li>
        <li class="recent_comment_body">@慎独则心里平静第一行报错，证书CN你设置的用的是域名吧应该，我这边用的是IP，或者修改本地hosts进行解析，ip或域名为vpn服务器的。第二行报错我也没遇到过,你可以考虑先关闭IPv6进行尝试........</li>
        <li class="recent_comment_author">--艾欧里亚ゞ</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/wjoyxt/p/6128183.html">1. Nginx限制访问速率和最大并发连接数模块--limit (防止DDOS攻击)(30356)</a></li><li><a href="https://www.cnblogs.com/wjoyxt/p/6222859.html">2. Kibana安装与基本用法（ELK）(27043)</a></li><li><a href="https://www.cnblogs.com/wjoyxt/p/4804081.html">3. NUMA的取舍与优化设置(18184)</a></li><li><a href="https://www.cnblogs.com/wjoyxt/p/5053466.html">4. DELL服务器iDRAC相关设置(17731)</a></li><li><a href="https://www.cnblogs.com/wjoyxt/p/7126722.html">5. Tomcat日志配置(15237)</a></li></ul></div>
</div>
</div></div></div><script type="text/javascript">loadBlogSideColumn();</script>

</div>
<div id="main">
	
        <div id="post_detail">
	<div class="post">
		<h2>
			<a id="cb_post_title_url" href="https://www.cnblogs.com/wjoyxt/p/9489549.html">Centos7搭建OpenVPN服务器</a>
		</h2>
		<div id="cnblogs_post_body" class="blogpost-body"><p><span style="color: #ff0000;"><span style="color: #000000;">Windows下同时连接多个VPN的话，需要以管理员身份运行</span> C:\Program Files\TAP-Windows\bin\addtap.bat <span style="color: #000000;">添加虚拟网络适配器</span></span></p>
<p>-----------------------------------------------------------------------------------------------------------------------------------------</p>
<p id="2-安装openvpn"><strong>1、安装OpenVPN</strong></p>
<p>首先从EPEL安装OpenVPN：<br># yum install openvpn&nbsp; easy-rsa -y</p>
<p><strong>&nbsp;2、使用easy-rsa创建服务端与客户端证书及密钥</strong></p>
<p><span style="color: #0000ff;">服务端的创建：</span></p>
<p>服务器配置完成后需要生成密钥和证书，通过Easy RSA安装的一些脚本，方便快速产生密钥和证书；</p>
<p>创建keys文件夹，并且拷贝Easy RSA密钥和证书生成脚本到目录下(到easy-rsa目录)</p>
<div class="cnblogs_code">
<pre># mkdir -p /etc/openvpn/key_server<span style="color: #000000;"># cp -rf /usr/share/easy-rsa/3.0.3/*  /etc/openvpn/key_server/
# cp /usr/share/doc/easy-rsa-3.0.3/vars.example  /etc/openvpn/key_server/vars</span></pre>
</div>
<p>为方便后续使用，按需要修改/etc/openvpn/easy-rsa/vars文件中的默认信息。</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>vi /etc/openvpn/easy-rsa/<span style="color: #000000;">vars
</span></pre>
<p>　　　set_var EASYRSA_REQ_COUNTRY "US"<br>　　　set_var EASYRSA_REQ_PROVINCE   "California"<br>　　　set_var EASYRSA_REQ_CITY       "San Francisco"<br>　　　set_var EASYRSA_REQ_ORG        "Copyleft Certificate Co"<br>　　　set_var EASYRSA_REQ_EMAIL      "me@example.net"<br>　　　set_var EASYRSA_REQ_OU         "My Organizational Unit"</p>






































<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p># cd /etc/openvpn/key_server</p>
<p>#&nbsp;./easyrsa init-pki nopass</p>
<p>#&nbsp;./easyrsa build-ca nopass&nbsp; 输入CN</p>
<p>#&nbsp;./easyrsa gen-req server nopass 输入CN</p>
<p>#&nbsp;./easyrsa sign server server</p>
<p>#&nbsp;./easyrsa gen-dh&nbsp; &nbsp; &nbsp;创建Diffie-Hellman，时间会有点长，耐心等待</p>
<p><span style="color: #0000ff;">客户端的创建：</span></p>
<p># cp -r&nbsp;&nbsp;/etc/openvpn/key_server /etc/openvpn/key_client</p>
<p>#&nbsp;./easyrsa init-pki nopass</p>
<p># ./easyrsa gen-req client nopass</p>
<p>进入服务端key_server目录，关联客户端req，使之向服务端注册</p>
<p># cd ../key_server</p>
<p>#&nbsp;./easyrsa import-req /etc/openvpn/key_client/pki/reqs/<span style="color: #ff0000;">client.req&nbsp;</span> <span style="color: #ff0000;">client</span></p>
<p>#&nbsp;./easyrsa sign client client&nbsp;</p>
<p>如果出现报错：TXT_DB error number 2 ，则</p>
<p># rm -f /etc/openvpn/key_server/pki/index.txt</p>
<p># touch /etc/openvpn/key_server/pki/index.txt</p>
<p><strong>3、整理生成的证书</strong></p>
<p># cp /etc/openvpn/key_server/pki/ca.crt /etc/openvpn/server/<br># cp /etc/openvpn/key_server/pki/private/server.key /etc/openvpn/server/      <br># cp /etc/openvpn/key_server/pki/issued/server.crt /etc/openvpn/server/       <br># cp /etc/openvpn/key_server/pki/dh.pem /etc/openvpn/server/</p>
<p># cp /etc/openvpn/key_server/pki/ca.crt /etc/openvpn/client/ <br># cp /etc/openvpn/key_server/pki/issued/client.crt /etc/openvpn/client/<br># cp /etc/openvpn/key_client/pki/private/client.key /etc/openvpn/client/</p>
<p><strong>4、打开服务器的ip路由转发功能，并配置防火墙</strong></p>
<div># vim /etc/sysctl.conf</div>
<div>net.ipv4.ip_forward&nbsp;=&nbsp;1</div>
<div># sysctl&nbsp;-p</div>
<div># yum install iptables-services</div>
<div># systemctl stop firewalld ; systemctl mask firewalld ; systemctl start iptables</div>
<div># iptables -F ; iptables -P INPUT ACCEPT</div>
<div>#&nbsp;iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -j MASQUERADE&nbsp; &nbsp;( iptables -t nat -L )</div>
<div># service iptables save</div>
<p><strong>5、服务端配置，指定相关ca、crt、key文件</strong></p>
<p>从示例配置文件复制一份配置文件到/etc/openvpn</p>
<p># cp /usr/share/doc/openvpn-*/sample/sample-config-files/server.conf&nbsp; /etc/openvpn <br># vim /etc/openvpn/server.conf  ( cat server.conf | grep -v ^$ | grep -v ^# | grep -v "^;" )</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>port <span style="color: #800080;">1194</span><span style="color: #000000;">
proto udp
dev tun
ca </span>/etc/openvpn/server/<span style="color: #000000;">ca.crt
cert </span>/etc/openvpn/server/<span style="color: #000000;">server.crt
key </span>/etc/openvpn/server/<span style="color: #000000;">server.key  # This file should be kept secret
dh </span>/etc/openvpn/server/<span style="color: #000000;">dh.pem
server </span><span style="color: #800080;">10.8</span>.<span style="color: #800080;">0.0</span> <span style="color: #800080;">255.255</span>.<span style="color: #800080;">255.0</span><span style="color: #000000;">
ifconfig</span>-pool-<span style="color: #000000;">persist ipp.txt
<span style="background-color: #ffff99;"><strong><span style="color: #ff0000;">push "route 172.17.0.0 255.255.0.0"</span></strong></span></span>   #向客户端推送需要访问的路由信息<br><span style="color: #ff0000;">duplicate-cn</span>       <span style="color: #800080;">#定义openvpn一个证书在同一时刻是否允许多个客户端接入，默认没有启用。</span><span style="color: #000000;">
keepalive </span><span style="color: #800080;">10</span> <span style="color: #800080;">120<br><span style="color: #ff0000;">tls-auth ta.key 0</span>  #服务端设置为0 客户端设置为1</span><span style="color: #000000;">
cipher AES</span>-<span style="color: #800080;">256</span>-<span style="color: #000000;">CBC
user nobody
group nobody
persist</span>-<span style="color: #000000;">key
persist</span>-<span style="color: #000000;">tun
status openvpn</span>-<span style="color: #000000;">status.log
verb </span><span style="color: #800080;">3</span>
<span style="color: #0000ff;">explicit</span>-exit-notify <span style="color: #800080;">1</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>生成ta.key ，与server.conf放在同一层目录下</p>
<p># cd /etc/openvpn ; openvpn --genkey --secret&nbsp; ta.key</p>
<p>测试该配置文件是否正确:</p>
<p># openvpn /etc/openvpn/server.conf</p>
<p><strong>6、编辑客户端配置文件 client.ovpn</strong></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">client
dev tun
proto udp
remote </span>* <span style="color: #800080;">1194</span><span style="color: #000000;">
resolv</span>-<span style="color: #000000;">retry infinite
nobind
persist</span>-<span style="color: #000000;">key
persist</span>-<span style="color: #000000;">tun
ca ca</span>-<span style="color: #000000;">myxb.crt
cert myxb.crt
key myxb.key<br><span style="color: #ff0000;">tls-auth ta.key 1</span>
cipher AES</span>-<span style="color: #800080;">256</span>-<span style="color: #000000;">CBC
;comp</span>-<span style="color: #000000;">lzo
verb </span><span style="color: #800080;">4</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p><strong>&nbsp;7、启动OpenVPN服务</strong></p>
<p># systemctl enable openvpn@server.service</p>
<p># systemctl start openvpn@server.service</p>
<p><strong>8、添加用户名和密码验证</strong></p>
<p>#&nbsp;vim /etc/openvpn/server.conf &nbsp; 添加</p>
<p>auth-user-pass-verify /etc/openvpn/checkpsw.sh via-env<br>username-as-common-name<br>script-security 3</p>
<p>&nbsp;</p>
<p>创建用于验证用户登录的脚本和用户名密码认证文件</p>
<p># vim /etc/openvpn/checkpsw.sh</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;1bddf982-3afc-4fb2-b83f-95835f2ff125&#39;)"><img id="code_img_closed_1bddf982-3afc-4fb2-b83f-95835f2ff125" class="code_img_closed" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/ContractedBlock.gif" alt=""><img id="code_img_opened_1bddf982-3afc-4fb2-b83f-95835f2ff125" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide(&#39;1bddf982-3afc-4fb2-b83f-95835f2ff125&#39;,event)" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_1bddf982-3afc-4fb2-b83f-95835f2ff125" class="cnblogs_code_hide">
<pre>#!/bin/<span style="color: #0000ff;">sh</span><span style="color: #000000;">
###########################################################
# checkpsw.</span><span style="color: #0000ff;">sh</span> (C) <span style="color: #800080;">2004</span> Mathias Sundman &lt;mathias@openvpn.se&gt;<span style="color: #000000;">
#
# This script will authenticate OpenVPN users against
# a plain text </span><span style="color: #0000ff;">file</span><span style="color: #000000;">. The passfile should simply contain
# one row per user with the username first followed by
# one or </span><span style="color: #0000ff;">more</span> space(s) or tab(s) and <span style="color: #0000ff;">then</span><span style="color: #000000;"> the password.

PASSFILE</span>=<span style="color: #800000;">"</span><span style="color: #800000;">/etc/openvpn/psw-file</span><span style="color: #800000;">"</span><span style="color: #000000;">
LOG_FILE</span>=<span style="color: #800000;">"</span><span style="color: #800000;">/etc/openvpn/openvpn-password.log</span><span style="color: #800000;">"</span><span style="color: #000000;">
TIME_STAMP</span>=`<span style="color: #0000ff;">date</span> <span style="color: #800000;">"</span><span style="color: #800000;">+%Y-%m-%d %T</span><span style="color: #800000;">"</span><span style="color: #000000;">`

###########################################################

</span><span style="color: #0000ff;">if</span> [ ! -r <span style="color: #800000;">"</span><span style="color: #800000;">${PASSFILE}</span><span style="color: #800000;">"</span> ]; <span style="color: #0000ff;">then</span>
  <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">${TIME_STAMP}: Could not open password file \"${PASSFILE}\" for reading.</span><span style="color: #800000;">"</span> &gt;&gt;<span style="color: #000000;"> ${LOG_FILE}
  exit </span><span style="color: #800080;">1</span>
<span style="color: #0000ff;">fi</span><span style="color: #000000;">

CORRECT_PASSWORD</span>=`<span style="color: #0000ff;">awk</span> <span style="color: #800000;">'</span><span style="color: #800000;">!/^;/&amp;&amp;!/^#/&amp;&amp;$1=="</span><span style="color: #800000;">'</span>${username}<span style="color: #800000;">'</span><span style="color: #800000;">"{print $2;exit}</span><span style="color: #800000;">'</span><span style="color: #000000;"> ${PASSFILE}`

</span><span style="color: #0000ff;">if</span> [ <span style="color: #800000;">"</span><span style="color: #800000;">${CORRECT_PASSWORD}</span><span style="color: #800000;">"</span> = <span style="color: #800000;">""</span> ]; <span style="color: #0000ff;">then</span>
  <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">${TIME_STAMP}: User does not exist: username=\"${username}\", password=\"${password}\".</span><span style="color: #800000;">"</span> &gt;&gt;<span style="color: #000000;"> ${LOG_FILE}
  exit </span><span style="color: #800080;">1</span>
<span style="color: #0000ff;">fi</span>

<span style="color: #0000ff;">if</span> [ <span style="color: #800000;">"</span><span style="color: #800000;">${password}</span><span style="color: #800000;">"</span> = <span style="color: #800000;">"</span><span style="color: #800000;">${CORRECT_PASSWORD}</span><span style="color: #800000;">"</span> ]; <span style="color: #0000ff;">then</span>
  <span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">${TIME_STAMP}: Successful authentication: username=\"${username}\".</span><span style="color: #800000;">"</span> &gt;&gt;<span style="color: #000000;"> ${LOG_FILE}
  exit </span><span style="color: #800080;">0</span>
<span style="color: #0000ff;">fi</span>

<span style="color: #0000ff;">echo</span> <span style="color: #800000;">"</span><span style="color: #800000;">${TIME_STAMP}: Incorrect password: username=\"${username}\", password=\"${password}\".</span><span style="color: #800000;">"</span> &gt;&gt;<span style="color: #000000;"> ${LOG_FILE}
exit </span><span style="color: #800080;">1</span></pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p># vim /etc/openvpn/psw-file</p>
<div class="cnblogs_code">
<pre>wjoyxt  <span style="color: #800080;">666</span></pre>
</div>
<p>#&nbsp;touch /etc/openvpn/openvpn-password.log</p>
<p>#&nbsp;chown nobody:nobody checkpsw.sh &nbsp;psw-file&nbsp; openvpn-password.log</p>
<p># chmod 744 checkpsw.sh &nbsp;; &nbsp;chmod 400 psw-file</p>
<p>&nbsp;</p>
<p>修改客户端配置文件</p>
<p># vim client.ovpn &nbsp;增加</p>
<div class="cnblogs_code">
<pre>auth-user-pass pass.txt</pre>
</div>
<p>重启服务后生效</p>
<p># cat pass.txt</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">wjoyxt
wjoyxt666</span></pre>
</div>
<p>-----------------------------------------------------------------------------------</p>
<p><span style="color: #ff0000;"><strong>优化client.ovpn，合并证书到配置文件中</strong></span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">删除或者注释掉以下几行内容：
在这里我把它们注释掉：
ca ca.crt　　      改为：#ca ca.crt
cert client.crt　　改为：#cert client.crt
key client.key　 　改为：#key client.key
tls</span>-auth ta.key <span style="color: #800080;">1  </span>改为：#tls-auth ta.key <span style="color: #800080;">1</span><span style="color: #000000;">

在最后面添加以下内容：
</span>&lt;ca&gt;<span style="color: #000000;"> 
ca.crt文件内容
</span>&lt;/ca&gt;
&lt;cert&gt;<span style="color: #000000;"> 
client.crt文件内容
</span>&lt;/cert&gt;
&lt;key&gt;<span style="color: #000000;"> 
client.key文件内容
</span>&lt;/key&gt;<span style="color: #ff0000;">
key-direction 1</span> 
&lt;tls-auth&gt;<span style="color: #000000;"> 
ta.key文件内容
</span>&lt;/tls-auth&gt;<span style="color: #000000;">

复制各文件里的内容到相应的位置即可！保存退出！！</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>参考资料：https://yq.aliyun.com/articles/43247</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;https://www.cnblogs.com/ilanni/p/4695112.html</p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="https://www.cnblogs.com/wjoyxt/category/577806.html" target="_blank">Linux</a></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(9489549,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;10734916-42d7-e311-8d02-90b11c0b17d6&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/wjoyxt/" target="_blank"><img src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/20171212180223.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="https://home.cnblogs.com/u/wjoyxt/">艾欧里亚ゞ</a><br>
            <a href="https://home.cnblogs.com/u/wjoyxt/followees">关注 - 12</a><br>
            <a href="https://home.cnblogs.com/u/wjoyxt/followers">粉丝 - 50</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;10734916-42d7-e311-8d02-90b11c0b17d6&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(9489549,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(9489549,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/wjoyxt/p/9443125.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/wjoyxt/p/9443125.html" title="发布于2018-08-08 15:35">SSH登录启用Google二次身份验证</a><br><a href="https://www.cnblogs.com/wjoyxt/p/9606269.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/wjoyxt/p/9606269.html" title="发布于2018-09-07 17:47">Logstash使用grok插件解析Nginx日志</a><br></div>
</div>


		<p class="postfoot">
			posted on <span id="post-date">2018-08-16 20:10</span> <a href="https://www.cnblogs.com/wjoyxt/">艾欧里亚ゞ</a> 阅读(<span id="post_view_count">2080</span>) 评论(<span id="post_comment_count">8</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=9489549" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#" onclick="AddToWz(9489549);return false;">收藏</a>
		</p>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=185431,cb_entryId=9489549,cb_blogApp=currentBlogApp,cb_blogUserGuid='10734916-42d7-e311-8d02-90b11c0b17d6',cb_entryCreatedDate='2018/8/16 20:10:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<a name="评论"></a>
<div id="comments">
<h3>评论</h3>
	
	
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096776" class="layer">#1楼</a><a name="4096776" id="comment_anchor_4096776"></a>
					<span>
						 <span class="comment_date">2018-10-23 16:04</span>
					</span>
				<a id="a_comment_author_4096776" href="https://www.cnblogs.com/zengfj/" target="_blank">慎独则心里平静</a> <a href="http://msg.cnblogs.com/send/%E6%85%8E%E7%8B%AC%E5%88%99%E5%BF%83%E9%87%8C%E5%B9%B3%E9%9D%99" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4096776" class="blog_comment_body">楼主你好  非常感谢用户你的文档openvpn启动成功了。<br>但是还有疑惑就是：client.ovpn这个文件是和server.conf同样路径下的client.conf这个文件吗？<br><br>还有就是vim client.ovpn  增加<br>auth-user-pass pass.txt<br>重启服务后生效并没有pass.txt文件<br># cat pass.txt<br>wjoyxt<br>wjoyxt666<br>希望楼主能够抽时间回复我一下。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4096776,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4096776,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096819" class="layer">#2楼</a><a name="4096819" id="comment_anchor_4096819"></a>[<span class="louzhu">楼主</span>]
					<span>
						 <span class="comment_date">2018-10-23 16:37</span>
					</span>
				<a id="a_comment_author_4096819" href="https://www.cnblogs.com/wjoyxt/" target="_blank">艾欧里亚ゞ</a> <a href="http://msg.cnblogs.com/send/%E8%89%BE%E6%AC%A7%E9%87%8C%E4%BA%9A%E3%82%9E" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4096819" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096776" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4096776);">@</a>
慎独则心里平静<br>首先，client.ovpn是vpn客户端的配置文件，不是client.conf。<br>pass.txt是需要在启动服务前自己提前手动创建的，并不是自动生成的。<br>wjoyxt为用户名  wjoyxt666为密码</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4096819,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4096819,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_4096819_avatar" style="display:none;">http://pic.cnblogs.com/face/632106/20171212180223.png</span>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096965" class="layer">#3楼</a><a name="4096965" id="comment_anchor_4096965"></a>
					<span>
						 <span class="comment_date">2018-10-23 18:13</span>
					</span>
				<a id="a_comment_author_4096965" href="https://www.cnblogs.com/zengfj/" target="_blank">慎独则心里平静</a> <a href="http://msg.cnblogs.com/send/%E6%85%8E%E7%8B%AC%E5%88%99%E5%BF%83%E9%87%8C%E5%B9%B3%E9%9D%99" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4096965" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096819" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4096819);">@</a>
艾欧里亚ゞ<br>好的，感谢楼主<br>客户端遇到点问题报下，面两错误<br>RESOLVE: Cannot resolve host address: *:1194 ()<br>Could not determine IPv4/IPv6 protocol</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4096965,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4096965,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096985" class="layer">#4楼</a><a name="4096985" id="comment_anchor_4096985"></a>[<span class="louzhu">楼主</span>]
					<span>
						 <span class="comment_date">2018-10-23 18:22</span>
					</span>
				<a id="a_comment_author_4096985" href="https://www.cnblogs.com/wjoyxt/" target="_blank">艾欧里亚ゞ</a> <a href="http://msg.cnblogs.com/send/%E8%89%BE%E6%AC%A7%E9%87%8C%E4%BA%9A%E3%82%9E" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4096985" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096965" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4096965);">@</a>
慎独则心里平静<br>第一行报错，证书CN你设置的用的是域名吧应该，我这边用的是IP，或者修改本地hosts进行解析，ip或域名为vpn服务器的。<br>第二行报错我也没遇到过,你可以考虑先关闭IPv6进行尝试</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4096985,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4096985,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_4096985_avatar" style="display:none;">http://pic.cnblogs.com/face/632106/20171212180223.png</span>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103703" class="layer">#5楼</a><a name="4103703" id="comment_anchor_4103703"></a>
					<span>
						 <span class="comment_date">2018-11-01 15:35</span>
					</span>
				<a id="a_comment_author_4103703" href="https://www.cnblogs.com/zengfj/" target="_blank">慎独则心里平静</a> <a href="http://msg.cnblogs.com/send/%E6%85%8E%E7%8B%AC%E5%88%99%E5%BF%83%E9%87%8C%E5%B9%B3%E9%9D%99" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4103703" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4096985" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4096985);">@</a>
艾欧里亚ゞ<br>楼主我觉得有个缺陷就是不能在服务端修改 秘密，不知道是我不知道还是什么原因，在客户端修改密码感觉密码这个环节有点鸡肋。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4103703,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4103703,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103756" class="layer">#6楼</a><a name="4103756" id="comment_anchor_4103756"></a>[<span class="louzhu">楼主</span>]
					<span>
						 <span class="comment_date">2018-11-01 16:23</span>
					</span>
				<a id="a_comment_author_4103756" href="https://www.cnblogs.com/wjoyxt/" target="_blank">艾欧里亚ゞ</a> <a href="http://msg.cnblogs.com/send/%E8%89%BE%E6%AC%A7%E9%87%8C%E4%BA%9A%E3%82%9E" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4103756" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103703" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4103703);">@</a>
慎独则心里平静<br>psw-file 不就是在服务端修改用户名和密码吗？</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4103756,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4103756,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_4103756_avatar" style="display:none;">http://pic.cnblogs.com/face/632106/20171212180223.png</span>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103841" class="layer">#7楼</a><a name="4103841" id="comment_anchor_4103841"></a>
					<span>
						 <span class="comment_date">2018-11-01 17:39</span>
					</span>
				<a id="a_comment_author_4103841" href="https://www.cnblogs.com/zengfj/" target="_blank">慎独则心里平静</a> <a href="http://msg.cnblogs.com/send/%E6%85%8E%E7%8B%AC%E5%88%99%E5%BF%83%E9%87%8C%E5%B9%B3%E9%9D%99" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4103841" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103756" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4103756);">@</a>
艾欧里亚ゞ<br>我在服务端修改了用户名客户端还是可以连接上。</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4103841,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4103841,&#39;Bury&#39;,this)">反对(0)</a></div>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
			<h4>
				<a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103859" class="layer">#8楼</a><a name="4103859" id="comment_anchor_4103859"></a>[<span class="louzhu">楼主</span>]<span id="comment-maxId" style="display:none;">4103859</span><span id="comment-maxDate" style="display:none;">2018/11/1 17:47:50</span>
					<span>
						 <span class="comment_date">2018-11-01 17:47</span>
					</span>
				<a id="a_comment_author_4103859" href="https://www.cnblogs.com/wjoyxt/" target="_blank">艾欧里亚ゞ</a> <a href="http://msg.cnblogs.com/send/%E8%89%BE%E6%AC%A7%E9%87%8C%E4%BA%9A%E3%82%9E" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</h4>
			<p>
				</p><div id="comment_body_4103859" class="blog_comment_body"><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#4103841" title="查看所回复的评论" onclick="commentManager.renderComments(0,50,4103841);">@</a>
慎独则心里平静<br>如果出现你说的这种情况，不科学呀。我是没遇到过，服务端修改后会即时生效，客户端再连的话就会报错。建议你去仔细查看服务端的日志信息查找端倪</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4103859,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4103859,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_4103859_avatar" style="display:none;">http://pic.cnblogs.com/face/632106/20171212180223.png</span>
				&nbsp;&nbsp;<span class="comment_actions"></span>
			<p></p>
		
</div><div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/wjoyxt/p/9489549.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://ke.qq.com/adActivity.html?name=xiangxueketang2" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-享学&#39;)">【推荐】Java工作两年，一天竟收到33份面试通知</a><br><a href="https://q.cnblogs.com/" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-博问&#39;)">【推荐】程序员问答平台，解决您开发中遇到的技术难题</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/gpt.js.download"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CKGXh97rueICFUu8lgodxtQMIQ"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/hftian/p/9936288.html" target="_blank" onclick="clickRecomItmem(9936288)">centos7部署openvpneasy-rsa3.0部署方法</a><br>·  <a href="https://www.cnblogs.com/caibaofei/p/9584678.html" target="_blank" onclick="clickRecomItmem(9584678)">阿里云centos7系统搭建openvpn</a><br>·  <a href="https://www.cnblogs.com/xingyunfashi/p/8365179.html" target="_blank" onclick="clickRecomItmem(8365179)">CentOS7系列搭建Openvpn</a><br>·  <a href="https://www.cnblogs.com/weifeng1463/p/7478147.html" target="_blank" onclick="clickRecomItmem(7478147)">CentOS6搭建OpenVPN服务器</a><br>·  <a href="https://www.cnblogs.com/zyxnhr/p/10518022.html" target="_blank" onclick="clickRecomItmem(10518022)">搭建openvpn</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CKKXh97rueICFUu8lgodxtQMIQ"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="2" data-load-complete="true" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/saved_resource(1).html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/625906/" target="_blank">一线丨中国铁塔4年：节省投资1148亿元 共享率升至75%</a><br> ·  <a href="https://news.cnblogs.com/n/625905/" target="_blank">全球亿万富豪地图出炉！有钱人最多的城市是...</a><br> ·  <a href="https://news.cnblogs.com/n/625904/" target="_blank">为何要去探测太阳——专访帕克太阳探针号首席科学家Marco Velli</a><br> ·  <a href="https://news.cnblogs.com/n/625903/" target="_blank">邬贺铨谈华为事件：华为已熟练掌握ARM架构修改</a><br> ·  <a href="https://news.cnblogs.com/n/625902/" target="_blank">独角兽Palantir上市受阻 IPO日期或延至2020年</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
</div>

<p id="footer">
	Powered by: 
	<br>
	
	<a id="Footer1_Hyperlink3" name="Hyperlink1" href="https://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © 艾欧里亚ゞ
</p>

<!--PageEndHtml Block Begin-->
<script type="text/javascript" src="./Centos7搭建OpenVPN服务器 - 艾欧里亚ゞ - 博客园_files/canvas-nest.min.js.download"></script><canvas id="c_n21" width="1920" height="920" style="position: fixed; top: 0px; left: 0px; z-index: -1; opacity: 0.5;"></canvas>
<!--PageEndHtml Block End-->


</body></html>