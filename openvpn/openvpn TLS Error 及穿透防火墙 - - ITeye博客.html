<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0040)https://powertech.iteye.com/blog/2283631 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom"></script><script type="text/javascript" async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom(1)"></script><script type="text/javascript" async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom(2)"></script>
  
  <title>
    openvpn TLS Error 及穿透防火墙 -  - ITeye博客
  </title>
  <meta name="description" content="OpenVPN配好了，客户端连接时却报以下错误   TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)  TLS Error: TLS handshake failed   查阅资料，说是网络有可能有问题，路由器没有开nat，或者其它的网络问题。 想来可能 ...">
  <meta name="keywords" content=" openvpn TLS Error 及穿透防火墙">
  <link rel="shortcut icon" href="https://powertech.iteye.com/images/favicon.ico" type="image/x-icon">
  <link rel="search" type="application/opensearchdescription+xml" href="https://powertech.iteye.com/open_search.xml" title="ITeye">
  <link href="https://powertech.iteye.com/rss" rel="alternate" title="" type="application/rss+xml">
  <link href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/blog.css" media="screen" rel="stylesheet" type="text/css">
<link href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/blue.css" media="screen" rel="stylesheet" type="text/css">
  <script type="text/javascript" async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/analytics.js.download"></script><script type="text/javascript" async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/auto_dup"></script><script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/hm.js.download"></script><script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/hm.js(1).download"></script><script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/application.js.download" type="text/javascript"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?e19a8b00cf63f716d774540875007664";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
<style>
/* 折叠效果 */
.hide-main-content{
    position: relative;
}
.hide-article-box {
    display: none;
    position: absolute;
    z-index: 9999;
    bottom: -1px;
    width: 100%;
    padding-top: 160px;
    background-image: -webkit-gradient(linear,left top, left bottom,from(rgba(255,255,255,0)),color-stop(70%, #fff));
    background-image: linear-gradient(-180deg,rgba(255,255,255,0) 0%,#fff 70%);
}
.hide-article-box #btn-readmore{
    color: #ca0c16;
    border: 1px solid #ca0c16;
    margin: 10px auto;
    padding: 0 8px;
    display: block;
    font-size: 14px;
    border-radius: 4px;
    text-align: center;
    background-color: transparent;
    height: 34px;
    width: 74px;
    line-height: 32px;
    min-width: 72px;
    cursor: pointer;
}
.hide-article-box #btn-readmore:hover{
    background: #ca0c16;
    color:#fff;
    text-decoration: none;
}
</style>
<!-- 因INS广告原因 需要提前引入jquery -->
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/jquery-1.11.1.min.js.download" type="text/javascript"></script>
<script type="text/javascript">var jQuery = jQuery.noConflict();// 解决jq与prototype.js命名空间冲突的问题</script>
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/fixed-sidebar.js.download" type="text/javascript"></script>

    <link href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/SyntaxHighlighter.css" media="screen" rel="stylesheet" type="text/css">
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/shCoreCommon.js.download" type="text/javascript"></script>
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/hotkey.js.download" type="text/javascript"></script>
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/code_favorites.js.download" type="text/javascript"></script>
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/weiboshare.js.download" type="text/javascript"></script>

  <!-- 请置于所有广告位代码之前 -->
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/ds.js.download"></script>
  <link ref="canonical" href="http://powertech.iteye.com/blog/2283631">
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/c.js.download"></script><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><style type="text/css">.dp-j .annotation { color: #646464; }.dp-j .number { color: #C00000; }</style><link rel="stylesheet" type="text/css" href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/recommend.css"><link rel="stylesheet" type="text/css" href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/iconfont.css"></head><body><div id="BAIDU_DUP_fp_wrapper" style="position: absolute; left: -1px; bottom: -1px; z-index: 0; width: 0px; height: 0px; overflow: hidden; visibility: hidden; display: none;"><iframe id="BAIDU_DUP_fp_iframe" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/o.html" style="width: 0px; height: 0px; visibility: hidden; display: none;"></iframe></div><svg aria-hidden="true" style="position: absolute; width: 0px; height: 0px; overflow: hidden;"><symbol id="fanyi" viewBox="0 0 1084 1024"><path d="M602.416429 647.439059v75.390494h120.470588v-120.470588h-75.029082l195.493647-193.939577V481.882353h180.597459c33.322165 0 60.289506 26.967341 60.289506 60.235294 0 0.722824-0.012047 1.439624-0.036141 2.1504v236.640377c0.024094 0.710776 0.036141 1.427576 0.036141 2.1504 0 33.261929-26.967341 60.235294-60.235294 60.235294H843.357606v120.470588c0 33.261929-26.967341 60.229271-60.235294 60.22927s-60.235294-26.967341-60.235295-60.235294v-120.470588H542.090782c-33.267953 0-60.235294-26.967341-60.235294-60.235294l0.006024-16.022588 120.554917-119.597177z m240.935153-45.080094v120.470588h120.380235v-120.470588h-120.380235z m-403.534306-46.585977l-27.732329-67.861082H186.479676l-70.716235 167.936c-12.9024 30.659765-48.224376 45.056-78.884141 32.141553-30.659765-12.908424-45.049976-48.2304-32.141553-78.890165l240.941176-572.223247A60.253365 60.253365 0 0 1 301.782076 0.006024a60.253365 60.253365 0 0 1 56.380236 37.466352l174.242635 426.429742 352.798117-350.033318c23.612235-23.431529 61.7472-23.280941 85.17873 0.331294 23.431529 23.612235 23.280941 61.753224-0.331294 85.184753L200.394029 963.029835c-23.612235 23.431529-61.753224 23.280941-85.184753-0.331294-23.431529-23.612235-23.280941-61.753224 0.337318-85.184753l324.270682-321.7408z m-138.842353-339.787294L237.209841 367.441318H362.860664L300.974923 215.979671z"></path></symbol><symbol id="shouji" viewBox="0 0 1024 1024"><path d="M768 670.72V102.4H256v568.32h512z m0 51.2H256v199.68h512v-199.68z m102.4-619.52v819.2c0 56.55552-45.84448 102.4-102.4 102.4H256c-56.55552 0-102.4-45.84448-102.4-102.4V102.4C153.6 45.84448 199.44448 0 256 0h512c56.55552 0 102.4 45.84448 102.4 102.4zM512 870.4c-28.27776 0-51.2-22.92224-51.2-51.2s22.92224-51.2 51.2-51.2 51.2 22.92224 51.2 51.2-22.92224 51.2-51.2 51.2z"></path></symbol><symbol id="yuedushu" viewBox="0 0 1462 1024"><path d="M731.428571 1024c-259.320686 0-495.879314-146.753829-709.668571-440.246857-29.015771-39.840914-29.015771-103.665371 0-143.506286C235.556571 146.761143 472.107886 0 731.428571 0c259.320686 0 495.879314 146.753829 709.668572 440.246857 29.015771 39.840914 29.015771 103.665371 0 143.506286C1227.300571 877.238857 990.749257 1024 731.428571 1024z m0-841.142857c-195.2256 0-375.632457 107.132343-545.865142 329.142857 170.232686 222.010514 350.639543 329.142857 545.865142 329.142857 195.2256 0 375.632457-107.132343 545.865143-329.142857C1107.053714 289.989486 926.646857 182.857143 731.428571 182.857143z m0 621.714286c-161.579886 0-292.571429-130.991543-292.571428-292.571429s130.991543-292.571429 292.571428-292.571429 292.571429 130.991543 292.571429 292.571429-130.991543 292.571429-292.571429 292.571429z m0-182.857143c60.591543 0 109.714286-49.122743 109.714286-109.714286 0-60.591543-49.122743-109.714286-109.714286-109.714286-60.591543 0-109.714286 49.122743-109.714285 109.714286 0 60.591543 49.122743 109.714286 109.714285 109.714286z"></path></symbol></svg><script onload="window[&#39;cambrian_sync_loader_success1558896445685567&#39;]()" onerror="window[&#39;cambrian_sync_loader_fail_1558896445685567&#39;]()" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/main.8b2bc869.js.download"></script>
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/recommend.js.download"></script><script language="javascript" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/iconfont.js.download"></script>



  <div id="header">
    <div id="blog_site_nav">
  <a href="https://www.iteye.com/" class="homepage">首页</a>
  <a href="https://www.iteye.com/news">资讯</a>
  <a href="https://www.iteye.com/magazines">精华</a>
  <a href="https://www.iteye.com/forums">论坛</a>
  <a href="https://www.iteye.com/ask">问答</a>
  <a href="https://www.iteye.com/blogs">博客</a>
  <a href="https://www.iteye.com/blogs/subjects">专栏</a>
  <a href="https://www.iteye.com/groups">群组</a>
<!--  <a href="#" onclick="return false;" id="msna"><u>更多</u> <small>▼</small></a>-->
<!--  <div class="quick_menu" style="display:none;">-->
<!--    <a target="_blank" href="https://job.iteye.com/iteye">知识库</a>-->
<!--    <a href="https:///search">搜索</a>-->
<!--  </div>-->
</div>

    <div id="user_nav">

      <a href="https://powertech.iteye.com/login" class="welcome" title="登录">您还未登录 !</a>
    <a href="https://powertech.iteye.com/login">登录</a>
    <!--<a href="/signup" class="nobg">注册</a>-->
    <!--<a href="https://passport.csdn.net/account/mobileregister?from=https://www.iteye.com">注册</a>-->
  </div>


  </div>

  <div id="page">
<!--    <div id="branding" class="clearfix">-->
<!--      <div id="blog_name">-->
<!--        <h1><a href="/">-->
<!--            </a></h1>-->
<!--      </div>-->
<!--      <div id='fd'></div>-->
<!--      <div id="blog_navbar">-->
<!--        <ul>-->
          
          
          
          
          
          
<!--        </ul>-->

<!--        <div class="search">-->
<!--          <form action="/blog/search" method="get">-->
<!--            <input class="search_text" id="query" name="query" style="margin-left: 10px;width: 110px;" type="text"-->
<!--              value="" />-->
<!--            <input class="submit_search" type="submit" value="" />-->
<!--          </form>-->
<!--        </div>-->
<!--        <div id="fd"></div>-->
<!--      </div>-->
<!--    </div>-->
    `
    <div id="content" class="clearfix">
      <div id="local">
        <div class="local_top"></div>
        <div id="blog_owner">
  <div id="blog_owner_logo"><a href="https://powertech.iteye.com/"><img alt="powertech的博客" class="logo" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/2fe16860-d4f9-388f-8ce3-0498382736c7.jpg" title="powertech的博客: " width=""></a></div>
  <div id="blog_owner_name">powertech</div>
</div>

        <div id="blog_actions">
          <ul>
            <li>浏览:
              313444 次</li>
            
            
            <li>
              <img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/offline.gif">
            </li>
            
          </ul>
        </div>

        <div id="user_visits" class="clearfix">
          <h5>最近访客 <span style="font-weight:normal;font-size:12px;padding-left:30px;">
              <a href="https://powertech.iteye.com/blog/user_visits">更多访客&gt;&gt;</a></span></h5>
          
          <div class="user_visit">
            <div class="logo"><a href="https://yelinsen.iteye.com/" target="_blank"><img alt="yelinsen05的博客" class="logo" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/5acdb50a-3a9e-31d4-9961-19e03f63182c-thumb.png" title="yelinsen05的博客: Android" width="48px"></a></div>
            <div class="left">
              <a href="https://yelinsen.iteye.com/" target="_blank" title="yelinsen05">yelinsen05</a>
            </div>
          </div>
          
          <div class="user_visit">
            <div class="logo"><a href="https://usernames.iteye.com/" target="_blank"><img alt="usernames的博客" class="logo" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/user-logo-thumb.gif" title="usernames的博客: " width="48px"></a></div>
            <div class="left">
              <a href="https://usernames.iteye.com/" target="_blank" title="usernames">usernames</a>
            </div>
          </div>
          
          <div class="user_visit">
            <div class="logo"><a href="https://kangeroo.iteye.com/" target="_blank"><img alt="kangeroo的博客" class="logo" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/user-logo-thumb.gif" title="kangeroo的博客: " width="48px"></a></div>
            <div class="left">
              <a href="https://kangeroo.iteye.com/" target="_blank" title="kangeroo">kangeroo</a>
            </div>
          </div>
          
          <div class="user_visit">
            <div class="logo"><a href="https://andye.iteye.com/" target="_blank"><img alt="andye的博客" class="logo" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/c0f2f128-f17a-35b6-9854-5f7d383a243d-thumb.jpg" title="andye的博客: andye" width="48px"></a></div>
            <div class="left">
              <a href="https://andye.iteye.com/" target="_blank" title="andye">andye</a>
            </div>
          </div>
          
        </div>

        <div id="user_title_list" class="clearfix">
          <h5>博主相关</h5>
          <li>
            <a href="https://powertech.iteye.com/">博客</a>
          </li>

          <li>
            <a href="https://powertech.iteye.com/weibo">微博</a>
          </li>

          <li>
            <a href="https://powertech.iteye.com/album">相册</a>
          </li>

          <li>
            <a href="https://powertech.iteye.com/link">收藏</a>
          </li>

          <li>
            <a href="https://powertech.iteye.com/blog/guest_book">留言</a>
          </li>

          <li>
            <a href="https://powertech.iteye.com/blog/profile">关于我</a>
          </li>
        </div>

        

                <div id="blog_menu">
          <h5>文章分类</h5>
          <ul>
            <li>
              <a href="https://powertech.iteye.com/">全部博客 (240)</a>
            </li>
            
            <li>
              <a href="https://powertech.iteye.com/category/304575">数据库 (29)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/304576">linux (84)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/304577">java (68)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/304707">项目管理 (28)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/305319">PHP (5)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/305386">python (8)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/305467">JavaScript (28)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/328093">技术故事 (0)</a>
              </li>
              
            <li>
              <a href="https://powertech.iteye.com/category/378838">移动端 (1)</a>
              </li>
              
          </ul>
        </div>
        <div id="month_blogs">
          <h5>社区版块</h5>
          <ul>
            <li>
              <a href="https://powertech.iteye.com/blog/news">我的资讯</a> (
              0)</li>
            <li>
              <a href="https://powertech.iteye.com/blog/post">我的论坛</a> (
              0)
            </li>
            <li>
              <a href="https://powertech.iteye.com/blog/answered_problems">我的问答</a> (
              0)</li>
          </ul>
        </div>
        <div id="month_blogs">
          <h5>存档分类</h5>
          <ul>
            
            <li>
              <a href="https://powertech.iteye.com/blog/monthblog/2019-04">2019-04</a>
              (
              1)</li>
            
            <li>
              <a href="https://powertech.iteye.com/blog/monthblog/2018-03">2018-03</a>
              (
              4)</li>
            
            <li>
              <a href="https://powertech.iteye.com/blog/monthblog/2018-02">2018-02</a>
              (
              1)</li>
            
            <li>
              <a href="https://powertech.iteye.com/blog/monthblog_more">更多存档...</a>
            </li>
          </ul>
        </div>
        
        

        <div id="guest_books">
          <h5>最新评论</h5>
          <ul>
            
            <li>
              <a href="https://lord-is-layuping.iteye.com/" target="_blank" title="lord_is_layuping">lord_is_layuping</a>：
              哇喔,好用哎,哈哈哈哈哈<br>
              <a href="https://powertech.iteye.com/blog/2158613#bc2387353">cygwin less UTF-8 乱码</a>
            </li>
            
          </ul>
        </div>

        <div class="local_bottom"></div>
        
        <div id="nav_show_top_stop" style="position: fixed; top: 1553px;">
            <div>
              <!-- 广告位：PC端-iteye博客详情页左侧Button1-200*200 -->
              
              <!-- Ads ID 423 -->
              
            </div>
            <div>
              <!-- 广告位：PC端-iteye博客详情页左侧Button2-200*200 -->
              
              <!-- Ads ID 424 -->
              
            </div>
          </div>
      </div>
      
      <div id="main" class="">
        



        


<div class="h-entry" style="display:none">
  <a href="https://powertech.iteye.com/" class="p-author" target="_blank">powertech</a>
</div>


<div class="blog_main">
  <script type="application/ld+json">
    {
        "@context": "https://zhanzhang.baidu.com/contexts/cambrian.jsonld",
        "@id": "http://powertech.iteye.com/blog/2283631",
        "title": "openvpn TLS Error 及穿透防火墙",
        "images": [],
        "description": "",
        "pubDate": "2016-03-16T18:13:51"
    }
  </script>
  <div class="blog_title">
    <h3>
      <a href="https://powertech.iteye.com/blog/2283631">openvpn TLS Error 及穿透防火墙</a>
      <em class="actions">      </em>
    </h3>
    <ul class="blog_categories"><strong>博客分类：</strong> <li><a href="https://powertech.iteye.com/category/304576">linux</a></li> </ul>
        <div class="news_tag">&nbsp;</div>
  </div>

  <div id="blog_content" class="hide-main-content" style="height: 1104px; overflow: hidden;">
    <div class="hide-article-box text-center" style="display: block;">
      <a class="btn" id="btn-readmore">阅读更多</a>
    </div>
    OpenVPN配好了，客户端连接时却报以下错误
<br>
<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=TLS%20Error%3A%20TLS%20key%20negotiation%20failed%20to%20occur%20within%2060%20seconds%20(check%20your%20network%20connectivity)%0ATLS%20Error%3A%20TLS%20handshake%20failed%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>TLS&nbsp;Error:&nbsp;TLS&nbsp;key&nbsp;negotiation&nbsp;failed&nbsp;to&nbsp;occur&nbsp;within&nbsp;</span><span class="number">60</span><span>&nbsp;seconds&nbsp;(check&nbsp;your&nbsp;network&nbsp;connectivity)&nbsp;&nbsp;</span></span></li><li><span>TLS&nbsp;Error:&nbsp;TLS&nbsp;handshake&nbsp;failed&nbsp;&nbsp;</span></li></ol></div><pre name="code" class="java" style="display: none;">TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)
TLS Error: TLS handshake failed
</pre>
<br>
<br>查阅资料，说是网络有可能有问题，路由器没有开nat，或者其它的网络问题。
<br>
<br>想来可能是防火墙限制了，是否是防火墙的问题，需要试一下
<br>有两种方式，第一种方式，使用不受限的SSL端口443和TCP协议
<br>
<br>
<br><div class="dp-highlighter" id=""><div class="bar"><div class="tools">Java代码 <embed wmode="transparent" src="/javascripts/syntaxhighlighter/clipboard_new.swf" width="14" height="15" flashvars="clipboard=%23%2Fetc%2Fopenvpn%2Fserver.conf%0AServer%0A...%0A%23%20Which%20TCP%2FUDP%20port%20should%20OpenVPN%20listen%20on%3F%0A%23%20If%20you%20want%20to%20run%20multiple%20OpenVPN%20instances%0A%23%20on%20the%20same%20machine%2C%20use%20a%20different%20port%0A%23%20number%20for%20each%20one.%20You%20will%20need%20to%0A%23%20open%20up%20this%20port%20on%20your%20firewall.%0Aport%20443%20%23%20TCP%20or%20UDP%20server%3F%0Aproto%20tcp2%0A%3Bproto%20udp%0A...%0A%23%20SSL%2FTLS%20root%20certificate%20(ca)%2C%20certificate%0A%23%20(cert)%2C%20and%20private%20key%20(key).%20Each%20client%0A%23%20and%20the%20server%20must%20have%20their%20own%20cert%20and%0A%23%20key%20file.%20The%20server%20and%20all%20clients%20will%0A%23%20use%20the%20same%20ca%20file.%0A%23%20%0A" quality="high" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">&nbsp;<a href="javascript:void()" title="收藏这段代码" onclick="code_favorites_do_favorite(this);return false;"><img class="star" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icon_star.png" alt="收藏代码"><img class="spinner" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/spinner.gif" style="display:none"></a></div></div><ol start="1" class="dp-j"><li><span><span>#/etc/openvpn/server.conf&nbsp;&nbsp;</span></span></li><li><span>Server&nbsp;&nbsp;</span></li><li><span>...&nbsp;&nbsp;</span></li><li><span>#&nbsp;Which&nbsp;TCP/UDP&nbsp;port&nbsp;should&nbsp;OpenVPN&nbsp;listen&nbsp;on?&nbsp;&nbsp;</span></li><li><span>#&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;run&nbsp;multiple&nbsp;OpenVPN&nbsp;instances&nbsp;&nbsp;</span></li><li><span>#&nbsp;on&nbsp;the&nbsp;same&nbsp;machine,&nbsp;use&nbsp;a&nbsp;different&nbsp;port&nbsp;&nbsp;</span></li><li><span>#&nbsp;number&nbsp;<span class="keyword">for</span><span>&nbsp;each&nbsp;one.&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;&nbsp;</span></span></li><li><span>#&nbsp;open&nbsp;up&nbsp;<span class="keyword">this</span><span>&nbsp;port&nbsp;on&nbsp;your&nbsp;firewall.&nbsp;&nbsp;</span></span></li><li><span>port&nbsp;<span class="number">443</span><span>&nbsp;#&nbsp;TCP&nbsp;or&nbsp;UDP&nbsp;server?&nbsp;&nbsp;</span></span></li><li><span>proto&nbsp;tcp2&nbsp;&nbsp;</span></li><li><span>;proto&nbsp;udp&nbsp;&nbsp;</span></li><li><span>...&nbsp;&nbsp;</span></li><li><span>#&nbsp;SSL/TLS&nbsp;root&nbsp;certificate&nbsp;(ca),&nbsp;certificate&nbsp;&nbsp;</span></li><li><span>#&nbsp;(cert),&nbsp;and&nbsp;<span class="keyword">private</span><span>&nbsp;key&nbsp;(key).&nbsp;Each&nbsp;client&nbsp;&nbsp;</span></span></li><li><span>#&nbsp;and&nbsp;the&nbsp;server&nbsp;must&nbsp;have&nbsp;their&nbsp;own&nbsp;cert&nbsp;and&nbsp;&nbsp;</span></li><li><span>#&nbsp;key&nbsp;file.&nbsp;The&nbsp;server&nbsp;and&nbsp;all&nbsp;clients&nbsp;will&nbsp;&nbsp;</span></li><li><span>#&nbsp;use&nbsp;the&nbsp;same&nbsp;ca&nbsp;file.&nbsp;&nbsp;</span></li><li><span>#&nbsp;&nbsp;&nbsp;</span></li></ol></div><pre name="code" class="java" style="display: none;">#/etc/openvpn/server.conf
Server
...
# Which TCP/UDP port should OpenVPN listen on?
# If you want to run multiple OpenVPN instances
# on the same machine, use a different port
# number for each one. You will need to
# open up this port on your firewall.
port 443 # TCP or UDP server?
proto tcp2
;proto udp
...
# SSL/TLS root certificate (ca), certificate
# (cert), and private key (key). Each client
# and the server must have their own cert and
# key file. The server and all clients will
# use the same ca file.
# 
</pre>
<br>第二种，使用http代理
<br><a href="http://kerry.blog.51cto.com/172631/1079338" target="_blank">利openVPN自带的http-proxy突破防火墙的封锁</a>
<br>
<br>
<br>使用第一种方式配完后，果然连上了。

  

  <div>
    <!-- 广告位：PC端-iteye博客详情页底部banner2-728*90 -->
    <script>
      (function() {
          var s = "_" + Math.random().toString(36).slice(2);
          document.write('<div id="' + s + '"></div>');
          (window.slotbydup=window.slotbydup || []).push({
              id: '4774193',
              container: s,
              size: '728,90',
              display: 'inlay-fix'
          });
      })();
      jQuery(function(){
        window.csdn.recommendSide({
          contentBox: "recommend",
          postBox: jQuery(".news-right-side"),
          query:'openvpn TLS Error 及穿透防火墙',
          popu:'725'
        })
      });
    </script><div id="_3674estdz6q"></div><script charset="utf-8" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom(3)"></script><a href="http://www.baidu.com/cb.php?c=IgF_pyfqnHmkPjbvrHT0IZ0qnfK9ujYzrH6YrjmY0Aw-5Hnsn16YnjT0TAq15HfLP1fkrHn0T1Y1PvfYuW0snhDYuWw-nAfs0AwY5HDdPH63rHmYPjm0IgF_5y9YIZK1rBtEuywdQhP1uA38UhNYQLwETA-WQvG9IhDk5LNYUNq1ULNzmvRqmhkEuv-Yug--0ZFb5HDz0AFV5HD0TZcqn0KdpyfqnHRLPjnvnfKEpyfqnHc4rj6kP0KWpyfqP1n4PHn10AqLUWYs0ZK45HcsP6KWThnqnHmYn1D" target="_blank" style="text-decoration:none;">
<div style="font-size:17px;color:#f13d3d;font-family: SF Pro Display,Roboto,Noto,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,sans-serif;width:728px;height:25px;font-weight:bold;">资深Java项目团队历时1年打造，实战精髓大揭秘！</div>
<div style="font-size:13px;color:#666;font-family: SF Pro Display,Roboto,Noto,Arial,PingFang SC,Hiragino Sans GB,Microsoft YaHei,sans-serif;height:35px;margin-top:10px;">Java系统学习全案：五大阶段学习系统规划、8大企业级项目贯穿全程。限时2折秒杀。立省4688元！</div>

</a>
  </div>



  <div id="bottoms" class="clearfix">
    
    <div id="share_weibo">分享到：
      <a data-type="sina" href="javascript:;" title="分享到新浪微博"><img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/sina.jpg"></a>
      <a data-type="qq" href="javascript:;" title="分享到腾讯微博"><img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/tec.jpg"></a>
    </div>
  </div>

  <div class="blog_nav">
    <div class="pre_next">
      <a href="https://powertech.iteye.com/blog/2284716" class="next" title="putty文件夹文字看不清">putty文件夹文字看不清</a>
      |
      <a href="https://powertech.iteye.com/blog/2283630" class="pre" title="CentOS Linux VPS安装HTTP代理服务器Tinyproxy">CentOS Linux VPS安装HTTP代理服务器Tinypr ...</a>
    </div>
  </div>
  <div class="blog_bottom">
    <ul>
      <li>2016-03-16 18:13</li>
      <li>浏览 20460</li>
      <li><a href="https://powertech.iteye.com/blog/2283631#comments">评论(0)</a></li>
      
      
      <li>分类:<a href="https://www.iteye.com/blogs/category/opensource">开源软件</a></li>      
      <li class="last"><a href="https://www.iteye.com/wiki/blog/2283631" target="_blank" class="more">查看更多</a></li>
    </ul>    
  </div>
    
  <div class="blog_comment">
    <h5>评论</h5>
    <a id="comments" name="comments"></a>
    
    
    
  </div>

  <div class="blog_comment">
    <h5>发表评论</h5>
            <p style="text-align:center; margin-top:30px;margin-bottom:0px;"><a href="https://powertech.iteye.com/login" style="background-color:white;"> <img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/login_icon.png" style="vertical-align:middle; margin-right: 10px;"></a><a href="https://powertech.iteye.com/login">  您还没有登录,请您登录后再发表评论 </a></p>
      </div>
  </div>
  
      
<div class="boutique-curr-box blog_comment">
	  <div class="boutique-curr clearfix" id="album_detail_wrap">
	    <h5 class="h3titles">相关资源推荐</h5>
			<ul style="margin-top: 8px" class="clearfix">
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/javabaidu/article/details/84770882" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/javabaidu/article/details/84770882,-&quot;}" target="_blank" title="openvpn TLS Error 及穿透防火墙"><em class="related_suggestion_highlight">openvpn</em> <em class="related_suggestion_highlight">TLS</em> <em class="related_suggestion_highlight">Error</em> 及<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em></a>
              <p>
                <em class="related_suggestion_highlight">OpenVPN</em>配好了，客户端连接时却报以下错误

[code=&amp;quot;java&amp;quot;]
<em class="related_suggestion_highlight">TLS</em> <em class="related_suggestion_highlight">Error</em>: <em class="related_suggestion_highlight">TLS</em> key negotiation failed to occur within 60 seconds (check your network connectivity)
<em class="related_suggestion_highlight">TLS</em> <em class="related_suggestion_highlight">Error</em>: <em class="related_suggestion_highlight">TLS</em> handshake failed
[/code]

查阅资料，说是网络有可能有问...
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/dog250/article/details/40955387" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/dog250/article/details/40955387,-&quot;}" target="_blank" title="OpenVPN优化之-TLS握手控制通道的建立"><em class="related_suggestion_highlight">OpenVPN</em>优化之-<em class="related_suggestion_highlight">TLS</em>握手控制通道的建立</a>
              <p>
                关于<em class="related_suggestion_highlight">OpenVPN</em>数据通道的一次优化正在进行中，当我参考了”巨型帧“的概念和思想后，我仔细思考了TCP/IP协议栈的设计和实现，于是我得出了一个可能是错误但是起码在我的场景中很实用的结论：上层协议尽管把数据发出吧，不要管数据的大小，如果真的需要拆分，那就由下层来完成吧。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这个结论的一个反例就是TCP协议的数据分段，它感知了传输链路的MTU，也许在早期的网络中，IP分片重组确实影响了TC
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/zzzhktk/article/details/18566309" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zzzhktk/article/details/18566309,-&quot;}" target="_blank" title="http tunnel 原理 及 穿透防火墙方法">http tunnel 原理 及 <em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>方法</a>
              <p>
                转自&nbsp;http://blog.csdn.net/blue_dream_/article/details/1905697


&nbsp;http tunnel 原理 及 <em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>方法-1

tunnel&nbsp;很多文章解释为 "隧道", "通道".

这里所谓的 tunnel 是指一种绕过<em class="related_suggestion_highlight">防火墙</em>端口屏蔽的通讯方式, 可以有效地解决<em class="related_suggestion_highlight">防火墙</em>对端口的屏蔽作用.


原理:
<em class="related_suggestion_highlight">防火墙</em>两端的数据包封装
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/fjhyy/article/details/26217513" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/fjhyy/article/details/26217513,-&quot;}" target="_blank" title="关于HTTPS、OpenVPN、TLS、SRTP初始版本及加密算法、密码长度">关于HTTPS、<em class="related_suggestion_highlight">OpenVPN</em>、<em class="related_suggestion_highlight">TLS</em>、SRTP初始版本及加密算法、密码长度</a>
              <p>
                <em class="related_suggestion_highlight">OpenVPN</em>：
创始者/版权拥有者：
<em class="related_suggestion_highlight">OpenVPN</em> Technologies, Inc.&nbsp; 
&nbsp;
加密方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 密钥长度
bf-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1-448 bit
aes-128-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128bit&nbsp;&nbsp;&nbsp; 
des-ede3-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 56 bit
&nbsp;
HTTPS:


创始者/版权拥有者：
Netscape C
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/Fly_hps/article/details/80632707" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Fly_hps/article/details/80632707,-&quot;}" target="_blank" title="13、利用 ICMP 隧道穿透防火墙">13、利用 ICMP 隧道<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em></a>
              <p>
                以前<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>总是使用 SSH 隧道、DNS 隧道或 HTTP 隧道等等，今天来说一个利用 SNMP 隧道进行<em class="related_suggestion_highlight">穿透</em>工具–icmptunnel。简介icmptunnel 可以将 IP 流量封装进 IMCP 的 ping 数据包中，旨在利用 ping <em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>的检测，因为通常<em class="related_suggestion_highlight">防火墙</em>是不会屏蔽 ping 数据包的。但是现在市面上已经有了很多类似的工具了，那么 icmptunnel 又有哪些优势呢？ic...
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/u012375924/article/details/83020993" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u012375924/article/details/83020993,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u012375924/article/details/83020993,-&quot;}" target="_blank" title="使用frp做内网穿透">使用frp做内网<em class="related_suggestion_highlight">穿透</em></a>
              <p>
                
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/u013521188/article/details/79359183" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u013521188/article/details/79359183,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u013521188/article/details/79359183,-&quot;}" target="_blank" title="Ngrok+OpenVPN实现任意接入内网">Ngrok+<em class="related_suggestion_highlight">OpenVPN</em>实现任意接入内网</a>
              <p>
                前言

目前来说，我们所在的内网（局域网）有很多，像公司的局域网，工厂的局域网，更为常见的校园网，很多资源的访问需要在内网才可以。但是当我们在校外，出差等，往往访问那些资源会很不方便，这时候经常会想到VPN技术。但是像学生是一般不会开放这种权限或资源，需要自己搭建，前提是有一台位于校园网边界的服务器，这个条件更难获取，所以这里我们采用Ngrok+<em class="related_suggestion_highlight">OpenVPN</em>的方式，借助任意一台内网的电脑，实现外...
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/xiongping_/article/details/51423961" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/xiongping_/article/details/51423961,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/xiongping_/article/details/51423961,-&quot;}" target="_blank" title="Nat 穿透开源项目">Nat <em class="related_suggestion_highlight">穿透</em>开源项目</a>
              <p>
                Nat <em class="related_suggestion_highlight">穿透</em>开源项目

1. libnice

&nbsp;&nbsp;&nbsp;官网地址：http://nice.freedesktop.org/wiki/

&nbsp;&nbsp;&nbsp;源码git库地址：http://cgit.collabora.com/git/libnice.git

&nbsp;

2. pjsip

&nbsp;&nbsp;&nbsp; pjsip中pjnath实现了ice的功能。

&nbsp;&nbsp;&nbsp;&nbsp;http://www.pjsip.or
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/baidu_32874703/article/details/85681744" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/baidu_32874703/article/details/85681744,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/baidu_32874703/article/details/85681744,-&quot;}" target="_blank" title="配置OpenLDAP使用TLS通信">配置OpenLDAP使用<em class="related_suggestion_highlight">TLS</em>通信</a>
              <p>
                配置OpenLDAP使用<em class="related_suggestion_highlight">TLS</em>通信
OpenLDAP 和 OpenSSL 简介
OpenLDAP 是最常用的目录服务之一，它是一个由开源社区及志愿者开发和管理的一个开源项目，提供了目录服务的所有功能，包括目录搜索、身份认证、安全通道、过滤器等等。大多数的 Linux 发行版里面都带有 OpenLDAP 的安装包。OpenLDAP 服务默认使用非加密的 TCP/IP 协议来接收服务的请求，并将查询结...
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/hardstone1/article/details/3889831" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hardstone1/article/details/3889831,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hardstone1/article/details/3889831,-&quot;}" target="_blank" title="armv4l下成功交叉编译OPENVPN">armv4l下成功交叉编译<em class="related_suggestion_highlight">OPENVPN</em></a>
              <p>
                网上关于<em class="related_suggestion_highlight">openvpn</em>交叉编译的文章有很多，但大多数在我这个armv4l-unknown-linux-gcc下无法编译通过，搞了半天之后，终于在参考一些文章的基础上完成拉，哈哈。&nbsp;交叉编译LZO-2.0.3./configure --host=armv4l-unknown-linux CC=/opt/host/armv4l/bin/armv4l-unknown-linux-gcc --ta
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/jinchijixiaowei/article/details/21090133" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jinchijixiaowei/article/details/21090133,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jinchijixiaowei/article/details/21090133,-&quot;}" target="_blank" title="穿透防火墙技术"><em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>技术</a>
              <p>
                最近看了几篇关于<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>技术的论文，发现其中有两篇很值得学习下，一篇是介绍p2技术的，另一篇是基于反向连接 HTTP隧道和DNS共享<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>技术，对于P2技术不太熟悉，主要小节下后面三中<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>技术吧&nbsp;电脑,技术,IT,学习,交流,网络安全,QQ,硬件,软件,编程,教程,建站0
 q, U6 Z- {- ^&amp; K5 m&amp; ?$ A
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在网络安全防护中，<em class="related_suggestion_highlight">防火墙</em>是首选的安全设备
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://download.csdn.net/download/binbin0303/997791" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://download.csdn.net/download/binbin0303/997791,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://download.csdn.net/download/binbin0303/997791,-&quot;}" target="_blank" title="http隧道 防火墙穿透">http隧道 <em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em></a>
              <p>
                http隧道 <em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em> http隧道 <em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em> http隧道 <em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em> http隧道 <em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em>
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/sch0120/article/details/47324973" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sch0120/article/details/47324973,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sch0120/article/details/47324973,-&quot;}" target="_blank" title="利用外网主机穿透本地网络防火墙">利用外网主机<em class="related_suggestion_highlight">穿透</em>本地网络<em class="related_suggestion_highlight">防火墙</em></a>
              <p>
                这篇文章主要记录了一种<em class="related_suggestion_highlight">穿透</em>本地<em class="related_suggestion_highlight">防火墙</em>的方法，即反向连接。笔者将一边学习实践，一边写下这篇文章，过程可能不是最简洁的，只为自己和后人留下参考而已。


笔者需要达到的目的：
笔者使用的主机A，在局域网A内，笔者没有局域网A的管理权限，并且局域网A有<em class="related_suggestion_highlight">防火墙</em>，屏蔽了mail.163.com网站；通过笔者自己家中的一台主机（记作主机B），实现主机A<em class="related_suggestion_highlight">穿透</em>局域网A的<em class="related_suggestion_highlight">防火墙</em>通过主机B访问mail.163
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/hugeship2002/article/details/84744989" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hugeship2002/article/details/84744989,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hugeship2002/article/details/84744989,-&quot;}" target="_blank" title="CentOS 7下面OpenVPN和OpenSSL的问题总结">CentOS 7下面<em class="related_suggestion_highlight">OpenVPN</em>和OpenSSL的问题总结</a>
              <p>
                今天遇到个实际的需求，最后决定把某个远程内网的虚拟机上的测试服务器给映射到公网上来，想到多年前就用过<em class="related_suggestion_highlight">OpenVPN</em>来做这个事情，所以翻看了一下http://flashing.iteye.com/blog/575402 以前的文章，按说照做即可，结果很悲桑的发现...things changed~
其实主要原因是Centos 7移除了Openssl的MD5支持（听了一年关于centos7的各种...
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/zougangx/article/details/2919049" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zougangx/article/details/2919049,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zougangx/article/details/2919049,-&quot;}" target="_blank" title="UDP防火墙穿透原理与分析">UDP<em class="related_suggestion_highlight">防火墙</em><em class="related_suggestion_highlight">穿透</em>原理与分析</a>
              <p>
                
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/bless2015/article/details/50639191" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/bless2015/article/details/50639191,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/bless2015/article/details/50639191,-&quot;}" target="_blank" title="基于OpenWrt的PPTP插件开启防火墙转发">基于OpenWrt的PPTP插件开启<em class="related_suggestion_highlight">防火墙</em>转发</a>
              <p>
                新版的系统里没有Luci界面，不能手动开关路由的转发功能。只好在插件安装命令里执行下面两句：
修改默认Chain规则：
iptables -P FORWARD ACCEPT
当<em class="related_suggestion_highlight">防火墙</em>状态为Chain FORWARD(policy DROP)时，会在delegate_forward链里进行拦截。所以还需要对其进行更改。
iptables -R delegate_forward 5 -j AC
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/zuishikonghuan/article/details/48030539" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zuishikonghuan/article/details/48030539,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zuishikonghuan/article/details/48030539,-&quot;}" target="_blank" title="让Socket穿透Windows防火墙">让Socket<em class="related_suggestion_highlight">穿透</em>Windows<em class="related_suggestion_highlight">防火墙</em></a>
              <p>
                创建了ServerSocket以后，并不是没事了，其实上，为了系统安全考虑，创建服务器套接字后，只是创建成功了，但是在数据包入站的时候呢，会被<em class="related_suggestion_highlight">防火墙</em>过滤，因此，我们就收不到来自网络的数据了。
因此，在系统的默认安全级别下，当一个程序第一次创建ServerSocket时，系统会弹出一个这样的对话框：

除非用户同意，点“运行访问”，否则就没办法通信，而你的程序，收不到半点异常
因为<em class="related_suggestion_highlight">防火墙</em>不是
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/qq_27446553/article/details/52567417" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_27446553/article/details/52567417,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/qq_27446553/article/details/52567417,-&quot;}" target="_blank" title="利用 ICMP 隧道穿透防火墙">利用 ICMP 隧道<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em></a>
              <p>
                以前<em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>总是使用 SSH 隧道、DNS 隧道或 HTTP 隧道等等，今天来说一个利用 SNMP 隧道进行<em class="related_suggestion_highlight">穿透</em>工具–icmptunnel。


简介

icmptunnel 可以将 IP 流量封装进 IMCP 的 ping 数据包中，旨在利用 ping <em class="related_suggestion_highlight">穿透</em><em class="related_suggestion_highlight">防火墙</em>的检测，因为通常<em class="related_suggestion_highlight">防火墙</em>是不会屏蔽 ping 数据包的。但是现在市面上已经有了很多类似的工具了，那么 icmptunnel
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/zstack_org/article/details/55094811" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zstack_org/article/details/55094811,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zstack_org/article/details/55094811,-&quot;}" target="_blank" title="如何利用TLS/SSL与防火墙规则保护CoreOS集群">如何利用<em class="related_suggestion_highlight">TLS</em>/SSL与<em class="related_suggestion_highlight">防火墙</em>规则保护CoreOS集群</a>
              <p>
                提供：ZStack云计算 系列教程本教程为CoreOS上手指南系列九篇中的第九篇。内容介绍如果大家需要在控制外网络环境中运行CoreOS集群，例如立足于共享数据中心或者公共互联网，则需要注意一点——etcd利用未加密HTTP请求进行通信。我们可以在集群内对每个节点进行IPTables<em class="related_suggestion_highlight">防火墙</em>配置，从而消除这一风险。但更为彻底的解决手段则是使用加密传输层。幸运的是，etcd支持对等<em class="related_suggestion_highlight">TLS</em>/SSL连接，这
              </p>
						</li>
				
						<li class="news-recommends-ajax">
              
              <a href="https://blog.csdn.net/jsh13417/article/details/18178329" data-track-click="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jsh13417/article/details/18178329,-&quot;}" data-track-view="{&quot;mod&quot;:&quot;popu_712&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jsh13417/article/details/18178329,-&quot;}" target="_blank" title="通过NAT和防火墙特性和TCP穿透的测评（翻译）">通过NAT和<em class="related_suggestion_highlight">防火墙</em>特性和TCP<em class="related_suggestion_highlight">穿透</em>的测评（翻译）</a>
              <p>
                原文：Characterization and Measurement of TCP Traversal through NATs and Firewalls
原作者：Saikat Guha Paul Francis
[摘要]


&nbsp; &nbsp; 近些年，标准化社区已经开发出一些UDP<em class="related_suggestion_highlight">穿透</em>NAT/<em class="related_suggestion_highlight">防火墙</em>的技术（也就是，在NAT之后的主机之间建立UDP流）。然而，由于TCP连接建立的不对称特点，T
              </p>
						</li>
				
			</ul>
	  </div>
</div>

    

</div>


<script type="text/javascript">
  dp.SyntaxHighlighter.HighlightAll('code', true, true);

  $$('#main .blog_content pre[name=code]').each(function(pre, index){ // blog content
    var post_id = 2283631;
    var location = window.location;
    source_url = location.protocol + "//" + location.host + location.pathname + location.search;
    pre.writeAttribute('codeable_id', post_id);
    pre.writeAttribute('codeable_type', "Blog");
    pre.writeAttribute('source_url', source_url);
    pre.writeAttribute('pre_index', index);
    pre.writeAttribute('title', 'openvpn TLS Error 及穿透防火墙');
  });

  fix_image_size($$('div.blog_content img'), 700);

  function processComment() {
    $$('#main .blog_comment > div').each(function(comment){// comment
      var post_id = comment.id.substr(2);
      $$("#"+comment.id+" pre[name=code]").each(function(pre, index){
        var location = window.location;
        source_url = location.protocol + "//" + location.host + location.pathname + location.search;
        source_url += "#" + comment.id;
        pre.writeAttribute('codeable_id', post_id);
        pre.writeAttribute('codeable_type', "BlogComment");
        pre.writeAttribute('source_url', source_url);
        pre.writeAttribute('pre_index', index);
        pre.writeAttribute('title', 'openvpn TLS Error 及穿透防火墙');
      });
    });
  }

  function quote_comment(id) {
    new Ajax.Request('/editor/quote', {
      parameters: {'id':id, 'type':'BlogComment'},
      onSuccess:function(response){editor.bbcode_editor.textarea.insertAfterSelection(response.responseText);
        Element.scrollTo(editor.bbcode_editor.textarea.element);}
    });
  }

  code_favorites_init();
  processComment();
  new WeiboShare({share_buttons: $('share_weibo'), img_scope: $('blog_content')});
</script>




      </div>
      
        <div class="blog-sidebar">
          <div class="blog-sidebar-fixed">
            <div class="news-right-side">

            <div class="newbox recommend"><div class="recommend-right">
  <ul class="recommend-fixed-box">  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/javabaidu/article/details/84770882,-&quot;}"><a href="https://blog.csdn.net/javabaidu/article/details/84770882" target="_blank"><div class="content clearfix"><h5 class="" title="openvpn" tls="" error="" &#21450;&#31359;&#36879;&#38450;&#28779;&#22681;="">openvpn TLS Error 及穿透防火墙</h5><span class="time">2016-03-16</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>0</span></div><div class="right-item-desc">OpenVPN配好了，客户端连接时却报以下错误

[code=&amp;quot;java&amp;quot;]
TLS Error: TLS key negotiation failed to occur within 60 seconds (check your network connectivity)
TLS Error: TLS handshake failed
[/code]

查阅资料，说是网络有可能有问...</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/dog250/article/details/40955387,-&quot;}"><a href="https://blog.csdn.net/dog250/article/details/40955387" target="_blank"><div class="content clearfix"><h5 class="" title="OpenVPN优化之-TLS握手控制通道的建立">OpenVPN优化之-TLS握手控制通道的建立</h5><span class="time">2014-11-09</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>7752</span></div><div class="right-item-desc">关于OpenVPN数据通道的一次优化正在进行中，当我参考了”巨型帧“的概念和思想后，我仔细思考了TCP/IP协议栈的设计和实现，于是我得出了一个可能是错误但是起码在我的场景中很实用的结论：上层协议尽管把数据发出吧，不要管数据的大小，如果真的需要拆分，那就由下层来完成吧。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这个结论的一个反例就是TCP协议的数据分段，它感知了传输链路的MTU，也许在早期的网络中，IP分片重组确实影响了TC</div></a></li><div style="border-bottom: none;" id="_4q36drg9fki" class="right-item ad_item"><iframe id="iframeu3586193_0" name="iframeu3586193_0" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom.html" width="280" height="70" align="center,center" vspace="0" hspace="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" style="border:0;vertical-align:bottom;margin:0;width:280px;height:70px" allowtransparency="true"></iframe></div>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zzzhktk/article/details/18566309,-&quot;}"><a href="https://blog.csdn.net/zzzhktk/article/details/18566309" target="_blank"><div class="content clearfix"><h5 class="" title="http" tunnel="" &#21407;&#29702;="" &#21450;="" &#31359;&#36879;&#38450;&#28779;&#22681;&#26041;&#27861;="">http tunnel 原理 及 穿透防火墙方法</h5><span class="time">2014-01-20</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>2366</span></div><div class="right-item-desc">转自&nbsp;http://blog.csdn.net/blue_dream_/article/details/1905697


&nbsp;http tunnel 原理 及 穿透防火墙方法-1

tunnel&nbsp;很多文章解释为 "隧道", "通道".

这里所谓的 tunnel 是指一种绕过防火墙端口屏蔽的通讯方式, 可以有效地解决防火墙对端口的屏蔽作用.


原理:
防火墙两端的数据包封装</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/fjhyy/article/details/26217513,-&quot;}"><a href="https://blog.csdn.net/fjhyy/article/details/26217513" target="_blank"><div class="content clearfix"><h5 class="" title="关于HTTPS、OpenVPN、TLS、SRTP初始版本及加密算法、密码长度">关于HTTPS、OpenVPN、TLS、SRTP初始版本及加密算法、密码长度</h5><span class="time">2014-05-19</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>4274</span></div><div class="right-item-desc">OpenVPN：
创始者/版权拥有者：
OpenVPN Technologies, Inc.&nbsp; 
&nbsp;
加密方法&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 密钥长度
bf-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1-448 bit
aes-128-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 128bit&nbsp;&nbsp;&nbsp; 
des-ede3-cbc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 56 bit
&nbsp;
HTTPS:


创始者/版权拥有者：
Netscape C</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/Fly_hps/article/details/80632707,-&quot;}"><a href="https://blog.csdn.net/Fly_hps/article/details/80632707" target="_blank"><div class="content clearfix"><h5 class="" title="13、利用" icmp="" &#38567;&#36947;&#31359;&#36879;&#38450;&#28779;&#22681;="">13、利用 ICMP 隧道穿透防火墙</h5><span class="time">2018-06-09</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>240</span></div><div class="right-item-desc">以前穿透防火墙总是使用 SSH 隧道、DNS 隧道或 HTTP 隧道等等，今天来说一个利用 SNMP 隧道进行穿透工具–icmptunnel。简介icmptunnel 可以将 IP 流量封装进 IMCP 的 ping 数据包中，旨在利用 ping 穿透防火墙的检测，因为通常防火墙是不会屏蔽 ping 数据包的。但是现在市面上已经有了很多类似的工具了，那么 icmptunnel 又有哪些优势呢？ic...</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u012375924/article/details/83020993,-&quot;}"><a href="https://blog.csdn.net/u012375924/article/details/83020993" target="_blank"><div class="content clearfix"><h5 class="" title="使用frp做内网穿透">使用frp做内网穿透</h5><span class="time">2018-12-02</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>355</span></div><div class="right-item-desc">简述
之前用过ngrok，将内网的某个http服务暴露到公网。今天试试frp，将内网的服务器的ssh端口暴露到公网，实现外网直接访问内网服务器。
过程和ngrok一样：


内网服务器(192.168.5.211)可以上网
外网有一台服务器，固定ip是1.2.3.4
通过frp将这两台服务器连接起来，1.2.3.4这台服务器会暴露出一个端口8090,用户通过这个端口，即可连接到内网服务器192.1...</div></a></li><div style="border-bottom: none;" id="_lv6h6nofx7a" class="right-item ad_item"><iframe id="iframeu3591305_0" name="iframeu3591305_0" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom(4).html" width="280" height="70" align="center,center" vspace="0" hspace="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" style="border:0;vertical-align:bottom;margin:0;width:280px;height:70px" allowtransparency="true"></iframe></div>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/u013521188/article/details/79359183,-&quot;}"><a href="https://blog.csdn.net/u013521188/article/details/79359183" target="_blank"><div class="content clearfix"><h5 class="" title="Ngrok+OpenVPN实现任意接入内网">Ngrok+OpenVPN实现任意接入内网</h5><span class="time">2018-02-24</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>7032</span></div><div class="right-item-desc">前言

目前来说，我们所在的内网（局域网）有很多，像公司的局域网，工厂的局域网，更为常见的校园网，很多资源的访问需要在内网才可以。但是当我们在校外，出差等，往往访问那些资源会很不方便，这时候经常会想到VPN技术。但是像学生是一般不会开放这种权限或资源，需要自己搭建，前提是有一台位于校园网边界的服务器，这个条件更难获取，所以这里我们采用Ngrok+OpenVPN的方式，借助任意一台内网的电脑，实现外...</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/baidu_32874703/article/details/85681744,-&quot;}"><a href="https://blog.csdn.net/baidu_32874703/article/details/85681744" target="_blank"><div class="content clearfix"><h5 class="" title="配置OpenLDAP使用TLS通信">配置OpenLDAP使用TLS通信</h5><span class="time">2019-01-03</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>112</span></div><div class="right-item-desc">配置OpenLDAP使用TLS通信
OpenLDAP 和 OpenSSL 简介
OpenLDAP 是最常用的目录服务之一，它是一个由开源社区及志愿者开发和管理的一个开源项目，提供了目录服务的所有功能，包括目录搜索、身份认证、安全通道、过滤器等等。大多数的 Linux 发行版里面都带有 OpenLDAP 的安装包。OpenLDAP 服务默认使用非加密的 TCP/IP 协议来接收服务的请求，并将查询结...</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/hardstone1/article/details/3889831,-&quot;}"><a href="https://blog.csdn.net/hardstone1/article/details/3889831" target="_blank"><div class="content clearfix"><h5 class="" title="armv4l下成功交叉编译OPENVPN">armv4l下成功交叉编译OPENVPN</h5><span class="time">2009-02-14</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>5931</span></div><div class="right-item-desc">网上关于openvpn交叉编译的文章有很多，但大多数在我这个armv4l-unknown-linux-gcc下无法编译通过，搞了半天之后，终于在参考一些文章的基础上完成拉，哈哈。&nbsp;交叉编译LZO-2.0.3./configure --host=armv4l-unknown-linux CC=/opt/host/armv4l/bin/armv4l-unknown-linux-gcc --ta</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/jinchijixiaowei/article/details/21090133,-&quot;}"><a href="https://blog.csdn.net/jinchijixiaowei/article/details/21090133" target="_blank"><div class="content clearfix"><h5 class="" title="穿透防火墙技术">穿透防火墙技术</h5><span class="time">2014-03-12</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>548</span></div><div class="right-item-desc">最近看了几篇关于穿透防火墙技术的论文，发现其中有两篇很值得学习下，一篇是介绍p2技术的，另一篇是基于反向连接 HTTP隧道和DNS共享穿透防火墙技术，对于P2技术不太熟悉，主要小节下后面三中穿透防火墙技术吧&nbsp;电脑,技术,IT,学习,交流,网络安全,QQ,硬件,软件,编程,教程,建站0
 q, U6 Z- {- ^&amp; K5 m&amp; ?$ A
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在网络安全防护中，防火墙是首选的安全设备</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://download.csdn.net/download/binbin0303/997791,-&quot;}"><a href="https://download.csdn.net/download/binbin0303/997791" target="_blank"><div class="content clearfix"><h5 class="" title="http隧道" &#38450;&#28779;&#22681;&#31359;&#36879;="">http隧道 防火墙穿透</h5><span class="time">2009-02-07</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>142</span></div><div class="right-item-desc">http隧道 防火墙穿透 http隧道 防火墙穿透 http隧道 防火墙穿透 http隧道 防火墙穿透</div></a></li><div style="border-bottom: none;" id="_cjuanbu0cja" class="right-item ad_item"><iframe id="iframeu3591311_0" name="iframeu3591311_0" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/icom(5).html" width="280" height="70" align="center,center" vspace="0" hspace="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" style="border:0;vertical-align:bottom;margin:0;width:280px;height:70px" allowtransparency="true"></iframe></div>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/sch0120/article/details/47324973,-&quot;}"><a href="https://blog.csdn.net/sch0120/article/details/47324973" target="_blank"><div class="content clearfix"><h5 class="" title="利用外网主机穿透本地网络防火墙">利用外网主机穿透本地网络防火墙</h5><span class="time">2015-08-07</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>2586</span></div><div class="right-item-desc">这篇文章主要记录了一种穿透本地防火墙的方法，即反向连接。笔者将一边学习实践，一边写下这篇文章，过程可能不是最简洁的，只为自己和后人留下参考而已。


笔者需要达到的目的：
笔者使用的主机A，在局域网A内，笔者没有局域网A的管理权限，并且局域网A有防火墙，屏蔽了mail.163.com网站；通过笔者自己家中的一台主机（记作主机B），实现主机A穿透局域网A的防火墙通过主机B访问mail.163</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zougangx/article/details/2919049,-&quot;}"><a href="https://blog.csdn.net/zougangx/article/details/2919049" target="_blank"><div class="content clearfix"><h5 class="" title="UDP防火墙穿透原理与分析">UDP防火墙穿透原理与分析</h5><span class="time">2008-09-12</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>3570</span></div><div class="right-item-desc">&nbsp;论坛上经常有对P2P原理的讨论，但是讨论归讨论，很少有实质的东西产生（源代码）。呵呵，在这里我就用自己实现的一个源代码来说明UDP穿越NAT的原理。首先先介绍一些基本概念：&nbsp;&nbsp;NAT(Network Address Translators)，网络地址转换：网络地址转换是在IP地址日益缺乏的情况下产生的，它的主要目的就是为了能够地址重用。NAT分为两大类，基本的NAT和NAPT(Network</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/bless2015/article/details/50639191,-&quot;}"><a href="https://blog.csdn.net/bless2015/article/details/50639191" target="_blank"><div class="content clearfix"><h5 class="" title="基于OpenWrt的PPTP插件开启防火墙转发">基于OpenWrt的PPTP插件开启防火墙转发</h5><span class="time">2016-02-05</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>2504</span></div><div class="right-item-desc">新版的系统里没有Luci界面，不能手动开关路由的转发功能。只好在插件安装命令里执行下面两句：
修改默认Chain规则：
iptables -P FORWARD ACCEPT
当防火墙状态为Chain FORWARD(policy DROP)时，会在delegate_forward链里进行拦截。所以还需要对其进行更改。
iptables -R delegate_forward 5 -j AC</div></a></li>  <li class="right-item cebian_item" data-track-click="{&quot;mod&quot;:&quot;popu_725&quot;,&quot;con&quot;:&quot;,https://blog.csdn.net/zuishikonghuan/article/details/48030539,-&quot;}"><a href="https://blog.csdn.net/zuishikonghuan/article/details/48030539" target="_blank"><div class="content clearfix"><h5 class="" title="让Socket穿透Windows防火墙">让Socket穿透Windows防火墙</h5><span class="time">2015-08-28</span><span class="read so_read"> <svg class="icon no-active hover-hide" aria-hidden="true"><use xlink:href="#yuedushu"></use></svg>7775</span></div><div class="right-item-desc">创建了ServerSocket以后，并不是没事了，其实上，为了系统安全考虑，创建服务器套接字后，只是创建成功了，但是在数据包入站的时候呢，会被防火墙过滤，因此，我们就收不到来自网络的数据了。
因此，在系统的默认安全级别下，当一个程序第一次创建ServerSocket时，系统会弹出一个这样的对话框：

除非用户同意，点“运行访问”，否则就没办法通信，而你的程序，收不到半点异常
因为防火墙不是</div></a></li></ul>
</div></div></div>
            <div class="persion_article">

            <div class="right_box footer_box csdn-tracking-statistics" data-mod="popu_475" data-dsm="post">        <div class="contact-box" id="footer-contact-box"><div class="img-box"><a href="https://edu.csdn.net/?utm_source=csdn_footer" target="_blank"><img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/edu-QR.png" alt="CSDN学院" style="padding: 6px;"></a><p class="app-text">CSDN学院</p></div><div class="img-box fr"><img style="padding:6px;" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/job-QR.png" alt="CSDN企业招聘"><p class="app-text">CSDN企业招聘</p></div></div>        <div class="contact-info">        <p><svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.167 2h11.666C14.478 2 15 2.576 15 3.286v9.428c0 .71-.522 1.286-1.167 1.286H2.167C1.522 14 1 13.424 1 12.714V3.286C1 2.576 1.522 2 2.167 2zm-.164 3v1L8 10l6-4V5L8 9 2.003 5z" fill="#5c5c5c" fill-rule="evenodd"></path></svg><a href="mailto:webmaster@csdn.net" target="_blank"><span class="txt">kefu@csdn.net</span></a>        <em class="width126"><svg t="1538013544186" width="17" height="17" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23556" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M902.60033922 650.96445566c-18.0718526-100.84369837-94.08399771-166.87723736-94.08399771-166.87723737 10.87530062-91.53186599-28.94715402-107.78733693-28.94715401-107.78733691C771.20003413 93.08221664 517.34798062 98.02553561 511.98620441 98.16348824 506.65661791 98.02553561 252.75857992 93.08221664 244.43541101 376.29988138c0 0-39.79946279 16.25547094-28.947154 107.78733691 0 0-75.98915247 66.03353901-94.0839977 166.87723737 0 0-9.63372291 170.35365477 86.84146124 20.85850523 0 0 21.70461757 56.79068296 61.50407954 107.78733692 0 0-71.1607951 23.19910867-65.11385185 83.46161052 0 0-2.43717093 67.16015592 151.93232126 62.56172014 0 0 108.5460788-8.0932473 141.10300432-52.14626271H526.33792324c32.57991817 44.05301539 141.10300431 52.1462627 141.10300431 52.14626271 154.3235077 4.59843579 151.95071457-62.56172013 151.95071457-62.56172014 6.00095876-60.26250183-65.11385185-83.46161053-65.11385185-83.46161052 39.77647014-50.99665395 61.4810877-107.78733693 61.4810877-107.78733692 96.45219231 149.49514952 86.84146124-20.85850523 86.84146125-20.85850523" p-id="23557" fill="#5c5c5c"></path></svg><a href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&amp;key=XzgwMDE4MDEwNl80ODc3MzVfODAwMTgwMTA2XzJf" class="qqcustomer_s" target="_blank"><span class="txt">QQ客服</span></a></em></p>        <p><em class="width126"><svg t="1538012951761" width="17" height="17" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23083" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M466.4934485 880.02006511C264.6019863 859.18313878 107.13744214 688.54706608 107.13744214 481.14947309 107.13744214 259.68965394 286.68049114 80.14660493 508.14031029 80.14660493s401.00286817 179.54304901 401.00286814 401.00286816v1.67343191C908.30646249 737.58941724 715.26799489 943.85339507 477.28978337 943.85339507c-31.71423369 0-62.61874229-3.67075386-92.38963569-10.60739903 30.09478346-11.01226158 56.84270313-29.63593923 81.5933008-53.22593095z m-205.13036267-398.87059202a246.77722444 246.77722444 0 0 0 493.5544489 0 30.85052691 30.85052691 0 0 0-61.70105383 0 185.07617062 185.07617062 0 0 1-370.15234125 0 30.85052691 30.85052691 0 0 0-61.70105382 0z" p-id="23084" fill="#5c5c5c"></path></svg><a href="http://bbs.csdn.net/forums/Service" target="_blank"><span class="txt">客服论坛</span></a></em>        <svg t="1538013874294" width="17" height="17" style="" viewBox="0 0 1194 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23784" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M1031.29689505 943.85339507h-863.70679012A71.98456279 71.98456279 0 0 1 95.60554212 871.86883228v-150.85178906c0-28.58329658 16.92325492-54.46750945 43.13135785-65.93861527l227.99160176-99.75813425c10.55341735-4.61543317 18.24580594-14.0082445 20.72896295-25.23643277l23.21211998-105.53417343a71.95757195 71.95757195 0 0 1 70.28414006-56.51881307h236.95255971c33.79252817 0 63.02360485 23.5090192 70.28414004 56.51881307l23.21211997 105.53417343c2.48315701 11.25517912 10.17554562 20.62099961 20.72896296 25.23643277l227.99160177 99.75813425a71.98456279 71.98456279 0 0 1 43.13135783 65.93861527v150.85178906A71.98456279 71.98456279 0 0 1 1031.26990421 943.85339507z m-431.85339506-143.94213475c143.94213474 0 143.94213474-48.34058941 143.94213474-107.96334876s-64.45411922-107.96334877-143.94213474-107.96334877c-79.51500637 0-143.94213474 48.34058941-143.94213475 107.96334877s0 107.96334877 143.94213475 107.96334876zM1103.254467 296.07330247v148.9894213a35.97878598 35.97878598 0 0 1-44.15700966 35.03410667l-143.94213473-33.57660146a36.0057768 36.0057768 0 0 1-27.80056231-35.03410668V296.1002933c-35.97878598-47.98970852-131.95820302-71.98456279-287.91126031-71.98456279S347.53801649 248.11058478 311.53223967 296.1002933v115.385829c0 16.73431906-11.52508749 31.25538946-27.80056233 35.03410668l-143.94213473 33.57660146A35.97878598 35.97878598 0 0 1 95.63253297 445.06272377V296.07330247C162.81272673 152.13116772 330.77670658 80.14660493 599.47049084 80.14660493s436.63077325 71.98456279 503.81096699 215.92669754z" p-id="23785" fill="#5c5c5c"></path></svg>400-660-0108 </p>        <p style="text-align:center">工作时间 8:30-22:00</p>        </div>        <div class="bg-gray">            <div class="feed_copyright">            <p><a class="right-dotte" href="https://www.csdn.net/company/index.html#about" target="_blank">关于我们</a><a href="https://www.csdn.net/company/index.html#recruit" target="_blank" class="right-dotte">招聘</a><a href="https://www.csdn.net/company/index.html#contact" target="_blank" class="right-dotte">广告服务</a>            <a href="https://www.csdn.net/gather/A" target="_blank" class="footer_baidu">            网站地图</a></p>            <p class="fz12_baidu"><a href="https://zn.baidu.com/cse/home/index" target="_blank"><svg width="13" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M8.392 7.013c1.014 1.454 2.753 2.8 2.753 2.8s1.303 1.017.47 2.98c-.833 1.962-3.876.942-3.876.942s-1.122-.36-2.424-.072c-1.303.291-2.426.181-2.426.181s-1.523.037-1.957-1.888c-.434-1.927 1.52-2.982 1.666-3.161.145-.183 1.159-.873 1.81-1.963.653-1.09 2.608-1.962 3.984.181zm1.23 5.706V9.346H8.64v2.534h-.937s-.3-.044-.356-.285V9.33l-.925.015v2.518s.042.627.925.855h2.277zm-3.685.013V7.951l-.896-.014v1.295H3.987s-1.054.086-1.422 1.28c-.129.798.114 1.266.156 1.368.043.099.383.682 1.238.852h1.978zm-2.433-1.45c-.087-.286.013-.613.057-.741.042-.128.228-.427.61-.54h.855v1.948h-.797s-.555-.029-.725-.668zm6.877-8.775c-.143.909-.865 2.108-1.99 1.962-1.121-.144-1.375-1.16-1.267-2.179C7.214 1.458 8.21.18 9.007.364c.796.18 1.52 1.235 1.374 2.143zm-4.09-.345c0 1.197-.68 2.164-1.52 2.164S3.25 3.36 3.25 2.162C3.25.967 3.932 0 4.77 0c.842 0 1.52.967 1.52 2.162zm4.854 2.09c1.34 0 1.701 1.309 1.701 1.743 0 .438.182 2.29-1.485 2.326-1.667.037-1.737-1.126-1.737-1.96 0-.874.179-2.11 1.52-2.11zm-7.93.581c.045.398.253 2.217-1.27 2.544C.427 7.704-.14 5.947.028 5.124c0 0 .18-1.78 1.412-1.89.98-.085 1.7.986 1.774 1.6z" fill="#999" fill-rule="evenodd"></path></svg><em>百度提供站内搜索</em></a>&nbsp;<a href="http://www.miibeian.gov.cn/publish/query/indexFirst.action" target="_blank" class="ml14">京ICP备19004658号</a></p>            <p class="fz12_baidu">©1999-2019 北京创新乐知网络技术有限公司 </p>            </div>        </div>        <div class="allow-info-box">        <p><a href="https://csdnimg.cn/cdn/content-toolbar/csdn-ICP.png" target="_blank">经营性网站备案信息</a>        <em class="width126"><a href="http://www.cyberpolice.cn/" target="_blank"><span>网络110报警服务</span></a></em></p>        <p><a href="http://www.bjjubao.org/" target="_blank"><span>北京互联网违法和不良信息举报中心</span></a></p>        <p><a href="http://www.12377.cn/" target="_blank"><span>中国互联网举报中心</span></a><a href="https://download.csdn.net/index.php/tutelage/" target="_blank"><span style="margin-left:8px">家长监护</span></a><a href="https://blog.csdn.net/blogdevteam/article/details/90369522" target="_blank"><span style="margin-left:8px">版权申诉</span></a></p>        </div>        </div></div>
          </div>
        </div>
            <script>
        setTimeout(function () {
          var naviga_offsetTop = 0;

          function onload_function() {
            naviga_offsetTop = jQuery("#nav_show_top_stop").position().top;
            jQuery(window).bind("scroll", naviga_stay_top);
            jQuery(window).bind("mousewheel", naviga_stay_top);
            jQuery(document).bind("scroll", naviga_stay_top);
            jQuery(document).bind("mousewheel", naviga_stay_top);
          }

          function naviga_stay_top() {

            var scrollTop = jQuery(document).scrollTop();
            if (scrollTop > (naviga_offsetTop + 250)) {
              jQuery("#nav_show_top_stop").css({
                "position": "fixed"
              });
              jQuery("#nav_show_top_stop").css({
                "top": "0px"
              });
            } else {
              jQuery("#nav_show_top_stop").css({
                "position": "fixed"
              });
              jQuery("#nav_show_top_stop").css({
                "top": naviga_offsetTop + 250 - scrollTop + "px"
              });
            }
          }
          jQuery(document).ready(onload_function());
        }, 200);
      </script>
    </div>
          <script>
          setTimeout(function () {
              not_loading = true;
              pageNum = 3;
              oList = jQuery("#album_detail_wrap");
              jQuery(window).scroll(function() {
                  var scrollTop = jQuery(this).scrollTop();
                  var scrollHeight = jQuery(document).height() ;
                  var windowHeight = jQuery(this).height();
                  if (scrollTop + windowHeight >= scrollHeight) {
                      if(not_loading){
                          refreshMore();
                          setTimeout(function(){
                              getMore();
                          },100);
                      }else{
                          jQuery(".dl_more").remove();
                      }
                  }
              });

              function getMore(){
                  not_loading = false;
                  console.log("getMore......");
                  jQuery.ajax({
                      type: 'get',
                      url: "/blog/ajax_get_blog_recommends/2283631",
                      data:{
                          page:pageNum
                      },
                      //async: false,
                      dataType: 'json',
                      success: function (resobj) {
                          var totalNum = resobj.total_pages;
                          if(pageNum <= totalNum && resobj.oHtml != '' ){
                              jQuery(".dl_more").remove();
                              oList.find('ul').append(resobj.oHtml);
                              refreshMore();
                              not_loading = true;
                              pageNum++;
                          }else{
                              not_loading = false;
                              noMore();
                          }
                      },
                      error: function (err) {
                          console.log(err);
                      }
                  });
              }

              function noMore(){
                  jQuery(".dl_more").remove();
                  if(oList.find(".dl_no_more").length ==0){
                      oList.append('<div class="dl_no_more" style="font-size:14px; color:#0F8AC6; text-align:center;padding-top:10px; ">我们是很有底线的</div>');
                  }
              }

              function refreshMore(){
                  if(oList.find(".dl_more").length ==0){
                      oList.append('<div class="dl_more" style="font-size:14px; color:#0F8AC6; text-align:center;padding-top:10px;">上滑加载更多</div>');
                  }
              }
          }, 200);
      </script>
  
    <div id="footer" class="clearfix">
      <!-- <div id="copyright">
        <hr />
        声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。<br />
        &copy; 2003-
        2019 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
      </div> -->
      <div id="ad_pop">
        <div class="J_adv" data-view="true" data-mod="ad_popu_64" data-mtp="62" data-order="21" data-con="ad_content_2070">
          <script id="popuLayer_js_q" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/popuLayer.js.download" defer="" type="text/javascript"></script>
          <!-- 广告位：PC端-iteye博客详情右侧弹窗-300*250 -->
          
          
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  document.write("<img src='https://stat.iteye.com/?url="+ encodeURIComponent(document.location.href) + "&referrer=" + encodeURIComponent(document.referrer) + "&user_id=' width='0' height='0' />");
</script><img src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/saved_resource" width="0" height="0">



   Global site tag (gtag.js) - Google Analytics
  <script async="" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/js"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-127895514-6');
  </script>

  
  
  <link href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/content_toolbar.css" rel="stylesheet">
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/jquery-1.11.1.min.js.download" type="text/javascript"></script>
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/publib_footer-1.0.3.js.download" data-isfootertrack="false" type="text/javascript"></script><link rel="stylesheet" type="text/css" href="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/pub_footer_1.0.3.css">
<script id="csdn-toolbar-id" btnid="header_notice_num" wrapid="note1" count="5" subcount="5" type="text/javascript" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/content_toolbar.js.download"></script><script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/notify.js.download"></script><script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/main.js.download"></script>
<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/tracking-1.0.1.js.download" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/async-1.0.1.js.download"></script>
<script type="text/javascript" charset="utf-8" src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/track.js.download"></script>
<style>
  .userinfo {display: none !important;}
  .persion_article h3{
    background: none !important;
    border-bottom: none!important;
    padding: 0!important;
    margin-bottom: 0!important;
    line-height: 1!important;
  }
  .persion_article .right_box{
    margin-top: 0!important;
  }
  .persion_article .footer_box .feed_new_tit span{
    padding-left: 0!important;
  }
</style>
<script>
(function($){
  var windowHeight = $(window).height(),
      contentHeight = $(".hide-main-content").height()
      windowHeight = windowHeight * 1.2 //获得可视区域高度
      if(contentHeight > windowHeight){
        $(".hide-article-box").show()
        $(".hide-main-content").css({'height': windowHeight,'overflow':'hidden'})
        $(".hide-article-box").find("#btn-readmore").click(function(){
          $(this).parents('.hide-main-content').removeAttr('style')
          $(this).parent().hide()
        })
      }
})(jQuery)
</script>
<script type="text/javascript">var $csdn_iteye_jq = jQuery.noConflict();// 解决jq与prototype.js命名空间冲突的问题</script>
  
  
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/web-storage-cache.min.js.download" type="text/javascript"></script>
  <script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/replace.min.js.download" type="text/javascript"></script>
  


<script>
  var jQuery = jQuery.noConflict();
  setTimeout(function($){
    window.csdn.fixedSidebar({
        targetBox: $('.persion_article'), //判断到达底部的div,公共footer可选 $('.persion_article'),$('.public_pc_right_footer2018')
        mainBox: $("#main"), //侧边栏旁边的主体div,默认 $("main")
        sidebar: $(".blog-sidebar-fixed"), //侧边栏,默认 $("aside")
        direction: 'right', //侧边栏浮动方向,可选'right','left',
        position: 'fixed',//定位方式
        bottom: 0,
        zIndex: 99,
        sidebarRightMargin: 8,//direction为left,侧边栏距离mainbox的右边距
        sidebarLeftMargin: 37,//direction为right,侧边栏距离mainbox的左边距
    })
  },200,jQuery)
  </script>

<script src="./openvpn TLS Error 及穿透防火墙 - - ITeye博客_files/c.js(1).download" async="" defer=""></script></body></html>