(function(){var a=(function(){var c={};var d=[];c.inc=function(f,e){return true};c.register=function(g,e){var i=g.split(".");var h=c;var f=null;while(f=i.shift()){if(i.length){if(h[f]===undefined){h[f]={}}h=h[f]}else{if(h[f]===undefined){try{h[f]=e(c)}catch(j){d.push(j)}}}}};c.regShort=function(e,f){if(c[e]!==undefined){throw"["+e+"] : short : has been register"}c[e]=f};c.IE=/msie/i.test(navigator.userAgent);c.E=function(e){if(typeof e==="string"){return document.getElementById(e)}else{return e}};c.C=function(e){var f;e=e.toUpperCase();if(e=="TEXT"){f=document.createTextNode("")}else{if(e=="BUFFER"){f=document.createDocumentFragment()}else{f=document.createElement(e)}}return f};c.log=function(e){d.push("["+((new Date()).getTime()%100000)+"]: "+e)};c.getErrorLogInformationList=function(e){return d.splice(0,e||d.length)};return c})();$Import=a.inc;a.register("core.arr.isArray",function(c){return function(d){return Object.prototype.toString.call(d)==="[object Array]"}});a.register("core.str.trim",function(c){return function(g){if(typeof g!=="string"){throw"trim need a string as parameter"}var d=g.length;var f=0;var e=/(\u3000|\s|\t|\u00A0)/;while(f<d){if(!e.test(g.charAt(f))){break}f+=1}while(d>f){if(!e.test(g.charAt(d-1))){break}d-=1}return g.slice(f,d)}});a.register("core.json.queryToJson",function(c){return function(f,k){var m=c.core.str.trim(f).split("&");var l={};var e=function(i){if(k){return decodeURIComponent(i)}else{return i}};for(var h=0,j=m.length;h<j;h++){if(m[h]){var g=m[h].split("=");var d=g[0];var n=g[1];if(g.length<2){n=d;d="$nullName"}if(!l[d]){l[d]=e(n)}else{if(c.core.arr.isArray(l[d])!=true){l[d]=[l[d]]}l[d].push(e(n))}}}return l}});a.register("core.dom.isNode",function(c){return function(d){return(d!=undefined)&&Boolean(d.nodeName)&&Boolean(d.nodeType)}});a.register("core.dom.sizzle",function(m){var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,l=0,g=Object.prototype.toString,s=false,k=true;[0,0].sort(function(){k=false;return 0});var d=function(z,e,C,D){C=C||[];e=e||document;var F=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!z||typeof z!=="string"){return C}var A=[],w,H,K,v,y=true,x=d.isXML(e),E=z,G,J,I,B;do{t.exec("");w=t.exec(E);if(w){E=w[3];A.push(w[1]);if(w[2]){v=w[3];break}}}while(w);if(A.length>1&&n.exec(z)){if(A.length===2&&h.relative[A[0]]){H=j(A[0]+A[1],e)}else{H=h.relative[A[0]]?[e]:d(A.shift(),e);while(A.length){z=A.shift();if(h.relative[z]){z+=A.shift()}H=j(z,H)}}}else{if(!D&&A.length>1&&e.nodeType===9&&!x&&h.match.ID.test(A[0])&&!h.match.ID.test(A[A.length-1])){G=d.find(A.shift(),e,x);e=G.expr?d.filter(G.expr,G.set)[0]:G.set[0]}if(e){G=D?{expr:A.pop(),set:c(D)}:d.find(A.pop(),A.length===1&&(A[0]==="~"||A[0]==="+")&&e.parentNode?e.parentNode:e,x);H=G.expr?d.filter(G.expr,G.set):G.set;if(A.length>0){K=c(H)}else{y=false}while(A.length){J=A.pop();I=J;if(!h.relative[J]){J=""}else{I=A.pop()}if(I==null){I=e}h.relative[J](K,I,x)}}else{K=A=[]}}if(!K){K=H}if(!K){d.error(J||z)}if(g.call(K)==="[object Array]"){if(!y){C.push.apply(C,K)}else{if(e&&e.nodeType===1){for(B=0;K[B]!=null;B++){if(K[B]&&(K[B]===true||K[B].nodeType===1&&d.contains(e,K[B]))){C.push(H[B])}}}else{for(B=0;K[B]!=null;B++){if(K[B]&&K[B].nodeType===1){C.push(H[B])}}}}}else{c(K,C)}if(v){d(v,F,C,D);d.uniqueSort(C)}return C};d.uniqueSort=function(v){if(f){s=k;v.sort(f);if(s){for(var e=1;e<v.length;e++){if(v[e]===v[e-1]){v.splice(e--,1)}}}}return v};d.matches=function(e,v){return d(e,null,null,v)};d.find=function(B,e,C){var A;if(!B){return[]}for(var x=0,w=h.order.length;x<w;x++){var z=h.order[x],y;if((y=h.leftMatch[z].exec(B))){var v=y[1];y.splice(1,1);if(v.substr(v.length-1)!=="\\"){y[1]=(y[1]||"").replace(/\\/g,"");A=h.find[z](y,e,C);if(A!=null){B=B.replace(h.match[z],"");break}}}}if(!A){A=e.getElementsByTagName("*")}return{set:A,expr:B}};d.filter=function(F,E,I,y){var w=F,K=[],C=E,A,e,B=E&&E[0]&&d.isXML(E[0]);while(F&&E.length){for(var D in h.filter){if((A=h.leftMatch[D].exec(F))!=null&&A[2]){var v=h.filter[D],J,H,x=A[1];e=false;A.splice(1,1);if(x.substr(x.length-1)==="\\"){continue}if(C===K){K=[]}if(h.preFilter[D]){A=h.preFilter[D](A,C,I,K,y,B);if(!A){e=J=true}else{if(A===true){continue}}}if(A){for(var z=0;(H=C[z])!=null;z++){if(H){J=v(H,A,z,C);var G=y^!!J;if(I&&J!=null){if(G){e=true}else{C[z]=false}}else{if(G){K.push(H);e=true}}}}}if(J!==undefined){if(!I){C=K}F=F.replace(h.match[D],"");if(!e){return[]}break}}}if(F===w){if(e==null){d.error(F)}else{break}}w=F}return C};d.error=function(e){throw"Syntax error, unrecognized expression: "+e};var h={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(A,v){var x=typeof v==="string",z=x&&!/\W/.test(v),B=x&&!z;if(z){v=v.toLowerCase()}for(var w=0,e=A.length,y;w<e;w++){if((y=A[w])){while((y=y.previousSibling)&&y.nodeType!==1){}A[w]=B||y&&y.nodeName.toLowerCase()===v?y||false:y===v}}if(B){d.filter(v,A,true)}},">":function(A,v){var y=typeof v==="string",z,w=0,e=A.length;if(y&&!/\W/.test(v)){v=v.toLowerCase();for(;w<e;w++){z=A[w];if(z){var x=z.parentNode;A[w]=x.nodeName.toLowerCase()===v?x:false}}}else{for(;w<e;w++){z=A[w];if(z){A[w]=y?z.parentNode:z.parentNode===v}}if(y){d.filter(v,A,true)}}},"":function(x,v,z){var w=l++,e=u,y;if(typeof v==="string"&&!/\W/.test(v)){v=v.toLowerCase();y=v;e=r}e("parentNode",v,w,x,y,z)},"~":function(x,v,z){var w=l++,e=u,y;if(typeof v==="string"&&!/\W/.test(v)){v=v.toLowerCase();y=v;e=r}e("previousSibling",v,w,x,y,z)}},find:{ID:function(v,w,x){if(typeof w.getElementById!=="undefined"&&!x){var e=w.getElementById(v[1]);return e?[e]:[]}},NAME:function(w,z){if(typeof z.getElementsByName!=="undefined"){var v=[],y=z.getElementsByName(w[1]);for(var x=0,e=y.length;x<e;x++){if(y[x].getAttribute("name")===w[1]){v.push(y[x])}}return v.length===0?null:v}},TAG:function(e,v){return v.getElementsByTagName(e[1])}},preFilter:{CLASS:function(x,v,w,e,A,B){x=" "+x[1].replace(/\\/g,"")+" ";if(B){return x}for(var y=0,z;(z=v[y])!=null;y++){if(z){if(A^(z.className&&(" "+z.className+" ").replace(/[\t\n]/g," ").indexOf(x)>=0)){if(!w){e.push(z)}}else{if(w){v[y]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(v,e){return v[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var v=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(v[1]+(v[2]||1))-0;e[3]=v[3]-0}e[0]=l++;return e},ATTR:function(y,v,w,e,z,A){var x=y[1].replace(/\\/g,"");if(!A&&h.attrMap[x]){y[1]=h.attrMap[x]}if(y[2]==="~="){y[4]=" "+y[4]+" "}return y},PSEUDO:function(y,v,w,e,z){if(y[1]==="not"){if((t.exec(y[3])||"").length>1||/^\w/.test(y[3])){y[3]=d(y[3],null,null,v)}else{var x=d.filter(y[3],v,w,true^z);if(!w){e.push.apply(e,x)}return false}}else{if(h.match.POS.test(y[0])||h.match.CHILD.test(y[0])){return true}}return y},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(w,v,e){return !!d(e[3],w).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(v,e){return e===0},last:function(w,v,e,x){return v===x.length-1},even:function(v,e){return e%2===0},odd:function(v,e){return e%2===1},lt:function(w,v,e){return v<e[3]-0},gt:function(w,v,e){return v>e[3]-0},nth:function(w,v,e){return e[3]-0===v},eq:function(w,v,e){return e[3]-0===v}},filter:{PSEUDO:function(w,B,A,C){var e=B[1],v=h.filters[e];if(v){return v(w,A,B,C)}else{if(e==="contains"){return(w.textContent||w.innerText||d.getText([w])||"").indexOf(B[3])>=0}else{if(e==="not"){var x=B[3];for(var z=0,y=x.length;z<y;z++){if(x[z]===w){return false}}return true}else{d.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,x){var A=x[1],v=e;switch(A){case"only":case"first":while((v=v.previousSibling)){if(v.nodeType===1){return false}}if(A==="first"){return true}v=e;case"last":while((v=v.nextSibling)){if(v.nodeType===1){return false}}return true;case"nth":var w=x[2],D=x[3];if(w===1&&D===0){return true}var z=x[0],C=e.parentNode;if(C&&(C.sizcache!==z||!e.nodeIndex)){var y=0;for(v=C.firstChild;v;v=v.nextSibling){if(v.nodeType===1){v.nodeIndex=++y}}C.sizcache=z}var B=e.nodeIndex-D;if(w===0){return B===0}else{return(B%w===0&&B/w>=0)}}},ID:function(v,e){return v.nodeType===1&&v.getAttribute("id")===e},TAG:function(v,e){return(e==="*"&&v.nodeType===1)||v.nodeName.toLowerCase()===e},CLASS:function(v,e){return(" "+(v.className||v.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(z,x){var w=x[1],e=h.attrHandle[w]?h.attrHandle[w](z):z[w]!=null?z[w]:z.getAttribute(w),A=e+"",y=x[2],v=x[4];return e==null?y==="!=":y==="="?A===v:y==="*="?A.indexOf(v)>=0:y==="~="?(" "+A+" ").indexOf(v)>=0:!v?A&&e!==false:y==="!="?A!==v:y==="^="?A.indexOf(v)===0:y==="$="?A.substr(A.length-v.length)===v:y==="|="?A===v||A.substr(0,v.length+1)===v+"-":false},POS:function(y,v,w,z){var e=v[2],x=h.setFilters[e];if(x){return x(y,w,v,z)}}}};d.selectors=h;var n=h.match.POS,i=function(v,e){return"\\"+(e-0+1)};for(var q in h.match){h.match[q]=new RegExp(h.match[q].source+(/(?![^\[]*\])(?![^\(]*\))/.source));h.leftMatch[q]=new RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[q].source.replace(/\\(\d+)/g,i))}var c=function(v,e){v=Array.prototype.slice.call(v,0);if(e){e.push.apply(e,v);return e}return v};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(p){c=function(y,x){var v=x||[],w=0;if(g.call(y)==="[object Array]"){Array.prototype.push.apply(v,y)}else{if(typeof y.length==="number"){for(var e=y.length;w<e;w++){v.push(y[w])}}else{for(;y[w];w++){v.push(y[w])}}}return v}}var f;if(document.documentElement.compareDocumentPosition){f=function(v,e){if(!v.compareDocumentPosition||!e.compareDocumentPosition){if(v==e){s=true}return v.compareDocumentPosition?-1:1}var w=v.compareDocumentPosition(e)&4?-1:v===e?0:1;if(w===0){s=true}return w}}else{if("sourceIndex" in document.documentElement){f=function(v,e){if(!v.sourceIndex||!e.sourceIndex){if(v==e){s=true}return v.sourceIndex?-1:1}var w=v.sourceIndex-e.sourceIndex;if(w===0){s=true}return w}}else{if(document.createRange){f=function(x,v){if(!x.ownerDocument||!v.ownerDocument){if(x==v){s=true}return x.ownerDocument?-1:1}var w=x.ownerDocument.createRange(),e=v.ownerDocument.createRange();w.setStart(x,0);w.setEnd(x,0);e.setStart(v,0);e.setEnd(v,0);var y=w.compareBoundaryPoints(Range.START_TO_END,e);if(y===0){s=true}return y}}}}d.getText=function(e){var v="",x;for(var w=0;e[w];w++){x=e[w];if(x.nodeType===3||x.nodeType===4){v+=x.nodeValue}else{if(x.nodeType!==8){v+=d.getText(x.childNodes)}}}return v};(function(){var v=document.createElement("div"),w="script"+(new Date()).getTime();v.innerHTML="<a name='"+w+"'/>";var e=document.documentElement;e.insertBefore(v,e.firstChild);if(document.getElementById(w)){h.find.ID=function(y,z,A){if(typeof z.getElementById!=="undefined"&&!A){var x=z.getElementById(y[1]);return x?x.id===y[1]||typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id").nodeValue===y[1]?[x]:undefined:[]}};h.filter.ID=function(z,x){var y=typeof z.getAttributeNode!=="undefined"&&z.getAttributeNode("id");return z.nodeType===1&&y&&y.nodeValue===x}}e.removeChild(v);e=v=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){h.find.TAG=function(v,z){var y=z.getElementsByTagName(v[1]);if(v[1]==="*"){var x=[];for(var w=0;y[w];w++){if(y[w].nodeType===1){x.push(y[w])}}y=x}return y}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){h.attrHandle.href=function(v){return v.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=d,w=document.createElement("div");w.innerHTML="<p class='TEST'></p>";if(w.querySelectorAll&&w.querySelectorAll(".TEST").length===0){return}d=function(A,z,x,y){z=z||document;if(!y&&z.nodeType===9&&!d.isXML(z)){try{return c(z.querySelectorAll(A),x)}catch(B){}}return e(A,z,x,y)};for(var v in e){d[v]=e[v]}w=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}h.order.splice(1,0,"CLASS");h.find.CLASS=function(v,w,x){if(typeof w.getElementsByClassName!=="undefined"&&!x){return w.getElementsByClassName(v[1])}};e=null})();function r(v,A,z,D,B,C){for(var x=0,w=D.length;x<w;x++){var e=D[x];if(e){e=e[v];var y=false;while(e){if(e.sizcache===z){y=D[e.sizset];break}if(e.nodeType===1&&!C){e.sizcache=z;e.sizset=x}if(e.nodeName.toLowerCase()===A){y=e;break}e=e[v]}D[x]=y}}}function u(v,A,z,D,B,C){for(var x=0,w=D.length;x<w;x++){var e=D[x];if(e){e=e[v];var y=false;while(e){if(e.sizcache===z){y=D[e.sizset];break}if(e.nodeType===1){if(!C){e.sizcache=z;e.sizset=x}if(typeof A!=="string"){if(e===A){y=true;break}}else{if(d.filter(A,[e]).length>0){y=e;break}}}e=e[v]}D[x]=y}}}d.contains=document.compareDocumentPosition?function(v,e){return !!(v.compareDocumentPosition(e)&16)}:function(v,e){return v!==e&&(v.contains?v.contains(e):true)};d.isXML=function(e){var v=(e?e.ownerDocument||e:0).documentElement;return v?v.nodeName!=="HTML":false};var j=function(e,B){var x=[],y="",z,w=B.nodeType?[B]:B;while((z=h.match.PSEUDO.exec(e))){y+=z[0];e=e.replace(h.match.PSEUDO,"")}e=h.relative[e]?e+"*":e;for(var A=0,v=w.length;A<v;A++){d(e,w[A],x)}return d.filter(y,x)};return d});a.register("core.dom.contains",function(c){return function(d,e){if(d===e){return false}else{if(d.compareDocumentPosition){return((d.compareDocumentPosition(e)&16)===16)}else{if(d.contains&&e.nodeType===1){return d.contains(e)}else{while(e=e.parentNode){if(d===e){return true}}}}}return false}});a.register("core.evt.addEvent",function(c){return function(d,g,f){var e=c.E(d);if(e==null){return false}g=g||"click";if((typeof f).toLowerCase()!="function"){return}if(e.addEventListener){e.addEventListener(g,f,false)}else{if(e.attachEvent){e.attachEvent("on"+g,f)}else{e["on"+g]=f}}return true}});a.register("core.evt.removeEvent",function(c){return function(e,g,f,d){var h=c.E(e);if(h==null){return false}if(typeof f!="function"){return false}if(h.removeEventListener){h.removeEventListener(g,f,d)}else{if(h.detachEvent){h.detachEvent("on"+g,f)}else{h["on"+g]=null}}return true}});a.register("core.util.browser",function(j){var c=navigator.userAgent.toLowerCase();var n=window.external||"";var f,g,h,p,i;var d=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(c)){i="windows"}else{if((/macintosh/i).test(c)){i="macintosh"}else{if((/rhino/i).test(c)){i="rhino"}}}if((g=c.match(/applewebkit\/([^\s]*)/))&&g[1]){f="webkit";p=d(g[1])}else{if((g=c.match(/presto\/([\d.]*)/))&&g[1]){f="presto";p=d(g[1])}else{if(g=c.match(/msie\s([^;]*)/)){f="trident";p=1;if((g=c.match(/trident\/([\d.]*)/))&&g[1]){p=d(g[1])}}else{if(/gecko/.test(c)){f="gecko";p=1;if((g=c.match(/rv:([\d.]*)/))&&g[1]){p=d(g[1])}}}}}if(/world/.test(c)){h="world"}else{if(/360se/.test(c)){h="360"}else{if((/maxthon/.test(c))||typeof n.max_version=="number"){h="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(c)){h="tt"}else{if(/se\s([\d.]*)/.test(c)){h="sogou"}}}}}}catch(l){}var k={OS:i,CORE:f,Version:p,EXTRA:(h?h:false),IE:/msie/.test(c),OPERA:/opera/.test(c),MOZ:/gecko/.test(c)&&!/(compatible|webkit)/.test(c),IE5:/msie 5 /.test(c),IE55:/msie 5.5/.test(c),IE6:/msie 6/.test(c),IE7:/msie 7/.test(c),IE8:/msie 8/.test(c),IE9:/msie 9/.test(c),SAFARI:!/chrome\/([\d.]*)/.test(c)&&/\/([\d.]*) safari/.test(c),CHROME:/chrome\/([\d.]*)/.test(c),IPAD:/\(ipad/i.test(c),IPHONE:/\(iphone/i.test(c),ITOUCH:/\(itouch/i.test(c),MOBILE:/mobile/i.test(c)};return k});a.register("core.evt.getEvent",function(c){return function(){if(c.IE){return window.event}else{if(window.event){return window.event}var f=arguments.callee.caller;var d;var g=0;while(f!=null&&g<40){d=f.arguments[0];if(d&&(d.constructor==Event||d.constructor==MouseEvent||d.constructor==KeyboardEvent)){return d}g++;f=f.caller}return d}}});a.register("core.evt.fixEvent",function(c){return function(d){d=d||c.core.evt.getEvent();if(!d.target){d.target=d.srcElement;d.pageX=d.x;d.pageY=d.y}if(typeof d.layerX=="undefined"){d.layerX=d.offsetX}if(typeof d.layerY=="undefined"){d.layerY=d.offsetY}return d}});a.register("core.obj.isEmpty",function(c){return function(g,f){var e=true;for(var d in g){if(f){e=false;break}else{if(g.hasOwnProperty(d)){e=false;break}}}return e}});a.register("core.func.empty",function(){return function(){}});a.register("core.evt.delegatedEvent",function(d){var c=function(h,g){for(var f=0,e=h.length;f<e;f+=1){if(d.core.dom.contains(h[f],g)){return true}}return false};return function(g,j){if(!d.core.dom.isNode(g)){throw"core.evt.delegatedEvent need an Element as first Parameter"}if(!j){j=[]}if(!d.core.arr.isArray(j)){j=[j]}var e={};var i=function(n){var k=d.core.evt.fixEvent(n);var m=k.target;var l=n.type;f(m,l,k)};var f=function(p,n,l){var m=null;var q=function(){var t,r,s;t=p.getAttribute("action-target");if(t){r=d.core.dom.sizzle(t,g);if(r.length){s=l.target=r[0]}}q=d.core.func.empty;return s};var k=function(){var r=q()||p;if(e[n]&&e[n][m]){return e[n][m]({evt:l,el:r,box:g,data:d.core.json.queryToJson(r.getAttribute("action-data")||"")})}else{return true}};if(c(j,p)){return false}else{if(!d.core.dom.contains(g,p)){return false}else{while(p&&p!==g){if(p.nodeType===1){m=p.getAttribute("action-type");if(m&&k()===false){break}}p=p.parentNode}}}};var h={};h.add=function(m,n,l){if(!e[n]){e[n]={};d.core.evt.addEvent(g,n,i)}var k=e[n];k[m]=l};h.remove=function(k,l){if(e[l]){delete e[l][k];if(d.core.obj.isEmpty(e[l])){delete e[l];d.core.evt.removeEvent(g,l,i)}}};h.pushExcept=function(k){j.push(k)};h.removeExcept=function(m){if(!m){j=[]}else{for(var l=0,k=j.length;l<k;l+=1){if(j[l]===m){j.splice(l,1)}}}};h.clearExcept=function(k){j=[]};h.fireAction=function(l,p,k,n){var m="";if(n&&n.actionData){m=n.actionData}if(e[p]&&e[p][l]){e[p][l]({evt:k,el:null,box:g,data:d.core.json.queryToJson(m),fireFrom:"fireAction"})}};h.fireInject=function(n,p,k){var l=n.getAttribute("action-type");var m=n.getAttribute("action-data");if(l&&e[p]&&e[p][l]){e[p][l]({evt:k,el:n,box:g,data:d.core.json.queryToJson(m||""),fireFrom:"fireInject"})}};h.fireDom=function(l,m,k){f(l,m,k||{})};h.destroy=function(){for(var n in e){for(var m in e[n]){delete e[n][m]}delete e[n];d.core.evt.removeEvent(g,n,i)}};return h}});a.register("core.util.easyTemplate",function(d){var c=function(f,h){if(!f){return""}if(f!==c.template){c.template=f;c.aStatement=c.parsing(c.separate(f))}var e=c.aStatement;var g=function(i){if(i){h=i}return arguments.callee};g.toString=function(){return(new Function(e[0],e[1]))(h)};return g};c.separate=function(e){var g=/\\'/g;var f=e.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(j,i,q,p,n,m,l,k){if(i){return"{|}"+(q?"-":"+")+p+"{|}"}if(n){return"\\'"}if(m){return""}if(l){return"'+("+k.replace(g,"'")+")+'"}});return f};c.parsing=function(n){var m,g,j,f,i,h,k,l=["var aRet = [];"];k=n.split(/\{\|\}/);var e=/\s/;while(k.length){j=k.shift();if(!j){continue}i=j.charAt(0);if(i!=="+"&&i!=="-"){j="'"+j+"'";l.push("aRet.push("+j+");");continue}f=j.split(e);switch(f[0]){case"+et":m=f[1];g=f[2];l.push('aRet.push("<!--'+m+' start-->");');break;case"-et":l.push('aRet.push("<!--'+m+' end-->");');break;case"+if":f.splice(0,1);l.push("if"+f.join(" ")+"{");break;case"+elseif":f.splice(0,1);l.push("}else if"+f.join(" ")+"{");break;case"-if":l.push("}");break;case"+else":l.push("}else{");break;case"+list":l.push("if("+f[1]+".constructor === Array){with({i:0,l:"+f[1]+".length,"+f[3]+"_index:0,"+f[3]+":null}){for(i=l;i--;){"+f[3]+"_index=(l-i-1);"+f[3]+"="+f[1]+"["+f[3]+"_index];");break;case"-list":l.push("}}}");break;default:break}}l.push('return aRet.join("");');return[g,l.join("")]};return c});a.register("core.arr.indexOf",function(c){return function(f,g){if(g.indexOf){return g.indexOf(f)}for(var e=0,d=g.length;e<d;e++){if(g[e]===f){return e}}return -1}});a.register("core.arr.inArray",function(c){return function(d,e){return c.core.arr.indexOf(d,e)>-1}});a.register("core.func.getType",function(c){return function(d){var e;return((e=typeof(d))=="object"?d==null&&"null"||Object.prototype.toString.call(d).slice(8,-1):e).toLowerCase()}});a.register("core.dom.builder",function(c){function d(l,h){if(h){return h}var g,j=/\<(\w+)[^>]*\s+node-type\s*=\s*([\'\"])?(\w+)\2.*?>/g;var i={};var k,f,e;while((g=j.exec(l))){f=g[1];k=g[3];e=f+"[node-type="+k+"]";i[k]=i[k]==null?[]:i[k];if(!c.core.arr.inArray(e,i[k])){i[k].push(f+"[node-type="+k+"]")}}return i}return function(i,h){var e=c.core.func.getType(i)=="string";var l=d(e?i:i.innerHTML,h);var f=i;if(e){f=c.C("div");f.innerHTML=i}var m,k,j;j=c.core.dom.sizzle("[node-type]",f);k={};for(m in l){k[m]=c.core.dom.sizzle.matches(l[m].toString(),j)}var g=i;if(e){g=c.C("buffer");while(f.children[0]){g.appendChild(f.children[0])}}return{box:g,list:k}}});a.register("core.dom.insertHTML",function(c){return function(g,f,e){g=c.E(g)||document.body;e=e?e.toLowerCase():"beforeend";if(g.insertAdjacentHTML){switch(e){case"beforebegin":g.insertAdjacentHTML("BeforeBegin",f);return g.previousSibling;case"afterbegin":g.insertAdjacentHTML("AfterBegin",f);return g.firstChild;case"beforeend":g.insertAdjacentHTML("BeforeEnd",f);return g.lastChild;case"afterend":g.insertAdjacentHTML("AfterEnd",f);return g.nextSibling}throw'Illegal insertion point -> "'+e+'"'}else{var d=g.ownerDocument.createRange();var h;switch(e){case"beforebegin":d.setStartBefore(g);h=d.createContextualFragment(f);g.parentNode.insertBefore(h,g);return g.previousSibling;case"afterbegin":if(g.firstChild){d.setStartBefore(g.firstChild);h=d.createContextualFragment(f);g.insertBefore(h,g.firstChild);return g.firstChild}else{g.innerHTML=f;return g.firstChild}break;case"beforeend":if(g.lastChild){d.setStartAfter(g.lastChild);h=d.createContextualFragment(f);g.appendChild(h);return g.lastChild}else{g.innerHTML=f;return g.lastChild}break;case"afterend":d.setStartAfter(g);h=d.createContextualFragment(f);g.parentNode.insertBefore(h,g.nextSibling);return g.nextSibling}throw'Illegal insertion point -> "'+e+'"'}}});a.register("core.dom.removeNode",function(c){return function(d){d=c.E(d)||d;try{d.parentNode.removeChild(d)}catch(f){}}});a.register("core.dom.hasClassName",function(c){return function(e,d){return(new RegExp("\\b"+d+"\\b").test(e.className))}});a.register("core.obj.parseParam",function(c){return function(f,e,d){var g,h={};e=e||{};for(g in f){h[g]=f[g];if(e[g]!=null){if(d){if(f.hasOwnProperty[g]){h[g]=e[g]}}else{h[g]=e[g]}}}return h}});a.register("core.json.jsonToQuery",function(c){var d=function(f,e){f=f==null?"":f;f=c.core.str.trim(f.toString());if(e){return encodeURIComponent(f)}else{return f}};return function(j,g){var l=[];if(typeof j=="object"){for(var f in j){if(f==="$nullName"){l=l.concat(j[f]);continue}if(j[f] instanceof Array){for(var h=0,e=j[f].length;h<e;h++){l.push(f+"="+d(j[f][h],g))}}else{if(typeof j[f]!="function"){l.push(f+"="+d(j[f],g))}}}}if(l.length){return l.join("&")}else{return""}}});a.register("kit.dom.parseDOM",function(c){return function(e){for(var d in e){if(e[d]&&(e[d].length==1)){e[d]=e[d][0]}}return e}});a.register("core.dom.next",function(c){return function(e){var d=e.nextSibling;if(!d){return null}else{if(d.nodeType!==1){d=arguments.callee(d)}}return d}});a.register("kit.dom.firstChild",function(d){var c=d.core.dom.next;return function(e){var f=e.firstChild;if(f&&f.nodeType!=1){f=c(f)}return f}});a.register("kit.dom.domToHtml",function(c){return function(e){var g="";if(c.core.dom.isNode(e)){var d=e.cloneNode(true);var f=c.C("div");f.appendChild(d);g=f.innerHTML}return g}});a.register("core.util.scrollPos",function(c){return function(f){f=f||document;var d=f.documentElement;var e=f.body;return{top:Math.max(window.pageYOffset||0,d.scrollTop,e.scrollTop),left:Math.max(window.pageXOffset||0,d.scrollLeft,e.scrollLeft)}}});a.register("core.dom.position",function(e){var c=function(i){var j,h,g,f,l,k;j=i.getBoundingClientRect();h=e.core.util.scrollPos();g=i.ownerDocument.body;f=i.ownerDocument.documentElement;l=f.clientTop||g.clientTop||0;k=f.clientLeft||g.clientLeft||0;return{l:parseInt(j.left+h.left-k,10)||0,t:parseInt(j.top+h.top-l,10)||0}};var d=function(h,f){var i,g;i=[h.offsetLeft,h.offsetTop];g=h.offsetParent;if(g!==h&&g!==f){while(g){i[0]+=g.offsetLeft;i[1]+=g.offsetTop;g=g.offsetParent}}if(e.core.util.browser.OPERA!=-1||(e.core.util.browser.SAFARI!=-1&&h.style.position=="absolute")){i[0]-=document.body.offsetLeft;i[1]-=document.body.offsetTop}if(h.parentNode){g=h.parentNode}else{g=null}while(g&&!/^body|html$/i.test(g.tagName)&&g!==f){if(g.style.display.search(/^inline|table-row.*$/i)){i[0]-=g.scrollLeft;i[1]-=g.scrollTop}g=g.parentNode}return{l:parseInt(i[0],10),t:parseInt(i[1],10)}};return function(h,f){if(h==document.body){return false}if(h.parentNode==null){return false}if(h.style.display=="none"){return false}var g=e.core.obj.parseParam({parent:null},f);if(h.getBoundingClientRect){if(g.parent){var j=c(h);var i=c(g.parent);return{l:j.l-i.l,t:j.t-i.t}}else{return c(h)}}else{return d(h,g.parent||document.body)}}});a.register("core.util.hideContainer",function(e){var f;var c=function(){if(f){return}f=e.C("div");f.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(f)};var d={appendChild:function(g){if(e.core.dom.isNode(g)){c();f.appendChild(g)}},removeChild:function(g){if(e.core.dom.isNode(g)){f&&f.removeChild(g)}}};return d});a.register("core.dom.getSize",function(d){var c=function(f){if(!d.core.dom.isNode(f)){throw"core.dom.getSize need Element as first parameter"}return{width:f.offsetWidth,height:f.offsetHeight}};var e=function(g){var f=null;if(g.style.display==="none"){g.style.visibility="hidden";g.style.display="";f=c(g);g.style.display="none";g.style.visibility="visible"}else{f=c(g)}return f};return function(g){var f={};if(!g.parentNode){d.core.util.hideContainer.appendChild(g);f=e(g);d.core.util.hideContainer.removeChild(g)}else{f=e(g)}return f}});a.register("core.util.winSize",function(c){return function(e){var d,f;var g;if(e){g=e.document}else{g=document}if(g.compatMode==="CSS1Compat"){d=g.documentElement.clientWidth;f=g.documentElement.clientHeight}else{if(self.innerHeight){if(e){g=e.self}else{g=self}d=g.innerWidth;f=g.innerHeight}else{if(g.documentElement&&g.documentElement.clientHeight){d=g.documentElement.clientWidth;f=g.documentElement.clientHeight}else{if(g.body){d=g.body.clientWidth;f=g.body.clientHeight}}}}return{width:d,height:f}}});a.register("common.extra.pos",function(c){var d=function(h,i){var f=c.core.util.scrollPos(),m=c.core.util.winSize(),k=c.core.dom.position(h),l=c.core.dom.getSize(h),e=c.core.dom.getSize(i),j=e.width,r=e.height;var n=k,q="tl";var g=k.l+j-f.left<m.width;var p=k.t+r-f.top<m.height;if(p){n.t+=l.height}if(!g){n.l-=j-l.width}if(!p){n.t-=r}if(!g&&p){q="tr"}else{if(!g&&!p){q="br"}else{if(g&&!p){q="bl"}}}return{pos:n,arrow:q}};return function(f,e){var g=d(f,e);return g}});a.register("core.util.getUniqueKey",function(e){var c=(new Date()).getTime().toString(),d=1;return function(){return c+(d++)}});a.register("common.login.login",function(e){var d="5srRh3";var g=window.location.protocol=="https:"?"https:":"http:";var i=g+"//service.weibo.com/reg/loginindex.php?regbackurl=http%3A%2F%2Fweibo.com";var h=g+"//widget.weibo.com/public/login_Proxy.html";var c="WEIBO_STK_LOGIN_IFRAME";var f;return function(r){var l={};var n=e.core.obj.parseParam({id:c,callback:null},r);var k=e.E(c),p;var m=function(t){var u=function(w){try{k=document.createElement('<iframe name="'+w+'">')}catch(v){k=document.createElement("iframe")}k.id=w;k.name=w;k.src=h;k.style.display="none";document.body.insertBefore(k,document.body.firstChild)};if(!k){u(t.id)}};var s=function(){m(n)};var j=function(t){if(t){f=t}return f};var q=function(v){if(!p){var t=v.callback||n.callback;e.core.evt.addEvent(k,"load",function(){f=true;t&&t(k)})}p=true;var w={vsrc:"weibo_jssdk_login",appsrc:d,showlogo:0};var y={open:1,frame_name:c};var A="&"+e.core.json.jsonToQuery(w);var z="#"+e.core.json.jsonToQuery(y);var x=i+"&backurl="+encodeURIComponent(h+z)+A+"&rnd="+(+new Date().valueOf());var u=window.open(x,"stk_weibo_login",["modal=1,toolbar=1,status=0,resizable=1,alwaysRaised=1,width=620,height=540,left=",(screen.width-620)/2,",top=",(screen.height-450)/2].join(""));u&&u.focus();if(e.core.util.browser.MOZ){setTimeout(function(){u&&u.focus()},1000)}};s();l.flag=p;l.doLogin=q;l.loginStatus=j;return l}});a.register("kit.extra.merge",function(c){return function(e,d){var g={};for(var f in e){g[f]=e[f]}for(var f in d){g[f]=d[f]}return g}});a.register("common.social.statistical",function(d){var c="//rs.sinajs.cn/tmp.gif?";return function(g){var f={};var e=d.kit.extra.merge({id:"hotlist",refer:document.location.hostname},g);f.request=function(i){i=d.kit.extra.merge(i,e);var j="";for(var h in i){j+=(h+"="+encodeURIComponent(i[h])+"&")}j+="r="+(new Date()).valueOf();var l=new Image();l.src=c+j};return f}});a.register("core.dom.uniqueID",function(c){return function(d){return d&&(d.uniqueID||(d.uniqueID=c.core.util.getUniqueKey()))}});a.register("core.evt.custEvent",function(e){var c="__custEventKey__",f=1,g={},d=function(j,i){var h=(typeof j=="number")?j:j[c];return(h&&g[h])&&{obj:(typeof i=="string"?g[h][i]:g[h]),key:h}};return{define:function(m,k){if(m&&k){var j=(typeof m=="number")?m:m[c]||(m[c]=f++),l=g[j]||(g[j]={});k=[].concat(k);for(var h=0;h<k.length;h++){l[k[h]]||(l[k[h]]=[])}return j}},undefine:function(l,k){if(l){var j=(typeof l=="number")?l:l[c];if(j&&g[j]){if(k){k=[].concat(k);for(var h=0;h<k.length;h++){if(k[h] in g[j]){delete g[j][k[h]]}}}else{delete g[j]}}}},add:function(l,i,h,j){if(l&&typeof i=="string"&&h){var k=d(l,i);if(!k||!k.obj){throw"custEvent ("+i+") is undefined !"}k.obj.push({fn:h,data:j});return k.key}},once:function(l,i,h,j){if(l&&typeof i=="string"&&h){var k=d(l,i);if(!k||!k.obj){throw"custEvent ("+i+") is undefined !"}k.obj.push({fn:h,data:j,once:true});return k.key}},remove:function(n,l,k){if(n){var m=d(n,l),p,h;if(m&&(p=m.obj)){if(e.core.arr.isArray(p)){if(k){var j=0;while(p[j]){if(p[j].fn===k){break}j++}p.splice(j,1)}else{p.splice(0,p.length)}}else{for(var j in p){p[j]=[]}}return m.key}}},fire:function(j,q,n){if(j&&typeof q=="string"){var h=d(j,q),m;if(h&&(m=h.obj)){if(!e.core.arr.isArray(n)){n=n!=undefined?[n]:[]}for(var k=m.length-1;k>-1&&m[k];k--){var r=m[k].fn;var p=m[k].once;if(r&&r.apply){try{r.apply(j,[{type:q,data:m[k].data}].concat(n));if(p){m.splice(k,1)}}catch(l){e.log("[error][custEvent]"+l.message)}}}return h.key}}},destroy:function(){g={};f=1}}});a.register("core.str.encodeHTML",function(c){return function(d){if(typeof d!=="string"){throw"encodeHTML need a string as parameter"}return d.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}});a.register("core.str.decodeHTML",function(c){return function(d){if(typeof d!=="string"){throw"decodeHTML need a string as parameter"}return d.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39/g,"'").replace(/&nbsp;/g,"\u00A0").replace(/&#32/g,"\u0020").replace(/&amp;/g,"&")}});a.register("core.obj.beget",function(d){var c=function(){};return function(e){c.prototype=e;return new c()}});a.register("core.dom.setStyle",function(c){return function(d,e,f){if(c.IE){switch(e){case"opacity":d.style.filter="alpha(opacity="+(f*100)+")";if(!d.currentStyle||!d.currentStyle.hasLayout){d.style.zoom=1}break;case"float":e="styleFloat";default:d.style[e]=f}}else{if(e=="float"){e="cssFloat"}d.style[e]=f}}});a.register("core.dom.insertAfter",function(c){return function(e,f){var d=f.parentNode;if(d.lastChild==f){d.appendChild(e)}else{d.insertBefore(e,f.nextSibling)}}});a.register("core.dom.insertBefore",function(c){return function(e,f){var d=f.parentNode;d.insertBefore(e,f)}});a.register("core.dom.addClassName",function(c){return function(e,d){if(e.nodeType===1){if(!c.core.dom.hasClassName(e,d)){e.className+=(" "+d)}}}});a.register("core.dom.removeClassName",function(c){return function(e,d){if(e.nodeType===1){if(c.core.dom.hasClassName(e,d)){e.className=e.className.replace(new RegExp("\\b"+d+"\\b")," ")}}}});a.register("core.dom.trimNode",function(c){return function(e){var f=e.childNodes;for(var d=0;d<f.length;d++){if(f[d].nodeType==3||f[d].nodeType==8){e.removeChild(f[d])}}}});a.register("core.evt.fireEvent",function(c){return function(e,f){var g=c.E(e);if(c.IE){g.fireEvent("on"+f)}else{var d=document.createEvent("HTMLEvents");d.initEvent(f,true,true);g.dispatchEvent(d)}}});a.register("core.dom.getStyle",function(c){return function(f,h){if(c.IE){switch(h){case"opacity":var j=100;try{j=f.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{j=f.filters("alpha").opacity}catch(i){}}return j/100;case"float":h="styleFloat";default:var g=f.currentStyle?f.currentStyle[h]:null;return(f.style[h]||g)}}else{if(h=="float"){h="cssFloat"}try{var d=document.defaultView.getComputedStyle(f,"")}catch(i){}return f.style[h]||d?d[h]:null}}});a.register("core.dom.setXY",function(c){return function(d,h){var e=c.core.dom.getStyle(d,"position");if(e=="static"){c.core.dom.setStyle(d,"position","relative");e="relative"}var g=c.core.dom.position(d);if(g==false){return}var f={l:parseInt(c.core.dom.getStyle(d,"left"),10),t:parseInt(c.core.dom.getStyle(d,"top"),10)};if(isNaN(f.l)){f.l=(e=="relative")?0:d.offsetLeft}if(isNaN(f.t)){f.t=(e=="relative")?0:d.offsetTop}if(h.l!=null){d.style.left=h.l-g.l+f.l+"px"}if(h.t!=null){d.style.top=h.t-g.t+f.t+"px"}}});a.register("core.dom.cascadeNode",function(c){return function(f){var e={};var g=f.style.display||"";g=(g==="none"?"":g);var d=[];e.setStyle=function(i,h){c.core.dom.setStyle(f,i,h);if(i==="display"){g=(h==="none"?"":h)}return e};e.insertAfter=function(h){c.core.dom.insertAfter(h,f);return e};e.insertBefore=function(h){c.core.dom.insertBefore(h,f);return e};e.addClassName=function(h){c.core.dom.addClassName(f,h);return e};e.removeClassName=function(h){c.core.dom.removeClassName(f,h);return e};e.trimNode=function(){c.core.dom.trimNode(f);return e};e.removeNode=function(){c.core.dom.removeNode(f);return e};e.on=function(k,l){for(var j=0,h=d.length;j<h;j+=1){if(d[j]["fn"]===l&&d[j]["type"]===k){return e}}d.push({fn:l,type:k});c.core.evt.addEvent(f,k,l);return e};e.unon=function(k,l){for(var j=0,h=d.length;j<h;j+=1){if(d[j]["fn"]===l&&d[j]["type"]===k){c.core.evt.removeEvent(f,l,k);d.splice(j,1);break}}return e};e.fire=function(h){c.core.evt.fireEvent(h,f);return e};e.appendChild=function(h){f.appendChild(h);return e};e.removeChild=function(h){f.removeChild(h);return e};e.toggle=function(){if(f.style.display==="none"){f.style.display=g}else{f.style.display="none"}return e};e.show=function(){if(f.style.display==="none"){if(g==="none"){f.style.display=""}else{f.style.display=g}}return e};e.hidd=function(){if(f.style.display!=="none"){f.style.display="none"}return e};e.hide=e.hidd;e.scrollTo=function(h,i){if(h==="left"){f.scrollLeft=i}if(h==="top"){f.scrollTop=i}return e};e.replaceChild=function(h,i){f.replaceChild(h,i);return e};e.position=function(h){if(h!==undefined){c.core.dom.setXY(f,h)}return c.core.dom.position(f)};e.setPosition=function(h){if(h!==undefined){c.core.dom.setXY(f,h)}return e};e.getPosition=function(h){return c.core.dom.position(f)};e.html=function(h){if(h!==undefined){f.innerHTML=h}return f.innerHTML};e.setHTML=function(h){if(h!==undefined){f.innerHTML=h}return e};e.getHTML=function(){return f.innerHTML};e.text=function(h){if(h!==undefined){f.innerHTML=c.core.str.encodeHTML(h)}return c.core.str.decodeHTML(f.innerHTML)};e.ttext=e.text;e.setText=function(h){if(h!==undefined){f.innerHTML=c.core.str.encodeHTML(h)}return e};e.getText=function(){return c.core.str.decodeHTML(f.innerHTML)};e.get=function(h){if(h==="node"){return f}return c.core.dom.getStyle(f,h)};e.getStyle=function(h){return c.core.dom.getStyle(f,h)};e.getOriginNode=function(){return f};e.destroy=function(){for(var j=0,h=d;j<h;j+=1){c.core.evt.removeEvent(f,d[j]["fn"],d[j]["type"])}g=null;d=null;f=null};return e}});a.register("module.layer",function(d){var e=function(g){var f={};if(g.style.display=="none"){g.style.visibility="hidden";g.style.display="";f.w=g.offsetWidth;f.h=g.offsetHeight;g.style.display="none";g.style.visibility="visible"}else{f.w=g.offsetWidth;f.h=g.offsetHeight}return f};var c=function(i,h){h=h||"topleft";var g=null;if(i.style.display=="none"){i.style.visibility="hidden";i.style.display="";g=d.core.dom.position(i);i.style.display="none";i.style.visibility="visible"}else{g=d.core.dom.position(i)}if(h!=="topleft"){var f=e(i);if(h==="topright"){g.l=g.l+f.w}else{if(h==="bottomleft"){g.t=g.t+f.h}else{if(h==="bottomright"){g.l=g.l+f.w;g.t=g.t+f.h}}}}return g};return function(j){var m=d.core.dom.builder(j);var i=m.list.outer[0],g=m.list.inner[0];var l=d.core.dom.uniqueID(i);var k={};var f=d.core.evt.custEvent.define(k,"show");d.core.evt.custEvent.define(f,"hide");var h=null;k.show=function(){i.style.display="";d.core.evt.custEvent.fire(f,"show");return k};k.hide=function(){i.style.display="none";window.setTimeout(function(){d.core.evt.custEvent.fire(f,"hide")},0);return k};k.getPosition=function(n){return c(i,n)};k.getSize=function(n){if(n||!h){h=e.apply(k,[i])}return h};k.html=function(n){if(n!==undefined){g.innerHTML=n}return g.innerHTML};k.text=function(n){if(text!==undefined){g.innerHTML=d.core.str.encodeHTML(n)}return d.core.str.decodeHTML(g.innerHTML)};k.appendChild=function(n){g.appendChild(n);return k};k.getUniqueID=function(){return l};k.getOuter=function(){return i};k.getInner=function(){return g};k.getParentNode=function(){return i.parentNode};k.getDomList=function(){return m.list};k.getDomListByKey=function(n){return m.list[n]};k.getDom=function(p,n){if(!m.list[p]){return false}return m.list[p][n||0]};k.getCascadeDom=function(p,n){if(!m.list[p]){return false}return d.core.dom.cascadeNode(m.list[p][n||0])};return k}});a.register("ui.tip",function(d){var c='<div style="position:absolute; width:200px; display:none;" class="tips WB_tips_yls" node-type="outer" ><span class="WB_tipS_err"></span><span class="WB_sp_txt" node-type="inner"></span><span class="arr" node-type="arrow"></span><a class="close" node-type="close" href="javascript:void(0)">×</a></div>';return function(f,r){var m=d.core.obj.parseParam({template:c},r);var j,i,l,k,q,t,e;var p=function(u){i.style.top=u.t+"px";i.style.left=u.l+"px";return k};var n=function(){var u=d.core.util.winSize();var v=j.getSize(true);i.style.top=d.core.util.scrollPos()["top"]+(u.height-v.h)/2+"px";i.style.left=(u.width-v.w)/2+"px";return k};var g=function(u){if(typeof u==="string"){l.innerHTML=u}else{l.appendChild(u)}return k};var h=function(u,v){q.className=u};var s=function(){j=d.module.layer(m.template);i=j.getOuter();l=j.getDom("inner");q=j.getDom("arrow");t=j.getDom("close");t&&d.core.evt.addEvent(t,"click",j.hide);j.hide();k=j;f&&g(f);document.body.appendChild(i)};s();k.setPosition=p;k.setMiddle=n;k.setContent=g;k.setArrow=h;return k}});a.register("core.str.parseURL",function(c){return function(f){var e=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var k=["url","scheme","slash","host","port","path","query","hash"];var h=e.exec(f);var j={};for(var g=0,d=k.length;g<d;g+=1){j[k[g]]=h[g]||""}return j}});a.register("core.util.URL",function(c){return function(h,e){var g=c.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},e||{});var f={};var j=c.core.str.parseURL(h);var d=c.core.json.queryToJson(j.query);var i=c.core.json.queryToJson(j.hash);f.setParam=function(k,l){d[k]=l;return this};f.getParam=function(k){return d[k]};f.setParams=function(l){for(var k in l){f.setParam(k,l[k])}return this};f.setHash=function(k,l){i[k]=l;return this};f.getHash=function(k){return i[k]};f.valueOf=f.toString=function(){var k=[];var l=c.core.json.jsonToQuery(d,g.isEncodeQuery);var m=c.core.json.jsonToQuery(i,g.isEncodeQuery);if(j.scheme!=""){k.push(j.scheme+":");k.push(j.slash)}if(j.host!=""){k.push(j.host);if(j.port!=""){k.push(":");k.push(j.port)}}k.push("/");k.push(j.path);if(l!=""){k.push("?"+l)}if(m!=""){k.push("#"+m)}return k.join("")};return f}});a.register("core.io.scriptLoader",function(d){var e={};var c={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:d.core.func.empty,onTimeout:null,isEncode:false,uniqueID:null};return function(j){var h,f;var g=d.core.obj.parseParam(c,j);if(g.url==""){throw"scriptLoader: url is null"}var i=g.uniqueID||d.core.util.getUniqueKey();h=e[i];if(h!=null&&d.IE!=true){d.core.dom.removeNode(h);h=null}if(h==null){h=e[i]=d.C("script")}h.charset=g.charset;h.id="scriptRequest_script_"+i;h.type="text/javascript";if(g.onComplete!=null){if(d.IE){h.onreadystatechange=function(){if(h.readyState.toLowerCase()=="loaded"||h.readyState.toLowerCase()=="complete"){try{clearTimeout(f);document.getElementsByTagName("head")[0].removeChild(h);h.onreadystatechange=null}catch(k){}g.onComplete()}}}else{h.onload=function(){try{clearTimeout(f);d.core.dom.removeNode(h)}catch(k){}g.onComplete()}}}h.src=a.core.util.URL(g.url,{isEncodeQuery:g.isEncode}).setParams(g.args);document.getElementsByTagName("head")[0].appendChild(h);if(g.timeout>0&&g.onTimeout!=null){f=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(h)}catch(k){}g.onTimeout()},g.timeout)}return h}});a.register("core.io.jsonp",function(c){return function(h){var f=c.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},h);var i=-1;var g=f.responseName||("STK_"+c.core.util.getUniqueKey());f.args[f.varkey]=g;var d=f.onComplete;var e=f.onTimeout;window[g]=function(j){if(i!=2&&d!=null){i=1;d(j)}};f.onComplete=null;f.onTimeout=function(){if(i!=1&&e!=null){i=2;e()}};return c.core.io.scriptLoader(f)}});a.register("comp.button.like.io",function(g){var f={};var e="5srRh3";var d="//widget.weibo.com/";var c={list:"like/display.php",like:"like/aj_like.php",unlike:"like/aj_unlike.php"};var h=function(k,j,i){j.app_src=j.app_src||e;g.core.io.jsonp({url:d+c[k],args:j,onComplete:function(l){i&&i(l)},onTimeout:function(l){i&&i(l)}})};f.jsonp=h;return f});a.register("common.extra.cache",function(d){var c=300000;return function(f){var g={};var e={data:[],getCache:function(k){var i=this.data[k],j="";if(i){var h=new Date();if(h-i.date<c){j=i.html}else{delete this.data[k]}}return j},setCache:function(i,h){this.data[i]={date:new Date(),html:h}},rmCache:function(h){delete this.data[h]}};g=e;return g}});a.register("template.button.like",function(d){var i={};var j='<#et temp config><div class="WB_widget WB_praise" node-type="outer"><div class="praise_btn_line" node-type="inner"><a node-type="likeBtn" action-type="like" action-data="type=${(config.data.is_like) ? \'unlike\' : \'like\'}" href="javascript:;" class="praise_btn ${(config.data.is_like) ? "status_praised" : "status_origin"} ${(config.skin == "silver") ? "version_silver" : ""}"><cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">${(config.data.is_like) ? "#L{已赞}" : "#L{赞}"}</cite></cite></a><#if (config.type == "number") ><cite class="praise_data"><a class="data_link" href="javascript:;" node-type="count">${config.data.count}</a><cite class="data_arrow"></cite></cite></#if><#if (config.type.indexOf("text") != -1 || config.type.indexOf("full") != -1) ><cite class="praise_intro" node-type="text">${config.data.text || ""}</cite></#if><#if (config.type.indexOf("face") != -1 || config.type.indexOf("full") != -1) ><div class="related_list_container" node-type="face">${config.data.face || ""}</div></#if></div></div></#et>';var h={like:'<cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">#L{赞}</cite></cite>',loading:'<cite class="praise_btn_inner"><u class="WB_ico_loading"></u><cite class="praise_text">#L{赞}</cite></cite>',loadingCancel:'<cite class="praise_btn_inner"><u class="WB_ico_loading"></u><cite class="praise_text">#L{取消}</cite></cite>',cancel:'<cite class="praise_btn_inner"><u class="WB_ico_logo"></u><cite class="praise_text">#L{已赞}</cite></cite>'};var f='<#et temp data><div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container"><div class="praise_btn_line" node-type="inner"><cite class="praise_intro" node-type="text">${data.text || ""}</cite><div class="related_list_container" node-type="face">${data.face || ""}</div></div></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div></#et>';var m='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var c='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">加载失败，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a></cite></div>';var k='<div class="WB_widget WB_praise" style="z-index:9999;" node-type="outer"><div class="usercard_layer layer_share" node-type="pos" ><div class="usercard_layer_outside"><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div><a class="layer_close_btn" href="javascript:;" node-type="close" ></a></div><div class="layer_arrow_inside_a" node-type="arrowsIn"></div></div><div class="layer_arrow_outside_a" node-type="arrowsOut"></div></div></div>';var e={container:f,loading:m,error:c,publish:k};var l='<#et temp user><li class="related_item" tempdata="true"><a class="related_item_a" target="_blank" href="http://weibo.com/${user.uid}${user.is_current ? "/profile" : ""}" title="${user.short_name}" action-type="userclk"><img width="30" height="30" class="related_item_a_img" src="${user.icon}" alt="${user.short_name}" ></a></li></#et>';var g='<#et temp user><cite class="related_user" ><a title="${user.name}" target="_blank" href="http://weibo.com/${user.uid}${user.is_current ? "/profile" : ""}" class="related_name">${user.short_name}</a><#if (user.vip_type == 1) ><u class="WB_approve"></u></#if><#if (user.vip_type == 2) ><u class="WB_approve_co"></u></#if><#if (user.vip_type == 3) ><u class="WB_ico_club"></u></#if></cite></#et>';i.layoutTemplate=j;i.buttonTemplate=h;i.faceTemplate=l;i.singleTextTemp=g;i.layerTemplate=e;return i});a.register("common.like.card",function(h){var j=300,e=300;var m,l,f;var n='<div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div>';var k='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var i='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">#L{加载失败}，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a>#L{MSG}</cite></div>';var p=h.core.dom.sizzle,d=h.core.util.easyTemplate;var c=h.common.extra.cache();var g=function(r){var s=h.core.util.getUniqueKey();for(var q in r){s=q+"_"+encodeURIComponent(r[q])}return s};return function(s,E){var x={},D,F=h.template.button.like.layerTemplate;var y=h.core.obj.parseParam({eventType:"default",arrowPos:"auto",cardTemp:F.container||n,loadTemp:F.loading||k,errorTemp:F.error||i,data:"",args:null},E||{});var A=y.eventType==="default"?true:false;var q=g(y.args);var B=function(I){var H='<cite class="praise_intro" node-type="text">'+(I.text||"")+'</cite><div class="related_list_container" node-type="face">'+(I.face)+"</div>";return H};var r=function(H){h.comp.button.like.io.jsonp("list",H,function(J){if(J.code=="100000"){var K=J.data,I=B(K);c.setCache(q,I);D.setContent(I)}else{D.setContent($T(y.errorTemp,{MSG:J.msg}));c.rmCache(q)}})};var v={showCardMouseover:function(I){var H=s;t();l=setTimeout(function(){var K=c.getCache(q);K||r(y.args);var J=h.common.extra.pos(H,D.getOuter());J.pos.t+=4;D.setPosition(J.pos);D.show()},j)},showCardMouseout:function(H){u()}};var u=function(){l=setTimeout(function(){D.hide()},e)};var t=function(){clearTimeout(l)};var G=function(){if(!D){var I=y.cardTemp,J;D=h.ui.tip(y.loadTemp,{template:I});if(J=y.data){var H=B(J);c.setCache(q,H);D.setContent(H)}}z();w()};var z=function(){if(!h.core.dom.isNode(s)){throw"[common.like.card]: node is not a Node!"}};var w=function(){h.core.evt.addEvent(s,"mouseover",v.showCardMouseover);h.core.evt.addEvent(s,"mouseout",v.showCardMouseout);var H=D.getOuter();h.core.evt.addEvent(H,"mouseover",t);h.core.evt.addEvent(H,"mouseout",u)};var C=function(){h.core.evt.removeEvent(s,"mouseover",v.showCardMouseover);h.core.evt.removeEvent(s,"mouseout",v.showCardMouseout);h.core.evt.removeEvent(tipLayer,"mouseover",t);h.core.evt.removeEvent(tipLayer,"mouseout",u);c.data.length=0;v=null;c=null};G();x=D;return x}});var b={"赞":"讚","已赞":"已讚","重试":"重試","加载失败":"載入失败","赶快成为第一个赞的人吧":"趕快成為第一個讚的人吧"};a.register("core.util.listener",function(c){return(function(){var g={};var d;var h=[];var f;function i(){if(h.length==0){return}clearTimeout(f);var j=h.splice(0,1)[0];try{j.func.apply(j.func,[].concat(j.data))}catch(k){c.log("[error][listener]: One of "+j+"-"+j+" function execute error.")}f=setTimeout(i,25)}var e={conn:function(){var j=window;while(j!=top){j=j.parent;if(j.STK&&j.STK["core"]&&j.STK["core"]["util"]&&j.STK["core"]["util"]["listener"]!=null){d=j}}},register:function(j,l,k){if(d!=null){d.STK["core"]["util"]["listener"].register(j,l,k)}else{g[j]=g[j]||{};g[j][l]=g[j][l]||[];g[j][l].push(k)}},fire:function(l,n,p){if(d!=null){d.listener.fire(l,n,p)}else{var m;var k,j;if(g[l]&&g[l][n]&&g[l][n].length>0){m=g[l][n];m.data_cache=p;for(k=0,j=m.length;k<j;k++){h.push({channel:l,evt:n,func:m[k],data:p})}i()}}},remove:function(l,n,m){if(d!=null){d.STK["core"]["util"]["listener"].remove(l,n,m)}else{if(g[l]){if(g[l][n]){for(var k=0,j=g[l][n].length;k<j;k++){if(g[l][n][k]===m){g[l][n].splice(k,1);break}}}}}},list:function(){return g},cache:function(j,k){if(d!=null){return d.listener.cache(j,k)}else{if(g[j]&&g[j][k]){return g[j][k].data_cache}}}};return e})()});a.register("core.util.language",function(c){return function(d,e){return d.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var g=arguments[1];var f;if(e&&e[g]!==undefined){f=e[g]}else{f=g}return f})}});a.register("core.util.templet",function(c){return function(d,e){return d.replace(/#\{(.+?)\}/ig,function(){var j=arguments[1].replace(/\s/ig,"");var g=arguments[0];var k=j.split("||");for(var h=0,f=k.length;h<f;h+=1){if(/^default:.*$/.test(k[h])){g=k[h].replace(/^default:/,"");break}else{if(e[k[h]]!==undefined){g=e[k[h]];break}}}return g})}});a.register("ex.kit.language",function(c){window.$LANG||(window.$LANG={});return function(e){var d={};e=e||"zh_cn";return function(f,g){var h=h=c.core.util.language(f);if(e==="zh_tw"){h=c.core.util.language(f,b)}h=h.replace(/\\}/ig,"}");g&&(h=c.core.util.templet(h,g));return h}}});a.register("common.util.md5",function(){var j=0;var s="";var f=8;function u(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function i(G,B){G[B>>5]|=128<<((B)%32);G[(((B+64)>>>9)<<4)+14]=B;var F=1732584193;var E=-271733879;var D=-1732584194;var C=271733878;for(var y=0;y<G.length;y+=16){var A=F;var z=E;var w=D;var v=C;F=d(F,E,D,C,G[y+0],7,-680876936);C=d(C,F,E,D,G[y+1],12,-389564586);D=d(D,C,F,E,G[y+2],17,606105819);E=d(E,D,C,F,G[y+3],22,-1044525330);F=d(F,E,D,C,G[y+4],7,-176418897);C=d(C,F,E,D,G[y+5],12,1200080426);D=d(D,C,F,E,G[y+6],17,-1473231341);E=d(E,D,C,F,G[y+7],22,-45705983);F=d(F,E,D,C,G[y+8],7,1770035416);C=d(C,F,E,D,G[y+9],12,-1958414417);D=d(D,C,F,E,G[y+10],17,-42063);E=d(E,D,C,F,G[y+11],22,-1990404162);F=d(F,E,D,C,G[y+12],7,1804603682);C=d(C,F,E,D,G[y+13],12,-40341101);D=d(D,C,F,E,G[y+14],17,-1502002290);E=d(E,D,C,F,G[y+15],22,1236535329);F=h(F,E,D,C,G[y+1],5,-165796510);C=h(C,F,E,D,G[y+6],9,-1069501632);D=h(D,C,F,E,G[y+11],14,643717713);E=h(E,D,C,F,G[y+0],20,-373897302);F=h(F,E,D,C,G[y+5],5,-701558691);C=h(C,F,E,D,G[y+10],9,38016083);D=h(D,C,F,E,G[y+15],14,-660478335);E=h(E,D,C,F,G[y+4],20,-405537848);F=h(F,E,D,C,G[y+9],5,568446438);C=h(C,F,E,D,G[y+14],9,-1019803690);D=h(D,C,F,E,G[y+3],14,-187363961);E=h(E,D,C,F,G[y+8],20,1163531501);F=h(F,E,D,C,G[y+13],5,-1444681467);C=h(C,F,E,D,G[y+2],9,-51403784);D=h(D,C,F,E,G[y+7],14,1735328473);E=h(E,D,C,F,G[y+12],20,-1926607734);F=n(F,E,D,C,G[y+5],4,-378558);C=n(C,F,E,D,G[y+8],11,-2022574463);D=n(D,C,F,E,G[y+11],16,1839030562);E=n(E,D,C,F,G[y+14],23,-35309556);F=n(F,E,D,C,G[y+1],4,-1530992060);C=n(C,F,E,D,G[y+4],11,1272893353);D=n(D,C,F,E,G[y+7],16,-155497632);E=n(E,D,C,F,G[y+10],23,-1094730640);F=n(F,E,D,C,G[y+13],4,681279174);C=n(C,F,E,D,G[y+0],11,-358537222);D=n(D,C,F,E,G[y+3],16,-722521979);E=n(E,D,C,F,G[y+6],23,76029189);F=n(F,E,D,C,G[y+9],4,-640364487);C=n(C,F,E,D,G[y+12],11,-421815835);D=n(D,C,F,E,G[y+15],16,530742520);E=n(E,D,C,F,G[y+2],23,-995338651);F=c(F,E,D,C,G[y+0],6,-198630844);C=c(C,F,E,D,G[y+7],10,1126891415);D=c(D,C,F,E,G[y+14],15,-1416354905);E=c(E,D,C,F,G[y+5],21,-57434055);F=c(F,E,D,C,G[y+12],6,1700485571);C=c(C,F,E,D,G[y+3],10,-1894986606);D=c(D,C,F,E,G[y+10],15,-1051523);E=c(E,D,C,F,G[y+1],21,-2054922799);F=c(F,E,D,C,G[y+8],6,1873313359);C=c(C,F,E,D,G[y+15],10,-30611744);D=c(D,C,F,E,G[y+6],15,-1560198380);E=c(E,D,C,F,G[y+13],21,1309151649);F=c(F,E,D,C,G[y+4],6,-145523070);C=c(C,F,E,D,G[y+11],10,-1120210379);D=c(D,C,F,E,G[y+2],15,718787259);E=c(E,D,C,F,G[y+9],21,-343485551);F=p(F,A);E=p(E,z);D=p(D,w);C=p(C,v)}return Array(F,E,D,C)}function e(B,y,w,v,A,z){return p(r(p(p(y,B),p(v,z)),A),w)}function d(y,w,C,B,v,A,z){return e((w&C)|((~w)&B),y,w,v,A,z)}function h(y,w,C,B,v,A,z){return e((w&B)|(C&(~B)),y,w,v,A,z)}function n(y,w,C,B,v,A,z){return e(w^C^B,y,w,v,A,z)}function c(y,w,C,B,v,A,z){return e(C^(w|(~B)),y,w,v,A,z)}function l(x,A){var z=m(x);if(z.length>16){z=i(z,x.length*f)}var v=Array(16),y=Array(16);for(var w=0;w<16;w++){v[w]=z[w]^909522486;y[w]=z[w]^1549556828}var B=i(v.concat(m(A)),512+A.length*f);return i(y.concat(B),512+128)}function p(v,A){var z=(v&65535)+(A&65535);var w=(v>>16)+(A>>16)+(z>>16);return(w<<16)|(z&65535)}function r(v,w){return(v<<w)|(v>>>(32-w))}function m(y){var x=Array();var v=(1<<f)-1;for(var w=0;w<y.length*f;w+=f){x[w>>5]|=(y.charCodeAt(w/f)&v)<<(w%32)}return x}function t(x){var y="";var v=(1<<f)-1;for(var w=0;w<x.length*32;w+=f){y+=String.fromCharCode((x[w>>5]>>>(w%32))&v)}return y}function k(x){var w=j?"0123456789ABCDEF":"0123456789abcdef";var y="";for(var v=0;v<x.length*4;v++){y+=w.charAt((x[v>>2]>>((v%4)*8+4))&15)+w.charAt((x[v>>2]>>((v%4)*8))&15)}return y}function q(y){var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var A="";for(var w=0;w<y.length*4;w+=3){var z=(((y[w>>2]>>8*(w%4))&255)<<16)|(((y[w+1>>2]>>8*((w+1)%4))&255)<<8)|((y[w+2>>2]>>8*((w+2)%4))&255);for(var v=0;v<4;v++){if(w*8+v*6>y.length*32){A+=s}else{A+=x.charAt((z>>6*(3-v))&63)}}}return A}var g={};g.hex_md5=function(v){return k(i(m(v),v.length*f))};g.b64_md5=function(v){return q(i(m(v),v.length*f))};g.str_md5=function(v){return t(i(m(v),v.length*f))};g.hex_hmac_md5=function(v,w){return k(l(v,w))};g.b64_hmac_md5=function(v,w){return q(l(v,w))};g.str_hmac_md5=function(v,w){return t(l(v,w))};return g});a.register("core.json.jsonToStr",function(g){function h(f){return f<10?"0"+f:f}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+h(this.getUTCMonth()+1)+"-"+h(this.getUTCDate())+"T"+h(this.getUTCHours())+":"+h(this.getUTCMinutes())+":"+h(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()}}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,d,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;function c(f){j.lastIndex=0;return j.test(f)?'"'+f.replace(j,function(n){var p=m[n];return typeof p==="string"?p:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function i(u,r){var p,n,w,f,s=k,q,t=r[u];if(t&&typeof t==="object"&&typeof t.toJSON==="function"){t=t.toJSON(u)}if(typeof l==="function"){t=l.call(r,u,t)}switch(typeof t){case"string":return c(t);case"number":return isFinite(t)?String(t):"null";case"boolean":case"null":return String(t);case"object":if(!t){return"null"}k+=d;q=[];if(Object.prototype.toString.apply(t)==="[object Array]"){f=t.length;for(p=0;p<f;p+=1){q[p]=i(p,t)||"null"}w=q.length===0?"[]":k?"[\n"+k+q.join(",\n"+k)+"\n"+s+"]":"["+q.join(",")+"]";k=s;return w}if(l&&typeof l==="object"){f=l.length;for(p=0;p<f;p+=1){n=l[p];if(typeof n==="string"){w=i(n,t);if(w){q.push(c(n)+(k?": ":":")+w)}}}}else{for(n in t){if(Object.hasOwnProperty.call(t,n)){w=i(n,t);if(w){q.push(c(n)+(k?": ":":")+w)}}}}w=q.length===0?"{}":k?"{\n"+k+q.join(",\n"+k)+"\n"+s+"}":"{"+q.join(",")+"}";k=s;return w}}return function(q,n,p){var f;k="";d="";if(typeof p==="number"){for(f=0;f<p;f+=1){d+=" "}}else{if(typeof p==="string"){d=p}}l=n;if(n&&typeof n!=="function"&&(typeof n!=="object"||typeof n.length!=="number")){throw new Error("JSON.stringify")}return i("",{"":q})}});a.register("common.extra.meta",function(d){var c={og:"property",weibo:"name"};var e=function(f){return f&&(f.getAttribute("property")||f.getAttribute("name")).replace(/:/ig,"___")};return function(f){var h={};var i=function(q){var q=q||c;var m="";for(var p in q){m+="meta["+q[p]+"^="+p+"],"}var n=d.core.dom.sizzle(m);return n};var g=function(m){var m=m||"meta";var n=d.core.dom.sizzle(m);if(n.length>=1){return n[0].getAttribute("content")}else{return null}};var l=function(s){if(s.length==0){return""}var q={};for(var p=0,m=s.length;p<m;p++){var r=s[p];var n=e(r),t=r.getAttribute("content")||"";if(n&&n!=""){q[n]=t}}return q};var k=function(){var p=i();var n=l(p);var m=d.core.json.jsonToStr(n);m=encodeURIComponent(m);return m};var j=function(){var m=k();h.args=m};j();h.getMetaList=i;h.getMetaListBySizzle=g;return h}});a.register("common.like.pubLayer",function(d){var k=window.location.protocol=="https:"?"https:":"http:";var e=k+"//widget.weibo.com/dialog/PublishSimple.php";var h=k+"//widget.weibo.com/public/login_Proxy.html";var i='<div class="WB_widget WB_praise" style="position:absolute;z-index:9999;" node-type="outer"><div class="usercard_layer layer_share" ><div class="usercard_layer_outside" ><div class="usercard_layer_inside"><div class="user_content_container" node-type="inner"></div></div><div node-type="arrow" class="layer_arrow_inside_a"></div></div></div></div>';var g='<div class="blog_loading_container"><u class="WB_ico_loading"></u></div>';var f='<div class="blog_loading_container"><u class="status_icon status_alert"></u><cite class="retry_note">#L{加载失败}，请<a actioin-type="retry" href="javascript:;" class="loading_retry_link">重试</a>#L{MSG}</cite></div>';var j=d.core.dom.sizzle,c=d.core.util.easyTemplate;return function(v,F){var q={},u,s,y,m,E,D,A,p=0,n=v.likeBtn,B=d.template.button.like.layerTemplate;var t=d.core.obj.parseParam({arrowPos:"auto",cardTemp:B.publish||i,loadTemp:B.loading||g,errorTemp:B.error||f},{});var C=[];C.push("wsrc=app_like");C.push("app_src="+F.app_src);C.push("content="+encodeURIComponent(F.content));C.push("source_link="+encodeURIComponent(F.source_url));C.push("image_url="+encodeURIComponent(F.image_url));var x=e+"?"+C.join("&");var w=function(){if(!y){z("LIKE_STATUS_IFRAME")}if(!u){u=d.ui.tip(t.loadTemp,{template:t.cardTemp});m=u.getDom("pos");E=u.getInner();D=u.getDom("arrowsIn");A=u.getDom("arrowsOut");E.style.height="140px";if(!F.image_url){E.style.height="116px"}u.setArrow=function(G){if(G=="tl"){G="a"}else{if(G=="tr"){G="b"}else{if(G=="bl"){G="c"}else{if(G=="br"){G="d"}}}}D.className="layer_arrow_inside_"+G;A.className="layer_arrow_outside_"+G};u.showPub=function(){u.show();var G=d.common.extra.pos(n,m);u.setArrow(G.arrow);G.pos.t+=4;if(G.arrow=="bl"||G.arrow=="br"){G.pos.t-=8}m.style.top=G.pos.t+"px";m.style.left=G.pos.l+"px"};l();u.showPub()}};var r=function(){try{E.removeChild(d.kit.dom.firstChild(E));s.style.display="block"}catch(G){throw G}};var l=function(){s=d.C("iframe");s.src=x;s.frameBorder=0;s.scrolling="no";s.allowTransparency="true";s.style.width="100%";s.style.height="140px";if(!F.image_url){s.style.height="116px"}s.style.display="none";d.core.evt.addEvent(s,"load",r);E.innerHTML=t.loadTemp;E.appendChild(s)};var z=function(H){try{y=document.createElement('<iframe name="'+H+'">')}catch(G){y=document.createElement("iframe")}y.id=H;y.name=H;y.src=h+"#frame_name="+H+"&handler=parent";y.style.display="none";d.core.evt.addEvent(y,"load",function(){if(p<1){p++;return}setTimeout(function(){u&&u.hide()},1000)});document.body.insertBefore(y,document.body.firstChild)};w();q=u;return q}});a.register("comp.button.like.delegate",function(e){var c=e.core.util.easyTemplate,d=e.core.evt.addEvent,h=e.core.evt.removeEvent,j=e.core.dom.sizzle,l=e.core.dom.hasClassName,k=e.template.button.like,f=e.comp.button.like.io,i=e.common.util.md5;var g=e.common.social.statistical({id:"like"});WB2.listener=WB2.listener||e.core.util.listener;return function(F,y,z){var x={};var D,v=y.uids,p=[],K=false;var O=z.language||"zh_cn",C=e.ex.kit.language(O);var n=e.common.login.login();var q=F.faceBox;var L=F.textBox;var m=F.likeBtn;var N=i.hex_md5(z.url||document.location.href);var B=e.common.extra.meta();var u;var s={canUse:function(){if(!v||v.length==0){return false}else{return true}},exist:function(Q){if(!s.canUse()){return}var P=e.core.arr.indexOf(Q,v);return P!=-1},remove:function(Q){if(!s.canUse()){return}var P=e.core.arr.indexOf(Q,v);if(P!=-1){v.splice(P,1)}},add:function(P){if(!s.canUse()){return}v.push(P)},length:function(){return v.length}};var I={init:function(S){var T=S.recommend_user||[];for(var R=0,Q=T.length;R<Q;R++){var P=T[R];var U=c(k.singleTextTemp,P);U&&p.push(U)}},addFirst:function(P){p.unshift(P);this.refreshHtml()},delFirst:function(){p.shift();this.refreshHtml()},size:function(){return p.length},refreshHtml:function(){var Q="",P=p.length;P=P>2?2:P;for(var R=0;R<P;R++){Q+=p[R];if(R!=P-1){Q+='<cite class="name_split" >, </cite>'}}this.html=Q;return Q},getHmtl:function(){return this.html},removeTag:function(T){var Q=j(".related_user",T);for(var R=0,P=Q.length;R<P;R++){e.core.dom.removeNode(Q[R])}var S=j(".name_split",T);for(var R=0,P=S.length;R<P;R++){e.core.dom.removeNode(S[R])}}};var A=function(Q){var P=F.count||j("[node-type=count]",L)[0];if(P){var R=P.innerHTML;if(!/\d+/.test(R)){return}var S=Q=="add"?parseInt(R)+1:parseInt(R)-1;S=S<0?0:S;P.innerHTML=S}};var H=function(R){A("add");if(s.exist(R.uid)){return}else{s.add(R.uid)}R.is_current=true;if(q){var S=c(k.faceTemplate,R);var P=j("li",q)[0];if(P){e.core.dom.insertHTML(P,S,"beforebegin")}else{q.innerHTML='<ul class="related_list">'+S+"</ul>"}}if(L){var T=c(k.singleTextTemp,R);I.addFirst(T);I.removeTag(L);var Q=j(".praise_display",L)[0];if(Q){e.core.dom.insertHTML(Q,I.getHmtl(),"beforebegin")}else{L.innerHTML=I.getHmtl()+C("等1人#L{赞 }")}}};var E=function(Q){A("minus");s.remove(Q.uid);if(q){var R=j("li",q)[0];e.core.dom.removeNode(R)}if(L){I.delFirst();I.removeTag(L);if(I.size()==0){L.innerHTML=C("#L{赶快成为第一个赞的人吧}")}else{var P=j(".praise_display",L)[0];e.core.dom.insertHTML(P,I.getHmtl(),"beforebegin")}}};var M=function(P,Q){if(P=="like"){m.setAttribute("action-data","type=unlike");m.className="praise_btn status_praised";m.innerHTML=C(k.buttonTemplate.cancel);H(Q.userinfo);if(Q.publishinfo){if(!u){u=e.common.like.pubLayer(F,Q.publishinfo)}else{u.showPub()}}}else{m.setAttribute("action-data","type=like");m.className=z.skin=="red"?"praise_btn status_origin":"praise_btn status_origin version_silver";m.innerHTML=C(k.buttonTemplate.like);E(Q.userinfo);u&&u.hide()}};var t={like:function(R){if(K){return}var Q=R.data,P=Q.type;if(!n.loginStatus()){n.doLogin({callback:function(S){K=false;t.like(R)}});return}K=true;t.loading(m,P);f.jsonp(P,{url:encodeURIComponent(z.url),meta:B.args,app_src:z.appkey},function(S){t.likeCbk(S,P)})},loading:function(Q,R){Q.className="praise_btn status_ing";if(z.skin!="red"){Q.className+=" version_silver"}var P=k.buttonTemplate.loading;if(R!="like"){P=k.buttonTemplate.loadingCancel}Q.innerHTML=C(P)},likeCbk:function(P,Q){K=false;if(P.code=="100002"){n.loginStatus(false);if(!n.loginStatus()){n.doLogin({callback:function(R){K=false;t.like(o)}});return}}if(P.code=="100000"){WB2.listener.fire("like_channel_"+N,"like",[Q,P.data])}else{}},hover:function(S){var Q=S.el;var R=l(Q,"status_praised");if(R){var P=j(".praise_text",Q)[0];P&&(P.innerHTML="取消")}},leave:function(S){var Q=S.el;var R=l(Q,"status_praised");if(R){var P=j(".praise_text",Q)[0];P&&(P.innerHTML=C("#L{已赞}"))}}};var w=function(){g.request({action:"userclk"})};var r=function(){D=e.core.evt.delegatedEvent(F.outer);D.add("like","click",t.like);D.add("like","mouseover",t.hover);D.add("like","mouseout",t.leave);D.add("userclk","click",w);WB2.listener.register("like_channel_"+N,"like",M)};var G=function(){r();I.init(y)};G();var J=function(){D.remove("like","click",t.like);D.remove("like","mouseover",t.hover);D.remove("like","mouseout",t.leave);D.remove("userclk","click",w)};x.destroy=J;return x}});a.register("kit.extra.clone",function(c){function d(j,e){e=e||false;var g;if(j instanceof Array){g=[];var h=j.length;while(h--){if(e){g[h]=d(j[h])}else{g[h]=j[h]}}return g}else{if(j instanceof Object){g={};for(var f in j){if(e){g[f]=d(j[f])}else{g[f]=j[f]}}return g}else{return j}}}return d});a.register("common.iframe",function(c){return function(d){var e={};var g;var f=function(i){var h=c.core.obj.parseParam({id:"",url:"",name:"iframe_widget",root:null,width:"100%",height:"100%"},i);g=document.createElement("iframe");if(h.id){g.id=h.id}g.src=h.url;g.width=h.width;g.height=h.height;g.frameBorder=0;g.scrolling="no";g.marginHeight="0";g.marginwidth="0";g.allowTransparency="true";if(c.core.dom.isNode(h.root)){h.root.innerHTML="";h.root.appendChild(g)}else{throw"conf.root is not an avaliable dom element."}};e.insertIFrame=f;return e}});a.register("widget.button.like",function(f){var c=f.core.util.easyTemplate,e=f.core.evt.addEvent,k=f.core.evt.removeEvent,l=f.core.dom.sizzle,i=f.core.dom.builder,n=f.core.dom.hasClassName,m=f.template.button.like,g=f.comp.button.like.io,d=f.comp.button.like.delegate;var p=window.location.protocol=="https:"?"https:":"http:";var j=p+"//widget.weibo.com/like/mobile.php";var h=f.common.social.statistical({id:"like"});return function(y){var z={};var q,I,D,H,x,s=[],N=false;var B=f.core.obj.parseParam({dom:null,url:document.location.href,type:"full",skin:"red",width:"auto",height:"auto",mobile:"n",appkey:"5srRh3",language:"zh_cn"},y);q=B.dom;if(B.mobile==="y"){var r={url:B.url,style:B.type,skin:B.skin,mobile:B.mobile,app_src:B.appkey,language:B.language,r:(new Date()).valueOf()};var M=f.core.json.jsonToQuery(r);var u=j+"?"+M;var E=B.type=="full"?62:22;var w=f.common.iframe();w.insertIFrame({url:u,root:B.dom,height:E});return}var O=B.language||"zh_cn",G=f.ex.kit.language(O);var F=f.common.extra.meta();var M={style:B.type,url:encodeURIComponent(B.url),meta:F.args,app_src:B.appkey,language:B.language};var J=function(){A(C)};var K=function(){loginFuns=f.common.login.login()};var C=function(P){if(P.code=="100005"){return}var R=P.data;B.data=R;var Q=c(G(m.layoutTemplate),B).toString();var S=i(Q);I=f.kit.dom.parseDOM(S.list);q.innerHTML="";q.appendChild(S.box);t(R);L();K();v();d(I,R,B);loginFuns.loginStatus(R.login);h.request({action:"pv",uid:R.cuid||0,url:encodeURIComponent(document.location.href),type:B.type,mobile:B.mobile})};var v=function(){var P=I.face||(D&&l("div[node-type=face]",D.getOuter())[0]);var Q=I.text||(D&&l("cite[node-type=text]",D.getOuter())[0]);I.faceBox=P;I.textBox=Q};var A=function(P){g.jsonp("list",M,P)};var L=function(){var Q=B.width,P=B.height;if(/^(\d+)$/.test(Q)){I.outer.style.width=parseInt(Q,10)+"px"}if(/^(\d+)$/.test(P)){I.outer.style.height=parseInt(P,10)+"px"}};var t=function(P){if(B.type=="simple"){D=f.common.like.card(I.outer,{args:M,data:P})}};J();return z}});WB2.widget.like=a.widget.button.like})();