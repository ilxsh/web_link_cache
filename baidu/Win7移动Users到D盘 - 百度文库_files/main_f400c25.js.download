define("wkview:widget/common_toc/reader_txt/page_body/main.js",function(e,t,i){function n(e){l(document).scrollTop()>=300&&"fixed"!==l(e).css("position")?l(e).css({position:"fixed",top:"50px"}):l(document).scrollTop()<300&&"absolute"!==l(e).css("position")&&l(e).css({position:"absolute",top:"294px"})}var o=e("wkcommon:widget/ui/lib/BigPipe/BigPipe.js"),d=e("wkview:widget/crmAd/crmAd3.js"),r=e("wkview:widget/fengchao_right/fengchao_right.js"),a=e("wkcommon:widget/lib/tangram/base/base.js"),l=e("wkcommon:widget/ui/lib/jquery/jquery.js"),c=e("wkview:widget/view_recom_thirdad/endPageGoldClueAd/endPageGoldClueAd.js"),s=e("wkview:widget/crmAd/zyAd.js"),g=e("wkcommon:widget/vipNoAdDialog/vipNoAdDialog.js"),m=e("wkview:widget/crm_multi/crm_multi.js"),f=e("wkview:widget/crmAd/crmAd2.js"),w=e("wkview:widget/commerce/fengchao/modelAnimation.js"),h=e("wkview:widget/ad_xpageForm/xpageForm.js"),u=e("wkview:widget/node_modules/@baidu/wenku-model-user/index.js"),p=e("wkcommon:widget/ui/js_core/log/log.js"),v=e("wkview:widget/commerce/fengchao/left.js"),k=e("wkcommon:widget/lib/fis/data/data.js"),A=k.get("WkInfo")||{},b=A&&A.WkAdInfo,_=b.blockStatus,x=function(e){l.extend(!0,this.ops,e),this.bindEvent().run()};x.prototype={constructor:x,ops:{docId:"",docTitle:"",flag:1,needShowAd:1,needShowAd2:1},bindEvent:function(){var e=function(){var e=l(".daily-recom-wrap"),t=l(".reader-container").width();e.css("width",t),900>t?e.addClass("small-wrap"):e.removeClass("small-wrap")};return e(),l(".ggbtm-vip-close").on("click",function(){new g}),a.lang.eventCenter.addEventListener("Reader.zoomChange",e),this},run:function(){var e=this.ops;if(!e.flag)return this;var t=[];t.push({url:"/browse/widget/viewrecom?pagelets[]=view-like-recom&doc_id="+e.docId,id:"view-like-recom"});var i=!1;u.getVipInfo().done(function(e){e&&(e.isClassicVip||e.isJiaoyuVip||e.isVip||e.isWenkuEduVip||e.isWenkuVip)&&(i=!0)});var a=function(){this.next=function(){if(t.length){var a=t.shift();o.fetch(a.url,a.id)}else l.event.trigger("orgRightRecon"),l.event.trigger("rightDocLoadEnd");var c=new m({title:e.docTitle}),u=k.get("WkInfo")||{};if(l("#fc-left")&&!i&&u.DocInfo&&"19"!==u.DocInfo.flag&&l.ajax({url:"//wenku.baidu.com/xpage/form/getform?id=fcpcview",success:function(e){if(0===e.status.code){var t=e.data.form_data.left;Math.floor(100*Math.random())<=t&&v.fetchData().then(function(e){var t=e.ads[0];if(t.title&&t.title.length>22&&(t.title=t.title.substr(0,22)+"..."),t.style.idea3009||t.style.idea2062){if(!window.ecom||!window.ecom.pl3){var i=document.createElement("script");i.innerHTML=e.script,document.body.appendChild(i)}l("#fc-left .content").text(t.title),l("#fc-left #fc-click").attr("href",t.link),l("#fc-left #fc-click").attr("datasign",e.time),t.style&&t.style.idea3009&&t.style.idea3009.image_item&&t.style.idea3009.image_item.length&&l("#fc-left img").attr("src",t.style.idea3009.image_item[0].image_link),t.style&&t.style.idea2062&&t.style.idea2062.pic_url&&l("#fc-left img").attr("src",t.style.idea2062.pic_url),n("#fc-left"),l("#fc-left").show(),l("#fc-left").on("click",".vip",function(){new g}),l("#fc-left").on("click",".close",function(){l("#fc-left").hide()}),p.xsend(1,102036,{index:1}),l("#fc-left").on("click",function(){window.ecom&&window.ecom.ck&&window.ecom.ck.addCkOnUrl&&(t.link=window.ecom.ck.addCkOnUrl(t.link,e.time),l("#fc-left #fc-click").attr("href",t.link))}),l(window).scroll(function(){n("#fc-left")})}})}}}),l("#reader-pageNo-2").length){{new f({ele:l("#wkad21"),pid:21,isVip:i})}l("#html-reader-banner-4").insertAfter("#reader-pageNo-1")}else l("#html-reader-banner-4").remove();var A=Math.random();if(l("#reader-pageNo-3").length?(s.show2To3({el:l("#wkad21-2"),next:function(){c.show2To3(function(){new d({ele:l("#wkad21-2"),pid:5})},A)}}),l("#html-reader-AD-5").insertAfter("#reader-pageNo-2")):l("#html-reader-AD-5").remove(),navigator.userAgent.indexOf("MSIE 6.0")<0&&!i&&0===_?c.showDocBtm(function(){new f({ele:l("#wkgg"),pid:3,isVip:i})},A):l(".ad-vip-close-bottom").remove(),l("#reader-pageNo-4").length?(s.show3To4({el:l("#html-reader-AD-3t4"),next:function(){w.fetchData().then(function(e){e.ads[2].length?window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-3t4",{im_time_sign:e.im_time_sign,ads:e.ads[2]}):s.show3To4Wangmeng()}).fail(function(){s.show3To4Wangmeng()})}}),l("#html-reader-AD-3t4").addClass("hidden-doc-banner").insertAfter("#reader-pageNo-3")):l("#html-reader-AD-3t4").remove(),l("#html-reader-AD-4t5").length>0&&l("#reader-pageNo-5").length?(s.show4To5({el:l("#html-reader-AD-4t5"),next:function(){w.fetchData().then(function(e){e.ads[3].length?window.Apex.plugin["parallax-scrolling-webku"]("#html-reader-AD-4t5",{im_time_sign:e.im_time_sign,ads:e.ads[3]}):c.show4To5(A)}).fail(function(){c.show4To5(A)})}}),l("#html-reader-AD-4t5").addClass("hidden-doc-banner").insertAfter("#reader-pageNo-4")):l("#html-reader-AD-4t5").remove(),l("#reader-pageNo-6").length?(s.show5To6({el:l("#html-reader-AD-5t6"),next:function(){new h({el:"#html-reader-AD-5t6",orgName:e.orgName})}}),l("#html-reader-AD-5t6").addClass("hidden-doc-banner").insertAfter("#reader-pageNo-5")):l("#html-reader-AD-5t6").remove(),e.needShowAd)if(l(".other-like-doc").height()>10){new d({ele:l("#guess-like-doc"),pid:7})}else r.init()}},A=new a;if(o.on("pagerendercomplete",A.next,this),t.length){var b=t.shift();o.fetch(b.url,b.id)}if(e.needShowAd&&!i){s.showFooter({el:l("#ggbtm-ads"),next:function(){new d({ele:l("#ggbtm-ads"),pid:2})}});var x=l("#ggbtm-ads");x&&x.length&&0===x.html().length&&l(".ggbtm-vip-close").remove(),c.endPageGoldClueAd()}else l(".ggbtm-vip-close").remove();return this}},i.exports=x});