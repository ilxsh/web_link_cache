<!DOCTYPE html>
<!-- saved from url=(0041)http://www.matrix67.com/blog/archives/264 -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>位运算简介及实用技巧（二）：进阶篇(1) | Matrix67: The Aha Moments</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://www.matrix67.com/blog/xmlrpc.php">
<script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/jquery-2.1.0.min.js.download"></script>
<script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/old-theme.js.download" type="text/javascript"></script>
<link rel="stylesheet" href="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/old-theme.css" type="text/css" media="all">
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Matrix67: The Aha Moments » Feed" href="http://www.matrix67.com/blog/feed">
<link rel="alternate" type="application/rss+xml" title="Matrix67: The Aha Moments » Comments Feed" href="http://www.matrix67.com/blog/comments/feed">
<link rel="alternate" type="application/rss+xml" title="Matrix67: The Aha Moments » 位运算简介及实用技巧（二）：进阶篇(1) Comments Feed" href="http://www.matrix67.com/blog/archives/264/feed">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.matrix67.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.14"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/wp-emoji-release.min.js.download" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="matrix67-style-css" href="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/style.css" type="text/css" media="all">
<link rel="https://api.w.org/" href="http://www.matrix67.com/blog/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.matrix67.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.matrix67.com/blog/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="位运算简介及实用技巧（一）：基础篇" href="http://www.matrix67.com/blog/archives/263">
<link rel="next" title="位运算简介及实用技巧（三）：进阶篇(2)" href="http://www.matrix67.com/blog/archives/266">
<meta name="generator" content="WordPress 4.6.14">
<link rel="canonical" href="http://www.matrix67.com/blog/archives/264">
<link rel="shortlink" href="http://www.matrix67.com/blog/?p=264">
<link rel="alternate" type="application/json+oembed" href="http://www.matrix67.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.matrix67.com%2Fblog%2Farchives%2F264">
<link rel="alternate" type="text/xml+oembed" href="http://www.matrix67.com/blog/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.matrix67.com%2Fblog%2Farchives%2F264&amp;format=xml">
</head>

<body class="single single-post postid-264 single-format-standard">
<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">
		<div class="site-branding">
			<h1 class="site-title"><a href="http://www.matrix67.com/blog/" rel="home">Matrix67: The Aha Moments</a></h1>
		</div>
		<aside id="search" class="widget_search">
			<form role="search" method="get" class="search-form" action="http://www.matrix67.com/blog/">
	<label>
		<span class="screen-reader-text"></span>
		<input type="search" class="search-field" value="" name="s" title="">
	</label>
	<input type="submit" class="search-submit" value="">
</form>		</aside>
	</header><!-- #masthead -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
			
	<aside id="notice">这是一篇旧文，点击<a id="theme-toggle">此处</a>以旧主题模式浏览。</aside>
<article id="post-264" class="post-264 post type-post status-publish format-standard hentry category-uncategorized tag-c tag-pascal tag-405 tag-409 tag-412 tag-333 tag-242 tag-274 tag-281">
	<header class="entry-header">
		<h1 class="entry-title">位运算简介及实用技巧（二）：进阶篇(1)</h1>
	</header><!-- .entry-header -->

	<div class="entry-content">
		<p>=====&nbsp;&nbsp; 真正强的东西来了！&nbsp;&nbsp; =====</p>
<p><strong>二进制中的1有奇数个还是偶数个</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;我们可以用下面的代码来计算一个32位整数的二进制中1的个数的奇偶性，当输入数据的二进制表示里有偶数个数字1时程序输出0，有奇数个则输出1。例如，1314520的二进制101000000111011011000中有9个1，则x=1314520时程序输出1。<br><code>var<br>&nbsp;&nbsp; i,x,c:longint;<br>begin<br>&nbsp;&nbsp; readln(x);<br>&nbsp;&nbsp; c:=0;<br>&nbsp;&nbsp; for i:=1 to 32 do<br>&nbsp;&nbsp; begin<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c:=c + x and 1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x:=x shr 1;<br>&nbsp;&nbsp; end;<br>&nbsp;&nbsp; writeln( c and 1 );<br>end.</code><br>&nbsp;&nbsp;&nbsp;&nbsp;但这样的效率并不高，位运算的神奇之处还没有体现出来。<br>&nbsp;&nbsp;&nbsp;&nbsp;同样是判断二进制中1的个数的奇偶性，下面这段代码就强了。你能看出这个代码的原理吗？<br><code>var<br>&nbsp;&nbsp; x:longint;<br>begin<br>&nbsp;&nbsp; readln(x);<br>&nbsp;&nbsp; x:=x xor (x shr 1);<br>&nbsp;&nbsp; x:=x xor (x shr 2);<br>&nbsp;&nbsp; x:=x xor (x shr 4);<br>&nbsp;&nbsp; x:=x xor (x shr 8);<br>&nbsp;&nbsp; x:=x xor (x shr 16);<br>&nbsp;&nbsp; writeln(x and 1);<br>end.</code><br>&nbsp;&nbsp;&nbsp;&nbsp;为了说明上面这段代码的原理，我们还是拿1314520出来说事。1314520的二进制为101000000111011011000，第一次异或操作的结果如下：</p>
<p><span style="font-family:宋体">&nbsp;&nbsp;&nbsp;&nbsp;00000000000101000000111011011000<br>XOR&nbsp;&nbsp;0000000000010100000011101101100<br>—————————————<br>&nbsp;&nbsp;&nbsp;&nbsp;00000000000111100000100110110100</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;得到的结果是一个新的二进制数，其中右起第i位上的数表示原数中第i和i+1位上有奇数个1还是偶数个1。比如，最右边那个0表示原数末两位有偶数个1，右起第3位上的1就表示原数的这个位置和前一个位置中有奇数个1。对这个数进行第二次异或的结果如下：</p>
<p><span style="font-family:宋体">&nbsp;&nbsp;&nbsp;&nbsp;00000000000111100000100110110100<br>XOR&nbsp;&nbsp; 000000000001111000001001101101<br>—————————————<br>&nbsp;&nbsp;&nbsp;&nbsp;00000000000110011000101111011001</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;结果里的每个1表示原数的该位置及其前面三个位置中共有奇数个1，每个0就表示原数对应的四个位置上共偶数个1。一直做到第五次异或结束后，得到的二进制数的最末位就表示整个32位数里有多少个1，这就是我们最终想要的答案。</p>
<p><strong>计算二进制中的1的个数</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;同样假设x是一个32位整数。经过下面五次赋值后，x的值就是原数的二进制表示中数字1的个数。比如，初始时x为1314520（网友抓狂：能不能换一个数啊），那么最后x就变成了9，它表示1314520的二进制中有9个1。<br><code>x := (x and $55555555) + ((x shr 1) and $55555555); <br>x := (x and $33333333) + ((x shr 2) and $33333333); <br>x := (x and $0F0F0F0F) + ((x shr 4) and $0F0F0F0F); <br>x := (x and $00FF00FF) + ((x shr 8) and $00FF00FF); <br>x := (x and $0000FFFF) + ((x shr 16) and $0000FFFF); </code><br>&nbsp;&nbsp;&nbsp;&nbsp;为了便于解说，我们下面仅说明这个程序是如何对一个8位整数进行处理的。我们拿数字211（我们班某MM的生日）来开刀。211的二进制为11010011。</p>
<p><span style="font-family:宋体">+—+—+—+—+—+—+—+—+<br>| 1 | 1 | 0 | 1 | 0 | 0 | 1 | 1 |&nbsp;&nbsp; &lt;—原数<br>+—+—+—+—+—+—+—+—+<br>|&nbsp;&nbsp;1 0&nbsp;&nbsp;|&nbsp;&nbsp;0 1&nbsp;&nbsp;|&nbsp;&nbsp;0 0&nbsp;&nbsp;|&nbsp;&nbsp;1 0&nbsp;&nbsp;|&nbsp;&nbsp; &lt;—第一次运算后<br>+——-+——-+——-+——-+<br>|&nbsp;&nbsp;&nbsp;&nbsp;0 0 1 1&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;0 0 1 0&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; &lt;—第二次运算后<br>+—————+—————+<br>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 0 0 0 0 1 0 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp; &lt;—第三次运算后，得数为5<br>+——————————-+</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;整个程序是一个分治的思想。第一次我们把每相邻的两位加起来，得到每两位里1的个数，比如前两位10就表示原数的前两位有2个1。第二次我们继续两两相加，10+01=11，00+10=10，得到的结果是00110010，它表示原数前4位有3个1，末4位有2个1。最后一次我们把0011和0010加起来，得到的就是整个二进制中1的个数。程序中巧妙地使用取位和右移，比如第二行中$33333333的二进制为00110011001100….，用它和x做and运算就相当于以2为单位间隔取数。shr的作用就是让加法运算的相同数位对齐。</p>
<p><strong>二分查找32位整数的前导0个数</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;这里用的C语言，我直接Copy的Hacker's Delight上的代码。这段代码写成C要好看些，写成Pascal的话会出现很多begin和end，搞得代码很难看。程序思想是二分查找，应该很简单，我就不细说了。<br><code>int nlz(unsigned x)<br>{<br>&nbsp;&nbsp; int n;</code></p><code>
</code><p><code>&nbsp;&nbsp; if (x == 0) return(32);<br>&nbsp;&nbsp; n = 1;<br>&nbsp;&nbsp; if ((x &gt;&gt; 16) == 0) {n = n +16; x = x &lt;&lt;16;}<br>&nbsp;&nbsp; if ((x &gt;&gt; 24) == 0) {n = n + 8; x = x &lt;&lt; 8;}<br>&nbsp;&nbsp; if ((x &gt;&gt; 28) == 0) {n = n + 4; x = x &lt;&lt; 4;}<br>&nbsp;&nbsp; if ((x &gt;&gt; 30) == 0) {n = n + 2; x = x &lt;&lt; 2;}<br>&nbsp;&nbsp; n = n - (x &gt;&gt; 31);<br>&nbsp;&nbsp; return n;<br>}</code></p>
<p><strong>只用位运算来取绝对值</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;这是一个非常有趣的问题。大家先自己想想吧，Ctrl+A显示答案。<br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#E5E5E5">答案：假设x为32位整数，则x xor (not (x shr 31) + 1) + x shr 31的结果是x的绝对值<br>&nbsp;&nbsp;&nbsp;&nbsp;x shr 31是二进制的最高位，它用来表示x的符号。如果它为0（x为正），则not (x shr 31) + 1等于$00000000，异或任何数结果都不变；如果最高位为1（x为负），则not (x shr 31) + 1等于$FFFFFFFF，x异或它相当于所有数位取反，异或完后再加一。</span></p>
<p><strong>高低位交换</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;<a target="_blank" href="http://www.vijos.cn/Problem_Show.asp?id=1201">这个题</a>实际上是我出的，做为学校内部NOIp模拟赛的第一题。题目是这样：<br>
</p><blockquote>&nbsp;&nbsp;&nbsp;&nbsp;给出一个小于2^32的正整数。这个数可以用一个32位的二进制数表示（不足32位用0补足）。我们称这个二进制数的前16位为“高位”，后16位为“低位”。将它的高低位交换，我们可以得到一个新的数。试问这个新的数是多少（用十进制表示）。<br>　　例如，数1314520用二进制表示为0000 0000 0001 0100 0000 1110 1101 1000（添加了11个前导0补足为32位），其中前16位为高位，即0000 0000 0001 0100；后16位为低位，即0000 1110 1101 1000。将它的高低位进行交换，我们得到了一个新的二进制数0000 1110 1101 1000 0000 0000 0001 0100。它即是十进制的249036820。<p></p></blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;当时几乎没有人想到用一句位操作来代替冗长的程序。使用位运算的话两句话就完了。<br><code>var<br>&nbsp;&nbsp; n:dword;<br>begin<br>&nbsp;&nbsp; readln( n );<br>&nbsp;&nbsp; writeln( (n shr 16) or (n&nbsp;&nbsp;shl 16) );<br>end.</code><br>&nbsp;&nbsp;&nbsp;&nbsp;而事实上，Pascal有一个系统函数swap直接就可以用。</p>
<p><strong>二进制逆序</strong><br>&nbsp;&nbsp;&nbsp;&nbsp;下面的程序读入一个32位整数并输</p>
			</div><!-- .entry-content -->

	<footer class="entry-footer">
		<div class="entry-meta">
			<span class="posted-on"><a href="http://www.matrix67.com/blog/archives/264" rel="bookmark"><time class="entry-date published" datetime="2007-07-24T02:42:13+00:00">2007 年 7 月 24 日</time></a></span>			/ <a href="http://www.matrix67.com/blog/archives/tag/c%e8%af%ad%e8%a8%80" rel="tag">C语言</a>, <a href="http://www.matrix67.com/blog/archives/tag/pascal%e8%af%ad%e8%a8%80" rel="tag">Pascal语言</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e4%ba%8c%e8%bf%9b%e5%88%b6" rel="tag">二进制</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e4%bb%a3%e7%a0%81" rel="tag">代码</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e4%bd%8d%e8%bf%90%e7%ae%97" rel="tag">位运算</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e5%88%86%e6%b2%bb" rel="tag">分治</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e7%ae%97%e6%b3%95" rel="tag">算法</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e8%af%81%e6%98%8e" rel="tag">证明</a>, <a href="http://www.matrix67.com/blog/archives/tag/%e8%b6%a3%e9%a2%98" rel="tag">趣题</a>					</div><!-- .entry-meta -->

	</footer><!-- .entry-footer -->
</article><!-- #post-## -->
			<div id="rss"><a href="http://www.matrix67.com/blog/feed" target="_blank"></a></div>
			<!--php matrix67_post_nav(); -->

			
<div id="comments" class="comments-area">

	
			<h2 class="comments-title">
			65 条评论		</h2>

		
		<ul class="comment-list">
				<li class="comment even thread-even depth-1" id="comment-20722">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">caesius</cite>			
		<p>灌……</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20722">
			2007年7月24日 08:50</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20722#respond" onclick="return addComment.moveForm( &quot;div-comment-20722&quot;, &quot;20722&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to caesius">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20723">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">caesius</cite>			
		<p>水……</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20723">
			2007年7月24日 08:56</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20723#respond" onclick="return addComment.moveForm( &quot;div-comment-20723&quot;, &quot;20723&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to caesius">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20724">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">dd</cite>			
		<p>n = n + 2; x = x &lt;&lt; 2;<br>这是C程序员写出的代码吗？</p>
<p><span style="color:red">回复：还好只是copy的别人的，没丢人<br>不过我也不明白为什么书上要这么写</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20724">
			2007年7月24日 09:28</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20724#respond" onclick="return addComment.moveForm( &quot;div-comment-20724&quot;, &quot;20724&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to dd">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20725">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(2).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">swj</cite>			
		<p>不管用什么语言 原来是学Pascal的本质很容易暴露哦</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20725">
			2007年7月24日 11:23</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20725#respond" onclick="return addComment.moveForm( &quot;div-comment-20725&quot;, &quot;20725&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to swj">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20726">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">yiyi</cite>			
		<p>感觉传统的语言中,似乎只有COBOL比Pascal更像英文了.<br>某位大师说过,程序是数学写成的诗…</p>
<p>估计这也是,我一直用P的原因之一吧~</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20726">
			2007年7月24日 13:37</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20726#respond" onclick="return addComment.moveForm( &quot;div-comment-20726&quot;, &quot;20726&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to yiyi">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20727">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(2).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Ai.Freedom</cite>			
		<p>dd说的那个怎么了? C程序员是不会那么写… 但干嘛在这里说?</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20727">
			2007年7月24日 18:26</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20727#respond" onclick="return addComment.moveForm( &quot;div-comment-20727&quot;, &quot;20727&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Ai.Freedom">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20728">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">逆铭</cite>			
		<blockquote><p>n = n + 2; x = x &lt;&lt; 2;<br>这是C程序员写出的代码吗？</p></blockquote>
<p> DD牛的意思应该是<br>n+=2;x&lt;&lt;=2;<br>这样写吧…</p>
<p>其实中间可以用逗号连接，这样连括号都省了…</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20728">
			2007年7月24日 18:46</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20728#respond" onclick="return addComment.moveForm( &quot;div-comment-20728&quot;, &quot;20728&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 逆铭">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20729">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(2).png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">zouxun</cite>			
		<p>为什么对于负数所有位取反,再加一就是它的绝对值?</p>
<p><span style="color:red">回复：看（一）的最后面</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20729">
			2007年7月24日 18:49</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20729#respond" onclick="return addComment.moveForm( &quot;div-comment-20729&quot;, &quot;20729&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to zouxun">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20730">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Ai.Freedom</cite>			
		<blockquote><p> 引用来自 dd<br>n = n + 2; x = x &lt;&lt; 2;<br>这是C程序员写出的代码吗？<br>DD牛的意思应该是<br>n+=2;x&lt;&lt;=2;<br>这样写吧…</p>
<p>其实中间可以用逗号连接，这样连括号都省了…</p></blockquote>
<p>这个我理解, 但这个的出处是哪里?</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20730">
			2007年7月24日 19:11</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20730#respond" onclick="return addComment.moveForm( &quot;div-comment-20730&quot;, &quot;20730&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Ai.Freedom">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20731">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Ai.Freedom</cite>			
		<blockquote><p> 引用来自 逆铭<br>引用来自 dd<br>n = n + 2; x = x &lt;&lt; 2;<br>这是C程序员写出的代码吗？<br>DD牛的意思应该是<br>n+=2;x&lt;&lt;=2;<br>这样写吧…</p>
<p>其实中间可以用逗号连接，这样连括号都省了…</p>
<p>这个我理解, 但这个的出处是哪里?</p></blockquote>
<p>理解了, 原来是我习惯性地看东西跳过src带来的严重后果..</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20731">
			2007年7月24日 20:28</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20731#respond" onclick="return addComment.moveForm( &quot;div-comment-20731&quot;, &quot;20731&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Ai.Freedom">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20732">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">axgle</cite>			
		<p>例如，1314520的二进制101000000111011011000中有9个1，则x=1314520时程序输出1<br>—————"效率"最高的写法(只需一行代码)—————<br>puts 1314520.to_s(2).count('1')%2<br>—————–当然这里的效率是指程序员(人)的效率———<br>Ruby-lang<br>[lol]</p>
<p><span style="color:red">回复：我越来越想学ruby了</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20732">
			2007年7月25日 10:54</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20732#respond" onclick="return addComment.moveForm( &quot;div-comment-20732&quot;, &quot;20732&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to axgle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20733">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://0.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">axgle</cite>			
		<p>二进制逆序<br>&nbsp;&nbsp;&nbsp;&nbsp;下面的程序读入一个32位整数并输出它的二进制倒序后所表示的数。<br>&nbsp;&nbsp;&nbsp;&nbsp;输入： 1314520&nbsp;&nbsp;&nbsp;&nbsp;（二进制为00000000000101000000111011011000）<br>&nbsp;&nbsp;&nbsp;&nbsp;输出： 460335104&nbsp;&nbsp;（二进制为00011011011100000010100000000000）<br>——–ruby语言,一行代码解决问题:<br>puts sprintf("%032b","1314520").split(//).reverse.join.to_i(2)</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20733">
			2007年7月25日 11:23</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20733#respond" onclick="return addComment.moveForm( &quot;div-comment-20733&quot;, &quot;20733&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to axgle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20734">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">axgle</cite>			
		<p>午餐时候想到的,更简捷的写法:<br>puts sprintf("%032b",1314520).reverse.to_i(2)</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20734">
			2007年7月25日 16:32</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20734#respond" onclick="return addComment.moveForm( &quot;div-comment-20734&quot;, &quot;20734&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to axgle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20735">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">gromy</cite>			
		<p>哈哈!你太有个性了!211就211吧!还非要突出是你们班某MM的生日!哈哈</p>
<p><span style="color:red">回复：突出那个MM在我心中的地位，随时忘不了提到她啊……</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20735">
			2007年7月27日 21:19</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20735#respond" onclick="return addComment.moveForm( &quot;div-comment-20735&quot;, &quot;20735&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to gromy">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20736">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">axgle</cite>			
		<p>writeln('Matrix' , 42 XOR 105 , '原创，转贴请注明出处');<br>42 XOR 105 = 67 ?<br>[lol]</p>
<p><span style="color:red">回复：嗯</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20736">
			2007年7月29日 14:14</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20736#respond" onclick="return addComment.moveForm( &quot;div-comment-20736&quot;, &quot;20736&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to axgle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20737">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">bar</cite>			
		<p>只用位运算来取绝对值<br>&nbsp;&nbsp;&nbsp;&nbsp;这是一个非常有趣的问题。大家先自己想想吧，Ctrl+A显示答案。<br>&nbsp;&nbsp;&nbsp;&nbsp;答案：假设x为32位整数，则x xor (not (x shr 31) + 1) + x shr 31的结果是x的绝对值<br>&nbsp;&nbsp;&nbsp;&nbsp;x shr 31是二进制的最高位，它用来表示x的符号。如果它为0（x为正），则not (x shr 31) + 1等于$00000000，异或任何数结果都不变；如果最高位为1（x为负），则not (x shr 31) + 1等于$FFFFFFFF，x异或它相当于所有数位取反，异或完后再加一。<br>___________________________________________________________________________<br>这个实现跟平台相关吧，有符号数左移，右移是未定义的行为吧。比如你这里的 x shr 31,如果x为负数的话，那么<br>x shr 31就为0xffffffff, not (x shr 31) + 1 等于0x00000000了。</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20737">
			2007年10月25日 15:03</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20737#respond" onclick="return addComment.moveForm( &quot;div-comment-20737&quot;, &quot;20737&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to bar">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20738">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(2).png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Etfl</cite>			
		<p>为什么取绝对值时用<br>x:=x and not(1 shl 31);<br>当x为负数时会出201错误？（x是longint）</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20738">
			2007年10月30日 22:06</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20738#respond" onclick="return addComment.moveForm( &quot;div-comment-20738&quot;, &quot;20738&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Etfl">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20739">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(2).png" srcset="http://0.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">jiqing</cite>			
		<p>我怎么觉得二分查找32位整数的前导0个数的那个程序不对头也X=100时返回的是25, 我觉得应该是29呢?</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20739">
			2008年3月9日 09:35</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20739#respond" onclick="return addComment.moveForm( &quot;div-comment-20739&quot;, &quot;20739&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to jiqing">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20740">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none(1).png" srcset="http://2.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">激情</cite>			
		<p>二分查找32位整数的前导0个数的那个程序中20的前导0个数是27,而40是28, 40的前导0个数比20多??</p>
<p><span style="color:red">回复：不会吧，我运行出来的不是这个结果</span></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20740">
			2008年3月9日 09:53</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20740#respond" onclick="return addComment.moveForm( &quot;div-comment-20740&quot;, &quot;20740&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 激情">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20741">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/16256cdd3bc06ed399a0f79e6ab14ad3.png" srcset="http://1.gravatar.com/avatar/16256cdd3bc06ed399a0f79e6ab14ad3?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://xecycle.googlepages.com/" rel="external nofollow" class="url">XeCycle</a></cite>			
		<p>绝对值如果这样：x&lt;&gt;=1;<br>
何如？</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20741">
			2008年4月5日 21:15</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20741#respond" onclick="return addComment.moveForm( &quot;div-comment-20741&quot;, &quot;20741&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to XeCycle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20742">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/16256cdd3bc06ed399a0f79e6ab14ad3.png" srcset="http://1.gravatar.com/avatar/16256cdd3bc06ed399a0f79e6ab14ad3?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://xecycle.googlepages.com/" rel="external nofollow" class="url">XeCycle</a></cite>			
		<p>What’s that?????</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20742">
			2008年4月5日 21:16</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20742#respond" onclick="return addComment.moveForm( &quot;div-comment-20742&quot;, &quot;20742&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to XeCycle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20743">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/a8885db5d930308d9e74f54835cac9d4.png" srcset="http://1.gravatar.com/avatar/a8885db5d930308d9e74f54835cac9d4?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">hfcxb</cite>			
		<p>您的程序的可读性实在是……</p>
<p>“求二进制中 1 的个数” 这样写如何？<br>
var num, x: integer;<br>
begin<br>
  readln(x);<br>
  num:=0;<br>
  while x0 do<br>
  begin<br>
    x:=x and (x-1);<br>
    num:=num+1;<br>
  end;<br>
  writeln(num);<br>
end.</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20743">
			2008年7月3日 22:42</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20743#respond" onclick="return addComment.moveForm( &quot;div-comment-20743&quot;, &quot;20743&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to hfcxb">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20744">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/a6f42594b64bcc612b78ca6944c856ab.png" srcset="http://1.gravatar.com/avatar/a6f42594b64bcc612b78ca6944c856ab?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">zhzhzoo</cite>			
		<p>那么要知道二进制中最后一个1在第几位呢</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20744">
			2008年7月28日 11:41</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20744#respond" onclick="return addComment.moveForm( &quot;div-comment-20744&quot;, &quot;20744&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to zhzhzoo">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20745">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/87d1b927aabde47a917e641695a17896.png" srcset="http://2.gravatar.com/avatar/87d1b927aabde47a917e641695a17896?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">sai90</cite>			
		<p>有些系統的左移運算是循環左移,這個問題不可忽略!</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20745">
			2008年7月29日 23:11</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20745#respond" onclick="return addComment.moveForm( &quot;div-comment-20745&quot;, &quot;20745&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to sai90">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20746">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/1167e5780eb5466a33983eb1d97fb535.png" srcset="http://1.gravatar.com/avatar/1167e5780eb5466a33983eb1d97fb535?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">阿僵/老卡</cite>			
		<p>答案：假设x为32位整数，则x xor (not (x shr 31) + 1) + x shr 31的结果是x的绝对值</p>
<p>只用位运算，可是有加号啊：-）</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20746">
			2008年11月2日 20:01</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20746#respond" onclick="return addComment.moveForm( &quot;div-comment-20746&quot;, &quot;20746&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 阿僵/老卡">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20749">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/c4342911a7fbe9d0d8c426c0d4f9a0c8.png" srcset="http://0.gravatar.com/avatar/c4342911a7fbe9d0d8c426c0d4f9a0c8?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">ytj</cite>			
		<p>计算二进制中的1的个数还有一种叫做“HAKMEM算法”的方法，看上去似乎是某种诡异的三分法。</p>
<p>int Count(unsigned x){<br>
	unsigned n;<br>
	n = (x &gt;&gt; 1) &amp; 033333333333;<br>
	x = x – n;<br>
	n = (n &gt;&gt; 1) &amp; 033333333333;<br>
	x = x – n;<br>
	x = (x + (x &gt;&gt; 3)) &amp; 030707070707;<br>
	x = x % 63;<br>
	return x;<br>
}</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20749">
			2009年1月27日 11:43</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20749#respond" onclick="return addComment.moveForm( &quot;div-comment-20749&quot;, &quot;20749&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to ytj">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20750">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/c4342911a7fbe9d0d8c426c0d4f9a0c8.png" srcset="http://0.gravatar.com/avatar/c4342911a7fbe9d0d8c426c0d4f9a0c8?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">ytj</cite>			
		<p>计算二进制中的1的个数，wikipedia上的方法更诡异，可以做64位整数。<br>
int popcount(unsigned long long x) {<br>
	typedef unsigned long long qword;<br>
	const qword m2  = ((qword)0x33333333&lt;&gt; 1) &amp; (((qword)0x55555555&lt;&gt; 2) &amp; m2);<br>
	x = (x + (x &gt;&gt; 4)) &amp; (((qword)0x0f0f0f0f&lt;&lt;32)+0x0f0f0f0f);<br>
	return (x * (((qword)0x01010101&lt;&gt;56;<br>
}</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20750">
			2009年1月27日 13:38</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20750#respond" onclick="return addComment.moveForm( &quot;div-comment-20750&quot;, &quot;20750&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to ytj">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20751">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/f822bd03f830b84388c9095479c1d121.png" srcset="http://0.gravatar.com/avatar/f822bd03f830b84388c9095479c1d121?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">St.fleagle</cite>			
		<p>位运算 任意位取反 （把a 在b的1处取反 ）<br>
a-(a and b) （反 a 中要反的 1）<br>
a+((not(a xor b)) and b) (反 a 中要反的 0)<br>
请教强人 是不是有点麻烦了</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20751">
			2009年1月31日 21:51</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20751#respond" onclick="return addComment.moveForm( &quot;div-comment-20751&quot;, &quot;20751&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to St.fleagle">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20752">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/440608b37b9f69c7f35e62e2f4f2d134.jpeg" srcset="http://1.gravatar.com/avatar/440608b37b9f69c7f35e62e2f4f2d134?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://cyclone77.cn/" rel="external nofollow" class="url">cyclone77</a></cite>			
		<p>我是个菜鸟：您帮我看看那错了;<br>
program finding;<br>
var<br>
	i,m,n:longint;<br>
	procedure nlz(x:word);<br>
	var<br>
		n:integer;<br>
	begin<br>
		if x=0 then exit(32);<br>
		n:=1;<br>
		if ((x shr 16)=0) then begin n:=n+16; x:=x shl 16; end;<br>
		if ((x shr 24)=0) then begin n:=n+8; x:=x shl 8; end;<br>
		if ((x shr 28)=0) then begin n:=n+4; x:=x shl 4; end;<br>
		if ((x shr 30)=0) then begin n:=n+2; x:=x shl 2; end;<br>
		n:=n-(x shr 31);<br>
		exit(n);<br>
	end;<br>
begin<br>
	assign(input,’input.txt’);<br>
	reset(input);<br>
	assign(output,’output.txt’);<br>
	rewrite(output);<br>
	readln(n);<br>
	for i:=1 to n do<br>
		read(a[i]);<br>
		readln;<br>
	readln(m);<br>
	for i:=1 to n do<br>
		nlz(m);<br>
end.</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20752">
			2009年4月9日 12:04</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20752#respond" onclick="return addComment.moveForm( &quot;div-comment-20752&quot;, &quot;20752&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to cyclone77">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20753">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/440608b37b9f69c7f35e62e2f4f2d134.jpeg" srcset="http://1.gravatar.com/avatar/440608b37b9f69c7f35e62e2f4f2d134?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://cyclone77.cn/" rel="external nofollow" class="url">cyclone77</a></cite>			
		<p>program finding;<br>
var<br>
	i,m,n,k:longint;<br>
        a:array[1..1000000]of longint;<br>
	function nlz(x:word):integer;<br>
	var<br>
		n:integer;<br>
	begin<br>
		if x=0 then exit(32);<br>
		n:=1;<br>
		if ((x shr 16)=0) then begin n:=n+16; x:=x shl 16; end;<br>
		if ((x shr 24)=0) then begin n:=n+8; x:=x shl 8; end;<br>
		if ((x shr 28)=0) then begin n:=n+4; x:=x shl 4; end;<br>
		if ((x shr 30)=0) then begin n:=n+2; x:=x shl 2; end;<br>
		n:=n-(x shr 31);<br>
		exit(n);<br>
	end;<br>
begin<br>
	assign(input,’input.txt’);<br>
	reset(input);<br>
	assign(output,’output.txt’);<br>
	rewrite(output);<br>
	readln(n);<br>
	for i:=1 to n do<br>
		read(a[i]);<br>
		readln;<br>
	readln(m);<br>
        k:=nlz(m);<br>
        writeln(k);<br>
        close(input);<br>
        close(output);<br>
end.<br>
不好意思上次的那个发错了这个才是。。。</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20753">
			2009年4月9日 12:08</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20753#respond" onclick="return addComment.moveForm( &quot;div-comment-20753&quot;, &quot;20753&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to cyclone77">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20754">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/8650d104581dc9d176da9a7e68050aa5.png" srcset="http://2.gravatar.com/avatar/8650d104581dc9d176da9a7e68050aa5?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">yeah</cite>			
		<p>This Is My Life, RatedLife:<br>
 8.3Mind:<br>
 7.9Body:<br>
 9Spirit:<br>
 9.1Friends/Family:<br>
 6.3Love:<br>
 5.7Finance:<br>
 6.5<a href="http://www.monkeyquiz.com/life/rate_my_life.html" rel="nofollow">Take the Rate My Life Quiz</a></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20754">
			2009年6月2日 22:00</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20754#respond" onclick="return addComment.moveForm( &quot;div-comment-20754&quot;, &quot;20754&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to yeah">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20755">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/398fb527de58b7c6976313d6df6b3452.png" srcset="http://0.gravatar.com/avatar/398fb527de58b7c6976313d6df6b3452?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">power</cite>			
		<p>怎么计算二进制中的0的个数？</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20755">
			2009年8月25日 14:35</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20755#respond" onclick="return addComment.moveForm( &quot;div-comment-20755&quot;, &quot;20755&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to power">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20756">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/af0fdcfca700f00245704651a907d31e.png" srcset="http://1.gravatar.com/avatar/af0fdcfca700f00245704651a907d31e?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://maa04.blog.163.com/" rel="external nofollow" class="url">笨笨</a></cite>			
		<p>回34楼<br>
0的个数用32减去1的个数就得了呗……</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20756">
			2009年10月8日 18:12</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20756#respond" onclick="return addComment.moveForm( &quot;div-comment-20756&quot;, &quot;20756&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 笨笨">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20757">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/65a8a8f2d23a9c62613e3a4c94887028.png" srcset="http://0.gravatar.com/avatar/65a8a8f2d23a9c62613e3a4c94887028?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">OIer:liyue</cite>			
		<p>Orz Martrix67 神牛………<br>
明天就NOIP2009了</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20757">
			2009年11月20日 21:02</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20757#respond" onclick="return addComment.moveForm( &quot;div-comment-20757&quot;, &quot;20757&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to OIer:liyue">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20758">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/dcc9a66fb5daa7bf3e8bb340894fa0c9.png" srcset="http://1.gravatar.com/avatar/dcc9a66fb5daa7bf3e8bb340894fa0c9?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">蜗牛</cite>			
		<p>膜拜楼主！！！</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20758">
			2009年12月2日 10:38</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20758#respond" onclick="return addComment.moveForm( &quot;div-comment-20758&quot;, &quot;20758&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 蜗牛">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20759">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/470ac47bfeee0b06953b14a8c2dcf934.png" srcset="http://1.gravatar.com/avatar/470ac47bfeee0b06953b14a8c2dcf934?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Pzjay</cite>			
		<p>第一个判1个数的奇偶性循环下就清爽了<br>
for(y=1;y&lt;=16;y&lt;&gt;y);</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20759">
			2009年12月19日 16:19</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20759#respond" onclick="return addComment.moveForm( &quot;div-comment-20759&quot;, &quot;20759&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Pzjay">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20760">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/a2841f0e5e1484112055bf423c05df26.png" srcset="http://1.gravatar.com/avatar/a2841f0e5e1484112055bf423c05df26?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">晓而不羽</cite>			
		<p>x xor (-(x shr 31))+(x shr 31) 也可以，好像是一样的</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20760">
			2010年7月26日 13:35</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20760#respond" onclick="return addComment.moveForm( &quot;div-comment-20760&quot;, &quot;20760&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to 晓而不羽">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20761">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/7479570099a4914ca14cc25fb064ee25.jpeg" srcset="http://1.gravatar.com/avatar/7479570099a4914ca14cc25fb064ee25?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">ShakeMyHeart</cite>			
		<p>不错，不错</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20761">
			2010年8月8日 18:15</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20761#respond" onclick="return addComment.moveForm( &quot;div-comment-20761&quot;, &quot;20761&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to ShakeMyHeart">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20762">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/52cd89f3ba3b4b5aecd5d88650b23c94.png" srcset="http://2.gravatar.com/avatar/52cd89f3ba3b4b5aecd5d88650b23c94?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">mikew</cite>			
		<p>考虑可移植性是不是要用sizeof确定一下int的大小？</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20762">
			2011年4月4日 13:20</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20762#respond" onclick="return addComment.moveForm( &quot;div-comment-20762&quot;, &quot;20762&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to mikew">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20763">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/9bbe746e93e3f69b09b5e4664f60abfc.jpeg" srcset="http://0.gravatar.com/avatar/9bbe746e93e3f69b09b5e4664f60abfc?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">COT</cite>			
		<p>求绝对值只要把跟INT_MAX做一下AND操作不是就可以了吗？还是我考虑的太简单了？</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20763">
			2011年5月29日 18:39</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20763#respond" onclick="return addComment.moveForm( &quot;div-comment-20763&quot;, &quot;20763&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to COT">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20765">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/e7ac31a079c759ed1ff7adac40e01b78.png" srcset="http://2.gravatar.com/avatar/e7ac31a079c759ed1ff7adac40e01b78?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://www.clarkok.com/" rel="external nofollow" class="url">Clarkok</a></cite>			
		<p>为什么楼上= =||，我只是引用了而已啊，怎么会变成评论？</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20765">
			2011年6月30日 08:43</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20765#respond" onclick="return addComment.moveForm( &quot;div-comment-20765&quot;, &quot;20765&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Clarkok">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20766">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/e7ac31a079c759ed1ff7adac40e01b78.png" srcset="http://2.gravatar.com/avatar/e7ac31a079c759ed1ff7adac40e01b78?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://www.clarkok.com/" rel="external nofollow" class="url">Clarkok</a></cite>			
		<p>为什么楼上。。。我只是引用而已啊，怎么会变成评论？是WP的事情吗？好神奇</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20766">
			2011年6月30日 08:46</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20766#respond" onclick="return addComment.moveForm( &quot;div-comment-20766&quot;, &quot;20766&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Clarkok">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20768">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/3ad61762f974995f727a784fa44904a5.png" srcset="http://0.gravatar.com/avatar/3ad61762f974995f727a784fa44904a5?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Lamdy</cite>			
		<p>计算1个数15个运算符</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20768">
			2011年10月17日 21:30</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20768#respond" onclick="return addComment.moveForm( &quot;div-comment-20768&quot;, &quot;20768&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Lamdy">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20769">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/none.png" srcset="http://1.gravatar.com/avatar/?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo avatar-default" height="48" width="48">	<div class="comment-text">
		<cite class="fn">Thity</cite>			
		<p>今天无意查阅文档，发现X86指令集竟然直接提供了计算一个数字中1的个数的指令，不清楚Intel的CPU内部是如何实现的：POPCNT。<br>
<a href="http://software.intel.com/sites/products/documentation/hpc/compilerpro/en-us/fortran/lin/compiler_f/lref_for/source_files/rfpopcnt.htm" rel="nofollow">http://software.intel.com/sites/products/documentation/hpc/compilerpro/en-us/fortran/lin/compiler_f/lref_for/source_files/rfpopcnt.htm</a><br>
<a href="http://msdn.microsoft.com/en-us/library/bb385231.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/bb385231.aspx</a></p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20769">
			2011年10月18日 21:24</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20769#respond" onclick="return addComment.moveForm( &quot;div-comment-20769&quot;, &quot;20769&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to Thity">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20771">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/805a9778e71ccf4e2772cad7e765f599.png" srcset="http://2.gravatar.com/avatar/805a9778e71ccf4e2772cad7e765f599?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://testsoso/" rel="external nofollow" class="url">sosogo</a></cite>			
		<p>在交换高的16位与低的16位的时候，不知道有没有考虑到右移16位的时候会出现最高位的1填充的情况。在C语言中应该是写成:<br>
x = (x&lt;&gt;16)&amp;0x0000ffff)<br>
不会pascal。另外回复一相#48楼的那个问题，那么指令很耗时间。</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20771">
			2011年11月23日 20:11</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20771#respond" onclick="return addComment.moveForm( &quot;div-comment-20771&quot;, &quot;20771&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to sosogo">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20773">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/6966b8fc7b6318ee0694fd7766aef107.jpeg" srcset="http://0.gravatar.com/avatar/6966b8fc7b6318ee0694fd7766aef107?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">lee</cite>			
		<p>有没有办法只用位运算 不用-，取出pos的最高位</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20773">
			2012年2月13日 23:57</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20773#respond" onclick="return addComment.moveForm( &quot;div-comment-20773&quot;, &quot;20773&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to lee">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20776">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/595d75734043e6146493edf2e6fe7175.png" srcset="http://2.gravatar.com/avatar/595d75734043e6146493edf2e6fe7175?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://www.ecyclejerseys.com/" rel="external nofollow" class="url">cervelo</a></cite>			
		<p>膜拜楼主！！！</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20776">
			2012年12月12日 11:10</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20776#respond" onclick="return addComment.moveForm( &quot;div-comment-20776&quot;, &quot;20776&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to cervelo">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20777">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/c1ecd70d5186271fd447263c28b90104.png" srcset="http://0.gravatar.com/avatar/c1ecd70d5186271fd447263c28b90104?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">comesskywalker</cite>			
		<p>08年intel在SSE里面加入了popcnt指令能单次运算得到整数中1的个数。在MSVC9(2008)以后的版本里面可以直接调用比如_mm_popcnt_u32()、_mm_popcnt_u64。这个目前是最快的方式。</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20777">
			2013年5月31日 02:33</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20777#respond" onclick="return addComment.moveForm( &quot;div-comment-20777&quot;, &quot;20777&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to comesskywalker">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1" id="comment-20778">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/ecde27436fe39fe95e1dfb666859e591.png" srcset="http://2.gravatar.com/avatar/ecde27436fe39fe95e1dfb666859e591?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">harjol</cite>			
		<p>位运算来取绝对值在java中不行哎</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20778">
			2013年5月31日 11:13</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20778#respond" onclick="return addComment.moveForm( &quot;div-comment-20778&quot;, &quot;20778&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to harjol">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-20781">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/557bcb0edba3adaa795ccd423f0bac2f.png" srcset="http://2.gravatar.com/avatar/557bcb0edba3adaa795ccd423f0bac2f?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn"><a href="http://www.cdta.org/nfl-jerseys.html" rel="external nofollow" class="url">nfl jerseys wholesalers</a></cite>			
		<p>On Saturday evening, the promise D Chinese forest main field outside.Ex- the segment time’s ball team result keep on overcast.Influenced the seat of honor rate of ground.Before of compete, average seat of honor in ground in the city the rate return dissatisfied 20,000 people.The big slice of big slice of ground grandstand gets empty, the players also have no idea to compete in this kind of environment.</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-20781">
			2013年9月24日 02:21</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=20781#respond" onclick="return addComment.moveForm( &quot;div-comment-20781&quot;, &quot;20781&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to nfl jerseys wholesalers">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
	<li class="comment even thread-even depth-1 parent" id="comment-356112">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/ea67640174b930ff22e7c7318370d0bf.png" srcset="http://2.gravatar.com/avatar/ea67640174b930ff22e7c7318370d0bf?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">qindazhu</cite>			
		<p>请问怎么看目录啊，找了五分钟都找不到目录，快抓狂了</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-356112">
			2014年9月29日 11:09</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=356112#respond" onclick="return addComment.moveForm( &quot;div-comment-356112&quot;, &quot;356112&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to qindazhu">回复</a>		</div>
	</div>
<ul class="children">
	<li class="comment odd alt depth-2" id="comment-995936">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/385e5faf795684e3b782796e04615178.png" srcset="http://0.gravatar.com/avatar/385e5faf795684e3b782796e04615178?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">lvable</cite>			
		<p>可以搜索</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-995936">
			2016年5月17日 15:53</a>
					</div>
	</div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment even thread-odd thread-alt depth-1" id="comment-1188472">
	<img alt="" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/b0d1a204210d068b9eabd1d7f4a1ef38.png" srcset="http://2.gravatar.com/avatar/b0d1a204210d068b9eabd1d7f4a1ef38?s=96&amp;d=mm&amp;r=r 2x" class="avatar avatar-48 photo" height="48" width="48">	<div class="comment-text">
		<cite class="fn">w</cite>			
		<p>哪里能看到完整的博客呢，找到的最后都是少了的</p>
	
		<div class="comment-meta commentmetadata"><a href="http://www.matrix67.com/blog/archives/264#comment-1188472">
			2018年4月2日 17:07</a>
			 / <a rel="nofollow" class="comment-reply-link" href="http://www.matrix67.com/blog/archives/264?replytocom=1188472#respond" onclick="return addComment.moveForm( &quot;div-comment-1188472&quot;, &quot;1188472&quot;, &quot;respond&quot;, &quot;264&quot; )" aria-label="Reply to w">回复</a>		</div>
	</div>
</li><!-- #comment-## -->
		</ul><!-- .comment-list -->

		
	
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">发表评论 <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.matrix67.com/blog/archives/264#respond" style="display:none;">取消回复</a></small></h3>				<form action="http://www.matrix67.com/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<div class="comment-form-comment"><label for="comment">评论</label><div><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></div></div><div class="comment-form-author"><label for="author" class="ir">昵称<span class="required">*</span></label><input id="author" name="author" type="text" value="" size="30"></div>
<div class="comment-form-email"><label for="email" class="ir">邮箱<span class="required">*</span></label><input id="email" name="email" type="text" value="" size="30"></div>
<div class="comment-form-url"><label for="url" class="ir">网站</label><input id="url" name="url" type="text" value="" size="30"></div>
<p class="form-submit"><input name="submit" type="submit" id="submit_comment" class="submit" value="提交"> <input type="hidden" name="comment_post_ID" value="264" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="bacfe2d405"></p><p style="display: none;"></p>				<input type="hidden" id="ak_js" name="ak_js" value="1553000775199"></form>
					</div><!-- #respond -->
		
</div><!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

	<div id="secondary" class="widget-area" role="complementary">
		
	</div><!-- #secondary -->

	</div><!-- #content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
		<div class="site-info">
			Powered by <a href="http://wordpress.org/" target="_blank">WordPress</a>
			<span class="sep"> | </span>
			Designed by <a href="http://localhost-8080.com/" rel="designer" target="_blank">♥ Localhost</a>
			<span class="sep"> | </span>
			Creative Commons <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh_TW" target="_blank">BY-NC-SA</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<div style="display:none"><script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/stat.php" language="JavaScript" charset="gb2312" type="text/javascript">
</script><script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/core.php" charset="utf-8" type="text/javascript"></script><a href="https://www.cnzz.com/stat/website.php?web_id=349609" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/pic.gif"></a></div>
<script src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/urchin.js.download" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1093817-1";
urchinTracker();
</script>

<script type="text/javascript" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/form.js.download"></script>
<script type="text/javascript" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/navigation.js.download"></script>
<script type="text/javascript" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/skip-link-focus-fix.js.download"></script>
<script type="text/javascript" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/comment-reply.min.js.download"></script>
<script type="text/javascript" src="./位运算简介及实用技巧（二）：进阶篇(1) _ Matrix67_ The Aha Moments_files/wp-embed.min.js.download"></script>



<!-- Dynamic page generated in 0.268 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2019-03-19 21:06:11 -->

<!-- super cache --></body></html>