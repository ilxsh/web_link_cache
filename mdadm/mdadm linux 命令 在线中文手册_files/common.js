/*! jstest 2015-09-21 */
function search(){var a=this,b="http://linux.51yip.com/search/";this.init=function(){a.search_start(),a.post_data()},this.post_data=function(){$(".s_submit").bind("click",function(){""!=$.trim($("#s_input").val())&&(location.href=b+$.trim($("#s_input").val()))})},this.position_init=function(a){offset=$(".input").offset(),top_l=offset.top+$(".input").height(),left_l=offset.left,$("#gac_od").css({left:left_l,top:top_l,width:$(".input").width()+2}).mousedown(function(){$("#s_input").unbind("blur")})},this.position_other=function(a){offset=$(".input").offset(),top_l=offset.top+$(".input").height()+1,left_l=offset.left+1,$("#gac_od").css({left:left_l,top:top_l,width:$(".input").width()+2}).mousedown(function(){$("#s_input").unbind("blur")})},this.keyup_f=function(a){$.ajax({type:"POST",url:"./?mod=ajax&app=ajax_search",data:"name="+a,success:function(a){if("[]"!=$.trim(a)&&""!=$.trim(a)){for(result=JSON.parse(a),html='<table cellspacing="0" cellpadding="0" class="gac_m">',i=0;i<result.length;i++)html+='<tr class="gac_a" num="'+(i+1)+'" ><td class="gac_c">'+result[i]+"</td></tr>";html+="</table>",$("#gac_od").show(),$(".gac_id").html(html),$(".gac_m tr").bind("click",function(){location.href=b+$(this).children(":nth-child(1)").html()}).mouseover(function(){$(this).hasClass("gac_a")&&$(this).addClass("gac_e")}).mouseout(function(){$(this).hasClass("gac_a")&&$(this).removeClass("gac_e")})}else $(".gac_id").html('<table cellspacing="0" cellpadding="0" class="gac_m"><tr class="gac_a"><td></td></tr></table>'),$("#gac_od").hide()}},"json")},this.search_start=function(){$("#s_input").keyup(function(c){return $(".input").width()<330?a.position_other():a.position_init(),len=$(".gac_m tr").length,len>1?(select=$(".gac_m .gac_b").length,0==select?40==c.keyCode?($(".gac_m tr:first").attr("class","gac_b"),$("#s_input").val($(".gac_m tr:first td:first").html())):38==c.keyCode?($(".gac_m tr:last").attr("class","gac_b"),$("#s_input").val($(".gac_m tr:last td:first").html())):a.keyup_f($("#s_input").val()):40==c.keyCode?$(".gac_b").attr("num")==len?($(".gac_m tr:last").attr("class","gac_a"),$(".gac_m tr:first").attr("class","gac_b"),$("#s_input").val($(".gac_m tr:first td:first").html())):($(".gac_b").attr("class","gac_a").next("tr").attr("class","gac_b"),$("#s_input").val($(".gac_b td:first").html())):38==c.keyCode?1==$(".gac_b").attr("num")?($(".gac_m tr:first").attr("class","gac_a"),$(".gac_m tr:last").attr("class","gac_b"),$("#s_input").val($(".gac_m tr:last td:first").html())):($(".gac_b").attr("class","gac_a").prev("tr").attr("class","gac_b"),$("#s_input").val($(".gac_b td:first").html())):a.keyup_f($("#s_input").val())):1==len&&(40==c.keyCode||38==c.keyCode?($(".gac_m tr:first").attr("class","gac_b"),$("#s_input").val($(".gac_m tr:first td:first").html())):a.keyup_f($("#s_input").val())),13==c.keyCode?(location.href=b+$(this).val(),!1):void 0}).focus(function(){""!=$.trim($(".gac_m tr:first td:first").html())&&$("#gac_od").css("display","")}).blur(function(){$("#gac_od").hide()})}}function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return unescape(e.substring(b.length,e.length))}return!1}function setCookie(a,b,c){c=c||0;var d="";if(0!=c){var e=new Date;e.setTime(e.getTime()+1e3*c),d="; expires="+e.toGMTString()}document.cookie=a+"="+escape(b)+d+"; path=/"}function previews(a){a.action="./?mod=linux&app=preview",a.target="_black",a.submit()}function collect_confirm(a){$("#success b").html($(a).attr("title")),$(".p_submit").attr("title",$(a).attr("id")),$("#success").dialog({width:220,height:170,hide:"explode"})}function updatecode(a,b){$("#"+b).attr("src",a)}function delcollect(a){$("#"+a).parents("li").remove(),$.ajax({type:"POST",url:"./?mod=ajax&&app=ajax_collect",async:!1,data:{id:a}}),$("#success").dialog("close")}function code_check(){jQuery.validator.addMethod("code_check",function(a,b){var c=0;return $.ajax({type:"POST",url:"./?mod=linux&app=code&act=code",async:!1,data:{checkcode:a},success:function(a){"yes"==a&&(c=1)}}),1==c?!0:!1},"验证码已过期")}function weibo_login(){WB2.anyWhere(function(a){a.widget.connectButton({id:"weibologin",type:"3,2",callback:{login:function(a){$.ajax({type:"POST",url:"./?mod=ajax&app=ajax_login&act=weibo",async:!1,data:{login:"only"},success:function(a){"yes"==a&&(top.location.href="http://linux.51yip.com")}})}}})})}function qq_login(){QC.Login({btnId:"qqlogin",scope:"all",size:"A_M"},function(a,b){QC.Login.check()&&QC.Login.getMe(function(a,b){a&&$.ajax({type:"POST",url:"./?mod=ajax&app=ajax_login&act=qq",async:!1,data:{openid:a,access:b,login:"only"},success:function(a){"yes"==a&&(top.location.href="http://linux.51yip.com")}})})})}$(document).ready(function(){(new search).init()});