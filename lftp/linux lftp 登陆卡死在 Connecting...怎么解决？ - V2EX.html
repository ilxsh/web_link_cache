<!doctype html>
<html amp lang="en">
  <head>
    <meta charset="utf-8">
    <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
    <script async custom-element="amp-vimeo" src="https://cdn.ampproject.org/v0/amp-vimeo-0.1.js"></script>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>linux lftp 登陆卡死在 Connecting...怎么解决？ - V2EX</title>
    <meta property="og:locale" content="zh_CN" />
<meta property="og:type" content="article" />
<meta property="og:title" content="linux lftp 登陆卡死在 Connecting...怎么解决？ - V2EX" />
<meta property="og:description" content="问与答 - lx19891024 - 怎么传图?。。。。我大概手打一下lftp -u asd,gggf ftp://1.1.1.1                   #不存在的用户名和ip`ls' at 0 [Conn" />
<meta property="og:url" content="https://www.v2ex.com/t/166692" />
<meta property="og:site_name" content="V2EX" />

<meta property="article:tag" content="qna" />
<meta property="article:section" content="问与答" />
<meta property="article:published_time" content="2015-01-30T01:38:31Z" />

<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="问与答 - lx19891024 - 怎么传图?。。。。我大概手打一下lftp -u asd,gggf ftp://1.1.1.1                   #不存在的用户名和ip`ls' at 0 [Conn" />
<meta name="twitter:title" content="linux lftp 登陆卡死在 Connecting...怎么解决？ - V2EX" />
<meta name="twitter:image" content="https://cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" />
<meta name="twitter:site" content="@V2EX" />
<meta name="twitter:creator" content="@V2EX" />
    <link rel="canonical" href="https://www.v2ex.com/t/166692" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "NewsArticle",
        "headline": "问与答 - lx19891024 - 怎么传图?。。。。我大概手打一下lftp -u asd,gggf ftp://1.1.1.1                   #不存在的用户名和ip`ls&#39; at 0 [Conn",
        "datePublished": "2015-01-30T01:38:31Z",
        "dateModified": "2015-01-30T01:38:31Z",
        "author": {
          "@type": "Person",
          "name": "lx19891024"
        },
        "publisher": {
          "@type": "Organization",
          "name": "V2EX",
          "logo": {
            "@type": "ImageObject",
            "url": "https://cdn.v2ex.com/site/logo@2x.png",
            "width": 188,
            "height": 60
          }
        },
        "image": {
          "@type": "ImageObject",
          "url": "https://cdn.v2ex.com/navatar/c20a/d4d7/12_xxlarge.png?m=1575944589",
          
          "height": 256,
          "width": 256
          
        }
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
      body {
        background-color: white;
        font-family: sans-serif;
      }

      a:link, a:visited, a:active {
        color: #778087;
        text-decoration: none;
        word-break: break-all;
      }

      a:hover {
        color: #4d5256;
        text-decoration: underline;
      }

      a.white:link, a.white:visited, a.white:active {
        color: #fff;
        text-decoration: none;
        word-break: break-all;
      }

      a.white:hover {
        color: #f0f0f0;
        text-decoration: underline;
      }

      .author {
        font-size: 14px;
      }

      .author_avatar {
        text-align: absmiddle;
        display: inline;
      }

      .node_avatar {
        text-align: absmiddle;
        display: inline;
      }

      .topic_title {
        padding: 15px 20px 10px 20px;
        background-color: #fff;
      }

      .topic_author {
        background-color: #fff;
        padding: 5px 20px 5px 20px;
        font-size: 14px;
        font-weight: 600;
        line-height: 100%;
      }

      .topic_author_avatar {
        border-radius: 24px;
        vertical-align: middle;
      }

      .reply_author_avatar {
        border-radius: 24px;
        box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.1);
        border: none;
      }

      .topic_created {
        float: right;
        font-size: 12px;
        padding-top: 8px;
        color: #ccc;
        font-weight: normal;
      }

      h1 {
        font-size: 18px;
        margin: 0px;
        padding: 0px;
      }

      .topic_content {
        font-size: 16px;
        line-height: 160%;
        padding: 10px 20px 10px 20px;
      }

      .topic_stats {
        background-color: #fff;
        padding: 10px 20px 10px 20px;
        vertical-align: middle;
        font-size: 14px;
        line-height: 14px;
        color: #999;
      }

      .topic_node {
        background-color: #fff;
        padding: 10px 20px 10px 20px;
        vertical-align: middle;
        font-size: 12px;
        line-height: 12px;
        color: #999;
      }

      .topic_node_avatar {
        vertical-align: middle;
      }

      .topic_hits {
        float: right;
        font-size: 12px;
        padding-top: 5px;
        color: #ccc;
      }

      .reply_item {
        border-bottom: 1px solid #e2e2e2;
        padding: 10px 20px 10px 20px;
        min-height: 24px;
      }

      .reply_avatar {
        float: left;
        width: 24px;
      }

      .reply_body {
        text-align: left;
        display: block;
        margin-left: 34px;
        min-height: 1em;
        width: auto;
      }

      .reply_author_name {
        font-size: 14px;
        font-weight: 600;
      }

      .reply_created {
        font-size: 12px;
        line-height: 180%;
        margin-top: 5px;
        color: #ccc;
      }

      .reply_content {
        font-size: 13px;
        line-height: 160%;
        margin-top: 5px;
      }

      .pagination {
        background-color: #fff;
        padding: 10px 20px 10px 20px;
        vertical-align: middle;
        font-size: 14px;
        line-height: 14px;
        color: #999;
      }

      .icon_open {
        vertical-align: middle;
      }

      .fr {
        float: right;
      }

      .gray {
        color: #ccc;
      }

      .monetization {
        padding: 0px;
        background-color: #f5f5f5;
        margin: 5px 0px 5px 0px;
      }

      .about_amp {
        background-color: #fff;
        padding: 10px 20px 10px 20px;
        vertical-align: middle;
        font-size: 12px;
        line-height: 180%;
        color: #666;
      }

      .about_v2ex {
        background-color: #334;
        padding: 10px 20px 10px 20px;
        font-size: 12px;
        line-height: 180%;
        color: #fff;
      }

      .site_bottom {
        background-color: #112;
        padding: 10px 20px 10px 20px;
        font-size: 12px;
        line-height: 180%;
        color: #fff;
        text-align: center;
      }

      .text_container>*:first-child {
        margin-top: 0;
      }

      .text_container>*:last-child {
        margin-bottom: 0;
      }

      .embedded_image {
        border: none;
      }

      amp-img > img {
        object-fit: contain;
      }

      amp-youtube, amp-vimeo {
        margin: 0px -20px 0px -20px;
      }
    </style>
    <link rel="shortcut icon" href="/static/img/icon_rayps_64.png?v=48fc0df6c7cc9d0c41936a4331575b71" type="image/png" />
  </head>
  <body>
    <div class="topic_title"><h1>linux lftp 登陆卡死在 Connecting...怎么解决？</h1></div>

    <div class="topic_author"><div class="topic_created">2015-01-30 09:38:31 +08:00</div><amp-img src="//cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" width="32" height="32" layout="fixed" alt="lx19891024" class="topic_author_avatar"></amp-img> &nbsp;lx19891024</div>

    
    <div class="topic_content text_container">怎么传图?。。。。我大概手打一下<br /><br />lftp -u asd,gggf ftp://1.1.1.1                   #不存在的用户名和ip<br />`ls' at 0 [Connecting...]                          #输入完则会卡在这里<br /><br />如图所示：随便用户名和地址，肯定都是错的，然后登陆进去按照网上搜的去掉什么 ssl，但是还是不行，就卡在这儿。<br /><br />lftp是个非常好用的工具，支持ftp,sftp..等，有丰富的命令，我想编程人员的初衷肯定不会有这么浅显的bug存在，一定有可以配置的参数，但是苦恼于找不到，所以求助大家。<br /><br />解决方案我猜想的话有两个：<br /><br />1。是设置操作超时，比如这个连接超过1分钟，则退出lftp。但是观察所有配置，只有个set net:timeout 1 这个我试了下，还是不行。这个大概的意思好像是你登陆成功了，不做操作，1分钟退出，和我想要的执行命令卡在那儿超时是两回事<br /><br />2。是解决这个[Connecting...]，出现Delaying before reconnect xx 就好办了，表示开始重新连接，这时候我设置重连次数和时间即可，但是跳不到这一环节里，就在第一步就卡住了。望大神解答</div>
    

    <div class="topic_node"><div class="topic_hits">5874 次点击</div><span class="gray">所在节点</span> &nbsp; <amp-img src="//cdn.v2ex.com/navatar/c20a/d4d7/12_large.png?m=1575944589" width="24" height="24" layout="fixed" alt="问与答" class="topic_node_avatar"></amp-img> &nbsp;<a href="/go/qna">问与答</a></div>

    <div class="monetization">

<amp-ad layout="fixed-height"
  height=100
  type="adsense"
  data-ad-client="ca-pub-3465543440750523"
  data-ad-slot="4433512694">
</amp-ad>

</div>

    <div class="topic_stats">
    6 条回复
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/gravatar/58222de7a8a20d8bf24904565211b1b1?s=73&d=retro" class="reply_author_avatar" width="24" height="24" alt="Havee" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">Havee</div><div class="reply_created">2015-01-30 09:48:17 +08:00</div><div class="reply_content">这是我的配置，你参考参考<br /><br />#debug 3<br />set xfer:clobber on<br />set ftp:charset "gbk"<br />set sftp:charset "UTF-8"<br />set file:charset "UTF-8"<br />alias gbk "set ftp:charset gbk; set file:charset UTF-8"<br />alias utf8 "set ftp:charset UTF-8; set file:charset UTF-8"<br />alias passive "set ftp:passive-mode"<br />set ftp:ssl-auth TLS-P<br />set ftp:ssl-protect-data yes<br />set ftp:use-feat no                                                                                             <br />set ssl:verify-certificate no<br />set ftp:ssl-allow no<br />set ftp:ssl-force no<br />set ftp:passive-mode yes<br />set pget:default-n 1<br />sftp:connect-program "ssh -a -x -i /path/key"<br />#set persist-retries 5<br />set reconnect-interval-base 999<br />set reconnect-interval-multiplier 1<br />#set net:limit-rate 61440,1024000<br />set prompt "\[\e[1;36m\]lftp\[\e[m\] \[\e[0;32m\]\S\? \u\@\h:\w&gt;\[\e[m\] "<br />set ftp:list-empty-ok yes</div></div>
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/avatar/0e09/5e05/1183_large.png?m=1358034086" class="reply_author_avatar" width="24" height="24" alt="ETiV" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">ETiV</div><div class="reply_created">2015-01-30 10:00:52 +08:00</div><div class="reply_content">先确定ftp服务器在别的地儿能不能连的上<br /><br />再推荐个FTP工具，ncftp套件<br /><br />上传用ncftpput，下载用ncftpget</div></div>
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" class="reply_author_avatar" width="24" height="24" alt="lx19891024" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">lx19891024</div><div class="reply_created">2015-01-30 10:02:26 +08:00</div><div class="reply_content">@<a href="/member/Havee">Havee</a> 首先谢谢回答，但是我打了你写的所有配置，然后再ls的时候，还是出现<br />`ls' at 0 [Connecting...] <br /> 不知道你是否像我一样试过随便写一个ip和用户名，然后ls会不会卡住呢。。</div></div>
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" class="reply_author_avatar" width="24" height="24" alt="lx19891024" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">lx19891024</div><div class="reply_created">2015-01-30 10:04:44 +08:00</div><div class="reply_content">@<a href="/member/ETiV">ETiV</a> 嗯？谢谢回答，现在就是不是ftp服务器的问题，我随便写一个ip和用户名。。连接就会卡死，这样导致我的程序在路由正常的时候能正常运作，而一旦路由挂程序会一直卡在那儿不退出</div></div>
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" class="reply_author_avatar" width="24" height="24" alt="lx19891024" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">lx19891024</div><div class="reply_created">2015-01-30 10:06:34 +08:00</div><div class="reply_content">完善一下过程，少打了一行。。<br /><br />lftp -u asd,gggf ftp://1.1.1.1 #不存在的用户名和ip<br />ls<br />`ls' at 0 [Connecting...] #输入完则会卡在这里<br /><br />其实不管是ls或是cd命令，都会这样卡主</div></div>
    </div>
    
    <div class="reply_item">
      <div class="reply_avatar"><amp-img src="//cdn.v2ex.com/avatar/2ce4/ce16/47379_large.png?m=1422584052" class="reply_author_avatar" width="24" height="24" alt="lx19891024" layout="fixed"></amp-img></div>
      <div class="reply_body"><div class="reply_author_name">lx19891024</div><div class="reply_created">2015-01-30 10:55:43 +08:00</div><div class="reply_content">@<a href="/member/Havee">Havee</a> 解决了，谢谢，唉2了。。就是set net:timeout 1就是连接等待时长，之前我试了怎么不行呢。。。debug3非常有用。。<br />完整的配置如下：<br />set net:timeout 1;set net:max-retries 2;set net:reconnect-interval-base 5;set net:reconnect-interval-multiplier 1;<br />set net:max-retries 2;也非常有用，设置最大重连次数，程序就不会卡住无脑连了。<br />写出来也送给出现问题的朋友们~</div></div>
    </div>
    

    <div class="pagination"><div class="fr gray">第 1 页 ／ 共 1 页</div>&nbsp;</div>

    <div class="monetization">

<amp-ad layout="fixed-height"
  height=100
  type="adsense"
  data-ad-client="ca-pub-3465543440750523"
  data-ad-slot="4433512694">
</amp-ad>

</div>

    <div class="about_amp text_container"><p>这是一个专为移动设备优化的页面（即为了让你能够在 Google 搜索结果里秒开这个页面），如果你希望参与 V2EX 社区的讨论，你可以继续到 <a href="/t/166692">V2EX</a> 上打开本讨论主题的完整版本。</p>
    <p><a href="https://www.v2ex.com/t/166692"><amp-img src="/static/img/open.png" width="24" height="24" layout="fixed" class="icon_open"></amp-img></a> <a href="https://www.v2ex.com/t/166692">https://www.v2ex.com/t/166692</a></p></div>
    <div class="about_v2ex text_container">
      <p><a href="https://www.v2ex.com/" class="white">V2EX</a> 是创意工作者们的社区，是一个分享自己正在做的有趣事物、交流想法，可以遇见新朋友甚至新机会的地方。</p>
      <p><a href="https://www.v2ex.com/" class="white">V2EX</a> is a community of developers, designers and creative people.</p>
    </div>
    <div class="site_bottom">&copy; 2017 <a href="https://www.v2ex.com/" class="white">V2EX</a></div>
    <amp-analytics type="googleanalytics" id="analytics1">
    <script type="application/json">
    {
      "vars": {
        "account": "UA-11940834-2"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
    </script>
    </amp-analytics>
  </body>
</html>