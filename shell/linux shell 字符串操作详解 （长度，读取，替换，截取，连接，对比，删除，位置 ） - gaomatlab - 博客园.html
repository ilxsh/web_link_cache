<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="referrer" content="never" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>linux shell 字符串操作详解 （长度，读取，替换，截取，连接，对比，删除，位置 ） - gaomatlab - 博客园</title>
    <meta property="og:description" content="shell,字符串操作" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=KOZafwuaDasEedEenI5aTy8aXH0epbm6VUJ0v3vsT_Q1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/AnotherEon001/bundle-AnotherEon001.css?v=U5UoQIHpO_JKVLfS-_cGiJfvyStJK8n3Tl6p4K1f3ZI1"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/AnotherEon001/bundle-AnotherEon001-mobile.css?v=08p1Qv0xTKiGzulu3Yk-n0vdvlMkpJByZdyNDoJhbTY1"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/gaochsh/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/gaochsh/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/gaochsh/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=213142;var currentBlogApp='gaochsh',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="/bundles/blog-common.js?v=smtcUT5dhdu_5eEO8CKHYoVc7DPLgEBGzp6zKkstlzg1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<div id="wrapper">
<div id="header">

<div id="top">
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/gaochsh/">gaomatlab</a></h1>
<div id="subtitle"></div>
</div>
<div id="sub"><div id="blog_stats">
<div class="BlogStats">随笔 - 150, 文章 - 0, 评论 - 3, 引用 - 0</div>
</div></div>



</div>
<div id="main_container">
<div id="main_content">
<div id="content">
	
        <div id="post_detail">
	<div class="post">
		<h2>
			<a id="cb_post_title_url" href="https://www.cnblogs.com/gaochsh/p/6901809.html">linux shell 字符串操作详解 （长度，读取，替换，截取，连接，对比，删除，位置 ）</a>
		</h2>
		<div class="postbody">
		<div id="cnblogs_post_body" class="blogpost-body"><div class="blog_title">
<h3><a href="http://justcoding.iteye.com/blog/1963463">linux shell 字符串操作详解 （长度，读取，替换，截取，连接，对比，删除，位置 ）</a></h3>
<h3>1.Linux shell 截取字符变量的前8位</h3>
<p><br />实现方法有如下几种：<br /><br /></p>
<ol>
<li>expr substr &ldquo;$a&rdquo; 1 8</li>
<li>echo $a|awk &lsquo;{print substr(,1,8)}&rsquo;</li>
<li>echo $a|cut -c1-8</li>
<li>echo $</li>
<li>expr $a : &lsquo;\(.\\).*&rsquo;</li>
<li>echo $a|dd bs=1 count=8 2&gt;/dev/null</li>

</ol>
<p>&nbsp;</p>
<h3>2.按指定的字符串截取</h3>
<p>
<br />(1)第一种方法:<br /><br />从左向右截取最后一个string后的字符串<br />${varible##*string}<br />从左向右截取第一个string后的字符串<br />${varible#*string}<br />从右向左截取最后一个string后的字符串<br />${varible%%string*}<br />从右向左截取第一个string后的字符串<br />${varible%string*}<br />&ldquo;*&rdquo;只是一个通配符可以不要<br /><br />请看下面的例子：<br /><br /></p>
<pre>$ MYVAR=foodforthought.jpg
$ echo ${MYVAR##*fo}
rthought.jpg
$ echo ${MYVAR#*fo}
odforthought.jpg
</pre>
<p><br />(2)第二种方法：<br /><br />${varible:n1:n2}:截取变量varible从n1开始的n2个字符，组成一个子字符串。可以根据特定字符偏移和长度，使用另一种形式的变量扩展，来选择特定子字符串。试着在 bash 中输入以下行：<br /><br /></p>
<pre>$ EXCLAIM=cowabunga
$ echo ${EXCLAIM:0:3}
cow
$ echo ${EXCLAIM:3:7}
abunga
</pre>
<p><br />这种形式的字符串截断非常简便，只需用冒号分开来指定起始字符和子字符串长度。<br /><br /></p>
<h3>3.按照指定要求分割：</h3>
<p>
<br />比如获取后缀名</p>
<pre>ls -al | cut -d &ldquo;.&rdquo; -f2</pre>
<p>小结：shell对应字符串的处理方法很多，根据需求灵活选择。</p>
<p>&nbsp;</p>
</div>
<div id="blog_content" class="blog_content">
<div class="iteye-blog-content-contain">
<p>在做shell批处理程序时候，经常会涉及到字符串相关操作。有很多命令语句，如：awk,sed都可以做字符串各种操作。 其实shell内置一系列操作符号，可以达到类似效果，大家知道，使用内部操作符会省略启动外部程序等时间，因此速度会非常的快。</p>
<p>&nbsp;</p>
<p><strong>一、判断读取字符串值</strong></p>
<blockquote>表达式 含义
<table class="bbcode" border="1" cellspacing="1" cellpadding="4">
<tbody>
<tr>
<td>${var}</td>
<td width="347">变量var的值, 与$var相同</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="347">&nbsp;</td>
</tr>
<tr>
<td>${var-DEFAULT}</td>
<td width="347">如果var没有被声明, 那么就以$DEFAULT作为其值 *</td>
</tr>
<tr>
<td>${var:-DEFAULT}</td>
<td width="347">如果var没有被声明, 或者其值为空, 那么就以$DEFAULT作为其值 *</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="347">&nbsp;</td>
</tr>
<tr>
<td>${var=DEFAULT}</td>
<td width="347">如果var没有被声明, 那么就以$DEFAULT作为其值 *</td>
</tr>
<tr>
<td>${var:=DEFAULT}</td>
<td width="347">如果var没有被声明, 或者其值为空, 那么就以$DEFAULT作为其值 *</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="347">&nbsp;</td>
</tr>
<tr>
<td>${var+OTHER}</td>
<td width="347">如果var声明了, 那么其值就是$OTHER, 否则就为null字符串</td>
</tr>
<tr>
<td>${var:+OTHER}</td>
<td width="347">如果var被设置了, 那么其值就是$OTHER, 否则就为null字符串</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="347">&nbsp;</td>
</tr>
<tr>
<td>${var?ERR_MSG}</td>
<td width="347">如果var没被声明, 那么就打印$ERR_MSG *</td>
</tr>
<tr>
<td>${var:?ERR_MSG}</td>
<td width="347">如果var没被设置, 那么就打印$ERR_MSG *</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="347">&nbsp;</td>
</tr>
<tr>
<td>${!varprefix*}</td>
<td width="347">匹配之前所有以varprefix开头进行声明的变量</td>
</tr>
<tr>
<td>${!varprefix@}</td>
<td width="347">匹配之前所有以varprefix开头进行声明的变量</td>
</tr>
</tbody>
</table>
</blockquote>
<p>加入了&ldquo;*&rdquo;&nbsp; 不是意思是： 当然, 如果变量var已经被设置的话, 那么其值就是$var.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong>二、字符串操作（长度，读取，替换）</strong></p>
<blockquote>表达式 含义
<table class="bbcode" border="1" cellspacing="1" cellpadding="4">
<tbody>
<tr>
<td>${#string}</td>
<td width="229">$string的长度</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="229">&nbsp;</td>
</tr>
<tr>
<td>${string:position}</td>
<td width="229">在$string中, 从位置$position开始提取子串</td>
</tr>
<tr>
<td>${string:position:length}</td>
<td width="229">在$string中, 从位置$position开始提取长度为$length的子串</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="229">&nbsp;</td>
</tr>
<tr>
<td>${string#substring}</td>
<td width="229">从变量$string的开头, 删除最短匹配$substring的子串</td>
</tr>
<tr>
<td>${string##substring}</td>
<td width="229">从变量$string的开头, 删除最长匹配$substring的子串</td>
</tr>
<tr>
<td>${string%substring}</td>
<td width="229">从变量$string的结尾, 删除最短匹配$substring的子串</td>
</tr>
<tr>
<td>${string%%substring}</td>
<td width="229">从变量$string的结尾, 删除最长匹配$substring的子串</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="229">&nbsp;</td>
</tr>
<tr>
<td>${string/substring/replacement}</td>
<td width="229">使用$replacement, 来代替第一个匹配的$substring</td>
</tr>
<tr>
<td>${string//substring/replacement}</td>
<td width="229">使用$replacement, 代替<em>所有</em>匹配的$substring</td>
</tr>
<tr>
<td>${string/#substring/replacement}</td>
<td width="229">如果$string的<em>前缀</em>匹配$substring, 那么就用$replacement来代替匹配到的$substring</td>
</tr>
<tr>
<td>${string/%substring/replacement}</td>
<td width="229">如果$string的<em>后缀</em>匹配$substring, 那么就用$replacement来代替匹配到的$substring</td>
</tr>
<tr>
<td>&nbsp;</td>
<td width="229">&nbsp;</td>
</tr>
</tbody>
</table>
</blockquote>
<p><strong>说明："*</strong>&nbsp;$substring&rdquo;可以是一个<em>正则表达式</em>.</p>
<p>&nbsp;</p>
<p>&nbsp;实例：</p>
<p>&nbsp;</p>
<p><strong>读取：</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-j" start="1">
<li>$&nbsp;echo&nbsp;${abc-<span class="string">'ok'}&nbsp;&nbsp;</span></li>
<li>ok&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;$abc&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${abc=<span class="string">'ok'}&nbsp;&nbsp;</span></li>
<li>ok&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;$abc&nbsp;&nbsp;</li>
<li>ok&nbsp;&nbsp;</li>
<li>&nbsp;&nbsp;</li>
<li>#如果abc&nbsp;没有声明&ldquo;="&nbsp;还会给abc赋值。&nbsp;&nbsp;</li>
<li>$&nbsp;var1=<span class="number">11;var2=<span class="number">12;var3=&nbsp;&nbsp;</span></span></li>
<li>$&nbsp;echo&nbsp;${!v@}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
<li>var1&nbsp;var2&nbsp;var3&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${!v*}&nbsp;&nbsp;</li>
<li>var1&nbsp;var2&nbsp;var3&nbsp;&nbsp;</li>
<li>&nbsp;&nbsp;</li>
<li>#${!varprefix*}与${!varprefix@}相似，可以通过变量名前缀字符，搜索已经定义的变量,无论是否为空值。&nbsp;&nbsp;</li>
</ol></div>
<p>&nbsp;</p>
<p><strong>1，取得字符串长度</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>string=abc12342341&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//等号二边不要有空格&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${#string}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//结果11&nbsp;&nbsp;</span></li>
<li>expr&nbsp;length&nbsp;$string&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//结果11&nbsp;&nbsp;</span></li>
<li>expr&nbsp;<span class="string">"$string"&nbsp;:&nbsp;<span class="string">".*"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//结果11&nbsp;分号二边要有空格,这里的:根match的用法差不多&nbsp;&nbsp;</span></span></span></li>
</ol></div>
&nbsp;
<p>&nbsp;<strong>2，字符串所在位置</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>expr&nbsp;index&nbsp;$string&nbsp;<span class="string">'123'&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//结果4&nbsp;字符串对应的下标是从1开始的&nbsp;&nbsp;&nbsp;</span></span></li>
</ol></div>
&nbsp;
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>str=<span class="string">"abc"&nbsp;&nbsp;</span></li>
<li>expr&nbsp;index&nbsp;$str&nbsp;<span class="string">"a"&nbsp;&nbsp;#&nbsp;1&nbsp;&nbsp;</span></li>
<li>expr&nbsp;index&nbsp;$str&nbsp;<span class="string">"b"&nbsp;&nbsp;#&nbsp;2&nbsp;&nbsp;</span></li>
<li>expr&nbsp;index&nbsp;$str&nbsp;<span class="string">"x"&nbsp;&nbsp;#&nbsp;0&nbsp;&nbsp;</span></li>
<li>expr&nbsp;index&nbsp;$str&nbsp;<span class="string">""&nbsp;&nbsp;&nbsp;#&nbsp;0&nbsp;&nbsp;&nbsp;</span></li>
</ol></div>
<p>&nbsp;</p>
<p>这个方法让我想起来了js的indexOf，各种语言对字符串的操作方法大方向都差不多，如果有语言基础的话，学习shell会很快的。</p>
<p>&nbsp;</p>
<p><strong>3，从字符串开头到子串的最大长度</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>expr&nbsp;match&nbsp;$string&nbsp;<span class="string">'abc.*3'&nbsp;<span class="comment">//结果9&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
</ol></div>
&nbsp;
<p>个人觉得这个函数的用处不大，为什么要从开头开始呢。</p>
<p>&nbsp;</p>
<p><strong>4，字符串截取</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>echo&nbsp;${string:4}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//2342341&nbsp;&nbsp;从第4位开始截取后面所有字符串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string:3:3}&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//123&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从第3位开始截取后面3位&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string:3:6}&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//123423&nbsp;&nbsp;&nbsp;从第3位开始截取后面6位&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string:&nbsp;-4}&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//2341&nbsp;&nbsp;：右边有空格&nbsp;&nbsp;&nbsp;截取后4位&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string:(-4)}&nbsp;&nbsp;&nbsp;<span class="comment">//2341&nbsp;&nbsp;同上&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>expr&nbsp;substr&nbsp;$string&nbsp;3&nbsp;3&nbsp;&nbsp;&nbsp;<span class="comment">//123&nbsp;&nbsp;从第3位开始截取后面3位&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
</ol></div>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>str=<span class="string">"abcdef"&nbsp;&nbsp;</span></li>
<li>expr&nbsp;substr&nbsp;<span class="string">"$str"&nbsp;1&nbsp;3&nbsp;&nbsp;#&nbsp;从第一个位置开始取3个字符，&nbsp;abc&nbsp;&nbsp;</span></li>
<li>expr&nbsp;substr&nbsp;<span class="string">"$str"&nbsp;2&nbsp;5&nbsp;&nbsp;#&nbsp;从第二个位置开始取5个字符，&nbsp;bcdef&nbsp;&nbsp;&nbsp;</span></li>
<li>expr&nbsp;substr&nbsp;<span class="string">"$str"&nbsp;4&nbsp;5&nbsp;&nbsp;#&nbsp;从第四个位置开始取5个字符，&nbsp;def&nbsp;&nbsp;</span></li>
<li>&nbsp;&nbsp;</li>
<li>echo&nbsp;${str:2}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;从第二个位置开始提取字符串，&nbsp;bcdef&nbsp;&nbsp;</li>
<li>echo&nbsp;${str:2:3}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;从第二个位置开始提取3个字符,&nbsp;bcd&nbsp;&nbsp;</li>
<li>echo&nbsp;${str:(-6):5}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;从倒数第二个位置向左提取字符串,&nbsp;abcde&nbsp;&nbsp;</li>
<li>echo&nbsp;${str:(-4):3}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;从倒数第二个位置向左提取6个字符,&nbsp;cde&nbsp;&nbsp;</li>
</ol></div>
<p>&nbsp;</p>
<p>上面的方法让我想起了，php的substr函数，后面截取的规则是一样的。</p>
<p>&nbsp;</p>
<p><strong>5，匹配显示内容</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li><span class="comment">//例3中也有match和这里的match不同，上面显示的是匹配字符的长度，而下面的是匹配的内容&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>expr&nbsp;match&nbsp;$string&nbsp;<span class="string">'\([a-c]*[0-9]*\)'&nbsp;&nbsp;<span class="comment">//abc12342341&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
<li>expr&nbsp;$string&nbsp;:&nbsp;<span class="string">'\([a-c]*[0-9]\)'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//abc1&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
<li>expr&nbsp;$string&nbsp;:&nbsp;<span class="string">'.*\([0-9][0-9][0-9]\)'&nbsp;<span class="comment">//341&nbsp;显示括号中匹配的内容&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
</ol></div>
<p>&nbsp;</p>
<p>这里括号的用法，是不是根其他的括号用法有相似之处呢，</p>
<p>&nbsp;</p>
<p><strong>6，截取不匹配的内容</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>echo&nbsp;${string#a*3}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//42341&nbsp;&nbsp;从$string左边开始，去掉最短匹配子串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string#c*3}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//abc12342341&nbsp;&nbsp;这样什么也没有匹配到&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string#*c1*3}&nbsp;&nbsp;&nbsp;<span class="comment">//42341&nbsp;&nbsp;从$string左边开始，去掉最短匹配子串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string##a*3}&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//41&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从$string左边开始，去掉最长匹配子串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string%3*1}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//abc12342&nbsp;&nbsp;从$string右边开始，去掉最短匹配子串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string%%3*1}&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//abc12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从$string右边开始，去掉最长匹配子串&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
</ol></div>
&nbsp;
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>str=<span class="string">"abbc,def,ghi,abcjkl"&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${str#a*c}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;输出,def,ghi,abcjkl&nbsp;&nbsp;一个井号(#)&nbsp;表示从左边截取掉最短的匹配&nbsp;(这里把abbc字串去掉）&nbsp;&nbsp;</li>
<li>echo&nbsp;${str##a*c}&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;输出jkl，&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;两个井号(##)&nbsp;表示从左边截取掉最长的匹配&nbsp;(这里把abbc,def,ghi,abc字串去掉)&nbsp;&nbsp;</li>
<li>echo&nbsp;${str#<span class="string">"a*c"}&nbsp;&nbsp;&nbsp;#&nbsp;输出abbc,def,ghi,abcjkl&nbsp;因为str中没有<span class="string">"a*c"子串&nbsp;&nbsp;</span></span></li>
<li>echo&nbsp;${str##<span class="string">"a*c"}&nbsp;&nbsp;#&nbsp;输出abbc,def,ghi,abcjkl&nbsp;同理&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${str#*a*c*}&nbsp;&nbsp;&nbsp;#&nbsp;空&nbsp;&nbsp;</li>
<li>echo&nbsp;${str##*a*c*}&nbsp;&nbsp;#&nbsp;空&nbsp;&nbsp;</li>
<li>echo&nbsp;${str#d*f)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;输出abbc,def,ghi,abcjkl,&nbsp;&nbsp;&nbsp;</li>
<li>echo&nbsp;${str#*d*f}&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;输出,ghi,abcjkl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
<li>&nbsp;&nbsp;</li>
<li>echo&nbsp;${str%a*l}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;abbc,def,ghi&nbsp;&nbsp;一个百分号(%)表示从右边截取最短的匹配&nbsp;&nbsp;&nbsp;</li>
<li>echo&nbsp;${str%%b*l}&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;两个百分号表示(%%)表示从右边截取最长的匹配&nbsp;&nbsp;</li>
<li>echo&nbsp;${str%a*c}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;abbc,def,ghi,abcjkl&nbsp;&nbsp;&nbsp;&nbsp;</li>
</ol></div>
&nbsp;
<p>这里要注意，必须从字符串的第一个字符开始，或者从最后一个开始，可以这样记忆, 井号（#）通常用于表示一个数字，它是放在前面的；百分号（%）卸载数字的后面; 或者这样记忆，在键盘布局中，井号(#)总是位于百分号（%）的左边(即前面)&nbsp; 。</p>
<p>&nbsp;</p>
<p><strong>7，匹配并且替换</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>echo&nbsp;${string/23/bb}&nbsp;&nbsp;&nbsp;<span class="comment">//abc1bb42341&nbsp;&nbsp;替换一次&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string<span class="comment">//23/bb}&nbsp;&nbsp;//abc1bb4bb41&nbsp;&nbsp;双斜杠替换所有匹配&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string/#abc/bb}&nbsp;<span class="comment">//bb12342341&nbsp;&nbsp;&nbsp;#以什么开头来匹配，根php中的^有点像&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${string/%41/bb}&nbsp;&nbsp;<span class="comment">//abc123423bb&nbsp;&nbsp;%以什么结尾来匹配，根php中的$有点像&nbsp;&nbsp;&nbsp;</span></li>
</ol></div>
<p>&nbsp;</p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>str=<span class="string">"apple,&nbsp;tree,&nbsp;apple&nbsp;tree"&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${str/apple/APPLE}&nbsp;&nbsp;&nbsp;#&nbsp;替换第一次出现的apple&nbsp;&nbsp;</li>
<li>echo&nbsp;${str<span class="comment">//apple/APPLE}&nbsp;&nbsp;#&nbsp;替换所有apple&nbsp;&nbsp;</span></li>
<li>&nbsp;&nbsp;</li>
<li>echo&nbsp;${str/#apple/APPLE}&nbsp;&nbsp;#&nbsp;如果字符串str以apple开头，则用APPLE替换它&nbsp;&nbsp;</li>
<li>echo&nbsp;${str/%apple/APPLE}&nbsp;&nbsp;#&nbsp;如果字符串str以apple结尾，则用APPLE替换它&nbsp;&nbsp;</li>
</ol></div>
&nbsp;
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>$&nbsp;test=<span class="string">'c:/windows/boot.ini'&nbsp;&nbsp;</span></li>
<li>$&nbsp;echo&nbsp;${test/\<span class="comment">//\\}&nbsp;&nbsp;</span></li>
<li>c:\windows/boot.ini&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${test<span class="comment">//\//\\}&nbsp;&nbsp;</span></li>
<li>c:\windows\boot.ini&nbsp;&nbsp;</li>
<li>&nbsp;&nbsp;</li>
<li><span class="preprocessor">#${变量/查找/替换值}&nbsp;一个&ldquo;/&rdquo;表示替换第一个，&rdquo;//&rdquo;表示替换所有,当查找中出现了：&rdquo;/&rdquo;请加转义符&rdquo;\/&rdquo;表示。&nbsp;&nbsp;</span></li>
</ol></div>
&nbsp;
<p><strong>8. 比较</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>[[&nbsp;<span class="string">"a.txt"&nbsp;==&nbsp;a*&nbsp;]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;逻辑真&nbsp;(pattern&nbsp;matching)&nbsp;&nbsp;</span></li>
<li>[[&nbsp;<span class="string">"a.txt"&nbsp;=~&nbsp;.*\.txt&nbsp;]]&nbsp;&nbsp;&nbsp;#&nbsp;逻辑真&nbsp;(regex&nbsp;matching)&nbsp;&nbsp;</span></li>
<li>[[&nbsp;<span class="string">"abc"&nbsp;==&nbsp;<span class="string">"abc"&nbsp;]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;逻辑真&nbsp;(string&nbsp;comparision)&nbsp;&nbsp;&nbsp;</span></span></li>
<li>[[&nbsp;<span class="string">"11"&nbsp;&lt;&nbsp;<span class="string">"2"&nbsp;]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;逻辑真&nbsp;(string&nbsp;comparision),&nbsp;按ascii值比较&nbsp;&nbsp;</span></span></li>
</ol></div>
&nbsp;
<p><strong>9. 连接</strong></p>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">C代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-cpp" start="1">
<li>s1=<span class="string">"hello"&nbsp;&nbsp;</span></li>
<li>s2=<span class="string">"world"&nbsp;&nbsp;</span></li>
<li>echo&nbsp;${s1}${s2}&nbsp;&nbsp;&nbsp;#&nbsp;当然这样写&nbsp;$s1$s2&nbsp;也行，但最好加上大括号&nbsp;&nbsp;</li>
</ol></div>
</div>
<div class="iteye-blog-content-contain">&nbsp;</div>
<div class="iteye-blog-content-contain"><strong>10. 字符串删除</strong>
<div id="" class="dp-highlighter">
<div class="bar">
<div class="tools">Java代码&nbsp;&nbsp;<a title="收藏这段代码"><img class="star" src="http://justcoding.iteye.com/images/icon_star.png" alt="收藏代码" /></a></div>
</div>
<ol class="dp-j" start="1">
<li>$&nbsp;test=<span class="string">'c:/windows/boot.ini'&nbsp;&nbsp;</span></li>
<li>$&nbsp;echo&nbsp;${test#/}&nbsp;&nbsp;</li>
<li>c:/windows/boot.ini&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${test#*/}&nbsp;&nbsp;</li>
<li>windows/boot.ini&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${test##*/}&nbsp;&nbsp;</li>
<li>boot.ini&nbsp;&nbsp;</li>
<li>&nbsp;&nbsp;</li>
<li>$&nbsp;echo&nbsp;${test%<span class="comment">/*}&nbsp;</span></li>
<li><span class="comment">c:/windows&nbsp;</span></li>
<li><span class="comment">$&nbsp;echo&nbsp;${test%%/*}&nbsp;</span></li>
<li><span class="comment">&nbsp;</span></li>
<li><span class="comment">#${变量名#substring正则表达式}从字符串开头开始配备substring,删除匹配上的表达式。&nbsp;</span></li>
<li><span class="comment">#${变量名%substring正则表达式}从字符串结尾开始配备substring,删除匹配上的表达式。&nbsp;</span></li>
<li><span class="comment">#注意：${test##*/},${test%/*}&nbsp;分别是得到文件名，或者目录地址最简单方法。 &nbsp;&nbsp;</span></li>
</ol></div>
</div>
</div></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<p class="postfoot">
			posted on <span id="post-date">2017-05-25 05:38</span> <a href='https://www.cnblogs.com/gaochsh/'>gaomatlab</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=6901809" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(6901809);return false;">收藏</a>
		</p>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=213142,cb_entryId=6901809,cb_blogApp=currentBlogApp,cb_blogUserGuid='afec1f4d-9c83-e411-b908-9dcfd8948a71',cb_entryCreatedDate='2017/5/25 5:38:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
	</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id='cnblogs_c1' class='c_ad_block'>
    <div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'></div>
</div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'></div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
</div>
</div>
<div id="leftmenu">


<h3>导航</h3>
<ul>
<li>
<a id="blog_nav_sitehome" href="https://www.cnblogs.com/">博客园</a></li>
<li>
<a id="blog_nav_myhome" class="two_words" href="https://www.cnblogs.com/gaochsh/">首页</a></li>
<li>
<a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li>
<a id="blog_nav_contact" accesskey="9" class="two_words" rel="nofollow" href="https://msg.cnblogs.com/send/gaomatlab">联系</a></li>
<li>
<a id="blog_nav_rss" class="two_words" href="https://www.cnblogs.com/gaochsh/rss">订阅</a>
<a id="blog_nav_rss_image" href="https://www.cnblogs.com/gaochsh/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>
</li>
<li>
<a id="blog_nav_admin" class="two_words" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>

<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
<meta name="vs_showGrid" content="False">

<h3>公告</h3>
<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>

<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>

</div>
</div>
<div class="clear"></div>
<div id="footer">

<p id="footer">
	Powered by: 
	<br />
	
	<a id="Footer1_Hyperlink3" NAME="Hyperlink1" href="https://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br />
	Copyright &copy; gaomatlab
</p>
</div>
</div>


</body>
</html>
