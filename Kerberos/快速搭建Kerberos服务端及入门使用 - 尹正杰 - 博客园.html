
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin" />
    <meta property="og:description" content="快速搭建Kerberos服务端及入门使用 作者：尹正杰 版权声明：原创作品，谢绝转载！否则将追究法律责任。 Kerberos是一种网络身份验证协议。它旨在通过使用秘密密钥加密为客户端/服务器应用程序提" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>快速搭建Kerberos服务端及入门使用 - 尹正杰 - 博客园</title>
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=sqi5FxOybx6gjGoG6Zfy1wD-0AwznLNLYOVx7Y9tIN0" />
    <link id="MainCss" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip.min.css?v=4KE41eS1YQSSwl64fGzzTUj6ijs-YQFat4AaN-g_jxc" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip-mobile.min.css?v=14y836ONdWu0_jxwS0i0t1S3KjlMl55rzUI5k1qhIdc" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/yinzhengjie/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/yinzhengjie/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/yinzhengjie/wlwmanifest.xml" />
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=hzHmTkqHaNVN1q8GZSvqZ38FGuVS4ttnbmy-w-6mfpM"></script>
    <script>
        var currentBlogId = 239012;
        var currentBlogApp = 'yinzhengjie';
        var cb_enable_mathjax = false;
        var isLogined = false;
    </script>
    
    
    
</head>
<body>
    <a name="top"></a>
    
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/yinzhengjie/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/yinzhengjie/">尹正杰</a>
</h1>
<h2>

</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/yinzhengjie/">
首页</a>
</li>
<li>


</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E5%B0%B9%E6%AD%A3%E6%9D%B0">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/yinzhengjie/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">随笔 - 
851&nbsp; </span>
<span id="stats_article_count">文章 - 
31&nbsp; </span>
<span id="stats-comment_count">评论 - 
67</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/yinzhengjie/p/10765503.html">快速搭建Kerberos服务端及入门使用</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body ">
    <p><span style="font-size: 18pt;">　　　　　　　　　　　　　　<strong>快速搭建Kerberos服务端及入门使用</strong><br /></span></p>
<p><span style="font-size: 18pt;"><strong>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　作者：尹正杰</strong></span></p>
<p><span style="font-size: 18pt;"><strong>版权声明：原创作品，谢绝转载！否则将追究法律责任。</strong></span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="font-size: 14pt;">　　</span></p>
<p><span style="font-size: 14pt;"><strong>　　Kerberos是一种网络身份验证协议。</strong><strong>它旨在通过使用秘密密钥加密为客户端/服务器应用程序提供强身份验证。</strong><strong><a href="https://web.mit.edu/">麻省理工学院</a>可以免费实施该协议。Kerberos也可用于许多商业产品。　</strong></span></p>
<p><span style="font-size: 14pt;"><strong>　　尽管有许多配置参数和设置，但配置一个受Kerberos管理的Hadoop集群还是相当简单的。只要清楚地了解在前面部分中介绍的Kerberos概念，就可以自信地使用Kerberos来保护集群。</strong></span></p>
<p><span style="font-size: 14pt;"><strong>　　总之，Kerberos是解决您的网络安全问题的解决方案。它通过网络提供身份验证和强大加密工具，帮助您保护整个企业的信息系统。</strong><strong>kerberos的官方地址：<a href="http://web.mit.edu/kerberos/" target="_blank">http://web.mit.edu/kerberos/</a>。</strong></span></p>
<p>&nbsp;</p>
<p><span style="color: #ff00ff;"><strong><span style="font-size: 14pt;">一.搭建Kerberos服务器（node101.yinzhengjie.org.cn）</span></strong></span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">博主推荐阅读：
　　Kerberos的发布页面：https:</span><span style="color: #008000;">//</span><span style="color: #008000;">kerberos.org/dist/index.html</span>
　　Kerberos的官方文档：http:<span style="color: #008000;">//</span><span style="color: #008000;">web.mit.edu/kerberos/krb5-1.17/doc/index.html</span>
　　Oracle相关的Kerberos文档：https:<span style="color: #008000;">//</span><span style="color: #008000;">docs.oracle.com/cd/E26926_01/html/E25889/intro-1.html#scrolltoc</span><span style="color: #000000;">

　　我们可以从MIT网站上下载最新版本的Kerberos，发布日期为：</span><span style="color: #800080;">2019</span>-<span style="color: #800080;">01</span>-<span style="color: #800080;">08</span>，即krb5-<span style="color: #800080;">1.17</span>.<span style="color: #0000ff;">tar</span><span style="color: #000000;">.gz。下载下来解压后可以使用编译方式安装，我们这里为了方便操作，就直接使用yum方式安装，一步到位，怎么简单怎么来～
　　要配置Kerberos身份进行验证，就必须先安装和配置Kerberos。此配置需要在使用Kerberos调整Hadoop集群配置前完成。
　　首先安装Kerberos软件，这意味着在一个集群节点上安装KDC。然后，在所有集群节点上安装Kerberos客户端。
　　配置Kerberos意味着配置KDC管理的各个方面，ticket的生命周期等。在此过程中，可以创建域，用户和服务主体，并开始为Kerberos身份验证调整集群配置。

　　主节点上安装Kerberos的步骤如下所示：</span></pre>
</div>
<p><strong><span style="font-size: 18px;">1&gt;.安装KDC 服务器</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('1a22c3aa-af93-455a-9d23-815ea4673518')"><img id="code_img_closed_1a22c3aa-af93-455a-9d23-815ea4673518" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_1a22c3aa-af93-455a-9d23-815ea4673518" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('1a22c3aa-af93-455a-9d23-815ea4673518',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_1a22c3aa-af93-455a-9d23-815ea4673518" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">yum</span> -y <span style="color: #0000ff;">install</span> krb5-server krb5-lib krb5-<span style="color: #000000;">workstation    
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 </span>*<span style="color: #000000;"> base: mirrors.aliyun.com
 </span>*<span style="color: #000000;"> extras: mirrors.aliyun.com
 </span>*<span style="color: #000000;"> updates: mirrors.aliyun.com
base                                                                                                                                                                 </span>| <span style="color: #800080;">3.6</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
extras                                                                                                                                                               </span>| <span style="color: #800080;">3.4</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql</span>-connectors-community                                                                                                                                           | <span style="color: #800080;">2.5</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql</span>-tools-community                                                                                                                                                | <span style="color: #800080;">2.5</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql56</span>-community                                                                                                                                                    | <span style="color: #800080;">2.5</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
updates                                                                                                                                                              </span>| <span style="color: #800080;">3.4</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
zabbix                                                                                                                                                               </span>| <span style="color: #800080;">2.9</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
zabbix</span>-non-supported                                                                                                                                                 |  <span style="color: #800080;">951</span> B  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql</span>-connectors-community/x86_64/primary_db                                                                                                                         |  <span style="color: #800080;">41</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
No package krb5</span>-<span style="color: #000000;">lib available.
Resolving Dependencies
</span>--&gt;<span style="color: #000000;"> Running transaction check
</span>---&gt; Package krb5-server.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be installed
</span>--&gt; Processing Dependency: libkadm5(x86-<span style="color: #800080;">64</span>) = <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6 <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: krb5-libs(x86-<span style="color: #800080;">64</span>) = <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6 <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libverto-module-base <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5srv_mit.so.<span style="color: #800080;">11</span>(kadm5srv_mit_11_MIT)(64bit) <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5clnt_mit.so.<span style="color: #800080;">11</span>(kadm5clnt_mit_11_MIT)(64bit) <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: /usr/share/dict/words <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
mysql</span>-connectors-community/x86_64/filelists_db                                                                                                                       |  <span style="color: #800080;">54</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql</span>-tools-community/x86_64/filelists_db                                                                                                                            | <span style="color: #800080;">158</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
mysql56</span>-community/x86_64/filelists_db                                                                                                                                | <span style="color: #800080;">732</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">01</span><span style="color: #000000;">     
zabbix</span>/x86_64/filelists_db                                                                                                                                           |  <span style="color: #800080;">46</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
zabbix</span>-non-supported/x86_64/filelists                                                                                                                                |  <span style="color: #800080;">660</span> B  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>     
--&gt; Processing Dependency: libkadm5srv_mit.so.<span style="color: #800080;">11</span>()(64bit) <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5clnt_mit.so.<span style="color: #800080;">11</span>()(64bit) <span style="color: #0000ff;">for</span> package: krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>---&gt; Package krb5-workstation.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be installed
</span>--&gt;<span style="color: #000000;"> Running transaction check
</span>---&gt; Package krb5-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span><span style="color: #000000;">.el7 will be updated
</span>---&gt; Package krb5-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be an update
</span>---&gt; Package libkadm5.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be installed
</span>---&gt; Package libverto-libevent.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span><span style="color: #000000;">.el7 will be installed
</span>---&gt; Package words.noarch <span style="color: #800080;">0</span>:<span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span><span style="color: #000000;">.el7 will be installed
</span>--&gt;<span style="color: #000000;"> Finished Dependency Resolution

Dependencies Resolved

</span>============================================================================================================================================================================================<span style="color: #000000;">
 Package                                            Arch                                    Version                                          Repository                                Size
</span>============================================================================================================================================================================================<span style="color: #000000;">
Installing:
 krb5</span>-server                                        x86_64                                  <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                  updates                                  <span style="color: #800080;">1.0</span><span style="color: #000000;"> M
 krb5</span>-workstation                                   x86_64                                  <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                  updates                                  <span style="color: #800080;">816</span><span style="color: #000000;"> k
Installing </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> dependencies:
 libkadm5                                           x86_64                                  </span><span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                  updates                                  <span style="color: #800080;">178</span><span style="color: #000000;"> k
 libverto</span>-libevent                                  x86_64                                  <span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span>.el7                                      base                                     <span style="color: #800080;">8.9</span><span style="color: #000000;"> k
 words                                              noarch                                  </span><span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span>.el7                                       base                                     <span style="color: #800080;">1.4</span><span style="color: #000000;"> M
Updating </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> dependencies:
 krb5</span>-libs                                          x86_64                                  <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                  updates                                  <span style="color: #800080;">803</span><span style="color: #000000;"> k

Transaction Summary
</span>============================================================================================================================================================================================<span style="color: #000000;">
Install  </span><span style="color: #800080;">2</span> Packages (+<span style="color: #800080;">3</span><span style="color: #000000;"> Dependent packages)
Upgrade             ( </span><span style="color: #800080;">1</span><span style="color: #000000;"> Dependent package)

Total download size: </span><span style="color: #800080;">4.2</span><span style="color: #000000;"> M
Downloading packages:
Delta RPMs disabled because </span>/usr/bin/<span style="color: #000000;">applydeltarpm not installed.
(</span><span style="color: #800080;">1</span>/<span style="color: #800080;">6</span>): krb5-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                          | <span style="color: #800080;">803</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">2</span>/<span style="color: #800080;">6</span>): krb5-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                        | <span style="color: #800080;">1.0</span> MB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">01</span><span style="color: #000000;">     
(</span><span style="color: #800080;">3</span>/<span style="color: #800080;">6</span>): libkadm5-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                           | <span style="color: #800080;">178</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">4</span>/<span style="color: #800080;">6</span>): krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                   | <span style="color: #800080;">816</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">5</span>/<span style="color: #800080;">6</span>): libverto-libevent-<span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span>.el7.x86_64.rpm                                                                                                                      | <span style="color: #800080;">8.9</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">6</span>/<span style="color: #800080;">6</span>): words-<span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span>.el7.noarch.rpm                                                                                                                                   | <span style="color: #800080;">1.4</span> MB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>     
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<span style="color: #000000;">
Total                                                                                                                                                       </span><span style="color: #800080;">2.4</span> MB/s | <span style="color: #800080;">4.2</span> MB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">01</span><span style="color: #000000;">     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                         <span style="color: #800080;">1</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Installing : libkadm5</span>-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                          <span style="color: #800080;">2</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Installing : words</span>-<span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span>.el7.noarch                                                                                                                                                  <span style="color: #800080;">3</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Installing : libverto</span>-libevent-<span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span>.el7.x86_64                                                                                                                                     <span style="color: #800080;">4</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Installing : krb5</span>-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                       <span style="color: #800080;">5</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Installing : krb5</span>-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                  <span style="color: #800080;">6</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Cleanup    : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span>.el7.x86_64                                                                                                                                           <span style="color: #800080;">7</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                  <span style="color: #800080;">1</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                         <span style="color: #800080;">2</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : libkadm5</span>-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                          <span style="color: #800080;">3</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : libverto</span>-libevent-<span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span>.el7.x86_64                                                                                                                                     <span style="color: #800080;">4</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-server-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                       <span style="color: #800080;">5</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : words</span>-<span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span>.el7.noarch                                                                                                                                                  <span style="color: #800080;">6</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span>.el7.x86_64                                                                                                                                           <span style="color: #800080;">7</span>/<span style="color: #800080;">7</span><span style="color: #000000;"> 

Installed:
  krb5</span>-server.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                                       krb5-workstation.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6                                                      

Dependency Installed:
  libkadm5.x86_64 </span><span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                              libverto-libevent.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">0.2</span>.<span style="color: #800080;">5</span>-<span style="color: #800080;">4</span>.el7                              words.noarch <span style="color: #800080;">0</span>:<span style="color: #800080;">3.0</span>-<span style="color: #800080;">22</span><span style="color: #000000;">.el7                             

Dependency Updated:
  krb5</span>-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6                                                                                                                                                        

Complete</span>!<span style="color: #000000;">
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# yum -y install krb5-server krb5-lib krb5-workstation</span></div>
<p><strong><span style="font-size: 18px;">2&gt;.修改KDC的配置文件</span></strong>&nbsp;</p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">cat</span> /var/kerberos/krb5kdc/<span style="color: #000000;">kdc.conf 
[kdcdefaults]
kdc_ports </span>= <span style="color: #800080;">88</span><span style="color: #000000;">
kdc_tcp_ports </span>= <span style="color: #800080;">88</span><span style="color: #000000;">

[realms]
YINZHENGJIE.COM </span>=<span style="color: #000000;"> {
  master_key_type </span>= aes256-<span style="color: #000000;">cts
  acl_file </span>= /var/kerberos/krb5kdc/<span style="color: #000000;">kadm5.acl                                    
  dict_file </span>= /usr/share/dict/<span style="color: #000000;">words
  admin_keytab </span>= /var/kerberos/krb5kdc/<span style="color: #000000;">kadm5.keytab
  supported_enctypes </span>= aes256-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-<span style="color: #000000;">crc:normal
}
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]#  


以上参数说明:
[kdcdefaults]<br />　 该部分包含在此文件中列出的所有通用的配置。
   kdc_ports　　　　　　　　　　     :指定KDC的默认端口。
   kdc_tcp_ports　　　　　　　   　 :指定KDC的TCP协议默认端口。

[realms]<br />　　该部分列出每个领域的配置。
   YINZHENGJIE.COM   　　  ： 是设定的 realms。名字随意，推荐为大写！，但须与</span>/etc/<span style="color: #000000;">krb5.conf保持一致。Kerberos 可以支持多个 realms，会增加复杂度。大小写敏感。
   master_key_type　  　   ： 默认为禁用，但如果需要256为加密，则可以下载Java加密扩展（JCE）并安装。禁用此参数时，默认使用128位加密。</span><span style="color: #000000;">
　　acl_file　　　　 　　    ： 标注了 admin 的用户权限的文件，若文件不存在，需要用户自己创建。即该参数允许为具有对Kerberos数据库的管理访问权限的UPN指定ACL。
   supported_enctypes　　  ： 指定此KDC支持的各种加密类型。
  　admin_keytab　　　　  　： KDC 进行校验的 keytab。<br />    max_life　 　　　　　　 :  该参数指定如果指定为2天。这是票据的最长存活时间。<br />　　max_renewable_life　　 :  该参数指定在多长时间内可重获取票据。<br />   dict_file　　　 　　　　 :  该参数指向包含潜在可猜测或可破解密码的文件。  </span></pre>
</div>
<p><strong><span style="font-size: 18px;">3&gt;.配置KDC服务的权限管理文件</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">cat</span> /var/kerberos/krb5kdc/kadm5.acl 　　　　#我们指定*/admin@YINZHENGJIE.COM用户为管理员用户！拥有全部权限，注意这个通配符&ldquo;*<span style="color: #000000;">&rdquo;,你懂的。
</span>*/admin@YINZHENGJIE.COM *<span style="color: #000000;">
[root@node101.yinzhengjie.org.cn </span>~]#<br /><br /><br />以上参数说明：<br />上述参数只有两列，第一列为用户名，第二列为权限分配。文件格式是：Kerberos_principal permissions [target_principal] [restrictions]，下面是对上面的文件编写参数说明。<br />*/admin@YINZHENGJIE.COM     :表示以"/admin@YINZHENGJIE.COM"结尾的用户。<br />*　　　　　　　　　　　　　　　　：表示UNP可以执行任何操作，因为权限为所有权限，因此第二个&ldquo;*&rdquo;和第一个&ldquo;*&rdquo;区别希望大家一定要弄明白哟～<br /><br /></pre>
</div>
<p><strong><span style="font-size: 18px;">4.修改Kerberos的配置文件信息（包含KDC的位置，Kerberos的admin的realms 等。需要所有使用的Kerberos的机器上的配置文件都同步。）</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">cat</span> /etc/<span style="color: #000000;">krb5.conf
# Configuration snippets may be placed </span><span style="color: #0000ff;">in</span><span style="color: #000000;"> this directory as well
includedir </span>/etc/krb5.conf.d/<span style="color: #000000;">

[logging]
 default </span>= FILE:/var/log/<span style="color: #000000;">krb5libs.log
 kdc </span>= FILE:/var/log/<span style="color: #000000;">krb5kdc.log
 admin_server </span>= FILE:/var/log/<span style="color: #000000;">kadmind.log

[libdefaults]
 dns_lookup_realm </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">
 ticket_lifetime </span>=<span style="color: #000000;"> 24h
 renew_lifetime </span>=<span style="color: #000000;"> 7d
 forwardable </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">
 rdns </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">
 pkinit_anchors </span>= /etc/pki/tls/certs/ca-<span style="color: #000000;">bundle.crt
 default_realm </span>=<span style="color: #000000;"> YINZHENGJIE.COM
 #default_ccache_name </span>= KEYRING:persistent:%<span style="color: #000000;">{uid}

[realms]
 YINZHENGJIE.COM </span>=<span style="color: #000000;"> {
  kdc </span>= node101.yinzhengjie.org.cn:<span style="color: #800080;">88</span><span style="color: #000000;">
  admin_server </span>= node101.yinzhengjie.org.cn:<span style="color: #800080;">749</span><span style="color: #000000;">
  default_domain </span>=<span style="color: #000000;"> YINZHENGJIE.COM
 }

[domain_realm]
.yinzhengjie.com </span>=<span style="color: #000000;"> YINZHENGJIE.COM
yinzhengjie.com </span>=<span style="color: #000000;"> YINZHENGJIE.COM

[kdc]
 profile </span>= /var/kerberos/krb5kdc/<span style="color: #000000;">kdc.conf
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 



以上相关配置参数说明：
[logging]：
　　Kerberos守护进程的日志记录方式。换句话说，表示 server 端的日志的打印位置。
    default                         ：默认的krb5libs.log日志文件存放路径
    kdc                             ：默认的krb5kdc.log日志文件存放路径
    admin_server                    ：默认的kadmind.log日志文件存放路径

[libdefaults]：
　　Kerberos使用的默认值，当进行身份验证而未指定Kerberos域时，则使用default_realm参数指定的Kerberos域。即每种连接的默认配置，需要注意以下几个关键的配置：
    dns_lookup_realm                ：DNS查找域名，我们可以理解为DNS的正向解析，该功能我没有去验证过，默认禁用。（我猜测该功能和domain_realm配置有关）
    ticket_lifetime                 ：凭证生效的时限，设置为7天。
    rdns                            ：我理解是和dns_lookup_realm相反，即反向解析技术，该功能我也没有去验证过，默认禁用即可。（我猜测该功能和domain_realm配置有关）
    pkinit_anchors                  ：在KDC中配置pkinit的位置，该参数的具体功能我没有做进一步验证。
    default_realm </span>=<span style="color: #000000;"> YINZHENGJIE.COM ：设置 Kerberos 应用程序的默认领域。如果您有多个领域，只需向 [realms] 节添加其他的语句。其中YINZHENGJIE.COM可以为任意名字,推荐为大写。必须跟要配置的realm的名称一致。
    default_ccache_name：           ：顾名思义，默认的缓存名称，不推荐使用该参数。
　　 
　　 renew_lifetime                  ：凭证最长可以被延期的时限，一般为7天。当凭证过期之后，对安全认证的服务的后续访问则会失败。
　　 forwardable                     ：如果此参数被设置为true，则可以转发票据，这意味着如果具有TGT的用户登陆到远程系统，则KDC可以颁发新的TGT，而不需要用户再次进行身份验证。
　　 renewable                       ：是否允许票据延迟

[realms]：
　　域特定的信息，例如域的Kerberos服务器的位置。可能有几个，每个域一个。可以为KDC和管理服务器指定一个端口。如果没有配置，则KDC使用端口88，管理服务器使用749。即列举使用的 realm域。
　　kdc                              ：代表要KDC的位置。格式是 机器:端口
　　admin_server                     ：代表admin的位置。格式是 机器:端口
   default_domain                   ：顾名思义，指定默认的域名。

[domain_realm]：
　  指定DNS域名和Kerberos域名之间映射关系。指定服务器的FQDN，对应的domain_realm值决定了主机所属的域。
　　
[kdc]：
　　kdc的配置信息。即指定kdc.conf的位置。
　　profile                          ：kdc的配置文件路径，默认值下若无文件则需要创建。<br /><br /></span></pre>
</div>
<p><strong><span style="font-size: 18px;">5&gt;.初始化KDC数据库</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# kdb5_util create -r YINZHENGJIE.COM -<span style="color: #000000;">s  　　　<span style="color: #ff00ff;">　#注意，-s选项指定将数据库的主节点密钥存储在文件中，从而可以在每次启动KDC时自动重新生成主节点密钥。记住主密钥，稍后回使用。</span>
Loading random data
Initializing database </span><span style="color: #800000;">'</span><span style="color: #800000;">/var/kerberos/krb5kdc/principal</span><span style="color: #800000;">'</span> <span style="color: #0000ff;">for</span> realm <span style="color: #800000;">'</span><span style="color: #800000;">YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">,
master key name </span><span style="color: #800000;">'</span><span style="color: #800000;">K/M@YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">
You will be prompted </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> the database Master Password.
It is important that you NOT FORGET this password.
Enter KDC database master key: 　　　　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">　#这里需要输入一个管理KDC服务器的密码！千万别忘记了，忘记的话你就只能重新初始化KDC数据库啦！（如果遇到数据库已经存在的提示，可以把/var/kerberos/krb5kdc/目录下的principal的相关文件都删除掉。默认的数据库名字都是principal。可以使用-d指定数据库名字。）</span>
Re</span>-<span style="color: #000000;">enter KDC database master key to verify: 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('41c6d8be-847f-4f1c-9271-b6cdd29e51b3')"><img id="code_img_closed_41c6d8be-847f-4f1c-9271-b6cdd29e51b3" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_41c6d8be-847f-4f1c-9271-b6cdd29e51b3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('41c6d8be-847f-4f1c-9271-b6cdd29e51b3',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_41c6d8be-847f-4f1c-9271-b6cdd29e51b3" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~]# kdb5_util create -r YINZHENGJIE.COM -<span style="color: #000000;">s
Loading random data
Initializing database </span><span style="color: #800000;">'</span><span style="color: #800000;">/var/kerberos/krb5kdc/principal</span><span style="color: #800000;">'</span> <span style="color: #0000ff;">for</span> realm <span style="color: #800000;">'</span><span style="color: #800000;">YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">,
master key name </span><span style="color: #800000;">'</span><span style="color: #800000;">K/M@YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">
You will be prompted </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> the database Master Password.
It is important that you NOT FORGET this password.
Enter KDC database master key: 
Re</span>-<span style="color: #000000;">enter KDC database master key to verify: 
kdb5_util: Cannot open DB2 database </span><span style="color: #800000;">'</span><span style="color: #800000;">/var/kerberos/krb5kdc/principal</span><span style="color: #800000;">'</span>: File exists <span style="color: #0000ff;">while</span> creating database <span style="color: #800000;">'</span><span style="color: #800000;">/var/kerberos/krb5kdc/principal</span><span style="color: #800000;">'</span><span style="color: #000000;">
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# <span style="color: #0000ff;">rm</span> -f /var/kerberos/krb5kdc/principal*<span style="color: #000000;"> 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# kdb5_util create -r YINZHENGJIE.COM -<span style="color: #000000;">s
Loading random data
Initializing database </span><span style="color: #800000;">'</span><span style="color: #800000;">/var/kerberos/krb5kdc/principal</span><span style="color: #800000;">'</span> <span style="color: #0000ff;">for</span> realm <span style="color: #800000;">'</span><span style="color: #800000;">YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">,
master key name </span><span style="color: #800000;">'</span><span style="color: #800000;">K/M@YINZHENGJIE.COM</span><span style="color: #800000;">'</span><span style="color: #000000;">
You will be prompted </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> the database Master Password.
It is important that you NOT FORGET this password.
Enter KDC database master key: 
Re</span>-<span style="color: #000000;">enter KDC database master key to verify: 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">kdb5_util: Cannot open DB2 database '/var/kerberos/krb5kdc/principal': File exists while creating database '/var/kerberos/krb5kdc/principal' 　　　　　　#此故障已解决</span></div>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# ll -a /var/kerberos/krb5kdc/　　　　　　　　　#当我们创建Kerberos数据库成功后，默认会在该目录下创建以下5个文件，我用粉色的颜色标记出来啦～<span style="color: #000000;">
total </span><span style="color: #800080;">36</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> root root <span style="color: #800080;">4096</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> .
drwxr</span>-xr-x. <span style="color: #800080;">4</span> root root <span style="color: #800080;">4096</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">20</span><span style="color: #000000;"> ..
</span>-rw-------  <span style="color: #800080;">1</span> root root   <span style="color: #800080;">80</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> .k5.YINZHENGJIE.COM　　　　　　　　　　　　<span style="color: #ff00ff;">#存储文件k5.YINZHENGJIE.COM，它默认是隐藏文件哟～
</span></span>-rw-------  <span style="color: #800080;">1</span> root root   <span style="color: #800080;">26</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">25</span><span style="color: #000000;"> kadm5.acl　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">　<span style="color: #000000;">#定义管理员权限的配置文件
</span></span></span>-rw-------  <span style="color: #800080;">1</span> root root  <span style="color: #800080;">422</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">25</span><span style="color: #000000;"> kdc.conf　　　　　　　　　　　　　　　　</span>　　<span style="color: #000000;"> #KDC的主配置文件
</span>-rw-------  <span style="color: #800080;">1</span> root root <span style="color: #800080;">8192</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> principal　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">#Kerberos数据库文件
</span></span>-rw-------  <span style="color: #800080;">1</span> root root <span style="color: #800080;">8192</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> principal.kadm5　　　　　　　　　　　　　<span style="color: #ff00ff;">　 #Kerberos数据库管理文件
</span></span>-rw-------  <span style="color: #800080;">1</span> root root    <span style="color: #800080;">0</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> principal.kadm5.lock　　　　　　　　　　　<span style="color: #ff00ff;"> #数据库锁管理文件
</span></span>-rw-------  <span style="color: #800080;">1</span> root root    <span style="color: #800080;">0</span> May <span style="color: #800080;">30</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">26</span><span style="color: #000000;"> principal.ok　　　　　　　　　　　　　　　　<span style="color: #ff00ff;"> #Kerberos数据库文件　　</span>
[root@node101.yinzhengjie.org.cn </span>~]# &nbsp;</pre>
</div>
<p><strong><span style="font-size: 18px;">6&gt;.启动KDC服务器</span></strong>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('a4caec09-72cf-4f81-8ac3-83aeab12137e')"><img id="code_img_closed_a4caec09-72cf-4f81-8ac3-83aeab12137e" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_a4caec09-72cf-4f81-8ac3-83aeab12137e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('a4caec09-72cf-4f81-8ac3-83aeab12137e',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_a4caec09-72cf-4f81-8ac3-83aeab12137e" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# systemctl enable krb5kdc 
Created symlink from </span>/etc/systemd/system/multi-user.target.wants/krb5kdc.service to /usr/lib/systemd/system/<span style="color: #000000;">krb5kdc.service.
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# systemctl start krb5kdc 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# systemctl status krb5kdc
● krb5kdc.service </span>- Kerberos <span style="color: #800080;">5</span><span style="color: #000000;"> KDC
   Loaded: loaded (</span>/usr/lib/systemd/system/<span style="color: #000000;">krb5kdc.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue </span><span style="color: #800080;">2019</span>-<span style="color: #800080;">04</span>-<span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">37</span>:<span style="color: #800080;">38</span><span style="color: #000000;"> CST; 1s ago
  Process: </span><span style="color: #800080;">5292</span> ExecStart=/usr/sbin/krb5kdc -P /var/run/krb5kdc.pid $KRB5KDC_ARGS (code=exited, status=<span style="color: #800080;">0</span>/<span style="color: #000000;">SUCCESS)
 Main PID: </span><span style="color: #800080;">5293</span><span style="color: #000000;"> (krb5kdc)
   CGroup: </span>/system.slice/<span style="color: #000000;">krb5kdc.service
           └─</span><span style="color: #800080;">5293</span> /usr/sbin/krb5kdc -P /var/run/<span style="color: #000000;">krb5kdc.pid

Apr </span><span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">37</span>:<span style="color: #800080;">38</span> node101.yinzhengjie.org.cn systemd[<span style="color: #800080;">1</span>]: Starting Kerberos <span style="color: #800080;">5</span><span style="color: #000000;"> KDC...
Apr </span><span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">37</span>:<span style="color: #800080;">38</span> node101.yinzhengjie.org.cn systemd[<span style="color: #800080;">1</span>]: Started Kerberos <span style="color: #800080;">5</span><span style="color: #000000;"> KDC.
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# systemctl start krb5kdc</span></div>
<p><strong><span style="font-size: 18px;">7&gt;.启动Kerberos服务器</span></strong>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('0c0802cc-70ae-4799-8e2a-d71c929584c7')"><img id="code_img_closed_0c0802cc-70ae-4799-8e2a-d71c929584c7" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_0c0802cc-70ae-4799-8e2a-d71c929584c7" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('0c0802cc-70ae-4799-8e2a-d71c929584c7',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_0c0802cc-70ae-4799-8e2a-d71c929584c7" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# systemctl status kadmin
● kadmin.service </span>- Kerberos <span style="color: #800080;">5</span> Password-<span style="color: #000000;">changing and Administration
   Loaded: loaded (</span>/usr/lib/systemd/system/<span style="color: #000000;">kadmin.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# systemctl enable kadmin
Created symlink from </span>/etc/systemd/system/multi-user.target.wants/kadmin.service to /usr/lib/systemd/system/<span style="color: #000000;">kadmin.service.
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# systemctl start kadmin 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# systemctl status kadmin
● kadmin.service </span>- Kerberos <span style="color: #800080;">5</span> Password-<span style="color: #000000;">changing and Administration
   Loaded: loaded (</span>/usr/lib/systemd/system/<span style="color: #000000;">kadmin.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue </span><span style="color: #800080;">2019</span>-<span style="color: #800080;">04</span>-<span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">40</span>:<span style="color: #800080;">13</span><span style="color: #000000;"> CST; 2s ago
  Process: </span><span style="color: #800080;">5361</span> ExecStart=/usr/sbin/_kadmind -P /var/run/kadmind.pid $KADMIND_ARGS (code=exited, status=<span style="color: #800080;">0</span>/<span style="color: #000000;">SUCCESS)
 Main PID: </span><span style="color: #800080;">5363</span><span style="color: #000000;"> (kadmind)
   CGroup: </span>/system.slice/<span style="color: #000000;">kadmin.service
           └─</span><span style="color: #800080;">5363</span> /usr/sbin/kadmind -P /var/run/<span style="color: #000000;">kadmind.pid

Apr </span><span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">40</span>:<span style="color: #800080;">13</span> node101.yinzhengjie.org.cn systemd[<span style="color: #800080;">1</span>]: Starting Kerberos <span style="color: #800080;">5</span> Password-<span style="color: #000000;">changing and Administration...
Apr </span><span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">40</span>:<span style="color: #800080;">13</span> node101.yinzhengjie.org.cn systemd[<span style="color: #800080;">1</span>]: Started Kerberos <span style="color: #800080;">5</span> Password-<span style="color: #000000;">changing and Administration.
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# systemctl start kadmin</span></div>
<p><strong><span style="font-size: 18px;">8&gt;.KDC 服务器上添加超级管理员账户</span></strong><strong><span style="font-size: 18px;">&nbsp;</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# kadmin.local 
Authenticating as principal root</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM with password.
kadmin.local:  
kadmin.local:  addprinc root</span>/<span style="color: #000000;">admin　　　　　　　　<span style="color: #ff00ff;">#我们为KDC添加一个管理员用户，关于管理员规则我们以及在"/var/kerberos/krb5kdc/kadm5.acl"中定义的。细心的小伙伴发现，我们写的是"root/admin"，但是创建用户却显示的是"root@admin@YINZHENGJIE.COM"</span>
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> root/<span style="color: #000000;">admin@YINZHENGJIE.COM; defaulting to no policy
Enter password </span><span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">root/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Re</span>-enter password <span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">root/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">root/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
root</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  quit
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<p>&nbsp;&nbsp;</p>
<p>&nbsp;<span style="color: #ff00ff;"><strong><span style="font-size: 14pt;">二.搭建Kerberos客户端环境</span></strong></span></p>
<p><strong><span style="font-size: 18px;">1&gt;.客户端安装</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('3d780b13-ced3-4fea-a3e7-f5cc69fa4753')"><img id="code_img_closed_3d780b13-ced3-4fea-a3e7-f5cc69fa4753" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_3d780b13-ced3-4fea-a3e7-f5cc69fa4753" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('3d780b13-ced3-4fea-a3e7-f5cc69fa4753',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_3d780b13-ced3-4fea-a3e7-f5cc69fa4753" class="cnblogs_code_hide">
<pre>[root@node103.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">yum</span> <span style="color: #0000ff;">install</span> -y krb5-lib krb5-<span style="color: #000000;">workstation
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 </span>*<span style="color: #000000;"> base: mirrors.aliyun.com
 </span>*<span style="color: #000000;"> extras: mirrors.aliyun.com
 </span>*<span style="color: #000000;"> updates: mirrors.aliyun.com
base                                                                                                                                                                 </span>| <span style="color: #800080;">3.6</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
extras                                                                                                                                                               </span>| <span style="color: #800080;">3.4</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
updates                                                                                                                                                              </span>| <span style="color: #800080;">3.4</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
zabbix                                                                                                                                                               </span>| <span style="color: #800080;">2.9</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
zabbix</span>-non-supported                                                                                                                                                 |  <span style="color: #800080;">951</span> B  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
No package krb5</span>-<span style="color: #000000;">lib available.
Resolving Dependencies
</span>--&gt;<span style="color: #000000;"> Running transaction check
</span>---&gt; Package krb5-workstation.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be installed
</span>--&gt; Processing Dependency: libkadm5(x86-<span style="color: #800080;">64</span>) = <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6 <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: krb5-libs(x86-<span style="color: #800080;">64</span>) = <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6 <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5srv_mit.so.<span style="color: #800080;">11</span>(kadm5srv_mit_11_MIT)(64bit) <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5clnt_mit.so.<span style="color: #800080;">11</span>(kadm5clnt_mit_11_MIT)(64bit) <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5srv_mit.so.<span style="color: #800080;">11</span>()(64bit) <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt; Processing Dependency: libkadm5clnt_mit.so.<span style="color: #800080;">11</span>()(64bit) <span style="color: #0000ff;">for</span> package: krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6.x86_64
</span>--&gt;<span style="color: #000000;"> Running transaction check
</span>---&gt; Package krb5-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span><span style="color: #000000;">.el7 will be updated
</span>---&gt; Package krb5-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be an update
</span>---&gt; Package libkadm5.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6 will be installed
</span>--&gt;<span style="color: #000000;"> Finished Dependency Resolution

Dependencies Resolved

</span>============================================================================================================================================================================================<span style="color: #000000;">
 Package                                           Arch                                    Version                                           Repository                                Size
</span>============================================================================================================================================================================================<span style="color: #000000;">
Installing:
 krb5</span>-workstation                                  x86_64                                  <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                   updates                                  <span style="color: #800080;">816</span><span style="color: #000000;"> k
Installing </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> dependencies:
 libkadm5                                          x86_64                                  </span><span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                   updates                                  <span style="color: #800080;">178</span><span style="color: #000000;"> k
Updating </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> dependencies:
 krb5</span>-libs                                         x86_64                                  <span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6                                   updates                                  <span style="color: #800080;">803</span><span style="color: #000000;"> k

Transaction Summary
</span>============================================================================================================================================================================================<span style="color: #000000;">
Install  </span><span style="color: #800080;">1</span> Package  (+<span style="color: #800080;">1</span><span style="color: #000000;"> Dependent package)
Upgrade             ( </span><span style="color: #800080;">1</span><span style="color: #000000;"> Dependent package)

Total download size: </span><span style="color: #800080;">1.8</span><span style="color: #000000;"> M
Downloading packages:
Delta RPMs disabled because </span>/usr/bin/<span style="color: #000000;">applydeltarpm not installed.
(</span><span style="color: #800080;">1</span>/<span style="color: #800080;">3</span>): krb5-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                          | <span style="color: #800080;">803</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">2</span>/<span style="color: #800080;">3</span>): libkadm5-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                           | <span style="color: #800080;">178</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
(</span><span style="color: #800080;">3</span>/<span style="color: #800080;">3</span>): krb5-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64.rpm                                                                                                                   | <span style="color: #800080;">816</span> kB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>     
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<span style="color: #000000;">
Total                                                                                                                                                       </span><span style="color: #800080;">3.1</span> MB/s | <span style="color: #800080;">1.8</span> MB  <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">     
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Updating   : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                         <span style="color: #800080;">1</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Installing : libkadm5</span>-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                          <span style="color: #800080;">2</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Installing : krb5</span>-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                  <span style="color: #800080;">3</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Cleanup    : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span>.el7.x86_64                                                                                                                                           <span style="color: #800080;">4</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-workstation-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                  <span style="color: #800080;">1</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                         <span style="color: #800080;">2</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Verifying  : libkadm5</span>-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span>.el7_6.x86_64                                                                                                                                          <span style="color: #800080;">3</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 
  Verifying  : krb5</span>-libs-<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">34</span>.el7.x86_64                                                                                                                                           <span style="color: #800080;">4</span>/<span style="color: #800080;">4</span><span style="color: #000000;"> 

Installed:
  krb5</span>-workstation.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6                                                                                                                                                 

Dependency Installed:
  libkadm5.x86_64 </span><span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6                                                                                                                                                         

Dependency Updated:
  krb5</span>-libs.x86_64 <span style="color: #800080;">0</span>:<span style="color: #800080;">1.15</span>.<span style="color: #800080;">1</span>-<span style="color: #800080;">37</span><span style="color: #000000;">.el7_6                                                                                                                                                        

Complete</span>!<span style="color: #000000;">
[root@node103.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node103.yinzhengjie.org.cn ~]# yum install -y krb5-lib krb5-workstation</span></div>
<p><strong><span style="font-size: 18px;">2&gt;.将服务端的配置文件拷贝到客户端上</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('aacbd352-56e4-4880-b30f-11fc43ae48c9')"><img id="code_img_closed_aacbd352-56e4-4880-b30f-11fc43ae48c9" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_aacbd352-56e4-4880-b30f-11fc43ae48c9" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('aacbd352-56e4-4880-b30f-11fc43ae48c9',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_aacbd352-56e4-4880-b30f-11fc43ae48c9" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">scp</span> /etc/krb5.conf node103.yinzhengjie.org.cn:/etc/<span style="color: #000000;">
krb5.conf                                                                                                                                                 </span><span style="color: #800080;">100</span>%  <span style="color: #800080;">711</span>     <span style="color: #800080;">2</span>.2MB/s   <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">    
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# <span style="color: #0000ff;">ssh</span><span style="color: #000000;"> node103.yinzhengjie.org.cn
Last </span><span style="color: #0000ff;">login</span>: Tue Apr <span style="color: #800080;">30</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">44</span>:<span style="color: #800080;">57</span> <span style="color: #800080;">2019</span> from <span style="color: #800080;">172.30</span>.<span style="color: #800080;">1.2</span><span style="color: #000000;">
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~]# <span style="color: #0000ff;">cat</span> /etc/<span style="color: #000000;">krb5.conf
# Configuration snippets may be placed </span><span style="color: #0000ff;">in</span><span style="color: #000000;"> this directory as well
includedir </span>/etc/krb5.conf.d/<span style="color: #000000;">

[logging]
 default </span>= FILE:/var/log/<span style="color: #000000;">krb5libs.log
 kdc </span>= FILE:/var/log/<span style="color: #000000;">krb5kdc.log
 admin_server </span>= FILE:/var/log/<span style="color: #000000;">kadmind.log

[libdefaults]
 dns_lookup_realm </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">
 ticket_lifetime </span>=<span style="color: #000000;"> 24h
 renew_lifetime </span>=<span style="color: #000000;"> 7d
 forwardable </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">
 rdns </span>= <span style="color: #0000ff;">false</span><span style="color: #000000;">
 pkinit_anchors </span>= /etc/pki/tls/certs/ca-<span style="color: #000000;">bundle.crt
 default_realm </span>=<span style="color: #000000;"> YINZHENGJIE.COM
 #default_ccache_name </span>= KEYRING:persistent:%<span style="color: #000000;">{uid}

[realms]
 YINZHENGJIE.COM </span>=<span style="color: #000000;"> {
  kdc </span>= node101.yinzhengjie.org.cn:<span style="color: #800080;">88</span><span style="color: #000000;">
  admin_server </span>= node101.yinzhengjie.org.cn:<span style="color: #800080;">749</span><span style="color: #000000;">
  default_domain </span>=<span style="color: #000000;"> YINZHENGJIE.COM
 }

[domain_realm]
.yinzhengjie.com </span>=<span style="color: #000000;"> YINZHENGJIE.COM
yinzhengjie.com </span>=<span style="color: #000000;"> YINZHENGJIE.COM
[root@node103.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# scp /etc/krb5.conf node103.yinzhengjie.org.cn:/etc/</span>&nbsp;</div>
<p><strong><span style="font-size: 18px;">3&gt;. 客户端配置文件和服务段同步后，进行登陆，验证是否可以成功登陆</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node103.yinzhengjie.org.cn ~<span style="color: #000000;">]# klist 
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~]# kinit root/<span style="color: #000000;">admin　　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">　#我们在当前终端使用root/admin@YINZHENGJIE.COM用户登陆成功啦！</span>
Password </span><span style="color: #0000ff;">for</span> root/<span style="color: #000000;">admin@YINZHENGJIE.COM: 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: root</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">04</span>/<span style="color: #800080;">30</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">01</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node103.yinzhengjie.org.cn </span>~]# </pre>
</div>
<p>&nbsp;</p>
<p><span style="color: #ff00ff;"><strong><span style="font-size: 14pt;">三.Kerberos 一些基本操作命令</span></strong></span></p>
<p><strong><span style="font-size: 18px;">1&gt;.使用kadmin.local命令进入本地管理员模式</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# kadmin.local 
Authenticating as principal root</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM with password.
kadmin.local:  
kadmin.local:  </span>?　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">　　　　　　　　　　　　　　　　　#输入&ldquo;?&rdquo;可以查看命令列表，如下所示所示。</span><span style="color: #000000;">
Available kadmin.local requests:

add_principal, addprinc, ank
                         Add principal
delete_principal, delprinc
                         Delete principal
modify_principal, modprinc
                         Modify principal
rename_principal, renprinc
                         Rename principal
change_password, cpw     Change password
get_principal, getprinc  Get principal
list_principals, listprincs, get_principals, getprincs
                         List principals
add_policy, addpol       Add policy
modify_policy, modpol    Modify policy
delete_policy, delpol    Delete policy
get_policy, getpol       Get policy
list_policies, listpols, get_policies, getpols
                         List policies
get_privs, getprivs      Get privileges
ktadd, xst               Add entry(s) to a keytab
ktremove, ktrem          Remove entry(s) from a keytab
lock                     Lock database exclusively (use with extreme caution</span>!<span style="color: #000000;">)
unlock                   Release exclusive database lock
purgekeys                Purge previously retained old keys from a principal
get_strings, getstrs     Show </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> attributes on a principal
set_string, setstr       Set a </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> attribute on a principal
del_string, delstr       Delete a </span><span style="color: #0000ff;">string</span><span style="color: #000000;"> attribute on a principal
list_requests, lr, </span>?<span style="color: #000000;">     List available requests.
quit, exit, q            Exit program.
kadmin.local:  </span></pre>
</div>
<p><strong><span style="font-size: 18px;">2&gt;. 查看已经存在的凭据</span></strong>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d1120907-a00a-4818-8748-1f01d2c68ed4')"><img id="code_img_closed_d1120907-a00a-4818-8748-1f01d2c68ed4" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_d1120907-a00a-4818-8748-1f01d2c68ed4" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d1120907-a00a-4818-8748-1f01d2c68ed4',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_d1120907-a00a-4818-8748-1f01d2c68ed4" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: listprincs</span></div>
<p><strong><span style="font-size: 18px;">3&gt;.创建凭据</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('298b4675-3891-4410-8877-dab6bf883424')"><img id="code_img_closed_298b4675-3891-4410-8877-dab6bf883424" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_298b4675-3891-4410-8877-dab6bf883424" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('298b4675-3891-4410-8877-dab6bf883424',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_298b4675-3891-4410-8877-dab6bf883424" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  
kadmin.local:  addprinc </span>-randkey hdfs/<span style="color: #000000;">node101.yinzhengjie.org.cn
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM; defaulting to no policy
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node101.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: addprinc -randkey hdfs/node101.yinzhengjie.org.cn　　　　　　　　　　　　　　　　#生成随机key的凭据</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('b6ea7c91-42f9-43e0-a7a1-a70ac4a40545')"><img id="code_img_closed_b6ea7c91-42f9-43e0-a7a1-a70ac4a40545" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b6ea7c91-42f9-43e0-a7a1-a70ac4a40545" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b6ea7c91-42f9-43e0-a7a1-a70ac4a40545',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_b6ea7c91-42f9-43e0-a7a1-a70ac4a40545" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
root</span>/<span style="color: #000000;">master@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  addprinc </span>-pw <span style="color: #800080;">123456</span> jason/<span style="color: #000000;">admin
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> jason/<span style="color: #000000;">admin@YINZHENGJIE.COM; defaulting to no policy
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">jason/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM
jason</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
root</span>/<span style="color: #000000;">master@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  
kadmin.local:  quit
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# kinit jason/<span style="color: #000000;">admin
Password </span><span style="color: #0000ff;">for</span> jason/<span style="color: #000000;">admin@YINZHENGJIE.COM: 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: jason</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">28</span>:<span style="color: #800080;">35</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">08</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">28</span>:<span style="color: #800080;">35</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: addprinc -pw 123456 jason/admin　　　　　　　　　　　　　　　　　　　　　　　　　　&nbsp;&nbsp;#生成指定key的凭据</span>&nbsp;</div>
<p><strong><span style="font-size: 18px;">4&gt;.删除凭据</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('b6bd8099-984f-4901-9fd2-0bcad9a42532')"><img id="code_img_closed_b6bd8099-984f-4901-9fd2-0bcad9a42532" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b6bd8099-984f-4901-9fd2-0bcad9a42532" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b6bd8099-984f-4901-9fd2-0bcad9a42532',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_b6bd8099-984f-4901-9fd2-0bcad9a42532" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  
kadmin.local:  delprinc hdfs</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn
Are you sure you want to delete the principal </span><span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node101.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span>? (yes/<span style="color: #000000;">no): yes
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node101.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> deleted.
Make sure that you have removed this principal from all ACLs before reusing.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: delprinc hdfs/node101.yinzhengjie.org.cn</span></div>
<p><strong><span style="font-size: 18px;">5&gt;.导出某个用户的keytab证书（使用xst命令或者ktadd命令）</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('d4b1ecb7-7380-4f50-90a0-1cdfa430386c')"><img id="code_img_closed_d4b1ecb7-7380-4f50-90a0-1cdfa430386c" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_d4b1ecb7-7380-4f50-90a0-1cdfa430386c" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d4b1ecb7-7380-4f50-90a0-1cdfa430386c',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_d4b1ecb7-7380-4f50-90a0-1cdfa430386c" class="cnblogs_code_hide">
<pre>kadmin.local:  addprinc -randkey hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM; defaulting to no policy
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  ktadd </span>-k /root/node103.keytab hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: ktadd -k /root/node103.keytab</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('bce95f17-87cc-47a4-b2c5-75d3dfdcb44a')"><img id="code_img_closed_bce95f17-87cc-47a4-b2c5-75d3dfdcb44a" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_bce95f17-87cc-47a4-b2c5-75d3dfdcb44a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('bce95f17-87cc-47a4-b2c5-75d3dfdcb44a',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_bce95f17-87cc-47a4-b2c5-75d3dfdcb44a" class="cnblogs_code_hide">
<pre>kadmin.local:  xst -k /root/node103.keytab-v2 hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">5</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/node103.keytab-<span style="color: #000000;">v2.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">5</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/node103.keytab-<span style="color: #000000;">v2.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">5</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/node103.keytab-<span style="color: #000000;">v2.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">5</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/node103.keytab-<span style="color: #000000;">v2.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">5</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/node103.keytab-<span style="color: #000000;">v2.
kadmin.local:  
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: xst -k /root/node103.keytab-v2 </span></div>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# <span style="color: #0000ff;">pwd</span>
/<span style="color: #000000;">root
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">8</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">1376</span> May  <span style="color: #800080;">5</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">05</span><span style="color: #000000;"> node103.keytab
</span>-rw------- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">460</span> May  <span style="color: #800080;">5</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">05</span> node103.keytab-<span style="color: #000000;">v2
[root@node101.yinzhengjie.org.cn </span>~]# &nbsp;</pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('30055337-bff5-4ac2-a106-14f71d4ddc3d')"><img id="code_img_closed_30055337-bff5-4ac2-a106-14f71d4ddc3d" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_30055337-bff5-4ac2-a106-14f71d4ddc3d" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('30055337-bff5-4ac2-a106-14f71d4ddc3d',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_30055337-bff5-4ac2-a106-14f71d4ddc3d" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  
kadmin.local:  xst </span>-norandkey -k /root/my.keytab hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM admin/admin@YINZHENGJIE.COM kadmin/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">3</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">3</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">3</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">3</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">3</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal admin/admin@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal admin/admin@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal admin/admin@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal admin/admin@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal admin/admin@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM with kvno <span style="color: #800080;">1</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">my.keytab.
kadmin.local:  
kadmin.local:  quit
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">4</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">1286</span> May  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span><span style="color: #000000;"> my.keytab
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# klist -k -e -<span style="color: #000000;">t my.keytab 
Keytab name: FILE:my.keytab
KVNO Timestamp           Principal
</span>---- ------------------- ------------------------------------------------------
   <span style="color: #800080;">3</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (aes256-cts-hmac-sha1-<span style="color: #800080;">96</span><span style="color: #000000;">) 
   </span><span style="color: #800080;">3</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des3-cbc-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">3</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (arcfour-<span style="color: #000000;">hmac) 
   </span><span style="color: #800080;">3</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des-hmac-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">3</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des-cbc-<span style="color: #000000;">md5) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> admin/admin@YINZHENGJIE.COM (aes256-cts-hmac-sha1-<span style="color: #800080;">96</span><span style="color: #000000;">) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> admin/admin@YINZHENGJIE.COM (des3-cbc-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> admin/admin@YINZHENGJIE.COM (arcfour-<span style="color: #000000;">hmac) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> admin/admin@YINZHENGJIE.COM (des-hmac-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> admin/admin@YINZHENGJIE.COM (des-cbc-<span style="color: #000000;">md5) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM (aes256-cts-hmac-sha1-<span style="color: #800080;">96</span><span style="color: #000000;">) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM (des3-cbc-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM (arcfour-<span style="color: #000000;">hmac) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM (des-hmac-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">18</span> kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM (des-cbc-<span style="color: #000000;">md5) 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: xst -norandkey -k /root/my.keytab hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM admin/admin@YINZHENGJIE.COM kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM　　　　#将多个principal生产一个keytab</span></div>
<p><strong><span style="font-size: 18px;">6&gt;.查看当前客户端认真用户</span></strong>&nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('aa606fcb-67fa-46fa-914c-5cfbfeb8fddd')"><img id="code_img_closed_aa606fcb-67fa-46fa-914c-5cfbfeb8fddd" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_aa606fcb-67fa-46fa-914c-5cfbfeb8fddd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('aa606fcb-67fa-46fa-914c-5cfbfeb8fddd',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_aa606fcb-67fa-46fa-914c-5cfbfeb8fddd" class="cnblogs_code_hide">
<pre>[root@node103.yinzhengjie.org.cn ~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">04</span>/<span style="color: #800080;">30</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">01</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node103.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node103.yinzhengjie.org.cn ~]# klist</span></div>
<p><strong><span style="font-size: 18px;">7&gt;.删除当前的认证的缓存</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('c5b618fa-1171-4db4-af01-68fbded10cf2')"><img id="code_img_closed_c5b618fa-1171-4db4-af01-68fbded10cf2" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c5b618fa-1171-4db4-af01-68fbded10cf2" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c5b618fa-1171-4db4-af01-68fbded10cf2',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_c5b618fa-1171-4db4-af01-68fbded10cf2" class="cnblogs_code_hide">
<pre>[root@node103.yinzhengjie.org.cn ~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">04</span>/<span style="color: #800080;">30</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">01</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">29</span>:<span style="color: #800080;">43</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# kdestroy 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist    
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node103.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node103.yinzhengjie.org.cn ~]# kdestroy</span></div>
<p><strong><span style="font-size: 18px;">8&gt;.认证用户</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('352d96e1-d369-475a-9051-e68b711bed34')"><img id="code_img_closed_352d96e1-d369-475a-9051-e68b711bed34" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_352d96e1-d369-475a-9051-e68b711bed34" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('352d96e1-d369-475a-9051-e68b711bed34',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_352d96e1-d369-475a-9051-e68b711bed34" class="cnblogs_code_hide">
<pre><span style="color: #000000;">kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  addprinc hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM; defaulting to no policy
Enter password </span><span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Re</span>-enter password <span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: addprinc hdfs/node103.yinzhengjie.org.cn　　　　　　　　　　　　　　　　　　　　　　　　　　　　&nbsp; &nbsp;#创建凭据</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('fa0fd276-b97c-4676-b8d0-9e47b5c11fda')"><img id="code_img_closed_fa0fd276-b97c-4676-b8d0-9e47b5c11fda" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_fa0fd276-b97c-4676-b8d0-9e47b5c11fda" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('fa0fd276-b97c-4676-b8d0-9e47b5c11fda',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_fa0fd276-b97c-4676-b8d0-9e47b5c11fda" class="cnblogs_code_hide">
<pre>kadmin.local:  ktadd -k /root/node103.keytab hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">2</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
kadmin.local:  
kadmin.local:  
kadmin.local:  quit
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">4</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">460</span> May  <span style="color: #800080;">5</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">13</span><span style="color: #000000;"> node103.keytab
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: ktadd -k /root/node103.keytab hdfs/node103.yinzhengjie.org.cn　　　　　　　　　　　　　　　　　#导出密钥<br /></span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('d89f9cf3-da6f-47a8-9126-7e374e66dfbd')"><img id="code_img_closed_d89f9cf3-da6f-47a8-9126-7e374e66dfbd" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_d89f9cf3-da6f-47a8-9126-7e374e66dfbd" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('d89f9cf3-da6f-47a8-9126-7e374e66dfbd',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_d89f9cf3-da6f-47a8-9126-7e374e66dfbd" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">4</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">460</span> May  <span style="color: #800080;">5</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">13</span><span style="color: #000000;"> node103.keytab
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# kinit -kt node103.keytab hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">19</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">06</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">19</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# kinit -kt node103.keytab hdfs/node103.yinzhengjie.org.cn　　　　　<span style="color: #ff00ff;"> 　#基于密钥的方式进行认证</span></span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('b3bf6130-aeab-43aa-9d8b-07084c9ea8ac')"><img id="code_img_closed_b3bf6130-aeab-43aa-9d8b-07084c9ea8ac" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_b3bf6130-aeab-43aa-9d8b-07084c9ea8ac" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('b3bf6130-aeab-43aa-9d8b-07084c9ea8ac',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_b3bf6130-aeab-43aa-9d8b-07084c9ea8ac" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">19</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">06</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">17</span>:<span style="color: #800080;">19</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# kdestroy 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist    
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# kdestroy　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　#删除认证缓存</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('64f6c719-bafb-4e06-aac2-94b45a451fff')"><img id="code_img_closed_64f6c719-bafb-4e06-aac2-94b45a451fff" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_64f6c719-bafb-4e06-aac2-94b45a451fff" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('64f6c719-bafb-4e06-aac2-94b45a451fff',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_64f6c719-bafb-4e06-aac2-94b45a451fff" class="cnblogs_code_hide">
<pre>[root@node103.yinzhengjie.org.cn ~]# kinit hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Password </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM: 
kinit: Password incorrect </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> getting initial credentials
[root@node103.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 




遇到上述问题的解决方案（原因：每次生成秘钥文件时，密码可能会进行随机改变，添加</span><span style="color: #800000;">"</span><span style="color: #800000;">-norandkey</span><span style="color: #800000;">"</span><span style="color: #000000;">即可解决问题！）
kadmin.local:  ktadd </span>-k /root/node103.keytab -norandkey hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn 
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">1</span>, encryption type aes256-cts-hmac-sha1-<span style="color: #800080;">96</span> added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">1</span>, encryption type des3-cbc-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">1</span>, encryption type arcfour-hmac added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">1</span>, encryption type des-hmac-sha1 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
Entry </span><span style="color: #0000ff;">for</span> principal hdfs/node103.yinzhengjie.org.cn with kvno <span style="color: #800080;">1</span>, encryption type des-cbc-md5 added to keytab WRFILE:/root/<span style="color: #000000;">node103.keytab.
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kinit: Password incorrect while getting initial credentials 　　　　　　　　　　　　　　　　　　　　　　　　　　#解决方案</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('8a52ca41-b8a7-484a-82c7-3caf179a00a3')"><img id="code_img_closed_8a52ca41-b8a7-484a-82c7-3caf179a00a3" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_8a52ca41-b8a7-484a-82c7-3caf179a00a3" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('8a52ca41-b8a7-484a-82c7-3caf179a00a3',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_8a52ca41-b8a7-484a-82c7-3caf179a00a3" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# klist    
klist: No credentials cache found (filename: </span>/tmp/<span style="color: #000000;">krb5cc_0)
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# kinit hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Password </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM: 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# klist 
Ticket cache: FILE:</span>/tmp/<span style="color: #000000;">krb5cc_0
Default principal: hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM

Valid starting       Expires              Service principal
</span><span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">30</span>  <span style="color: #800080;">05</span>/<span style="color: #800080;">06</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">30</span>  krbtgt/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# kinit hdfs/node103.yinzhengjie.org.cn　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">　#基于密码的方式进行认证</span></span></div>
<p><strong><span style="font-size: 18px;">9&gt;.修改Kerberos用户的密码</span></strong>&nbsp;</p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]# kpasswd hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Password </span><span style="color: #0000ff;">for</span> hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM: 　　　　　　　　　　　　　 　　　　　　　　　　　　　<span style="color: #ff00ff;">#输入旧密码</span>
Enter new password: 　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">#输入新密码，下面需要再次确认密码</span>
Enter it again: 
Password changed.
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('48bf1650-6728-4573-abe6-10bc804f0928')"><img id="code_img_closed_48bf1650-6728-4573-abe6-10bc804f0928" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_48bf1650-6728-4573-abe6-10bc804f0928" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('48bf1650-6728-4573-abe6-10bc804f0928',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_48bf1650-6728-4573-abe6-10bc804f0928" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# kadmin.local 
Authenticating as principal hdfs</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM with password.
kadmin.local:  
kadmin.local:  
kadmin.local:  change_password hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn
Enter password </span><span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Re</span>-enter password <span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Password </span><span style="color: #0000ff;">for</span> <span style="color: #800000;">"</span><span style="color: #800000;">hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> changed.
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: change_password hdfs/node103.yinzhengjie.org.cn　　　　　　　　　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">#上面是基于命令行的方式修改，我们可以在KDC服务器的shell终端进行修改，而且不需要知道原始密码也可以修改哟！</span></span></div>
<p><strong><span style="font-size: 18px;">10&gt;.创建凭据并配置其设置密码</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e49620f6-1b98-41e2-8a4e-a60ef80cfb88')"><img id="code_img_closed_e49620f6-1b98-41e2-8a4e-a60ef80cfb88" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_e49620f6-1b98-41e2-8a4e-a60ef80cfb88" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e49620f6-1b98-41e2-8a4e-a60ef80cfb88',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_e49620f6-1b98-41e2-8a4e-a60ef80cfb88" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# kadmin.local 
Authenticating as principal root</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM with password.
kadmin.local:  
kadmin.local:  addprinc admim</span>/<span style="color: #000000;">admin　　　　　　　　　　　　　　　　　　　　#我们这里为KDC添加一个管理员用户
WARNING: no policy specified </span><span style="color: #0000ff;">for</span> admim/<span style="color: #000000;">admin@YINZHENGJIE.COM; defaulting to no policy
Enter password </span><span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">admim/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Re</span>-enter password <span style="color: #0000ff;">for</span> principal <span style="color: #800000;">"</span><span style="color: #800000;">admim/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;">: 
Principal </span><span style="color: #800000;">"</span><span style="color: #800000;">admim/admin@YINZHENGJIE.COM</span><span style="color: #800000;">"</span><span style="color: #000000;"> created.
kadmin.local:  
kadmin.local:  listprincs 
K</span>/<span style="color: #000000;">M@YINZHENGJIE.COM
admim</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">admin@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">changepw@YINZHENGJIE.COM
kadmin</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
kiprop</span>/<span style="color: #000000;">node101.yinzhengjie.org.cn@YINZHENGJIE.COM
krbtgt</span>/<span style="color: #000000;">YINZHENGJIE.COM@YINZHENGJIE.COM
kadmin.local:  
kadmin.local:  quit
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]#</pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: addprinc admim/admin　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<span style="color: #ff00ff;">#我们这里为KDC添加一个管理员用户</span></span>&nbsp;</div>
<p><strong><span style="font-size: 18px;">11&gt;.获取凭据信息</span></strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('dc2cb09d-cbcd-4241-9c6a-9e091baaec4e')"><img id="code_img_closed_dc2cb09d-cbcd-4241-9c6a-9e091baaec4e" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_dc2cb09d-cbcd-4241-9c6a-9e091baaec4e" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('dc2cb09d-cbcd-4241-9c6a-9e091baaec4e',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_dc2cb09d-cbcd-4241-9c6a-9e091baaec4e" class="cnblogs_code_hide">
<pre>kadmin.local:  getprinc hdfs/<span style="color: #000000;">node103.yinzhengjie.org.cn
Principal: hdfs</span>/<span style="color: #000000;">node103.yinzhengjie.org.cn@YINZHENGJIE.COM
Expiration </span><span style="color: #0000ff;">date</span><span style="color: #000000;">: [never]
Last password change: Sun May </span><span style="color: #800080;">05</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">38</span>:<span style="color: #800080;">15</span> CST <span style="color: #800080;">2019</span><span style="color: #000000;">
Password expiration </span><span style="color: #0000ff;">date</span><span style="color: #000000;">: [never]
Maximum ticket life: </span><span style="color: #800080;">1</span> day <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">
Maximum renewable life: </span><span style="color: #800080;">0</span> days <span style="color: #800080;">00</span>:<span style="color: #800080;">00</span>:<span style="color: #800080;">00</span><span style="color: #000000;">
Last modified: Sun May </span><span style="color: #800080;">05</span> <span style="color: #800080;">18</span>:<span style="color: #800080;">38</span>:<span style="color: #800080;">15</span> CST <span style="color: #800080;">2019</span> (hdfs/<span style="color: #000000;">admin@YINZHENGJIE.COM)
Last successful authentication: [never]
Last failed authentication: [never]
Failed password attempts: </span><span style="color: #800080;">0</span><span style="color: #000000;">
Number of keys: </span><span style="color: #800080;">5</span><span style="color: #000000;">
Key: vno </span><span style="color: #800080;">3</span>, aes256-cts-hmac-sha1-<span style="color: #800080;">96</span><span style="color: #000000;">
Key: vno </span><span style="color: #800080;">3</span>, des3-cbc-<span style="color: #000000;">sha1
Key: vno </span><span style="color: #800080;">3</span>, arcfour-<span style="color: #000000;">hmac
Key: vno </span><span style="color: #800080;">3</span>, des-hmac-<span style="color: #000000;">sha1
Key: vno </span><span style="color: #800080;">3</span>, des-cbc-<span style="color: #000000;">md5
MKey: vno </span><span style="color: #800080;">1</span><span style="color: #000000;">
Attributes:
Policy: [none]
kadmin.local:  </span></pre>
</div>
<span class="cnblogs_code_collapse">kadmin.local: getprinc hdfs/node103.yinzhengjie.org.cn</span></div>
<p><strong><span style="font-size: 18px;">12&gt;.查看<code>keytab</code>文件中的帐号列表</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~]#  klist -<span style="color: #000000;">ket node103.keytab
Keytab name: FILE:node103.keytab
KVNO Timestamp           Principal
</span>---- ------------------- ------------------------------------------------------
   <span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">23</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (aes256-cts-hmac-sha1-<span style="color: #800080;">96</span><span style="color: #000000;">) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">23</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des3-cbc-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">23</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (arcfour-<span style="color: #000000;">hmac) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">23</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des-hmac-<span style="color: #000000;">sha1) 
   </span><span style="color: #800080;">1</span> <span style="color: #800080;">05</span>/<span style="color: #800080;">05</span>/<span style="color: #800080;">2019</span> <span style="color: #800080;">17</span>:<span style="color: #800080;">36</span>:<span style="color: #800080;">23</span> hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM (des-cbc-<span style="color: #000000;">md5) 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<p><strong><span style="font-size: 18px;">13&gt;.生成dump文件</span></strong></p>
<div class="cnblogs_code">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">0</span><span style="color: #000000;">
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# kdb5_util dump ./<span style="color: #000000;">slava_data
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">12</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">5640</span> May  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">10</span><span style="color: #000000;"> slava_data
</span>-rw------- <span style="color: #800080;">1</span> root root    <span style="color: #800080;">1</span> May  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">10</span><span style="color: #000000;"> slava_data.dump_ok
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('cd8e10c0-923d-4b03-985a-5d8eeaef2a48')"><img id="code_img_closed_cd8e10c0-923d-4b03-985a-5d8eeaef2a48" class="code_img_closed" src="https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_cd8e10c0-923d-4b03-985a-5d8eeaef2a48" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('cd8e10c0-923d-4b03-985a-5d8eeaef2a48',event)" src="https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_cd8e10c0-923d-4b03-985a-5d8eeaef2a48" class="cnblogs_code_hide">
<pre>[root@node101.yinzhengjie.org.cn ~<span style="color: #000000;">]# ll
total </span><span style="color: #800080;">12</span>
-rw------- <span style="color: #800080;">1</span> root root <span style="color: #800080;">5640</span> May  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">10</span><span style="color: #000000;"> slava_data
</span>-rw------- <span style="color: #800080;">1</span> root root    <span style="color: #800080;">1</span> May  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">10</span><span style="color: #000000;"> slava_data.dump_ok
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# <span style="color: #0000ff;">cat</span><span style="color: #000000;"> slava_data.dump_ok 
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# <span style="color: #0000ff;">cat</span><span style="color: #000000;"> slava_data
kdb5_util load_dump version </span><span style="color: #800080;">7</span><span style="color: #000000;">
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">19</span>      <span style="color: #800080;">3</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">0</span>       K/M@YINZHENGJIE.COM     <span style="color: #800080;">8388672</span> <span style="color: #800080;">86400</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">9</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">0100010000000000</span>   <span style="color: #800080;">2</span>       <span style="color: #800080;">32</span>      2d23c85c64625f6372656174696f6e4059494e5a48454e474a49452e434f4d00        <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">18</span>      <span style="color: #800080;">62</span>      200027f351dbb024cc9544e87b02c87d86c7d80d0610ae4c59c340a69a04db0781b3d94b5611ed20eb9a5ec2b0dc7e1245fac0cdb87295e9180ef910bb5b       -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">27</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       admin/admin@YINZHENGJIE.COM     <span style="color: #800080;">0</span>       <span style="color: #800080;">86400</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">31</span>      6c23c85c726f6f742f61646d696e4059494e5a48454e474a49452e434f4d00  <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       6c23c85c        <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">18</span>      6220003deb4f098457d84e676bbd3f91278f3cac8306ddf328535c1917bf98690248bc12341cd0a27de4d590fb18f28cb0d226929a4a06a83d244f5a4cbdb5     <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      1800715234ed6f50be5336e4369af0f9cefb9d4f177eda96090b7fbca4b8d3ff07964b2a318cf1a777f1e2e76fa206f2b44258457442       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      10004a33deeb70728102e822c55f2c42aa304e705780d8fd30b397275bbbebd3abedf187fffb2204855a09735e1b       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      08001a1fea4a829566f3f23f3cf3db9681920f891798ad5f8644fe5d5b3e1f4f94cd64280273    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">38</span>      080046301a43121ee80bc1540d9662f9991322c8b5fb15b630033b1de23d587622bec8b0b966       -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">47</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       hdfs/node103.yinzhengjie.org.cn@YINZHENGJIE.COM <span style="color: #800080;">0</span>       <span style="color: #800080;">86400</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">31</span>      17bdce5c686466732f61646d696e4059494e5a48454e474a49452e434f4d00  <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       17bdce5c        <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span> <span style="color: #800080;">18</span>       <span style="color: #800080;">62</span>      2000a27914a2893faf324c36d41d92b2b6cc66de57349f76d4e24eb4d3344616b043d2e68124d2d0c6af19d900cabb13f58c4d7285b002a33944f305ed14    <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      180060e43337a724ecfb60790d5d848dfd081c6ba721619b5262c73837ca04a6aa747dcbf861e145d2933107f267bbe8c96590d2b6bc       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      10009507be719a35300d09a6b197124a3bbba94f6ab14ce177b5783965e2d7ddef85c080b5b865e36893e623fe35       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      0800b0957be862834546dacdc5bd72e00553cdca26621570054fe2630d92f18d636ea12b59f9    <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">3</span>       380800f9ff7956e69506992b4dd15ca75cb5e6f8f2cf2a6ccf68829e060e4b2a1f9a4b397a2f75     -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">28</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       kadmin/admin@YINZHENGJIE.COM    <span style="color: #800080;">8388612</span> <span style="color: #800080;">10800</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">30</span>      2d23c85c6b6462355f7574696c4059494e5a48454e474a49452e434f4d00    <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       2d23c85c        <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">18</span>      622000a7007154dab2d522e76038c0fb117c56444b59cb94cfd33d4e934e52e365bb0679f098877090409b41146ceb8f79f407eac9dbe16181fe5bff49e269     <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      1800d36c14c38aca14fd2a9961c5f5d330f11a4afb3ccf91b1ef9f4325e285569ede24ec5b3213b3fd5095ba0851946d0e9286cd678d       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      10005947782c3a6209e40e533ea91de7a3c068af0e9753924f11b8293c77e2699d3521e53d82fe75844696f30781       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      080044457a47548115f25c4d6d521236b30820d6ee69633836a9e36142759562f52ed4300920    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">38</span>      0800be6779e8afe4e3302a888b4f5dcfbe6922a20a47b8369336bf66a0f9d53a7f99ce34c3d5       -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">31</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       kadmin/changepw@YINZHENGJIE.COM <span style="color: #800080;">8396804</span> <span style="color: #800080;">300</span>     <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">30</span>      2d23c85c6b6462355f7574696c4059494e5a48454e474a49452e434f4d00    <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       2d23c85c        <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">18</span>      622000a954e4ff1dcb31de049920a9fb621c387733892be4fc44326511037c316e81e704d241662b8d17f007411181a434d276012e232e012c48c2a25c0801     <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      1800eb302773f9f77e7d4836a8494ad381a66f5dbf300d932d68dfcdcae2ac1522ad9083b779244aa009e15af3532c1057e1ba75e4a4       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      100062701165f26c72370374182c611eaff199e689884402b210808fdfc68185d5bdd8d2c948a0d7f6d386c5fb4a       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      08001b482af030d5f5c49d89e87e39fa350d54e48cb0e3c23c7688f02540592fcf0e7c34dbd7    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">38</span>      0800968bd1d3bc8a1103da97fead74f72521bca682858e934a26f584cfcec006a74dfa931271       -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">49</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       kadmin/node101.yinzhengjie.org.cn@YINZHENGJIE.COM       <span style="color: #800080;">8388612</span> <span style="color: #800080;">10800</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">30</span>      2d23c85c6b6462355f7574696c4059494e5a48454e474a49452e434f4d00    <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       2d23c85c        <span style="color: #800080;">1</span> <span style="color: #800080;">18</span>       <span style="color: #800080;">62</span>      20000d1edbb71ba50cfb52191a3f60056b02c6b647b3bddd2365641b5ed274ce75e38226ac815ea7f29f34a3cf7d45457468882556994365aa4567ae8806    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      18002eaf1945ca01022fbb4395754f019d9e2266437dfd9c525f712f804e0f04d9d2bbdc033adb2bf6e361efb448ddfe2249e9fd748e       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      100013a087c5e95dcc5127979eb347681f58a972d31bbf5ec3e2397de453c076f3e1d4e27a05f29387bb3e7d6d8a       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      0800dde3aadd2c399091eb5d462d2ad7d29cb9be02047a80c9d94d2c7914f9595961ee49329c    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       38080006a3bb181af166f105beb9e78de8aeb55204d7f6aebb79c03d1bb321b59b6e007641479a     -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">49</span>      <span style="color: #800080;">4</span>       <span style="color: #800080;">5</span>       <span style="color: #800080;">0</span>       kiprop/node101.yinzhengjie.org.cn@YINZHENGJIE.COM       <span style="color: #800080;">0</span>       <span style="color: #800080;">86400</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">24</span>      12345c010000000000000000000000000000000200000000   <span style="color: #800080;">2</span>       <span style="color: #800080;">30</span>      2d23c85c6b6462355f7574696c4059494e5a48454e474a49452e434f4d00    <span style="color: #800080;">8</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">0100</span>    <span style="color: #800080;">1</span>       <span style="color: #800080;">4</span>       2d23c85c        <span style="color: #800080;">1</span> <span style="color: #800080;">18</span>       <span style="color: #800080;">62</span>      2000d426113b32e7b511f397fdcc7fafc9abc1ce6aada822d4352c2ea710476db41f731043c80dcf04eadd2a607273efa1a3c9b1a111c31b8483aa62d060    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      180055a62dfe305193d6d0833c897e62e4ea3a36bec996f11e66e4d9bf62d193f1bb1a80151b2e8e18fff121d1698a8d529624956adf       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">23</span>      <span style="color: #800080;">46</span>      10004205e4b7b21c11bcaedfd6098ff08865d3f18260405c8bf2af9a8b5cb6bc80d871c957e4fce79eb786ed60bd       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      08004bc251b9b292174671b35654eef34bb63e6375f6f10766819f478e2d1760ece27fa05ec0    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       380800c71084e06b93c4c9b82d36a93f30fc51baf23b1071382d7ba70eab96d6048921ab43fe55     -<span style="color: #800080;">1</span><span style="color: #000000;">;
princ   </span><span style="color: #800080;">38</span>      <span style="color: #800080;">38</span>      <span style="color: #800080;">1</span>       <span style="color: #800080;">6</span>       <span style="color: #800080;">0</span>       krbtgt/YINZHENGJIE.COM@YINZHENGJIE.COM  <span style="color: #800080;">8388608</span> <span style="color: #800080;">86400</span>   <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">0</span>       <span style="color: #800080;">2</span>       <span style="color: #800080;">32</span>      2d23c85c64625f6372656174696f6e4059494e5a48454e474a49452e434f4d00   <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">18</span>      <span style="color: #800080;">62</span>      2000debfa86947904982fc72598525375374abc4ea880a2a79c20a297cff937e0c6e034dfb5f48494f3f1cf035e117f85dc0062935c0bc0b799bbf4727e0       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">16</span>      <span style="color: #800080;">54</span>      1800842c873c282cc64415704b50085258d6290d6f3ff101669996698fda83931039a90d963d7a786c796ea8e5c4a3d1b7a438086288    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">2346</span>       1000cf38c0dbeaec907e938b966f4e8b56aa6c53c2d65ae6ce0977825d3f8cf3d1b536357491e691cd21a62b97e6    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">8</span>       <span style="color: #800080;">38</span>      080034e54b49e6d927ef9b160c8ef72b7fb98fd12be022b441ddceb99294f86e7e8958a78de5       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">3</span>       <span style="color: #800080;">38</span>      08004329becd13a3192dcbb6d48216071fc2d504bd109482b5d139b67b2d5247e9b3c228a06d    <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">1</span>       <span style="color: #800080;">38</span>      08005d5ced5cd08fbd6aa8666ffa1b42779c488cbe406734b71ac44117f779a63b0e46f907a7       -<span style="color: #800080;">1</span><span style="color: #000000;">;
[root@node101.yinzhengjie.org.cn </span>~<span style="color: #000000;">]# 
[root@node101.yinzhengjie.org.cn </span>~]# </pre>
</div>
<span class="cnblogs_code_collapse">[root@node101.yinzhengjie.org.cn ~]# cat slava_data</span></div>
<p><strong><span style="font-size: 18px;">14&gt;.</span></strong></p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 18px;">15&gt;.</span></strong></p>
<p>&nbsp;</p>
<p>参考链接：</p>
<p>　　<a href="https://www.cnblogs.com/chwilliam85/p/9679845.html">https://www.cnblogs.com/chwilliam85/p/9679845.html</a></p>
<p>　　<a href="https://blog.csdn.net/sinat_32176947/article/details/79605499">https://blog.csdn.net/sinat_32176947/article/details/79605499</a></p>
<p>　　<a href="http://blog.sina.com.cn/s/blog_15d0521760102wxts.html">http://blog.sina.com.cn/s/blog_15d0521760102wxts.html</a></p>
<p>&nbsp;</p>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2019-04-24 22:44</span>&nbsp;<a href="https://www.cnblogs.com/yinzhengjie/">尹正杰</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>) <a href="https://i.cnblogs.com/EditPosts.aspx?postid=10765503" rel="nofollow"> 编辑</a> <a href="javascript:void(0)" onclick="AddToWz(10765503); return false;">收藏</a>
</div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/9.12.0/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 239012, cb_blogApp = 'yinzhengjie', cb_blogUserGuid = '7a8ea00a-413c-e511-b908-9dcfd8948a71';
    var cb_entryId = 10765503, cb_entryCreatedDate = '2019-04-24 22:44', cb_postType = 1; 
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>

<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <script>
        googletag.cmd.push(function () {
            googletag.defineSlot("/1090369/C1", [300, 250], "div-gpt-ad-1546353474406-0").addService(googletag.pubads());
            googletag.defineSlot("/1090369/C2", [468, 60], "div-gpt-ad-1539008685004-0").addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;"></div>
    </div>
    <div id="under_post_news"></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;">
            <script>
                if (new Date() >= new Date(2018, 9, 13)) {
                    googletag.cmd.push(function () { googletag.display("div-gpt-ad-1539008685004-0"); });
                }
            </script>
        </div>
    </div>
    <div id="under_post_kb"></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
        setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
        deliverAdT2();
        deliverAdC1();
        deliverAdC2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2019 尹正杰
<br /><span id="poweredby">Powered by .NET Core 3.0.0 on Linux</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    
</body>
</html>
