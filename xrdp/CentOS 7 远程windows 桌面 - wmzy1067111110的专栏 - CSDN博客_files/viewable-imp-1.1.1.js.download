!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=function(){function e(e){this.percentage=e}return e.prototype.isGreaterThanOrEqual=function(e){return this.percentage>=e.percentage},e.prototype.isLessThan=function(e){return this.percentage<e.percentage},e.prototype.toRatio=function(){return new n.ViewableAreaRatio(this.percentage/100)},e.prototype.toNumber=function(){return this.percentage},e}();t.ViewableAreaPer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=r(2);function o(){if("function"!=typeof IntersectionObserver)throw new i.KnownError(n.ErrorId.IOApiNotSupport)}t.getBoundingClientRect=function(e){if("function"!=typeof e.getBoundingClientRect)throw new i.KnownError(n.ErrorId.BoundingClientRectNotSupport);return e.getBoundingClientRect()},t.elementFromPoint=function(e,t){if("function"!=typeof e.elementFromPoint)throw new i.KnownError(n.ErrorId.ElementFromPointNotSupport);return e.elementFromPoint(t.x,t.y)},t.frameElementOfWindow=function(e){try{var t=e.frameElement;if(void 0!=t)return t}catch(e){}throw new i.KnownError(n.ErrorId.CrossDomain)},t.testIntersectionObserver=o,t.newIntersectionObserver=function(e,t){return o(),new IntersectionObserver(e,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.id=e,this.name="KnownError",this.message=this.id.toString()}return e.prototype.toString=function(){return this.name+": "+this.id},e}();t.KnownError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function e(e){this.durationMs=e}return e.prototype.add=function(t){return new e(this.durationMs+t.durationMs)},e.prototype.toViewableDuration=function(){return new n.ViewableDuration(this.durationMs)},e.prototype.isEmpty=function(){return 0==this.durationMs},e.prototype.toNumber=function(){return this.durationMs},e.empty=new e(0),e}();t.Duration=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.durationMs=e}return e.prototype.add=function(t){return new e(this.durationMs+t.durationMs)},e.prototype.isGreaterThanOrEqual=function(e){return this.durationMs>=e.durationMs},e.prototype.isEmpty=function(){return 0==this.durationMs},e.prototype.toNumber=function(){return this.durationMs},e.empty=new e(0),e}();t.ViewableDuration=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(8),o=r(15),u=function(){function e(e,t,r,n){this.left=e,this.right=t,this.top=r,this.bottom=n,this.width=Math.max(this.right-this.left,0),this.height=Math.max(this.bottom-this.top,0),this.area=this.width*this.height}return e.prototype.move=function(t,r){return new e(this.left+t,this.right+t,this.top+r,this.bottom+r)},e.prototype.overlap=function(t){return new e(Math.max(this.left,t.left),Math.min(this.right,t.right),Math.max(this.top,t.top),Math.min(this.bottom,t.bottom))},e.prototype.isEmpty=function(){return 0==this.area},e.prototype.toViewableArea=function(){return new n.ViewableArea(this.area)},e.prototype.toBannerArea=function(){return new i.BannerArea(this.width,this.height)},e.prototype.centerPoint=function(){return new o.Point(this.left+Math.floor(this.width/2),this.top+Math.floor(this.height/2))},e.from=function(t){return new e(t.left,t.right,t.top,t.bottom)},e}();t.Rectangle=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.area=e}return e.prototype.percentageOf=function(e){return new n.ViewableAreaPer(Math.floor(100*this.area/e.toNumber()))},e.prototype.isEmpty=function(){return 0==this.area},e.prototype.toNumber=function(){return this.area},e.empty=new e(0),e}();t.ViewableArea=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e){this.ratio=e}return e.prototype.toPercentage=function(){return new n.ViewableAreaPer(Math.floor(100*this.ratio))},e.prototype.toNumber=function(){return this.ratio},e}();t.ViewableAreaRatio=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.width=e,this.height=t,this.area=e*t}return e.prototype.isEmpty=function(){return 0==this.area},e.prototype.toNumber=function(){return this.area},e}();t.BannerArea=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BannerAreaIsEmpty=1]="BannerAreaIsEmpty",e[e.BoundingClientRectNotSupport=2]="BoundingClientRectNotSupport",e[e.CrossDomain=101]="CrossDomain",e[e.ElementFromPointNotSupport=102]="ElementFromPointNotSupport",e[e.IOApiNotSupport=201]="IOApiNotSupport"}(t.ErrorId||(t.ErrorId={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(2),u=r(9),a=function(){function e(e,t){this.thresholdPer=e,this.viewableDuration=t}return e.apply=function(t,r){return new e(new n.ViewableAreaPer(t),new i.ViewableDuration(r))},e.prototype.isAreaSatisfied=function(e,t){return e.percentageOf(t).isGreaterThanOrEqual(this.thresholdPer)},e.prototype.isDurationSatisfied=function(e){return e.isGreaterThanOrEqual(this.viewableDuration)},e.select=function(t){var r=t.toNumber();if(r>=242500)return e.largeBannerRule;if(r>0)return e.bannerRule;throw new o.KnownError(u.ErrorId.BannerAreaIsEmpty)},e.bannerRule=e.apply(50,1e3),e.largeBannerRule=e.apply(30,1e3),e}();t.ViewableImpRule=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BasicApi=1]="BasicApi",e[e.IOApi=2]="IOApi"}(t.MeasureId||(t.MeasureId={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(14),o=r(17),u=r(20),a=r(22);window.microadViewableImpMeasure||(window.microadViewableImpMeasure=function(e,t,r){var s=new n.MeasureSelector(new o.BasicApiMeasureFactory,new u.IOApiMeasureFactory),c=new a.JsonResponseFactory;try{var p=s.select(new i.MeasureTarget(window,e));p.start(function(e){var r=c.viewableJson(p.id,e);t(r)},function(e){var t=c.undeterminedJson(e);r(t)}),window.document.addEventListener("visibilitychange",function(){var e=window.document.visibilityState;"hidden"==e?p.pause():"visible"==e&&p.continue()})}catch(e){var l=c.undeterminedJson(e);r(l)}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.adPosMeasureFactory=e,this.ioApiMeasureFactory=t}return e.prototype.select=function(e){try{return this.testedIOApiMeasure(e)}catch(t){return this.testedAdPosMeasure(e)}},e.prototype.testedAdPosMeasure=function(e){var t=this.adPosMeasureFactory.apply(e);return t.test(),t},e.prototype.testedIOApiMeasure=function(e){var t=this.ioApiMeasureFactory.apply(e);return t.test(),t},e}();t.MeasureSelector=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(8),o=r(16),u=r(1),a=function(){function e(e,t){this.win=e,this.element=t}return e.prototype.toRelativeRectangle=function(){var e=u.getBoundingClientRect(this.element),t=n.Rectangle.from(e);return new o.RelativeRectangle(this.win,this.element,t)},e.prototype.isCssInvisible=function(){var e=this.win.getComputedStyle(this.element,null),t=e.getPropertyValue("visibility"),r=e.getPropertyValue("display"),n=this.win.document.hidden;return"hidden"===t||"none"===r||n},e.prototype.isCssVisible=function(){return!this.isCssInvisible()},e.prototype.toBannerArea=function(){var e=u.getBoundingClientRect(this.element);return new i.BannerArea(e.width,e.height)},e}();t.MeasureTarget=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){this.x=e,this.y=t}}();t.Point=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(6),o=r(1),u=function(){function e(e,t,r){this.win=e,this.element=t,this.rectangle=r}return e.prototype.viewableArea=function(){var e=this.viewableRect();return e.isEmpty()?i.ViewableArea.empty:this.isDomObscuring(e)?i.ViewableArea.empty:this.hasParent()?this.parent().viewableArea():e.toViewableArea()},e.prototype.hasParent=function(){return this.win.parent!=this.win},e.prototype.parent=function(){if(!this.hasParent())return this;var t=this.win.parent,r=o.frameElementOfWindow(this.win),n=o.getBoundingClientRect(r);return new e(t,r,this.viewableRect().move(n.left,n.top))},e.prototype.viewableRect=function(){return this.viewPort().overlap(this.rectangle)},e.prototype.isDomObscuring=function(e){var t=e.centerPoint(),r=o.elementFromPoint(this.win.document,t);return null==r||this.element!=r&&!this.element.contains(r)},e.prototype.viewPort=function(){var e=Math.min(this.win.document.body.clientWidth,this.win.document.documentElement.clientWidth),t=Math.min(this.win.document.body.clientHeight,this.win.document.documentElement.clientHeight);return new n.Rectangle(0,e,0,t)},e}();t.RelativeRectangle=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(18),o=function(){function e(){this.duration=new n.Duration(200)}return e.prototype.apply=function(e){return new i.BasicApiMeasure(this.duration,e)},e}();t.BasicApiMeasureFactory=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),i=r(3),o=r(10),u=r(11),a=function(){function e(e,t){this.intervalDuration=e,this.target=t,this.id=u.MeasureId.BasicApi,this.paused=!1,this.intervalId=void 0}return e.prototype.test=function(){for(var e=this.target.toRelativeRectangle();e.hasParent();)e=e.parent()},e.prototype.start=function(e,t){var r=this,u=void 0,a=void 0;this.intervalId=setInterval(function(){try{if(r.paused)return void(a=void 0);if(void 0==u){var s=r.target.toBannerArea();if(s.isEmpty())return;u=o.ViewableImpRule.select(s)}void 0==a?a=new n.MeasuredResult(r.isAreaViewabled(u),i.Duration.empty):(a=a.addMeasuredResult(r.isAreaViewabled(u),r.intervalDuration),u.isDurationSatisfied(a.viewableDuration())&&(r.clearInterval(),e(u)))}catch(e){r.clearInterval(),t(e)}},this.intervalDuration.toNumber())},e.prototype.pause=function(){this.paused=!0},e.prototype.continue=function(){this.paused=!1},e.prototype.clearInterval=function(){void 0!=this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},e.prototype.isAreaViewabled=function(e){if(this.target.isCssInvisible())return!1;var t=this.target.toBannerArea(),r=this.target.toRelativeRectangle().viewableArea();return e.isAreaSatisfied(r,t)},e}();t.BasicApiMeasure=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(3),o=function(){function e(e,t){this.areaViewabled=e,this.duration=t}return e.prototype.viewableDuration=function(){return this.areaViewabled?this.duration.toViewableDuration():n.ViewableDuration.empty},e.prototype.addMeasuredResult=function(t,r){return this.areaViewabled==t?new e(t,this.duration.add(r)):new e(t,i.Duration.empty)},e}();t.MeasuredResult=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),i=function(){function e(){}return e.prototype.apply=function(e){return new n.IOApiMeasure(e)},e}();t.IOApiMeasureFactory=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(7),o=r(1),u=r(11),a=function(){function e(e){this.target=e,this.id=u.MeasureId.IOApi,this.viewabled=!1,this.observer=void 0,this.timerId=void 0,this.observerInit={threshold:[n.ViewableImpRule.largeBannerRule.thresholdPer.toRatio().toNumber(),n.ViewableImpRule.bannerRule.thresholdPer.toRatio().toNumber()]}}return e.prototype.test=function(){o.testIntersectionObserver()},e.prototype.start=function(e,t){this.observer=this.newIntersectionObserver(e,t),this.observer.observe(this.target.element)},e.prototype.pause=function(){this.unobserve()},e.prototype.continue=function(){this.viewabled||this.observer.observe(this.target.element)},e.prototype.newIntersectionObserver=function(e,t){var r=this,u=void 0;return o.newIntersectionObserver(function(o){try{if(void 0==u){if(r.target.isCssInvisible())return;var a=r.target.toBannerArea();if(a.isEmpty())return;u=n.ViewableImpRule.select(a)}new i.ViewableAreaRatio(o[0].intersectionRatio).toPercentage().isGreaterThanOrEqual(u.thresholdPer)?void 0==r.timerId&&(r.timerId=setTimeout(function(){r.target.isCssVisible()&&(r.viewabled=!0,r.unobserve(),e(u))},u.viewableDuration.toNumber())):r.clearTimeout()}catch(e){r.unobserve(),t(e)}},this.observerInit)},e.prototype.unobserve=function(){void 0!=this.observer&&(this.observer.unobserve(this.target.element),this.observer.disconnect()),this.clearTimeout()},e.prototype.clearTimeout=function(){void 0!=this.timerId&&(clearTimeout(this.timerId),this.timerId=void 0)},e}();t.IOApiMeasure=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(){function e(){}return e.prototype.viewableJson=function(e,t){return{viewable:{measure_id:e,threshold_per:t.thresholdPer.toNumber(),continuous_ms:t.viewableDuration.toNumber()}}},e.prototype.undeterminedJson=function(e){return e instanceof n.KnownError?{undetermined:{error_id:e.id}}:{undetermined:{error_message:e.message}}},e}();t.JsonResponseFactory=i}]);