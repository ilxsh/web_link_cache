
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<title>使用xrdp实现Windows 远程桌面 Ubuntu Linux_Linux教程_Linux公社-Linux系统门户网站</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<link rel="icon" href="../../favicon.ico" type="image/x-icon"/>
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"/>
<meta name="description" content="一般情况下我们用ssh客户端远程登陆Linux系统，至于图形界面下的Linux远程登陆工具，我们一般都会想到vnc，但它的安全性不够，在"/>
<meta name="keywords" content="xrdp,使用xrdp实现Windows 远程桌面 Ubuntu Linux,Linux,Linux教程,Linux系统,Linux安装,Ubuntu,Fedora,RedHat,SUSE,CentOS,红旗Linux"/>
<link rel="canonical" href="https://www.linuxidc.com/Linux/2015-05/117835.htm"/>
<meta name="generator" content="Linux公社"/>
<meta name="generator" content="Linux"/>
<link rel="stylesheet" href="../../style/systems/style.css" type="text/css"/>
<meta name="generator" content="专业的Linux网站"/>
<script type="text/javascript" src="../../inc/jquery.js"></script>
<script type="text/javascript" src="../../inc/iwms.js"></script>
<script type="text/javascript">iwms.urlPrefix="../../";</script>

<script type="text/javascript" src="../../inc/show.js"></script>
</head>
<body>
<div class="topBar">
	<div class="twidth">
	
	<div style="float:right">
		<a href="http://m.linuxidc.com" rel="nofollow">手机版</a>
		<script type="text/javascript" src="../../inc/language.js"></script>
	</div>
	
	<div id="topUser">你好，游客 <a href="#" onclick="iwms.logPop()">登录</a>
	<a href="../../memberreg.aspx" rel="nofollow">注册</a>
	
	</div>
	</div>
</div>
<div class="twidth">
<div id="sitehead">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<table width="100%">
	<tr align="center"><td width="160">
	<a href="https://www.linuxidc.com/"><img style="filter: chroma(color=#FFFFFF);" src="../../pic/logo.jpg" alt="Linux公社" width="155" height="53" border="0" /></a>
	</td><td>
	<div align="center"><script type="text/javascript" src="/linuxfile/linux.js"></script></div>
	</td>
	</tr></table>
</div>
</div>
<div id="navbar">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="../../index.htm" class="first">首页</a><a href="../../it/">Linux新闻</a><a href="../../Linuxit/" class="thisclass">Linux教程</a><a href="../../MySql/">数据库技术</a><a href="../../RedLinux/">Linux编程</a><a href="../../Apache/">服务器应用</a><a href="../../Unix/">Linux安全</a><a href="../../download/">Linux下载</a><a href="../../theme/">Linux主题</a><a href="../../Linuxwallpaper/">Linux壁纸</a><a href="../../linuxsoft/">Linux软件</a><a href="../../digi/">数码</a><a href="../../mobile/">手机</a><a href="../../diannao/">电脑</a>

</div>
</div>

<div id="navsub">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="../../index.htm">首页</a> → <a href="../../Linuxit/">Linux教程</a>
</div>
</div>
<div class="linuxe1"><script type="text/javascript" src="/linuxfile/linuxe1.js"></script></div>
<div class="linux1"><script type="text/javascript" src="/linuxfile/linux1.js"></script></div>
<div class="linuxa"><script type="text/javascript" src="/linuxfile/linuxa.js"></script></div>
<div class="linuxa1"><script type="text/javascript" src="/linuxfile/linuxa1.js"></script></div>
<table id="middle" width="100%" cellspacing="0" cellpadding="0" style="table-layout:fixed">
<tr valign="top"><td>

	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<div class="moreR">
			背景：<script type="text/javascript">WriteBg()</script>
		</div>
		<span class="tt">阅读新闻</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm" id="bodyTd">
		<div id="printBody" style="word-break:break-all;">
			<div style="text-align:center"><h1 class="aTitle">使用xrdp实现Windows 远程桌面 Ubuntu Linux</h1></div>
			
			<table width="97%" align="center">
				<tr>
				<td width="140">[日期：2015-05-22]</td>
				<td align="center">来源：Linux社区&nbsp;
				作者：daniel_ustc</td>
				<td width="160" align="right">[字体：<a href="javascript:ContentSize(16)">大</a> <a href="javascript:ContentSize(0)">中</a> <a href="javascript:ContentSize(12)">小</a>]
				</td></tr>
			</table>
<div id="li_all">
<div id="li_1"><script type="text/javascript" src="/linuxfile/linux201.js"></script></div>
<div id="li_2"><script type="text/javascript" src="/linuxfile/linux2.js"></script></div>
</div>
			<div id="content"><p>一般情况下我们用ssh客户端远程登陆Linux系统，至于图形界面下的Linux远程登陆工具，我们一般都会想到vnc，但它的安全性不够，在这里，我将介绍XRDP的安装配置方法。我们可以很方便的通过Windows远程桌面<a href="https://www.linuxidc.com/topicnews.aspx?tid=2" target="_blank" title="Ubuntu">Ubuntu</a> Linux。</p>
<h3>xrdp安装配置方法</h3>
<p>打开终端：依次安装</p>
<p>sudo apt-get install xrdp</p>
<p>sudo apt-get install vnc4server tightvncserver&nbsp;</p>
<h3><strong>设置xrdp</strong></h3>
<p>echo "gnome-session --session=gnome-classic" &gt; ~/.xsession</p>
<p>该命令的作用是由于安装了 gnome桌面，ubuntu12.04中同时存在unity、GNOME多个桌面管理器，需要启动的时候指定一个，不然</p>
<p>即使远程登录验证成功以后，也只是背景。</p>
<p>xrdp的配置文档在/etc/xrdp目录下的xrdp.ini和sesman.in，一般选择默认。&nbsp;</p>
<h3><strong>重启 xrdp</strong></h3>
<p>sudo /etc/init.d/xrdp restart&nbsp;</p>
<h3>运行Windows的mstsc</h3>
<p><img src="../../upload/2015_05/150522082037401.jpg" alt="" width="387" height="235" /><img src="../../upload/2015_05/150522082037402.jpg" alt="" width="391" height="237" /></p>
<p>即windows 远程桌面，打开输入远程的Ip,连接，输入用户密码 即可远程linux.</p>
<h3>遇到的错误</h3>
<p><strong>1，xrdp 访问 ubuntu 只看到背景，看不到菜单栏的解决办法&nbsp;</strong></p>
<p>方法：安装gnome-panel<br />sudo apt-get install gnome-panel&nbsp;</p>
<p><strong>2，Failed to load session "gnome</strong>"</p>
<p>桌面用 ubuntu-2d 试下</p>
<p>键入命令：echo&nbsp; "gnome-session &ndash;session=ubuntu-2d" &gt; ~/.xsession ,然后重启xrdp。&nbsp;</p>
<p><strong>3，出现错误</strong>：</p>
<p>connecting to sesman ip 127.0.0.1 port 3350<br />sesman connect ok<br />sending login info to sesman <br />login successful for display 14<br />started connecting<br />connecting to 127.0.0.1 5914<br />error - problem connecting</p>
<p>xrdp-sesman.log下错误为：</p>
<p><br />[INFO ] starting Xvnc session...<br />[ERROR] X server for display 10 startup timeout[INFO ] starting xrdp-sessvc - xpid=2924 - wmpid=2923<br />[ERROR] X server for display 10 startup timeout<br />[ERROR] another Xserver is already active on display 10<br />[DEBUG] aborting connection... <br />如果你的log也有类似 <span style="font-weight: bold;">X server for display 10 startup timeout</span>和<span style="font-weight: bold;">another Xserver is already active on display 10</span></p>
<p><strong>问题根源在于tightvnc，出现问题的版本跟X字体有冲突，导致连接Xserver出错</strong>。</p>
<p>解决方法：</p>
<p>apt-get purge tightvnc xrdp<br />apt-get install tightvncserver xrdp</p>
<p>最后：</p>
<p>启动xrdp服务，sudo /etc/init.d/xrdp restart，此时会启用相应端口，配置方面默认即可。</p>
<p>通过命令：netstat&nbsp; -tnl</p>
<p>查看 3350 3389 5910 这三个端口处于LISTEN，一般就没问题了。</p>
<p>dpkg -L +软件包的名字，可以知道这个软件包包含了哪些文件.</p>
<p><strong>4，ubuntu 13.10 及以后版本 无背景</strong>：</p>
<p>感谢评论中的童鞋提出的方案:</p>
<p>xrdp支持不了13.10的gnome了，解决办法是装个xfce界面，&nbsp;</p>
<pre style="word-wrap: break-word; margin-bottom: 0px; font-family: 'Courier New' !important; white-space: pre-wrap; margin-top: 0px; line-height: 22px; padding: 0px;">sudo apt-get install xubuntu-desktop&nbsp;</pre>
<p>然后：</p>
<p>echo xfce4-session &gt;~/.xsession&nbsp;</p>
<p>再设置配置文件</p>
<p>sudo gedit /etc/xrdp/startwm.sh</p>
<p>在. /etc/X11/Xsession 前一行插入<br />xfce4-session</p>
<p>重启xrdp<br />sudo service xrdp restart</p>
<p>Windows远程桌面访问Ubuntu 12.04 之安装XRDP&nbsp; <a href="../../Linux/2012-07/64802.htm">http://www.linuxidc.com/Linux/2012-07/64802.htm</a></p>
<p><span style="color: #ff0000;">更多Ubuntu相关信息见</span><a title="Ubuntu" href="../../topicnews.aspx?tid=2" target="_self"><span style="color: #0000ff;">Ubuntu</span></a><span style="color: #ff0000;"> 专题页面 </span><span style="color: #0000ff;"><a title="Ubuntu" href="../../topicnews.aspx?tid=2" target="">http://www.linuxidc.com/topicnews.aspx?tid=2</a></span></p>
<p><span style="font-size: small;"><strong>本文永久更新链接地址</strong></span>：<a href="../../Linux/2015-05/117835.htm">http://www.linuxidc.com/Linux/2015-05/117835.htm</a></p>
<!-- Baidu Button BEGIN --><a href="http://www.linuxidc.com" target="_blank"><img src="/linuxfile/logo.gif" alt="linux" width="15" height="17" /></div>
<div class="linux3"><script type="text/javascript" src="/linuxfile/linux3.js"></script></div>
<div class="linux302"><script type="text/javascript" src="/linuxfile/linux302.js"></script></div>		
			
			
		</div>
<div class="linuxfx"><script type="text/javascript" src="/linuxfile/fx.js"></script></div>	
<div class="linux8"><script type="text/javascript" src="/linuxfile/linux8.js"></script></div>
<div class="linux801"><script type="text/javascript" src="/linuxfile/linux801.js"></script></div>
		<div class="nearNews">
			<div class="prevNews"><a href="../../Linux/2015-05/117834.htm">远程桌面连接Windows Azure中的Ubuntu虚拟机</a></div>
			<div class="nextNews"><a href="../../Linux/2015-05/117841.htm">5个有趣的Linux命令行技巧</a></div>
		</div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux809"><script type="text/javascript" src="/linuxfile/linux809.js"></script></div>
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">相关资讯</span> &nbsp; &nbsp; &nbsp;
		<a href="../../search.aspx?where=nkey&amp;keyword=7340" target="_blank">XRDP</a>&nbsp; 
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table width='100%'><tr><td width='50%' valign='top'><ul class='nl'><li><a href="../../Linux/2019-08/159848.htm"  target="_blank"  title="如何在 Ubuntu 18.04 上安装 Xrdp 远程桌面服务">如何在 Ubuntu 18.04 上安装 Xrdp </a>&nbsp; <span class="gray">(<span class="time">今 17:40</span>)</span></li>
<li><a href="../../Linux/2018-08/153436.htm"  target="_blank"  title="CentOS 7.3下安装Xfce+VNC+XRDP实现远程桌面连接">CentOS 7.3下安装Xfce+VNC+XRDP实</a>&nbsp; <span class="gray">(08/09/2018 20:41:09)</span></li>
<li><a href="../../Linux/2015-07/119776.htm"  target="_blank" >RedHat 6使用xrdp远程界面登陆</a>&nbsp; <span class="gray">(07/12/2015 10:10:07)</span></li>
</ul></td><td width='50%' valign='top'><ul class='nl'><li><a href="../../Linux/2018-10/155073.htm"  target="_blank"  title="Xrdp - 通过Windows的RDP连接Linux远程桌面（Ubuntu/CentOS/Redhat 7）">Xrdp - 通过Windows的RDP连接Linux</a>&nbsp; <span class="gray">(10/29/2018 21:47:56)</span></li>
<li><a href="../../Linux/2017-09/147112.htm"  target="_blank"  title="xrdp完美实现Windows远程访问Ubuntu 16.04">xrdp完美实现Windows远程访问</a>&nbsp; <span class="gray">(09/26/2017 19:59:23)</span></li>
<li><a href="../../Linux/2015-04/116446.htm"  target="_blank"  title="Ubuntu 14.04 + xRDP + Xfce 实现Windows远程桌面连接">Ubuntu 14.04 + xRDP + Xfce 实现</a>&nbsp; <span class="gray">(04/19/2015 17:42:36)</span></li>
</ul></td></tr></table>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux808"><script type="text/javascript" src="/linuxfile/linux808.js"></script></div>
	
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">本文评论</span>
		 	　　<a href="../../remark.aspx?id=117835" target="_blank">查看全部评论</a> <span class="gray">(0)</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table width="100%" style="margin:6px">		
		<tr><td width="50%">
			<form action="" name="fmRemarkSt" onsubmit="return remark.post(this);">
			<input type="hidden" value="1" name="face"/>
			表情： <img src="../../pic/b.gif" alt="表情" class="face1" style="cursor:pointer;vertical-align:middle" onclick="remark.dispFace(this)" onmouseout="remark.hideFace()"/>
			姓名： <input type="text" name="username" value="" maxlength="15" style="width:60px" class="inputbg"/>
			<input type="checkbox" id="rmAnonymitySt" onclick="remark.anony(this)"/><label for="rmAnonymitySt">匿名</label>
			字数 <input type="text" id="bodyLen" size="3" readonly="readonly" style="border-width:0;background:transparent;vertical-align:middle" value="0"/>
			<br/>
			<textarea name="body" cols="40" rows="4" onkeydown="remark.dispLen(this)" onkeyup="remark.handle(event,this);remark.dispLen(this)" style="width:39em;height:100px;margin:3px 0;overflow-y:auto"></textarea>
				<br/>
		　　　<input type="checkbox" checked="checked" id="rmAgreeSt"/><label for="rmAgreeSt">同意评论声明</label>
		　　　<button type="submit" style="width:50px">发表</button>
			</form><br>
			评论声明
			<ul style="list-style-type:square;margin:5px 0 0 1em;padding:0">
			<li>尊重网上道德，遵守中华人民共和国的各项有关法律法规</li>
			<li>承担一切因您的行为而直接或间接导致的民事或刑事法律责任</li>
			<li>本站管理人员有权保留或删除其管辖留言中的任意内容</li>
			<li>本站有权在网站内转载或引用您的评论</li>
			<li>参与本评论即表明您已经阅读并接受上述条款</li>
			</ul>
		</td>
		<td width="50%"><div class="linux799"><script type="text/javascript" src="/linuxfile/linux799.js"></script></div></td></tr>
		</table>
		<script type="text/javascript" src="../../inc/remark.js"></script>
		<script type="text/javascript">
			remark.maxSize=500;
			remark.minSize=2;
			remark.sourceEle=$(document.fmRemarkSt).find("button").get(0);
			iwms.vCode="CC74440A";
			iwms.user.name.length==0 ? $i("rmAnonymitySt").click() : $i("rmAnonymitySt").form.username.value=iwms.user.name;
		</script>
		<div class="reCont" id="reContainer"></div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	
</td><td width="300" valign="top">
<div class="linux901"><script type="text/javascript" src="/linuxfile/linux901.js"></script></div>
<div class="linux902"><script type="text/javascript" src="/linuxfile/linux902.js"></script></div>
<div class="linux903"><script type="text/javascript" src="/linuxfile/linux903.js"></script></div>
<div class="linux905"><script type="text/javascript" src="/linuxfile/linux905.js"></script></div>
	
	<div class="lframe">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">最新资讯</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<ul class="nl">
<li><a href="../../Linux/2019-08/159848.htm" target="_blank" title="如何在 Ubuntu 18.04 上安装 Xrdp 远程桌面服务">如何在 Ubuntu 18.04 上安装 Xrdp 远程桌面</a></li>
<li><a href="../../Linux/2019-08/159847.htm" target="_blank" title="如何在 Debian 10 Linux 上安装 Apache Web Server">如何在 Debian 10 Linux 上安装 Apache Web</a></li>
<li><a href="../../Linux/2019-08/159846.htm" target="_blank">如何在Linux中向$PATH添加目录</a></li>
<li><a href="../../Linux/2019-08/159845.htm" target="_blank">如何检查 MySQL 版本</a></li>
<li><a href="../../Linux/2019-08/159844.htm" target="_blank">如何在 Debian 10 Linux 上安装MySQL</a></li>
<li><a href="../../Linux/2019-08/159843.htm" target="_blank">如何在 CentOS 7 上安装更新</a></li>
<li><a href="../../Linux/2019-08/159842.htm" target="_blank">如何创建可启动的 Linux U 盘</a></li>
<li><a href="../../Linux/2019-08/159841.htm" target="_blank">如何在 Debian 10 Linux 上安装 Git</a></li>
<li><a href="../../Linux/2019-08/159840.htm" target="_blank" title="何在 Debian 10 Linux 上安装和配置 Squid 代理">何在 Debian 10 Linux 上安装和配置 Squid </a></li>
<li><a href="../../Linux/2019-08/159839.htm" target="_blank">如何在Debian 10 Linux上安装和使用Docker</a></li>
</ul>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	<div class="u70"><script type="text/javascript" src="/linuxfile/u70.js"></script></div>
	<div class="u80"><script type="text/javascript" src="/linuxfile/u80.js"></script></div>
	<div class="u90"><script type="text/javascript" src="/linuxfile/u90.js"></script></div>
	<div class="space"></div>
	<div id="pin">
	<script type="text/javascript" src="/linuxfile/pin.js"></script>
	</div>
</td></tr>
</table>
<div class="linux906"><script type="text/javascript" src="/linuxfile/linux906.js"></script></div>
<div id="footer">
<a href="https://www.linuxidc.com/aboutus.htm">Linux公社简介</a> - <a href="https://www.linuxidc.com/adsense.htm">广告服务</a> - <a href="https://www.linuxidc.com/sitemap.aspx">网站地图</a> - <a href="https://www.linuxidc.com/help.htm">帮助信息</a> - <a href="https://www.linuxidc.com/contactus.htm">联系我们</a><br />本站（LinuxIDC）所刊载文章不代表同意其说法或描述，仅为提供更多信息，也不构成任何建议。<br /><script type="text/javascript" src="/linuxfile/qq.js"></script><br />
<script type="text/javascript" src="/linuxfile/foot.js"></script><br />Copyright &copy; 2006-2019　<a href="https://www.linuxidc.com/">Linux公社</a>　All rights reserved 浙ICP备07014134号-8
	<script type="text/javascript">iwms.aId=117835;$(function(){iwms.imgCont=$i('content');iwms.imgResize();InitContStyle();iwms.getVars();})</script>
	
</div>
</div>
<script type="text/javascript" src="/linuxren/linuxren1.js"></script>
<script type="text/javascript" src="/linuxren/linuxren2.js"></script>
<script type="text/javascript" src="/linuxren/linuxren3.js"></script>
</body>
</html>