define(["jquery","version!fly/managers/debug","managers/user","version!fly/components/loading","version!components/form-validate","version!fly/components/base"],(function(e,t,n){t=t.init("emailContact"),e.widget("tr.emailContact",e.fly.base,{modal:null,_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var e=this;this.$element.on("click",(function(t){e._handleClick(t)}))},_handleClick:function(a){var o=this.options;a.preventDefault(),this.$modal&&this.$modal.remove(),e.ajax({data:o.requestData,dataType:"json",url:o.modalRequest}).done((function(e){n.showModalStep("emailContact",e.html)})).fail((function(){t.log("Request for modal failed")}))}})}));