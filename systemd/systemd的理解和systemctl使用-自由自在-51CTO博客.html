<!DOCTYPE html>
<html lang="zh-CN"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="favicon" rel="shortcut icon" href="https://blog.51cto.com/favicon.ico">
        <title>systemd的理解和systemctl使用-自由自在-51CTO博客</title>
    <meta name="keywords" content="linux ,启动过程,systemd ">
<meta name="description" content="借鉴网上的内容将systemd相关的知识点和常用命令整理汇总在一起。">    <link href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/header.css" rel="stylesheet"><link href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/other.css" rel="stylesheet"><link href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/right.css" rel="stylesheet"><link href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/blog_details.css" rel="stylesheet"><link href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/highlight.css" rel="stylesheet">
    <script type="text/javascript" async="" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/vds.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/push.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/hm.js"></script><script>
        var HOME_URL = 'https://home.51cto.com/';
    </script>
    <script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/jquery_002.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/cookie.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/login.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/common.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/mbox.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/follow.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/vip.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/window.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/share.js"></script><style></style><link rel="stylesheet" href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/share_style0_16.css"></head>
<body>
<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/share_default.jpg" style="width:0; height:0; position:absolute;" border="0">
<style type="text/css">
	.service-btn{
		width: 53px;
height: 36px;
color: #1ac6fe;
line-height: 16px;
padding-top: 50px;
		display: inline-block;
		background: url(https://s4.51cto.com/images/blog/201811/02/463350acf4c693cfb3dc248bc8a2a0eb.png) no-repeat center;
	}
	.service-btn:hover{
		background: url(https://s4.51cto.com/images/blog/201811/02/2d5fa2ff4eb9ef66847aff20ba4c8bae.png) no-repeat center;
height: 36px;
color: #fff;
line-height: 16px;
padding-top: 50px;
	}
</style>
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->
<div id="topbanner14" style="position: relative;width:100%;height:40px;background:url(https://s4.51cto.com/images/blog/202006/04/dfb042216dfc6afc81cb5e47762ad16a.jpg)">
<a class="close fl" href="javascript:;" style="position:absolute;width:13px;height:13px;top:0px;z-index: 20;background: url('https://s4.51cto.com/images/blog/201808/23/0363c65f527ea7c9880ab5f275303d1a.png') 0 0 no-repeat;background-size: 100% 100%;left: 50%;margin-left: 587px;"></a>
<a href="http://aix.51cto.com/activity/10039.html?banner" target="_blank">
  <img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/1abfc84e2df979ae31d57862f0b9321e.jpg" alt="" style="position:absolute;width:1200px;height:40px;margin-left: -600px;left:50%;z-index: 10;">
</a>
</div>
<script>
    $("#topbanner14").on("click",".close",function(){
        $("#topbanner14").remove();
    })
</script>
<div class="Header">
  <div class="Page ">
    <h1 class="Logo"><a href="https://blog.51cto.com/">Logo</a></h1>
    <ul class="Navigates fl">
      <li><a href="https://blog.51cto.com/">首页</a></li>
      <li><a href="https://blog.51cto.com/original">文章</a></li>
      <li><a href="https://blog.51cto.com/blog/follow">关注</a></li>
      <li class="">
        <a class="column-stress" href="https://blog.51cto.com/cloumn/index" target="_blank">订阅专栏</a>
      </li>
        <li>
            <a href="http://aix.51cto.com/activity/index.html?blog" target="_blank">大咖来了</a>
        </li>
                    
                  </ul>
    <ul class="Navigates Navigates-right fr">
      <li class="more maps">
        <a href="javascript:void(0);">网站导航</a>
        <div>
            <a href="https://edu.51cto.com/" target="_blank">学院</a>
            <a href="https://e.51cto.com/" target="_blank">微职位</a>
            <a href="https://blog.51cto.com/" target="_blank">博客</a>
            <a href="http://down.51cto.com/" target="_blank">下载</a>
            <a href="https://home.51cto.com/" target="_blank">家园</a>
            <a href="http://bbs.51cto.com/" target="_blank">论坛</a>
            <a href="http://x.51cto.com/" target="_blank">CTO训练营</a>
            <!--a href=" http://club.51cto.com?blog" target="_blank">CTO俱乐部</a-->
            <a href="http://wot.51cto.com/" target="_blank">WOT</a>
            <a href="http://www.51cto.com/" target="_blank">51CTO</a>
            <i class="arrow"></i>
        </div>
      </li>
                <li>
			<a href="https://blog.51cto.com/site/login?reback=https%3A%2F%2Fblog.51cto.com%2Fjiawenjl%2F1957271&amp;logintype=reg" target="_self">注册</a>
			<!--领VIP图标-->
			<span style="position: absolute;top:0px;">
				<a href="https://edu.51cto.com/center/activity/member-activity" target="_blank">
					<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/50768f7d453813db433782e76c9f1d44.png">
				</a>
			</span>
		  </li>
          <li class="login"><a href="https://blog.51cto.com/site/login?reback=https%3A%2F%2Fblog.51cto.com%2Fjiawenjl%2F1957271" target="_self">登录</a></li>
                        <li class="mRead">
          <a href="javascript:;">手机阅读</a>
          <div>
            <img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/blog_qr.png">
            <p>扫一扫体验手机阅读</p>
            <i class="arrow"></i>
          </div>
        </li>
            <li class="search"><a href="https://blog.51cto.com/search/index" target="_self">搜索</a></li>
                  <li class="write"><a href="javascript:;" onclick="Login()">写文章</a></li>
                  </ul>

          <div class="clear"></div>
  </div>
</div>
<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/box.js"></script> 
<script>
    var isLogin = '0';
    var userId = '';
    var imgpath = 'https://s4.51cto.com/';
    var BLOG_URL = 'https://blog.51cto.com/';
    var msg_num_url = '/index/ajax-msg-num';
    $('.msg-follow, .msg-follow-max').eq(1).css({top: '91px'});
    $('.msg-follow, .msg-follow-max').eq(2).css({top: '121px'});
    setTimeout(function(){
            $.ajax({
                url:msg_num_url,
                type:"get",
                dataType:'json',
                success:function(res){
                    if(res.status == '0'){
                       //
                       var hasNewMsg = false;
                       if(res.data.msgNum > 0 && !$('#myMsg i').hasClass('dot')){
                            $('#myMsg i').addClass('dot');
                            hasNewMsg = true;
                       }
                       if(res.data.notifyNum > 0 && !$('#myNotify i').hasClass('dot')){
                           $('#myNotify i').addClass('dot');
                           hasNewMsg = true;
                       }
                       if(res.data.recommend_new > 0 && !$('#myRecommend i').hasClass('dot')){
                           $('#myRecommend i').addClass('dot');
                           hasNewMsg = true;
                       }
                       if(hasNewMsg && !$('#myAllMsg i').hasClass('dot')){
                           $('#myAllMsg i').addClass('dot');
                       }
                    }

                }
            });
    },70);
    //广告图
$(function(){
     new AutoAD({
      ADD:$('<a href="http://aix.51cto.com/activity/10039.html?pc" class="closeMB" target="_blank" styel="display:block;"><img src="https://s4.51cto.com/images/blog/202006/04/d6d7d2bd0d8824070b48a5085a356e6e.jpg"></a><a class="closeMB" style="position: absolute;right:2px;top: 3px;width: 50px;height: 40px;cursor: pointer;" href="javascript:;"></a>'),
      W:500,
      H:400,
      cookie:'blog_activity_blog161',
      mask:"#000",
      ts:'21600',
      noCBtn: true
    }) 
})    
</script>
 <script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/entrance.js" id="zhichiScript" class="zhiCustomBtn" data-args="manual=true"></script>
<a href="javascript:;" class="zhiCustomBtn" style="position: fixed;z-index: 2147483583;width: 60px;height: 6px;text-align: center;bottom:275px;right:0px;">
<span class="service-btn">在线<br>客服</span>
</a>

<script type="text/javascript">
var zhiManager = (getzhiSDKInstance());
zhiManager.on("load", function() {
    zhiManager.initBtnDOM();
});
//zhiManager.set('title','垃圾/广告信息举报');
zhiManager.set('powered',false);
zhiManager.set('color', '4285f4');
zhiManager.set('customBtn', 'true');
zhiManager.set('moduleType',2);
zhiManager.set('size',{'width':360,'height':500});

zhiManager.set('userinfo', {partnerId:'',uname:'',params:'{"用户名":""}'});
zhiManager.set('customMargin', 20);
zhiManager.set('horizontal', 20);
zhiManager.set('vertical', 90);
zhiManager.set('preVisitArgs',{'preVisitUrl': document.referrer?document.referrer:''});
zhiManager.set('curVisitArgs',{'curVisitUrl': location.href,curVisitTitle:document.title,});
</script>
<div class="Content-box" style="min-height: 1194px;">
      <link rel="stylesheet" href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/mdeShow.css">
  <link rel="stylesheet" href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/prism.css">
  <script type="text/javascript" charset="utf-8" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/prism.js"></script>
<link rel="stylesheet" href="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/tinyscrollbar.css">
<script type="text/javascript" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/jquery.js"></script>
<div class="Content Index" style="padding-bottom: 50px;">
	<div class="Page M764">
		<!-- left start -->
		<div class="artical-Left-blog">
			<div class="status">
	        					<a class="tab_name original">原创</a>
							</div>
			<h1 class="artical-title">systemd的理解和systemctl使用</h1>
			<div class="artical-title-list">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/jiawenjl" class="a-img" target="_blank"><img class="is-vip-img is-vip-img-4" data-uid="4152561" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/noavatar_middle.gif"></a><i class="vip-icon vip-icon-4 on"></i>
				</div>
				<a href="https://blog.51cto.com/jiawenjl" class="name fl" target="_blank" style="margin-right:0;">jiawenjl</a>
												<a class="comment comment-num fr"><font class="comment_number">0</font>人评论</a>
				<span class="fr"></span>
				<a href="javascript:;" class="read fr">4068人阅读</a>
				<a href="javascript:;" class="time fr">2017-08-18 11:21:17</a>
				<div class="clear"></div>
			</div>
							<div class="artical-content-bak main-content editor-side-new">
          <div class="con editor-preview-side" id="result"><p>Linux<span style="font-family:'宋体';">系统的启动方式有点复杂，而且总是有需要优化的地方。传统的</span>Linux<span style="font-family:'宋体';">系统启动过程主要由著名的</span>init<span style="font-family:'宋体';">进程（也被称为</span>SysV init<span style="font-family:'宋体';">启动系统）处理，而基于</span>init<span style="font-family:'宋体';">的启动系统被认为有效率不足的问题，</span>systemd<span style="font-family:'宋体';">是</span>Linux<span style="font-family:'宋体';">系统机器的另一种启动方式，宣称弥补了以传统</span>Linux SysV init<span style="font-family:'宋体';">为基础的系统的缺点。银河麒麟操作系统V4版采用了systemd。</span></p><h3><span style="font-family:'宋体';">理解</span>Linux<span style="font-family:'宋体';">启动过程</span></h3><p>在
我们打开Linux电脑的电源后第一个启动的进程就是init。分配给init进程的PID是1。它是系统其他所有进程的父进程。当一台Linux电脑启
动后，处理器会先在系统存储中查找BIOS，之后BIOS会检测系统资源然后找到第一个引导设备，通常为硬盘，然后会查找硬盘的主引导记录（MBR），然
后加载到内存中并把控制权交给它，以后的启动过程就由MBR控制。</p><p>主引导记录会初始化引导程序（Linux上有两个著名的引导程
序，GRUB和LILO，80%的Linux系统在用GRUB引导程序），这个时候GRUB或LILO会加载内核模块。内核会马上查找/sbin下的
“init”程序并执行它。从这里开始init成为了Linux系统的父进程。init读取的第一个文件是/etc/inittab，通过它init会确
定我们Linux操作系统的运行级别。它会从文件/etc/fstab里查找分区表信息然后做相应的挂载。然后init会启动/etc/init.d里指
定的默认启动级别的所有服务/脚本。所有服务在这里通过init一个一个被初始化。在这个过程里，init每次只启动一个服务，所有服务/守护进程都在后
台执行并由init来管理。</p><p>关机过程差不多是相反的过程，首先init停止所有服务，最后阶段会卸载文件系统。</p><p>以上提到的启动过程有一些不足的地方。而用一种更好的方式来替代传统init的需求已经存在很长时间了。也产生了许多替代方案。其中比较著名的有Upstart，Epoch，Muda和Systemd。而Systemd获得最多关注并被认为是目前最佳的方案。</p><h3><span style="font-family:'宋体';">理解</span>Systemd</h3><p>开
发Systemd的主要目的就是减少系统引导时间和计算开销。Systemd（系统管理守护进程），最开始以GNU 
GPL协议授权开发，现在已转为使用GNU 
LGPL协议，它是如今讨论最热烈的引导和服务管理程序。如果你的Linux系统配置为使用Systemd引导程序，它取替传统的SysV 
init，启动过程将交给systemd处理。Systemd的一个核心功能是它同时支持SysV init的后开机启动脚本。</p><p>Systemd
引入了并行启动的概念，它会为每个需要启动的守护进程建立一个套接字，这些套接字对于使用它们的进程来说是抽象的，这样它们可以允许不同守护进程之间进行
交互。Systemd会创建新进程并为每个进程分配一个控制组（cgroup）。处于不同控制组的进程之间可以通过内核来互相通信。systemd处理开
机启动进程的方式非常漂亮，和传统基于init的系统比起来优化了太多。让我们看下Systemd的一些核心功能。</p><ul class="list-paddingleft-2" type="disc"><li><p><span style="font-family:'宋体';">和</span>init<span style="font-family:'宋体';">比起来引导过程简化了很多</span></p></li><li><p>Systemd<span style="font-family:'宋体';">支持并发引导过程从而可以更快启动</span></p></li><li><p><span style="font-family:'宋体';">通过控制组来追踪进程，而不是</span>PID</p></li><li><p><span style="font-family:'宋体';">优化了处理引导过程和服务之间依赖的方式</span></p></li><li><p><span style="font-family:'宋体';">支持系统快照和恢复</span></p></li><li><p><span style="font-family:'宋体';">监控已启动的服务；也支持重启已崩溃服务</span></p></li><li><p><span style="font-family:'宋体';">包含了</span>systemd-login<span style="font-family:'宋体';">模块用于控制用户登录</span></p></li><li><p><span style="font-family:'宋体';">支持加载和卸载组件</span></p></li><li><p><span style="font-family:'宋体';">低内存使用痕迹以及任务调度能力</span></p></li><li><p><span style="font-family:'宋体';">记录事件的</span>Journald<span style="font-family:'宋体';">模块和记录系统日志的</span>syslogd<span style="font-family:'宋体';">模块</span></p></li></ul><p><span style="font-size:14px;font-family:Calibri, 'sans-serif';">Systemd</span><span style="font-size:14px;font-family:'宋体';">同时也清晰地处理了系统关机过程。在麒麟操作系统中，在</span><span style="font-size:14px;font-family:Calibri, 'sans-serif';">/lib/systemd/system</span><span style="font-size:14px;font-family:'宋体';">目录下有三个脚本，分别叫</span><span style="font-size:14px;font-family:Calibri, 'sans-serif';">systemd-halt.service</span><span style="font-size:14px;font-family:'宋体';">，</span><span style="font-size:14px;font-family:Calibri, 'sans-serif';">systemd-poweroff.service</span><span style="font-size:14px;font-family:'宋体';">，</span><span style="font-size:14px;font-family:Calibri, 'sans-serif';">systemd-reboot.service</span><span style="font-size:14px;font-family:'宋体';">。这几个脚本会在用户选择关机，重启或待机时执行。在接收到关机事件时，</span><span style="font-size:14px;font-family:Calibri, 'sans-serif';">systemd</span><span style="font-size:14px;font-family:'宋体';">首先卸载所有文件系统并停止所有内存交换设备，断开存储设备，之后停止所有剩下的进程。</span></p><h3>Systemd<span style="font-family:'宋体';">结构概览</span></h3><p>让我们看一下Linux系统在使用systemd作为引导程序时的开机启动过程的结构性细节。为了简单，我们将在下面按步骤列出来这个过程：</p><p><strong><span style="font-family:'宋体';">1.</span></strong>当你打开电源后电脑所做的第一件事情就是BIOS初始化。BIOS会读取引导设备设定，定位并传递系统控制权给MBR（假设硬盘是第一引导设备）。</p><p><strong><span style="font-family:'宋体';">2.</span></strong>
 
MBR从Grub或LILO引导程序读取相关信息并初始化内核。接下来将由Grub或LILO继续引导系统。如果你在grub配置文件里指定了
systemd作为引导管理程序，之后的引导过程将由systemd完成。Systemd使用“target”来处理引导和服务管理过程。这些
systemd里的“target”文件被用于分组不同的引导单元以及启动同步进程。</p><p><strong><span style="font-family:'宋体';">3.</span></strong> systemd执行的第一个目标是<strong><span style="font-family:'宋体';">default.target</span></strong>。但实际上default.target是指向<strong><span style="font-family:'宋体';">graphical.target</span></strong>的软链接。Kylin里的软链接用起来和Windows下的快捷方式一样。文件Graphical.target的实际位置是/lib/systemd/system/graphical.target。在下面的截图里显示了graphical.target文件的内容。</p><p><a href="https://s1.51cto.com/wyfs02/M01/00/1A/wKiom1mWW6Xzq8RYAACfly5SO24196.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKiom1mWW6Xzq8RYAACfly5SO24196.png" title="t21.png" alt="wKiom1mWW6Xzq8RYAACfly5SO24196.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">4.</span></strong>在这个阶段，会启动<strong><span style="font-family:'宋体';">multi-user.target</span></strong>而这个target将自己的子单元放在目录“/etc/systemd/system/multi-user.target.wants”里。这个target为多用户支持设定系统环境。非root用户会在这个阶段的引导过程中启用。防火墙相关的服务也会在这个阶段启动。</p><p>"multi-user.target"会将控制权交给另一层“<strong><span style="font-family:'宋体';">basic.target</span></strong>”。</p><p><a href="https://s2.51cto.com/wyfs02/M02/00/1A/wKiom1mWW9HRmC_LAACTEARdmkU991.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKiom1mWW9HRmC_LAACTEARdmkU991.png" title="t23.png" alt="wKiom1mWW9HRmC_LAACTEARdmkU991.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">5.</span></strong> "basic.target"单元用于启动普通服务特别是图形管理服务。它通过/lib/systemd/system/basic.target.wants目录来决定哪些服务会被启动，basic.target之后将控制权交给<strong><span style="font-family:'宋体';">sysinit.target</span></strong>.</p><p><a href="https://s2.51cto.com/wyfs02/M02/9E/CA/wKioL1mWW-zQXqCUAADV_AlVu58735.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKioL1mWW-zQXqCUAADV_AlVu58735.png" title="t24.png" alt="wKioL1mWW-zQXqCUAADV_AlVu58735.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">6.</span></strong> "sysinit.target"会启动重要的系统服务例如系统挂载，内存交换空间和设备，内核补充选项等等。sysinit.target在启动过程中会传递给<strong><span style="font-family:'宋体';">local-fs.target</span></strong>。这个target单元的内容如下面截图里所展示。</p><p><a href="https://s5.51cto.com/wyfs02/M01/00/1A/wKiom1mWXAfyPffGAACHfBppxSY565.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKiom1mWXAfyPffGAACHfBppxSY565.png" title="t25.png" alt="wKiom1mWXAfyPffGAACHfBppxSY565.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">7.</span></strong> local-fs.target，这个target单元不会启动用户相关的服务，它只处理底层核心服务。这个target会根据/etc/fstab和/etc/inittab来执行相关操作。</p><h3 id="toc_4"><span style="font-family:'宋体';">系统引导性能分析</span></h3><p>Systemd提供了工具用于识别和定位引导相关的问题或性能影响。<strong><span style="font-family:'宋体';">Systemd-analyze</span></strong>是一个内建的命令，可以用来检测引导过程。你可以找出在启动过程中出错的单元，然后跟踪并改正引导组件的问题。在下面列出一些常用的systemd-analyze命令。</p><p><strong><span style="font-family:'宋体';">systemd-analyzetime</span></strong>用于显示内核和普通用户空间启动时所花的时间。</p><p><a href="https://s3.51cto.com/wyfs02/M00/9E/CA/wKioL1mWXD6x1XoIAAAig9vzEW8119.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKioL1mWXD6x1XoIAAAig9vzEW8119.png" title="t26.png" alt="wKioL1mWXD6x1XoIAAAig9vzEW8119.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">systemd-analyzeblame</span></strong>会列出所有正在运行的单元，按从初始化开始到当前所花的时间排序，通过这种方式你就知道哪些服务在引导过程中要花较长时间来启动。</p><p><a href="https://s3.51cto.com/wyfs02/M02/00/1A/wKiom1mWXFegvkNRAABcmvdIRH4736.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKiom1mWXFegvkNRAABcmvdIRH4736.png" title="t27.png" alt="wKiom1mWXFegvkNRAABcmvdIRH4736.png" style="cursor: pointer;"></a></p><p><strong><span style="font-family:'宋体';">systemd-analyzeverify</span></strong>显示在所有系统单元中是否有语法错误。</p><p><strong><span style="font-family:'宋体';">systemd-analyzeplot</span></strong>可以用来把整个引导过程写入一个SVG格式文件里。整个引导过程非常长不方便阅读，所以通过这个命令我们可以把输出写入一个文件，之后再查看和分析。下面这个命令就是做这个。</p><pre style="margin-top:auto;margin-bottom:auto;">&nbsp;&nbsp;&nbsp;&nbsp;$&nbsp;systemd-analyze&nbsp;plot&nbsp;&gt;&nbsp;boot.svg</pre><h3>systemctl<span style="font-family:'宋体';">相关命令</span></h3><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><strong><span style="font-size:16px;font-family:'宋体';">systemctl</span></strong><strong><span style="font-size:16px;font-family:'宋体';">是服务管理工具中主要的工具，它融合之前service和chkconfig的功能于一体。可以使用它永久性或只在当前会话中启用/禁用服务。</span></strong></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><span style="font-size:16px;font-family:'宋体';">systemctl</span><span style="font-size:16px;font-family:'宋体';">可以列出正在运行的服务状态。</span></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><span style="font-size:16px;font-family:'宋体';">systemd-cgls</span><span style="font-size:16px;font-family:'宋体';">以树形列出正在运行的进程，它可以递归显示控制组内容。</span></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><strong><span style="font-size:16px;font-family:'宋体';">如何启动/关闭、启用/禁用服务？</span></strong></p><p style="text-align:left;"><span style="font-size:16px;font-family:'宋体';">启动一个服务：systemctl start postfix.service<br>关闭一个服务：systemctl stop postfix.service<br>重启一个服务：systemctl restart postfix.service<br>显示一个服务的状态：systemctl status postfix.service<br>在开机时启用一个服务：systemctl enable postfix.service<br>在开机时禁用一个服务：systemctl disable postfix.service<br>查看服务是否开机启动：systemctl is-enabled postfix.service<br>systemctl list-unit-files -t service sshd.service<br><a href="https://s5.51cto.com/wyfs02/M00/00/1A/wKiom1mWXIPyu9WaAAAi9IHMO6k857.png" target="_blank" style="color: rgb(66, 133, 244);"><img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/wKiom1mWXIPyu9WaAAAi9IHMO6k857.png" title="t28.png" alt="wKiom1mWXIPyu9WaAAAi9IHMO6k857.png" style="cursor: pointer;"></a></span></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><span style="font-size:16px;font-family:'宋体';">查看已启动的服务列表：systemctl list-unit-files|grep enabled<br>查看启动失败的服务列表：systemctl --failed<br>重新加载配置文件：systemctl condrestart sshd <br>condrestart选项挺有用，系统会测试新的配置文件是否有问题，若有问题，则不会重启，若没问题，则重启服务。<br>列出系统所有服务及状态：systemctl list-units --type=service</span></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><span style="font-size:16px;font-family:'宋体';">&nbsp;</span></p><p style="margin-top:auto;margin-bottom:auto;text-align:left;"><strong><span style="font-size:16px;font-family:'宋体';">PS</span></strong><strong><span style="font-size:16px;font-family:'宋体';">：</span></strong><span style="font-size:16px;font-family:'宋体';">使用命令systemctl is-enabled postfix.service 得到的值可以是enable、disable或static，这里的static 它是指对应的 Unit 文件中没有定义[Install]区域，因此无法配置为开机启动服务。</span></p><p><span style="font-size:16px;font-family:'宋体';">说
明：启用服务就是在当前“runlevel”的配置文件目录/etc/systemd/system/multi-user.target.wants
/里，建立/lib/systemd/system里面对应服务配置文件的软链接；禁用服务就是删除此软链接，添加服务就是添加软连接。</span></p><p><br></p></div>
				</div>
													<div class="artical-copyright mt26">©著作权归作者所有：来自51CTO博客作者jiawenjl的原创作品，如需转载，请注明出处，否则将追究法律责任</div>
									<div class="for-tag mt26">
																						<a href="https://blog.51cto.com/search/result?q=linux+" target="_blank">linux </a>
																								<a href="https://blog.51cto.com/search/result?q=%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B" target="_blank">启动过程</a>
																								<a href="https://blog.51cto.com/search/result?q=systemd+" target="_blank">systemd </a>
															                				<a class="last" href="https://blog.51cto.com/jiawenjl/category3.html" target="_blank"><i></i>Kylin</a>
                				<div class="clear"></div>
			</div>
			<div class="more-list">
				<p class="is-praise fl "><span type="1" blog_id="1957271" userid="4152561">0</span></p>
				<div class="share-box fr">
					<p class="share"><i></i>分享</p>
					<div class="bdsharebuttonbox bdshare-button-style0-16" data-bd-bind="1591346054754">
					  <span></span>
					  <a class="bds_tsina" data-cmd="tsina">微博</a>
					  <a class="bds_sqq" data-cmd="sqq">QQ</a>
					  <a class="bds_weixin" data-cmd="weixin">微信</a>
					  <img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/qr-url.png">
					</div>
				</div>
				<p class="favorites favorites-opt fr"><i></i>收藏</p>
								<div class="clear"></div>
			</div>
							<div class="artical-list">
	            					<a class="fl" href="https://blog.51cto.com/jiawenjl/1957134" title="麒麟服务器操作系统管理和配置软RAID">
						上一篇：麒麟服务器操作系统管理和配置软R...</a>
	            	            					<a class="fr" href="https://blog.51cto.com/jiawenjl/1969019" title=" sudoers的深入介绍与用户权限控制">
						下一篇： sudoers的深入介绍与用户...</a>
	            					<div class="clear"></div>
				</div>
						<div class="author-module">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/jiawenjl" class="a-img" target="_blank">
						<img class="is-vip-img is-vip-img-4" data-uid="4152561" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/noavatar_middle.gif">
					</a><i class="vip-icon vip-icon-4 on"></i>
				</div>
				<div class="author-module-center fl">
					<a class="h2" href="https://blog.51cto.com/jiawenjl" target="_blank" style="display:inline-block;">jiawenjl</a>
										<h3>10篇文章，7W+人气，0粉丝</h3>
									</div>
								<div class="clear"></div>
			</div>
		</div>
		<div class="artical-Left" id="comment">
			<!-- 发布评论 -->
			<div class="comment-creat">
				<div class="is-vip-bg-6 fl">
					<a href="https://blog.51cto.com/jiawenjl" class="header-img" target="_blank">
						<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/noavatar_middle.gif">
					</a>
				</div>
				<div class="first-publish fr publish_user_id">
					<textarea class="textareadiv textareadiv-publish" name="" id="" placeholder="提问和评论都可以，用心的回复会被更多人看到和认可" maxlength="500"></textarea>
					<div class="comment-push">
						<p class="msg fl">Ctrl+Enter&nbsp;发布</p>
													<p class="publish-btn blue-btn fr" flag="1">发布</p>
												<p class="cancel-btn cancel-btn-1 fr">取消</p>
						<div class="clear"></div>
					</div>
					<input type="hidden" class="user_id" value="4152561">
					<input type="hidden" class="reply_id" value="1957271">
					<input type="hidden" class="first_pid" value="">
				</div>
				<div class="clear"></div>
			</div>
						<div class="commentList"></div>
			<!-- page -->
			<div class="act_pageList_box"></div>
		</div>
		<!-- end left -->
		<!-- right start -->
		<div class="Blog-Right artical-Right">
			<a class="catalog" style="display: none;"></a>
			<a class="scrollTop" href="javascript:void(0);" onclick="$(window).scrollTop(0);" style="display: block;"></a>
		</div>
		<!-- end right  -->
	</div>
			<div class="special-column">
			<div class="Page M764">
									<div class="column-1">
						<h2 class="column-tit">推荐专栏<a href="https://blog.51cto.com/cloumn/index?utm_source=p" target="_blank"><span class="recommend-more-span" style="">更多</span></a></h2>
													<div class="column-box recommend-cloumn">
								<a href="https://blog.51cto.com/cloumn/detail/5" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/dc6736c5fd50474b5df8b76b040e3d03.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space left-list" href="https://blog.51cto.com/cloumn/detail/5" target="_blank"> 带你玩转高可用</a>
									<h3 class="white-space">前百度高级工程师的架构高可用实战</h3>
									<h4 class="white-space">共15章&nbsp;|&nbsp;<a href="https://blog.51cto.com/13527416" target="_blank">曹林华</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>511人订阅</span></h5>
								</div>
								<div class="right fr recommend-cloumn-right">
							        																							<a class="cloumn-subscribe left-list" cid="5" href="https://blog.51cto.com/cloumn/detail/5" ask="1" target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box recommend-cloumn">
								<a href="https://blog.51cto.com/cloumn/detail/6" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/629650e188ddde78b213e564c2e9ebff.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space left-list" href="https://blog.51cto.com/cloumn/detail/6" target="_blank"> 负载均衡高手炼成记</a>
									<h3 class="white-space">高并发架构之路</h3>
									<h4 class="white-space">共15章&nbsp;|&nbsp;<a href="https://blog.51cto.com/sery" target="_blank">sery</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>584人订阅</span></h5>
								</div>
								<div class="right fr recommend-cloumn-right">
							        																							<a class="cloumn-subscribe left-list" cid="6" href="https://blog.51cto.com/cloumn/detail/6" ask="1" target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box recommend-cloumn">
								<a href="https://blog.51cto.com/cloumn/detail/13" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/a940c66317ecbe58436a2ad3831c2d7d.png">
                													</a>
								<div class="center fl">
									<a class="h2 white-space left-list" href="https://blog.51cto.com/cloumn/detail/13" target="_blank"> 基于Python的DevOps实战</a>
									<h3 class="white-space">自动化运维开发新概念</h3>
									<h4 class="white-space">共20章&nbsp;|&nbsp;<a href="https://blog.51cto.com/yuhongchun" target="_blank">抚琴煮酒</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>549人订阅</span></h5>
								</div>
								<div class="right fr recommend-cloumn-right">
							        																							<a class="cloumn-subscribe left-list" cid="13" href="https://blog.51cto.com/cloumn/detail/13" ask="1" target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box recommend-cloumn">
								<a href="https://blog.51cto.com/cloumn/detail/18" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/45862f289339dc922ffda669fd74ad9b.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space left-list" href="https://blog.51cto.com/cloumn/detail/18" target="_blank"> 网工2.0晋级攻略 ——零基础入门Python/Ansible</a>
									<h3 class="white-space">网络工程师2.0进阶指南</h3>
									<h4 class="white-space">共30章&nbsp;|&nbsp;<a href="https://blog.51cto.com/gingerbeer" target="_blank">姜汁啤酒</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>1968人订阅</span></h5>
								</div>
								<div class="right fr recommend-cloumn-right">
							        																							<a class="cloumn-subscribe left-list" cid="18" href="https://blog.51cto.com/cloumn/detail/18" ask="1" target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
													<div class="column-box recommend-cloumn">
								<a href="https://blog.51cto.com/cloumn/detail/30" class="a-img fl cloumn-tab-par" target="_blank">
									<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/5353379fc95da1d7d34fd243b9ace17f.jpg">
                													</a>
								<div class="center fl">
									<a class="h2 white-space left-list" href="https://blog.51cto.com/cloumn/detail/30" target="_blank"> 全局视角看大型园区网</a>
									<h3 class="white-space">路由交换+安全+无线+优化+运维</h3>
									<h4 class="white-space">共40章&nbsp;|&nbsp;<a href="https://blog.51cto.com/weilan2222" target="_blank">51CTOsummer</a></h4>
									<h5><span class="price">
                                    ￥51.00
                                    </span><span>2417人订阅</span></h5>
								</div>
								<div class="right fr recommend-cloumn-right">
							        																							<a class="cloumn-subscribe left-list" cid="30" href="https://blog.51cto.com/cloumn/detail/30" ask="1" target="_blank">订&nbsp;&nbsp;&nbsp;阅</a>
																			    								</div>
								<div class="clear"></div>
							</div>
											</div>
													<div class="column-2" style="margin-top: 76px;">
						<h2 class="column-tit">猜你喜欢</h2>
						<div class="column-box">
															<a class="white-space" href="https://blog.51cto.com/jiawenjl/2055484?source=dra" target="_blank">Linux中 /proc/[pid] 目录各文件简析</a>
															<a class="white-space left-list" href="https://blog.51cto.com/jiawenjl/2051977?source=dra" target="_blank">【转】史上最强超融合入门干货：超融合与传统架构特性及收益详细对比</a>
															<a class="white-space" href="https://blog.51cto.com/fengyunshan911/2070818?source=drt" target="_blank">Mysql启报错报The server quit without updating PID file</a>
															<a class="white-space left-list" href="https://blog.51cto.com/flord/851465?source=drt" target="_blank"> 无线路由器的WMM功能和开启ap隔离，以及开启Short GI有什么用</a>
															<a class="white-space" href="https://blog.51cto.com/13043516/2055574?source=drt" target="_blank">Linux下开启VNCserver服务（远程连接）</a>
															<a class="white-space left-list" href="https://blog.51cto.com/369369/812889?source=drt" target="_blank">DNS原理及其解析过程【精彩剖析】</a>
															<a class="white-space" href="https://blog.51cto.com/lavasoft/99151?source=drt" target="_blank">Java线程：创建与启动</a>
															<a class="white-space left-list" href="https://blog.51cto.com/andyboge/2073420?source=drt" target="_blank">centos7的网卡重启方法</a>
															<a class="white-space" href="https://blog.51cto.com/732233048/1636409?source=drt" target="_blank">mysql启动报错：Starting MySQL... ERROR! The server quit without updating PID file </a>
															<a class="white-space left-list" href="https://blog.51cto.com/bigboss/2153651?source=drt" target="_blank">Kubernetes 1.11 手动安装并启用ipvs</a>
															<a class="white-space" href="https://blog.51cto.com/ylw6006/948729?source=drt" target="_blank">FastDFS介绍和配置过程</a>
															<a class="white-space left-list" href="https://blog.51cto.com/2755788/2178941?source=drt" target="_blank">VMware ESXi 6.7安装过程介绍</a>
															<a class="white-space" href="https://blog.51cto.com/jerrymin/2501622?source=drh" target="_blank">ES集群7.3.2版本在线扩容Data节点</a>
															<a class="white-space left-list" href="https://blog.51cto.com/14156658/2501597?source=drh" target="_blank">监控三剑客之Cacti监控服务器</a>
															<a class="white-space" href="https://blog.51cto.com/14156658/2501209?source=drh" target="_blank">监控三剑客之Nagios监控服务器</a>
															<a class="white-space left-list" href="https://blog.51cto.com/leejia/2501080?source=drh" target="_blank">k8s对接外部ceph集群</a>
															<a class="white-space" href="https://blog.51cto.com/51ctoblog/2500584?source=drh" target="_blank">【 完结福利 】 Python 实现实时文件监控</a>
															<a class="white-space left-list" href="https://blog.51cto.com/sery/2500501?source=drh" target="_blank">Rhel 7 pcs 实现oracle 12c高可用</a>
															<a class="white-space" href="https://blog.51cto.com/14831272/2500349?source=drh" target="_blank">记一次基于zabbix  snmp 监控实例</a>
															<a class="white-space left-list" href="https://blog.51cto.com/13812615/2500174?source=drh" target="_blank">kubernetes（二）之Docker容器及镜像</a>
														<div class="clear"></div>
						</div>
					</div>
							</div>
		</div>
		<div class="group_img_box" style="position: fixed;top: 40%;left:49%;">
		<div class="group_git_box">
                	 <img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/f84902630cd49eab16f7895cd73e3092.png" style="width:50px;height:50px;"> 	
			<!--<img src="https://s4.51cto.com/images/blog/201810/22/078772c84eb23213ea90f577d9316ce4.png"/>-->
        		</div>
			<div class="group_code_box">
			<img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/left-qr.jpg" width="130" height="130">
			<p>扫一扫,领取大礼包</p>
		</div>
		
		<div><!--学院领VIP-->
            <a href="https://edu.51cto.com/center/activity/member-activity?qd=bokexiaotu" target="_blank">
                <img src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/556fdbd28b29d2a48a431a95f9e06c90.gif" style="width:55px;margin-top: 10px;">
            </a>
        </div>
		
	</div>
	<div class="the-lowest-bg" style="display: none;">
		<div class="the-lowest Page M764">
			<p class="is-praise fl "><span type="1" blog_id="1957271" userid="4152561"></span></p>
			<p class="b-favorites favorites-opt fl"><i></i><b>0</b></p>
			<a class="b-reply fl"><i></i><font class="comment_number"></font></a>
			<div class="b-share fl">
				<i></i>分享
				<div class="bdsharebuttonbox bdshare-button-style0-16" data-bd-bind="1591346054754">
				  <a class="bds_tsina p2" data-cmd="tsina"></a>
				  <a class="bds_sqq p3" data-cmd="sqq"></a>
				  <a class="bds_weixin p1" data-cmd="weixin"><em class="code-icon"></em><img class="code-img" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/qr-url.png"></a>
				</div>
			</div>
      						<a href="https://blog.51cto.com/jiawenjl" class="b-name fr">jiawenjl</a>
			<div class="is-vip-bg-6 fr">
				<a href="https://blog.51cto.com/jiawenjl" class="b-img"><img class="is-vip-img is-vip-img-4" data-uid="4152561" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/noavatar_middle.gif"></a><i class="vip-icon vip-icon-4 on"></i>
			</div>
			<div class="clear"></div>

		</div>
	</div>
</div>
<!-- 老博文美观处理 -->
	<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/shCores.js"></script>
<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/countDown.js"></script>
<script>
	var praise_url = 'https://blog.51cto.com/praise/praise'
    	addReply_url = 'https://blog.51cto.com/comments/add'
    	removeUrl = 'https://blog.51cto.com/comments/del'
    	blog_id = '1957271'
    	pv_log_info = {
            'pv_type':'blog',
            'user_id':'4152561',
            'blog_id':'1957271'
        };
    	rid = '0'
    	is_comment = '0'
    	comment_list = '/blog/ajax-comment-list'
    	comment_sort = "asc"
    	index_url = 'https://blog.51cto.com/jiawenjl';
    	uc_url = 'https://ucenter.51cto.com/'
    	blog_url = 'https://blog.51cto.com/'
    	img_url = 'https://static1.51cto.com/edu/blog/'
    	i_user_id = ''
    	c_user_id ='4152561'
    	collect_url = 'https://blog.51cto.com/collect/add'
    	is_old = '1'
    	nicknameurl = 'https://blog.51cto.com/jiawenjl'
    	nickname = 'jiawenjl'
    	myself = window.location.href;
	$('.you-like-list li:odd').css({'margin-left': '10%'});
	$('.column-box a:odd').addClass('left-list')
	$('.myUrl').text(myself).click(function(){window.open(myself)})
	setTimeout(function(){$('.Footer').css({'margin-top':'-50px'})},50)
        	if(is_old==1){
    // SyntaxHighlighter.all();
    insertCodeElement("<p>Linux<span style=\"font-family:'\u5b8b\u4f53';\">\u7cfb\u7edf\u7684\u542f\u52a8\u65b9\u5f0f\u6709\u70b9\u590d\u6742\uff0c\u800c\u4e14\u603b\u662f\u6709\u9700\u8981\u4f18\u5316\u7684\u5730\u65b9\u3002\u4f20\u7edf\u7684<\/span>Linux<span style=\"font-family:'\u5b8b\u4f53';\">\u7cfb\u7edf\u542f\u52a8\u8fc7\u7a0b\u4e3b\u8981\u7531\u8457\u540d\u7684<\/span>init<span style=\"font-family:'\u5b8b\u4f53';\">\u8fdb\u7a0b\uff08\u4e5f\u88ab\u79f0\u4e3a<\/span>SysV init<span style=\"font-family:'\u5b8b\u4f53';\">\u542f\u52a8\u7cfb\u7edf\uff09\u5904\u7406\uff0c\u800c\u57fa\u4e8e<\/span>init<span style=\"font-family:'\u5b8b\u4f53';\">\u7684\u542f\u52a8\u7cfb\u7edf\u88ab\u8ba4\u4e3a\u6709\u6548\u7387\u4e0d\u8db3\u7684\u95ee\u9898\uff0c<\/span>systemd<span style=\"font-family:'\u5b8b\u4f53';\">\u662f<\/span>Linux<span style=\"font-family:'\u5b8b\u4f53';\">\u7cfb\u7edf\u673a\u5668\u7684\u53e6\u4e00\u79cd\u542f\u52a8\u65b9\u5f0f\uff0c\u5ba3\u79f0\u5f25\u8865\u4e86\u4ee5\u4f20\u7edf<\/span>Linux SysV init<span style=\"font-family:'\u5b8b\u4f53';\">\u4e3a\u57fa\u7840\u7684\u7cfb\u7edf\u7684\u7f3a\u70b9\u3002\u94f6\u6cb3\u9e92\u9e9f\u64cd\u4f5c\u7cfb\u7edfV4\u7248\u91c7\u7528\u4e86systemd\u3002<\/span><\/p><h3><span style=\"font-family:'\u5b8b\u4f53';\">\u7406\u89e3<\/span>Linux<span style=\"font-family:'\u5b8b\u4f53';\">\u542f\u52a8\u8fc7\u7a0b<\/span><\/h3><p>\u5728\u6211\u4eec\u6253\u5f00Linux\u7535\u8111\u7684\u7535\u6e90\u540e\u7b2c\u4e00\u4e2a\u542f\u52a8\u7684\u8fdb\u7a0b\u5c31\u662finit\u3002\u5206\u914d\u7ed9init\u8fdb\u7a0b\u7684PID\u662f1\u3002\u5b83\u662f\u7cfb\u7edf\u5176\u4ed6\u6240\u6709\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u3002\u5f53\u4e00\u53f0Linux\u7535\u8111\u542f\u52a8\u540e\uff0c\u5904\u7406\u5668\u4f1a\u5148\u5728\u7cfb\u7edf\u5b58\u50a8\u4e2d\u67e5\u627eBIOS\uff0c\u4e4b\u540eBIOS\u4f1a\u68c0\u6d4b\u7cfb\u7edf\u8d44\u6e90\u7136\u540e\u627e\u5230\u7b2c\u4e00\u4e2a\u5f15\u5bfc\u8bbe\u5907\uff0c\u901a\u5e38\u4e3a\u786c\u76d8\uff0c\u7136\u540e\u4f1a\u67e5\u627e\u786c\u76d8\u7684\u4e3b\u5f15\u5bfc\u8bb0\u5f55\uff08MBR\uff09\uff0c\u7136\u540e\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u5e76\u628a\u63a7\u5236\u6743\u4ea4\u7ed9\u5b83\uff0c\u4ee5\u540e\u7684\u542f\u52a8\u8fc7\u7a0b\u5c31\u7531MBR\u63a7\u5236\u3002<\/p><p>\u4e3b\u5f15\u5bfc\u8bb0\u5f55\u4f1a\u521d\u59cb\u5316\u5f15\u5bfc\u7a0b\u5e8f\uff08Linux\u4e0a\u6709\u4e24\u4e2a\u8457\u540d\u7684\u5f15\u5bfc\u7a0b\u5e8f\uff0cGRUB\u548cLILO\uff0c80%\u7684Linux\u7cfb\u7edf\u5728\u7528GRUB\u5f15\u5bfc\u7a0b\u5e8f\uff09\uff0c\u8fd9\u4e2a\u65f6\u5019GRUB\u6216LILO\u4f1a\u52a0\u8f7d\u5185\u6838\u6a21\u5757\u3002\u5185\u6838\u4f1a\u9a6c\u4e0a\u67e5\u627e\/sbin\u4e0b\u7684\u201cinit\u201d\u7a0b\u5e8f\u5e76\u6267\u884c\u5b83\u3002\u4ece\u8fd9\u91cc\u5f00\u59cbinit\u6210\u4e3a\u4e86Linux\u7cfb\u7edf\u7684\u7236\u8fdb\u7a0b\u3002init\u8bfb\u53d6\u7684\u7b2c\u4e00\u4e2a\u6587\u4ef6\u662f\/etc\/inittab\uff0c\u901a\u8fc7\u5b83init\u4f1a\u786e\u5b9a\u6211\u4eecLinux\u64cd\u4f5c\u7cfb\u7edf\u7684\u8fd0\u884c\u7ea7\u522b\u3002\u5b83\u4f1a\u4ece\u6587\u4ef6\/etc\/fstab\u91cc\u67e5\u627e\u5206\u533a\u8868\u4fe1\u606f\u7136\u540e\u505a\u76f8\u5e94\u7684\u6302\u8f7d\u3002\u7136\u540einit\u4f1a\u542f\u52a8\/etc\/init.d\u91cc\u6307\u5b9a\u7684\u9ed8\u8ba4\u542f\u52a8\u7ea7\u522b\u7684\u6240\u6709\u670d\u52a1\/\u811a\u672c\u3002\u6240\u6709\u670d\u52a1\u5728\u8fd9\u91cc\u901a\u8fc7init\u4e00\u4e2a\u4e00\u4e2a\u88ab\u521d\u59cb\u5316\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u91cc\uff0cinit\u6bcf\u6b21\u53ea\u542f\u52a8\u4e00\u4e2a\u670d\u52a1\uff0c\u6240\u6709\u670d\u52a1\/\u5b88\u62a4\u8fdb\u7a0b\u90fd\u5728\u540e\u53f0\u6267\u884c\u5e76\u7531init\u6765\u7ba1\u7406\u3002<\/p><p>\u5173\u673a\u8fc7\u7a0b\u5dee\u4e0d\u591a\u662f\u76f8\u53cd\u7684\u8fc7\u7a0b\uff0c\u9996\u5148init\u505c\u6b62\u6240\u6709\u670d\u52a1\uff0c\u6700\u540e\u9636\u6bb5\u4f1a\u5378\u8f7d\u6587\u4ef6\u7cfb\u7edf\u3002<\/p><p>\u4ee5\u4e0a\u63d0\u5230\u7684\u542f\u52a8\u8fc7\u7a0b\u6709\u4e00\u4e9b\u4e0d\u8db3\u7684\u5730\u65b9\u3002\u800c\u7528\u4e00\u79cd\u66f4\u597d\u7684\u65b9\u5f0f\u6765\u66ff\u4ee3\u4f20\u7edfinit\u7684\u9700\u6c42\u5df2\u7ecf\u5b58\u5728\u5f88\u957f\u65f6\u95f4\u4e86\u3002\u4e5f\u4ea7\u751f\u4e86\u8bb8\u591a\u66ff\u4ee3\u65b9\u6848\u3002\u5176\u4e2d\u6bd4\u8f83\u8457\u540d\u7684\u6709Upstart\uff0cEpoch\uff0cMuda\u548cSystemd\u3002\u800cSystemd\u83b7\u5f97\u6700\u591a\u5173\u6ce8\u5e76\u88ab\u8ba4\u4e3a\u662f\u76ee\u524d\u6700\u4f73\u7684\u65b9\u6848\u3002<\/p><h3><span style=\"font-family:'\u5b8b\u4f53';\">\u7406\u89e3<\/span>Systemd<\/h3><p>\u5f00\u53d1Systemd\u7684\u4e3b\u8981\u76ee\u7684\u5c31\u662f\u51cf\u5c11\u7cfb\u7edf\u5f15\u5bfc\u65f6\u95f4\u548c\u8ba1\u7b97\u5f00\u9500\u3002Systemd\uff08\u7cfb\u7edf\u7ba1\u7406\u5b88\u62a4\u8fdb\u7a0b\uff09\uff0c\u6700\u5f00\u59cb\u4ee5GNU GPL\u534f\u8bae\u6388\u6743\u5f00\u53d1\uff0c\u73b0\u5728\u5df2\u8f6c\u4e3a\u4f7f\u7528GNU LGPL\u534f\u8bae\uff0c\u5b83\u662f\u5982\u4eca\u8ba8\u8bba\u6700\u70ed\u70c8\u7684\u5f15\u5bfc\u548c\u670d\u52a1\u7ba1\u7406\u7a0b\u5e8f\u3002\u5982\u679c\u4f60\u7684Linux\u7cfb\u7edf\u914d\u7f6e\u4e3a\u4f7f\u7528Systemd\u5f15\u5bfc\u7a0b\u5e8f\uff0c\u5b83\u53d6\u66ff\u4f20\u7edf\u7684SysV init\uff0c\u542f\u52a8\u8fc7\u7a0b\u5c06\u4ea4\u7ed9systemd\u5904\u7406\u3002Systemd\u7684\u4e00\u4e2a\u6838\u5fc3\u529f\u80fd\u662f\u5b83\u540c\u65f6\u652f\u6301SysV init\u7684\u540e\u5f00\u673a\u542f\u52a8\u811a\u672c\u3002<\/p><p>Systemd\u5f15\u5165\u4e86\u5e76\u884c\u542f\u52a8\u7684\u6982\u5ff5\uff0c\u5b83\u4f1a\u4e3a\u6bcf\u4e2a\u9700\u8981\u542f\u52a8\u7684\u5b88\u62a4\u8fdb\u7a0b\u5efa\u7acb\u4e00\u4e2a\u5957\u63a5\u5b57\uff0c\u8fd9\u4e9b\u5957\u63a5\u5b57\u5bf9\u4e8e\u4f7f\u7528\u5b83\u4eec\u7684\u8fdb\u7a0b\u6765\u8bf4\u662f\u62bd\u8c61\u7684\uff0c\u8fd9\u6837\u5b83\u4eec\u53ef\u4ee5\u5141\u8bb8\u4e0d\u540c\u5b88\u62a4\u8fdb\u7a0b\u4e4b\u95f4\u8fdb\u884c\u4ea4\u4e92\u3002Systemd\u4f1a\u521b\u5efa\u65b0\u8fdb\u7a0b\u5e76\u4e3a\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u914d\u4e00\u4e2a\u63a7\u5236\u7ec4\uff08cgroup\uff09\u3002\u5904\u4e8e\u4e0d\u540c\u63a7\u5236\u7ec4\u7684\u8fdb\u7a0b\u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7\u5185\u6838\u6765\u4e92\u76f8\u901a\u4fe1\u3002systemd\u5904\u7406\u5f00\u673a\u542f\u52a8\u8fdb\u7a0b\u7684\u65b9\u5f0f\u975e\u5e38\u6f02\u4eae\uff0c\u548c\u4f20\u7edf\u57fa\u4e8einit\u7684\u7cfb\u7edf\u6bd4\u8d77\u6765\u4f18\u5316\u4e86\u592a\u591a\u3002\u8ba9\u6211\u4eec\u770b\u4e0bSystemd\u7684\u4e00\u4e9b\u6838\u5fc3\u529f\u80fd\u3002<\/p><ul class=\"list-paddingleft-2\" type=\"disc\"><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u548c<\/span>init<span style=\"font-family:'\u5b8b\u4f53';\">\u6bd4\u8d77\u6765\u5f15\u5bfc\u8fc7\u7a0b\u7b80\u5316\u4e86\u5f88\u591a<\/span><\/p><\/li><li><p>Systemd<span style=\"font-family:'\u5b8b\u4f53';\">\u652f\u6301\u5e76\u53d1\u5f15\u5bfc\u8fc7\u7a0b\u4ece\u800c\u53ef\u4ee5\u66f4\u5feb\u542f\u52a8<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u901a\u8fc7\u63a7\u5236\u7ec4\u6765\u8ffd\u8e2a\u8fdb\u7a0b\uff0c\u800c\u4e0d\u662f<\/span>PID<\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u4f18\u5316\u4e86\u5904\u7406\u5f15\u5bfc\u8fc7\u7a0b\u548c\u670d\u52a1\u4e4b\u95f4\u4f9d\u8d56\u7684\u65b9\u5f0f<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u652f\u6301\u7cfb\u7edf\u5feb\u7167\u548c\u6062\u590d<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u76d1\u63a7\u5df2\u542f\u52a8\u7684\u670d\u52a1\uff1b\u4e5f\u652f\u6301\u91cd\u542f\u5df2\u5d29\u6e83\u670d\u52a1<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u5305\u542b\u4e86<\/span>systemd-login<span style=\"font-family:'\u5b8b\u4f53';\">\u6a21\u5757\u7528\u4e8e\u63a7\u5236\u7528\u6237\u767b\u5f55<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u652f\u6301\u52a0\u8f7d\u548c\u5378\u8f7d\u7ec4\u4ef6<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u4f4e\u5185\u5b58\u4f7f\u7528\u75d5\u8ff9\u4ee5\u53ca\u4efb\u52a1\u8c03\u5ea6\u80fd\u529b<\/span><\/p><\/li><li><p><span style=\"font-family:'\u5b8b\u4f53';\">\u8bb0\u5f55\u4e8b\u4ef6\u7684<\/span>Journald<span style=\"font-family:'\u5b8b\u4f53';\">\u6a21\u5757\u548c\u8bb0\u5f55\u7cfb\u7edf\u65e5\u5fd7\u7684<\/span>syslogd<span style=\"font-family:'\u5b8b\u4f53';\">\u6a21\u5757<\/span><\/p><\/li><\/ul><p><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">Systemd<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\u540c\u65f6\u4e5f\u6e05\u6670\u5730\u5904\u7406\u4e86\u7cfb\u7edf\u5173\u673a\u8fc7\u7a0b\u3002\u5728\u9e92\u9e9f\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u5728<\/span><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">\/lib\/systemd\/system<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\u76ee\u5f55\u4e0b\u6709\u4e09\u4e2a\u811a\u672c\uff0c\u5206\u522b\u53eb<\/span><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">systemd-halt.service<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\uff0c<\/span><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">systemd-poweroff.service<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\uff0c<\/span><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">systemd-reboot.service<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\u3002\u8fd9\u51e0\u4e2a\u811a\u672c\u4f1a\u5728\u7528\u6237\u9009\u62e9\u5173\u673a\uff0c\u91cd\u542f\u6216\u5f85\u673a\u65f6\u6267\u884c\u3002\u5728\u63a5\u6536\u5230\u5173\u673a\u4e8b\u4ef6\u65f6\uff0c<\/span><span style=\"font-size:14px;font-family:Calibri, 'sans-serif';\">systemd<\/span><span style=\"font-size:14px;font-family:'\u5b8b\u4f53';\">\u9996\u5148\u5378\u8f7d\u6240\u6709\u6587\u4ef6\u7cfb\u7edf\u5e76\u505c\u6b62\u6240\u6709\u5185\u5b58\u4ea4\u6362\u8bbe\u5907\uff0c\u65ad\u5f00\u5b58\u50a8\u8bbe\u5907\uff0c\u4e4b\u540e\u505c\u6b62\u6240\u6709\u5269\u4e0b\u7684\u8fdb\u7a0b\u3002<\/span><\/p><h3>Systemd<span style=\"font-family:'\u5b8b\u4f53';\">\u7ed3\u6784\u6982\u89c8<\/span><\/h3><p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e0bLinux\u7cfb\u7edf\u5728\u4f7f\u7528systemd\u4f5c\u4e3a\u5f15\u5bfc\u7a0b\u5e8f\u65f6\u7684\u5f00\u673a\u542f\u52a8\u8fc7\u7a0b\u7684\u7ed3\u6784\u6027\u7ec6\u8282\u3002\u4e3a\u4e86\u7b80\u5355\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u9762\u6309\u6b65\u9aa4\u5217\u51fa\u6765\u8fd9\u4e2a\u8fc7\u7a0b\uff1a<\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">1.<\/span><\/strong>\u5f53\u4f60\u6253\u5f00\u7535\u6e90\u540e\u7535\u8111\u6240\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662fBIOS\u521d\u59cb\u5316\u3002BIOS\u4f1a\u8bfb\u53d6\u5f15\u5bfc\u8bbe\u5907\u8bbe\u5b9a\uff0c\u5b9a\u4f4d\u5e76\u4f20\u9012\u7cfb\u7edf\u63a7\u5236\u6743\u7ed9MBR\uff08\u5047\u8bbe\u786c\u76d8\u662f\u7b2c\u4e00\u5f15\u5bfc\u8bbe\u5907\uff09\u3002<\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">2.<\/span><\/strong> MBR\u4eceGrub\u6216LILO\u5f15\u5bfc\u7a0b\u5e8f\u8bfb\u53d6\u76f8\u5173\u4fe1\u606f\u5e76\u521d\u59cb\u5316\u5185\u6838\u3002\u63a5\u4e0b\u6765\u5c06\u7531Grub\u6216LILO\u7ee7\u7eed\u5f15\u5bfc\u7cfb\u7edf\u3002\u5982\u679c\u4f60\u5728grub\u914d\u7f6e\u6587\u4ef6\u91cc\u6307\u5b9a\u4e86systemd\u4f5c\u4e3a\u5f15\u5bfc\u7ba1\u7406\u7a0b\u5e8f\uff0c\u4e4b\u540e\u7684\u5f15\u5bfc\u8fc7\u7a0b\u5c06\u7531systemd\u5b8c\u6210\u3002Systemd\u4f7f\u7528\u201ctarget\u201d\u6765\u5904\u7406\u5f15\u5bfc\u548c\u670d\u52a1\u7ba1\u7406\u8fc7\u7a0b\u3002\u8fd9\u4e9bsystemd\u91cc\u7684\u201ctarget\u201d\u6587\u4ef6\u88ab\u7528\u4e8e\u5206\u7ec4\u4e0d\u540c\u7684\u5f15\u5bfc\u5355\u5143\u4ee5\u53ca\u542f\u52a8\u540c\u6b65\u8fdb\u7a0b\u3002<\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">3.<\/span><\/strong> systemd\u6267\u884c\u7684\u7b2c\u4e00\u4e2a\u76ee\u6807\u662f<strong><span style=\"font-family:'\u5b8b\u4f53';\">default.target<\/span><\/strong>\u3002\u4f46\u5b9e\u9645\u4e0adefault.target\u662f\u6307\u5411<strong><span style=\"font-family:'\u5b8b\u4f53';\">graphical.target<\/span><\/strong>\u7684\u8f6f\u94fe\u63a5\u3002Kylin\u91cc\u7684\u8f6f\u94fe\u63a5\u7528\u8d77\u6765\u548cWindows\u4e0b\u7684\u5feb\u6377\u65b9\u5f0f\u4e00\u6837\u3002\u6587\u4ef6Graphical.target\u7684\u5b9e\u9645\u4f4d\u7f6e\u662f\/lib\/systemd\/system\/graphical.target\u3002\u5728\u4e0b\u9762\u7684\u622a\u56fe\u91cc\u663e\u793a\u4e86graphical.target\u6587\u4ef6\u7684\u5185\u5bb9\u3002<\/p><p><a href=\"https:\/\/s1.51cto.com\/wyfs02\/M01\/00\/1A\/wKiom1mWW6Xzq8RYAACfly5SO24196.png\" target=\"_blank\"><img src=\"https:\/\/s1.51cto.com\/wyfs02\/M01\/00\/1A\/wKiom1mWW6Xzq8RYAACfly5SO24196.png\" title=\"t21.png\" alt=\"wKiom1mWW6Xzq8RYAACfly5SO24196.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">4.<\/span><\/strong>\u5728\u8fd9\u4e2a\u9636\u6bb5\uff0c\u4f1a\u542f\u52a8<strong><span style=\"font-family:'\u5b8b\u4f53';\">multi-user.target<\/span><\/strong>\u800c\u8fd9\u4e2atarget\u5c06\u81ea\u5df1\u7684\u5b50\u5355\u5143\u653e\u5728\u76ee\u5f55\u201c\/etc\/systemd\/system\/multi-user.target.wants\u201d\u91cc\u3002\u8fd9\u4e2atarget\u4e3a\u591a\u7528\u6237\u652f\u6301\u8bbe\u5b9a\u7cfb\u7edf\u73af\u5883\u3002\u975eroot\u7528\u6237\u4f1a\u5728\u8fd9\u4e2a\u9636\u6bb5\u7684\u5f15\u5bfc\u8fc7\u7a0b\u4e2d\u542f\u7528\u3002\u9632\u706b\u5899\u76f8\u5173\u7684\u670d\u52a1\u4e5f\u4f1a\u5728\u8fd9\u4e2a\u9636\u6bb5\u542f\u52a8\u3002<\/p><p>\"multi-user.target\"\u4f1a\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u53e6\u4e00\u5c42\u201c<strong><span style=\"font-family:'\u5b8b\u4f53';\">basic.target<\/span><\/strong>\u201d\u3002<\/p><p><a href=\"https:\/\/s2.51cto.com\/wyfs02\/M02\/00\/1A\/wKiom1mWW9HRmC_LAACTEARdmkU991.png\" target=\"_blank\"><img src=\"https:\/\/s2.51cto.com\/wyfs02\/M02\/00\/1A\/wKiom1mWW9HRmC_LAACTEARdmkU991.png\" title=\"t23.png\" alt=\"wKiom1mWW9HRmC_LAACTEARdmkU991.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">5.<\/span><\/strong> \"basic.target\"\u5355\u5143\u7528\u4e8e\u542f\u52a8\u666e\u901a\u670d\u52a1\u7279\u522b\u662f\u56fe\u5f62\u7ba1\u7406\u670d\u52a1\u3002\u5b83\u901a\u8fc7\/lib\/systemd\/system\/basic.target.wants\u76ee\u5f55\u6765\u51b3\u5b9a\u54ea\u4e9b\u670d\u52a1\u4f1a\u88ab\u542f\u52a8\uff0cbasic.target\u4e4b\u540e\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9<strong><span style=\"font-family:'\u5b8b\u4f53';\">sysinit.target<\/span><\/strong>.<\/p><p><a href=\"https:\/\/s2.51cto.com\/wyfs02\/M02\/9E\/CA\/wKioL1mWW-zQXqCUAADV_AlVu58735.png\" target=\"_blank\"><img src=\"https:\/\/s2.51cto.com\/wyfs02\/M02\/9E\/CA\/wKioL1mWW-zQXqCUAADV_AlVu58735.png\" title=\"t24.png\" alt=\"wKioL1mWW-zQXqCUAADV_AlVu58735.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">6.<\/span><\/strong> \"sysinit.target\"\u4f1a\u542f\u52a8\u91cd\u8981\u7684\u7cfb\u7edf\u670d\u52a1\u4f8b\u5982\u7cfb\u7edf\u6302\u8f7d\uff0c\u5185\u5b58\u4ea4\u6362\u7a7a\u95f4\u548c\u8bbe\u5907\uff0c\u5185\u6838\u8865\u5145\u9009\u9879\u7b49\u7b49\u3002sysinit.target\u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u4f1a\u4f20\u9012\u7ed9<strong><span style=\"font-family:'\u5b8b\u4f53';\">local-fs.target<\/span><\/strong>\u3002\u8fd9\u4e2atarget\u5355\u5143\u7684\u5185\u5bb9\u5982\u4e0b\u9762\u622a\u56fe\u91cc\u6240\u5c55\u793a\u3002<\/p><p><a href=\"https:\/\/s5.51cto.com\/wyfs02\/M01\/00\/1A\/wKiom1mWXAfyPffGAACHfBppxSY565.png\" target=\"_blank\"><img src=\"https:\/\/s5.51cto.com\/wyfs02\/M01\/00\/1A\/wKiom1mWXAfyPffGAACHfBppxSY565.png\" title=\"t25.png\" alt=\"wKiom1mWXAfyPffGAACHfBppxSY565.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">7.<\/span><\/strong> local-fs.target\uff0c\u8fd9\u4e2atarget\u5355\u5143\u4e0d\u4f1a\u542f\u52a8\u7528\u6237\u76f8\u5173\u7684\u670d\u52a1\uff0c\u5b83\u53ea\u5904\u7406\u5e95\u5c42\u6838\u5fc3\u670d\u52a1\u3002\u8fd9\u4e2atarget\u4f1a\u6839\u636e\/etc\/fstab\u548c\/etc\/inittab\u6765\u6267\u884c\u76f8\u5173\u64cd\u4f5c\u3002<\/p><h3 id=\"toc_4\"><span style=\"font-family:'\u5b8b\u4f53';\">\u7cfb\u7edf\u5f15\u5bfc\u6027\u80fd\u5206\u6790<\/span><\/h3><p>Systemd\u63d0\u4f9b\u4e86\u5de5\u5177\u7528\u4e8e\u8bc6\u522b\u548c\u5b9a\u4f4d\u5f15\u5bfc\u76f8\u5173\u7684\u95ee\u9898\u6216\u6027\u80fd\u5f71\u54cd\u3002<strong><span style=\"font-family:'\u5b8b\u4f53';\">Systemd-analyze<\/span><\/strong>\u662f\u4e00\u4e2a\u5185\u5efa\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u7528\u6765\u68c0\u6d4b\u5f15\u5bfc\u8fc7\u7a0b\u3002\u4f60\u53ef\u4ee5\u627e\u51fa\u5728\u542f\u52a8\u8fc7\u7a0b\u4e2d\u51fa\u9519\u7684\u5355\u5143\uff0c\u7136\u540e\u8ddf\u8e2a\u5e76\u6539\u6b63\u5f15\u5bfc\u7ec4\u4ef6\u7684\u95ee\u9898\u3002\u5728\u4e0b\u9762\u5217\u51fa\u4e00\u4e9b\u5e38\u7528\u7684systemd-analyze\u547d\u4ee4\u3002<\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">systemd-analyzetime<\/span><\/strong>\u7528\u4e8e\u663e\u793a\u5185\u6838\u548c\u666e\u901a\u7528\u6237\u7a7a\u95f4\u542f\u52a8\u65f6\u6240\u82b1\u7684\u65f6\u95f4\u3002<\/p><p><a href=\"https:\/\/s3.51cto.com\/wyfs02\/M00\/9E\/CA\/wKioL1mWXD6x1XoIAAAig9vzEW8119.png\" target=\"_blank\"><img src=\"https:\/\/s3.51cto.com\/wyfs02\/M00\/9E\/CA\/wKioL1mWXD6x1XoIAAAig9vzEW8119.png\" title=\"t26.png\" alt=\"wKioL1mWXD6x1XoIAAAig9vzEW8119.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">systemd-analyzeblame<\/span><\/strong>\u4f1a\u5217\u51fa\u6240\u6709\u6b63\u5728\u8fd0\u884c\u7684\u5355\u5143\uff0c\u6309\u4ece\u521d\u59cb\u5316\u5f00\u59cb\u5230\u5f53\u524d\u6240\u82b1\u7684\u65f6\u95f4\u6392\u5e8f\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u4f60\u5c31\u77e5\u9053\u54ea\u4e9b\u670d\u52a1\u5728\u5f15\u5bfc\u8fc7\u7a0b\u4e2d\u8981\u82b1\u8f83\u957f\u65f6\u95f4\u6765\u542f\u52a8\u3002<\/p><p><a href=\"https:\/\/s3.51cto.com\/wyfs02\/M02\/00\/1A\/wKiom1mWXFegvkNRAABcmvdIRH4736.png\" target=\"_blank\"><img src=\"https:\/\/s3.51cto.com\/wyfs02\/M02\/00\/1A\/wKiom1mWXFegvkNRAABcmvdIRH4736.png\" title=\"t27.png\" alt=\"wKiom1mWXFegvkNRAABcmvdIRH4736.png\" \/><\/a><\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">systemd-analyzeverify<\/span><\/strong>\u663e\u793a\u5728\u6240\u6709\u7cfb\u7edf\u5355\u5143\u4e2d\u662f\u5426\u6709\u8bed\u6cd5\u9519\u8bef\u3002<\/p><p><strong><span style=\"font-family:'\u5b8b\u4f53';\">systemd-analyzeplot<\/span><\/strong>\u53ef\u4ee5\u7528\u6765\u628a\u6574\u4e2a\u5f15\u5bfc\u8fc7\u7a0b\u5199\u5165\u4e00\u4e2aSVG\u683c\u5f0f\u6587\u4ef6\u91cc\u3002\u6574\u4e2a\u5f15\u5bfc\u8fc7\u7a0b\u975e\u5e38\u957f\u4e0d\u65b9\u4fbf\u9605\u8bfb\uff0c\u6240\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u547d\u4ee4\u6211\u4eec\u53ef\u4ee5\u628a\u8f93\u51fa\u5199\u5165\u4e00\u4e2a\u6587\u4ef6\uff0c\u4e4b\u540e\u518d\u67e5\u770b\u548c\u5206\u6790\u3002\u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u5c31\u662f\u505a\u8fd9\u4e2a\u3002<\/p><pre style=\"margin-top:auto;margin-bottom:auto;\">&nbsp;&nbsp;&nbsp;&nbsp;$&nbsp;systemd-analyze&nbsp;plot&nbsp;&gt;&nbsp;boot.svg<\/pre><h3>systemctl<span style=\"font-family:'\u5b8b\u4f53';\">\u76f8\u5173\u547d\u4ee4<\/span><\/h3><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">systemctl<\/span><\/strong><strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u662f\u670d\u52a1\u7ba1\u7406\u5de5\u5177\u4e2d\u4e3b\u8981\u7684\u5de5\u5177\uff0c\u5b83\u878d\u5408\u4e4b\u524dservice\u548cchkconfig\u7684\u529f\u80fd\u4e8e\u4e00\u4f53\u3002\u53ef\u4ee5\u4f7f\u7528\u5b83\u6c38\u4e45\u6027\u6216\u53ea\u5728\u5f53\u524d\u4f1a\u8bdd\u4e2d\u542f\u7528\/\u7981\u7528\u670d\u52a1\u3002<\/span><\/strong><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">systemctl<\/span><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u53ef\u4ee5\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u7684\u670d\u52a1\u72b6\u6001\u3002<\/span><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">systemd-cgls<\/span><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u4ee5\u6811\u5f62\u5217\u51fa\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff0c\u5b83\u53ef\u4ee5\u9012\u5f52\u663e\u793a\u63a7\u5236\u7ec4\u5185\u5bb9\u3002<\/span><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u5982\u4f55\u542f\u52a8\/\u5173\u95ed\u3001\u542f\u7528\/\u7981\u7528\u670d\u52a1\uff1f<\/span><\/strong><\/p><p style=\"text-align:left;\"><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u542f\u52a8\u4e00\u4e2a\u670d\u52a1\uff1asystemctl start postfix.service<br \/>\u5173\u95ed\u4e00\u4e2a\u670d\u52a1\uff1asystemctl stop postfix.service<br \/>\u91cd\u542f\u4e00\u4e2a\u670d\u52a1\uff1asystemctl restart postfix.service<br \/>\u663e\u793a\u4e00\u4e2a\u670d\u52a1\u7684\u72b6\u6001\uff1asystemctl status postfix.service<br \/>\u5728\u5f00\u673a\u65f6\u542f\u7528\u4e00\u4e2a\u670d\u52a1\uff1asystemctl enable postfix.service<br \/>\u5728\u5f00\u673a\u65f6\u7981\u7528\u4e00\u4e2a\u670d\u52a1\uff1asystemctl disable postfix.service<br \/>\u67e5\u770b\u670d\u52a1\u662f\u5426\u5f00\u673a\u542f\u52a8\uff1asystemctl is-enabled postfix.service<br \/>systemctl list-unit-files -t service sshd.service<br \/><a href=\"https:\/\/s5.51cto.com\/wyfs02\/M00\/00\/1A\/wKiom1mWXIPyu9WaAAAi9IHMO6k857.png\" target=\"_blank\"><img src=\"https:\/\/s5.51cto.com\/wyfs02\/M00\/00\/1A\/wKiom1mWXIPyu9WaAAAi9IHMO6k857.png\" title=\"t28.png\" alt=\"wKiom1mWXIPyu9WaAAAi9IHMO6k857.png\" \/><\/a><\/span><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u67e5\u770b\u5df2\u542f\u52a8\u7684\u670d\u52a1\u5217\u8868\uff1asystemctl list-unit-files|grep enabled<br \/>\u67e5\u770b\u542f\u52a8\u5931\u8d25\u7684\u670d\u52a1\u5217\u8868\uff1asystemctl --failed<br \/>\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\uff1asystemctl condrestart sshd <br \/>condrestart\u9009\u9879\u633a\u6709\u7528\uff0c\u7cfb\u7edf\u4f1a\u6d4b\u8bd5\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6709\u95ee\u9898\uff0c\u82e5\u6709\u95ee\u9898\uff0c\u5219\u4e0d\u4f1a\u91cd\u542f\uff0c\u82e5\u6ca1\u95ee\u9898\uff0c\u5219\u91cd\u542f\u670d\u52a1\u3002<br \/>\u5217\u51fa\u7cfb\u7edf\u6240\u6709\u670d\u52a1\u53ca\u72b6\u6001\uff1asystemctl list-units --type=service<\/span><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">&nbsp;<\/span><\/p><p style=\"margin-top:auto;margin-bottom:auto;text-align:left;\"><strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">PS<\/span><\/strong><strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\uff1a<\/span><\/strong><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u4f7f\u7528\u547d\u4ee4systemctl is-enabled postfix.service \u5f97\u5230\u7684\u503c\u53ef\u4ee5\u662fenable\u3001disable\u6216static\uff0c\u8fd9\u91cc\u7684static \u5b83\u662f\u6307\u5bf9\u5e94\u7684 Unit \u6587\u4ef6\u4e2d\u6ca1\u6709\u5b9a\u4e49[Install]\u533a\u57df\uff0c\u56e0\u6b64\u65e0\u6cd5\u914d\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8\u670d\u52a1\u3002<\/span><\/p><p><span style=\"font-size:16px;font-family:'\u5b8b\u4f53';\">\u8bf4\u660e\uff1a\u542f\u7528\u670d\u52a1\u5c31\u662f\u5728\u5f53\u524d\u201crunlevel\u201d\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\/etc\/systemd\/system\/multi-user.target.wants\/\u91cc\uff0c\u5efa\u7acb\/lib\/systemd\/system\u91cc\u9762\u5bf9\u5e94\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u7684\u8f6f\u94fe\u63a5\uff1b\u7981\u7528\u670d\u52a1\u5c31\u662f\u5220\u9664\u6b64\u8f6f\u94fe\u63a5\uff0c\u6dfb\u52a0\u670d\u52a1\u5c31\u662f\u6dfb\u52a0\u8f6f\u8fde\u63a5\u3002<\/span><\/p><p><br \/><\/p>", '#result');
  }

  function insertCodeElement(content, container){
    container = container || document;
    // 创建一个 div 来放置获取到的内容，这样就可以把 content 字符串内容转换成 dom
    // 方便我们对这个 dom 进行操作（只是创建 div，并没有插入到文档，他只存在于内存中）
    var parent = document.createElement('div');
    parent.innerHTML = content;

    // 找到 parent 中的所有 pre 标签，并遍历
    var $pres = $(parent).find('pre');
    $pres.each(function(index, el) {
      var $el = $(el),
          html = $el.html(),
          code = document.createElement('code'),
          elClass = $el.attr('class');
      if(!elClass) {return};
          // 获取 pre 标签中，class 属性中包含的本段代码所有的编程语言
      var language = elClass.substring(6, elClass.indexOf(';'));

      code.className = 'language-' + language;
      code.innerHTML = html;

      $el.html(code);
    });

    $(container).html(parent.innerHTML);

    // 最后，调用 Prism 的方法来高亮代码
    Prism.highlightAll();
  }
	window._bd_share_config={
    "common":{
      "bdText":"systemd的理解和systemctl使用",
      "bdDesc":$("#abstract_bdshare").text(),
      "bdMini":"2",
      "bdMiniList":false,
      "bdPic":"https://s4.51cto.com/images/201710/25/bd540a4f14d822f6e69087758699358b.jpg",
      "bdStyle":"0",
      "bdSize":"16"
    },
    "share":{}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
  setTimeout(function(){
  	$('.bdsharebuttonbox a').removeAttr('title')
  },1000);

	var now_time = 1591346053; //当前时间
  setInterval(function(){now_time+=0.01},10);

  // 初始化页面
  updatePage();
  // 页面tab切换
  zDate.visibilityAction(function () {
    zDate.getServerTime(function (e) {
      var updateResult = new Date(e).getTime();
      now_time = +updateResult.toString().substr(0, 10);
      updatePage();
    });
   })
  // 定时刷新现在时间
  setInterval(function () {
    zDate.getServerTime(function (e) {
      var updateResult = new Date(e).getTime();
      now_time = +updateResult.toString().substr(0, 10);
      updatePage();
    });
  }, 1000*60*2);
  // 页面刷新
  function updatePage() {
    $('.presell').each(function(index, item) {
      var end_time = $(this).data('end'); // 结束时间
      if (!end_time) {
        return;
      }
      var me = $(this);
      if (me.lastTime) {
        clearInterval(me.lastTime);
        me.lastTime = null;
      } else {
        me.lastTime = setInterval(function() {
          zDate.setLastTimePc(me.find('.timespan'), (end_time*1000-now_time*1000), me.lastTime, function() {
						me.parents('.right').find('.cloumn-subscribe').removeClass('presell-color');
						me.remove();
						$('.pre-tips').remove();
					});
        }, 10);
      }
    });
  }
		//二维码显示
		$(".group_git_box").hover(function(){
			$(this).parents('.group_img_box').find(".group_code_box").show()
		},function(){
			$(this).parents('.group_img_box').find(".group_code_box").hide()
		})
</script>
</div>
<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/marked.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/highlight.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/detail_mp.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/detail.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/details_new.js"></script><script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/copy.js"></script>    
<div style="display:none">
    <iframe scrolling="no" src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/pageview.html" width="0" height="0" frameborder="0"></iframe>
</div>

<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/pvlog.js"></script>
<script>
  $(".gotop").click(function(){$(window).scrollTop(0)})
</script>


    <script type="text/javascript">
    //百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?2283d46608159c3b39fc9f1178809c21";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();

    //自动推送链接
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        }
        else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
    </script>

    <script type="text/javascript">
      var _vds = _vds || [];
      window._vds = _vds;
      (function(){
        _vds.push(['setAccountId', '8c51975c40edfb67']);
        (function() {
          var vds = document.createElement('script');
          vds.type='text/javascript';
          vds.async = true;
          vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'assets.growingio.com/vds.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(vds, s);
        })();
      })();
      //document.write(decodeURI("%3Cscript src='https://tongji.51cto.com/frontend/tj.gif' type='text/javascript'%3E%3C/script%3E"));
    </script>
    
<script>
  var uid = '';
  var BLOG_URL = 'https://blog.51cto.com/';
</script>
<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/jquery_003.js"></script>
<script src="systemd%E7%9A%84%E7%90%86%E8%A7%A3%E5%92%8Csystemctl%E4%BD%BF%E7%94%A8-%E8%87%AA%E7%94%B1%E8%87%AA%E5%9C%A8-51CTO%E5%8D%9A%E5%AE%A2_files/time-on-page.js" charset="utf-8"></script>
<script>
    (function(){
        var wh=$(window).height(),fh=$('.Footer').outerHeight(true),hh=$('.Header').outerHeight(true)
        $('.Content-box').css({'min-height': wh-fh-hh})
    })()
</script>


<div id="zhichiBtnBox" style="position: fixed; z-index: 2147483583; box-shadow: rgba(15, 66, 76, 0.25) 0px 0px 14px 0px; width: 60px; height: 60px; border-radius: 50%; background-color: rgb(66, 133, 244); background-image: url(&quot;//www.sobot.com/chat/frame/imgs/icon.png&quot;); background-repeat: no-repeat; background-position: 18px -58px; right: 40px; bottom: 90px; display: none;"><a hidefocus="" id="zhichiBtn" style="position:relative;text-decoration: none; outline: none; font-family: Microsoft Yahei, Arial, Helvetica; color: #fff; font-size: 16px; display: inline-block; margin: 0; padding: 0; border: none; line-height:43px; float:none;width:100%;height:100%;border-radius:50%;"><span class="zc-advice-icon-btn-title" style="box-shadow: rgba(107, 113, 114, 0.15) 0px 2px 4px 0px; border: 1px solid rgb(235, 239, 240); font-family: Microsoft Yahei, Arial, Helvetica; color: rgb(85, 85, 86); font-size: 13px; margin: 0px; text-align: right; background: rgb(255, 255, 255) none repeat scroll 0% 0%; position: absolute; top: 15px; right: 70px; text-overflow: ellipsis; white-space: nowrap; word-break: normal; display: none; border-radius: 3px; padding: 0px 5px; height: 30px; line-height: 30px;">咨询在线客服</span></a><i style="position:absolute;top:0px;right:0px;padding:1px;line-height:20px;text-align:center;color:#fff;font-weight:bold;height:18px;min-width:18px;background-color:#ed5c5c;border-radius:18px;font-size:12px;display:none;font-style:normal;" id="zhichiCount"></i></div></body></html>