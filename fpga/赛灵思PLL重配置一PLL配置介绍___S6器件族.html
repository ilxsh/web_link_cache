<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="referrer" content="origin" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>赛灵思PLL重配置一PLL配置介绍___S6器件族 - 洋葱洋葱 - 博客园</title>
    <meta property="og:description" content="赛灵思PLL的重配置_S6 PLL的重新配置就是可以随时更改输出时钟的频率，而不用重新在编译，生成比特流文件，再下载到对应的器件中去，本文主要介绍PLL的重配置的一些背景，基础知识，后续的文章来分析一" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=KOZafwuaDasEedEenI5aTy8aXH0epbm6VUJ0v3vsT_Q1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/clover/bundle-clover.css?v=ysbMD_tG88uRfQuhBDLbRjiNM_9XhcM_04JlSPFdU9w1"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/clover/bundle-clover-mobile.css?v=Go8Bj0ZU9gZXuPSKWcSQabps3E1njgJKYz4DiOq6-N41"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/cofin/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/cofin/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/cofin/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=352184;var currentBlogApp='cofin',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="/bundles/blog-common.js?v=smtcUT5dhdu_5eEO8CKHYoVc7DPLgEBGzp6zKkstlzg1" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<!--done-->
<TABLE cellpadding="0" cellspacing="0" border="0" align="center" width="100%">
<TR>
	<TD width=299 background="/skins/clover/images/banner1.jpg"></TD>
	<TD background="/skins/clover/images/banner.jpg">
<!--done-->
<div class="header">
	<div class="headerText">
		<a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/cofin/">洋葱洋葱</a><br>
		
	</div>
</div>
</TD>
	<TD width=296 background="/skins/clover/images/banner2.jpg"></TD>
</TR>
</TABLE>
<div id="mylinks"><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a>&nbsp; &nbsp;
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/cofin/">首页</a>&nbsp; &nbsp;
<a href="http://q.cnblogs.com/" class="menu" target="_blank">博问</a>&nbsp; &nbsp;
<a href="http://home.cnblogs.com/ing/" class="menu" target="_blank">闪存</a>&nbsp; &nbsp;
<a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a>&nbsp; &nbsp;
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/cofin/rss">订阅</a>
<a id="blog_nav_rss_image" href="https://www.cnblogs.com/cofin/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>&nbsp; &nbsp;
<a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a>
<!-- <a id="blog_nav_contact" accesskey="9" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E6%B4%8B%E8%91%B1%E6%B4%8B%E8%91%B1">联系</a>&nbsp;&nbsp;&nbsp; -->
</div>
<div id="mytopmenu">
	
		<DIV id="mystats">
			<div id="blog_stats">
<!--done-->
<div class="blogStats">
posts - 35,&nbsp;
comments - 14,&nbsp;
trackbacks - 0

</div></div></DIV>
	
</div>
<div id="centercontent">
	
        <div id="post_detail">
<!--done-->
<div class = "post">
	<div class = "postTitle">
		<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/cofin/p/6825253.html">赛灵思PLL重配置一PLL配置介绍___S6器件族</a>
	</div>
	<div id="cnblogs_post_body" class="blogpost-body"><p>赛灵思PLL的重配置_S6</p>
<p>&nbsp;</p>
<p>PLL的重新配置就是可以随时更改输出时钟的频率，而不用重新在编译，生成比特流文件，再下载到对应的器件中去，本文主要介绍PLL的重配置的一些背景，基础知识，后续的文章来分析一下官方提供的相关文件怎么应用到我们的工程中。</p>
<p>&nbsp;</p>
<p>撰写本文的目的：由于项目中用到了这部分的知识，但是网上百度了很多，依然没有自己想要的，故只能去官方网站寻求帮助，现将自己总结的东西贴出来，供大家下次参考，转贴请注明出处，谢谢。首先提供历程以及说明文档的下载连接，引用官方。</p>
<p align="center">&nbsp;</p>
<p align="center">PLL基础知识介绍</p>
<p>　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　----------参考Xilinx官方的文档，在此表示感谢</p>
<p>/*******************************************************2017年5月8日 &nbsp; 第一次撰写 *****************************************/</p>
<p>&nbsp;</p>
<p>一．&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概述：Spatan-6 系列设备的时钟管理单元（CMT）包括两个DCM和一个PLL，它有一个很强大的功能是可以动态的配置相位、周期和可分频时钟的数值，该应用笔记详细描述了重新配置PLL的必要点，而且提供相关的参考设计可用于用户的工程中。在参考设计中，我们有意的使用CLKFBOUT作为反馈路径，不支持CLKOUT作为反馈路径。PLL的配置分为4个组，分别是分频/倍频组，相移组，锁存组，过滤组。接下来就省略啦，这些都是翻译官方的参考文档的，最后自己取阅读一遍。</p>
<p>二．&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PLL的重新配置主要是通过PLL_DRP完成的，如下图所示：</p>
<p>&nbsp;<img src="https://images2015.cnblogs.com/blog/857866/201705/857866-20170508151443410-1258694076.png" alt="" /></p>
<p>上图是PLL的框图，这里我简单的介绍一下，输入的时钟经过D（可编程计数器实现倍频或者分频），PFD（相位偏移需要），CP（驱动电荷泵，我也不知道干嘛的。。。），LF（环路滤波器），VCO（电压控制振荡器），和一个专用的计数器M(此计数器控制PLL的反馈时钟，以实现大范围频率合成)，最后生成6路时钟，每一路需要单独配置，图中只画了一个。</p>
<p>&nbsp;</p>
<p>接下来是配置PLL的模块划分图，大概分成如下这几部分：</p>
<p><img src="https://images2015.cnblogs.com/blog/857866/201705/857866-20170508151518285-1234976276.png" alt="" /></p>
<p>上图是PLL配置的系统框图，实际应用中，user logic即是用户逻辑，可认为是顶层文件，然后控制和PLL_DRP的这几个接口既可以配置PLL了，PLL_ADV 和 PLL_DRP的另一侧相连，以实现对PLL的配置，输出的时钟是一系列的时钟信号，也就是我们的需要的时钟了。官方提供的例程中，有两组配置时钟供我们测试。下面说明一下用户侧的几个信号：SEN（状态使能信号，一个clk），在时钟检测到SEN有效使，同时检测SADDR的值，然后进行状态1或者2的配置，SCLK和RST就不解释了，不过官方提供的参考设计中，对时钟信号采用了原语进行描述。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>接下来看看PLL_DRP，对与我们用户来说，可以不关注PLL_ADV这个端口，我们主要关注PLL_DRP这个端口怎么操作PLL_ADV即可，框图如下所示：</p>
<p><img src="https://images2015.cnblogs.com/blog/857866/201705/857866-20170508151607941-237662331.png" alt="" /></p>
<p>上图是官方的插图，其实这这个模块主要包含一个状态机和ROM，状态机用来配置PLL_ADV，而ROM中存放我们的计算好的数据以重新配置PLL，这是官方参考设计中的结构，要配置的话只要把rom对应的地址值取出来即可。</p>
<p>&nbsp;</p>
<p>接下来我们对PLL_DRP中的状态机进行分析，这里我直接贴出来自己画的状态转移图，仅供参考：</p>
<p>&nbsp;<img src="https://images2015.cnblogs.com/blog/857866/201705/857866-20170508151721972-1737832808.png" alt="" /></p>
<p>&nbsp;</p>
<p>简单说明：上电初始化时，会自动的等待一个locked，接着在wait_sen的状态等待SEN，并在判断SEN有效时，SADDR的值是多少，然后进行判断，选择读取rom的地址是从多少开始，，然后配置相关的寄存器，总共有23个寄存器（见附录），配置完23个寄存器之后，等待锁存locked信号有效时（高有效），就代表配置已经ok了。</p>
<p>&nbsp;</p>
<p>需要工程文件请向博主索要，如果有什么疑问，欢迎大家讨论，转贴请注明出处，谢谢。</p>
<p>　　　　　　　　　　　　　　　　---------cofin_add&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


	<div class = "postDesc">posted on <span id="post-date">2017-05-08 15:25</span> <a href='https://www.cnblogs.com/cofin/'>洋葱洋葱</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=6825253" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(6825253);return false;">收藏</a></div>
</div>
<script type="text/javascript">var allowComments=true,cb_blogId=352184,cb_entryId=6825253,cb_blogApp=currentBlogApp,cb_blogUserGuid='e4fc7517-11a3-e511-9fc1-ac853d9f53cc',cb_entryCreatedDate='2017/5/8 15:25:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>

</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id='cnblogs_c1' class='c_ad_block'>
    <div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'></div>
</div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'></div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
</div>
<div id="leftcontent">
	
		<DIV id="leftcontentcontainer" >
			
<!--done-->
<div class="newsItem">
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>
<br>			
			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script></DIV>
	
</div>


<!--done-->
<div class="footer">
	
	Copyright &copy;2019 洋葱洋葱 Powered By<a href="/">博客园</a> 模板提供：<a href="http://blog.hjenglish.com">沪江博客</a>
</div>

</body>
</html>
