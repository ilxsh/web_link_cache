
	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>EDK的IP设计中调用ISE的IP - 爱程序网</title>
	<meta name="Keywords" content="wrapper,wizard,output,module,import,input,EDK的IP设计中调用ISE的IP" />
	<meta name="Description" content="电路设计中，我们有时会用到一些以前编写过的设计代码。通常这时比较好的做法是把这些类&#20284;的可以复用的模块，独立定做成一个IP块以备以后需求。IP核的设计在许多ED" />
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<link rel="dns-prefetch" href="//r.aichengxu.com" />
	<meta name="mobile-agent" content="format=xhtml; url=http://m.aichengxu.com/thinkphp/10378961.htm" />
	<meta name="mobile-agent" content="format=html5; url=http://m.aichengxu.com/thinkphp/10378961.htm" />      
	<link type="text/css" rel="stylesheet" href="http://r.aichengxu.com/css/g.css" />
	<script type="text/javascript" src="http://r.aichengxu.com/js/jquery.js"></script>	
	<script type="text/javascript" src="http://r.aichengxu.com/js/main.js"></script>
	<script type="text/javascript">helper.uaredirect("http://m.aichengxu.com/thinkphp/10378961.htm");</script> 
</head>
<body>
<div id="wrap">

<div id="header">
	<div class="logo">
		<a href='http://www.aichengxu.com'><img width="311" height="48" alt="爱程序网" src="http://r.aichengxu.com/image/logo.png" /></a>
	</div>
	<div class="search">
		<form target='_blank'>           
			<div class="search-ipt"><input id="bdcsMain" type="text" value=""  /></div>
			<div class="search-btn"><input type="submit" value="搜索" class="sub-btn" /></div>
	    </form>
	</div>
</div>
<div id="nav">
	<ul>
		<li><a  href="http://www.aichengxu.com" >首页</a></li>
			<li><a href="http://www.aichengxu.com/php/">PHP技术</a></li>
			<li><a href="http://www.aichengxu.com/java/">JAVA技术教程</a></li>
			<li><a href="http://www.aichengxu.com/aspnet/">ASP.NET技术教程</a></li>
			<li><a href="http://www.aichengxu.com/cyvyan/">C语言&C++</a></li>
			<li><a href="http://www.aichengxu.com/htmlcss/">HTML/CSS</a></li>
			<li><a href="http://www.aichengxu.com/javascript/">JavaScript技术</a></li>
			<li><a href="http://www.aichengxu.com/seo/">SEO知识</a></li>
			<li><a href="http://www.aichengxu.com/mysql/">Mysql技术教程</a></li>
		<li>   <a class="nav-more">更多</a>   <b class="verify-b"></b>   
		<div class="drop-sub-nav" style="display:none;">
			<a href="http://www.aichengxu.com/diannao/">电脑基础知识</a>
			<a href="http://www.aichengxu.com/thinkphp/">ThinkPHP框架知识</a>
			<a href="http://www.aichengxu.com/python/">Python技术</a>
			<a href="http://www.aichengxu.com/android/">Android开发技术</a>
			<a href="http://www.aichengxu.com/ios/">IOS开发技术</a>
			<a href="http://www.aichengxu.com/linux/">Linux技术知识</a>
			<a href="http://www.aichengxu.com/apache/">Apache技术知识</a>
			<a href="http://www.aichengxu.com/nginx/">nginx技术知识</a>
			<a href="http://www.aichengxu.com/cate/">专辑收藏</a>
		</div>
		</li>                
	</ul>
</div>           
<div class='top-nav-ad'>
    <script type="text/javascript">adsense.common.ad1();</script>
</div> 
<div id="user-loc">当前位置：<a href="http://www.aichengxu.com">首页</a> &raquo; <a href="http://www.aichengxu.com/thinkphp/">ThinkPHP框架知识</a></div>
<div id="post">
	<div class="post-left">   
		<div class="post-detail">
			<h1>EDK的IP设计中调用ISE的IP</h1>
			<div class="p-info">
				<span class="p-time">2011-10-09 21:58</span>
				<span class="p-author">本站整理</span>
				<span class="p-view">浏览(6)</span>
			</div>
			<div class="p-text">
				<!--div id="ad-left"><script type="text/javascript">adsense.detail.ad1();</script></div-->
				<a href="http://blog.chinaunix.net/space.php?uid=24765042&do=tag" target=_blank></a><br/>    电路设计中，我们有时会用到一些以前编写过的设计代码。通常这时比较好的做法是把这些类&#20284;的可以复用的模块，独立定做成一个IP块以备以后需求。IP核的设计在许多EDK里均是有提供的。因为一直用的都是xilinx的板子，故这里主要提及的是调用ISE的IP。<br/>    最近忙一个EDK的小工程，自己定义个用Create or Import Peripheral 定义了IP，在里面要用到ISE的IP.困扰了一段时间！经过群里、论坛上一些朋友的帮助 终于OK了，先分享下了（引用五十米阳光），这里面主要是用到了Black Box的设计<br/>      FPGA设计过程，很多时候在使用公司的或者第三方公司的IP核，那如何自己把自己的HDL代码变成可使用的IP呢。同时这样做也有很多好处：<br/>    将你的设计制作成BlackBox，也就是网表文件，这样别人看不到你的设计但是可以调用你的模块了。详细的参考信息如下：<br/>1. 什么是BlackBox<br/>-     一个大的设计中可以用到一系列网表文件作为输入的一部分而并不全部使用HDL文件。当综合这个大设计时综合器不需要知道这个网表文件是怎样实现的，而只需要知道它的输入输出接口就可以了。这样的网表就称为黑盒子，因为我们不需要看到它的内部情况。<br/>- 通常付费IP都会以BlackBox的形式<br/>2. 如何使用BlackBox<br/>-    BlackBox网表可以是EDIF或NGC文件。<br/>-    每个BlackBox网表都需要有一个与之相对应的HDL文件来注明它的端口。这个HDL只说明BlackBox的端口信息，而不提供具体实现信息。这个只提供端口信息的HDL文件称为Wrapper。Wrapper的名字通常需要与BlackBox网表的名字相同。<br/>-    在ISE工程中使用BlackBox时只需要将它的Wrapper添加到工程中。然后像普通的模块一样在其上层声明和例化就可以使用。<br/>-    BlackBox网表文件可以放在ISE工程目录中，也可以放在其他任意文件夹内。当不放在ISE工程目录时，需要在Translate属性中将Macro Search Path指向这个目录。多个目录使用"|"分割。<br/>3. 如何制作BlackBox<br/>-    BlackBox只是普通网表而已。XST的综合结果就可以直接作为BlackBox使用。<br/>-    通常BlackBox外部还会连接其他逻辑，所以BlackBox中一般不插入IOBUF。在XST属性中去除Insert IO Buffer的选项<br/>1.          一般收费的IP都是只提供网表供使用，自然对设计的保密是一大好处；<br/>2.          IP都是验证好的模块，提供给外界接口，自然使用方便也是一大特点；<br/>3.          以网表形式提供可以保持IP的内部时序完整性（即保存设计），类&#20284;于partition和smartguide。<br/>    接下来想说的是，把HDL代码封装成IP核（以网表形式提供使用，NGC format），根据使用的环境不同（在ISE和EDK中），有其各自的封装形式，但是大同小异，都是用的黑盒子方式，再加载网表，即可。<br/>    在ISE中封装HDL,并使用IP，设计分三大步：<br/>第一步：像通常建立工程设计一样，先编写一个模块，如：<br/>module add(a,b,c)<br/>   Input a,b;<br/>   output[1:0]<br/>   assign c=a&#43;b;<br/>endmodule<br/> 设置综合选项，综合过程中不能加入IO buf和iob（考虑到跟外部模块接口问题）：<br/> 在综合设置中，-iobuf不要勾选，-iob选 NO，综合，生成网表add.ngc；<br/>第二步：制作一个blackbox模块（就是一个IP的wrapper封装设计），如下：<br/>   module add(a,b,c)<br/>   input a,b;<br/>   output[1:0]<br/>endmodule<br/>只申明端口。<br/>第三步：使用此IP，需要先把第二步的blackbox以v文件形式加入到工程，再调用这个模块，再把add.ngc文件加入到工程文件夹下即可（注意此过程在综合实现时候，要把第一步的两个选项选上）。<br/>     在EDK中封装自己的IP核方法(此处是指的是完全定制的IP核)，<br/>也是以黑盒子方式提供，需要自己编写相应文件，其文件结构如下：<br/>│<br/>├─data<br/>│         .bbd // 记录NGC文件<br/>│         .mpd //描述IP接口信息，属性等<br/>│         .pao //说明IP核所有的源文件（HDL下的文件）<br/>├─hdl<br/>│└─verilog<br/>│               .v //申明IP端口的V文件，相当于一个黑盒子<br/>│               .v<br/>│                .v<br/>│<br/>└─netlist//iP相应网表<br/>         blackbox1.ngc<br/>          blackbox2.ngc<br/>EDK中Custom IP Core如果需要引用网表，那么就需要在BBD文件中中声明需要使用的网表名称。<br/>常用的BBD文件有两种形式：<br/>1. 在所有情况下均使用相同的网表<br/>2. 根据不同请款使用不同的网表<br/>在情况1-使用相同网表时，可以使用CIP Wizard的import功能自动生成BBD文件，并且CIP Wizard还会把网表文件放到相应的文件夹内(pcores//netlists)。<br/>此时BBD文件的内容是<br/>FILES<br/>blackbox.ngc<br/>在情况2-需要EDK自动选择相应网表时，就需要手动编写/修改BBD文件了。<br/>比如我需要根据所使用的FPGA器件类型选择网表文件，那么就可以根据C_FAMILY参数来选择。BBD文件例子：<br/>C_FAMILY FILES<br/>virtex4 virtex4/blackbox1.ngc, virtex4/blackbox2.ngc<br/>spartan3 spartan3/blackbox1.ngc, spartan3/blackbox2.ngc<br/>文件夹层次则为：<br/>│<br/>├─data<br/>│         .bbd<br/>│         .mpd<br/>│         .pao<br/>├─hdl<br/>│ └─vhdl<br/>│               .vhd<br/>│               .vhd<br/>│               .vhd<br/>│<br/>└─netlist<br/>    ├─spartan3<br/>    │        blackbox1.ngc<br/>    │        blackbox2.ngc<br/>    │<br/>    └─virtex4<br/>              blackbox1.ngc<br/>              blackbox2.ngc<br/>【注意事项】<br/>1. Core顶层VHDL需要有相应的Generic，Verilog需要有Parameter与用于选择的属性一致<br/>2. C_FAMILY属性是EDK工程的内建属性，不需要在MHS中手动指定，它会自动传递到CustIP中。<br/>3. 两个file name用逗号和空&#26684;隔开
				<div class="tags"><a href="http://www.aichengxu.com/tag/wrapper/">wrapper</a><a href="http://www.aichengxu.com/tag/wizard/">wizard</a><a href="http://www.aichengxu.com/tag/output/">output</a><a href="http://www.aichengxu.com/tag/module/">module</a><a href="http://www.aichengxu.com/tag/import/">import</a><a href="http://www.aichengxu.com/tag/input/">input</a></div>
			</div>
			<div class="ad-under"><script type="text/javascript">adsense.detail.ad2();</script></div>
			<div class="connect">
				<i class="connect-left"></i>
				<i class="connect-right"></i>
			</div>
			<div class="p-extra">
            	<h3>猜你在找</h3>
            	<ul>
					<li><a href="http://www.aichengxu.com/data/861584.htm">hoj Job!Job!Job!</a></li>
					<li><a href="http://www.aichengxu.com/suanfa/861589.htm">H  Hello Kiki</a></li>
					<li><a href="http://www.aichengxu.com/other/861590.htm">G Greedy Tino</a></li>
					<li><a href="http://www.aichengxu.com/other/861591.htm">E Elevators in Jiayuan Students&amp;#39; Apartment</a></li>
					<li><a href="http://www.aichengxu.com/other/861592.htm">D  Digit Size</a></li>
					<li><a href="http://www.aichengxu.com/other/861593.htm">B Buy Sticks</a></li>
					<li><a href="http://www.aichengxu.com/other/861597.htm">usaco contact</a></li>
					<li><a href="http://www.aichengxu.com/other/861598.htm">usaco  Shaping Regions</a></li>
					<li><a href="http://www.aichengxu.com/other/861605.htm">反等差数列</a></li>
					<li><a href="http://www.aichengxu.com/other/861677.htm">最大值最小化</a></li>
					<li><a href="http://www.aichengxu.com/other/861692.htm">uva 110 - Meta-Loopless Sorts</a></li>
					<li><a href="http://www.aichengxu.com/suanfa/861696.htm">埃及分数</a></li>
					<li><a href="http://www.aichengxu.com/other/861743.htm">GDB调试技术</a></li>
					<li><a href="http://www.aichengxu.com/other/861751.htm">Wine速度慢的解决办法</a></li>
					<li><a href="http://www.aichengxu.com/design/862086.htm">JQUERY EASYUI 验证框(VALIDATEBOX)用法</a></li>
					<li><a href="http://www.aichengxu.com/other/862147.htm">简单密码锁</a></li>
					<li><a href="http://www.aichengxu.com/other/862149.htm">分频器</a></li>
					<li><a href="http://www.aichengxu.com/other/862293.htm">通过实例说明J2ME通用联网框架的使用</a></li>
					<li><a href="http://www.aichengxu.com/other/634761.htm">EDK中如何使用ISE中生成的IP</a></li><li><a href="http://www.aichengxu.com/other/5212697.htm">EDK中如何使用ISE中生成的IP</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="post-right">     
        <div id="side-box">
            <h3>阅读榜</h3>
            <ul>
			<li><span class="list-num hot-num hot-1">1</span><a href="http://www.aichengxu.com/thinkphp/53733.htm">《PHP框架ThinkPHP学习》系列技术文章整理收藏</a></li>
			<li><span class="list-num hot-num hot-2">2</span><a href="http://www.aichengxu.com/thinkphp/533.htm">ThinkPHP实例 用户注册登录留言</a></li>
			<li><span class="list-num hot-num hot-3">3</span><a href="http://www.aichengxu.com/thinkphp/520.htm">ThinkPHP中文乱码解决方案</a></li>
			<li><span class="list-num hot-num hot-4">4</span><a href="http://www.aichengxu.com/thinkphp/39961.htm">ThinkPHP中的getLastSql函数---获取上次执行的SQL语句</a></li>
			<li><span class="list-num hot-num hot-5">5</span><a href="http://www.aichengxu.com/thinkphp/37040.htm">thinkphp3.2定义多模块并设置默认模块</a></li>
			<li><span class="list-num hot-num hot-6">6</span><a href="http://www.aichengxu.com/thinkphp/555.htm">分享一个thinkphp错误提示页面代码</a></li>
			<li><span class="list-num hot-num hot-7">7</span><a href="http://www.aichengxu.com/thinkphp/558.htm">Thinkphp向数据库插入数据失败原因</a></li>
			<li><span class="list-num hot-num hot-8">8</span><a href="http://www.aichengxu.com/thinkphp/362.htm">soap在ThinkPHP中的使用实例</a></li>
			<li><span class="list-num hot-num hot-9">9</span><a href="http://www.aichengxu.com/thinkphp/354.htm">总结ThinkPHP使用技巧经验分享</a></li>
			<li><span class="list-num hot-num hot-10">10</span><a href="http://www.aichengxu.com/thinkphp/534.htm">解决ThinkPHP错误页无法正常跳转</a></li>
			<li><span class="list-num hot-num hot-11">11</span><a href="http://www.aichengxu.com/thinkphp/37553.htm">thinkphp模板输出cookie,session中的值</a></li>
			<li><span class="list-num hot-num hot-12">12</span><a href="http://www.aichengxu.com/thinkphp/363.htm">ThinkPHP分页中的条件查询问题</a></li>
			<li><span class="list-num hot-num hot-13">13</span><a href="http://www.aichengxu.com/thinkphp/322.htm">关闭APP_DEBUG出现了解析错误</a></li>
			<li><span class="list-num hot-num hot-14">14</span><a href="http://www.aichengxu.com/thinkphp/623.htm">thinkphp视频教程下载地址兄弟连thinkphp视频</a></li>
			<li><span class="list-num hot-num hot-15">15</span><a href="http://www.aichengxu.com/thinkphp/9984.htm">thinkphp 无法加载模块</a></li>
			</ul>
			<div class="ad300"><script type="text/javascript">adsense.detail.ad3();</script></div>
        </div>
    </div>    
</div>
<script type="text/javascript">
    //右侧浮动
    fixFloat("side-box");
</script>
<script type="text/javascript">ac('49', '10378961');</script>

<div id="footer">
	<p>Copyright&nbsp;&copy;&nbsp;2011-2015&nbsp;&nbsp;爱程序网&nbsp;&nbsp;沪ICP备14001972号-1&nbsp;&nbsp;
	业务咨询：<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=1658522921&site=qq&menu=yes"><img border="0" src="http://wpa.qq.com/pa?p=2:1658522921:51" alt="业务咨询" title="业务咨询"/></a> &nbsp;&nbsp;</p>
</div>
<script type="text/javascript">menuDrop();</script>
<!--Baidu Search-->
<script type="text/javascript">
		/*内文搜索*/
		var cpro_id = "u2051930";
	</script>
	<script src="http://cpro.baidustatic.com/cpro/ui/cnw.js" type="text/javascript"></script>
<!--站内搜索-->
<script type="text/javascript">(function(){document.write(unescape('%3Cdiv id="bdcs"%3E%3C/div%3E'));var bdcs = document.createElement('script');bdcs.type = 'text/javascript';bdcs.async = true;bdcs.src = 'http://znsv.baidu.com/customer_search/api/js?sid=13701196898887196136' + '&plate_url=' + encodeURIComponent(window.location.href) + '&t=' + Math.ceil(new Date()/3600000);var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(bdcs, s);})();</script>
<div style='display:none;'><script type="text/javascript"> try { third.do(); } catch (e) {} </script></div>


</div>
</body>
</html>