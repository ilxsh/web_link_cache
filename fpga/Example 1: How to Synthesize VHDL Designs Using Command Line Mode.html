<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><!-- Mirrored from toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line9.html by HTTrack Website Copier/3.x [XR&CO'2006], Tue, 23 Oct 2007 08:01:23 GMT --><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="GENERATOR" content="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<meta name="TEMPLATEBASE" content="Itp1.4">
<meta name="History" content="Release 4.1i">
<meta name="LASTUPDATED" content="08/17/01 15:13:40">
<meta name="KeyWords" content="">
<meta name="Author" content="Xilinx">
<meta name="Description" content="Xilinx Software Documentation">
<link rel="StyleSheet" href="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/document.css" type="text/css" media="screen">
<title>Example 1: How to Synthesize VHDL Designs Using Command Line Mode</title>

<script src="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/util.js">
</script>

</head>

<body onload="SyncDocsan(true);" vlink="#551A8B" text="#000000" link="#0000EE" bgcolor="#FFFFFF" alink="#FF0000">


<center>
<table cols="2" width="25" border="0">
<tbody><tr>

<td valign="CENTER" align="LEFT">
	<a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line8.html" onmousedown="SwitchImg('previous', '_on');return true;" onmouseup="SwitchImg('previous', '');">
	<img name="previous" alt="Return to previous page" src="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/prv_btn.gif" width="93" height="43" border="0">
	</a>
</td>

<td valign="CENTER" align="LEFT">
	<a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line10.html" onmousedown="SwitchImg('next', '_on');return true;" onmouseup="SwitchImg('next', '');">
	<img name="next" alt="Advance to next page" src="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/nxt_btn.gif" width="93" height="43" border="0">
	</a>
</td>

</tr>
</tbody></table>
</center>

<hr align="left">

<blockquote>
<h2 class="NewHTMLPage">
  <a name="999064"> </a>Example 1: How to Synthesize VHDL Designs Using Command Line Mode
</h2><hr>
<p class="Body">
  <a name="999065"> </a>The goal of this example is to synthesize a hierarchical VHDL design for a Virtex FPGA<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> using Command Line Mode.</span>
</p>
<p class="Body">
  <a name="999066"> </a>Following are <span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">the </span>two main cases:
</p>
<ul>
  <li class="SmartList1"><a name="999067"> </a>Case 1--all design blocks (entity/architecture pairs) are located in a single VHDL file.
  </li><li class="SmartList1"><a name="999068"> </a>Case 2--each design block (entity/architecture pair) is located in a separate VHDL file.
</li></ul>
<p class="Body">
  <a name="999069"> </a>The example uses a VHDL design, called watchvhd.
 The files for watchvhd can be found in the ISEexamples\watchvhd 
directory of the ISE installation directory.
</p>
<p class="Body">
  <a name="999070"> </a>This design contains 7<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>entities:
</p>
<ul>
  <li class="SmartList1"><a name="999071"> </a>stopwatch
  </li><li class="SmartList1"><a name="999072"> </a>statmach
  </li><li class="SmartList1"><a name="999073"> </a>tenths (a CORE Generator core)
  </li><li class="SmartList1"><a name="999074"> </a>decode
  </li><li class="SmartList1"><a name="1000647"> </a>smallcntr
  </li><li class="SmartList1"><a name="999075"> </a>cnt60
  </li><li class="SmartList1"><a name="999076"> </a>hex2led
</li></ul>
<h3 class="Heading2">
  <a name="999077"> </a>Case 1: All Blocks in a Single File
</h3>
<p class="Body">
  <a name="999078"> </a>For Case 1, all design blocks will be located in a single VHDL file.
</p>
<ol type="1">
  <li class="SmartList1" value="1"><a name="999079"> </a>Create a new directory called vhdl_s.
  </li><li class="SmartList1" value="2"><a name="999080"> </a>Copy the following files from the ISEexamples\watchvhd directory of the ISE installation directory to the vhdl_s directory. 
  <ul>
    <li class="SmartList2"><a name="999081"> </a>stopwatch.vhd
    </li><li class="SmartList2"><a name="999082"> </a>statmach.vhd
    </li><li class="SmartList2"><a name="999083"> </a>decode.vhd
    </li><li class="SmartList2"><a name="999084"> </a>cnt60.vhd
    </li><li class="SmartList2"><a name="1000648"> </a>smallcntr.vhd
    </li><li class="SmartList2"><a name="999085"> </a>hex2led.vhd
  </li></ul>
  </li><li class="SmartList1" value="3"><a name="999086"> </a>Copy and 
paste the contents of the files into a single file called 
'watchvhd.vhd'. Make sure the contents of 'stopwatch.vhd' appear last in
 the file.
  </li><li class="SmartList1" value="4"><a name="999087"> </a>To synthesize this design for Speed with optimization effort 1 (Low), execute the following command: 
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">run -ifn watchvhd.vhd -ifmt VHDL -ofn watchvhd.ngc -ofmt NGC -p xcv50-bg256-6 -opt_mode Speed
-opt_level 1</span><a name="999088"> </a>
</pre>
</li></ol>
<p class="Indented1"> <a name="999089"> </a>Please note that all options in this command except the <br>-opt_mode and -opt_level ones are mandatory. Default values for all other options are used. </p>
<p class="Body">
  <a name="1000662"> </a>This command can be launched in two ways: 
</p>
<ul>
  <li class="SmartList1"><a name="999091"> </a> Directly from an XST shell 
  </li><li class="SmartList1"><a name="999092"> </a> Script mode
</li></ul>
<h4 class="Heading3">
  <a name="999093"> </a>XST Shell
</h4>
<p class="Body">
  <a name="999094"> </a>To use the XST shell, perform the following steps:
</p>
<ol type="1">
  <li class="SmartList1" value="1"><a name="999095"> </a>In the tcsh or other shell<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">,</span> type "<span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">xst</span>". XST will start and prompt you with the following message: 
</li></ol>
<pre class="Preformatted">&nbsp;&nbsp;&nbsp;&nbsp;Release 4.1i - XST E.30<a name="999096"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;Copyright (c) 1995-2001 Xilinx, Inc. All rights &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reserved.<a name="999097"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;--&gt;<a name="999098"> </a>
</pre>
<ol type="1">
  <li class="SmartList1" value="2"><a name="999099"> </a>Enter the following command at the - -&gt; prompt to start synthesis.
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">run -ifn watchvhd.vhd -ifmt VHDL -ofn watchvhd.ngc -ofmt NGC -p xcv50-bg256-6 -opt_mode Speed 
-opt_level 1</span><a name="999100"> </a>
</pre>
  </li><li class="SmartList1" value="3"><a name="999101"> </a>When the synthesis is complete, XST shows the prompt --&gt;, you can type <span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">quit</span> to exit the XST shell.
</li></ol>
<p class="Body">
  <a name="1000697"> </a>During this run, XST creates the watchvhd.ngc file. This is an NGC file ready for the implementation tools
</p>
<p class="IndentedRelative"> <a name="1000695"> </a>Note  All messages 
issued by XST are displayed on the screen only. If you want to save your
 messages in a separate log file, then the best way is to use script 
mode to launch XST.</p>
<p class="Body">
  <a name="999106"> </a>In the previous run, XST synthesized entity 
"stopwatch" as a top level module of the design. The reason is that this
 block was placed at the end of the VHDL file. XST picks up the latest 
block in the VHDL file and treats it as a top level one. Suppose you 
would like to synthesize just "hex2led" and check its performance 
independently of the other blocks. This can be done by specifying the 
top level entity to synthesize in the command line using the -ent option
 (please refer to <a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line5.html#998672"><span style="color: #0000ff;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">Table 8-2</span></a> of this chapter or more information): 
</p>
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">run -ifn watchvhd.vhd -ifmt VHDL -ofn watchvhd.ngc 
-ofmt NGC -p xcv50-bg256-6 -opt_mode Speed
-opt_level 1 -ent hex2led</span><a name="999110"> </a>
</pre>
<h4 class="Heading3">
  <a name="999111"> </a>Script Mode
</h4>
<p class="Body">
  <a name="999112"> </a>It can be very tedious work to enter XST 
commands directly in the XST shell, especially when you have to specify 
several options and execute the same command several times. You can run 
XST in a script mode as follows:
</p>
<ol type="1">
  <li class="SmartList1" value="1"><a name="999113"> </a>Open a new file
 named xst.scr in the current directory. Put the previously executed XST
 shell command into this file and save it.
<pre class="PreformattedRelative">run -ifn watchvhd.vhd -ifmt VHDL -ofn watchvhd.ngc -ofmt NGC <span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">-p xcv50-bg256-6</span> -opt_mode Speed 
-opt_level 1<a name="999114"> </a>
</pre>
  </li><li class="SmartList1" value="2"><a name="999115"> </a>From the tcsh or other shell, enter the following command to start synthesis. 
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">xst -ifn xst.scr</span><a name="1000549"> </a>
</pre>
</li></ol>
<p class="Body">
  <a name="1000682"> </a>During this run, XST creates the following files:
</p>
<ul>
  <li class="SmartList1"><a name="1000683"> </a>watchvhd.ngc: an NGC file ready for the implementation tools
  </li><li class="SmartList1"><a name="1000686"> </a>xst.srp: the xst script log file
</li></ul>
<p class="Body">
  <a name="1000680"> </a>You can improve the readability of the xst.scr 
file, especially if you use many options to run synthesis. You can place
 each option with its value on a separate line, respecting the following
 rules:
</p>
<ul>
  <li class="SmartList1"><a name="999120"> </a>The first line must contain only the run command without any options.
  </li><li class="SmartList1"><a name="999121"> </a>There must be no empty lines in the middle of the command.
  </li><li class="SmartList1"><a name="999122"> </a>Each line (except the first one) must start with a dash (-)
</li></ul>
<p class="Body">
  <a name="999123"> </a>For the previously used command you may have the xst.scr file in the following form: 
</p>
<pre class="Preformatted">run<a name="999124"> </a>
-ifn watchvhd.vhd<a name="999125"> </a>
-ifmt VHDL<a name="999126"> </a>
-ofn watchvhd.ngc<a name="999127"> </a>
-ofmt NGC<a name="999128"> </a>
-p xcv50-bg256-6<a name="999129"> </a>
-opt_mode Speed<a name="999130"> </a>
-opt_level 1<a name="999131"> </a>
</pre>
<h3 class="Heading2">
  <a name="999132"> </a>Case 2: Each Design in a Separate File
</h3>
<p class="Body">
  <a name="999133"> </a>For Case 2, each design block is located in a separate VHDL file.
</p>
<ol type="1">
  <li class="SmartList1" value="1"><a name="999134"> </a>Create a new directory, named vhdl_m.
  </li><li class="SmartList1" value="2"><a name="999135"> </a>Copy the 
following files from the ISEexamples\watchvhd directory of the ISE 
installation directory to the newly created vhdl_m directory.
  <ul>
    <li class="SmartList2"><a name="999136"> </a>stopwatch.vhd
    </li><li class="SmartList2"><a name="999137"> </a>statmach.vhd
    </li><li class="SmartList2"><a name="999138"> </a>decode.vhd
    </li><li class="SmartList2"><a name="999139"> </a>cnt60.vhd
    </li><li class="SmartList2"><a name="1000711"> </a>smallcntr.vhd
    </li><li class="SmartList2"><a name="999140"> </a>hex2led.vhd
  </li></ul>
</li></ol>
<p class="Body">
  <a name="999141"> </a>To synthesize the design, which is now represented by six VHDL files, <span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">u</span>se
 the project approach supported in XST. A VHDL project file contains a 
list of VHDL files from the project. The order of the files is not 
important. XST is able to recognize the hierarchy<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">,</span> and compile VHDL files in the correct order. Moreover, XST automatically detects the top level block for synthesis.
</p>
<p class="Body">
  <a name="999142"> </a>For the example, perform the following steps: 
</p>
<ol type="1">
  <li class="SmartList1" value="1"><a name="999143"> </a>Open a new file, called watchvhd.prj
  </li><li class="SmartList1" value="2"><a name="999144"> </a>Enter the names of the VHDL files in any order into this file and save the file:
<pre class="PreformattedRelative">statmach.vhd <a name="999145"> </a>
decode.vhd <a name="999146"> </a>
stopwatch.vhd <a name="999147"> </a>
cnt60.vhd <a name="999148"> </a>
smallcntr.vhd<a name="1000715"> </a>
hex2led.vhd <a name="999149"> </a>
</pre>
  </li><li class="SmartList1" value="3"><a name="999150"> </a>To synthesize the design, execute the following command from XST shell or via script file: 
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">run -ifn watchvhd.prj -ifmt VHDL -ofn watchvhd.ngc 
-ofmt NGC -p xcv50-bg256-6 -opt_mode Speed 
-opt_level 1</span><a name="999151"> </a>
</pre>
</li></ol>
<p class="Body">
  <a name="999152"> </a>If you want to synthesize just "hex2led" and 
check its performance independently of the other blocks, you can specify
 the top level entity to synthesize in the command line, using the -ent 
option (please refer to <a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line5.html#998672"><span style="color: #0000ff;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">Table 8-2</span></a> for more details):
</p>
<pre class="PreformattedRelative"><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">run -ifn watchvhd.prj -ifmt VHDL -ofn watchvhd.ngc 
-ofmt NGC -p xcv50-bg256-6 -opt_mode Speed 
-opt_level 1 -ent hex2led</span><a name="999156"> </a>
</pre>
<p class="Body">
  <a name="999157"> </a> During VHDL compilation, XST uses the library 
"work" as the default. If some VHDL files must be compiled to different 
libraries, then you can add the name of the library just before the file
 name. Suppose that "hexl2led" must be compiled into the library, called
 "my_lib", then the project file must be: 
</p>
<pre class="Preformatted">&nbsp;&nbsp;&nbsp;&nbsp;statmach.vhd<a name="999158"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;decode.vhd<a name="999159"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;stopwatch.vhd<a name="999160"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;cnt60.vhd <a name="999161"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;smallcntr.vhd<a name="1000726"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;my_lib hex2led.vhd <a name="999162"> </a>
</pre>
<p class="Body">
  <a name="999163"> </a>Sometimes, XST is not able to recognize the order and issues the following message.
</p>
<pre class="Preformatted">WARNING: (VHDL_3204). The sort of the vhdl files failed, they will be compiled in the order of the project file.<a name="999164"> </a>
</pre>
<p class="Body">
  <a name="999165"> </a>In this case you must do the following:
</p>
<ul>
  <li class="SmartList1"><a name="999166"> </a>Put all VHDL files in the correct order. 
  </li><li class="SmartList1"><a name="999167"> </a>Add at the end of 
the list on a separate line the keyword "nosort". XST will then use your
 predefined order during the compilation step.
</li></ul>
<pre class="Preformatted">&nbsp;&nbsp;&nbsp;&nbsp;statmach.vhd <a name="999168"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;decode.vhd<a name="999169"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;smallcntr.vhd<a name="1000727"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;cnt60.vhd <a name="999170"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;hex2led.vhd<a name="999171"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;stopwatch.vhd<a name="999172"> </a>
&nbsp;&nbsp;&nbsp;&nbsp;nosort <a name="999173"> </a>
</pre>
</blockquote>

<hr>

<center>
<table cols="2" width="25" border="0">
<tbody><tr>

<td valign="CENTER" align="LEFT">
	<a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line8.html" onmousedown="SwitchImg('fprev', '_on');return true;" onmouseup="SwitchImg('fprev', '');">
	<img name="fprev" alt="Return to previous page" src="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/prv_btn.gif" width="93" height="43" border="0">
	</a>
</td>

<td valign="CENTER" align="LEFT">
	<a href="http://www.csit-sun.pub.ro/courses/Masterat/Xilinx%20Synthesis%20Technology/toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line10.html" onmousedown="SwitchImg('fnext', '_on');return true;" onmouseup="SwitchImg('fnext', '');">
	<img name="fnext" alt="Advance to next page" src="Example%201:%20How%20to%20Synthesize%20VHDL%20Designs%20Using%20Command%20Line%20Mode_files/nxt_btn.gif" width="93" height="43" border="0">
	</a>
</td>

</tr>
</tbody></table>
</center>





</body><!-- Mirrored from toolbox.xilinx.com/docsan/xilinx4/data/docs/xst/command_line9.html by HTTrack Website Copier/3.x [XR&CO'2006], Tue, 23 Oct 2007 08:01:23 GMT --></html>