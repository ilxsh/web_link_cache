(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{"2z5K":function(e,n,i){var a=i("YpBQ"),t=i("S3pA"),r=i("R3TX"),o=i("s+R0"),d=i("Ndl3"),s=i("p1C/"),l=r(function(e){var n=s(e);return d(n)&&(n=void 0),o(a(e,1,d,!0),t(n,2))});e.exports=l},LjTg:function(e,n,i){"use strict";var a=i("2srY"),t=i.n(a),r=(i("aWzz"),i("ERkP")),o=i.n(r),d=i("kFJ8"),s=i("hcZD"),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IsSuperAdmin"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"current"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confluence"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSuperAdmin"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:145,source:{body:"\n  query IsSuperAdmin {\n    user(current: true) {\n      id\n      confluence {\n        roles {\n          isSuperAdmin\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};i.d(n,"a",function(){return u});var u=function(e){var n=e.children;return Object(s.a)()?o.a.createElement(d.d,{query:l},function(e){var i=e.loading,a=e.error,r=e.data;return n({loading:i,error:a,isSuperAdmin:Boolean(t()(r,"user.confluence.roles.isSuperAdmin"))})}):n({loading:!1,isSuperAdmin:!1})};u.displayName="AdminKeyQuery"},c2NM:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(i("ERkP")),t=r(i("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}var d=function(e){return a.default.createElement(t.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M10 19v-4.5a2 2 0 1 1 4 0V19h4a1 1 0 0 0 1-1v-7.831l-6.293-6.296a1 1 0 0 0-1.414 0L5 10.169V18a1 1 0 0 0 1 1h4zm11-6.83V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-5.83l-.04.04c-.39.39-1.03.39-1.42 0-.39-.39-.39-1.03 0-1.42l8.339-8.331a3 3 0 0 1 4.242 0l8.339 8.331c.39.39.39 1.03 0 1.42-.39.39-1.03.39-1.42 0l-.04-.04z" fill="currentColor"/></svg>'},e))};d.displayName="HomeIcon";var s=d;n.default=s},ltac:function(e,n,i){"use strict";function a(e){for(var n=e.offsetTop;e.offsetParent;)n+=(e=e.offsetParent).offsetTop;return n}function t(e){if(!e||e===document)return null;var n=window.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==n.overflow?e:t(e.parentNode)}function r(e,n){n=n||t(e),e&&n&&!function(e,n){if(!e)return!1;n=n||document.scrollingElement||document.body.parentNode;var i=e.offsetHeight,t=a(e),r=a(n)+n.scrollTop,o=n.offsetHeight;return t>=r&&t+i<=r+o}(e,n)&&(n.scrollTop=a(e)-a(n)-n.clientHeight/2)}i.d(n,"a",function(){return t}),i.d(n,"b",function(){return r})},nosZ:function(e,n,i){"use strict";i.r(n);var a=i("VrFO"),t=i.n(a),r=i("Y9Ll"),o=i.n(r),d=i("N+ot"),s=i.n(d),l=i("AuHH"),u=i.n(l),c=i("5Yy7"),g=i.n(c),m=i("KEM+"),p=i.n(m),v=i("ERkP"),f=i.n(v),k=(i("aWzz"),i("kFJ8")),h=i("lZoD"),S=i("L+/v"),b=i("bx1d"),I=i("+mzV"),N=i("++l3"),y=i("Clud"),P=i("LjTg"),w=i("RhWx"),F=i.n(w),C=i("VtSi"),T=i.n(C),x=i("cbiG"),E=i.n(x),D=i("tQaH"),A=i.n(D),L=i("1Pcy"),O=i.n(L),V=i("6R5o"),M=i.n(V),R=i("nnRT"),j=i.n(R),$=i("L21V"),K=i("0rLj"),_=i("PTiB"),q=i("7M9M"),U=i("+CY+"),H={kind:"Document",definitions:function(e){var n={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!n[i]&&(n[i]=!0,!0)})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTree"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paginationLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nearestAncestorCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"naPreviousSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"naFollowingSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"previousSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"followingSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"childrenCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"currentPage"},name:{kind:"Name",value:"page"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}},{kind:"Argument",name:{kind:"Name",value:"pageTree"},value:{kind:"Variable",name:{kind:"Name",value:"paginationLimit"}}},{kind:"Argument",name:{kind:"Name",value:"enablePaging"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"nearestAncestors"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nearestAncestorCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"previousSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"naPreviousSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followingSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"naFollowingSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previousSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"previousSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followingSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"followingSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"childrenCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"rootLevelPages"},name:{kind:"Name",value:"pages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spaceKey"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}].concat([{kind:"FragmentDefinition",name:{kind:"Name",value:"PageInfoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Page"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}],[{kind:"FragmentDefinition",name:{kind:"Name",value:"PageListFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PaginatedPageList"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}])),loc:{start:0,end:1394,source:{body:"\n  query PageTree(\n    $spaceKey: String!\n    $contentId: ID!\n    $paginationLimit: Int\n    $nearestAncestorCursor: String\n    $naPreviousSiblingsCursor: String\n    $naFollowingSiblingsCursor: String\n    $previousSiblingsCursor: String\n    $followingSiblingsCursor: String\n    $childrenCursor: String\n  ) {\n    currentPage: page(\n      id: $contentId\n      pageTree: $paginationLimit\n      enablePaging: true\n    ) {\n      ...PageInfoFragment\n      nearestAncestors(after: $nearestAncestorCursor) {\n        count\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          ...PageInfoFragment\n          previousSiblings(after: $naPreviousSiblingsCursor) {\n            ...PageListFragment\n          }\n          followingSiblings(after: $naFollowingSiblingsCursor) {\n            ...PageListFragment\n          }\n        }\n      }\n      previousSiblings(after: $previousSiblingsCursor) {\n        ...PageListFragment\n      }\n      followingSiblings(after: $followingSiblingsCursor) {\n        ...PageListFragment\n      }\n      children(after: $childrenCursor) {\n        ...PageListFragment\n      }\n    }\n    rootLevelPages: pages(spaceKey: $spaceKey) {\n      nodes {\n        ...PageInfoFragment\n      }\n    }\n    space(key: $spaceKey) {\n      id\n      homepage {\n        id\n      }\n      operations {\n        operation\n        targetType\n      }\n    }\n  }\n\n  \n  \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTreeRootLevelPages"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rootLevelPages"},name:{kind:"Name",value:"pages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spaceKey"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:422,source:{body:"\n  query PageTreeRootLevelPages($spaceKey: String!) {\n    rootLevelPages: pages(spaceKey: $spaceKey) {\n      nodes {\n        id\n        hasChildren\n        title\n        hasRestrictions\n        hasInheritedRestrictions\n        links {\n          webui\n        }\n      }\n    }\n    space(key: $spaceKey) {\n      id\n      homepage {\n        id\n      }\n      operations {\n        operation\n        targetType\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},B={kind:"Document",definitions:function(e){var n={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!n[i]&&(n[i]=!0,!0)})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTreeChildren"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}].concat([{kind:"FragmentDefinition",name:{kind:"Name",value:"PageInfoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Page"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}])),loc:{start:0,end:337,source:{body:"\n  query PageTreeChildren($contentId: ID!, $first: Int, $after: String) {\n    page(id: $contentId) {\n      ...PageInfoFragment\n      children(first: $first, after: $after) {\n        count\n        nodes {\n          ...PageInfoFragment\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n\n  \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageBeforeMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siblingId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageBefore"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"siblingId"},value:{kind:"Variable",name:{kind:"Name",value:"siblingId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:182,source:{body:"\n  mutation MovePageBeforeMutation($pageId: ID!, $siblingId: ID!) {\n    movePageBefore(input: { pageId: $pageId, siblingId: $siblingId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},G={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageAfterMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siblingId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageAfter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"siblingId"},value:{kind:"Variable",name:{kind:"Name",value:"siblingId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:180,source:{body:"\n  mutation MovePageAfterMutation($pageId: ID!, $siblingId: ID!) {\n    movePageAfter(input: { pageId: $pageId, siblingId: $siblingId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},W={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageAppendMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageAppend"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"parentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:179,source:{body:"\n  mutation MovePageAppendMutation($pageId: ID!, $parentId: ID!) {\n    movePageAppend(input: { pageId: $pageId, parentId: $parentId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},J=i("97Jx"),Y=i.n(J),X=i("7wq/"),Z=i.n(X),ee=i("KsTJ"),ne=i("9rbw"),ie=i("llcG"),ae=i("sP66"),te=i("ltac"),re=i("2srY"),oe=i.n(re),de=i("Ty0x"),se=i("c2NM"),le=i.n(se),ue=i("7A9o"),ce=i("POWg"),ge=i("PLaw"),me=i.n(ge),pe=i("5ypJ"),ve=i.n(pe),fe=i("NK/E"),ke=i.n(fe),he=function(e){var n=e.spaceId;return{type:"sendTrackEvent",data:{action:"updated",source:"viewPageScreen",containerType:"space",containerId:n,objectType:"page",objectId:e.pageId,actionSubject:"page",attributes:{previousSpaceId:n,previousParentPageId:e.previousParentPageId,newSpaceId:n,newParentPageId:e.newParentPageId}}}},Se=function(){return{type:"sendUIEvent",data:{action:"dragged",actionSubject:"pageTree",source:"viewPageScreen"}}},be=function(e){return{type:"sendUIEvent",data:{action:"dropped",actionSubject:"pageTree",source:"viewPageScreen",attributes:{isValidTarget:e}}}},Ie=function(){return{type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen"}}},Ne=function(){return{type:"sendUIEvent",data:{action:"pressed",actionSubject:"keyboardShortcut",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen"}}},ye=function(e,n,i){return{type:"sendUIEvent",data:{containerType:"space",containerId:n,objectType:"page",action:e,actionSubject:"pageTree",source:i?"pageTreeDrawer":"containerNavigation",attributes:{navigationLayer:"container"}}}},Pe=function(){return{type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"showAllButton",source:"containerNavigation"}}};function we(){var e=Z()(["\n  margin: 0 4px;\n"]);return we=function(){return e},e}function Fe(){var e=Z()(["\n  width: 24px;\n  text-align: center;\n  font-size: 12pt;\n  color: ",";\n"]);return Fe=function(){return e},e}function Ce(){var e=Z()(["\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 5px;\n"]);return Ce=function(){return e},e}var Te=ee.default.div(Ce()),xe=16,Ee="medium",De=ee.default.div(Fe(),function(e){return e.itemIsRestricted?ue.colors.R400:"inherit"}),Ae=ee.default.div(we()),Le=function(e){function n(){var e,i;t()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=s()(this,(e=u()(n)).call.apply(e,[this].concat(r))),p()(O()(i),"getText",function(){var e=i.props.item,n=oe()(e,"data.title")||"";return e.id===i.props.spaceHomePageId?f.a.createElement("span",null,f.a.createElement(Te,null,f.a.createElement(le.a,{label:"",size:"small"})),n):n}),p()(O()(i),"visitPage",function(e){var n=i.props,a=n.isInDrawer,t=n.createAnalyticsEvent,r=n.item,o=n.spaceId,d=n.onClick;t(ye("clicked",o,a)).fire(),e.metaKey||e.shiftKey||e.altKey||e.ctrlKey||1===e.button||(e.preventDefault(),d(r))}),p()(O()(i),"onIconClickExpand",function(e){var n=i.props,a=n.item,t=n.onExpand;e.preventDefault(),e.stopPropagation(),t(a.id)}),p()(O()(i),"onIconClickCollapse",function(e){var n=i.props,a=n.item,t=n.onCollapse;e.preventDefault(),e.stopPropagation(),t(a.id)}),p()(O()(i),"getIcon",function(){var e=i.props,n=e.item,a=e.isSuperAdmin,t=n.isChildrenLoading,r=n.hasChildren,o=n.isExpanded,d=n.hasRestrictions,s=n.hasInheritedRestrictions,l=(d||s)&&a;return t?f.a.createElement(Ae,null,f.a.createElement(ce.a,{size:xe})):r?o?f.a.createElement("div",{role:"button",tabIndex:"0",onClick:i.onIconClickCollapse},f.a.createElement(me.a,{primaryColor:l?ue.colors.R400:null,label:"",size:Ee})):f.a.createElement("div",{role:"button",tabIndex:"0",onClick:i.onIconClickExpand},f.a.createElement(ve.a,{primaryColor:l?ue.colors.R400:null,label:"",size:Ee})):f.a.createElement(De,{itemIsRestricted:l},"•")}),p()(O()(i),"getAfterIcon",function(){var e=i.props,n=e.isSuperAdmin,a=e.item,t=a.hasRestrictions,r=a.hasInheritedRestrictions;return n&&t&&!r?f.a.createElement(ke.a,{primaryColor:ue.colors.R400}):null}),p()(O()(i),"getItemStyle",function(e){var n=i.props,a=n.snapshot,t=n.item,r=n.isSuperAdmin,o=t.hasRestrictions,d=t.hasInheritedRestrictions,s=A()({},e);return s.itemBase["&:hover"]={backgroundColor:ue.colors.N30},s.itemBase.backgroundColor="transparent",s.beforeWrapper.marginRight=4,r&&(o||d)&&(s.textWrapper.color=ue.colors.R400),a.isDragging&&(s.itemBase.boxShadow="".concat(ue.colors.N60A," 1px 5px 11px 2px"),s.itemBase.borderRadius=5,s.itemBase.backgroundColor=ue.colors.N30),a.combineTargetFor&&(s.itemBase.backgroundColor=ue.colors.N30),a.isDragging&&!a.draggingOver&&(s.textWrapper.color=ue.colors.N80,s.beforeWrapper.color=ue.colors.N80),s}),i}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props.item,n=oe()(e,"data.isSelected"),i="".concat(q.CONTEXT_PATH).concat(oe()(e,"data.webui"));return f.a.createElement(de.a,{href:i,spacing:"compact",isSelected:n,text:this.getText(),before:this.getIcon,after:this.getAfterIcon,onClick:this.visitPage,styles:this.getItemStyle})}}]),n}(v.PureComponent);function Oe(){var e=Z()(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  flex-shrink: 0;\n  align-items: flex-start;\n"]);return Oe=function(){return e},e}Le.displayName="PageTreeItem";var Ve=ee.default.div(Oe());function Me(){var e=Z()(["\n  margin: 10px 0 10px 0;\n  width: 100%;\n"]);return Me=function(){return e},e}function Re(){var e=Z()(["\n  /* Grows to fill up the remaining space */\n  flex-grow: 1;\n  /* Expands with the content */\n  flex-shrink: 0;\n  /* Expands narrow tree to at least the width of the sidebar */\n  width: 100%;\n  /* Turns on flex so child can grow too */\n  display: flex;\n  /* Only page tree gets scrollable */\n\n  > div {\n    /* Grow atlaskit/tree div vertically, so user can go out of bound on the bottom*/\n    flex-grow: 1;\n  }\n"]);return Re=function(){return e},e}function je(){var e=Z()(["\n  display: flex;\n  width: 100%;\n"]);return je=function(){return e},e}var $e=ee.default.div(je()),Ke=ee.default.div(Re()),_e=ee.default.div(Me()),qe=Object($.g)(Object(_.a)()(function(e){function n(){var e,i;t()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=s()(this,(e=u()(n)).call.apply(e,[this].concat(r))),p()(O()(i),"scrolledItemId",null),p()(O()(i),"collapsePage",function(e){var n=i.props,a=n.isInDrawer,t=n.tree;(0,n.createAnalyticsEvent)(ye("collapsed",i.props.spaceId,a)).fire(),i.props.onCollapse(t.items[e])}),p()(O()(i),"expandPage",function(e){var n=i.props,a=n.isInDrawer,t=n.tree;(0,n.createAnalyticsEvent)(ye("expanded",i.props.spaceId,a)).fire(),i.props.onExpand(t.items[e])}),p()(O()(i),"dragStart",function(){var e=E()(T.a.mark(function e(n){var a,t,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=i.props,t=a.onDragStart,r=a.createAnalyticsEvent,t(n),r(Se()).fire();case 3:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()),p()(O()(i),"dragEnd",function(){var e=E()(T.a.mark(function e(n,a){var t,r,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.props,r=t.onDragEnd,o=t.createAnalyticsEvent,r(n,a),o(be(!!a)).fire();case 3:case"end":return e.stop()}},e)}));return function(n,i){return e.apply(this,arguments)}}()),p()(O()(i),"patchInnerRef",function(e,n){return e.data.isSelected?function(a){n.innerRef(a),setTimeout(function(){return i.scrollToItem(e.id,a)},0)}:n.innerRef}),p()(O()(i),"renderItem",function(e){var n=e.item,a=e.onExpand,t=e.onCollapse,r=e.provided,o=e.snapshot,d=i.patchInnerRef(n,r),s=i.props,l=s.isSuperAdmin,u=s.spaceHomePageId,c=s.isInDrawer,g=s.createAnalyticsEvent,m=s.onClick;return f.a.createElement("div",Y()({ref:d},r.draggableProps,r.dragHandleProps),f.a.createElement(Le,{item:n,spaceHomePageId:u,onExpand:a,onCollapse:t,snapshot:o,isSuperAdmin:l,isInDrawer:c,createAnalyticsEvent:g,onClick:m}))}),i}return g()(n,e),o()(n,[{key:"scrollToItem",value:function(e,n){this.scrolledItemId!==e&&Object(te.b)(n),this.scrolledItemId=e}},{key:"render",value:function(){var e=this.props,n=e.tree,i=e.loadMorePages,a=e.isTreeTruncated,t=e.isDraggable,r=e.intl,o=a?f.a.createElement(_e,null,f.a.createElement(ie.a,{shouldFitContainer:!0,onClick:i},f.a.createElement($.b,{id:"page-tree.pages.show.all",defaultMessage:"Show all pages"}))):null,d=a?$e:Ke;return f.a.createElement(Ve,null,f.a.createElement(ae.a,{heading:r.formatMessage({id:"pages.word"})},o,f.a.createElement(d,null,f.a.createElement(ne.a,{tree:n,isDragEnabled:t,renderItem:this.renderItem,onExpand:this.expandPage,onCollapse:this.collapsePage,onDragStart:this.dragStart,onDragEnd:this.dragEnd,offsetPerLevel:24,isNestingEnabled:!0})),o))}}]),n}(v.PureComponent))),Ue=i("yTLO"),He=i("1whV"),ze=i.n(He);function Be(){var e=Z()(["\n  display: flex;\n"]);return Be=function(){return e},e}function Qe(){var e=Z()(["\n  padding-left: 4px;\n  padding-right: 7px;\n  line-height: 24px;\n  cursor: default;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #42526e;\n"]);return Qe=function(){return e},e}function Ge(){var e=Z()(["\n  padding: 8px 0px 8px 0px;\n  box-sizing: border-box;\n  height: 40px;\n  width: fit-content;\n"]);return Ge=function(){return e},e}var We=ee.default.div(Ge()),Je=ee.default.span(Qe()),Ye=ee.default.div(Be()),Xe=Object($.f)({pages:{id:"pages.word",defaultMessage:"Pages"},failedLoadTooltip:{id:"pagetree.failed.load.tooltip",defaultMessage:"Hold tight, we’re working on fixing this."},failedLoadContent:{id:"pagetree.failed.load.content",defaultMessage:"Page tree failed to load"}}),Ze=Object($.g)(function(e){function n(){return t()(this,n),s()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props.intl;return f.a.createElement(ae.a,{heading:e.formatMessage(Xe.pages)},f.a.createElement(We,null,f.a.createElement(Ue.a,{content:e.formatMessage(Xe.failedLoadTooltip),position:"bottom"},f.a.createElement(Ye,null,f.a.createElement(ze.a,{label:"error",primaryColor:"rgb(191, 38, 0)"}),f.a.createElement(Je,null,e.formatMessage(Xe.failedLoadContent))))))}}]),n}(v.Component));function en(){var e=Z()(["\n  text-align: center;\n"]);return en=function(){return e},e}var nn,an,tn=ee.default.div(en()),rn=Object($.f)({pages:{id:"pages.word",defaultMessage:"Pages"}}),on=Object($.g)(function(e){function n(){return t()(this,n),s()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props.intl;return f.a.createElement(Ve,null,f.a.createElement(ae.a,{heading:e.formatMessage(rn.pages)},f.a.createElement(tn,null,f.a.createElement(ce.a,{size:20}))))}}]),n}(v.PureComponent)),dn=function(){function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t()(this,e),p()(this,"pop",function(){return n.stack.pop()}),p()(this,"peek",function(){return n.stack.slice(-1)[0]}),this.size=i,this.stack=[]}return o()(e,[{key:"push",value:function(e,n,i,a){var t=e[n.parentId],r=t.children[n.index],o=t.children.length>1?n:{parentId:n.parentId};this.stack.push({pageId:r,source:i,destination:o,flagId:a}),this.stack=this.stack.slice(-1*this.size)}}]),e}(),sn="https://support.atlassian.com/",ln=i("6BAR"),un=i("2z5K"),cn=i.n(un),gn=function(e){return e&&e.nodes&&e.nodes.length?e.nodes:[]},mn=function(e){return e.map(function(e){return e.id})},pn=function e(n,i,a){var t=n[i];if(!(a&&n&&i&&t))return"VIRTUAL_ROOT_ID";switch(i){case a:return a;case"VIRTUAL_LOCAL_ROOT_ID":return"VIRTUAL_LOCAL_ROOT_ID";default:return e(n,t.parentId,a)}},vn=function(e){return!e.hasChildren||Boolean(e.children)&&e.children.length>0},fn=function(e,n){return Object(ln.a)(e,function(i){for(var a in n){var t=e[a],r=n[a];if(t){var o=vn(r)?r.children:t.children;i[a]=A()({},r,{parentId:t.parentId,children:o})}else i[a]=r}return i})},kn=function(e,n){return{count:e.count+n.count,nodes:[].concat(F()(e.nodes),F()(n.nodes))}},hn=function(e){var n=e.previousSiblings,i=e.followingSiblings,a=e.children;return e.nearestAncestors.nodes.filter(function(e){return e.previousSiblings.pageInfo.hasNextPage||e.followingSiblings.pageInfo.hasNextPage}).length>0||n.pageInfo.hasNextPage||i.pageInfo.hasNextPage||a.pageInfo.hasNextPage},Sn=function e(n,i,a){if(i[n]){var t=i[n].parentId;if(t)return a.add(t),e(t,i,a)}return a},bn=function(e,n){return n?Object(ln.a)(n,function(n){var i=e.previousSiblings,a=e.followingSiblings,t=e.nearestAncestors,r=e.children,o=n.previousSiblings,d=n.followingSiblings,s=n.nearestAncestors,l=n.children;o.nodes=cn()(o.nodes,i.nodes,"id"),d.nodes=cn()(d.nodes,a.nodes,"id"),l.nodes=cn()(l.nodes,r.nodes,"id");var u=cn()(t.nodes,s.nodes,"id");return s.nodes.forEach(function(e){var n=u.filter(function(n){return n.id===e.id});if(n.length>0){var i=n[0],a=i.previousSiblings,t=i.followingSiblings;a.nodes=cn()(e.previousSiblings.nodes,a.nodes,"id"),t.nodes=cn()(e.followingSiblings.nodes,t.nodes,"id")}}),s.nodes=u,o.pageInfo.hasNextPage=o.pageInfo.hasNextPage&&i.pageInfo.hasNextPage,d.pageInfo.hasNextPage=d.pageInfo.hasNextPage&&a.pageInfo.hasNextPage,s.pageInfo.hasNextPage=s.pageInfo.hasNextPage&&t.pageInfo.hasNextPage,n}):e},In=function(e,n){if(!e)return n;var i=e.previousSiblings,a=e.followingSiblings,t=e.nearestAncestors,r=e.children,o={},d=i.pageInfo.endCursor;o.previousSiblingsCursor=d||n.previousSiblingsCursor;var s=a.pageInfo.endCursor;o.followingSiblingsCursor=s||n.followingSiblingsCursor;var l=t.pageInfo.endCursor;o.nearestAncestorsCursor=l||n.nearestAncestorsCursor;var u=r.pageInfo.endCursor;o.childrenCursor=u||n.childrenCursor;var c=t.nodes.filter(function(e){return e.previousSiblings.pageInfo.hasNextPage}),g=c.length>0?c[0].previousSiblings.pageInfo.endCursor:null;o.naPreviousSiblingsCursor=g||n.naPreviousSiblingsCursor;var m=t.nodes.filter(function(e){return e.followingSiblings.pageInfo.hasNextPage}),p=m.length>0?m[0].followingSiblings.pageInfo.endCursor:null;return o.naFollowingSiblingsCursor=p||n.naFollowingSiblingsCursor,o},Nn=i("uUTq"),yn=i.n(Nn),Pn=function(e){return{id:e.id,children:gn(e.children),parentId:null,hasChildren:e.hasChildren,isExpanded:!1,isChildrenLoading:!1,hasRestrictions:e.hasRestrictions||!1,hasInheritedRestrictions:e.hasInheritedRestrictions||!1,data:{title:e.title,webui:e.links.webui}}},wn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=gn(e).map(function(e){var i=Pn(e);return n[e.id]=i,i});return n.VIRTUAL_ROOT_ID={id:"VIRTUAL_ROOT_ID",children:mn(a),parentId:null,hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",webui:""}},n.VIRTUAL_LOCAL_ROOT_ID={id:"VIRTUAL_LOCAL_ROOT_ID",children:[],parentId:"VIRTUAL_ROOT_ID",hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",webui:""}},i&&(n=Cn(n)),n},Fn=function(e,n){var i={};if(!e)return i;i=function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n){var a=gn(n.children),t=gn(n.nearestAncestors),r=[].concat(F()(gn(n.previousSiblings)),F()(gn(n.followingSiblings)));return i[n.id]=Pn(n),r.forEach(function(n){return e(n,i)}),t.forEach(function(n){return e(n,i)}),a.forEach(function(n){return e(n,i)}),i}}(e,i),i=wn(n,i,!1);var a=gn(e.nearestAncestors),t=gn(e.children),r=[].concat(F()(F()(gn(e.previousSiblings)).reverse()),[{id:e.id,children:t}],F()(gn(e.followingSiblings)));if(a.forEach(function(e,n){var t=[];if(0===n)t=r;else{var o=a[n-1];t=[].concat(F()(F()(gn(o.previousSiblings)).reverse()),[o],F()(gn(o.followingSiblings)))}i[e.id].children=mn(t)}),i[e.id].children=mn(t),a.length){var o=a[a.length-1],d=[].concat(F()(F()(gn(o.previousSiblings)).reverse()),[o],F()(gn(o.followingSiblings)));i.VIRTUAL_LOCAL_ROOT_ID.children=mn(d)}return i=Cn(i)},Cn=function(e){return Object(ln.a)(e,function(e){Object.keys(e).forEach(function(n){var i=e[n];i&&i.children&&i.children.length&&i.children.forEach(function(n){"string"!=typeof n||"VIRTUAL_LOCAL_ROOT_ID"===i.id&&"VIRTUAL_ROOT_ID"===e[n].parentId||(e[n].parentId=i.id)})})})},Tn=function(e,n,i){return Object(ln.a)(e,function(e){e[n].children=i;var a=xn(e,i,n);Cn(a)})},xn=function(e,n,i){return Object(ln.a)(e,function(e){n.forEach(function(n){if(e[n]&&e[n].parentId&&e[n].parentId!==i){var a=e[e[n].parentId];a.children=yn()(a.children,n)}})})},En=Object($.f)({flagErrorTitle:{id:"pagetree.dragndrop.failed.title",defaultMessage:"Something went wrong."},flagErrorDescription:{id:"pagetree.dragndrop.failed.description",defaultMessage:"Refresh the page and try again. If this keeps happening, let us know using the link below."},flagErrorAction:{id:"pagetree.dragndrop.failed.action.visitsupport",defaultMessage:"Visit Atlassian Support"},flagUndoTitle:{id:"pagetree.dragndrop.undo.title",defaultMessage:'Moved "{pageTitle}"',description:"The page is moved on the page tree"},flagUndoAction:{id:"pagetree.dragndrop.undo.action",defaultMessage:"Undo",description:"Action to revert drag&drop movement on the page tree"},flagLargePageTreeTitle:{id:"pagetree.dragndrop.lpt.title",defaultMessage:"Too many pages",description:"Message when there are too many pages in the page tree"},flagLargePageTreeDescription:{id:"pagetree.dragndrop.lpt.description",defaultMessage:"You are trying to drag a page while viewing too many pages at once. To reorder, visit your space settings.",description:"Message when there are too many pages in the page tree"},flagLargePageTreeAction:{id:"pagetree.dragndrop.lpt.action",defaultMessage:"Reorder pages",description:"Link to page Reorder Pages within Space settings"}}),Dn=500,An=100,Ln=500,On="DND",Vn="LOAD",Mn=Object($.g)(Object(_.a)()((an=nn=function(e){function n(){var e,i;t()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=s()(this,(e=u()(n)).call.apply(e,[this].concat(r))),p()(O()(i),"state",{expandedPages:new Set,loadingPages:new Set,pages:{},space:null,rootId:null,loadingMorePages:!1,isTreeTruncated:!1,initialCursors:null,initialPages:null,error:null}),p()(O()(i),"querySubscription",null),p()(O()(i),"pageMoveHistory",new dn),p()(O()(i),"queryChildren",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{count:0,nodes:[]};return i.props.apolloClient.query({query:B,variables:{contentId:e,first:An,after:n}}).then(function(n){var t=n.data.page.children,r=kn(a,t);return t.pageInfo.hasNextPage?i.queryChildren(e,t.pageInfo.endCursor,r):r})}),p()(O()(i),"getPageQueryObservable",function(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=e?H:z,r=e?{contentId:e,spaceKey:n}:{spaceKey:n},o=A()({paginationLimit:Dn},r);return i.props.apolloClient.watchQuery({fetchPolicy:"cache-and-network",query:t,variables:!0===a?o:r})}),p()(O()(i),"loadPages",function(){var e=E()(T.a.mark(function e(){var n,a,t,r,o,d,s=arguments;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s.length>0&&void 0!==s[0]&&s[0],a=i.state.pages,t=i.props,r=t.currentPageId,o=t.spaceKey,d=i.getPageQueryObservable(r,o,n),i.querySubscription=d.subscribe({next:function(e){var n=e.data,t=e.loading;if(t&&!n&&i.setState({loadingMorePages:!0}),n&&Object.keys(n).length>0){var r=n.currentPage,o=n.rootLevelPages,d=n.space,s=r?Fn(r,o):wn(o),l=In(r,{}),u=fn(a,s),c=r?r.id:null,g=d.homepage?d.homepage.id:null;i.setState({expandedPages:i.determineInitiallyExpandedPages(s),rootId:pn(u,c,g),pages:u,space:d,isTreeTruncated:!!r&&hn(r),initialCursors:l,initialPages:r})}t||i.setState({loadingMorePages:!1})},error:i.handleLoadingError});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()),p()(O()(i),"loadMorePages",E()(T.a.mark(function e(){var n,a,t,r,o,d,s,l,u,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.props,a=n.currentPageId,t=n.spaceKey,(0,n.createAnalyticsEvent)(Pe()).fire(),i.setState({loadingMorePages:!0}),r=i.state,o=r.initialCursors,d=r.initialPages,e.next=6,i.loadAllPages(a,t,o,d);case 6:s=e.sent,l=s.mergedPages,u=s.rootLevelPages,c=Fn(l,u,!0),i.setState({pages:c,isTreeTruncated:!1,loadingMorePages:!1});case 11:case"end":return e.stop()}},e)}))),p()(O()(i),"loadAllPages",function(e,n,a,t){var r=H,o=A()({contentId:e,spaceKey:n},a);return i.props.apolloClient.query({query:r,variables:o}).then(function(r){var o=r.data,d=r.error;if(d)i.handleLoadingError(d);else if(o&&Object.keys(o).length>0){var s=o.currentPage,l=o.rootLevelPages,u=bn(s,t);if(hn(s)){var c=In(s,a);return i.loadAllPages(e,n,c,u)}return{mergedPages:u,rootLevelPages:l}}})}),p()(O()(i),"determineInitiallyExpandedPages",function(e){var n=i.state.expandedPages;for(var a in e){var t=e[a];t.hasChildren&&vn(t)&&n.add(t.id)}return n}),p()(O()(i),"expandPage",function(){var e=E()(T.a.mark(function e(n){var a,t,r,o,d,s,l,u,c,g;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.state.expandedPages.has(n.id)||!n.hasChildren){e.next=19;break}if(a=i.state,t=a.pages,r=a.expandedPages,o=a.loadingPages,d=t[n.id],s=[n.id].concat(F()(Sn(n.id,t,r))),vn(d)){e.next=18;break}return i.setState({loadingPages:o.add(d.id)}),l={},e.t0=gn,e.next=11,i.queryChildren(d.id);case 11:e.t1=e.sent,(u=(0,e.t0)(e.t1)).forEach(function(e){l[e.id]=Pn(e)}),c=fn(t,l),o.delete(d.id),g=Tn(c,d.id,mn(u)),i.setState({loadingPages:o,pages:g});case 18:i.setState({expandedPages:new Set(s)});case 19:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()),p()(O()(i),"collapsePage",function(e){var n=i.state.expandedPages;n.delete(e.id),i.setState({expandedPages:n})}),p()(O()(i),"visitPage",function(e){var n=i.props,a=n.push,t=n.onItemClick;a("".concat(q.CONTEXT_PATH).concat(e.data.webui)),t&&t()}),p()(O()(i),"determineMutation",function(e){return void 0===e.index?W:0===e.index?Q:G}),p()(O()(i),"determineMutationVariables",function(e,n,i){if(void 0===i.index)return{pageId:n,parentId:i.parentId};var a=0===i.index,t=e[i.parentId].children.indexOf(n),r=t>-1&&t<i.index,o=a||r?i.index:i.index-1;return{pageId:n,siblingId:e[i.parentId].children[o]}}),p()(O()(i),"movePage",function(){var e=E()(T.a.mark(function e(n,a){var t,r,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.state.pages,i.isValidMove(n,a)){e.next=3;break}return e.abrupt("return");case 3:return r=t[n.parentId].children[n.index],i.movePageInState(r,n,a),e.next=7,i.requestPageMove(t,r,n.parentId,a);case 7:return e.next=9,i.showUndoFlag(r);case 9:o=e.sent,i.pageMoveHistory.push(t,n,a,o.id);case 11:case"end":return e.stop()}},e)}));return function(n,i){return e.apply(this,arguments)}}()),p()(O()(i),"undo",E()(T.a.mark(function e(){var n,a,t,r,o,d,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.props.flags,a=i.state.pages,!(t=i.pageMoveHistory.pop())){e.next=8;break}return r=t.pageId,o=t.source,d=t.destination,s=t.flagId,i.movePageInState(r,o,d,!0),n.hideFlag(s),e.abrupt("return",i.requestPageMove(a,r,o.parentId,d));case 8:case"end":return e.stop()}},e)}))),p()(O()(i),"handleGenericError",function(e){var n=e.networkError,a=e.graphQLErrors,t=e.lastAction,r=i.props,o=r.flags,d=r.intl;(n||a&&a.length>0)&&(o.showErrorFlag({title:d.formatMessage(En.flagErrorTitle),description:d.formatMessage(En.flagErrorDescription),actions:[{content:d.formatMessage(En.flagErrorAction),onClick:function(){window.open(sn,"_blank")}}]}),console.error("PageTree error",{networkError:n,graphQLErrors:a}),i.setState({error:{networkError:n,graphQLErrors:a,lastAction:t}}))}),p()(O()(i),"handleLoadingError",function(e){return i.handleGenericError(A()({},e,{lastAction:Vn}))}),p()(O()(i),"handleDragDropSuccess",function(e,n,a){return function(){var t=i.props.createAnalyticsEvent,r=i.state.space;t(he({spaceId:r.id,pageId:e,previousParentPageId:n,newParentPageId:a})).fire()}}),p()(O()(i),"handleDragDropError",function(e){return i.handleGenericError(A()({},e,{lastAction:On}))}),p()(O()(i),"canMovePages",function(e,n){return!!e&&e.operations&&!!M()(e.operations,{targetType:"page",operation:"create"})&&!n}),p()(O()(i),"showUndoFlag",function(e){var n=i.props,a=n.flags,t=n.intl,r=i.state.pages;return a.showSuccessFlag({title:t.formatMessage(En.flagUndoTitle,{pageTitle:r[e].data.title}),actions:[{content:t.formatMessage(En.flagUndoAction),onClick:i.onUndoFlagClick}]})}),p()(O()(i),"onDragStart",function(){var e=i.state.pages;Object.keys(e).length>Ln&&(window.dispatchEvent(new Event("scroll")),i.showLargePageTreeFlag()),i.hideLastFlag()}),p()(O()(i),"onUndoFlagClick",function(){(0,i.props.createAnalyticsEvent)(Ie()).fire(),i.undo()}),p()(O()(i),"onUndoShortCut",function(){(0,i.props.createAnalyticsEvent)(Ne()).fire(),i.undo()}),p()(O()(i),"hideLastFlag",function(){var e=i.props.flags,n=i.pageMoveHistory.peek();n&&e.hideFlag(n.flagId)}),p()(O()(i),"showLargePageTreeFlag",function(){var e=i.props,n=e.flags,a=e.intl,t=e.spaceKey,r=e.push;return n.showWarningFlag({title:a.formatMessage(En.flagLargePageTreeTitle),description:a.formatMessage(En.flagLargePageTreeDescription),actions:[{content:a.formatMessage(En.flagLargePageTreeAction),onClick:function(){r("/wiki/pages/reorderpages.action?key=".concat(t))}}]})}),i}return g()(n,e),o()(n,[{key:"componentDidMount",value:function(){this.loadPages(!0)}},{key:"componentDidUpdate",value:function(e){var n=this.props.currentPageId,i=this.state.pages[n];n&&e.currentPageId!==n&&(i?this.expandPage(i):this.loadPages(!0))}},{key:"componentWillUnmount",value:function(){this.querySubscription&&this.querySubscription.unsubscribe()}},{key:"requestPageMove",value:function(e,n,i,a){var t=this.props.apolloClient,r=this.determineMutation(a),o=this.determineMutationVariables(e,n,a);return t.mutate({mutation:r,variables:o}).then(this.handleDragDropSuccess(n,i,a.parentId)).catch(this.handleDragDropError)}},{key:"movePageInState",value:function(e,n,i,a){var t=this.state,r=t.rootId,o=t.pages,d=t.expandedPages,s={rootId:r,items:o};if(void 0===n.index){var l=o[n.parentId],u=l.children.indexOf(e);if(-1!==u){var c=F()(l.children);c.splice(u,1)[0],s=Object(K.d)(s,n.parentId,{children:c,hasChildren:c.length>0,isExpanded:c.length>0&&l.isExpanded})}var g=s.items[i.parentId],m=F()(g.children);m.splice(i.index,0,e),s=Object(K.d)(s,i.parentId,{children:m,hasChildren:!0})}else s=Object(K.c)(s,n,i);0===s.items[n.parentId].children.length&&d.delete(n.parentId),a&&d.add(i.parentId),this.setState({pages:s.items,rootId:s.rootId,expandedPages:d})}},{key:"isValidMove",value:function(e,n){var i=this.state.pages;return n&&!j()(e,n)&&Object.keys(i).length<Ln}},{key:"render",value:function(){var e=this.state,n=e.pages,i=e.rootId,a=e.space,t=e.loadingMorePages,r=e.isTreeTruncated,o=e.error;if(o&&o.lastAction===Vn)return f.a.createElement(Ze,null);if(t)return f.a.createElement(on,null);var d=this.props,s=d.currentPageId,l=d.isDraggable,u=d.isInDrawer,c=d.isSuperAdmin,g={rootId:i,items:n},m=l&&this.canMovePages(a,o);return f.a.createElement(v.Fragment,null,f.a.createElement(U.a,{accelerator:"mod+z",listener:this.onUndoShortCut}),f.a.createElement(qe,{isSuperAdmin:c,currentPageId:s,isDraggable:m,isTreeTruncated:r,isInDrawer:u,loadMorePages:this.loadMorePages,onClick:this.visitPage,onCollapse:this.collapsePage,onDragStart:this.onDragStart,onDragEnd:this.movePage,onExpand:this.expandPage,spaceHomePageId:a&&a.homepage&&a.homepage.id,spaceId:a&&a.id,tree:g}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var i=e.currentPageId,a=n.expandedPages,t=n.loadingPages,r=function(e,n,i,a){return Object(ln.a)(e,function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r.isExpanded=i.has(t),r.isChildrenLoading=a.has(t),r.data.isSelected=r.id===n}})}(n.pages,i,a,t);return A()({},n,{pages:r})}}]),n}(v.Component),p()(nn,"defaultProps",{isDraggable:!0}),an)));i.d(n,"PageTree",function(){return Rn});var Rn=function(e){function n(){return t()(this,n),s()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props,n=e.onItemClick,i=e.isInDrawer;return f.a.createElement(S.a,null,f.a.createElement(k.a,null,function(e){return f.a.createElement(h.c,{to:[b.a]},function(a){return f.a.createElement(y.b.Consumer,null,function(t){var r=t.push;return f.a.createElement(I.a.Consumer,null,function(t){var o=t.spaceKey,d=t.contentId,s=t.contentIdState;return(d||s===N.a)&&f.a.createElement(P.a,null,function(t){var s=t.isSuperAdmin;return f.a.createElement(Mn,{isSuperAdmin:s,apolloClient:e,push:r,onItemClick:n,currentPageId:d,spaceKey:o,flags:a,isInDrawer:i})})})})})}))}}]),n}(v.PureComponent);p()(Rn,"defaultProps",{isInDrawer:!1}),Rn.displayName="PageTree"}}]);
//# sourceMappingURL=page-tree.6338e0114db1ddb58415-v38.js.map