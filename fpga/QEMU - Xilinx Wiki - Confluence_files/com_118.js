WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:user-multiselect2', location = 'user-select2/user-multiselect.js' */
define("confluence-create-content-plugin/plugin/user-select2/user-multiselect",["jquery","ajs","document","confluence/meta","confluence/api/constants"],function(e,c,a,d,b){return function(j,k,l){j=j||a.body;var g=(typeof k!=="undefined")?k:true;var i=(typeof l!=="undefined")?l:false;var f=function(){var m=e(".select2-drop-active > .select2-results");if(m.children(".select2-result-selectable").length===0&&m.children(".select2-disabled").length){m.append('<li class="select2-no-results">'+c.escapeHtml("No matches found")+"</li>")}};var h=g?".autocomplete-multiuser":".autocomplete-singleuser";e("input"+h+"[data-autocomplete-bound != 'true']",j).each(function(){var n=e(this);n.auiSelect2({multiple:g,minimumInputLength:2,formatInputTooShort:function(){return "Start typing to search for a user"},ajax:{transport:function(s){var t=s.success;delete s.success;return e.ajax.apply(e.ajax,arguments).done(t).done(f)},data:function(s){return{limit:6,cql:'user.fullname~"'+s+'"'}},dataType:"json",url:Confluence.getContextPath()+"/rest/api/search",results:function(t){var s=[];e.each(t.results,function(){s.push({accountId:this.user.accountId,username:this.user.username,id:i?this.user.accountId:this.user.username,text:this.user.displayName,imgSrc:this.user.profilePicture.path||b.CONTEXT_PATH+"/images/icons/profilepics/default.png"})});return{results:s}},quietMillis:300},formatResult:function(s){var t={size:"small",displayName:s.text,userId:s.id,avatarImageUrl:s.imgSrc,username:s.username,accountId:s.accountId};return i?CreateContent.avatar.avatarWithNameAccountId(t):CreateContent.avatar.avatarWithName(t)},escapeMarkup:function(s){return s},formatSelection:function(s){var t={size:"xsmall",displayName:s.text,userId:s.id,avatarImageUrl:s.imgSrc,username:s.username,accountId:s.accountId};return i?CreateContent.avatar.avatarWithNameAccountId(t):CreateContent.avatar.avatarWithName(t)},dropdownCssClass:"users-dropdown",containerCssClass:"users-autocomplete",hasAvatar:true});if(!n.data("autofill-user")){return}var q=d.get("remote-user"),r=d.get("atlassian-account-id"),p=d.get("current-user-fullname"),o=d.get("current-user-avatar-url");if(r&&p&&o){var m={accountId:r,username:q,id:i?r:q,text:p,imgSrc:b.CONTEXT_PATH+o};n.auiSelect2("data",g?[m]:m)}})}});require("confluence/module-exporter").exportModuleAsGlobal("confluence-create-content-plugin/plugin/user-select2/user-multiselect","Confluence.Binder.autocompleteMultiUser",function(a){Confluence.Binder.autocompleteMultiUser=a});
}catch(e){WRMCB(e)};