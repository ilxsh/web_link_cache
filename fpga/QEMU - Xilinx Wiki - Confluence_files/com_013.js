WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
(function(u,l){"object"===typeof exports&&"undefined"!==typeof module?module.exports=l():"function"===typeof define&&define.amd?define(l):(u=u||self,u.connectHost=l())})(this,function(){function u(){}function l(){l.init.call(this)}function Ba(a,c,b,d){var f,h;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');(f=a._events)?(f.newListener&&(a.emit("newListener",c,b.listener?b.listener:b),f=a._events),h=f[c]):(f=a._events=new u,a._eventsCount=0);h?("function"===typeof h?
h=f[c]=d?[b,h]:[h,b]:d?h.unshift(b):h.push(b),h.warned||(b=void 0===a._maxListeners?l.defaultMaxListeners:a._maxListeners)&&0<b&&h.length>b&&(h.warned=!0,b=Error("Possible EventEmitter memory leak detected. "+h.length+" "+c+" listeners added. Use emitter.setMaxListeners() to increase limit"),b.name="MaxListenersExceededWarning",b.emitter=a,b.type=c,b.count=h.length,"function"===typeof console.warn?console.warn(b):console.log(b))):(f[c]=b,++a._eventsCount);return a}function Ca(a,c,b){function d(){a.removeListener(c,
d);f||(f=!0,b.apply(a,arguments))}var f=!1;d.listener=b;return d}function Da(a){var c=this._events;if(c){a=c[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function O(a,c){for(var b=Array(c);c--;)b[c]=a[c];return b}function Ea(a,c){return c={exports:{}},a(c,c.exports),c.exports}function Fa(a){if(!a)throw Error("No selector to escape");return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")}function jb(a){switch(a.arrayFormat){case "index":return function(c,b,d){return null===
b?[t(c,a),"[",d,"]"].join(""):[t(c,a),"[",t(d,a),"]\x3d",t(b,a)].join("")};case "bracket":return function(c,b){return null===b?t(c,a):[t(c,a),"[]\x3d",t(b,a)].join("")};default:return function(c,b){return null===b?t(c,a):[t(c,a),"\x3d",t(b,a)].join("")}}}function kb(a){var c;switch(a.arrayFormat){case "index":return function(b,a,f){c=/\[(\d*)\]$/.exec(b);b=b.replace(/\[\d*\]$/,"");c?(void 0===f[b]&&(f[b]={}),f[b][c[1]]=a):f[b]=a};case "bracket":return function(b,a,f){c=/(\[\])$/.exec(b);b=b.replace(/\[\]$/,
"");f[b]=c?void 0===f[b]?[a]:[].concat(f[b],a):a};default:return function(b,a,c){c[b]=void 0===c[b]?a:[].concat(c[b],a)}}}function t(a,c){return c.encode?c.strict?lb(a):encodeURIComponent(a):a}function Ga(a){return Array.isArray(a)?a.sort():"object"===typeof a?Ga(Object.keys(a)).sort(function(a,b){return Number(a)-Number(b)}).map(function(c){return a[c]}):a}function Ha(){}function Ia(a){try{return decodeURIComponent(a)}catch(c){return String.fromCharCode(65533)}}function mb(a){var c=4-a.length%4;
1===c?a+="\x3d":2===c&&(a+="\x3d\x3d");return nb.prototype.decode(ob(a))}function ja(a){if(null===a||""===a)throw"Invalid JWT: must be neither null nor empty-string.";var c=a.indexOf("."),b=a.indexOf(".",c+1);if(0>c||b<=c)throw'Invalid JWT: must contain 2 period (".") characters.';a=a.substring(c+1,b);if(null===a||""===a)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";a=mb.call(window,a);return JSON.parse(a)}function ka(a){return X.parse(X.extract(a)).jwt}function Ja(a){return{addon_key:a.addon_key,
key:a.key,url:a.url,options:a.options}}function Y(a){a=(a=a.attr("class"))?a.match(/ap-plugin-key-([^\s]*)/):null;return Array.isArray(a)?a[1]:!1}function la(a){a=(a=a.attr("class"))?a.match(/ap-module-key-([^\s]*)/):null;return Array.isArray(a)?a[1]:!1}function Ka(a){return Y(a)+"__"+la(a)}function La(a,c,b){a+="Modules";if(window._AP&&window._AP[a]&&window._AP[a][c]&&window._AP[a][c][b])return k.extend({},window._AP[a][c][b].options)}function Ma(a,c){var b=Y(c),d;d=(d=c.attr("class"))?d.match(/ap-target-key-([^\s]*)/):
null;d=Array.isArray(d)?d[1]:!1;return La(a,b,d)}function Na(a){var c=a.attr("href"),b={},d;c||(c=a.find("a").attr("href"));if(c){var f=c.indexOf("#");if(0<=f){a=c.substring(f+1);try{d=JSON.parse(decodeURI(a))}catch(h){console.error("ACJS: cannot decode webitem anchor")}d&&window._AP&&window._AP._convertConnectOptions?b=window._AP._convertConnectOptions(d):console.error("ACJS: cannot convert webitem url to connect iframe options")}else d=Ka(a),f=a.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",
b=Ma(f,a),!b&&window._AP&&window._AP[f+"Options"]&&(b=k.extend({},window._AP[f+"Options"][d])||{}),b||(b={},console.warn("no webitem "+f+"Options for "+d)),b.productContext=b.productContext||{},c=X.parse(X.extract(c)),k.extend(b.productContext,c),b={addon_key:Y(a),key:la(a),options:b}}return b}function D(){var a=AJS.LayerManager.global.getTopLayer();if(a&&pb.test(a.attr("id")))return a=AJS.dialog2(a),a._id=a.$el.attr("id").replace("ap-dialog-",""),a}function Oa(a){var c=a.find(".header-control-panel");
c.length||(c=a.find(".aui-dialog2-footer-actions"));return c}function Z(a,c){return Oa(c).find(".aui-button").filter(function(){return v.getIdentifier(this)===a})}function qb(a){var c={},b=["closeable","fadeout","delay","duration","id"];"object"===typeof a&&b.forEach(function(b){b in a&&(c[b]=a[b])});return c}function rb(){g(document).on("aui-message-close",function(a,c){var b=c.attr("id").replace("ap-message-","");if(E[b]){if(g.isFunction(E[b].onCloseTrigger))E[b].onCloseTrigger();E[b]._destroy()}})}
function I(a){return{constructor:function(c,b,d,f){f=k.last(arguments);var h=f._id;"string"!==typeof c&&(c="");"string"!==typeof b&&(b="");"object"!==typeof d&&(d={});d.id="ap-message-"+h;var m=c,e=b,J=d,x=f,l="AP.messages."+a;console.warn("DEPRECATED API - AP.messages."+a+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");P.trackDeprecatedMethodUsed(l,x._context.extension);if(x=n.getFrameworkAdaptor().getProviderByModuleName("messages"))l=
x[a],l||(x[a]=x.generic),l(m,e,J);else{Pa||(rb(),Pa=!0);x=g("#ac-message-container");1>x.length&&(x=g('\x3cdiv id\x3d"ac-message-container" /\x3e').appendTo("body"));J=qb(J);g.extend(J,{title:m,body:AJS.escapeHtml(e)});if(0>Qa.indexOf(a))throw"Invalid message type. Must be: "+Qa.join(", ");Ra.test(J.id)&&(AJS.messages[a](x,J),x.css("margin-left","-"+x.innerWidth()/2+"px"))}E[h]=this}}}function sb(){Sa||(g(document).on("aui-flag-close",function(a){a=ma.cleanKey(a.target.id);Q.closed(a)}),g(document).on("click",
".ac-flag-actions",function(a){var c=g(a.target);a=c.data("key");c=c.data("flag_id");Q.actionInvoked(a,c)}),Sa=!0)}function Ta(a,c,b){if(R[a]){var d=R[a].extension;b=b||{};b.flagIdentifier=a;q.broadcast(c,{extension_id:d.extension_id},b)}}function Ua(){window.removeEventListener("scroll",Va);aa=na=void 0}function Va(){var a=document.documentElement.scrollHeight,c=window.innerHeight,b=.1*a;window.pageYOffset<=b?Wa("nearTop"):c+window.pageYOffset+b>=a?Wa("nearBottom"):aa=void 0}function Wa(a){aa!==
a&&(q.broadcast("scroll."+a,{id:na},{}),aa=a)}function tb(a){return a.map(function(a){if(a.list&&Array.isArray(a.list)){var b={heading:a.heading};b.items=a.list.map(function(b){var a={};if("string"===typeof b)a.content=b;else if(b.text&&"string"===typeof b.text)a.content=b.text,"boolean"===typeof b.disabled&&(a.disabled=b.disabled),"undefined"!==typeof b.itemId&&(a.itemId=b.itemId);else throw Error("Unknown dropdown list item format.");return a});return b}})}var Xa=function(a,c){a.prototype=Object.create(c.prototype);
a.prototype.constructor=a;a.__proto__=c};u.prototype=Object.create(null);l.EventEmitter=l;l.usingDomains=!1;l.prototype.domain=void 0;l.prototype._events=void 0;l.prototype._maxListeners=void 0;l.defaultMaxListeners=10;l.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new u,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};l.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=a;return this};l.prototype.getMaxListeners=function(){return void 0===this._maxListeners?l.defaultMaxListeners:this._maxListeners};l.prototype.emit=function(a){var c,b,d,f,h;f="error"===a;if(c=this._events)f=f&&null==c.error;else if(!f)return!1;b=this.domain;if(f){c=arguments[1];if(b)c||(c=Error('Uncaught, unspecified "error" event')),c.domainEmitter=this,c.domain=b,c.domainThrown=!1,b.emit("error",c);else{if(c instanceof Error)throw c;b=Error('Uncaught, unspecified "error" event. ('+
c+")");b.context=c;throw b;}return!1}b=c[a];if(!b)return!1;c="function"===typeof b;d=arguments.length;switch(d){case 1:if(c)b.call(this);else for(c=b.length,b=O(b,c),f=0;f<c;++f)b[f].call(this);break;case 2:f=arguments[1];if(c)b.call(this,f);else for(c=b.length,b=O(b,c),d=0;d<c;++d)b[d].call(this,f);break;case 3:f=arguments[1];d=arguments[2];if(c)b.call(this,f,d);else for(c=b.length,b=O(b,c),h=0;h<c;++h)b[h].call(this,f,d);break;case 4:f=arguments[1];d=arguments[2];h=arguments[3];if(c)b.call(this,
f,d,h);else{c=b.length;b=O(b,c);for(var m=0;m<c;++m)b[m].call(this,f,d,h)}break;default:f=Array(d-1);for(h=1;h<d;h++)f[h-1]=arguments[h];if(c)b.apply(this,f);else for(c=b.length,b=O(b,c),d=0;d<c;++d)b[d].apply(this,f)}return!0};l.prototype.addListener=function(a,c){return Ba(this,a,c,!1)};l.prototype.on=l.prototype.addListener;l.prototype.prependListener=function(a,c){return Ba(this,a,c,!0)};l.prototype.once=function(a,c){if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');
this.on(a,Ca(this,a,c));return this};l.prototype.prependOnceListener=function(a,c){if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');this.prependListener(a,Ca(this,a,c));return this};l.prototype.removeListener=function(a,c){var b,d,f,h,m;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');d=this._events;if(!d)return this;b=d[a];if(!b)return this;if(b===c||b.listener&&b.listener===c)0===--this._eventsCount?this._events=new u:(delete d[a],
d.removeListener&&this.emit("removeListener",a,b.listener||c));else if("function"!==typeof b){f=-1;for(h=b.length;0<h--;)if(b[h]===c||b[h].listener&&b[h].listener===c){m=b[h].listener;f=h;break}if(0>f)return this;if(1===b.length){b[0]=void 0;if(0===--this._eventsCount)return this._events=new u,this;delete d[a]}else{h=f+1;for(var e=b.length;h<e;f+=1,h+=1)b[f]=b[h];b.pop()}d.removeListener&&this.emit("removeListener",a,m||c)}return this};l.prototype.removeAllListeners=function(a){var c;c=this._events;
if(!c)return this;if(!c.removeListener)return 0===arguments.length?(this._events=new u,this._eventsCount=0):c[a]&&(0===--this._eventsCount?this._events=new u:delete c[a]),this;if(0===arguments.length){c=Object.keys(c);for(var b=0,d;b<c.length;++b)d=c[b],"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events=new u;this._eventsCount=0;return this}c=c[a];if("function"===typeof c)this.removeListener(a,c);else if(c){do this.removeListener(a,c[c.length-1]);
while(c[0])}return this};l.prototype.listeners=function(a){var c=this._events;if(c)if(a=c[a])if("function"===typeof a)a=[a.listener||a];else{for(var c=Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];a=c}else a=[];else a=[];return a};l.listenerCount=function(a,c){return"function"===typeof a.listenerCount?a.listenerCount(c):Da.call(a,c)};l.prototype.listenerCount=Da;l.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var e=new (function(a){function c(){var b;
b=a.call(this)||this;b.setMaxListeners(20);return b}Xa(c,a);var b=c.prototype;b.dispatch=function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];this.emit.apply(this,["before:"+b].concat(c));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+b].concat(c))};b.registerOnce=function(b,a){if("string"===typeof b)this.once(b,a);else throw"ACJS: event name must be string";};b.register=function(b,a){if("string"===typeof b)this.on(b,a);else throw"ACJS: event name must be string";
};b.unregister=function(b,a){if("string"===typeof b)this.removeListener(b,a);else throw"ACJS: event name must be string";};return c}(l)),g=window.AJS&&window.AJS.$||function(){},Ya=Function.prototype.bind,r={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(a){return"string"===
typeof a||a instanceof String},argumentsToArray:function(a){return Array.prototype.slice.call(a)},argumentNames:function(a){return a.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(a){var c=a.length;return 0<c&&"function"===typeof a[c-1]},error:function(a){if(window.console&&window.console.error){var c=[];"string"===typeof a?(c.push("[Simple-XDM] "+a),c=c.concat(Array.prototype.slice.call(arguments,1))):(c.push("[Simple-XDM] "),
c=c.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,c)}},warn:function(a){window.console&&console.warn("[Simple-XDM] "+a)},log:function(a){window.console&&window.console.log("[Simple-XDM] "+a)},_bind:function(a,c){return Ya&&c.bind===Ya?c.bind(a):function(){return c.apply(a,arguments)}},throttle:function(a,c,b){var d=0;return function(){var f=Date.now();f-d>c&&(d=f,a.apply(b,arguments))}},each:function(a,c){var b,d;if(a)if(b=a.length,null!=b&&"function"!==typeof a)for(d=
0;d<b&&!1!==c.call(a[d],d,a[d]);)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&!1===c.call(a[d],d,a[d]))break},extend:function(a){var c=arguments;[].slice.call(c,1,c.length).forEach(function(b){"object"===typeof b&&Object.getOwnPropertyNames(b).forEach(function(c){a[c]=b[c]})});return a},sanitizeStructuredClone:function(a){function c(a){if("function"===typeof a)return f("A function was detected and removed from the message."),null;if(d.some(function(b){return a instanceof b?(f(b.name+" object was detected and removed from the message."),
!0):!1}))return{};if(a&&"object"===typeof a&&b.every(function(b){return!(a instanceof b)})){var m;if(Array.isArray(a))m=a.map(function(b){return c(b)});else{if(-1<h.indexOf(a))return f("A circular reference was detected and removed from the message."),null;h.push(a);m={};for(var e in a)if(a.hasOwnProperty(e)){var g=c(a[e]);null!==g&&(m[e]=g)}h.pop()}return m}return a}var b=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],d=[Error,Node],f=r.warn,h=[];return c(a)},getOrigin:function(a,c){if("function"===
typeof URL)try{return(new URL(a,c)).origin}catch(f){}var b=document.implementation.createHTMLDocument("");if(c){var d=b.createElement("base");d.href=c;b.head.appendChild(d)}d=b.createElement("a");d.href=a;b.body.appendChild(d);b=d.protocol+"//"+d.hostname;a.match(/\/\/[^/]+:[0-9]+\//)&&(b+=d.port?":"+d.port:"");return b}},ba=[],ca,Za=function(a){ba=ba.filter(function(c){var b=c.callback;return c.element===a?(b(),!1):!0})};if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var oa=
new IntersectionObserver(function(a){a.forEach(function(a){var b=a.target;0<a.intersectionRatio&&(oa.unobserve(b),Za(b))})},{threshold:.25});ca=oa.observe.bind(oa)}else{ca=function(a){var c;a:{c=document.documentElement;if(c.contains(a)&&"none"!==getComputedStyle(a).display){var b=a.getBoundingClientRect(),d=a.parentNode,f=b;do{var h=getComputedStyle(d);if("none"===h.display){c=void 0;break a}var m=void 0;d===document.body?m={top:0,left:0,right:c.clientWidth,bottom:c.clientHeight}:"visible"!==h.overflow&&
(m=d.getBoundingClientRect());if(m){var h=Math.max(m.top,f.top),e=Math.max(m.left,f.left),g=Math.min(m.right,f.right),f=Math.min(m.bottom,f.bottom),m=g-e,k=f-h;if(0>=m||0>=k){c=void 0;break a}f={top:h,left:e,right:g,bottom:f,width:m,height:k}}d=d.parentNode}while(d!==c);if(f){c=f.width*f.height/(b.width*b.height);break a}}c=void 0}.25<=c&&Za(a)};var pa=r.throttle(function(){ba.forEach(function(a){return ca(a.element)})},500);window.addEventListener("resize",pa);document.addEventListener("scroll",
pa);"MutationObserver"in window&&document.addEventListener("DOMContentLoaded",function(){(new MutationObserver(pa)).observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})})}var ub=function(a,c){"function"===typeof c&&a instanceof Element&&(ba.push({element:a,callback:c}),ca(a))},y=new (function(){function a(){this._addons={}}var c=a.prototype;c._track=function(b,a){var c=window,d="connect.addon."+b;a=a||{};a.version=c._AP&&c._AP.version?c._AP.version:void 0;a.userAgent=c.navigator.userAgent;
if(!c.AJS)return!1;if(c.AJS.Analytics)c.AJS.Analytics.triggerPrivacyPolicySafeEvent(d,a);else if(c.AJS.trigger)AJS.trigger("analyticsEvent",{name:d,data:a});else return!1;return!0};c._time=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};c.trackLoadingStarted=function(b){this._addons&&b&&b.id?(b.startLoading=this._time(),this._addons[b.id]=b):console.error("ACJS: cannot track loading analytics",this._addons,b)};c.trackLoadingEnded=function(b){if(this._addons&&
b&&this._addons[b.id]){var a=b.url,a=void 0!==a&&-1===a.indexOf("xdm_e\x3d"),c=this._time()-this._addons[b.id].startLoading,h=this.getIframeLoadApdex(c);this._track("iframe.performance.load",{addonKey:b.addon_key,moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?b.options.moduleLocation:void 0,iframeLoadMillis:c,iframeLoadApdex:h,iframeIsCacheable:a,value:2E4<c?"x":Math.ceil(c/100)})}else console.error("ACJS: cannot track loading end analytics",this._addons,
b)};c.getIframeLoadApdex=function(b){return 300>=b?1:1200>=b?.5:0};c.trackLoadingTimeout=function(b){var a=window.navigator.onLine;"boolean"!==typeof a&&(a="not-supported");this._track("iframe.performance.timeout",{addonKey:b.addon_key,moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?b.options.moduleLocation:void 0,connectedStatus:a.toString()});this.trackLoadingEnded(b)};c.trackLoadingCancel=function(b){this._track("iframe.performance.cancel",{addonKey:b.addon_key,
moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?b.options.moduleLocation:void 0})};c.trackUseOfDeprecatedMethod=function(b,a){this._track("jsapi.deprecated",{addonKey:a.addon_key,moduleKey:a.key,methodUsed:b})};c.trackMultipleDialogOpening=function(b,a){this._track("jsapi.dialog.multiple",{addonKey:a.addon_key,moduleKey:a.key,dialogType:b})};c.trackVisible=function(b){this._track("iframe.is_visible",{addonKey:b.addon_key,moduleKey:b.key})};c.dispatch=function(b,
a){this._track(b,a)};c.trackExternal=function(b,a){this._track(b,a)};return a}());g.fn&&e.register("iframe-create",function(a){y.trackLoadingStarted(a.extension)});e.register("iframe-bridge-start",function(a){y.trackLoadingStarted(a.extension)});e.register("iframe-bridge-established",function(a){y.trackLoadingEnded(a.extension);ub(document.getElementById(a.extension.id),function(){y.trackVisible(a.extension)})});e.register("iframe-bridge-timeout",function(a){y.trackLoadingTimeout(a.extension)});e.register("iframe-bridge-cancelled",
function(a){y.trackLoadingCancel(a.extension)});e.register("analytics-deprecated-method-used",function(a){y.trackUseOfDeprecatedMethod(a.methodUsed,a.extension)});e.register("iframe-destroyed",function(a){delete y._addons[a.extension.extension_id]});e.register("analytics-external-event-track",function(a){y.trackExternal(a.eventName,a.values)});var $a={timeout:function(a,c){e.dispatch("iframe-bridge-timeout",{$el:a,extension:c})},cancelled:function(a,c){e.dispatch("iframe-bridge-cancelled",{$el:a,
extension:c})}},qa={loading:'\x3cdiv class\x3d"ap-loading"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eLoading app...\x3c/div\x3e',"load-timeout":'\x3cdiv class\x3d"ap-load-timeout"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eApp is not responding. Wait or \x3ca href\x3d"#" class\x3d"ap-btn-cancel"\x3ecancel\x3c/a\x3e?\x3c/div\x3e',"load-error":"App failed to load."},S=new (function(){function a(){this._stateRegistry={}}var c=a.prototype;c._loadingContainer=function(b){return b.find(".ap-status-indicator")};
c.render=function(){var b=document.createElement("div");b.classList.add("ap-status-indicator");b.innerHTML=qa.loading;b=g(b);this._startSpinner(b);return b};c._startSpinner=function(b){setTimeout(function(){var a=b.find(".small-spinner");a.length&&a.spin&&a.spin({lines:12,length:3,width:2,radius:3,trail:60,speed:1.5,zIndex:1})},10)};c.hide=function(b,a){clearTimeout(this._stateRegistry[a]);delete this._stateRegistry[a];this._loadingContainer(b)[0].style.display="none"};c.cancelled=function(b,a){var c=
qa["load-error"];this._loadingContainer(b).empty().text(c)};c._setupTimeout=function(b,a){this._stateRegistry[a.id]=setTimeout(function(){$a.timeout(b,a)},12E3)};c.timeout=function(b,a){var c=g(qa["load-timeout"]),d=this._loadingContainer(b);d.empty().append(c);this._startSpinner(d);g("a.ap-btn-cancel",d).click(function(){$a.cancelled(b,a)});delete this._stateRegistry[a];return d};return a}());e.register("iframe-create",function(a){a.extension.options.noDom||S._setupTimeout(a.$el.parents(".ap-iframe-container"),
a.extension)});e.register("iframe-bridge-established",function(a){a.extension.options.noDom||S.hide(a.$el.parents(".ap-iframe-container"),a.extension.id)});e.register("iframe-bridge-timeout",function(a){a.extension.options.noDom||S.timeout(a.$el,a.extension.id)});e.register("iframe-bridge-cancelled",function(a){a.extension.options.noDom||S.cancelled(a.$el,a.extension.id)});for(var vb=Ea(function(a){function c(b,d){a.exports=c=Object.setPrototypeOf||function(b,a){b.__proto__=a;return b};return c(b,
d)}a.exports=c}),wb=Ea(function(a){function c(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(d){return!1}}function b(d,f,h){c()?a.exports=b=Reflect.construct:a.exports=b=function(b,a,c){var d=[null];d.push.apply(d,a);b=new (Function.bind.apply(b,d));c&&vb(b,c.prototype);return b};return b.apply(null,arguments)}a.exports=b}),xb=function(a){function c(b){var c;
b=b||{};c=a.call(this,b)||this;c._registeredExtensions=b.extensions||{};c._registeredAPIModules={};c._registeredAPIModules._globals={};c._pendingCallbacks={};c._keycodeCallbacks={};c._clickHandler=null;c._pendingEvents={};c._messageHandlers={init:c._handleInit,req:c._handleRequest,resp:c._handleResponse,broadcast:c._handleBroadcast,event_query:c._handleEventQuery,key_triggered:c._handleKeyTriggered,addon_clicked:c._handleAddonClick,get_host_offset:c._getHostOffset,unload:c._handleUnload,sub:c._handleSubInit};
return c}Xa(c,a);var b=c.prototype;b._padUndefinedArguments=function(b,a){return b.length>=a?b:b.concat(Array(a-b.length))};b._verifyAPI=function(b,a){function c(b,a){Object.getOwnPropertyNames(a).forEach(function(d){"object"===typeof a[d]&&b[d]?c(b[d],a[d]):"parent"===a[d]&&b[d]&&(e=!0)})}var d=b.data.targets;if(d){var f=this.getApiSpec(),e=!1;c(f,d);b.source.postMessage({type:"api_tamper",tampered:e},a.extension.url)}};b._handleInit=function(b,a){this._registeredExtensions[a.extension_id].source=
b.source;a.initCallback&&(a.initCallback(b.data.eid),delete a.initCallback);b.data.targets&&this._verifyAPI(b,a)};b._handleSubInit=function(b,a){this.registerExtension(b.data.ext.id,{extension:b.data.ext})};b._getHostOffset=function(b,a){var c=b.source,d=null,f=a||window;f===f.top&&"function"===typeof f.getHostOffsetFunctionOverride&&(d=f.getHostOffsetFunctionOverride(c));if("number"!==typeof d)for(d=0;!this._hasSameOrigin(c);)d++,c=c.parent;b.source.postMessage({hostFrameOffset:d},b.origin)};b._hasSameOrigin=
function(b){if(b===b.top)return!0;try{var a="test_var_"+Math.random().toString(16).substr(2);b[a]=!0;return b[a]}catch(h){}return!1};b._handleResponse=function(b){b=b.data;var a=this._pendingCallbacks[b.mid];a&&(delete this._pendingCallbacks[b.mid],a.apply(window,b.args))};b.registerRequestNotifier=function(b){this._registeredRequestNotifier=b};b._handleRequest=function(b,a){function c(){var c=r.sanitizeStructuredClone(r.argumentsToArray(arguments));b.source.postMessage({mid:b.data.mid,type:"resp",
forPlugin:!0,args:c},a.extension.url)}var d=b.data,f=this._registeredAPIModules[d.mod],e=this.getRegisteredExtensions(a.extension)[0];if(f){var g=d.fn;if(d._cls){var k=f[d._cls],l=d.mod+"-"+d._cls+"-";c._id=d._id;"constructor"===g?(k._construct||(k.constructor.prototype._destroy=function(){delete this._context._proxies[l+this._id]},k._construct=function(){for(var b=arguments.length,a=Array(b),c=0;c<b;c++)a[c]=arguments[c];b=wb(k.constructor,a);a=a[a.length-1];b._id=a._id;b._context=a._context;return b._context._proxies[l+
b._id]=b}),f=k,g="_construct"):f=e._proxies[l+d._id]}var n=f[g];if(n){var p=d.args,q=n.length-1;"_construct"===g&&(q=f.constructor.length-1);c._context=e;p=this._padUndefinedArguments(p,q);p.push(c);f=n.apply(f,p);n.returnsPromise&&("object"!==typeof f&&"function"!==typeof f||"function"!==typeof f.then?c("Defined module method did not return a promise."):f.then(function(b){c(void 0,b)})["catch"](function(b){b=b instanceof Error?b.message:b;c(b)}));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,
{module:d.mod,fn:d.fn,type:d.type,addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id})}}};b._handleBroadcast=function(b,a){var c=b.data;this.dispatch(c.etyp,function(b){return b.extension.addon_key===a.extension.addon_key&&b.extension_id!==a.extension_id},c.evnt,null,null)};b._handleKeyTriggered=function(b,a){var c=b.data,d=this._keycodeKey(c.keycode,c.modifiers,a.extension_id);(d=this._keycodeCallbacks[d])&&d.forEach(function(b){b.call(null,{addon_key:a.extension.addon_key,
key:a.extension.key,extension_id:a.extension_id,keycode:c.keycode,modifiers:c.modifiers})},this)};b.defineAPIModule=function(b,a){a=a||"_globals";this._registeredAPIModules[a]=r.extend({},this._registeredAPIModules[a]||{},b);return this._registeredAPIModules};b._pendingEventKey=function(b,a){var c=b.addon_key||"global";b.key&&(c=c+"@@"+b.key);return c+"@@"+a};b.queueEvent=function(b,a,c,e){if(this._findRegistrations(a).some(function(b){return void 0!==b.registered_events},this))this.dispatch(b,a,
c,e);else{this._cleanupInvalidEvents();var d=(new Date).getTime();this._pendingEvents[this._pendingEventKey(a,d)]={type:b,targetSpec:a,event:c,callback:e,time:d,uid:r.randomString()}}};b._cleanupInvalidEvents=function(){var b=this,a=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(c){3E4>=a-b._pendingEvents[c].time||delete b._pendingEvents[c]})};b._handleEventQuery=function(b,a){var c=this,d={},f=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(h){var e=
c._pendingEvents[h],m=3E4>=f-e.time,g=!e.targetSpec||0!==c._findRegistrations(e.targetSpec).length;g&&e.targetSpec.key&&(g=e.targetSpec.addon_key===a.extension.addon_key&&e.targetSpec.key===a.extension.key);m&&g?(d[h]=e,e.targetSpec=e.targetSpec||{},c.dispatch(e.type,e.targetSpec,e.event,e.callback,b.source)):m||delete c._pendingEvents[h]});this._registeredExtensions[a.extension_id].registered_events=b.data.args;return d};b._handleUnload=function(b,a){a&&(a.extension_id&&this._registeredExtensions[a.extension_id]&&
delete this._registeredExtensions[a.extension_id].source,a.unloadCallback&&a.unloadCallback(b.data.eid))};b.dispatch=function(b,a,c,e,g){function d(a,c){if(a.source&&a.source.postMessage){var d;e&&(d=r.randomString(),this._pendingCallbacks[d]=e);a.source.postMessage({type:"evt",mid:d,etyp:b,evnt:c},a.extension.url)}}this._findRegistrations(a||{}).forEach(function(b){g&&!b.source&&(b.source=g);b.source&&r._bind(this,d)(b,c)},this)};b._findRegistrations=function(b){var a=this;if(0===this._registeredExtensions.length)return r.error("no registered extensions",
this._registeredExtensions),[];var c=Object.getOwnPropertyNames(b),d=Object.getOwnPropertyNames(this._registeredExtensions).map(function(b){return a._registeredExtensions[b]});return b instanceof Function?d.filter(b):d.filter(function(a){return c.every(function(c){return a.extension[c]===b[c]})})};b.registerExtension=function(b,a){a._proxies={};a.extension_id=b;this._registeredExtensions[b]=a};b._keycodeKey=function(b,a,c){var d=b;a&&("string"===typeof a&&(a=[a]),a.sort(),a.forEach(function(b){d+=
"$$"+b},this));return d+"__"+c};b.registerKeyListener=function(b,a,c,e){"string"===typeof c&&(c=[c]);var d=this._registeredExtensions[b];b=this._keycodeKey(a,c,b);this._keycodeCallbacks[b]||(this._keycodeCallbacks[b]=[],d.source.postMessage({type:"key_listen",keycode:a,modifiers:c,action:"add"},d.extension.url));this._keycodeCallbacks[b].push(e)};b.unregisterKeyListener=function(b,a,c,e){var d=this._keycodeKey(a,c,b),f=this._keycodeCallbacks[d];b=this._registeredExtensions[b];f&&(e?(e=f.indexOf(e),
this._keycodeCallbacks[d].splice(e,1)):delete this._keycodeCallbacks[d],b.source&&b.source.postMessage&&b.source.postMessage({type:"key_listen",keycode:a,modifiers:c,action:"remove"},b.extension.url))};b.registerClickHandler=function(b){if("function"!==typeof b)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=b};b._handleAddonClick=function(b,a){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:a.extension.addon_key,
key:a.extension.key,extension_id:a.extension_id})};b.unregisterClickHandler=function(){this._clickHandler=null};b.getApiSpec=function(){function b(b){function c(b){return Object.getOwnPropertyNames(b).reduce(function(a,d){var f=b[d];switch(typeof f){case "function":a[d]={args:r.argumentNames(f),returnsPromise:f.returnsPromise||!1};break;case "object":f.hasOwnProperty("constructor")&&(a[d]=c(f))}return a},{})}var d=a._registeredAPIModules[b];if(!d)throw Error("unregistered API module: "+b);return c(d)}
var a=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(a,c){a[c]=b(c);return a},{})};b._originEqual=function(b,a){function c(b){return"string"===typeof b&&0<b.length}var d=r.getOrigin(b);return c(b)&&c(a)&&c(d)?a===d:!1};b._checkOrigin=function(b,a){var c=["init"],d=a&&!a.source&&-1<c.indexOf(b.data.type),c=a&&b.source===a.source,d=a&&this._originEqual(a.extension.url,b.origin)&&(d||c);"get_host_offset"===b.data.type&&window===window.top&&(d=!0);"unload"!==b.data.type||
!c&&void 0!==b.source||(d=!0);d||r.log("Failed to validate origin: "+b.origin);return d};b.getRegisteredExtensions=function(b){return b?this._findRegistrations(b):this._registeredExtensions};b.unregisterExtension=function(b){b=this._findRegistrations(b);0!==b.length&&b.forEach(function(b){var a=this;Object.keys(this._pendingEvents).forEach(function(c){var d=a._pendingEvents[c].targetSpec||{};d.addon_key===b.extension.addon_key&&d.key===b.extension.key&&delete a._pendingEvents[c]});delete this._registeredExtensions[b.extension_id]},
this)};return c}(function(){function a(b){this._registerListener((b||{}).listenOn)}var c=a.prototype;c._registerListener=function(b){b&&b.addEventListener||(b=window);b.addEventListener("message",r._bind(this,this._receiveMessage),!1)};c._receiveMessage=function(b){var a=this._messageHandlers[b.data.type],c=b.data.eid,h;c&&this._registeredExtensions&&(h=this._registeredExtensions[c]);if(!a||!this._checkOrigin(b,h))return!1;a.call(this,b,h)};return a}()),p=new (function(){function a(){this._xdm=new xb}
var c=a.prototype;c.dispatch=function(b,a,c,h){this._xdm.queueEvent(b,a,c,h);return this.getExtensions(a)};c.broadcast=function(b,a,c){this._xdm.dispatch(b,a,c,null,null);return this.getExtensions(a)};c._createId=function(b){if(!b.addon_key||!b.key)throw Error("Extensions require addon_key and key");return b.addon_key+"__"+b.key+"__"+r.randomString()};c.create=function(b,a,c){a=this.registerExtension(b,a,c);c=b.options||{};c={extension_id:a,api:this._xdm.getApiSpec(),origin:r.locationOrigin(),options:c};
return{id:a,name:JSON.stringify(c),src:b.url}};c.registerRequestNotifier=function(b){this._xdm.registerRequestNotifier(b)};c.registerExtension=function(b,a,c){var d=this._createId(b);this._xdm.registerExtension(d,{extension:b,initCallback:a,unloadCallback:c});return d};c.registerKeyListener=function(b,a,c,h){this._xdm.registerKeyListener(b,a,c,h)};c.unregisterKeyListener=function(b,a,c,h){this._xdm.unregisterKeyListener(b,a,c,h)};c.registerClickHandler=function(b){this._xdm.registerClickHandler(b)};
c.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};c.defineModule=function(b,a,c){this._xdm.defineAPIModule(a,b,c)};c.defineGlobals=function(b){this._xdm.defineAPIModule(b)};c.getExtensions=function(b){return this._xdm.getRegisteredExtensions(b)};c.unregisterExtension=function(b){return this._xdm.unregisterExtension(b)};c.returnsPromise=function(b){b.returnsPromise=!0};return a}()),q={broadcast:function(a,c,b){p.dispatch(a,c,b);e.dispatch("event-dispatch",{type:a,targetSpec:c,
event:b})},broadcastPublic:function(a,c,b){e.dispatch("event-public-dispatch",{type:a,event:c,sender:b});p.dispatch(a,{},{sender:{addonKey:b.addon_key,key:b.key,options:r.sanitizeStructuredClone(b.options)},event:c})}},ab=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,da=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;for(var c={},a=0;10>a;a++)c["_"+String.fromCharCode(a)]=
a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(b){return c[b]}).join(""))return!1;var b={};"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},b)).join("")?!1:!0}catch(d){return!1}}()?Object.assign:function(a,c){var b,d;if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(a);for(var f,h=1;h<arguments.length;h++){b=Object(arguments[h]);for(var e in b)yb.call(b,
e)&&(d[e]=b[e]);if(ab){f=ab(b);for(var g=0;g<f.length;g++)zb.call(b,f[g])&&(d[f[g]]=b[f[g]])}}return d},k={escapeSelector:Fa,stringToDimension:function(a){var c,b="px";"string"===typeof a&&(c=a.indexOf("%")===a.length-1,a=parseInt(a,10),c&&(b="%"));if(!isNaN(a))return a+b},getIframeByExtensionId:function(a){return g("iframe#"+Fa(a))},first:function(a,c){return c?a.slice(0,c):a[0]},last:function(a){return a[a.length-1]},pick:function(a,c){return"object"!==typeof a?{}:Object.keys(a).filter(function(b){return 0<=
c.indexOf(b)}).reduce(function(b,c){var d;return da(b,(d={},d[c]=a[c],d))},{})},debounce:function(a,c){var b;return function(){var d=this,f=[].slice.call(arguments);b&&clearTimeout(b);b=setTimeout(function(){b=null;a.apply(d,f)},c||50)}},extend:da},T={open:function(a,c){e.dispatch("dialog-extension-open",{extension:a,options:c})},close:function(){e.dispatch("dialog-close-active",{})},addUserButton:function(a,c){e.dispatch("dialog-button-add",{button:{text:a.text,identifier:a.identifier,data:{userButton:!0}},
extension:c})}},z={close:function(a){e.dispatch("dialog-close",{dialog:a.dialog,extension:a.extension,customData:a.customData})},closeActive:function(a){e.dispatch("dialog-close-active",a)},clickButton:function(a,c,b){e.dispatch("dialog-button-click",{identifier:a,$el:c,extension:b})},toggleButton:function(a){e.dispatch("dialog-button-toggle",a)},toggleButtonVisibility:function(a){e.dispatch("dialog-button-toggle-visibility",a)}},F={registerKeyEvent:function(a){p.registerKeyListener(a.extension_id,
a.key,a.modifiers,a.callback);e.dispatch("dom-event-register",a)},unregisterKeyEvent:function(a){p.unregisterKeyListener(a.extension_id,a.key,a.modifiers,a.callback);e.dispatch("dom-event-unregister",a)},registerWindowKeyEvent:function(a){window.addEventListener("keydown",function(c){c.keyCode===a.keyCode&&a.callback()})},registerClickHandler:function(a){p.registerClickHandler(function(c){(c=document.getElementById(c.extension_id))&&a(c)})},unregisterClickHandler:function(){p.unregisterClickHandler()}},
bb=new (function(){function a(){}a.prototype.randomIdentifier=function(){return Math.random().toString(16).substring(7)};return a}()),A=new (function(){function a(){}var c=a.prototype;c._maxDimension=function(b,a){var c=k.stringToDimension(b),d=parseInt(c,10),e=parseInt(a,10);return-1<c.indexOf("%")&&100<=d||d>e?"100%":c};c._closeOnEscape=function(b){return!1===b.closeOnEscape?!1:!0};c._size=function(b){var a=b.size;"x-large"===b.size&&(a="xlarge");"maximum"!==b.size&&"100%"===b.width&&"100%"===b.height&&
(a="fullscreen");return a};c._header=function(b){var a="";switch(typeof b){case "string":a=b;break;case "object":a=b.value}return a};c._hint=function(b){return"string"===typeof b?b:""};c._chrome=function(b){var a=!1;"boolean"===typeof b.chrome&&(a=b.chrome);"fullscreen"===b.size&&(a=!0);"maximum"===b.size&&(a=!1);return a};c._width=function(b){if(!b.size)return b.width?this._maxDimension(b.width,g(window).width()):"50%"};c._height=function(b){if(!b.size)return b.height?this._maxDimension(b.height,
g(window).height()):"50%"};c._actions=function(b){var a=[];b=b||{};b.actions||(a=[{name:"submit",identifier:"submit",text:b.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:b.cancelText||"Cancel",type:"link",immutable:!0}]);b.buttons&&(a=a.concat(this._buttons(b)));return a};c._id=function(b){"string"!==typeof b&&(b=Math.random().toString(36).substring(2,8));return b};c._buttons=function(b){var a=[];b.buttons&&Array.isArray(b.buttons)&&b.buttons.forEach(function(b){var c,
d,f=!1;b.text&&"string"===typeof b.text&&(c=b.text);d=b.identifier&&"string"===typeof b.identifier?b.identifier:bb.randomIdentifier();b.disabled&&!0===b.disabled&&(f=!0);a.push({text:c,identifier:d,type:"secondary",custom:!0,disabled:f})});return a};c._onHide=function(b){return"function"===typeof b.onHide?b.onHide:function(){}};c.sanitizeOptions=function(b){b=b||{};b={chrome:this._chrome(b),header:this._header(b.header),hint:this._hint(b.hint),width:this._width(b),height:this._height(b),$content:b.$content,
extension:b.extension,actions:this._actions(b),id:this._id(b.id),size:b.size,closeOnEscape:this._closeOnEscape(b),onHide:this._onHide(b)};b.size=this._size(b);return b};c.moduleOptionsFromGlobal=function(b,a){var c={chrome:!0};return window._AP&&window._AP.dialogModules&&window._AP.dialogModules[b]&&window._AP.dialogModules[b][a]?k.extend({},c,window._AP.dialogModules[b][a].options):!1};c.trackMultipleDialogOpening=function(b,a){var c;c=this._size(a);g(".ap-aui-dialog2:visible").length&&(c=g("#macro-browser-dialog").length||
AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===c?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple",y.trackMultipleDialogOpening(c,b))};c.assertActiveDialogOrThrow=function(b,a){if(!b.isActiveDialog(a))throw Error("Failed to find an active dialog for: "+a);};return a}()),ea={notifyIframeCreated:function(a,c){e.dispatch("iframe-create",{$el:a,extension:c})},notifyBridgeEstablished:function(a,c){e.dispatch("iframe-bridge-established",
{$el:a,extension:c})},notifyIframeDestroyed:function(a){"string"===typeof a&&(a={id:a});p.getExtensions(a).forEach(function(a){e.dispatch("iframe-destroyed",{extension:a});p.unregisterExtension({id:a.extension_id})},this)},notifyUnloaded:function(a,c){e.dispatch("iframe-unload",{$el:a,extension:c})}},lb=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},X={extract:function(a){return a.split("?")[1]||""},parse:function(a,
c){c=da({arrayFormat:"none"},c);var b=kb(c),d=Object.create(null);if("string"!==typeof a)return d;a=a.trim().replace(/^(\?|#|&)/,"");if(!a)return d;a.split("\x26").forEach(function(a){var c=a.replace(/\+/g," ").split("\x3d");a=c.shift();c=0<c.length?c.join("\x3d"):void 0;c=void 0===c?null:decodeURIComponent(c);b(decodeURIComponent(a),c,d)});return Object.keys(d).sort().reduce(function(b,a){var c=d[a];c&&"object"===typeof c&&!Array.isArray(c)?b[a]=Ga(c):b[a]=c;return b},Object.create(null))},stringify:function(a,
c){c=da({encode:!0,strict:!0,arrayFormat:"none"},c);var b=jb(c);return a?Object.keys(a).sort().map(function(d){var f=a[d];if(void 0===f)return"";if(null===f)return t(d,c);if(Array.isArray(f)){var e=[];f.slice().forEach(function(a){void 0!==a&&e.push(b(d,a,e.length))});return e.join("\x26")}return t(d,c)+"\x3d"+t(f,c)}).filter(function(b){return 0<b.length}).join("\x26"):""}},ob=function(a){var c,b;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var d=a.indexOf("\x3d");
-1===d&&(d=b);b=[d,d===b?0:4-d%4];c=b[0];b=b[1];for(var d=new Ab(3*(c+b)/4-b),f=0,e=0<b?c-4:c,g=0;g<e;g+=4)c=w[a.charCodeAt(g)]<<18|w[a.charCodeAt(g+1)]<<12|w[a.charCodeAt(g+2)]<<6|w[a.charCodeAt(g+3)],d[f++]=c>>16&255,d[f++]=c>>8&255,d[f++]=c&255;2===b&&(c=w[a.charCodeAt(g)]<<2|w[a.charCodeAt(g+1)]>>4,d[f++]=c&255);1===b&&(c=w[a.charCodeAt(g)]<<10|w[a.charCodeAt(g+1)]<<4|w[a.charCodeAt(g+2)]>>2,d[f++]=c>>8&255,d[f++]=c&255);return d},w=[],Ab="undefined"!==typeof Uint8Array?Uint8Array:Array,fa=0;64>
fa;++fa)w["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(fa)]=fa;w[45]=62;w[95]=63;Ha.prototype.decode=function(a){for(var c=a.length,b="",d="",c=Math.min(a.length,c||Infinity),f=0;f<c;f++)127>=a[f]?(b+=Ia(d)+String.fromCharCode(a[f]),d=""):d+="%"+a[f].toString(16);return b+Ia(d)};var nb=Ha,cb=60;e.register("jwt-skew-set",function(a){cb=a.skew});var db={parseJwtIssuer:function(a){return ja(a).iss},parseJwtClaims:ja,isJwtExpired:function(a,c){void 0===c&&(c=cb);var b=
ja(a),d=0,f=Math.floor(Date.now()/1E3);b&&b.exp&&(d=b.exp);return d-c<f?!0:!1}},K={hasJwt:function(a){return ka(a)&&0!==ka(a).length},isJwtExpired:function(a){a=ka(a);return db.isJwtExpired(a)}},ra={registerContentResolver:function(a){e.dispatch("content-resolver-register-by-extension",a)},requestRefreshUrl:function(a){if(!a.resolver)throw Error("ACJS: No content resolver supplied");var c=a.resolver.call(null,k.extend({classifier:"json"},a.extension));c.fail(function(b,c){e.dispatch("jwt-url-refreshed-failed",
{extension:a.extension,$container:a.$container,errorText:c.text})});c.done(function(b){var c={};if("object"===typeof b)c=b;else if("string"===typeof b)try{c=JSON.parse(b)}catch(f){console.error("ACJS: invalid response from content resolver")}a.extension.url=c.url;k.extend(a.extension.options,c.options);e.dispatch("jwt-url-refreshed",{extension:a.extension,$container:a.$container,url:a.extension.url})});e.dispatch("jwt-url-refresh-request",{data:a})},setClockSkew:function(a){"number"===typeof a?e.dispatch("jwt-skew-set",
{skew:a}):console.error("ACJS: invalid JWT clock skew set")}},Bb={optionsToAttributes:function(a){var c={};a&&"object"===typeof a&&(a.width&&(c.width=k.stringToDimension(a.width)),a.height&&(c.height=k.stringToDimension(a.height)));return c}},sa=new (function(){function a(){this.store={}}var c=a.prototype;c.set=function(b,a){if(a){var c={};c[b]=a}else c=b;k.extend(this.store,c)};c.get=function(b){return b?this.store[b]:k.extend({},this.store)};return a}()),ta={createSimpleXdmExtension:function(a){var c=
Ja(a),b=sa.get();a.options=c.options=k.extend({},c.options);a.options.globalOptions=b;b=p.create(c,function(){a.options.noDOM||(a.$el=g(document.getElementById(a.id)));ea.notifyBridgeEstablished(a.$el,a)},function(){ea.notifyUnloaded(a.$el,a)});c.id=b.id;a.id=b.id;k.extend(b,Bb.optionsToAttributes(a.options));return{iframeAttributes:b,extension:a}},extensionConfigSanitizer:Ja},G=new (function(){function a(){this._contentResolver=!1}var c=a.prototype;c.setContentResolver=function(b){this._contentResolver=
b};c.resize=function(b,a,c){b=k.stringToDimension(b);a=k.stringToDimension(a);c.css({width:b,height:a});c.trigger("resized",{width:b,height:a})};c.simpleXdmExtension=function(b,a){!b.url||K.hasJwt(b.url)&&K.isJwtExpired(b.url)?this._contentResolver?ra.requestRefreshUrl({extension:b,resolver:this._contentResolver,$container:a}):console.error("JWT is expired and no content resolver was specified"):this._appendExtension(a,this._simpleXdmCreate(b))};c._simpleXdmCreate=function(b){var a=ta.createSimpleXdmExtension(b);
b.id=a.iframeAttributes.id;b.$el=this.render(a.iframeAttributes);return b};c._appendExtension=function(b,a){var c=b.find("iframe");0<c.length&&c.destroy();a.options.hideIframeUntilLoad&&a.$el.css({visibility:"hidden"}).load(function(){a.$el.css({visibility:""})});b.prepend(a.$el);ea.notifyIframeCreated(a.$el,a)};c._appendExtensionError=function(b,a){var c=g('\x3cdiv class\x3d"connect-resolve-error"\x3e\x3c/div\x3e'),d=g("\x3cp /\x3e").text(a);c.append('\x3cp class\x3d"error"\x3eError: The content resolver threw the following error:\x3c/p\x3e');
c.append(d);b.prepend(c)};c.resolverResponse=function(b){var a=this._simpleXdmCreate(b.extension);this._appendExtension(b.$container,a)};c.resolverFailResponse=function(b){this._appendExtensionError(b.$container,b.errorText)};c.render=function(b){b=b||{};b.referrerpolicy="no-referrer";return g("\x3ciframe /\x3e").attr(b).addClass("ap-iframe")};return a}());e.register("iframe-resize",function(a){G.resize(a.width,a.height,a.$el)});e.register("content-resolver-register-by-extension",function(a){G.setContentResolver(a.callback)});
e.register("jwt-url-refreshed",function(a){G.resolverResponse(a)});e.register("jwt-url-refreshed-failed",function(a){G.resolverFailResponse(a)});e.register("after:iframe-bridge-established",function(a){a.extension.options.noDom?a.extension.options.bridgeEstablished=!0:a.$el[0].bridgeEstablished=!0});var ua={clicked:function(a){e.dispatch("button-clicked",{$el:a})},toggle:function(a,c){e.dispatch("button-toggle",{$el:a,disabled:c})},toggleVisibility:function(a,c){e.dispatch("button-toggle-visibility",
{$el:a,hidden:c})}},Cb=["primary","link","secondary"],eb=0,v=new (function(){function a(){this.AP_BUTTON_CLASS="ap-aui-button"}var c=a.prototype;c.setType=function(b,a){a&&0<=Cb.indexOf(a)&&b.addClass("aui-button-"+a);return b};c.setDisabled=function(b,a){"undefined"===typeof a||b.data("immutable")||b.attr("aria-disabled",a);return b};c.setHidden=function(b,a){"undefined"===typeof a||b.data("immutable")||b.toggle(!a);return b};c._setId=function(b,a){a||(a="ap-button-"+eb,eb++);b.attr("id",a);return b};
c._additionalClasses=function(b,a){a&&("string"!==typeof a&&(a=a.join(" ")),b.addClass(a));return b};c.getName=function(b){return g(b).data("name")};c.getText=function(b){return g(b).text()};c.getIdentifier=function(b){return g(b).data("identifier")};c.isVisible=function(b){return g(b).is(":visible")};c.isEnabled=function(b){return"true"!==g(b).attr("aria-disabled")};c.render=function(b){var a=g("\x3cbutton /\x3e");b=b||{};a.addClass("aui-button "+this.AP_BUTTON_CLASS);a.text(b.text);a.data(b.data);
a.data({name:b.name||b.identifier,identifier:b.identifier||bb.randomIdentifier(),immutable:b.immutable||!1});this._additionalClasses(a,b.additionalClasses);this.setType(a,b.type);this.setDisabled(a,b.disabled||!1);this._setId(a,b.id);return a};return a}());g(function(){g("body").on("click","."+v.AP_BUTTON_CLASS,function(a){a=g(a.target).closest("."+v.AP_BUTTON_CLASS);"true"!==a.attr("aria-disabled")&&ua.clicked(a)})});e.register("button-toggle",function(a){v.setDisabled(a.$el,a.disabled)});e.register("button-toggle-visibility",
function(a){v.setHidden(a.$el,a.hidden)});var Db=["ap-iframe-container"],va=new (function(){function a(){}var c=a.prototype;c.createExtension=function(b,a){var c=this._renderContainer();a&&!1===a.loadingIndicator||c.append(this._renderLoadingIndicator());G.simpleXdmExtension(b,c);return c};c._renderContainer=function(b){b=g("\x3cdiv /\x3e").attr(b||{});b.addClass(Db.join(" "));return b};c._renderLoadingIndicator=function(){return S.render()};return a}());e.register("iframe-create",function(a){var c=
"embedded-"+a.extension.id;a.extension.$el.parents(".ap-iframe-container").attr("id",c)});var Eb={defineCustomModule:function(a,c){var b={};c?(b.methods=c,b.name=a):b.methods=a;e.dispatch("module-define-custom",b)}},P={trackDeprecatedMethodUsed:function(a,c){e.dispatch("analytics-deprecated-method-used",{methodUsed:a,extension:c})},trackIframeBridgeStart:function(a){e.dispatch("iframe-bridge-start",{extension:a})},trackExternalEvent:function(a,c){e.dispatch("analytics-external-event-track",{eventName:a,
values:c})}},B={sanitizeTriggers:function(a){var c;Array.isArray(a)?c=a.join(" "):"string"===typeof a&&(c=a.trim());return c},uniqueId:function(){return"webitem-"+Math.floor(1E9*Math.random()).toString(16)},getExtensionKey:Y,getKey:la,getOptionsForWebItem:function(a){var c=Ka(a),b=a.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",d=Ma(b,a);!d&&window._AP&&window._AP[b+"Options"]&&(d=k.extend({},window._AP[b+"Options"][c])||{});d||(d={},console.warn("no webitem "+b+"Options for "+c));d.productContext=
d.productContext||{};d.structuredContext=d.structuredContext||{};(a=Na(a))&&a.options&&(k.extend(d.productContext,a.options.productContext),k.extend(d.structuredContext,a.options.structuredContext),d.contextJwt=a.options.contextJwt);return d},getModuleOptionsByAddonAndModuleKey:La,getConfigFromTarget:Na},L=new function(){var a=this;this._providers={};this.registerProvider=function(c,b){a._providers[c]=b};this.getProvider=function(c){return a._providers[c]}},Fb=new (function(){function a(){this.moduleNamesToModules=
new Map}a.prototype.registerModule=function(a,b){var c=a.getModuleRegistrationName();this.moduleNamesToModules.set(c,a)};a.prototype.getModuleByName=function(a){return this.moduleNamesToModules.get(a)};a.prototype.getProviderByModuleName=function(a){if((a=this.moduleNamesToModules.get(a))&&a.isEnabled())return a.getProvider()};return a}()),n=new (function(){function a(){var b=this;this.create=function(b){return va.createExtension(ta.extensionConfigSanitizer(b))};this.dialog={create:function(b,a){var c=
B.getModuleOptionsByAddonAndModuleKey("dialog",b.addon_key,b.key),c=k.extend({},c||{},a);T.open(b,c)},close:function(a,c){var d=b.getFrameworkAdaptor().getProviderByModuleName("dialog");d?(A.assertActiveDialogOrThrow(d,a),q.broadcast("dialog.close",{addon_key:a},c),d.close()):T.close()}};this.registerContentResolver={resolveByExtension:function(a){b._contentResolver=a;ra.registerContentResolver({callback:a})}};this.getContentResolver=function(){return b._contentResolver};this.registerProvider=function(b,
a){L.registerProvider(b,a)};this.getProvider=function(b){return L.getProvider(b)};this.frameworkAdaptor=Fb}var c=a.prototype;c.createExtension=function(b){b.options=b.options||{};b.options.noDom=!0;b=ta.createSimpleXdmExtension(b);P.trackIframeBridgeStart(b.extension);return b};c.setFrameworkAdaptor=function(b){this.frameworkAdaptor=b};c.getFrameworkAdaptor=function(){return this.frameworkAdaptor};c._cleanExtension=function(b){return k.pick(b,["id","addon_key","key","options","url"])};c.onIframeEstablished=
function(b){b._wrapper=function(a){b.call({},{$el:a.$el,extension:this._cleanExtension(a.extension)})}.bind(this);e.register("after:iframe-bridge-established",b._wrapper)};c.offIframeEstablished=function(a){if(a._wrapper)e.unregister("after:iframe-bridge-established",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");};c.onIframeUnload=function(a){var b=this;e.register("after:iframe-unload",function(c){a.call({},{$el:c.$el,extension:b._cleanExtension(c.extension)})})};
c.onPublicEventDispatched=function(a){a._wrapper=function(b){a.call({},{type:b.type,event:b.event,extension:this._cleanExtension(b.sender)})}.bind(this);e.register("after:event-public-dispatch",a._wrapper)};c.offPublicEventDispatched=function(a){if(a._wrapper)e.unregister("after:event-public-dispatch",a._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");};c.onKeyEvent=function(a,c,f,e){F.registerKeyEvent({extension_id:a,key:c,modifiers:f,callback:e})};
c.offKeyEvent=function(a,c,f,e){F.unregisterKeyEvent({extension_id:a,key:c,modifiers:f,callback:e})};c.onFrameClick=function(a){if("function"!==typeof a)throw Error("handleIframeClick must be a function");F.registerClickHandler(a)};c.offFrameClick=function(){F.unregisterClickHandler()};c.destroy=function(a){ea.notifyIframeDestroyed({id:a})};c.defineModule=function(a,c){Eb.defineCustomModule(a,c)};c.broadcastEvent=function(a,c,f){q.broadcast(a,c,f)};c.getExtensions=function(a){return p.getExtensions(a)};
c.trackDeprecatedMethodUsed=function(a,c){P.trackDeprecatedMethodUsed(a,c)};c.trackAnalyticsEvent=function(a,c){P.trackExternalEvent(a,c)};c.setJwtClockSkew=function(a){ra.setClockSkew(a)};c.isJwtExpired=function(a,c){return c?db.isJwtExpired(a):K.isJwtExpired(a)};c.hasJwt=function(a){return K.hasJwt(a)};c.setExtensionConfigurationOptions=function(a,c){sa.set(a,c)};c.getExtensionConfigurationOption=function(a){return sa.get(a)};return a}()),pb=/^ap-dialog-[0-9A-Za-z]+$/,Gb="small medium large xlarge fullscreen maximum".split(" "),
H=new (function(){function a(){}var c=a.prototype;c._renderHeaderCloseBtn=function(){var a=g("\x3ca /\x3e").addClass("aui-dialog2-header-close"),c=g("\x3cspan /\x3e").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");a.append(c);return a};c._renderFullScreenHeader=function(a,c){var b=g("\x3cdiv /\x3e").addClass("header-title-container aui-item expanded"),d=g("\x3cdiv /\x3e").append(g("\x3cspan /\x3e").addClass("header-title").text(c.header||""));b.append(d);a.append(b).append(this._renderHeaderActions(c.actions,
c.extension));return a};c._renderHeader=function(a){var b=g("\x3cheader /\x3e").addClass("aui-dialog2-header");if("fullscreen"===a.size)return this._renderFullScreenHeader(b,a);a.header&&(a=g("\x3ch2 /\x3e").addClass("aui-dialog2-header-main").text(a.header),b.append(a));b.append(this._renderHeaderCloseBtn());return b};c._renderHeaderActions=function(a,c){var b=g("\x3cdiv /\x3e").addClass("aui-item header-control-panel");a[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];
a[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(a,c).forEach(function(a){b.append(a)});return b};c._renderContent=function(a){var b=g("\x3cdiv /\x3e").addClass("aui-dialog2-content");a&&b.append(a);return b};c._renderFooter=function(a){var b=g("\x3cfooter /\x3e").addClass("aui-dialog2-footer");if("fullscreen"!==a.size){var c=this._renderFooterActions(a.actions,a.extension);b.append(c)}a.hint&&(a=g("\x3cdiv /\x3e").addClass("aui-dialog2-footer-hint").text(a.hint),
b.append(a));return b};c._renderActionButtons=function(a,c){var b=this,d=[];[].concat(a).forEach(function(a){d.push(b._renderDialogButton({text:a.text,name:a.name,type:a.type,additionalClasses:a.additionalClasses,custom:a.custom||!1,identifier:a.identifier,immutable:a.immutable,disabled:a.disabled||!1},c))});return d};c._renderFooterActions=function(a,c){var b=g("\x3cdiv /\x3e").addClass("aui-dialog2-footer-actions");this._renderActionButtons(a,c).forEach(function(a){b.append(a)});return b};c._renderDialogButton=
function(a,c){a.additionalClasses=a.additionalClasses||[];a.additionalClasses.push("ap-aui-dialog-button");a.custom&&a.additionalClasses.push("ap-dialog-custom-button");var b=v.render(a);b.extension=c;return b};c.render=function(a){var b=k.extend({},a);a=A.sanitizeOptions(a);var c=g("\x3csection /\x3e").attr({role:"dialog",id:"ap-dialog-"+a.id});c.attr("data-aui-modal","true");c.data({"aui-remove-on-hide":!0,extension:a.extension});c.addClass("aui-layer aui-dialog2 ap-aui-dialog2");0<=Gb.indexOf(a.size)&&
c.addClass("aui-dialog2-"+a.size);if("fullscreen"===a.size||"maximum"===a.size)a.chrome&&c.addClass("ap-header-controls"),c.addClass("aui-dialog2-maximum");c.append(this._renderContent(a.$content));a.chrome?(c.prepend(this._renderHeader({header:a.header,actions:a.actions,size:a.size})),c.append(this._renderFooter({extension:a.extension,actions:a.actions,hint:a.hint,size:a.size}))):c.addClass("aui-dialog2-chromeless");var e=AJS.dialog2(c);e._id=a.id;"fullscreen"===a.size&&(a.height=a.width="100%");
a.size&&"fullscreen"!==a.size||AJS.layer(c).changeSize(a.width,a.height);if(a.onHide)e.on("hide",a.onHide);e.show();e.$el.data("extension",a.extension);e.$el.data("originalOptions",b);return c};c.setIframeDimensions=function(a){G.resize("100%","100%",a)};c.getActive=function(){return D()};c.buttonIsEnabled=function(a){var b=D();if(b)return a=Z(a,b.$el),v.isEnabled(a)};c.buttonIsVisible=function(a){var b=D();if(b)return a=Z(a,b.$el),v.isVisible(a)};c.getByExtension=function(a){var b;if("function"===
typeof a)b=a;else{var c=Object.getOwnPropertyNames(a);b=function(b){var d=g(b).data("extension");return c.every(function(b){return d[b]===a[b]})}}return g(".ap-aui-dialog2").toArray().filter(b).map(function(a){return AJS.dialog2(a)})};c.addButton=function(a,c){c.custom=!0;var b=this._renderDialogButton(c,a),d=this.getByExtension({addon_key:a.addon_key,key:a.key})[0].$el;Oa(d).append(b);return d};return a}());e.register("iframe-bridge-established",function(a){if(a.extension.options.isDialog){var c,
b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?(c=b.close,b.setButtonDisabled("submit",!1)):(z.toggleButton({identifier:"submit",enabled:!0}),c=function(){z.close({dialog:D(),extension:a.extension})});a.extension.options.preventDialogCloseOnEscape||(F.registerKeyEvent({extension_id:a.extension.id,key:27,callback:c}),e.registerOnce("dialog-close",function(b){F.unregisterKeyEvent({extension_id:a.extension.id,key:27})}))}});e.register("dialog-close-active",function(a){var c=D();c&&z.close({customData:a.customData,
dialog:c,extension:a.extension})});e.register("dialog-close",function(a){a.dialog&&a.dialog.hide()});e.register("dialog-button-toggle",function(a){var c=D();c&&(c=Z(a.identifier,c.$el),ua.toggle(c,!a.enabled))});e.register("dialog-button-toggle-visibility",function(a){var c=D();c&&(c=Z(a.identifier,c.$el),ua.toggleVisibility(c,a.hidden))});e.register("button-clicked",function(a){a=a.$el;if(a.hasClass("ap-aui-dialog-button")){var c=a.parents(".ap-aui-dialog2"),b=c.find("iframe");b.length&&b[0].bridgeEstablished?
z.clickButton(v.getIdentifier(a),a,c.data("extension")):z.close({dialog:D(),extension:a.extension})}});g.fn&&(e.register("iframe-create",function(a){a.extension.options&&a.extension.options.isDialog&&H.setIframeDimensions(a.extension.$el)}),e.register("dialog-button-add",function(a){H.addButton(a.extension,a.button)}),e.register("host-window-resize",k.debounce(function(){g(".ap-aui-dialog2").each(function(a,c){var b=g(c),b=A.sanitizeOptions(b.data("originalOptions"));c.style.width=b.width;c.style.height=
b.height})},100)));F.registerWindowKeyEvent({keyCode:27,callback:function(){z.closeActive({customData:{},extension:null})}});var M=new (function(){function a(){}var c=a.prototype;c.render=function(a,c){a.options=a.options||{};c=c||{};a.options.isDialog=!0;a.options.dialogId=c.id;a.options.preventDialogCloseOnEscape=!1===c.closeOnEscape;a.options.hideIframeUntilLoad=!0;var b=va.createExtension(a);return H.render({extension:a,$content:b,chrome:c.chrome,width:c.width,height:c.height,size:c.size,header:c.header,
hint:c.hint,submitText:c.submitText,cancelText:c.cancelText,buttons:c.buttons,onHide:c.onHide})};c.getActiveDialog=function(){return H.getActive()};c.buttonIsEnabled=function(a){return H.buttonIsEnabled(a)};c.buttonIsVisible=function(a){return H.buttonIsVisible(a)};c.getByExtension=function(a){"string"===typeof a&&(a={id:a});return H.getByExtension(a)};return a}());e.register("dialog-extension-open",function(a){var c=a.extension,b=A.sanitizeOptions(a.options),d=n.getFrameworkAdaptor().getProviderByModuleName("dialog");
if(d){var f=function(a){var b=c.key,d=c.addon_key,f={button:{identifier:a.identifier,name:a.identifier,text:a.text}};0<=["submit","cancel"].indexOf(a.identifier)&&q.broadcast("dialog."+a.identifier,{addon_key:d,key:b},f);q.broadcast("dialog.button.click",{addon_key:d,key:b},f)};c.options.preventDialogCloseOnEscape=!1===b.closeOnEscape;b.actions.map(function(a){return a.onClick=f.bind(null,a)});d.create(b,c)}else M.render(a.extension,a.options)});var fb={};e.register("dialog-close",function(a){a.dialog&&
a.extension&&q.broadcast("dialog.close",{addon_key:a.extension.addon_key},a.customData)});e.register("dialog-button-click",function(a){var c={button:{name:v.getName(a.$el),identifier:v.getIdentifier(a.$el),text:v.getText(a.$el)}},b={addon_key:a.extension.addon_key,key:a.extension.key};window.AJS&&window.AJS.DarkFeatures&&window.AJS.DarkFeatures.isEnabled&&window.AJS.DarkFeatures.isEnabled("connect.js.dialog.idfilter")&&(b.id=a.extension.id);a.$el.hasClass("ap-dialog-custom-button")||q.broadcast("dialog."+
c.button.name,b,c);q.broadcast("dialog.button.click",b,c)});var C=function(){function a(a,c){c=k.last(arguments);var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");if(b)A.assertActiveDialogOrThrow(b,c._context.extension.addon_key),this.identifier=this.name=a;else{if(!M.getActiveDialog())throw Error("Failed to find an active dialog.");this.identifier=this.name=a;this.enabled=M.buttonIsEnabled(a);this.hidden=!M.buttonIsVisible(a)}}var c=a.prototype;c.enable=function(){this.setState({enabled:!0})};
c.disable=function(){this.setState({enabled:!1})};c.isEnabled=function(a){a=k.last(arguments);var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?a(!b.isButtonDisabled(this.identifier)):a(this.enabled)};c.toggle=function(){var a=n.getFrameworkAdaptor().getProviderByModuleName("dialog");a?a.toggleButton(this.identifier):this.setState({enabled:!this.enabled})};c.setState=function(a){var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?b.setButtonDisabled(this.identifier,!a.enabled):
(this.enabled=a.enabled,z.toggleButton({identifier:this.identifier,enabled:this.enabled}))};c.trigger=function(a){a=k.last(arguments);this.enabled&&z.dialogMessage({name:this.name,extension:a._context.extension})};c.isHidden=function(a){a=k.last(arguments);var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?a(b.isButtonHidden(this.identifier)):a(this.hidden)};c.hide=function(){this.setHidden(!0)};c.show=function(){this.setHidden(!1)};c.setHidden=function(a){var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");
b?b.setButtonHidden(this.identifier,a):(this.hidden=a,z.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden}))};return a}(),Hb={create:{constructor:function(a,c){c=k.last(arguments);var b=c._id,d=c._context.extension,d={addon_key:d.addon_key,key:a.key,options:k.pick(d.options,["customData","productContext"])};d.options.customData=a.customData;var f=A.moduleOptionsFromGlobal(d.addon_key,d.key);a=k.extend({},f||{},a);a.id=b;A.trackMultipleDialogOpening(d,a);T.open(d,a);this.customData=
a.customData;fb[b]=this}},close:function(a,c){c=k.last(arguments);var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?(A.assertActiveDialogOrThrow(b,c._context.extension.addon_key),q.broadcast("dialog.close",{addon_key:c._context.extension.addon_key},a),b.close()):(b=c._context.extension.options.isDialog?M.getByExtension(c._context.extension.id)[0]:M.getActiveDialog(),z.close({customData:a,dialog:b,extension:c._context.extension}))},getCustomData:function(a){a=k.last(arguments);var c=
fb[a._context.extension.options.dialogId];c?a(c.customData):a(void 0)},getButton:{constructor:C,enable:C.prototype.enable,disable:C.prototype.disable,toggle:C.prototype.toggle,isEnabled:C.prototype.isEnabled,trigger:C.prototype.trigger,hide:C.prototype.hide,show:C.prototype.show,isHidden:C.prototype.isHidden},createButton:{constructor:function(a,c){c=k.last(arguments);var b=n.getFrameworkAdaptor().getProviderByModuleName("dialog");b?(A.assertActiveDialogOrThrow(b,c._context.extension.addon_key),b.createButton({identifier:a.identifier,
text:a.text,hidden:!1,disabled:a.disabled||!1,onClick:function(){q.broadcast("dialog.button.click",{addon_key:c._context.extension.addon_key,key:c._context.extension.key},{button:{identifier:a.identifier,text:a.text}})}})):T.addUserButton({identifier:a.identifier,text:a.text},c._context.extension)}}};e.register("iframe-resize",function(a){G.resize(a.width,a.height,a.$el)});e.register("iframe-size-to-parent",function(a){var c=k.getIframeByExtensionId(a.extensionId);a.hideFooter?(c.addClass("full-size-general-page-no-footer"),
g("#footer").css({display:"none"}),a=g(window).height()-g("#header \x3e nav").outerHeight()):(a=g(window).height()-g("#header \x3e nav").outerHeight()-g("#footer").outerHeight()-1,c.removeClass("full-size-general-page-no-footer"),g("#footer").css({display:"block"}));e.dispatch("iframe-resize",{width:"100%",height:a+"px",$el:c})});e.register("hide-footer",function(a){a&&g("#footer").css({display:"none"})});window.addEventListener("resize",function(a){e.dispatch("host-window-resize",a)},!0);var ga=
{iframeResize:function(a,c,b){var d;d=b.extension_id?k.getIframeByExtensionId(b.extension_id):b;e.dispatch("iframe-resize",{width:a,height:c,$el:d,extension:b.extension})},sizeToParent:function(a,c){e.dispatch("iframe-size-to-parent",{hideFooter:c,extensionId:a})},hideFooter:function(a){e.dispatch("hide-footer",a)}},gb=k.debounce,ha={},N=[],ia={},Ib={getLocation:function(a){a=k.last(arguments);var c=L.getProvider("get-location");"function"===typeof c?a(c()):a(window.location.href)},resize:function(a,
c,b){b=k.last(arguments);var d=L.getProvider("addon");if(d)d.resize(a,c,b._context);else{var d=b._context.extension.id,f=b._context.extension.options;if(-1!==N.indexOf(d)||f&&f.isDialog)return!1;ha[d]||(ha[d]=gb(function(a,b,c){ga.iframeResize(a,b,c._context)},50));ha[d](a,c,b)}return!0},sizeToParent:gb(function(a,c){c=k.last(arguments);var b=L.getProvider("addon");b?b.sizeToParent(a,c._context):c._context.extension.options.isFullPage?(k.getIframeByExtensionId(c._context.extension_id).addClass("full-size-general-page"),
ga.sizeToParent(c._context.extension_id,a),ia[c._context.extension_id]={hideFooter:a}):k.getIframeByExtensionId(c._context.extension_id).addClass("full-size-general-page-fail")}),hideFooter:function(a){a&&ga.hideFooter(a)}};e.register("host-window-resize",function(a){Object.getOwnPropertyNames(ia).forEach(function(a){ga.sizeToParent(a,ia[a].hideFooter)})});e.register("after:iframe-unload",function(a){delete ha[a.extension.id];delete ia[a.extension.id];-1!==N.indexOf(a.extension.id)&&N.splice(N.indexOf(a.extension.id),
1)});e.register("before:iframe-size-to-parent",function(a){-1===N.indexOf(a.extensionId)&&N.push(a.extensionId)});var wa={hide:function(a){e.dispatch("inline-dialog-hide",{$el:a})},refresh:function(a){e.dispatch("inline-dialog-refresh",{$el:a})},hideTriggered:function(a,c){e.dispatch("inline-dialog-hidden",{extension_id:a,$el:c})},close:function(){e.dispatch("inline-dialog-close",{})},created:function(a){e.dispatch("inline-dialog-opened",{$el:a.$el,trigger:a.trigger,extension:a.extension})}},Qa="generic error warning success info hint".split(" "),
Ra=/^ap-message-[0-9A-fa-f]+$/,E={},Pa=!1,Jb={clear:function(a){a="ap-message-"+a._id;if(Ra.test(a)){var c=n.getFrameworkAdaptor().getProviderByModuleName("messages");c?c.clear(a):g("#"+a).closeMessage()}},onClose:function(a,c){c=k.last(arguments);var b=a._id,d=n.getFrameworkAdaptor().getProviderByModuleName("messages");if(d)d.onClose("ap-message-"+a._id,c);else E[b]&&(E[b].onCloseTrigger=c)},generic:I("generic"),error:I("error"),warning:I("warning"),success:I("success"),info:I("info"),hint:I("hint")},
Q={actionInvoked:function(a,c){e.dispatch("flag-action-invoked",{id:c,actionId:a})},open:function(a){e.dispatch("flag-open",{id:a})},close:function(a){e.dispatch("flag-close",{id:a})},closed:function(a){e.dispatch("flag-closed",{id:a})}},ma=new (function(){function a(){}var c=a.prototype;c.cleanKey=function(a){return(a=a.match(/^ap-flag-(.+)$/))&&a[1]?a[1]:null};c._toHtmlString=function(a){if("string"===g.type(a))return a;if("object"===g.type(a)&&a instanceof g)return a.html()};c._renderBody=function(a){a=
this._toHtmlString(a);a=g("\x3cdiv /\x3e").html(a);g("\x3cp /\x3e").addClass("ac-flag-actions").appendTo(a);return a.html()};c._renderActions=function(a,c,f){var b=a.find(".ac-flag-actions");f=f||{};var d;Object.getOwnPropertyNames(f).forEach(function(a){d=g("\x3ca /\x3e").attr("href","#").data({key:a,flag_id:c}).text(f[a]);b.append(d)},this);return a};c.render=function(a){sb();var b="ap-flag-"+a.id,c=AJS.flag({type:a.type,title:a.title,body:this._renderBody(a.body),close:a.close});c.setAttribute("id",
b);b=g(c);this._renderActions(b,a.id,a.actions);b.addClass("ac-aui-flag");b.close=c.close;return b};c.close=function(a){document.getElementById(a).close()};return a}()),Sa=!1;e.register("flag-close",function(a){ma.close(a.id)});var R={},hb=function(){function a(a,b){b=k.last(arguments);if("object"===typeof a){var c=b._id,f=n.getFrameworkAdaptor().getProviderByModuleName("flag");if(f){var e=[];"object"===typeof a.actions&&(e=Object.getOwnPropertyNames(a.actions).map(function(b){return{actionKey:b,
actionText:a.actions[b],executeAction:Q.actionInvoked.bind(null,b,c)}}));e={id:c,title:a.title,body:a.body,actions:e,onClose:Q.closed,close:a.close,type:(a.type||"info").toLowerCase()};this.flag=f.create(e);(f=L.getProvider("addon"))&&f.registerUnmountCallback&&f.registerUnmountCallback(this.close.bind(this),b._context)}else this.flag=ma.render({type:a.type,title:a.title,body:AJS.escapeHtml(a.body),actions:a.actions,close:a.close,id:c}),Q.open(this.flag.attr("id"));this.onTriggers={};this.extension=
b._context.extension;R[b._id]=this;b.call(null,b._id)}}a.prototype.close=function(){this.flag.close()};return a}();e.register("flag-closed",function(a){Ta(a.id,"flag.close");R[a.id]&&delete R[a.id]});e.register("flag-action-invoked",function(a){Ta(a.id,"flag.action",{actionIdentifier:a.actionId})});var Kb={create:{constructor:hb,close:hb.prototype.close}},na,aa;e.register("iframe-bridge-established",function(a){a.extension.options.isFullPage&&(window.addEventListener("scroll",Va),na=a.extension.id)});
e.register("iframe-destroyed",function(a){Ua()});e.register("iframe-unload",function(a){Ua()});var ib={itemSelected:function(a,c,b){e.dispatch("dropdown-item-selected",{id:a,item:c,extension:b})}};e.register("dropdown-item-selected",function(a){q.broadcast("dropdown-item-selected",{addon_key:a.extension.addon_key,key:a.extension.key},{dropdownId:a.id,item:a.item})});e.register("iframe-destroyed",function(a){var c=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.destroyByExtension(a.extension.extension_id)});
e.register("after:iframe-unload",function(a){var c=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.destroyByExtension(a.extension.extension_id)});var U=new (function(){function a(){this._webitems={};this._contentResolver=function(){}}var c=a.prototype;c.setContentResolver=function(a){this._contentResolver=a};c.requestContent=function(a){if(a.addon_key&&a.key)return this._contentResolver.call(null,k.extend({classifier:"json"},a))};c.getWebItemsBySelector=function(a){var b=this,c;Object.getOwnPropertyNames(this._webitems).some(function(d){d=
b._webitems[d];return d.selector&&d.selector.trim()===a.trim()?(c=d,!0):!1});return c};c.setWebItem=function(a){return this._webitems[a.name]={name:a.name,selector:a.selector,triggers:a.triggers}};c._removeTriggers=function(a){var b=this,c=B.sanitizeTriggers(a.triggers);g(function(){g("body").off(c,a.selector,b._webitems[a.name]._on)});delete this._webitems[a.name]._on};c._addTriggers=function(a){var b=B.sanitizeTriggers(a.triggers);a._on=function(b){b.preventDefault();var c=g(b.target).closest(a.selector),
d=B.getConfigFromTarget(c),d=d&&d.url?d.url:void 0,c={addon_key:B.getExtensionKey(c),key:B.getKey(c),options:B.getOptionsForWebItem(c),url:d};xa.webitemInvoked(a,b,c)};g(function(){g("body").on(b,a.selector,a._on)})};return a}());e.register("webitem-added",function(a){U._addTriggers(a.webitem)});e.register("content-resolver-register-by-extension",function(a){U.setContentResolver(a.callback)});document.addEventListener("aui-responsive-menu-item-created",function(a){var c=a.detail.originalItem.querySelector('a[class*\x3d"ap-"]');
if(c){var b=a.detail.newItem.querySelector("a");[].slice.call(c.classList).forEach(function(a){/^ap-/.test(a)&&b.classList.add(a)})}});var xa={addWebItem:function(a){if(U.getWebItemsBySelector(a.selector))return!1;a=U.setWebItem(a);e.dispatch("webitem-added",{webitem:a})},webitemInvoked:function(a,c,b){e.dispatch("webitem-invoked:"+a.name,{webitem:a,event:c,extension:b})}},Lb={addExtension:function(a){e.dispatch("inline-dialog-extension",{$el:a.$el,extension:a.extension})}},V=new (function(){function a(){}
var c=a.prototype;c.resize=function(a){var b=k.stringToDimension(a.width),c=k.stringToDimension(a.height),e=a.$el.find(".contents");1===e.length&&(e.css({width:b,height:c}),wa.refresh(a.$el))};c.refresh=function(a){a[0].popup.reset()};c._getInlineDialog=function(a){return AJS.InlineDialog(a)};c._renderContainer=function(){return g("\x3cdiv /\x3e").addClass("aui-inline-dialog-contents")};c._displayInlineDialog=function(a){wa.created({$el:a.$el,trigger:a.trigger,extension:a.extension})};c.hideInlineDialog=
function(a){a.hide()};c.closeInlineDialog=function(){g(".aui-inline-dialog").filter(function(){return 0<g(this).find(".ap-iframe-container").length}).hide()};c.render=function(a){var b=this,c=g(document.getElementById("inline-dialog-"+a.id));0!==c.length&&c.remove();return AJS.InlineDialog(a.bindTo,a.id,function(c,d,e){c.append(a.$content);b._displayInlineDialog({extension:a.extension,$el:c,trigger:d});e()},a.inlineDialogOptions)};return a}());e.register("iframe-resize",function(a){var c=a.$el.parents(".aui-inline-dialog");
1===c.length&&V.resize({width:a.width,height:a.height,$el:c})});e.register("inline-dialog-refresh",function(a){V.refresh(a.$el)});e.register("inline-dialog-hide",function(a){V.hideInlineDialog(a.$el)});e.register("inline-dialog-close",function(a){V.closeInlineDialog()});var Mb=["mouseover","click"],W=new (function(){function a(){this._inlineDialogWebItemSpec={name:"inline-dialog",selector:".ap-inline-dialog",triggers:Mb};this._inlineDialogWebItems={}}var c=a.prototype;c.getWebItem=function(){return this._inlineDialogWebItemSpec};
c._createInlineDialog=function(a){return V.render({extension:a.extension,id:a.id,bindTo:a.$target,$content:g("\x3cdiv /\x3e"),inlineDialogOptions:a.extension.options})};c.triggered=function(a){if("click"===a.event.type||a.extension.options.onHover){var b=g(a.event.currentTarget),c=b.data("inline-dialog-target-uid");this._createInlineDialog({id:c,extension:a.extension,$target:b,options:a.extension.options||{}}).show()}};c.opened=function(a){var b=a.$el.find("iframe");if(b&&1===b.length&&(b=b.attr("src"),
0<b.length)){var c=K.hasJwt(b);if(c&&!K.isJwtExpired(b)||!c)return!1}b=U.requestContent(a.extension);if(!b)return console.warn("no content resolver found"),!1;b.then(function(b){b.options=b.options||{};k.extend(b.options,{autoresize:!0,widthinpx:!0});Lb.addExtension({$el:a.$el,extension:b})});return!0};c.addExtension=function(a){var b=va.createExtension(a.extension);a.$el.empty().append(b)};c.createIfNotExists=function(a){a=g(a.event.currentTarget);var b=a.data("inline-dialog-target-uid");b||(b=B.uniqueId(),
a.data("inline-dialog-target-uid",b))};return a}()),ya=W.getWebItem();e.register("before:webitem-invoked:"+ya.name,function(a){W.createIfNotExists(a)});e.register("webitem-invoked:"+ya.name,function(a){W.triggered(a)});e.register("inline-dialog-opened",function(a){W.opened(a)});e.register("inline-dialog-extension",function(a){W.addExtension(a)});xa.addWebItem(ya);var Nb=["click"],Ob={chrome:!0},za=new (function(){function a(){this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:Nb}}var c=
a.prototype;c.getWebItem=function(){return this._dialogWebItem};c._dialogOptions=function(a){return k.extend({},Ob,a||{})};c.triggered=function(a){var b=g(a.event.currentTarget).data("dialog-target-uid"),c=this._dialogOptions(a.extension.options);c.id=b;T.open(a.extension,c)};c.createIfNotExists=function(a){a=g(a.event.currentTarget);var b=a.data("dialog-target-uid");b||(b=B.uniqueId(),a.data("dialog-target-uid",b))};return a}()),Aa=za.getWebItem();e.register("webitem-invoked:"+Aa.name,function(a){za.triggered(a)});
e.register("before:webitem-invoked:"+Aa.name,za.createIfNotExists);xa.addWebItem(Aa);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.2.14");p.defineModule("messages",Jb);p.defineModule("flag",Kb);p.defineModule("dialog",Hb);p.defineModule("inlineDialog",{hide:function(a){a=k.last(arguments);var c=n.getFrameworkAdaptor().getProviderByModuleName("inlineDialog");c?c.hide(a._context):wa.close()}});p.defineModule("env",Ib);p.defineModule("events",{emit:function(a){for(var c=arguments.length,
b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];c=k.last(b);b=k.first(b,-1);q.broadcast(a,{addon_key:c._context.extension.addon_key},b)},emitPublic:function(a){for(var c=arguments.length,b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];c=k.last(b)._context.extension;b=k.first(b,-1);q.broadcastPublic(a,b,c)}});p.defineModule("_analytics",{trackDeprecatedMethodUsed:function(a,c){c=k.last(arguments);P.trackDeprecatedMethodUsed(a,c._context.extension)}});p.defineModule("scrollPosition",{getPosition:function(a){a=
k.last(arguments);if(a._context.extension.options.isFullPage){var c=k.getIframeByExtensionId(a._context.extension_id).offset(),b=g(window);a({scrollY:b.scrollTop()-c.top,scrollX:b.scrollLeft()-c.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(a,c){c=k.last(arguments);if(c._context.extension.options&&c._context.extension.options.isFullPage){var b=k.getIframeByExtensionId(c._context.extension_id).offset();"number"===typeof a&&(document.documentElement.scrollTop=
b.top+a)}}});p.defineModule("dropdown",{create:function(a,c){c=k.last(arguments);if("object"===typeof a){var b=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");if(b){var d=tb(a.list),d={dropdownId:a.dropdownId,dropdownGroups:d,dropdownItemNotifier:function(a){ib.itemSelected(a.dropdownId,a.item,c._context.extension)}};b.create(d,c._context);return d}}},showAt:function(a,c,b,d){var e=k.last(arguments),g={left:0,top:0},l=document.getElementById(e._context.extension_id);l?g=l.getBoundingClientRect():
console.error("ACJS: no iframe found for dropdown");(l=n.getFrameworkAdaptor().getProviderByModuleName("dropdown"))&&l.showAt({dropdownId:a,x:c,y:b,width:d},{iframeDimensions:g,onItemSelection:function(a,b){ib.itemSelected(a,b,e._context.extension)}})},hide:function(a){var c=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.hide(a)},itemDisable:function(a,c){var b=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");b&&b.itemDisable(a,c)},itemEnable:function(a,c){var b=n.getFrameworkAdaptor().getProviderByModuleName("dropdown");
b&&b.itemEnable(a,c)}});e.register("module-define-custom",function(a){p.defineModule(a.name,a.methods)});p.registerRequestNotifier(function(a){y.dispatch("bridge.invokemethod",{module:a.module,fn:a.fn,addonKey:a.addon_key,moduleKey:a.key})});return n});
}catch(e){WRMCB(e)};