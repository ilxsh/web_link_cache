(window.webpackJsonp=window.webpackJsonp||[]).push([[341],{"2DyF":function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n("RhWx"),i=n.n(a),o=n("tQaH"),r=n.n(o),c=n("VrFO"),s=n.n(c),l=n("Y9Ll"),d=n.n(l),u=n("N+ot"),m=n.n(u),p=n("AuHH"),g=n.n(p),v=n("1Pcy"),h=n.n(v),k=n("5Yy7"),f=n.n(k),b=n("KEM+"),y=n.n(b),w=n("ERkP"),S=n.n(w),N=function(e){function t(e){var n;return s()(this,t),n=m()(this,g()(t).call(this)),y()(h()(n),"showDialog",function(e,t,a){var o=n.nextKey;n.nextKey++;var c=S.a.createElement(e,r()({},t,{onClose:function(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n).onChildClose.apply(e,[o].concat(a))},onCloseComplete:function(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n).onChildCloseComplete.apply(e,[o].concat(a))}}),a);return n.setState(function(e){return{stack:[].concat(i()(e.stack),[{key:o,component:c,alive:!0,originalProps:{onClose:t.onClose,onCloseComplete:t.onCloseComplete}}])}}),function(){n.onChildClose(o)}}),n.nextKey=0,n.state={stack:e||[]},e&&e.forEach(function(e){n.nextKey=Math.max(n.nextKey,e.key+1)}),n}return f()(t,e),d()(t,[{key:"onChildClose",value:function(e){var t=this.state.stack.find(function(t){return t.key===e});if(t){if(t.originalProps.onClose){for(var n,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(n=t.originalProps).onClose.apply(n,i)}this.setState(function(e){return{stack:e.stack.map(function(e){return e===t?r()({},e,{alive:!1}):e})}})}}},{key:"onChildCloseComplete",value:function(e){var t=this.state.stack.find(function(t){return t.key===e});if(t){if(t.originalProps.onCloseComplete){for(var n,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(n=t.originalProps).onCloseComplete.apply(n,i)}this.setState(function(e){return{stack:e.stack.filter(function(e){return e!==t})}})}}}]),t}(n("lZoD").a)},"3Ve2":function(e,t,n){"use strict";var a=n("ddV6"),i=n.n(a),o=n("97Jx"),r=n.n(o),c=n("VrFO"),s=n.n(c),l=n("Y9Ll"),d=n.n(l),u=n("N+ot"),m=n.n(u),p=n("AuHH"),g=n.n(p),v=n("1Pcy"),h=n.n(v),k=n("5Yy7"),f=n.n(k),b=n("KEM+"),y=n.n(b),w=n("ERkP"),S=n.n(w),N=(n("aWzz"),n("Rj53")),I=n.n(N),E=n("lZoD"),C=n("/FQd"),B=n("KkZ4"),F=n("2DyF"),_=n("bJ0W"),W=n("3Z2R"),T=n("L21V"),D=n("PTiB"),P=n("eIKN"),A=S.a.createElement(T.b,{id:"restrictions-dialog.link.text",defaultMessage:"Restrictions",description:"Text on the link in actions menu that opens page restrictions dialog"}),O=Object(D.a)()(function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=m()(this,(e=g()(t)).call.apply(e,[this].concat(i))),y()(h()(n),"makeHandleClick",function(e){return function(){e.setIsOpen(!0),n.sendDialogOpenAnalyticsEvent()}}),n}return f()(t,e),d()(t,[{key:"sendDialogOpenAnalyticsEvent",value:function(){(0,this.props.createAnalyticsEvent)({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:"restrictionsDialogLink",attributes:{source:"v2",triggeredFrom:"actionsMenu",menuVersion:"v2"}}}).fire()}},{key:"render",value:function(){var e=this;return S.a.createElement(E.c,{to:[P.a]},function(t){var n={id:"bm-restrictions-link",onClick:e.makeHandleClick(t),label:A};return e.props.children(n)})}}]),t}(w.PureComponent)),M=n("UIW9"),V=n("PktU"),L=n("7wq/"),U=n.n(L),x=n("KsTJ"),j=n("RNvQ"),K=n.n(j),R=n("lyMi"),q=n.n(R),H=n("ITRw"),Q=n("7A9o"),G=n("0Dc1"),Y=n("+CY+");var $=function(e){function t(){return s()(this,t),m()(this,g()(t).apply(this,arguments))}return f()(t,e),d()(t,[{key:"createListener",value:function(e){var t=this;return function(){t.props.setActiveKeyboardShortcutHandler(function(){!function(e){var t="#"===e[0]?e:"#".concat(e),n=document.querySelector(t);n&&n.click()}(e)}),function(){var e=document.querySelector("#tools-menu-trigger");"true"===e.getAttribute("aria-expanded")||e.click()}()}}},{key:"render",value:function(){var e=this,t=this.props.keyboardShortcuts;return t.length>0?S.a.createElement(w.Fragment,null,t.map(function(t){var n=t.accelerator,a=t.itemId;return S.a.createElement(Y.a,{key:n,accelerator:n,listener:e.createListener(a)})})):null}}]),t}(w.PureComponent);function z(){var e=U()(["\n  border-bottom: 2px solid ",";\n  padding-bottom: 3px;\n  margin-bottom: 3px;\n\n  &:last-of-type {\n    border-bottom: 0;\n    padding-bottom: 0;\n    margin-bottom: 0;\n  }\n"]);return z=function(){return e},e}function J(){var e=U()(["\n  margin-left: 5px;\n"]);return J=function(){return e},e}$.displayName="Shortcuts";var Z=50,X={appearance:"subtle",iconBefore:S.a.createElement(q.a,null),className:"test-id-view-page-ellipsis-menu",id:"tools-menu-trigger"},ee=x.default.div(J()),te=x.default.div(z(),Q.colors.N40A),ne=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=m()(this,(e=g()(t)).call.apply(e,[this].concat(i))),y()(h()(n),"state",{isDialogOpen:!1}),y()(h()(n),"activeKeyboardShortcutHandler",null),y()(h()(n),"setActiveKeyboardShortcutHandler",function(e){n.activeKeyboardShortcutHandler=e}),y()(h()(n),"closeDialog",K()(function(){n.setState({isDialogOpen:!1})},Z)),y()(h()(n),"handleOpenChange",function(e,t){var a=e.isOpen;n.setState({isDialogOpen:a}),n.activeKeyboardShortcutHandler&&(n.activeKeyboardShortcutHandler(),n.activeKeyboardShortcutHandler=null),n.fireToggleAnalyticsEvent(t)}),y()(h()(n),"fireToggleAnalyticsEvent",function(e){e.update({data:{action:"clicked",actionSubject:"moreIcon",source:"moreActions",attributes:{componentVersion:"v2"}},type:"sendTrackEvent"}).fire()}),n}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.closeDialog)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.closeDialog)}},{key:"render",value:function(){var e=this.props,t=e.itemSections,n=e.keyboardShortcuts,a=this.state.isDialogOpen;return S.a.createElement(w.Fragment,null,S.a.createElement(ee,null,S.a.createElement($,{keyboardShortcuts:n,setActiveKeyboardShortcutHandler:this.setActiveKeyboardShortcutHandler}),S.a.createElement(H.a,{appearance:"tall",triggerType:"button",triggerButtonProps:X,position:"bottom right",isOpen:a,onOpenChange:this.handleOpenChange,shouldFlip:!1},t.map(function(e,t){return S.a.createElement(te,{key:t},e)}))),S.a.createElement(G.a,{subject:"content-tools"}))}}]),t}(w.PureComponent);y()(ne,"defaultProps",{keyboardShortcuts:[]}),ne.displayName="ContentToolsComponent";var ae=n("1esp"),ie=function(e){function t(){return s()(this,t),m()(this,g()(t).apply(this,arguments))}return f()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.onClick,a=e.url,i=e.id,o=e.className,r=e.innerRef;return S.a.createElement(ae.a,{className:o,id:i,href:a,onClick:n},"string"==typeof t?S.a.createElement("span",{ref:r,"data-test-id":"content-item-label",dangerouslySetInnerHTML:{__html:t}}):t)}}]),t}(w.PureComponent);ie.displayName="ContentToolsItemClass";var oe=S.a.forwardRef(function(e,t){return S.a.createElement(ie,r()({innerRef:t},e))});oe.displayName="ContentToolsItem",n.d(t,"a",function(){return re});var re=function(e){function t(){var e,n;s()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=m()(this,(e=g()(t)).call.apply(e,[this].concat(i))),y()(h()(n),"resolvedInlineCommentsItemRef",S.a.createRef()),y()(h()(n),"makeLinkToThisPageDialogOpener",function(e,t){return function(){e.showDialog(_.a,{contentId:t})}}),y()(h()(n),"makeInlineCommentsDialogOpener",function(e,t,n){return function(){e.showDialog(V.b,{spaceKey:t,contentId:n})}}),n}return f()(t,e),d()(t,[{key:"splitInSections",value:function(e){return e?I()(e,"section"):{}}},{key:"fireLinkToThisPageDialogV1Analytic",value:function(){Object(B.getAnalyticsWebClient)().then(function(e){e.sendScreenEvent({name:"linkToThisPageDialog",attributes:{version:1}})})}},{key:"createMenuItems",value:function(e,t,n,a){var i=this,o=this.props,c=o.spaceKey,s=o.contentId,l=this.splitInSections(e),d=[],u=[];return(t||Object.keys(l)).forEach(function(e){d.push(l[e].map(function(e){if(n["confluence.frontend.resolved-inline-comments-dialog.v2"]&&"view-resolved-comments"===e.id)return S.a.createElement(oe,{id:"bm-resolved-inline-comments",key:e.completeKey,label:S.a.createElement("span",null,e.label," ",S.a.createElement(V.a,{contentId:s})),ref:i.resolvedInlineCommentsItemRef,onClick:i.makeInlineCommentsDialogOpener(a,c,s)});if(n["confluence.frontend.restrictions-dialog.v2"]&&"action-page-permissions-link"===e.id)return S.a.createElement(O,{key:e.completeKey},function(e){return S.a.createElement(oe,e)});if("link-to-page-link"===e.id){if(e.url="",e.urlWithoutContextPath="",u.push({accelerator:"k",itemId:e.id}),n["confluence.frontend.link.to.page.v2"])return S.a.createElement(oe,r()({key:e.completeKey},e,{onClick:i.makeLinkToThisPageDialogOpener(a,s)}));e.onClick=i.fireLinkToThisPageDialogV1Analytic}return"view-attachments-link"===e.id&&u.push({accelerator:"t",itemId:e.id}),e.className=e.styleClass,S.a.createElement(oe,r()({key:e.completeKey},e))}))}),[d,u]}},{key:"render",value:function(){var e=this,t=this.props,n=t.spaceKey,a=t.contentId,o=t.version;return S.a.createElement(w.Fragment,null,S.a.createElement(M.a,{subject:"content-tools",markBeforeMount:!0}),S.a.createElement(E.c,{to:[F.a]},function(t){return S.a.createElement(C.a,null,function(r){var c=r.featureFlags;return S.a.createElement(w.Fragment,null,S.a.createElement(W.a,{tagName:"span",location:"system.content.action",hasMultipleSections:!0,contentId:a,version:o},function(n){var a=n.webItems,o=n.webSections,r=a;c["confluence.frontend.remove.page-information"]&&(r=a.filter(function(e){return"view-page-info-link"!==e.id}));var s=e.createMenuItems(r,o,c,t),l=i()(s,2),d=l[0],u=l[1];return S.a.createElement(ne,{itemSections:d,keyboardShortcuts:u})}),c["confluence.frontend.resolved-inline-comments-dialog.v2"]?S.a.createElement(V.c,{spaceKey:n,contentId:a,resolvedInlineCommentsItemRef:e.resolvedInlineCommentsItemRef}):null)})}))}}]),t}(w.PureComponent);y()(re,"defaultProps",{version:null}),re.displayName="ContentTools"},"3Z2R":function(e,t,n){"use strict";var a=n("tQaH"),i=n.n(a),o=n("VrFO"),r=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("N+ot"),d=n.n(l),u=n("AuHH"),m=n.n(u),p=n("5Yy7"),g=n.n(p),v=n("KEM+"),h=n.n(v),k=n("ERkP"),f=n.n(k),b=(n("aWzz"),n("kFJ8")),y=n("2srY"),w=n.n(y),S=n("yjkv"),N=n.n(S),I=n("jLkM"),E=n.n(I),C=function(e){function t(){return r()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.webItems,n=e.onLoad;n&&n({webItems:t})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.tagName,a=e.className,i=e.style,o=e.children,r=e.webItems,c=e.webSections,s={"data-webitem-location":e.location,"data-content-id":e.contentId,children:"function"==typeof o?o({webItems:r,webSections:c}):null};return t&&(s.id=t),a&&(s.className=a),i&&(s.style=i),f.a.createElement(n,s)}}]),t}(k.Component);h()(C,"defaultProps",{tagName:"div"}),C.displayName="WebItemLocationComponent";var B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"webItemsQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"location"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"locations"}},type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"version"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webItemSections"},arguments:[{kind:"Argument",name:{kind:"Name",value:"location"},value:{kind:"Variable",name:{kind:"Name",value:"location"}}},{kind:"Argument",name:{kind:"Name",value:"locations"},value:{kind:"Variable",name:{kind:"Name",value:"locations"}}},{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}},{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}},{kind:"Argument",name:{kind:"Name",value:"version"},value:{kind:"Variable",name:{kind:"Name",value:"version"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"styleClass"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"completeKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasCondition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"icon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"params"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"moduleKey"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"section"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"styleClass"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tooltip"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"urlWithoutContextPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:669,source:{body:"\n  query webItemsQuery(\n    $location: String\n    $locations: [String]\n    $contentId: ID\n    $spaceKey: String\n    $version: Int\n  ) {\n    webItemSections(\n      location: $location\n      locations: $locations\n      contentId: $contentId\n      key: $spaceKey\n      version: $version\n    ) {\n      id\n      label\n      styleClass\n      items {\n        accessKey\n        completeKey\n        hasCondition\n        id\n        icon {\n          path\n        }\n        params {\n          key\n          value\n        }\n        label\n        moduleKey\n        section\n        styleClass\n        tooltip\n        url\n        urlWithoutContextPath\n        weight\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};n.d(t,"a",function(){return F});var F=function(e){function t(){return r()(this,t),d()(this,m()(t).apply(this,arguments))}return g()(t,e),s()(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.children,a=e.onLoad,o=e.hasMultipleSections,r=e.renderWhenLoading,c=e.allowedWebItems,s=e.notAllowedWebItems,l=e.networkOnly,d=e.spaceKey,u=e.contentId,m=e.id,p=e.className,g=e.style,v=e.tagName,h=e.version,k={location:Array.isArray(t)?null:t,locations:Array.isArray(t)?t:[],contentId:u||null,spaceKey:d||null,version:h||null};return f.a.createElement(b.d,{query:B,variables:k,fetchPolicy:l?"network-only":"cache-first"},function(e){var l=e.data,d=e.loading;if(e.error)return null;if(r&&d)return"function"==typeof n?n({loading:d}):null;var u=(w()(l,"webItemSections")||[]).reduce(function(e,t){return e.concat((t.items||[]).map(function(e){return i()({},e,{parentSection:{label:t.label||t.styleClass}})}))},[]);u=N()(u,"completeKey"),c&&(u=u.filter(function(e){return c.includes(e.completeKey)})),s&&(u=u.filter(function(e){return!s.includes(e.completeKey)})),u.forEach(function(e){var t={};if(Array.isArray(e.params)&&(e.params.forEach(function(e){t[e.key]=e.value}),e.params=t),e.section&&-1!==e.section.indexOf("/")){var n=e.section.split("/");e.webSection=n[1]}});var h=[];return o&&(h=E()(u.map(function(e){return e.section}))),u.sort(function(e,t){return e.weight-t.weight==0?e.label.localeCompare(t.label):e.weight-t.weight}),f.a.createElement(C,{id:m,className:p,style:g,tagName:v,location:t,webItems:u,webSections:h,onLoad:a},n)})}}]),t}(k.Component);h()(F,"defaultProps",{networkOnly:!1}),F.displayName="WebItemLocation"},"6ibr":function(e,t,n){(t=e.exports=n("RDo7")(!1)).push([e.i,".WebItemButtonList_pageButtons_3i-{vertical-align:middle}.WebItemButtonList_pageButtons_3i- .aui-icon~span{display:none}.WebItemButtonList_pageButtons_3i- .action-page-favourite.aui-button,.WebItemButtonList_pageButtons_3i- .aui-button~.aui-button,.WebItemButtonList_pageButtons_3i- .edit.aui-button,.WebItemButtonList_pageButtons_3i- .watch-content-button.aui-button,.WebItemButtonList_pageButtons_3i- .webitem.aui-button{width:40px!important;overflow:hidden!important;color:transparent!important;border-left-width:1px!important;position:relative!important}.WebItemButtonList_pageButtons_3i- .action-page-favourite.aui-button:active,.WebItemButtonList_pageButtons_3i- .action-page-favourite.aui-button:focus,.WebItemButtonList_pageButtons_3i- .action-page-favourite.aui-button:hover,.WebItemButtonList_pageButtons_3i- .action-page-favourite.aui-button:hover:active,.WebItemButtonList_pageButtons_3i- .aui-button~.aui-button:active,.WebItemButtonList_pageButtons_3i- .aui-button~.aui-button:focus,.WebItemButtonList_pageButtons_3i- .aui-button~.aui-button:hover,.WebItemButtonList_pageButtons_3i- .aui-button~.aui-button:hover:active,.WebItemButtonList_pageButtons_3i- .edit.aui-button:active,.WebItemButtonList_pageButtons_3i- .edit.aui-button:focus,.WebItemButtonList_pageButtons_3i- .edit.aui-button:hover,.WebItemButtonList_pageButtons_3i- .edit.aui-button:hover:active,.WebItemButtonList_pageButtons_3i- .watch-content-button.aui-button:active,.WebItemButtonList_pageButtons_3i- .watch-content-button.aui-button:focus,.WebItemButtonList_pageButtons_3i- .watch-content-button.aui-button:hover,.WebItemButtonList_pageButtons_3i- .watch-content-button.aui-button:hover:active,.WebItemButtonList_pageButtons_3i- .webitem.aui-button:active,.WebItemButtonList_pageButtons_3i- .webitem.aui-button:focus,.WebItemButtonList_pageButtons_3i- .webitem.aui-button:hover,.WebItemButtonList_pageButtons_3i- .webitem.aui-button:hover:active{margin-left:0!important}.WebItemButtonList_metadataButtons_1iF{margin-left:10px;display:inline-block;vertical-align:middle}.WebItemButtonList_metadataButtons_1iF .aui-button~.aui-button:active,.WebItemButtonList_metadataButtons_1iF .aui-button~.aui-button:focus,.WebItemButtonList_metadataButtons_1iF .aui-button~.aui-button:hover,.WebItemButtonList_metadataButtons_1iF .aui-button~.aui-button:hover:active{margin-left:0!important}#content-metadata-jira:before{position:relative;top:2px}",""]),t.locals={pageButtons:"WebItemButtonList_pageButtons_3i-",metadataButtons:"WebItemButtonList_metadataButtons_1iF"}},"7Uqs":function(e,t,n){"use strict";var a=n("VrFO"),i=n.n(a),o=n("Y9Ll"),r=n.n(o),c=n("N+ot"),s=n.n(c),l=n("AuHH"),d=n.n(l),u=n("1Pcy"),m=n.n(u),p=n("5Yy7"),g=n.n(p),v=n("KEM+"),h=n.n(v),k=n("2srY"),f=n.n(k),b=n("kFJ8"),y=(n("aWzz"),n("UIW9")),w=n("ERkP"),S=n.n(w),N=n("/FQd"),I=n("PTiB"),E=n("llcG"),C=n("L21V"),B=n("0Dc1"),F=n("+CY+"),_=n("609a"),W=n.n(_),T=n("ttix"),D=n.n(T),P=n("yTLO"),A=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),h()(m()(n),"handleFavouriteClick",function(){var e=n.props,t=e.contentId,a=e.favouritePage,i=e.isFavouritedByCurrentUser,o=e.unfavouritePage;i?o({variables:{pageId:t}}):a({variables:{pageId:t}})}),n}return g()(t,e),r()(t,[{key:"render",value:function(){var e=this.props.isFavouritedByCurrentUser;return S.a.createElement(w.Fragment,null,S.a.createElement(F.a,{accelerator:"f",listener:this.handleFavouriteClick}),S.a.createElement(P.a,{tag:"span",content:e?S.a.createElement(C.b,{id:"favourite-button.pageheader.unfavourite.tooltip",defaultMessage:"Unsave (f)",description:"Verb: to unfavourite a page"}):S.a.createElement(C.b,{id:"favourite-button.pageheader.favourite.tooltip",defaultMessage:"Save for later (f)",description:"Verb: to favourite a page"})},S.a.createElement(w.Fragment,null,S.a.createElement(E.a,{"data-test-id":"page-favourite-button",appearance:"subtle",onClick:this.handleFavouriteClick,iconBefore:e?S.a.createElement(W.a,{label:"StarFilledIcon"}):S.a.createElement(D.a,{label:"StarIcon"})}),S.a.createElement(B.a,{subject:"favourite-button",details:{isFavouritedByCurrentUser:e}}))))}}]),t}(w.PureComponent);A.displayName="FavouriteButtonComponent";var O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FavouriteButtonFavouriteMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favouritePage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"favouritePageInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:326,source:{body:"\n  mutation FavouriteButtonFavouriteMutation($pageId: ID!) {\n    favouritePage(favouritePageInput: { pageId: $pageId }) {\n      content {\n        id\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FavouriteButtonQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:360,source:{body:"\n  query FavouriteButtonQuery($pageId: ID!) {\n    content(id: $pageId) {\n      nodes {\n        id\n        type\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n        operations {\n          operation\n          targetType\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FavouriteButtonUnfavouriteMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfavouritePage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"favouritePageInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:330,source:{body:"\n  mutation FavouriteButtonUnfavouriteMutation($pageId: ID!) {\n    unfavouritePage(favouritePageInput: { pageId: $pageId }) {\n      content {\n        id\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};n.d(t,"a",function(){return U});var L=function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),h()(m()(n),"fireFavouritePageAnalyticsEvent",function(e){n.fireAnalyticsEvent("created",e)}),h()(m()(n),"fireUnfavouritePageAnalyticsEvent",function(e){n.fireAnalyticsEvent("deleted",e)}),h()(m()(n),"hasReadPermission",function(e,t){return Boolean(e&&e.filter(function(e){return e.targetType===t&&"read"===e.operation}).length)}),n}return g()(t,e),r()(t,[{key:"getAnalyticsData",value:function(e,t){return{action:e,actionSubject:"favouritePage",objectId:this.props.contentId,source:"FavouriteButton",attributes:{componentVersion:"v2",pageType:t}}}},{key:"fireAnalyticsEvent",value:function(e,t){this.props.createAnalyticsEvent({type:"sendTrackEvent",data:this.getAnalyticsData(e,t)}).fire()}},{key:"render",value:function(){var e=this,t=this.props.contentId,n={pageId:t};return S.a.createElement(w.Fragment,null,S.a.createElement(y.a,{subject:"favourite-button",markBeforeMount:!0}),S.a.createElement(N.a,null,function(a){return a.userId?S.a.createElement(b.d,{query:M,variables:n},function(a){var i=a.data,o=a.loading,r=a.error;if(o||r)return null;var c=f()(i,"content.nodes[0].type");if(!e.hasReadPermission(f()(i,"content.nodes[0].operations"),c))return null;var s=f()(i,"content.nodes[0].metadata.currentuser.favourited.isFavourite");return S.a.createElement(b.c,{mutation:O,onCompleted:function(){return e.fireFavouritePageAnalyticsEvent(c)},refetchQueries:[{query:M,variables:n}]},function(a){return S.a.createElement(b.c,{mutation:V,onCompleted:function(){return e.fireUnfavouritePageAnalyticsEvent(c)},refetchQueries:[{query:M,variables:n}]},function(e){return S.a.createElement(A,{contentId:t,favouritePage:a,unfavouritePage:e,isFavouritedByCurrentUser:Boolean(s)})})})}):null}))}}]),t}(w.PureComponent);L.displayName="FavouriteButtonClass";var U=Object(I.a)()(L)},JeEl:function(e,t,n){"use strict";var a=n("97Jx"),i=n.n(a),o=n("VrFO"),r=n.n(o),c=n("Y9Ll"),s=n.n(c),l=n("N+ot"),d=n.n(l),u=n("AuHH"),m=n.n(u),p=n("1Pcy"),g=n.n(p),v=n("5Yy7"),h=n.n(v),k=n("KEM+"),f=n.n(k),b=(n("aWzz"),n("ERkP")),y=n.n(b),w=n("nnRT"),S=n.n(w),N=n("Rj53"),I=n.n(N),E=n("RNvQ"),C=n.n(E),B=n("O94r"),F=n.n(B),_=n("lZoD"),W=n("1BaG"),T=n.n(W),D=n("mc6X"),P=n.n(D),A=n("bQlP"),O=n("IGvV"),M=n("M2LZ"),V=n("/FQd"),L=n("2DyF"),U=n("KkZ4"),x=n("bJ0W"),j=n("7wq/"),K=n.n(j),R=n("L21V"),q=n("KsTJ"),H=n("llcG"),Q=n("PTiB"),G=n("eIKN");function Y(){var e=K()(["\n  display: block;\n  width: 100%;\n\n  > button {\n    background: none;\n    border: none;\n    border-radius: 0;\n    color: #333 !important;\n    outline: none;\n    height: 26px;\n    line-height: 20px;\n    padding: 3px 10px;\n    width: 100%;\n\n    span {\n      margin: 0 !important;\n    }\n\n    &:hover {\n      color: #fff !important;\n      background-color: #3572b0;\n    }\n  }\n"]);return Y=function(){return e},e}var $,z=q.default.div(Y()),J=Object(Q.a)()(function(e){function t(){var e,n;r()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=d()(this,(e=m()(t)).call.apply(e,[this].concat(i))),f()(g()(n),"makeHandleClick",function(e){return function(){e.setIsOpen(!0),n.sendDialogOpenAnalyticsEvent()}}),n}return h()(t,e),s()(t,[{key:"sendDialogOpenAnalyticsEvent",value:function(){(0,this.props.createAnalyticsEvent)({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:"restrictionsDialogLink",attributes:{source:"v2",triggeredFrom:"actionsMenu"}}}).fire()}},{key:"render",value:function(){var e=this;return y.a.createElement(_.c,{to:[G.a]},function(t){return y.a.createElement(z,{"data-test-id":"restrictionsDialogLinkContainer"},y.a.createElement(H.a,{onClick:e.makeHandleClick(t)},y.a.createElement(R.b,{id:"restrictions-dialog.link.text",defaultMessage:"Restrictions",description:"Text on the link in actions menu that opens page restrictions dialog"})))})}}]),t}(b.PureComponent)),Z=n("PktU"),X=n("oddG"),ee=n("nSLV"),te=n("zmgg"),ne=n.n(te);n.d(t,"a",function(){return ie});var ae=C()(function(e){return e()}),ie=Object(O.a)(ne.a)($=Object(M.b)(["wr!confluence.web.resources:deferred-dialog-loader"])($=function(e){function t(){var e;return r()(this,t),e=d()(this,m()(t).call(this)),f()(g()(e),"makeLinkToThisPageDialogOpener",function(e,t){return function(n){n.preventDefault(),ae(function(){e.showDialog(x.a,{contentId:t})})}}),f()(g()(e),"makeInlineCommentsDialogOpener",function(e,t,n){return function(a){a.preventDefault(),e.showDialog(Z.b,{spaceKey:t,contentId:n})}}),f()(g()(e),"fireOldLinkToThisPageDialogAnalyticsEvent",function(){ae(function(){Object(U.getAnalyticsWebClient)().then(function(e){e.sendScreenEvent({name:"linkToThisPageDialog",attributes:{version:1}})})})}),e.dropdownId="dropddown-".concat((new Date).getTime()),e}return h()(t,e),s()(t,[{key:"shouldComponentUpdate",value:function(e){return!S()(this.props,e)}},{key:"fireAnalyticsEvent",value:function(){Object(U.getAnalyticsWebClient)().then(function(e){e.sendTrackEvent({action:"clicked",actionSubject:"moreIcon",source:"moreActions",attributes:{componentVersion:"v1"}})})}},{key:"_renderSection",value:function(e,t,n){var a=this,o=this.props,r=o.spaceKey,c=o.contentId;return t&&t.length?(e=e.split("/")[1]||"leading",y.a.createElement(_.c,{key:"tools-menu-section-".concat(e),to:[L.a]},function(o){return y.a.createElement("div",{className:"aui-dropdown2-section"},y.a.createElement("ul",{id:"action-menu-".concat(e),className:"section-".concat(e)},t.map(function(e){var t={url:e.url,id:e.id,onClick:e.onClick,className:e.styleClass,params:e.params,disableIcon:!1,iconInfo:e.icon,label:e.label,tooltip:e.tooltip,iconStyle:{marginRight:5,verticalAlign:"middle"}};return n["confluence.frontend.resolved-inline-comments-dialog.v2"]&&e.id===ee.a.ACTION_MENU_RESOLVED_INLINE_COMMENTS?y.a.createElement("li",{key:e.completeKey},y.a.createElement(X.a,i()({},t,{id:"bm-resolved-inline-comments",label:y.a.createElement("span",null,t.label," ",y.a.createElement(Z.a,{contentId:c})),onClick:a.makeInlineCommentsDialogOpener(o,r,c)}))):n["confluence.frontend.restrictions-dialog.v2"]&&e.id===ee.a.ACTION_MENU_PAGE_RESTRICTIONS?y.a.createElement("li",{key:e.completeKey},y.a.createElement(J,null)):e.id===ee.a.LINK_TO_THIS_PAGE?n["confluence.frontend.link.to.page.v2"]?(delete t.className,y.a.createElement("li",{key:e.completeKey},y.a.createElement(X.a,i()({},t,{onClick:a.makeLinkToThisPageDialogOpener(o,c)})))):y.a.createElement("li",{key:e.completeKey},y.a.createElement(X.a,i()({},t,{onClick:a.fireOldLinkToThisPageDialogAnalyticsEvent}))):y.a.createElement("li",{key:e.completeKey},y.a.createElement(X.a,t))})))})):null}},{key:"_renderItems",value:function(e,t,n){var a=this;if(e){var i=this._splitInSections(e);return(t||Object.keys(i)).map(function(e){return a._renderSection(e,i[e],n)})}}},{key:"_splitInSections",value:function(e){return e?I()(e,"section"):{}}},{key:"render",value:function(){var e=this,t=this.props,n=t.spaceKey,a=t.contentId,i=t.webItems,o=t.webSections;return y.a.createElement(V.a,null,function(t){var r=t.featureFlags,c=i;return r[A.G]&&(c=i.filter(function(e){return"view-page-info-link"!==e.id})),y.a.createElement("div",{className:ne.a.root},y.a.createElement("div",{"data-test-id":"view-page-ellipsis-menu",id:"action-menu-link","aria-owns":e.dropdownId,className:F()(ne.a.dots,"aui-dropdown2-trigger","aui-dropdown2-trigger-arrowless","aui-button","aui-button-subtle"),onClick:e.fireAnalyticsEvent},y.a.createElement(P.a,{icon:"more"})),y.a.createElement(T.a,{id:e.dropdownId},y.a.createElement("div",{className:ne.a.toolsMenu},e._renderItems(c,o,r))),r["confluence.frontend.resolved-inline-comments-dialog.v2"]?y.a.createElement(Z.c,{spaceKey:n,contentId:a}):null)})}}]),t}(b.Component))||$)||$;ie.displayName="ToolsMenu"},LhZz:function(e,t,n){"use strict";n("aWzz");var a=n("ERkP"),i=n.n(a),o=n("O94r"),r=n.n(o),c=n("M6mc"),s=(n("R4fp"),function(e){var t=e.webItems,n=e.actions,a=e.modifications,o=e.buttonType,s=e.className,l=e.disableIcons;return i.a.createElement(c.a,{actions:n,modifications:a,webItems:t,className:r()("aui-buttons",s),webItemClassName:r()(o,"aui-button"),disableIcons:l})});s.displayName="WebItemButtonList",s.displayName="WebItemButtonList",t.a=s},PktU:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return u});var a=n("VtSi"),i=n.n(a),o=n("cbiG"),r=n.n(o),c=n("x+QU"),s=n.n(c),l=s()({loader:function(){var e=r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1),n.e(0),n.e(29)]).then(n.bind(null,"9oDW"));case 2:return e.abrupt("return",e.sent.ResolvedInlineCommentsDialog);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),loading:function(){return null}});l.displayName="ResolvedInlineCommentsDialogLoader";var d=s()({loader:function(){var e=r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1),n.e(0),n.e(29),n.e(349)]).then(n.bind(null,"Oa7q"));case 2:return e.abrupt("return",e.sent.ResolvedInlineCommentsQueryRenderer);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),loading:function(){return null}});d.displayName="ResolvedInlineCommentsQueryRendererLoader";var u=s()({loader:function(){var e=r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(348).then(n.bind(null,"9nge"));case 2:return e.abrupt("return",e.sent.ResolvedInlineCommentsCounter);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),loading:function(){return null}});u.displayName="ResolvedInlineCommentsCounterLoader"},Ra5e:function(e,t,n){(t=e.exports=n("RDo7")(!1)).push([e.i,".ToolsMenu_root_1pt{display:inline-block;margin-left:5px;overflow:hidden;vertical-align:middle}.ToolsMenu_dots_1GZ.ToolsMenu_opened_2p1{border-radius:3px 3px 0 0;-webkit-box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1)}.ToolsMenu_wrapperSpinner_21p{height:20px}",""]),t.locals={root:"ToolsMenu_root_1pt",dots:"ToolsMenu_dots_1GZ",opened:"ToolsMenu_opened_2p1",wrapperSpinner:"ToolsMenu_wrapperSpinner_21p"}},Rzbp:function(e,t,n){"use strict";n.d(t,"a",function(){return A});var a,i,o,r=n("tQaH"),c=n.n(r),s=n("VrFO"),l=n.n(s),d=n("Y9Ll"),u=n.n(d),m=n("N+ot"),p=n.n(m),g=n("AuHH"),v=n.n(g),h=n("1Pcy"),k=n.n(h),f=n("5Yy7"),b=n.n(f),y=n("KEM+"),w=n.n(y),S=(n("aWzz"),n("ERkP")),N=n.n(S),I=n("O94r"),E=n.n(I),C=n("Jygk"),B=n.n(C),F=n("M2LZ"),_=n("IGvV"),W=n("M6mc"),T=n("ZW7r"),D=n.n(T),P=n("nSLV"),A=Object(_.a)(D.a)(a=Object(F.b)(["wr!com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources"])((o=i=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=p()(this,(e=v()(t)).call.apply(e,[this].concat(i))),w()(k()(n),"state",{grantAccessInitialised:!1}),n}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){this._initGrantAccessCheck(),this._initJiraMetadataCheck()}},{key:"shouldComponentUpdate",value:function(e){return e.webItems!==this.props.webItems}},{key:"componentDidUpdate",value:function(){this._initGrantAccessCheck(),this._initJiraMetadataCheck()}},{key:"_initGrantAccessCheck",value:function(){var e=this,t=this.hasWebItem(P.a.CONTENT_METADATA_PAGE_RESTRICTIONS);!t||t&&this.state.grantAccessInitialised||(this.setState({grantAccessInitialised:!0}),F.a.require("wr!com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources").then(function(){try{B.a.require("confluence-request-access-plugin/grant-access").init(c()({},e.props))}catch(e){console.error("Logging caught error while loading confluence-request-access-plugin/grant-access",e)}}))}},{key:"_initJiraMetadataCheck",value:function(){this.hasWebItem(P.a.CONTENT_METADATA_JIRA)&&F.a.require("wr!com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources")}},{key:"hasWebItem",value:function(e){return this.props.webItems.some(function(t){return t.id===e})}},{key:"render",value:function(){var e=this.props,t=e.webItems,n=e.id,a=e.className;return N.a.createElement(W.a,{className:E()(D.a.metadataButtons,a),id:n,webItems:t})}}]),t}(S.Component),w()(i,"defaultProps",{webItems:[]}),w()(i,"displayName","ViewPageMetadataWebItems"),a=o))||a)||a},S75A:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a,i=n("VrFO"),o=n.n(i),r=n("Y9Ll"),c=n.n(r),s=n("N+ot"),l=n.n(s),d=n("AuHH"),u=n.n(d),m=n("5Yy7"),p=n.n(m),g=(n("aWzz"),n("ERkP")),v=n.n(g),h=n("O94r"),k=n.n(h),f=n("IGvV"),b=n("M2LZ"),y=n("LhZz"),w=n("ZW7r"),S=n.n(w),N=Object(f.a)(S.a)(a=Object(b.b)(["wr!com.atlassian.confluence.plugins.share-page:mail-page-resources","wr!com.atlassian.confluence.plugins.confluence-invite-to-edit:view-resources","wr!com.atlassian.confluence.plugins.watch-button:watch-resources","wr!confluence.web.resources:manage-watchers","wr!confluence.web.resources:page-permissions-deferred-loader"])(a=function(e){function t(){return o()(this,t),l()(this,u()(t).apply(this,arguments))}return p()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.modifications,a=e.webItems,i=e.buttonType;return v.a.createElement(y.a,{actions:t,modifications:n,className:k()(S.a.pageButtons,this.props.className),webItems:a,buttonType:i})}}]),t}(g.Component))||a)||a;N.displayName="ViewPageTopWebItems"},VzPM:function(e,t,n){"use strict";var a=n("VrFO"),i=n.n(a),o=n("Y9Ll"),r=n.n(o),c=n("N+ot"),s=n.n(c),l=n("AuHH"),d=n.n(l),u=n("5Yy7"),m=n.n(u),p=n("KEM+"),g=n.n(p),v=n("ERkP"),h=n.n(v),k=(n("aWzz"),n("kFJ8")),f=n("2srY"),b=n.n(f),y=n("UIW9"),w=n("1Pcy"),S=n.n(w),N=n("7nmT"),I=n.n(N),E=n("L21V"),C=n("JGo4"),B=n.n(C),F=n("llcG"),_=n("yTLO"),W=n("0Dc1"),T=n("qdfj"),D=n("7M9M"),P=n("+CY+"),A=Object(E.f)({editIconLabel:{id:"edit-button.icon.edit.label",defaultMessage:"Edit Icon",description:"aria-label for the edit button content"}}),O=Object(T.a)(Object(E.g)(function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),g()(S()(n),"editButton",null),g()(S()(n),"handleButtonClick",function(e,t){var a=n.props,i=a.isFabricSupported,o=a.contentType;t.update({data:{action:"clicked",actionSubject:"editButton",attributes:{componentVersion:"v2",contentType:o,isFabricSupported:i},source:"editContentButton"},type:"sendTrackEvent"}).fire()}),g()(S()(n),"setEditButtonRef",function(e){n.editButton=e}),g()(S()(n),"clickButton",function(){n.editButton&&I.a.findDOMNode(n.editButton).click()}),n}return m()(t,e),r()(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.contentId,i=n.contentType,o=n.intl,r=n.isFabricSupported,c=n.spaceKey,s=n.toUrl,l="blogpost"===i;r?(e=l?D.EDIT_BLOG_V2:D.EDIT_PAGE_V2,t="fabric-edit-button"):e=l?D.EDIT_BLOG:D.EDIT_PAGE;var d=s(e.name,{contentId:a,spaceKey:c,contentType:l?"blog":"pages"});return h.a.createElement(v.Fragment,null,h.a.createElement(P.a,{accelerator:"e",listener:this.clickButton}),h.a.createElement(_.a,{tag:"span",content:h.a.createElement(E.b,{id:"edit-button.tooltip",defaultMessage:"Edit (e)",description:"tooltip for button to edit, and the shortcut key"})},h.a.createElement(F.a,{appearance:"subtle",href:d,iconBefore:h.a.createElement(B.a,{label:o.formatMessage(A.editIconLabel)}),ref:this.setEditButtonRef,onClick:this.handleButtonClick,id:"editPageLink","data-test-id":t})),h.a.createElement(W.a,{subject:"edit-button"}))}}]),t}(v.PureComponent))),M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EditButtonQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fabricEditorSupported"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:351,source:{body:"\n  query EditButtonQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        type\n        metadata {\n          frontend {\n            fabricEditorSupported\n          }\n        }\n        operations {\n          operation\n          targetType\n        }\n        space {\n          id\n          key\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};n.d(t,"a",function(){return V});var V=function(e){function t(){return i()(this,t),s()(this,d()(t).apply(this,arguments))}return m()(t,e),r()(t,[{key:"render",value:function(){var e=this.props.contentId;return h.a.createElement(v.Fragment,null,h.a.createElement(y.a,{subject:"edit-button",markBeforeMount:!0}),h.a.createElement(k.d,{query:M,variables:{contentId:e}},function(t){var n=t.data,a=t.loading,i=t.error;if(a||i)return null;var o=b()(n,"content.nodes[0].operations")||[],r=b()(n,"content.nodes[0].type");if(!(o.filter(function(e){var t=e.operation,n=e.targetType;return"update"===t&&n===r}).length>0))return null;var c=b()(n,"content.nodes[0].space.key"),s=b()(n,"content.nodes[0].metadata.frontend.fabricEditorSupported");return h.a.createElement(O,{contentId:e,contentType:r,spaceKey:c,isFabricSupported:s})}))}}]),t}(v.PureComponent);g()(V,"defaultProps",{isFabricSupported:!1}),V.displayName="EditContentButton"},ZW7r:function(e,t,n){var a=n("6ibr"),i=n("7l8p");"string"==typeof a&&(a=[[e.i,a,""]]),e.exports=a.locals||{},e.exports._getContent=function(){return a},e.exports._getCss=function(){return a.toString()},e.exports._insertCss=function(e){return i(a,e)}},bJ0W:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("x+QU"),i=n.n(a)()({loader:function(){return Promise.all([n.e(1),n.e(0),n.e(350)]).then(n.bind(null,"qavQ")).then(function(e){return e.LinkToThisPageDialog})},loading:function(){return null}});i.displayName="LinkToThisPageDialog"},gn9V:function(e,t,n){(t=e.exports=n("RDo7")(!1)).push([e.i,".ViewPageHeaderComponent_header_1yn{padding:25px 0 10px}.ViewPageHeaderComponent_content_3aY{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.ViewPageHeaderComponent_headerSticky_3TZ{padding:20px 0 0;background-color:#fff}.ViewPageHeaderComponent_headerSticky_3TZ>.ViewPageHeaderComponent_stickyBorder_1wn{margin:0 -10px;height:25px;border-bottom:1px solid #e9e9e9}.ViewPageHeaderComponent_headerSticky_3TZ.sticky-header{display:block;margin-top:0}.ViewPageHeaderComponent_title_3Ip{font-size:44px;color:#205081}.ViewPageHeaderComponent_breadcrumbs_2Gv{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding-right:40px;width:100%}.ViewPageHeaderComponent_navigationContainer_15E{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;margin-top:5px}@media print{.ViewPageHeaderComponent_navigationContainer_15E{display:none!important}}",""]),t.locals={header:"ViewPageHeaderComponent_header_1yn",content:"ViewPageHeaderComponent_content_3aY",headerSticky:"ViewPageHeaderComponent_headerSticky_3TZ",stickyBorder:"ViewPageHeaderComponent_stickyBorder_1wn",title:"ViewPageHeaderComponent_title_3Ip",breadcrumbs:"ViewPageHeaderComponent_breadcrumbs_2Gv",navigationContainer:"ViewPageHeaderComponent_navigationContainer_15E"}},itPT:function(e,t,n){var a=n("gn9V"),i=n("7l8p");"string"==typeof a&&(a=[[e.i,a,""]]),e.exports=a.locals||{},e.exports._getContent=function(){return a},e.exports._getCss=function(){return a.toString()},e.exports._insertCss=function(e){return i(a,e)}},k1KV:function(e,t,n){"use strict";n.r(t);var a,i,o,r=n("97Jx"),c=n.n(r),s=n("VrFO"),l=n.n(s),d=n("Y9Ll"),u=n.n(d),m=n("N+ot"),p=n.n(m),g=n("AuHH"),v=n.n(g),h=n("5Yy7"),k=n.n(h),f=n("KEM+"),b=n.n(f),y=n("ERkP"),w=n.n(y),S=n("uDfI"),N=(n("aWzz"),n("kFJ8")),I=n("Bud6"),E=n("L+/v"),C=n("+Prw"),B=n("1Pcy"),F=n.n(B),_=n("mc6X"),W=n.n(_),T=n("xBue"),D=n("IGvV"),P=n("7LQG"),A=n("bfgX"),O=n("7Uqs"),M=n("VzPM"),V=n("wifC"),L=n("KkZ4"),U=n("beEQ"),x=n("/FQd"),j=n("b7Qj"),K=n("3Ve2"),R=n("3nLK"),q=n("tsjR"),H=n("S75A"),Q=n("Rzbp"),G=n("JeEl"),Y=n("6lDt"),$=n("K2x6"),z=n("r+Ch"),J=n("itPT"),Z=n.n(J),X=n("s6Th"),ee={verticalAlign:"top",display:"inline-block"},te={display:"inline-block"},ne={display:"flex"},ae=[$.a.WATCH_BUTTON,$.a.PAGE_FAVOURITE,$.a.PAGE_UNFAVOURITE,$.a.EDIT_BUTTON],ie=Object(D.a)(Z.a)((o=i=function(e){function t(){var e,n;l()(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=p()(this,(e=v()(t)).call.apply(e,[this].concat(i))),b()(F()(n),"sendEditButtonAnalytics",function(e){var t=n.props.contentType,a=!0;e&&(a=!1),Object(L.getAnalyticsWebClient)().then(function(e){e.sendTrackEvent({action:"clicked",actionSubject:"button",source:"editContentButton",attributes:{componentVersion:"v1",contentType:t,isFabricSupported:a}})})}),b()(F()(n),"navigateToEditPage",function(e){var t=n.props,a=t.getEditorContent,i=t.isRequestingEditorContent,o=t.contentId,r=t.contentType;if(e.preventDefault(),!i){var c="confluence.".concat(r,".edit.collaborative.quick-view");z.a.start({key:c,isInitial:!1}),Object(A.a)("rte-collab-ready",function(){z.a.end({key:"".concat(c)})}),n.sendEditButtonAnalytics(!0),a(o)}}),n}return k()(t,e),u()(t,[{key:"getPageButtons",value:function(e){var t=this,n=this.props,a=n.contentId,i=n.isFabricEditorEnabled,o=n.contentType,r=n.isRequestingEditorContent,c=n.isEditEnabled,s=n.spaceKey,l=n.versionOverride,d=n.contentTitle,u="blogpost"===o,m=w.a.createElement(R.a,{tagName:"span",location:Y.a.PAGE_BUTTONS,notAllowedWebItems:e?ae:null,waitForSuperbatch:!0,contentId:a,version:l},function(e){var n=e.webItems;return n.forEach(function(e){e.completeKey===$.a.INVITE_TO_EDIT&&d&&(e.contentTitle=d)}),w.a.createElement(H.a,{actions:{"edit-page":t.navigateToEditPage,"edit-blogpost":t.navigateToEditPage},modifications:{"edit-page":{spinner:r},"edit-blogpost":{spinner:r}},webItems:n,buttonType:"aui-button-subtle"})});return e?w.a.createElement("span",{style:te},w.a.createElement("span",{"data-test-id":"content-buttons",style:ne},w.a.createElement(M.a,{contentId:a}),w.a.createElement(O.a,{contentId:a}),w.a.createElement(V.a,{contentId:a}),m)):w.a.createElement(y.Fragment,null,i&&c?w.a.createElement(T.a,{to:"".concat(P.a,"/spaces/").concat(s,"/").concat(u?"blog":"pages","/edit-v2/").concat(a),onClick:this.sendEditButtonAnalytics},w.a.createElement("span",{"data-test-id":"fabric-edit-button",id:"editPageLink",className:"edit full-load aui-button-subtle aui-button"},w.a.createElement(W.a,{icon:"edit-small"}))):null,m)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mode,a=t.spaceKey,i=t.contentId,o=t.contentTitle,r=t.isSticky,c=t.className,s=t.style,l=t.versionOverride;switch(n){case"loading":return w.a.createElement(X.a,null);case"active":return w.a.createElement(x.a,null,function(t){var n=t.featureFlags;return w.a.createElement("header",{className:"".concat(r?Z.a.headerSticky:Z.a.header," ").concat(c),style:s},w.a.createElement("div",{className:Z.a.content},w.a.createElement("div",{className:Z.a.breadcrumbs,"data-test-id":"breadcrumb"},w.a.createElement(U.a,{spaceKey:a,contentId:i,contentTitle:r?o:null}),w.a.createElement(R.a,{tagName:"span",contentId:i,location:Y.a.SYSTEM_CONTENT_METADATA,version:l,waitForSuperbatch:!0},function(e){var t=e.webItems;return w.a.createElement(Q.a,{webItems:t,className:Z.a.breadcrumbsWebItems,id:"system-content-items"})}),w.a.createElement(R.a,{tagName:"span",location:Y.a.PAGE_METADATA_BANNER,waitForSuperbatch:!0,contentId:i,version:l},function(e){var t=e.webItems;return w.a.createElement(Q.a,{pageId:i,webItems:t,className:Z.a.breadcrumbsWebItems,id:"page-metadata-banner-items"})}),w.a.createElement(q.a,{contentId:i,location:Y.a.ATL_PAGE_METADATA,style:ee})),w.a.createElement("div",{className:"".concat(Z.a.navigationContainer," content-navigation view"),style:{minHeight:31}},e.getPageButtons(n["confluence.frontend.header.action-buttons.v2"]),n["confluence.frontend.tools-menu.v2"]?w.a.createElement(K.a,{spaceKey:a,contentId:i,version:l}):w.a.createElement(R.a,{tagName:"span",location:Y.a.TOOLS_MENU_CONTAINER,hasMultipleSections:!0,contentId:i,version:l},function(e){var t=e.webItems,n=e.webSections;return w.a.createElement(G.a,{spaceKey:a,contentId:i,webItems:t,webSections:n})}))),w.a.createElement("div",{className:Z.a.stickyBorder}),w.a.createElement(j.a,null))});case"error":default:return null}}}]),t}(y.Component),b()(i,"defaultProps",{mode:"active",className:"",isSticky:!0}),a=o))||a,oe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewPageHeaderQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"editor",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fabricEditorSupported"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:440,source:{body:'\n  query ViewPageHeaderQuery($contentId: ID) {\n    content(id: $contentId) {\n      nodes {\n        id\n        type\n        title\n        operations {\n          operation\n          targetType\n        }\n        properties(key: "editor") {\n          nodes {\n            id\n            key\n            value\n          }\n        }\n        metadata {\n          frontend {\n            fabricEditorSupported\n          }\n        }\n      }\n    }\n  }\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},re=Object(C.a)();var ce=Object(S.connect)(function(e,t){var n=t.contentId,a=t.versionOverride;return{isRequestingEditorContent:re(e,{contentId:n}).isRequesting,isFabricEditorEnabled:t.contentCanUseFabricEditor,isEditEnabled:t.userCanUpdateContent,versionOverride:a}},function(e){return{getEditorContent:function(t){return e(Object(I.k)({contentId:t}))}}})(ie),se=function(e){function t(){return l()(this,t),p()(this,v()(t).apply(this,arguments))}return k()(t,e),u()(t,[{key:"renderLoading",value:function(){return w.a.createElement(ce,{mode:"loading"})}},{key:"renderActive",value:function(e){return w.a.createElement(ce,c()({mode:"active"},e))}},{key:"renderError",value:function(){return w.a.createElement(ce,{mode:"error"})}},{key:"contentMetadataShowsFabricEditorSupported",value:function(e){return e&&e.frontend&&e.frontend.fabricEditorSupported}},{key:"contentPropertiesHasFabricEditorProperty",value:function(e){return!(!e||!e.length)&&Boolean(e.filter(function(e){return"editor"===e.key&&'"v2"'===e.value}).length)}},{key:"contentOperationsHasUpdateOperation",value:function(e,t){return!(!e||!e.length)&&Boolean(e.filter(function(e){return e.targetType===t&&"update"===e.operation}).length)}},{key:"render",value:function(){var e=this;switch(this.props.mode){case"loading":return this.renderLoading();case"active":var t=this.props,n=t.spaceKey,a=t.contentId,i=t.className,o=t.style,r=t.isSticky,c=t.versionOverride,s=t.shouldRefreshContent;return n&&a?w.a.createElement(E.a,null,w.a.createElement(N.d,{query:oe,variables:{contentId:a}},function(t){var a=t.data,l=t.loading,d=t.error,u=t.refetch;if(d)return e.renderError();if(l)return e.renderLoading();if(s&&u(),a&&a.content&&a.content.nodes&&a.content.nodes[0]){var m=a&&a.content&&a.content.nodes&&a.content.nodes[0],p={spaceKey:n,className:i,style:o,isSticky:r,versionOverride:c,contentId:m.id,contentTitle:m.title,contentType:m.type,userCanUpdateContent:e.contentOperationsHasUpdateOperation(m.operations,m.type),contentCanUseFabricEditor:e.contentMetadataShowsFabricEditorSupported(m.metadata)||m.properties&&e.contentPropertiesHasFabricEditorProperty(m.properties.nodes)};return e.renderActive(p)}return e.renderError()})):this.renderError();case"error":return this.renderError()}}}]),t}(y.Component);b()(se,"defaultProps",{mode:"active"}),se.displayName="ViewPageHeader";t.default=se},wifC:function(e,t,n){"use strict";var a=n("VrFO"),i=n.n(a),o=n("Y9Ll"),r=n.n(o),c=n("N+ot"),s=n.n(c),l=n("AuHH"),d=n.n(l),u=n("1Pcy"),m=n.n(u),p=n("5Yy7"),g=n.n(p),v=n("KEM+"),h=n.n(v),k=n("ERkP"),f=n.n(k),b=n("kFJ8"),y=(n("aWzz"),n("2srY")),w=n.n(y),S=n("lZoD"),N=n("POWg"),I=n("PTiB"),E=n("llcG"),C=n("bx1d"),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WatchDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserIsWatching"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isWatched"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isWatchingBlogs"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:380,source:{body:"\n  query WatchDialogQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        currentUserIsWatching\n        type\n        space {\n          id\n          key\n          currentUser {\n            isWatched\n            isWatchingBlogs\n          }\n          operations {\n            operation\n            targetType\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},F=n("L21V"),_=n("9PSj"),W=n("+CY+"),T=n("/2pk"),D=n.n(T),P=n("CLO0"),A=n.n(P),O=n("yTLO"),M=Object(F.f)({watchStopTooltip:{id:"watch.stop.button.tooltip",defaultMessage:"Stop watching (w)",description:"Stop watching tooltip"},watchStartTooltip:{id:"watch.start.button.tooltip",defaultMessage:"Watch (w)",description:"Start Watching tooltip"}}),V=Object(F.g)(function(e){function t(){return i()(this,t),s()(this,d()(t).apply(this,arguments))}return g()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.params,n=e.isSelected,a=e.onClick,i=e.intl,o=t.isWatchingPage||t.isBlogPost&&t.isWatchingBlogs||t.isWatchingSpace;return f.a.createElement(O.a,{tag:"span",content:o?i.formatMessage(M.watchStopTooltip):i.formatMessage(M.watchStartTooltip)},f.a.createElement(E.a,{"data-test-id":"page-watch-button",appearance:"subtle",isSelected:n,onClick:a,iconBefore:o?f.a.createElement(D.a,{label:"WatchIcon"}):f.a.createElement(A.a,{label:"WatchIcon"})}))}}]),t}(k.PureComponent)),L=n("97Jx"),U=n.n(L),x=n("7wq/"),j=n.n(x),K=n("KsTJ"),R=n("b/5s");function q(){var e=j()(["\n  width: 325px;\n"]);return q=function(){return e},e}function H(){var e=j()(["\n  margin: 16px 0 0 0;\n"]);return H=function(){return e},e}var Q=Object(F.f)({watchingSpaceTitle:{id:"watch.title.watching.space",defaultMessage:"You are watching this space",description:"Title for Watch dialog when watching space"},watchingSpaceDescription:{id:"watch.title.watching.space.description",defaultMessage:"Receiving email updates for all content in this space.",description:"Description for Watch dialog when watching space"},watchingBlogAndBlogsTitle:{id:"watch.title.watching.blog.and.blogs",defaultMessage:"You are watching this blog post",description:"Title for Watch dialog when watching blog and blog space"},watchingBlogAndBlogsDescription:{id:"watch.title.watching.blog.and.blogs.description",defaultMessage:"Receiving email updates about changes to this blog post and all new blog posts in this space.",description:"Description for Watch dialog when watching blog and blog space"},watchingBlogTitle:{id:"watch.title.watching.blog",defaultMessage:"You are watching this blog post",description:"Title for Watch dialog when watching blog"},watchingBlogDescription:{id:"watch.title.watching.blog.description",defaultMessage:"Receiving email updates about changes to this blog post.",description:"Description for Watch dialog when watching blog"},watchingPageTitle:{id:"watch.title.watching.page",defaultMessage:"You are watching this page",description:"Title for Watch dialog when watching page"},watchingPageDescription:{id:"watch.title.watching.page.description",defaultMessage:"Receiving email updates about changes to this page.",description:"Description for Watch dialog when watching page"},watchingBlogsTitle:{id:"watch.title.watching.blogs",defaultMessage:"You are watching for new blog posts",description:"Title for Watch dialog when watching blog space"},watchingBlogsDescription:{id:"watch.title.watching.blogs.description",defaultMessage:"Receiving email updates for new blog posts in this space.",description:"Description for Watch dialog when watching blog space"},watchingNothingBlogTitle:{id:"watch.title.watching.nothing.blog",defaultMessage:"You are not watching this blog",description:"Title for Watch dialog when not watching blog"},watchingNothingBlogDescription:{id:"watch.title.watching.nothing.blogs.description",defaultMessage:"Start watching to receive email updates about changes to this blog.",description:"Description for Watch dialog when not watching blog"},watchingNothingPageTitle:{id:"watch.title.watching.nothing.page",defaultMessage:"You are not watching this page",description:"Title for Watch dialog when not watching page"},watchingNothingPageDescription:{id:"watch.title.nothing.watching.page.description",defaultMessage:"Start watching to receive email updates about changes to this page.",description:"Description for Watch dialog when not watching page"},watchPage:{id:"watch.page",defaultMessage:"Watch page",description:"Watch page - checkbox label"},watchBlog:{id:"watch.blog",defaultMessage:"Watch blog post",description:"Watch blog post - checkbox label"},watchBlogs:{id:"watch.blogs",defaultMessage:"Watch for new blog posts in this space",description:"Watch for blog posts - checkbox label"},watchSpace:{id:"watch.space",defaultMessage:"Watch all content in this space",description:"Watch space -  checkbox label"},watchDisabledPageToolTip:{id:"watch.disabledpage.tooltip",defaultMessage:"You will receive updates for this page because you are watching this space",description:"Watching space tooltip for page"},watchDisabledBlogsToolTip:{id:"watch.disabledblogs.tooltip",defaultMessage:"You are subscribed to all blog posts because you are watching this space",description:"Watching space tooltip for blogs"},manageWatchers:{id:"watch.manage",defaultMessage:"Manage watchers",description:"Manage watchers link"}}),G=K.default.div(H()),Y=K.default.div(q()),$=Object(F.g)(function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),h()(m()(n),"state",{isCurrentUserWatchingSpace:n.props.params.isWatchingSpace,isCurrentUserWatchingPage:n.props.params.isWatchingPage,isCurrentUserWatchingBlogs:n.props.params.isWatchingBlogs}),h()(m()(n),"watchPageChanged",function(){var e=n.props,t=e.contentId,a=e.watchContent,i=e.unwatchContent;n.state.isCurrentUserWatchingPage?(i({variables:{id:t},optimisticResponse:{__typename:"Mutation",unwatchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:t,currentUserIsWatching:!1}}}}),n.setState({isCurrentUserWatchingPage:!1})):(a({variables:{id:t},optimisticResponse:{__typename:"Mutation",watchContent:{__typename:"WatchContentPayload",content:{__typename:"Content",id:t,currentUserIsWatching:!0}}}}),n.setState({isCurrentUserWatchingPage:!0}))}),h()(m()(n),"watchSpaceChanged",function(){var e=n.props,t=e.spaceId,a=e.watchSpace,i=e.unwatchSpace;n.state.isCurrentUserWatchingSpace?(i({variables:{spaceId:t},optimisticResponse:{__typename:"Mutation",unwatchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:t,currentUser:{__typename:"SpaceUserMetadata",isWatched:!1}}}}}),n.setState({isCurrentUserWatchingSpace:!1})):(a({variables:{spaceId:t},optimisticResponse:{__typename:"Mutation",watchSpace:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:t,currentUser:{__typename:"SpaceUserMetadata",isWatched:!0}}}}}),n.setState({isCurrentUserWatchingSpace:!0}))}),h()(m()(n),"watchBlogsChanged",function(){var e=n.props,t=e.spaceId,a=e.watchBlogs,i=e.unwatchBlogs;n.state.isCurrentUserWatchingBlogs?(i({variables:{spaceId:t},optimisticResponse:{__typename:"Mutation",unwatchBlogs:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:t,currentUser:{__typename:"SpaceUserMetadata",isWatchingBlogs:!1}}}}}),n.setState({isCurrentUserWatchingBlogs:!1})):(a({variables:{spaceId:t},optimisticResponse:{__typename:"Mutation",watchBlogs:{__typename:"WatchSpacePayload",space:{__typename:"Space",id:t,currentUser:{__typename:"SpaceUserMetadata",isWatchingBlogs:!0}}}}}),n.setState({isCurrentUserWatchingBlogs:!0}))}),h()(m()(n),"populateTitleAndDescription",function(){var e=n.props.params,t={};return t=e.isWatchingSpace?{title:Q.watchingSpaceTitle,description:Q.watchingSpaceDescription}:e.isBlogPost?e.isWatchingBlogs&&e.isWatchingPage?{title:Q.watchingBlogAndBlogsTitle,description:Q.watchingBlogAndBlogsDescription}:e.isWatchingPage?{title:Q.watchingBlogTitle,description:Q.watchingBlogDescription}:e.isWatchingBlogs?{title:Q.watchingBlogsTitle,description:Q.watchingBlogsDescription}:{title:Q.watchingNothingBlogTitle,description:Q.watchingNothingBlogDescription}:e.isWatchingPage?{title:Q.watchingPageTitle,description:Q.watchingPageDescription}:{title:Q.watchingNothingPageTitle,description:Q.watchingNothingPageDescription},f.a.createElement("div",null,f.a.createElement(F.b,U()({},t.title,{tagName:"h2"})),f.a.createElement(G,null,f.a.createElement(F.b,t.description)))}),n}return g()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.params,n=e.intl;return f.a.createElement(Y,null,this.populateTitleAndDescription(),f.a.createElement(G,null,f.a.createElement(O.a,{content:t.isWatchingSpace?n.formatMessage(Q.watchDisabledPageToolTip):""},f.a.createElement(R.a,{label:t.isBlogPost?n.formatMessage(Q.watchBlog):n.formatMessage(Q.watchPage),value:"val1",onChange:this.watchPageChanged,isChecked:t.isWatchingPage||t.isWatchingSpace,isDisabled:t.isWatchingSpace,name:"watch-page"})),t.isBlogPost?f.a.createElement(O.a,{content:t.isWatchingSpace?n.formatMessage(Q.watchDisabledBlogsToolTip):""},f.a.createElement(R.a,{label:n.formatMessage(Q.watchBlogs),value:"val",onChange:this.watchBlogsChanged,isChecked:t.isWatchingBlogs||t.isWatchingSpace,isDisabled:t.isWatchingSpace,name:"watch-blogs"})):"",f.a.createElement(R.a,{label:n.formatMessage(Q.watchSpace),value:"val2",onChange:this.watchSpaceChanged,isChecked:t.isWatchingSpace,name:"watch-space"})),t.isAdmin?f.a.createElement(G,null,f.a.createElement(E.a,{"data-test-id":"manage-watchers-button",className:"cw-manage-watchers",spacing:"none",appearance:"link"},f.a.createElement(F.b,Q.manageWatchers))):"")}}]),t}(k.PureComponent)),z=Object(F.f)({watchPageNotification:{id:"watch.notification.start.watching.page",defaultMessage:"You started watching this page.",description:"start watching page notification"},unwatchPageNotification:{id:"watch.notification.stop.watching.page",defaultMessage:"You stopped watching this page.",description:"stop watching page notification"},watchBlogNotification:{id:"watch.notification.start.watching.blog",defaultMessage:"You started watching this blog.",description:"start watching blog notification"},unwatchBlogNotification:{id:"watch.notification.stop.watching.blog",defaultMessage:"You stopped watching this blog.",description:"stop watching blog notification"}}),J=Object(F.g)(function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),h()(m()(n),"state",{dialogOpen:!1}),h()(m()(n),"toggleDialog",function(){return n.setState({dialogOpen:!n.state.dialogOpen})}),h()(m()(n),"handleShortcutClick",function(){var e=n.props,t=e.contentId,a=e.params,i=e.watchContent,o=e.unwatchContent,r=e.flagsContainer,c=e.intl;a.isWatchingSpace?n.setState({dialogOpen:!0}):a.isWatchingPage?o({variables:{id:t}}).then(function(){r.showSuccessFlag({title:c.formatMessage(a.isBlogPost?z.unwatchBlogNotification:z.unwatchPageNotification),close:"auto"})}):i({variables:{id:t}}).then(function(){r.showSuccessFlag({title:c.formatMessage(a.isBlogPost?z.watchBlogNotification:z.watchPageNotification),close:"auto"})})}),h()(m()(n),"closeDialog",function(){n.setState({dialogOpen:!1})}),n}return g()(t,e),r()(t,[{key:"render",value:function(){var e=this.props,t=e.contentId,n=e.spaceId,a=e.params,i=e.watchContent,o=e.unwatchContent,r=e.watchSpace,c=e.unwatchSpace,s=e.watchBlogs,l=e.unwatchBlogs;return f.a.createElement(k.Fragment,null,f.a.createElement(W.a,{accelerator:"w",listener:this.handleShortcutClick}),f.a.createElement(_.a,{onClose:this.closeDialog,content:f.a.createElement($,{contentId:t,spaceId:n,params:a,watchContent:i,unwatchContent:o,watchSpace:r,unwatchSpace:c,watchBlogs:s,unwatchBlogs:l}),isOpen:this.state.dialogOpen},f.a.createElement(V,{isSelected:this.state.dialogOpen,onClick:this.toggleDialog,params:a})))}}]),t}(k.PureComponent)),Z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogWatchContentMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchContentInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserIsWatching"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:208,source:{body:"\n  mutation WatchDialogWatchContentMutation($id: ID!) {\n    watchContent(watchContentInput: { contentId: $id, currentUser: true }) {\n      content {\n        id\n        currentUserIsWatching\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogUnwatchContentMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unwatchContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchContentInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUserIsWatching"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:212,source:{body:"\n  mutation WatchDialogUnwatchContentMutation($id: ID!) {\n    unwatchContent(watchContentInput: { contentId: $id, currentUser: true }) {\n      content {\n        id\n        currentUserIsWatching\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ee={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogWatchSpaceMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchSpace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchSpaceInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"spaceId"},value:{kind:"Variable",name:{kind:"Name",value:"spaceId"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isWatched"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:230,source:{body:"\n  mutation WatchDialogWatchSpaceMutation($spaceId: ID!) {\n    watchSpace(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatched\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogUnwatchSpaceMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unwatchSpace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchSpaceInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"spaceId"},value:{kind:"Variable",name:{kind:"Name",value:"spaceId"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isWatched"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:234,source:{body:"\n  mutation WatchDialogUnwatchSpaceMutation($spaceId: ID!) {\n    unwatchSpace(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatched\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogWatchBlogsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"watchBlogs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchSpaceInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"spaceId"},value:{kind:"Variable",name:{kind:"Name",value:"spaceId"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isWatchingBlogs"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:236,source:{body:"\n  mutation WatchDialogWatchBlogsMutation($spaceId: ID!) {\n    watchBlogs(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatchingBlogs\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WatchDialogUnwatchBlogsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unwatchBlogs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"watchSpaceInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"spaceId"},value:{kind:"Variable",name:{kind:"Name",value:"spaceId"}}},{kind:"ObjectField",name:{kind:"Name",value:"currentUser"},value:{kind:"BooleanValue",value:!0}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isWatchingBlogs"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:240,source:{body:"\n  mutation WatchDialogUnwatchBlogsMutation($spaceId: ID!) {\n    unwatchBlogs(watchSpaceInput: { spaceId: $spaceId, currentUser: true }) {\n      space {\n        id\n        currentUser {\n          isWatchingBlogs\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};n.d(t,"a",function(){return ie});var ie=Object(I.a)()(function(e){function t(){var e,n;i()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=s()(this,(e=d()(t)).call.apply(e,[this].concat(o))),h()(m()(n),"updateUnwatchBlogs",function(e,t){var a=t.data.unwatchBlogs,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].space.currentUser.isWatchingBlogs=a.space.currentUser.isWatchingBlogs,e.writeQuery({query:B,data:o})}),h()(m()(n),"updateWatchBlogs",function(e,t){var a=t.data.watchBlogs,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].space.currentUser.isWatchingBlogs=a.space.currentUser.isWatchingBlogs,e.writeQuery({query:B,data:o})}),h()(m()(n),"updateWatchSpace",function(e,t){var a=t.data.watchSpace,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].space.currentUser.isWatched=a.space.currentUser.isWatched,e.writeQuery({query:B,data:o})}),h()(m()(n),"updateUnwatchSpace",function(e,t){var a=t.data.unwatchSpace,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].space.currentUser.isWatched=a.space.currentUser.isWatched,e.writeQuery({query:B,data:o})}),h()(m()(n),"updateWatchContent",function(e,t){var a=t.data.watchContent,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].currentUserIsWatching=a.content.currentUserIsWatching,e.writeQuery({query:B,data:o})}),h()(m()(n),"updateUnwatchContent",function(e,t){var a=t.data.unwatchContent,i=n.props.contentId,o=e.readQuery({query:B,variables:{contentId:i}});o.content.nodes[0].currentUserIsWatching=a.content.currentUserIsWatching,e.writeQuery({query:B,data:o})}),h()(m()(n),"unwatchBlogAnalytics",function(){n.fireAnalyticsEvent("unwatch","blogs")}),h()(m()(n),"watchBlogAnalytics",function(){n.fireAnalyticsEvent("watch","blogs")}),h()(m()(n),"unwatchSpaceAnalytics",function(){n.fireAnalyticsEvent("unwatch","space")}),h()(m()(n),"watchSpaceAnalytics",function(){n.fireAnalyticsEvent("watch","space")}),h()(m()(n),"unwatchContentAnalytics",function(){n.fireAnalyticsEvent("unwatch","content")}),h()(m()(n),"watchContentAnalytics",function(){n.fireAnalyticsEvent("watch","content")}),n}return g()(t,e),r()(t,[{key:"fireAnalyticsEvent",value:function(e,t){var n=this.props,a=n.contentId;(0,n.createAnalyticsEvent)({type:"sendTrackEvent",data:{action:e,actionSubject:t,objectId:a,source:"WatchDialog",attributes:{componentVersion:"v2"}}}).fire()}},{key:"render",value:function(){var e=this,t=this.props.contentId;return f.a.createElement(S.c,{to:[C.a]},function(n){return f.a.createElement(b.d,{query:B,variables:{contentId:t}},function(a){var i=a.data,o=a.loading;if(a.error)return null;if(o)return f.a.createElement(E.a,{appearance:"subtle"},f.a.createElement(N.a,{size:"small"}));var r=w()(i,"content.nodes[0].space.id"),c={isWatchingPage:w()(i,"content.nodes[0].currentUserIsWatching"),isWatchingSpace:w()(i,"content.nodes[0].space.currentUser.isWatched"),isBlogPost:"blogpost"===w()(i,"content.nodes[0].type"),isWatchingBlogs:w()(i,"content.nodes[0].space.currentUser.isWatchingBlogs"),isAdmin:function(e){return Boolean(e.find(function(e){return"space"===e.targetType&&"administer"===e.operation}))}(w()(i,"content.nodes[0].space.operations"))};return f.a.createElement(b.c,{mutation:ae,onCompleted:e.unwatchBlogAnalytics,update:e.updateUnwatchBlogs},function(a){return f.a.createElement(b.c,{mutation:ne,onCompleted:e.watchBlogAnalytics,update:e.updateWatchBlogs},function(i){return f.a.createElement(b.c,{mutation:te,onCompleted:e.unwatchSpaceAnalytics,update:e.updateUnwatchSpace},function(o){return f.a.createElement(b.c,{mutation:ee,onCompleted:e.watchSpaceAnalytics,update:e.updateWatchSpace},function(s){return f.a.createElement(b.c,{mutation:X,onCompleted:e.unwatchContentAnalytics,update:e.updateUnwatchContent},function(l){return f.a.createElement(b.c,{mutation:Z,onCompleted:e.watchContentAnalytics,update:e.updateWatchContent},function(e){return f.a.createElement(J,{contentId:t,spaceId:r,params:c,watchContent:e,unwatchContent:l,watchSpace:s,unwatchSpace:o,watchBlogs:i,unwatchBlogs:a,flagsContainer:n})})})})})})})})})}}]),t}(k.PureComponent))},zmgg:function(e,t,n){var a=n("Ra5e"),i=n("7l8p");"string"==typeof a&&(a=[[e.i,a,""]]),e.exports=a.locals||{},e.exports._getContent=function(){return a},e.exports._getCss=function(){return a.toString()},e.exports._insertCss=function(e){return i(a,e)}}}]);
//# sourceMappingURL=page.header.3617a5b5ebb5e0faef48-v38.js.map