(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{"+Wce":function(e,n,t){"use strict";t.r(n);var o,i,a,r=t("tQaH"),d=t.n(r),c=t("RhWx"),m=t.n(c),s=t("Y9Ll"),l=t.n(s),u=t("1Pcy"),p=t.n(u),v=t("KEM+"),f=t.n(v),h=t("VrFO"),k=t.n(h),y=t("N+ot"),C=t.n(y),_=t("AuHH"),g=t.n(_),E=t("5Yy7"),b=t.n(E),S=t("mAxt"),I=t.n(S),N=(t("aWzz"),t("ERkP")),A=t.n(N),w=t("kFJ8"),F=t("uDfI"),T=t("kD2R"),P=t("2srY"),x=t.n(P),D=t("zr3P"),L=t.n(D),O=t("f6W2"),M=t("L+/v"),H=t("OC+J"),V=t("Wt1t"),j=t("UIW9"),R=t("OlTx"),U=t("GYRL"),q=t("Zpwg"),B=t("6lDt"),Q=t("D3Uu"),W=t("fJbV"),G=t("EfWO"),J=t.n(G),z=t("nnRT"),Y=t.n(z),K=t("lKOy"),$=t.n(K),Z=t("uZih"),X=t.n(Z),ee=t("L21V"),ne=t("swvn"),te=t.n(ne),oe=t("IGvV"),ie=t("bfgX"),ae=t("PTiB"),re=t("0Dc1"),de=t("U728"),ce=t("w1By"),me=t("3VMZ"),se=t("kSEI"),le=t("bfiC"),ue=t("WRP3"),pe=t("ON/h"),ve=t("V/ff"),fe=t("jqY8"),he=t("Xzcx"),ke=t("utTn"),ye=t("UbDs"),Ce=t.n(ye),_e={"Captcha check failed":"captcha.response.failed"},ge={ADD:"addComment",EDIT:"editComment",REPLY:"replyComment",RESET:null},Ee=(o=Object(oe.a)(Ce.a),i=Object(ae.a)(),Object(ee.g)(a=o(a=i(a=function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i))),f()(p()(t),"state",{commentsIds:t.props.commentsIds,updatedCommentsIds:[],hasNextPage:t.props.hasNextPage,editorState:{contentId:null,mode:ge.RESET,errorMessage:"",errorType:null,updateTime:0,isEditorLoaded:!1}}),f()(p()(t),"domNodes",{}),f()(p()(t),"_eligibleAddPageCommentTracking",function(e,n){return"page"===t.props.contentType&&t.state.editorState.mode===n&&!e}),f()(p()(t),"_showEditor",function(e){t.setState({editorState:d()({},t.state.editorState,e)})}),f()(p()(t),"_hideEditor",function(){var e={contentId:null,mode:ge.RESET};t.setState({editorState:d()({},t.state.editorState,e)})}),f()(p()(t),"_onEditorLoaded",function(){t.setState({editorState:d()({},t.state.editorState,{isEditorLoaded:!0})})}),f()(p()(t),"_hideEditorIfNotForComments",function(){var e=Object(ve.c)();t.domNodes.root.querySelectorAll("#".concat(e.id)).length||t._hideEditor()}),f()(p()(t),"_replyCommentAction",function(e){t._showEditor({contentId:e,mode:ge.REPLY})}),f()(p()(t),"_editCommentAction",function(e){t._showEditor({mode:ge.EDIT,contentId:e})}),f()(p()(t),"_showAddCommentEditor",function(e){var n=t.props.contentId;e&&e.preventDefault(),t._warnCommentLost(function(){t._showEditor({mode:ge.ADD,contentId:n})})}),f()(p()(t),"_triggerShowAddCommentEditor",function(e){setTimeout(function(){return t.scrollToElement("addcomment")},0),t._showAddCommentEditor(e)}),f()(p()(t),"_warnCommentLost",function(e){var n=t.props.intl.formatMessage;Object(ve.h)()&&!Object(fe.b)(n({id:"unsaved.comment.lost"}))||e()}),f()(p()(t),"_callAnalyticsEvent",function(e){t.props.createAnalyticsEvent({type:"sendTrackEvent",data:e}).fire()}),f()(p()(t),"_getCommentAnalyticsObject",function(e){var n=e.id,t=e.spaceId,o=e.ownerId,i=e.requestType,a=e.isInlineComment,r=e.contentType,d=e.parentId;return{containerType:"space",containerId:t,source:"viewPageScreen",objectType:"page",objectId:o.toString(),action:"editComment"===i?"updated":"created",actionSubject:"comment",actionSubjectId:n,attributes:{commentType:a?"inline":"page",pageType:r,parentCommentId:d.toString()}}}),f()(p()(t),"_sendExperienceAnalytics",function(e){Object(de.a)(d()({},e,{experienceId:t.props.contentId}))}),f()(p()(t),"_editorSaveHandler",function(e){var n=t.props.intl.formatMessage,o=t.props,i=o.saveComment,a=o.onRefetchComments,r=t.state.editorState;if(e.adf)e.requestType=r.mode,r.mode===ge.REPLY&&(e.showCommentAfter=t._getThreadLastCommentId(r.contentId)),t._eligibleAddPageCommentTracking(!1,ge.ADD)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_PUBLISH,isAttempt:!0}),i(e).then(function(n){var o=n.data.experimentalSaveFabricComment,i=o.id,d=o.ancestors,c=o.container,m=o.extensions,s=t.props,l=s.spaceId,u=s.contentType,p=d[0]&&d[0].id||0,v=c&&c.id,f="footer"!==m.location,h=t._getCommentAnalyticsObject({id:i,spaceId:l,parentId:p,contentType:u,ownerId:v,isInlineComment:f,requestType:e.requestType});t._callAnalyticsEvent(h);var k={commentId:i,threadLastCommentId:t._getThreadLastCommentId(r.contentId),parentId:p,mode:r.mode};a(k).then(function(){t._hideEditor(),t._eligibleAddPageCommentTracking(f,ge.RESET)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_PUBLISH,wasExperienceSuccessful:!0})})}),t._removeSlowCommentURLParams();else{var c={errorMessage:n({id:"content.empty"}),errorType:"warning"};t.setState({editorState:d()({},t.state.editorState,c)})}}),f()(p()(t),"_editorCancelHandler",function(){t._eligibleAddPageCommentTracking(!1,ge.ADD)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_CLOSE,isAttempt:!0}),t._hideEditor(),t._removeSlowCommentURLParams(),t._eligibleAddPageCommentTracking(!1,ge.RESET)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_CLOSE,wasExperienceSuccessful:!0})}),f()(p()(t),"_onDeleteComment",function(e){(0,t.props.deleteComment)(e)}),f()(p()(t),"_onReplyToComment",function(e){t._warnCommentLost(function(){return t._replyCommentAction(e)})}),f()(p()(t),"_onEditComment",function(e){t._warnCommentLost(function(){return t._editCommentAction(e)})}),f()(p()(t),"_getCommentActions",function(){return{deleteComment:t._onDeleteComment,replyToComment:t._onReplyToComment,editComment:t._onEditComment}}),f()(p()(t),"_closeEditorError",function(){t.setState({editorState:d()({},t.state.editorState,{errorMessage:"",updateTime:0})})}),f()(p()(t),"_getReference",function(e){return function(n){return t.domNodes[e]=n}}),t}return b()(n,e),l()(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.replyToCommentId,t=e.shouldOpenAddComment,o=e.openEditCommentId,i=e.isEditCommentFound,a=e.focusOnCommentId,r=e.readyToScrollToElement,d=this.state.editorState;o&&i&&(this._editCommentAction(o),this.scrollToElement("comment-".concat(o))),n&&d.contentId!==n&&this._replyCommentAction(n),t&&this._triggerShowAddCommentEditor(),a&&r&&this.scrollToElement("comment-".concat(a)),t&&r&&this.scrollToElement("addcomment"),Object(ie.a)("rte-quick-edit-ready",this._hideEditorIfNotForComments)}},{key:"componentDidUpdate",value:function(){Object(ke.d)()}},{key:"componentWillUnmount",value:function(){Object(ie.c)("rte-quick-edit-ready",this._hideEditorIfNotForComments),this._hideEditor()}},{key:"scrollToElement",value:function(e){var n=Object(he.d)(e);n&&n.scrollIntoView()}},{key:"_getThreadLastCommentId",value:function(e){var n,t,o,i;return this.props.commentsData.forEach(function(a){n||(void 0!==t&&(t>=a.depthLevel?n=o:i=a.id),a.id===e&&(t=a.depthLevel),o=a.id)}),n||(n=i||e),n}},{key:"_removeSlowCommentURLParams",value:function(){var e=this.props,n=e.replace,t=e.location,o=t.query,i=["showCommentArea","showComments","editComment","commentId"];if(i.map(function(e){return void 0!==o[e]}).filter(function(e){return e}).length){var a=X()(t.query,i);n(d()({},t,{query:a,search:J.a.format({query:a})}))}}},{key:"_canViewProfile",value:function(){var e=this.props.currentUserInfo,n=e.isAnonymous,t=e.currentUserCanViewProfile;return n?!0===t:!1!==t}},{key:"_isAddCommentEditorEnabled",value:function(){var e=this.props.contentId,n=this.state.editorState;return n.contentId===e&&n.mode===ge.ADD}},{key:"_renderHeadLine",value:function(){var e=this.props.totalComments;return e?A.a.createElement("h2",{"data-test-id":"comments-count"},1===e?A.a.createElement(ee.b,{id:"comment.singular",values:{0:e}}):A.a.createElement(ee.b,{id:"comment.plural",values:{0:e}})):null}},{key:"_renderEditCommentErrorFlag",value:function(){var e=this.props,n=e.openEditCommentId,t=e.isEditCommentFound;return n&&!t?A.a.createElement(te.a,{type:"error"},A.a.createElement(ee.b,{id:"comment.edit.not.found"})):null}},{key:"_renderCommentsList",value:function(){var e=this.props,n=e.contentId,t=e.currentUserInfo,o=e.commentsData,i=e.contentType,a=e.focusOnCommentId,r=e.editedCommentsIds,d=e.atlToken,c=this.state,m=c.updatedCommentsIds,s=c.commentsIds,l=c.editorState,u={atlToken:d,commentsIds:s,contentType:i,contentId:n,comments:o,commentActions:this._getCommentActions(),showAuthorLabel:"blogpost"===i,focusOnCommentId:a,highlightedComments:r.length>0?r:m,userInfo:t,editor:l,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return A.a.createElement(le.a,u)}},{key:"_renderAddCommentField",value:function(){var e=this.props,n=e.contentId,t=e.canAddComments,o=e.currentUserInfo,i=e.atlToken,a=this.state.editorState;if(t){var r={style:{paddingTop:20},contentId:n,atlToken:i,mode:"add",id:"addcomment",userInfo:o,isEditorEnabled:this._isAddCommentEditorEnabled(),onClickCommentAddPrompt:this._showAddCommentEditor,editor:a,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return A.a.createElement(N.Fragment,null,A.a.createElement(ue.a,r),a.mode===ge.ADD&&A.a.createElement(q.a,null))}}},{key:"_renderEditorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.state.editorState;return A.a.createElement(N.Fragment,null,A.a.createElement(se.a,{isShowing:!0,type:n.errorType||"error",body:_e[n.errorMessage]?e({id:_e[n.errorMessage]}):n.errorMessage,close:"manual",onClose:this._closeEditorError}),A.a.createElement(q.b,null),A.a.createElement(ce.a,{name:me.a.ADD_PAGE_COMMENT,error:new Error(n.errorMessage)}))}},{key:"_renderGraphQLErrorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.props,t=n.saveCommentError,o=n.deleteCommentError,i=t||o,a=x()(i,"graphQLErrors[0].message");return A.a.createElement(N.Fragment,null,A.a.createElement(se.a,{isShowing:!0,type:"error",body:_e[a]?e({id:_e[a]}):a,close:"manual",onClose:this._closeEditorError}),A.a.createElement(q.b,null))}},{key:"render",value:function(){var e=this.props,n=e.contentId,t=e.saveCommentError,o=e.deleteCommentError,i=e.totalComments,a=e.hasNextPage,r=this._isAddCommentEditorEnabled(),d=this.state.editorState;return A.a.createElement("div",{className:Ce.a.root,ref:this._getReference("root"),id:"comments-section","data-test-id":"comments-section-new"},this._renderHeadLine(),this._renderEditCommentErrorFlag(),t||o?this._renderGraphQLErrorMessage():null,this._renderCommentsList(),this._renderAddCommentField(),d.errorMessage?this._renderEditorMessage():null,r?null:A.a.createElement(pe.a,{contentId:n,onClick:this._triggerShowAddCommentEditor}),a?null:A.a.createElement(re.a,{subject:"comments",details:{totalComments:i}}),d.isEditorLoaded&&d.mode===ge.ADD&&A.a.createElement(q.c,null))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!Y()(n.commentsIds,e.commentsIds)&&!1===n.hasNextPage&&!1===e.hasNextPage&&e.hasFetchedComments?{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage,updatedCommentsIds:$()(e.commentsIds,n.commentsIds)}:d()({},n,{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage})}}]),n}(N.Component))||a)||a)||a),be={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CommentsSectionFabricQuerySaveComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"params"}},type:{kind:"NamedType",name:{kind:"Name",value:"ExperimentalFabricCommentInput"}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimentalSaveFabricComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"params"},value:{kind:"Variable",name:{kind:"Name",value:"params"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ancestors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"container"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"extensions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:305,source:{body:"\n  mutation CommentsSectionFabricQuerySaveComment(\n    $params: ExperimentalFabricCommentInput\n  ) @experimental {\n    experimentalSaveFabricComment(params: $params) {\n      id\n      ancestors {\n        id\n      }\n      container {\n        id\n      }\n      extensions {\n        location\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Se=t("QwJJ"),Ie=t("ZP3P"),Ne=function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i)));var r=i[0];return t.message=r.message,t.graphQLErrors=r.graphQLErrors,t}return b()(n,e),n}(I()(Error));var Ae=Object(F.connect)(function(e,n){var t=n.commentsData,o=n.hasFetchedComments,i=t.map(function(e){return e.id}),a=Object(O.a)(e),r=a.query,d=r.focusedCommentId,c=r.replyToComment,m=r.showCommentArea,s=r.editComment,l=r.commentId,u="true"===s&&l||"";return{focusOnCommentId:d||c,replyToCommentId:c,shouldOpenAddComment:"true"===m,openEditCommentId:u,isEditCommentFound:!!u&&-1!==i.indexOf(u),readyToScrollToElement:o,hasFetched:o,commentsData:t,commentsIds:i,location:a,atlToken:""}},function(e){return{replace:function(n){return e(Object(T.replace)(n))}}})(Ee),we=[],Fe=Object(w.e)(function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i))),f()(p()(t),"state",{webPanels:null}),f()(p()(t),"_loadedCursor",{}),f()(p()(t),"fetchWebPanels",function(){var e=t.props,n=e.contentId,o=e.client,i={contentId:n,location:B.a.ATL_PAGE_CONTENT_FOOTER_ACTIONS};o.query({query:Q.a,variables:i}).then(function(e){var n=e.data,o=x()(n,"webPanels");t.setState({webPanels:o})})}),f()(p()(t),"_getCommentVersion",function(e){return{id:x()(e,"node.id"),by:x()(e,"node.version.by"),when:x()(e,"node.version.when"),number:x()(e,"node.version.number")}}),f()(p()(t),"_buildUserInfo",function(e){return{displayName:x()(e,"displayName"),avatarUrl:x()(e,"photos.length")&&x()(e,"photos").find(function(e){return e.isPrimary}).value,accountId:x()(e,"id")}}),f()(p()(t),"_saveComment",function(e,n,t){return function(o){var i=o.contentId,a=o.commentId,r=void 0===a?"":a,d=o.adf,c=o.requestType,m=o.version;return t({variables:{params:{location:"footer",contentId:i||e,contentType:n,adfContent:JSON.stringify(d),commentId:r,requestType:c,version:m}}})}}),f()(p()(t),"_deleteComment",function(e,n){return function(e){return n({variables:{contentId:e}})}}),f()(p()(t),"_onRefetchComments",function(e,n){var t=e.commentId;return n({variables:{contentId:t},query:Ie.a,updateQuery:function(n,o){var i=o.fetchMoreResult,a=x()(i,"content.nodes[0]");if(!a)return n;var r=L()(n),d=[],c=e.threadLastCommentId,s=e.parentId,l=e.mode;if("editComment"===l){var u=n.content.child.comment.edges.findIndex(function(e){return e.node.id===t}),p=r.content.child.comment.edges.slice(0,u),v=[{cursor:u.toString(),node:a,__typename:"ContentEdge"}],f=r.content.child.comment.edges.slice(u+1);d=[].concat(m()(p),v,m()(f)),we=[t]}else if("replyComment"===l){var h=c||s,k=n.content.child.comment.edges.findIndex(function(e){return e.node.id===h}),y=r.content.child.comment.edges.slice(0,k+1),C=[{cursor:(k+1).toString(),node:a,__typename:"ContentEdge"}],_=r.content.child.comment.edges.slice(k+1);d=[].concat(m()(y),C,m()(_)),we=[]}else"addComment"!==l&&"0"!==s||(d=r.content.child.comment.edges.concat([{cursor:n.content.child.comment.count.toString(),node:a,__typename:"ContentEdge"}]),we=[]);return Object.assign({},n,{content:{child:{comment:{count:d.length,pageInfo:{endCursor:(d.length-1).toString(),hasNextPage:!1,__typename:r.content.child.comment.pageInfo.__typename},edges:d,__typename:r.content.child.comment.__typename},__typename:r.content.child.__typename},nodes:m()(r.content.nodes),__typename:r.content.__typename}})}})}),t}return b()(n,e),l()(n,[{key:"componentDidMount",value:function(){this.fetchWebPanels()}},{key:"_getADF",value:function(e){if(e)try{return JSON.parse(e)}catch(e){console.error("Invalid adf document",e)}return null}},{key:"_buildCommentsData",value:function(e){var n=this,t=x()(e,"content.child.comment.edges");return t&&0!==t.length?t.map(function(e){var t=x()(e,"node.ancestors")||[],o=x()(t,"length")||0,i=x()(t,"ancestors[0].id")||null,a=n._getADF(x()(e,"node.body.atlas_doc_format.value")),r=x()(e,"node.body.view.value")||"",d=x()(e,"node.body.editor.value")||"",c=n._getCommentVersion(e),m=x()(e,"node.body.view.webresource.key")||[],s=Object(H.a)(x()(e,"node.history.createdBy"));return{adf:a,ancestors:t,depthLevel:o,parentId:i,bodyExportView:r,contentContainerCreatedBy:Object(H.a)(x()(e,"node.container.history.createdBy")),bodyEditorView:d,version:c,webResourceKeys:m,createdBy:s,createdByAuthor:Boolean(x()(e,"node.container.history.createdBy.accountId")&&x()(e,"node.version.by.accountId")&&x()(e,"node.container.history.createdBy.accountId")===x()(e,"node.version.by.accountId")),id:x()(e,"node.id")||"",linkWebui:x()(e,"node.links.webui")||"",operations:x()(e,"node.operations")||[],createdFriendly:x()(e,"node.version.friendlyWhen")||"",createdDate:x()(e,"node.version.when")||""}}):[]}},{key:"_fetchMore",value:function(e,n){return e({variables:n,updateQuery:function(e,n){var t=n.fetchMoreResult;return t?Object.assign({},e,{content:{child:{comment:{count:e.content.child.comment.count+t.content.child.comment.count,pageInfo:d()({},t.content.child.comment.pageInfo,{__typename:t.content.child.comment.pageInfo.__typename}),edges:[].concat(m()(e.content.child.comment.edges),m()(t.content.child.comment.edges)),__typename:t.content.child.comment.__typename},__typename:t.content.child.__typename},nodes:m()(t.content.nodes),__typename:t.content.__typename}}):e}})}},{key:"_getExperience",value:function(e){return"page"===e?R.b.PAGE_COMMENT_ADD:""}},{key:"render",value:function(){var e=this,n=this.props.contentId;return n?A.a.createElement(M.a,null,A.a.createElement(j.a,{subject:"comments",beforeMount:!0}),A.a.createElement(w.d,{query:W.a,variables:{contentId:n,offset:0,first:100},fetchPolicy:"cache-and-network",errorPolicy:"all"},function(t){var o=t.data,i=t.loading,a=t.error,r=t.fetchMore,c=t.networkStatus;return A.a.createElement(w.c,{mutation:be},function(t,s){var l=s.error,u=s.data;return A.a.createElement(w.c,{mutation:Se.a,update:function(e,t){var o=t.data.experimentalDeleteComment.contentId,i=e.readQuery({query:W.a,variables:{contentId:n,offset:0,first:100}}),a=i.content.child.comment.edges.filter(function(e){return e.node.id!==o}).map(function(e){var n=e.node.ancestors.filter(function(e){return e.id!==o}),t=e.node,i={container:t.container,body:t.body,history:t.history,id:t.id,links:t.links,operations:t.operations,version:t.version},a=e.cursor;return Object.assign({},e,{cursor:a,node:d()({ancestors:n},i,{__typename:e.node.__typename}),__typename:e.__typename})}),r=i.user;e.writeQuery({query:W.a,variables:{contentId:n,offset:0,first:100},data:{content:{child:{comment:{count:a.length,pageInfo:{endCursor:(a.length-1).toString(),hasNextPage:!1,__typename:i.content.child.comment.pageInfo.__typename},edges:a,__typename:i.content.child.comment.__typename},__typename:i.content.child.__typename},nodes:m()(i.content.nodes),__typename:i.content.__typename},user:r}})}},function(d,m){var s=m.error,p=m.data;if(a)throw new Ne(a);if(!x()(o,"content.nodes[0]")||!x()(o,"content.child.comment"))return null;var v=x()(o,"content.child.comment"),f=v.count,h=v.pageInfo,k=h.hasNextPage,y=h.endCursor,C=x()(o,"content.nodes[0]"),_=C.operations,g=C.space,E=g.homepageId,b=g.id,S=C.type,I=e._buildUserInfo(x()(o,"user")),N=e.state.webPanels,w=E===n,F=_.find(function(e){return"create"===e.operation&&"comment"===e.targetType})&&Boolean(!w||f>0);return!k||i||e._loadedCursor[y]||(e._loadedCursor[y]=!0,e._fetchMore(r,{contentId:n,offset:Number(y)+1})),A.a.createElement(V.a.Provider,{value:{isLikesEnabled:!!N}},A.a.createElement(U.a,{experience:e._getExperience(S),experienceId:n},A.a.createElement(q.d,null,A.a.createElement(Ae,{onRefetchComments:function(n){return e._onRefetchComments(n,r)},canAddComments:F,currentUserInfo:I,canViewProfile:!!I,commentsData:e._buildCommentsData(o),contentId:n,contentType:S,spaceId:b,currentUserCanViewProfile:!!I,isAnonymous:!I,totalComments:k?0:f,hasFetchedComments:!i,hasNextPage:k,networkStatus:c,saveComment:e._saveComment(n,S,t),deleteComment:e._deleteComment(n,d),saveCommentData:u,saveCommentError:l,deleteCommentData:p,deleteCommentError:s,editedCommentsIds:we}))))})})})):null}}]),n}(N.Component));n.default=Fe},"1oXH":function(e,n,t){"use strict";function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function i(){return"".concat(o()+o(),"-").concat(o(),"-").concat(o(),"-").concat(o(),"-").concat(o()).concat(o()).concat(o())}t.d(n,"a",function(){return i})},"7eka":function(e,n,t){var o=t("7vTW"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},"7vTW":function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentBody_author_1H4{padding-bottom:8px;padding-top:1px;cursor:pointer;display:inline-block}.CommentBody_author_1H4 div+div{font-weight:400}.CommentBody_author_1H4 a,.CommentBody_authorOld_1ei a{font-size:16px}.CommentBody_authorLabel_1nv{background-color:#3572b0;color:#fff;text-transform:uppercase;font-size:10px;margin-left:10px;padding:2px 3px;border-radius:3px;vertical-align:middle}.CommentBody_body_1Lt{padding-right:20px;word-wrap:break-word}",""]),n.locals={author:"CommentBody_author_1H4",authorOld:"CommentBody_authorOld_1ei",authorLabel:"CommentBody_authorLabel_1nv",body:"CommentBody_body_1Lt"}},"8rMV":function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentsSection_root_3ge{padding-top:1px;list-style:none}.aui-page-panel-inner{overflow:visible}",""]),n.locals={root:"CommentsSection_root_3ge"}},C4P7:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".Comment_comment_d0q{position:relative;padding-top:8px;padding-bottom:8px;overflow-y:visible;min-height:35px;word-wrap:break-word}.Comment_comment_d0q #rte{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;margin:0;width:100%}.Comment_comment_d0q form.aui{margin:0}#comments-section .preformattedContent{word-wrap:normal}.Comment_addComment_24d{padding-top:20px}.Comment_focused_cml{border-bottom:1px solid #ccc;background:#ebf2f9;padding-left:10px!important;margin-bottom:-1px;padding-bottom:9px}.Comment_focused_cml+.Comment_focused_cml{-webkit-box-shadow:inset 0 1px 0 #ccc;box-shadow:inset 0 1px 0 #ccc}.Comment_avatar_2px{width:32px;height:32px;margin-right:10px;float:left;cursor:pointer}.Comment_spinner_27V{opacity:.5;height:100%;position:relative}.Comment_bodyContainer_sJT{position:relative;margin-left:42px}#comments-section .comment{border-top:none!important;border-bottom:none!important}.quick-comment-loading-container{position:absolute;top:0;bottom:-10px;left:0;right:0;z-index:999;background-color:#f5f5f5;border:1px solid #f5f5f5;min-height:271px;width:100%}.quick-comment-form #previewArea{display:block}.quick-comment-container{margin-top:0!important}",""]),n.locals={comment:"Comment_comment_d0q",addComment:"Comment_addComment_24d",focused:"Comment_focused_cml",avatar:"Comment_avatar_2px",spinner:"Comment_spinner_27V",bodyContainer:"Comment_bodyContainer_sJT"}},JWvE:function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t("ERkP"),i=t.n(o),a=(t("aWzz"),t("wySS")),r=t("JA6b"),d=t("bR0+"),c="".concat(d.a,"/images/icons/profilepics/anonymous.png"),m=function(e){var n=e.userId,t=e.canViewProfile,o=void 0===t||t,d=e.isAnonymous,m=void 0!==d&&d,s=e.size,l=void 0===s?"medium":s,u=e.src;return i.a.createElement(r.a,{userId:n,canViewProfile:o},function(){return!m&&o&&u||(u=c),i.a.createElement(a.a,{userId:n,src:u,size:l,target:"_blank",enableTooltip:!o})}())};m.displayName="ProfileAvatarComponent";var s=Object(o.memo)(m)},JpXc:function(e,n,t){"use strict";var o=t("x+QU"),i=t.n(o)()({loader:function(){return Promise.all([t.e(2),t.e(1),t.e(0),t.e(14),t.e(380)]).then(t.bind(null,"2YF+"))},loading:function(){return null}});i.displayName="RendererQueryLoader",n.a=i},JzH8:function(e,n,t){"use strict";var o=t("97Jx"),i=t.n(o),a=t("m3Bd"),r=t.n(a),d=t("VrFO"),c=t.n(d),m=t("Y9Ll"),s=t.n(m),l=t("N+ot"),u=t.n(l),p=t("AuHH"),v=t.n(p),f=t("5Yy7"),h=t.n(f),k=(t("aWzz"),t("ERkP")),y=t.n(k),C=t("7LQG"),_=function(e){function n(){return c()(this,n),u()(this,v()(n).apply(this,arguments))}return h()(n,e),s()(n,[{key:"render",value:function(){var e=this.props,n=e.children,t=e.href,o=r()(e,["children","href"]);return t?y.a.createElement("a",i()({},o,{href:0===t.indexOf(C.a)?t:"".concat(C.a).concat(t)}),n):y.a.createElement("span",o,n)}}]),n}(k.Component);_.displayName="ContextAwareLink",_.displayName="ContextAwareLink",n.a=_},"ON/h":function(e,n,t){"use strict";t("aWzz");var o=t("ERkP"),i=t.n(o),a=t("7LQG"),r=function(e){var n=e.contentId,t=e.onClick;return i.a.createElement("div",{id:"comments-actions",style:{display:"none"}},i.a.createElement("a",{href:"".concat(a.a,"/pages/viewpage.action?pageId=").concat(n,"&showComments=true&showCommentArea=true#addcomment"),id:"add-comment-rte",className:"full-load",onClick:t}))};r.displayName="CommentLegacyAction",n.a=r,r.displayName="CommentLegacyAction"},QwJJ:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CommentsSectionQueryDeleteComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimentalDeleteComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentId"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"statusCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:177,source:{body:"\n  mutation CommentsSectionQueryDeleteComment($contentId: ID!) @experimental {\n    experimentalDeleteComment(contentId: $contentId) {\n      contentId\n      statusCode\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},RHpf:function(e,n,t){"use strict";t.r(n);var o,i,a,r=t("tQaH"),d=t.n(r),c=t("RhWx"),m=t.n(c),s=t("Y9Ll"),l=t.n(s),u=t("1Pcy"),p=t.n(u),v=t("KEM+"),f=t.n(v),h=t("VrFO"),k=t.n(h),y=t("N+ot"),C=t.n(y),_=t("AuHH"),g=t.n(_),E=t("5Yy7"),b=t.n(E),S=t("mAxt"),I=t.n(S),N=(t("aWzz"),t("ERkP")),A=t.n(N),w=t("kFJ8"),F=t("uDfI"),T=t("kD2R"),P=t("2srY"),x=t.n(P),D=t("zr3P"),L=t.n(D),O=t("f6W2"),M=t("L+/v"),H=t("OC+J"),V=t("Wt1t"),j=t("UIW9"),R=t("OlTx"),U=t("GYRL"),q=t("Zpwg"),B=t("1oXH"),Q=t("6lDt"),W=t("D3Uu"),G=t("fJbV"),J=t("EfWO"),z=t.n(J),Y=t("nnRT"),K=t.n(Y),$=t("lKOy"),Z=t.n($),X=t("uZih"),ee=t.n(X),ne=t("L21V"),te=t("swvn"),oe=t.n(te),ie=t("IC1n"),ae=t.n(ie),re=t("IGvV"),de=t("bfgX"),ce=t("PTiB"),me=t("0Dc1"),se=t("U728"),le=t("hpu0"),ue=t("3VMZ"),pe=t("A79P"),ve=t("w1By"),fe=t("kSEI"),he=t("bfiC"),ke=t("WRP3"),ye=t("ON/h"),Ce=t("V/ff"),_e=t("jqY8"),ge=t("Xzcx"),Ee=t("utTn"),be=t("UbDs"),Se=t.n(be),Ie={"Captcha check failed":"captcha.response.failed"},Ne={ADD:"addComment",EDIT:"editComment",REPLY:"replyComment",RESET:null},Ae=(o=Object(re.a)(Se.a),i=Object(ce.a)(),Object(ne.g)(a=o(a=i(a=function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i))),f()(p()(t),"state",{commentsIds:t.props.commentsIds,updatedCommentsIds:[],hasNextPage:t.props.hasNextPage,editorState:{contentId:null,mode:Ne.RESET,errorMessage:"",errorType:null,updateTime:0,isEditorLoaded:!1}}),f()(p()(t),"domNodes",{}),f()(p()(t),"_eligibleAddPageCommentTracking",function(e,n){return"page"===t.props.contentType&&t.state.editorState.mode===n&&!e}),f()(p()(t),"_showEditor",function(e){Object(le.a)().start({name:ue.a.ADD_PAGE_COMMENT,id:ae()()}),Object(le.a)().start({name:ue.a.ADD_PAGE_COMMENT_LOAD,id:ae()(),timeout:pe.a.EDITOR_LOAD,onFailure:function(){Object(le.a)().fail({name:ue.a.ADD_PAGE_COMMENT,error:new Error("Page comment editor load timed out")})}}),t.setState({editorState:d()({},t.state.editorState,e)})}),f()(p()(t),"_hideEditor",function(){var e={contentId:null,mode:Ne.RESET};t.setState({editorState:d()({},t.state.editorState,e)})}),f()(p()(t),"_onEditorLoaded",function(){Object(le.a)().succeed({name:ue.a.ADD_PAGE_COMMENT_LOAD}),t.setState({editorState:d()({},t.state.editorState,{isEditorLoaded:!0})})}),f()(p()(t),"_hideEditorIfNotForComments",function(){var e=Object(Ce.c)();t.domNodes.root.querySelectorAll("#".concat(e.id)).length||t._hideEditor()}),f()(p()(t),"_replyCommentAction",function(e){t._showEditor({contentId:e,mode:Ne.REPLY})}),f()(p()(t),"_editCommentAction",function(e){t._showEditor({mode:Ne.EDIT,contentId:e})}),f()(p()(t),"_showAddCommentEditor",function(e){var n=t.props.contentId;e&&e.preventDefault(),t._warnCommentLost(function(){t._showEditor({mode:Ne.ADD,contentId:n})})}),f()(p()(t),"_triggerShowAddCommentEditor",function(e){setTimeout(function(){return t.scrollToElement("addcomment")},0),t._showAddCommentEditor(e)}),f()(p()(t),"_warnCommentLost",function(e){var n=t.props.intl.formatMessage;Object(Ce.h)()&&!Object(_e.b)(n({id:"unsaved.comment.lost"}))||e()}),f()(p()(t),"_callAnalyticsEvent",function(e){t.props.createAnalyticsEvent({type:"sendTrackEvent",data:e}).fire()}),f()(p()(t),"_getCommentAnalyticsObject",function(e){var n=e.id,t=e.spaceId,o=e.ownerId,i=e.requestType,a=e.isInlineComment,r=e.contentType,d=e.parentId;return{containerType:"space",containerId:t,source:"viewPageScreen",objectType:"page",objectId:o.toString(),action:"editComment"===i?"updated":"created",actionSubject:"comment",actionSubjectId:n,attributes:{commentType:a?"inline":"page",pageType:r,parentCommentId:d.toString()}}}),f()(p()(t),"_sendExperienceAnalytics",function(e){Object(se.a)(d()({},e,{experienceId:t.props.contentId}))}),f()(p()(t),"_editorSaveHandler",function(e){var n=t.props.intl.formatMessage,o=t.props,i=o.saveComment,a=o.onRefetchComments,r=t.state.editorState;if(e.html&&e.html.trim())e.requestType=r.mode,r.mode===Ne.REPLY&&(e.showCommentAfter=t._getThreadLastCommentId(r.contentId)),t._eligibleAddPageCommentTracking(!1,Ne.ADD)&&(t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_PUBLISH,isAttempt:!0}),Object(le.a)().start({name:ue.a.ADD_PAGE_COMMENT_PUBLISH,id:ae()(),timeout:pe.a.EDITOR_PUBLISH,onFailure:function(){Object(le.a)().fail({name:ue.a.ADD_PAGE_COMMENT,error:new Error("Page comment publish timed out")})}})),i(e).then(function(n){var o=n.data.experimentalSaveComment,i=o.id,d=o.parentId,c=o.ownerId,m=o.isInlineComment,s=t.props,l=s.spaceId,u=s.contentType,p=t._getCommentAnalyticsObject({id:i,spaceId:l,parentId:d,contentType:u,ownerId:c,isInlineComment:m,requestType:e.requestType});t._callAnalyticsEvent(p);var v={commentId:i,threadLastCommentId:t._getThreadLastCommentId(r.contentId),parentId:d,mode:r.mode};a(v).then(function(){t._hideEditor(),t._eligibleAddPageCommentTracking(m,Ne.RESET)&&(t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_PUBLISH,wasExperienceSuccessful:!0}),Object(le.a)().succeed({name:ue.a.ADD_PAGE_COMMENT_PUBLISH}),Object(le.a)().succeed({name:ue.a.ADD_PAGE_COMMENT}))})}),t._removeSlowCommentURLParams();else{var c={errorMessage:n({id:"content.empty"}),errorType:"warning"};t.setState({editorState:d()({},t.state.editorState,c)})}}),f()(p()(t),"_editorCancelHandler",function(){t._eligibleAddPageCommentTracking(!1,Ne.ADD)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_CLOSE,isAttempt:!0}),t._hideEditor(),t._removeSlowCommentURLParams(),t._eligibleAddPageCommentTracking(!1,Ne.RESET)&&t._sendExperienceAnalytics({experience:R.b.PAGE_COMMENT_CLOSE,wasExperienceSuccessful:!0})}),f()(p()(t),"_onDeleteComment",function(e){(0,t.props.deleteComment)(e)}),f()(p()(t),"_onReplyToComment",function(e){t._warnCommentLost(function(){return t._replyCommentAction(e)})}),f()(p()(t),"_onEditComment",function(e){t._warnCommentLost(function(){return t._editCommentAction(e)})}),f()(p()(t),"_getCommentActions",function(){return{deleteComment:t._onDeleteComment,replyToComment:t._onReplyToComment,editComment:t._onEditComment}}),f()(p()(t),"_closeEditorError",function(){t.setState({editorState:d()({},t.state.editorState,{errorMessage:"",updateTime:0})})}),f()(p()(t),"_getReference",function(e){return function(n){return t.domNodes[e]=n}}),t}return b()(n,e),l()(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.replyToCommentId,t=e.shouldOpenAddComment,o=e.openEditCommentId,i=e.isEditCommentFound,a=e.focusOnCommentId,r=e.readyToScrollToElement,d=this.state.editorState;o&&i&&(this._editCommentAction(o),this.scrollToElement("comment-".concat(o))),n&&d.contentId!==n&&this._replyCommentAction(n),t&&this._triggerShowAddCommentEditor(),a&&r&&this.scrollToElement("comment-".concat(a)),t&&r&&this.scrollToElement("addcomment"),Object(de.a)("rte-quick-edit-ready",this._hideEditorIfNotForComments)}},{key:"componentDidUpdate",value:function(){Object(Ee.d)()}},{key:"componentWillUnmount",value:function(){Object(de.c)("rte-quick-edit-ready",this._hideEditorIfNotForComments),this._hideEditor()}},{key:"scrollToElement",value:function(e){var n=Object(ge.d)(e);n&&n.scrollIntoView()}},{key:"_getThreadLastCommentId",value:function(e){var n,t,o,i;return this.props.commentsData.forEach(function(a){n||(void 0!==t&&(t>=a.depthLevel?n=o:i=a.id),a.id===e&&(t=a.depthLevel),o=a.id)}),n||(n=i||e),n}},{key:"_removeSlowCommentURLParams",value:function(){var e=this.props,n=e.replace,t=e.location,o=t.query,i=["showCommentArea","showComments","editComment","commentId"];if(i.map(function(e){return void 0!==o[e]}).filter(function(e){return e}).length){var a=ee()(t.query,i);n(d()({},t,{query:a,search:z.a.format({query:a})}))}}},{key:"_canViewProfile",value:function(){var e=this.props.currentUserInfo,n=e.isAnonymous,t=e.currentUserCanViewProfile;return n?!0===t:!1!==t}},{key:"_isAddCommentEditorEnabled",value:function(){var e=this.props.contentId,n=this.state.editorState;return n.contentId===e&&n.mode===Ne.ADD}},{key:"_renderHeadLine",value:function(){var e=this.props.totalComments;return e?A.a.createElement("h2",{"data-test-id":"comments-count"},1===e?A.a.createElement(ne.b,{id:"comment.singular",values:{0:e}}):A.a.createElement(ne.b,{id:"comment.plural",values:{0:e}})):null}},{key:"_renderEditCommentErrorFlag",value:function(){var e=this.props,n=e.openEditCommentId,t=e.isEditCommentFound;return n&&!t?A.a.createElement(oe.a,{type:"error"},A.a.createElement(ne.b,{id:"comment.edit.not.found"})):null}},{key:"_renderCommentsList",value:function(){var e=this.props,n=e.contentId,t=e.currentUserInfo,o=e.commentsData,i=e.contentType,a=e.focusOnCommentId,r=e.editedCommentsIds,d=e.atlToken,c=this.state,m=c.updatedCommentsIds,s=c.commentsIds,l=c.editorState,u={atlToken:d,commentsIds:s,contentType:i,contentId:n,comments:o,commentActions:this._getCommentActions(),showAuthorLabel:"blogpost"===i,focusOnCommentId:a,highlightedComments:r.length>0?r:m,userInfo:t,editor:l,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return A.a.createElement(he.a,u)}},{key:"_renderAddCommentField",value:function(){var e=this.props,n=e.contentId,t=e.canAddComments,o=e.currentUserInfo,i=e.atlToken,a=this.state.editorState;if(t){var r={style:{paddingTop:20},contentId:n,atlToken:i,mode:"add",id:"addcomment",userInfo:o,isEditorEnabled:this._isAddCommentEditorEnabled(),onClickCommentAddPrompt:this._showAddCommentEditor,editor:a,canViewProfile:this._canViewProfile(),editorSaveHandler:this._editorSaveHandler,editorCancelHandler:this._editorCancelHandler,onEditorLoaded:this._onEditorLoaded};return A.a.createElement(N.Fragment,null,A.a.createElement(ke.a,r),a.mode===Ne.ADD&&A.a.createElement(q.a,null))}}},{key:"_renderEditorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.state.editorState;return A.a.createElement(N.Fragment,null,A.a.createElement(fe.a,{isShowing:!0,type:n.errorType||"error",body:Ie[n.errorMessage]?e({id:Ie[n.errorMessage]}):n.errorMessage,close:"manual",onClose:this._closeEditorError}),A.a.createElement(q.b,null),A.a.createElement(ve.a,{name:ue.a.ADD_PAGE_COMMENT,error:new Error(n.errorMessage)}))}},{key:"_renderGraphQLErrorMessage",value:function(){var e=this.props.intl.formatMessage,n=this.props,t=n.saveCommentError,o=n.deleteCommentError,i=t||o,a=x()(i,"graphQLErrors[0].message");return A.a.createElement(N.Fragment,null,A.a.createElement(fe.a,{isShowing:!0,type:"error",body:Ie[a]?e({id:Ie[a]}):a,close:"manual",onClose:this._closeEditorError}),A.a.createElement(q.b,null),A.a.createElement(ve.a,{name:ue.a.ADD_PAGE_COMMENT,error:new Error(a)}))}},{key:"render",value:function(){var e=this.props,n=e.contentId,t=e.saveCommentError,o=e.deleteCommentError,i=e.totalComments,a=e.hasNextPage,r=this._isAddCommentEditorEnabled(),d=this.state.editorState;return A.a.createElement("div",{className:Se.a.root,ref:this._getReference("root"),id:"comments-section","data-test-id":"comments-section-new"},this._renderHeadLine(),this._renderEditCommentErrorFlag(),t||o?this._renderGraphQLErrorMessage():null,this._renderCommentsList(),this._renderAddCommentField(),d.errorMessage?this._renderEditorMessage():null,r?null:A.a.createElement(ye.a,{contentId:n,onClick:this._triggerShowAddCommentEditor}),a?null:A.a.createElement(me.a,{subject:"comments",details:{totalComments:i}}),d.isEditorLoaded&&d.mode===Ne.ADD&&A.a.createElement(q.c,null))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return!K()(n.commentsIds,e.commentsIds)&&!1===n.hasNextPage&&!1===e.hasNextPage&&e.hasFetchedComments?{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage,updatedCommentsIds:Z()(e.commentsIds,n.commentsIds)}:d()({},n,{commentsIds:e.commentsIds,hasNextPage:e.hasNextPage})}}]),n}(N.Component))||a)||a)||a),we={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CommentsSectionQuerySaveComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"params"}},type:{kind:"NamedType",name:{kind:"Name",value:"ExperimentalCommentInput"}},directives:[]}],directives:[{kind:"Directive",name:{kind:"Name",value:"experimental"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"experimentalSaveComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"params"},value:{kind:"Variable",name:{kind:"Name",value:"params"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"asyncRenderSafe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isInlineComment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"ownerId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parentId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:249,source:{body:"\n  mutation CommentsSectionQuerySaveComment($params: ExperimentalCommentInput)\n    @experimental {\n    experimentalSaveComment(params: $params) {\n      asyncRenderSafe\n      html\n      id\n      isInlineComment\n      ownerId\n      parentId\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Fe=t("QwJJ"),Te=t("ZP3P"),Pe=function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i)));var r=i[0];return t.message=r.message,t.graphQLErrors=r.graphQLErrors,t}return b()(n,e),n}(I()(Error));var xe=Object(F.connect)(function(e,n){var t=n.commentsData,o=n.hasFetchedComments,i=t.map(function(e){return e.id}),a=Object(O.a)(e),r=a.query,d=r.focusedCommentId,c=r.replyToComment,m=r.showCommentArea,s=r.editComment,l=r.commentId,u="true"===s&&l||"";return{focusOnCommentId:d||c,replyToCommentId:c,shouldOpenAddComment:"true"===m,openEditCommentId:u,isEditCommentFound:!!u&&-1!==i.indexOf(u),readyToScrollToElement:o,hasFetched:o,commentsData:t,commentsIds:i,location:a,atlToken:""}},function(e){return{replace:function(n){return e(Object(T.replace)(n))}}})(Ae),De=[],Le=Object(w.e)(function(e){function n(){var e,t;k()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=C()(this,(e=g()(n)).call.apply(e,[this].concat(i))),f()(p()(t),"state",{webPanels:null}),f()(p()(t),"_loadedCursor",{}),f()(p()(t),"fetchWebPanels",function(){var e=t.props,n=e.contentId,o=e.client,i={contentId:n,location:Q.a.ATL_PAGE_CONTENT_FOOTER_ACTIONS};o.query({query:W.a,variables:i}).then(function(e){var n=e.data,o=x()(n,"webPanels");t.setState({webPanels:o})})}),f()(p()(t),"_getCommentVersion",function(e){return{id:x()(e,"node.id"),by:x()(e,"node.version.by"),when:x()(e,"node.version.when")}}),f()(p()(t),"_getADF",function(e){var n=x()(e,"node.body.atlas_doc_format.value");if(n)try{return JSON.parse(n)}catch(e){console.error("Invalid adf document",e)}return null}),f()(p()(t),"_buildUserInfo",function(e){return{displayName:x()(e,"displayName"),avatarUrl:x()(e,"photos.length")&&x()(e,"photos").find(function(e){return e.isPrimary}).value,accountId:x()(e,"id")}}),f()(p()(t),"_saveComment",function(e,n){return function(t){var o=t.watch,i=void 0!==o&&o,a=t.contentId,r=t.commentId,d=void 0===r?"":r,c=t.html,m=t.requestType,s=t.captcha;return n({variables:{params:{contentId:a||e,commentId:d,requestType:m,html:c,watch:i,uuid:Object(B.a)(),captcha:s}}})}}),f()(p()(t),"_deleteComment",function(e,n){return function(e){return n({variables:{contentId:e}})}}),f()(p()(t),"_onRefetchComments",function(e,n){var t=e.commentId;return n({variables:{contentId:t},query:Te.a,updateQuery:function(n,o){var i=o.fetchMoreResult,a=x()(i,"content.nodes[0]");if(!a)return n;var r=L()(n),d=[],c=e.threadLastCommentId,s=e.parentId,l=e.mode;if("editComment"===l){var u=n.content.child.comment.edges.findIndex(function(e){return e.node.id===t}),p=r.content.child.comment.edges.slice(0,u),v=[{cursor:u.toString(),node:a,__typename:"ContentEdge"}],f=r.content.child.comment.edges.slice(u+1);d=[].concat(m()(p),v,m()(f)),De=[t]}else if("replyComment"===l){var h=c||s,k=n.content.child.comment.edges.findIndex(function(e){return e.node.id===h}),y=r.content.child.comment.edges.slice(0,k+1),C=[{cursor:(k+1).toString(),node:a,__typename:"ContentEdge"}],_=r.content.child.comment.edges.slice(k+1);d=[].concat(m()(y),C,m()(_)),De=[]}else"addComment"!==l&&"0"!==s||(d=r.content.child.comment.edges.concat([{cursor:n.content.child.comment.count.toString(),node:a,__typename:"ContentEdge"}]),De=[]);return Object.assign({},n,{content:{child:{comment:{count:d.length,pageInfo:{endCursor:(d.length-1).toString(),hasNextPage:!1,__typename:r.content.child.comment.pageInfo.__typename},edges:d,__typename:r.content.child.comment.__typename},__typename:r.content.child.__typename},nodes:m()(r.content.nodes),__typename:r.content.__typename}})}})}),t}return b()(n,e),l()(n,[{key:"componentDidMount",value:function(){this.fetchWebPanels()}},{key:"_buildCommentsData",value:function(e){var n=this,t=x()(e,"content.child.comment.edges");return t&&0!==t.length?t.map(function(e){var t=x()(e,"node.ancestors")||[],o=x()(t,"length")||0,i=x()(t,"ancestors[0].id")||null,a=x()(e,"node.body.view.value")||"",r=x()(e,"node.body.editor.value")||"",d=n._getADF(e),c=n._getCommentVersion(e),m=x()(e,"node.body.view.webresource.key")||[],s=Object(H.a)(x()(e,"node.history.createdBy"));return{ancestors:t,depthLevel:o,parentId:i,bodyExportView:a,contentContainerCreatedBy:Object(H.a)(x()(e,"node.container.history.createdBy")),bodyEditorView:r,adf:d,version:c,webResourceKeys:m,createdBy:s,createdByAuthor:Boolean(x()(e,"node.container.history.createdBy.accountId")&&x()(e,"node.version.by.accountId")&&x()(e,"node.container.history.createdBy.accountId")===x()(e,"node.version.by.accountId")),id:x()(e,"node.id")||"",linkWebui:x()(e,"node.links.webui")||"",operations:x()(e,"node.operations")||[],createdFriendly:x()(e,"node.version.friendlyWhen")||"",createdDate:x()(e,"node.version.when")||""}}):[]}},{key:"_fetchMore",value:function(e,n){return e({variables:n,updateQuery:function(e,n){var t=n.fetchMoreResult;return t?Object.assign({},e,{content:{child:{comment:{count:e.content.child.comment.count+t.content.child.comment.count,pageInfo:d()({},t.content.child.comment.pageInfo,{__typename:t.content.child.comment.pageInfo.__typename}),edges:[].concat(m()(e.content.child.comment.edges),m()(t.content.child.comment.edges)),__typename:t.content.child.comment.__typename},__typename:t.content.child.__typename},nodes:m()(t.content.nodes),__typename:t.content.__typename}}):e}})}},{key:"_getExperience",value:function(e){return"page"===e?R.b.PAGE_COMMENT_ADD:""}},{key:"render",value:function(){var e=this,n=this.props.contentId;return n?A.a.createElement(M.a,null,A.a.createElement(j.a,{subject:"comments",beforeMount:!0}),A.a.createElement(w.d,{query:G.a,variables:{contentId:n,offset:0,first:100},fetchPolicy:"cache-and-network",errorPolicy:"all"},function(t){var o=t.data,i=t.loading,a=t.error,r=t.fetchMore,c=t.networkStatus;return A.a.createElement(w.c,{mutation:we},function(t,s){var l=s.error,u=s.data;return A.a.createElement(w.c,{mutation:Fe.a,update:function(e,t){var o=t.data.experimentalDeleteComment.contentId,i=e.readQuery({query:G.a,variables:{contentId:n,offset:0,first:100}}),a=i.content.child.comment.edges.filter(function(e){return e.node.id!==o}).map(function(e){var n=e.node.ancestors.filter(function(e){return e.id!==o}),t=e.node,i={container:t.container,body:t.body,history:t.history,id:t.id,links:t.links,operations:t.operations,version:t.version},a=e.cursor;return Object.assign({},e,{cursor:a,node:d()({ancestors:n},i,{__typename:e.node.__typename}),__typename:e.__typename})}),r=i.user;e.writeQuery({query:G.a,variables:{contentId:n,offset:0,first:100},data:{content:{child:{comment:{count:a.length,pageInfo:{endCursor:(a.length-1).toString(),hasNextPage:!1,__typename:i.content.child.comment.pageInfo.__typename},edges:a,__typename:i.content.child.comment.__typename},__typename:i.content.child.__typename},nodes:m()(i.content.nodes),__typename:i.content.__typename},user:r}})}},function(d,m){var s=m.error,p=m.data;if(a)throw new Pe(a);if(!x()(o,"content.nodes[0]")||!x()(o,"content.child.comment"))return null;var v=x()(o,"content.child.comment"),f=v.count,h=v.pageInfo,k=h.hasNextPage,y=h.endCursor,C=x()(o,"content.nodes[0]"),_=C.operations,g=C.space,E=g.homepageId,b=g.id,S=C.type,I=e._buildUserInfo(x()(o,"user")),N=e.state.webPanels,w=E===n,F=_.find(function(e){return"create"===e.operation&&"comment"===e.targetType})&&Boolean(!w||f>0);return!k||i||e._loadedCursor[y]||(e._loadedCursor[y]=!0,e._fetchMore(r,{contentId:n,offset:Number(y)+1})),A.a.createElement(V.a.Provider,{value:{isLikesEnabled:!!N}},A.a.createElement(U.a,{experience:e._getExperience(S),experienceId:n},A.a.createElement(q.d,null,A.a.createElement(xe,{onRefetchComments:function(n){return e._onRefetchComments(n,r)},canAddComments:F,currentUserInfo:I,canViewProfile:!!I,commentsData:e._buildCommentsData(o),contentId:n,contentType:S,spaceId:b,currentUserCanViewProfile:!!I,isAnonymous:!I,totalComments:k?0:f,hasFetchedComments:!i,hasNextPage:k,networkStatus:c,saveComment:e._saveComment(n,t),deleteComment:e._deleteComment(n,d),saveCommentData:u,saveCommentError:l,deleteCommentData:p,deleteCommentError:s,editedCommentsIds:De}))))})})})):null}}]),n}(N.Component));n.default=Le},TcLa:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,'.CommentActions_actions_Hnn{font-size:12px;color:#707070;margin-top:5px}.CommentActions_actionsList_3yu{padding:0}.CommentActions_actionItem_1ro{display:inline-block}.CommentActions_actionItem_1ro:not(.CommentActions_noDot_1Yj):before{content:"\\2022";color:#707070;padding:0 5px}.CommentActions_actionItem_1ro:first-child:before{display:none}.wiki-content .CommentActions_actionItem_1ro a,.wiki-content .CommentActions_actionItem_1ro a:hover,.wiki-content .CommentActions_actionItem_1ro a:link,.wiki-content .CommentActions_actionItem_1ro a:visited{color:#707070;cursor:pointer}.wiki-content .CommentActions_actionItem_1ro a:hover{text-decoration:underline}',""]),n.locals={actions:"CommentActions_actions_Hnn",actionsList:"CommentActions_actionsList_3yu",actionItem:"CommentActions_actionItem_1ro",noDot:"CommentActions_noDot_1Yj"}},UbDs:function(e,n,t){var o=t("8rMV"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},"V/ff":function(e,n,t){"use strict";t.d(n,"f",function(){return a}),t.d(n,"g",function(){return r}),t.d(n,"e",function(){return d}),t.d(n,"b",function(){return c}),t.d(n,"a",function(){return m}),t.d(n,"c",function(){return s}),t.d(n,"d",function(){return l}),t.d(n,"h",function(){return u});var o=t("Jygk"),i=t.n(o),a={activateEditor:function(e){return i.a.AJS.Confluence.QuickEdit.activateEditor(e)},deactivateEditor:function(){return i.a.AJS.Confluence.QuickEdit.deactivateEditor()},postInitialise:function(){return i.a.AJS.Confluence.QuickEdit.postInitialise()}},r={preInitialise:function(e){return i.a.AJS.Confluence.QuickEdit.QuickEditPage.preInitialise(e)}},d={preInitialise:function(){return i.a.AJS.Confluence.QuickEdit.QuickComment.preInitialise()},postInitialise:function(e){return i.a.AJS.Confluence.QuickEdit.QuickComment.postInitialise(e)}},c={removeAllCancelHandlers:function(){return i.a.AJS.Confluence.Editor.removeAllCancelHandlers()},addCancelHandler:function(e){return i.a.AJS.Confluence.Editor.addCancelHandler(e)},setSaveHandler:function(e){return i.a.AJS.Confluence.Editor.overrideSave(e)},addSaveHandler:function(e){return i.a.AJS.Confluence.Editor.addSaveHandler(e)},setSavingState:function(e){return i.a.AJS.Confluence.Editor.UI.toggleSavebarBusy(e)},getCommentsPlugins:function(){return i.a.AJS.Confluence.Editor._Profiles.createProfileForCommentEditor().plugins},getPagePlugins:function(){return i.a.AJS.Confluence.Editor._Profiles.createProfileForPageEditor({versionComment:!0,notifyWatchers:!0}).plugins}},m=function(){return new i.a.AJS.Confluence.QuickEditCaptchaManager},s=function(){return i.a.tinymce&&i.a.tinymce.activeEditor},l=function(){var e=s();return e?e.getContent().trim():null},u=function(){var e=s();return e?e.getContent()!==e.startContent:null}},WRP3:function(e,n,t){"use strict";var o,i,a,r,d=t("97Jx"),c=t.n(d),m=t("uDfI"),s=t("ERkP"),l=t.n(s),u=t("/FQd"),p=t("tQaH"),v=t.n(p),f=t("VrFO"),h=t.n(f),k=t("Y9Ll"),y=t.n(k),C=t("N+ot"),_=t.n(C),g=t("AuHH"),E=t.n(g),b=t("1Pcy"),S=t.n(b),I=t("5Yy7"),N=t.n(I),A=t("KEM+"),w=t.n(A),F=(t("aWzz"),t("6OdC")),T=t.n(F),P=t("O94r"),x=t.n(P),D=t("JWvE"),L=t("IGvV"),O=t("x98U"),M=t("iUdj"),H=t("fLXQ"),V=t("nnRT"),j=t.n(V),R=t("2srY"),U=t.n(R),q=t("L21V"),B=t("M2LZ"),Q=t("JpXc"),W=t("Sl8s"),G=t("9Kiz"),J=t("fYdy"),z=t("Wt1t"),Y=t("jqY8"),K=t("JzH8"),$=t("1vxf"),Z=t("v45N"),X=t.n(Z),ee=Object(L.a)(X.a)(o=Object(q.g)((a=i=function(e){function n(){var e;return h()(this,n),(e=_()(this,E()(n).call(this)))._onDeleteClick=e._onDeleteClick.bind(S()(e)),e._onReplyClick=e._onReplyClick.bind(S()(e)),e._onEditClick=e._onEditClick.bind(S()(e)),e}return N()(n,e),y()(n,[{key:"shouldComponentUpdate",value:function(e){return!j()(this.props,e)}},{key:"_onReplyClick",value:function(e){e.preventDefault();var n=this.props,t=n.comment;(0,n.replyToComment)(t.id)}},{key:"_onEditClick",value:function(e){e.preventDefault();var n=this.props,t=n.comment;(0,n.editComment)(t.id)}},{key:"_onDeleteClick",value:function(){var e=this.props.intl.formatMessage;if(Object(Y.b)(e({id:"remove.comment.confirmation.message"}))){var n=this.props;(0,n.deleteComment)(n.comment.id)}}},{key:"_renderLikesAction",value:function(e,n,t,o){return l.a.createElement("li",{key:e.id,className:x()("comment-action-like",n.actionItem,n.noDot)},l.a.createElement($.a,{contentId:e.id,contentType:"comment",containerId:t,containerType:o,isForComment:!0}))}},{key:"render",value:function(){var e=this,n=this.props,t=n.contentId,o=n.contentType,i=n.comment;return l.a.createElement("div",{className:X.a.actions},l.a.createElement("ul",{className:X.a.actionsList},l.a.createElement("li",{className:x()(X.a.actionItem,"action-reply-comment")},l.a.createElement("a",{className:"comment-reply-link",onClick:this._onReplyClick},l.a.createElement(q.b,{id:"comment.reply"}))),i.operations.find(function(e){return"update"===e.operation})?l.a.createElement("li",{className:x()(X.a.actionItem,"comment-action-edit")},l.a.createElement("a",{className:"comment-edit-link",onClick:this._onEditClick},l.a.createElement(q.b,{id:"comment.edit"}))):null,i.operations.find(function(e){return"delete"===e.operation})?l.a.createElement("li",{className:X.a.actionItem},l.a.createElement("a",{"data-test-id":"comment-delete-link",onClick:this._onDeleteClick,id:"remove-comment-".concat(i.id)},l.a.createElement(q.b,{id:"remove.name"}))):null,l.a.createElement(z.a.Consumer,null,function(n){return n.isLikesEnabled?e._renderLikesAction(i,X.a,t,o):null}),l.a.createElement("li",{className:X.a.actionItem},l.a.createElement(K.a,{href:U()(i,"linkWebui")},U()(i,"createdFriendly")))))}}]),n}(s.Component),w()(i,"displayName","CommentActions"),o=a))||o)||o,ne=t("7eka"),te=t.n(ne),oe=Object(L.a)(te.a)(r=function(e){function n(){var e,t;h()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=_()(this,(e=E()(n)).call.apply(e,[this].concat(i))),w()(S()(t),"state",{commentNode:null}),t._bodyContainer=l.a.createRef(),t}return N()(n,e),y()(n,[{key:"componentDidMount",value:function(){var e=this.props.comment;this._setCommentNode(),B.a.require(U()(e,"webResourceKeys")||[]),Object(W.d)(this._bodyContainer.current)}},{key:"shouldComponentUpdate",value:function(e,n){return!j()(this.props,e)||!j()(this.state,n)}},{key:"_isCommentFabricEligible",value:function(e){return this.props.isCommentFabricEditorFlagEnabled&&e&&e.adf}},{key:"_setCommentNode",value:function(){this.setState({commentNode:this._bodyContainer.current})}},{key:"_renderUserLink",value:function(){var e=this.props,n=e.canViewProfile,t=e.comment.createdBy,o={userId:t.accountId,fullName:t.displayName,isAnonymous:t.isAnonymous,canViewProfile:n};return l.a.createElement("div",{className:te.a.author},l.a.createElement(J.a,o))}},{key:"_renderCommentActions",value:function(){var e=this.props,n=e.comment,t=e.commentActions,o=e.contentId,i=e.contentType,a=v()({comment:n,contentId:o,contentType:i},t);return l.a.createElement(ee,a)}},{key:"_renderCommentContent",value:function(){var e=this.props,n=e.comment,t=e.contentId;if(this._isCommentFabricEligible(n))return l.a.createElement("div",{ref:this._bodyContainer},l.a.createElement(Q.a,{objectId:t,adf:n.adf,appearance:"comment"}));var o=n.bodyExportView&&n.bodyExportView.replace(/confluence-userlink/g,"");return l.a.createElement("div",{className:x()(te.a.body,"comment-content"),ref:this._bodyContainer,dangerouslySetInnerHTML:{__html:o}})}},{key:"render",value:function(){var e=this.props,n=e.comment,t=e.showAuthorLabel;return l.a.createElement("div",{className:"wiki-content"},l.a.createElement("h4",null,this._renderUserLink(),n.createdByAuthor&&t?l.a.createElement("span",{className:te.a.authorLabel},l.a.createElement(q.b,{id:"author.name"})):null),this._renderCommentContent(),this._renderCommentActions(),l.a.createElement(G.a,{node:this.state.commentNode}))}}]),n}(s.Component))||r;oe.displayName="CommentBody";var ie,ae,re=t("pYTW"),de=t.n(re),ce=(ie=Object(L.a)(de.a),Object(q.g)(ae=ie(ae=function(e){function n(){return h()(this,n),_()(this,E()(n).apply(this,arguments))}return N()(n,e),y()(n,[{key:"render",value:function(){var e=this.props,n=e.intl.formatMessage,t=e.onClick;return l.a.createElement("div",{"data-test-id":"add-comment-button",title:n({id:"comment.name.tooltip"}),className:x()("quick-comment-prompt",de.a.root),onClick:t},l.a.createElement(q.b,{id:"quick.comment.placeholder.message"}))}}]),n}(s.Component))||ae)||ae);ce.displayName="CommentSpinner";var me,se,le,ue,pe=t("2hrV"),ve=t("wjr4"),fe=t.n(ve),he=Object(L.a)(fe.a)(me=function(e){function n(){return h()(this,n),_()(this,E()(n).apply(this,arguments))}return N()(n,e),y()(n,[{key:"componentDidMount",value:function(){this.props.onDidMount()}},{key:"render",value:function(){return l.a.createElement("div",{className:"quick-comment-loading-container",style:{display:"block"}},l.a.createElement("div",{className:fe.a.spinner},l.a.createElement(pe.a,{size:"medium"})))}}]),n}(s.Component))||me;he.displayName="CommentSpinner",he.defaultProps={onDidMount:function(){}};var ke,ye,Ce,_e=function(){},ge=function(e,n,t,o){if("editor"===t)return"view"===o.mode||e.isEditorLoaded===n.isEditorLoaded},Ee=Object(L.a)(fe.a)((ue=le=function(e){function n(){var e,t;h()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=_()(this,(e=E()(n)).call.apply(e,[this].concat(i))))._editorSaveHandler=t._editorSaveHandler.bind(S()(t)),t._editorCancelHandler=t._editorCancelHandler.bind(S()(t)),t._editorAfterActivate=t._editorAfterActivate.bind(S()(t)),t._assignContainer=t._assignContainer.bind(S()(t)),t.state={Editor:null},t}return N()(n,e),y()(n,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,Object(M.a)(function(n){e._isMounted&&e.setState({Editor:n})})}},{key:"shouldComponentUpdate",value:function(e,n){var t=this.props.mode===e.mode?ge:_e;return!T()(this.props,e,t)||this.state.Editor!==n.Editor&&"view"!==this.props.mode}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"_editorSaveHandler",value:function(e){var n=this.props,t=n.editorSaveHandler,o=n.contentId,i=n.comment.id;return t(v()({contentId:o,commentId:i},e))}},{key:"_editorCancelHandler",value:function(){return this.props.editorCancelHandler()}},{key:"_editorAfterActivate",value:function(){Object(H.k)(this.commentContainer,{topGap:60,bottomGap:10,duration:100})}},{key:"_renderProfilePicture",value:function(e){var n=this.props,t=n.canViewProfile,o=n.userInfo,i=o.avatarUrl,a=o.accountId,r={userId:a,src:i,isAnonymous:!a},d=v()({},r,{canViewProfile:t,size:"medium"});return l.a.createElement("div",{className:fe.a.avatar},e?l.a.createElement(D.a,d):l.a.createElement(O.a,d))}},{key:"_renderCommentBody",value:function(){var e=this.props,n=e.comment,t=e.contentId,o=e.contentType,i=e.commentActions,a={comment:n,contentId:t,contentType:o,canViewProfile:e.canViewProfile,showAuthorLabel:e.showAuthorLabel,commentActions:i,isCommentFabricEditorFlagEnabled:e.isCommentFabricEditorFlagEnabled};return l.a.createElement(oe,a)}},{key:"_renderCommentEditor",value:function(){var e=this.props,n=e.editor,t=e.comment,o=e.contentId,i=e.onEditorLoaded,a=e.shouldHideEditor,r=this.state.Editor;if(a)return null;var d={saveHandler:this._editorSaveHandler,cancelHandler:this._editorCancelHandler,afterActivate:this._editorAfterActivate,hasError:!!n.errorMessage,updateTime:n.updateTime,content:{editorContent:t.bodyEditorView},contentType:"comment",commentId:t&&t.id,contentId:o,onLoadCompleteCallBack:i};return r?l.a.createElement(r,d):null}},{key:"_assignContainer",value:function(e){this.commentContainer=e}},{key:"render",value:function(){var e=this,n=this.props,t=n.comment,o=n.className,i=n.id,a=n.style,r=n.onClickCommentAddPrompt,d=n.editor,m=n.isEditorEnabled,s=n.mode,p=n.isFocused,f=n.isHighlighted,h={style:v()({},a,{marginLeft:40*t.depthLevel-(p||f?10:0)||0}),className:x()("comment",fe.a.comment,w()({},fe.a.focused,(p||f)&&"view"===s),o)};"view"!==s&&"edit"!==s||(h.id="comment-".concat(t.id),h["data-test-id"]="comment-".concat(t&&t.id?t.id:"new")),i&&(h.id=i);var k="replyComment"===d.mode;k&&(h["data-parent-comment-id"]=t.id);var y="add"===s&&m&&!d.isEditorLoaded,C="edit"===s&&(!d.isEditorLoaded||!t.bodyEditorView&&"editComment"===d.mode),_=y||C,g="view"===s?"":"quick-comment-container ".concat(k?"reply":s);return l.a.createElement("div",c()({},h,{ref:this._assignContainer}),l.a.createElement(u.a,null,function(n){var t=n.featureFlags["confluence.frontend.profile-cards.v2"];return e._renderProfilePicture(t)}),l.a.createElement("div",{className:x()(fe.a.bodyContainer,g)},"view"===s?this._renderCommentBody():null,"edit"===s?this._renderCommentEditor():null,"add"!==s?null:m?this._renderCommentEditor():l.a.createElement(ce,{onClick:r}),_?l.a.createElement(he,{onDidMount:this._editorAfterActivate}):null))}}]),n}(s.Component),w()(le,"displayName","CommentComponent"),w()(le,"defaultProps",{comment:{},onEditorLoaded:function(){}}),se=ue))||se,be=t("x+QU"),Se=t.n(be)()({loader:function(){return Promise.all([t.e(27),t.e(13),t.e(2),t.e(1),t.e(0),t.e(358)]).then(t.bind(null,"gOoR")).then(function(e){return e.CommentEditor})},loading:function(){return null}}),Ie=function(){},Ne=function(e,n,t,o){if("editor"===t)return"view"===o.mode||e.isEditorLoaded===n.isEditorLoaded},Ae=Object(L.a)(fe.a)((Ce=ye=function(e){function n(){var e,t;h()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=_()(this,(e=E()(n)).call.apply(e,[this].concat(i))),w()(S()(t),"_editorSaveHandler",function(e){var n={},o=t.props,i=o.editorSaveHandler,a=o.contentId,r=o.comment.id;if("editComment"===o.editor.mode){var d=t.props.comment.version.number;n.number=d+1}return i(v()({contentId:a,commentId:r,version:n},e))}),t._editorCancelHandler=t._editorCancelHandler.bind(S()(t)),t._editorAfterActivate=t._editorAfterActivate.bind(S()(t)),t._assignContainer=t._assignContainer.bind(S()(t)),t}return N()(n,e),y()(n,[{key:"shouldComponentUpdate",value:function(e){var n=this.props.mode===e.mode?Ne:Ie;return!T()(this.props,e,n)||"view"!==this.props.mode}},{key:"_editorCancelHandler",value:function(){return this.props.editorCancelHandler()}},{key:"_editorAfterActivate",value:function(){Object(H.k)(this.commentContainer,{topGap:60,bottomGap:10,duration:100})}},{key:"_renderProfilePicture",value:function(){var e=this.props,n=e.canViewProfile,t=e.userInfo,o=t.avatarUrl,i=t.accountId,a={userId:i,src:o,isAnonymous:!i},r=v()({},a,{canViewProfile:n,withUserHover:n,size:"medium"});return l.a.createElement("div",{className:fe.a.avatar},l.a.createElement(O.a,r))}},{key:"_renderCommentBody",value:function(){var e=this.props,n=e.comment,t=e.contentId,o=e.contentType,i=e.commentActions,a={comment:n,contentId:t,contentType:o,canViewProfile:e.canViewProfile,showAuthorLabel:e.showAuthorLabel,commentActions:i,isCommentFabricEditorFlagEnabled:e.isCommentFabricEditorFlagEnabled};return l.a.createElement(oe,a)}},{key:"_renderCommentEditor",value:function(){var e=this.props,n=e.comment,t=e.onEditorLoaded;if(e.shouldHideEditor)return null;var o={saveHandler:this._editorSaveHandler,cancelHandler:this._editorCancelHandler,afterActivate:this._editorAfterActivate,content:{fabricContent:n.adf},onEditorLoaded:t};return l.a.createElement(Se,o)}},{key:"_assignContainer",value:function(e){this.commentContainer=e}},{key:"render",value:function(){var e=this.props,n=e.comment,t=e.className,o=e.id,i=e.style,a=e.onClickCommentAddPrompt,r=e.editor,d=e.isEditorEnabled,m=e.mode,s=e.isFocused,u=e.isHighlighted,p={style:v()({},i,{marginLeft:40*n.depthLevel-(s||u?10:0)||0}),className:x()("comment",fe.a.comment,w()({},fe.a.focused,(s||u)&&"view"===m),t)};"view"!==m&&"edit"!==m||(p.id="comment-".concat(n.id),p["data-test-id"]="comment-".concat(n&&n.id?n.id:"new")),o&&(p.id=o);var f="replyComment"===r.mode;f&&(p["data-parent-comment-id"]=n.id);var h="add"===m&&d&&!r.isEditorLoaded,k="edit"===m&&(!r.isEditorLoaded||!n.bodyEditorView&&"editComment"===r.mode),y=h||k,C="view"===m?"":"quick-comment-container ".concat(f?"reply":m);return l.a.createElement("div",c()({},p,{ref:this._assignContainer}),this._renderProfilePicture(),l.a.createElement("div",{className:x()(fe.a.bodyContainer,C)},"view"===m?this._renderCommentBody():null,"edit"===m?this._renderCommentEditor():null,"add"!==m?null:d?this._renderCommentEditor():l.a.createElement(ce,{onClick:a}),y?l.a.createElement(he,{onDidMount:this._editorAfterActivate}):null))}}]),n}(s.Component),w()(ye,"displayName","CommentFabricComponent"),w()(ye,"defaultProps",{comment:{},onEditorLoaded:function(){}}),ke=Ce))||ke;var we=function(e){var n=c()({},e);return l.a.createElement(u.a,null,function(e){var t=e.featureFlags["confluence.frontend.fabric.page.comment"];return n.isCommentFabricEditorFlagEnabled=t,t?l.a.createElement(Ae,n):l.a.createElement(Ee,n)})};we.displayName="CommentContainerComponent";var Fe=Object(m.connect)(function(e,n){var t=n.mode,o=n.comment,i=n.editor,a=e.views.viewPage.quickEditPreload.get("hasLoaded");return{shouldHideEditor:!("edit"!==t||"replyComment"===i.mode||o.bodyEditorView&&a)}})(we);Fe.displayName="Comment";n.a=Fe},Wt1t:function(e,n,t){"use strict";t.d(n,"a",function(){return d});var o=t("ERkP"),i=t.n(o),a=t("aWzz"),r=t.n(a),d=i.a.createContext({isLikesEnabled:!1});d.Provider.propTypes={value:r.a.shape({isLikesEnabled:r.a.bool})},d.Provider.defaultProps={value:{isLikesEnabled:!1}}},ZP3P:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommentsSectionGetSingleCommentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ancestors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"container"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"atlas_doc_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webresource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keys"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"atlas_doc_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"friendlyWhen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"when"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"by"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1318,source:{body:"\n  query CommentsSectionGetSingleCommentQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        ancestors {\n          id\n        }\n        container {\n          history {\n            createdBy {\n              type\n              displayName\n              profilePicture {\n                path\n              }\n              ... on KnownUser {\n                accountId\n              }\n            }\n          }\n        }\n        body {\n          editor {\n            value\n          }\n          atlas_doc_format {\n            value\n          }\n          view {\n            value\n            webresource {\n              keys\n            }\n          }\n          atlas_doc_format {\n            value\n          }\n        }\n        history {\n          createdBy {\n            type\n            displayName\n            profilePicture {\n              path\n            }\n            ... on KnownUser {\n              accountId\n            }\n          }\n        }\n        id\n        links {\n          webui\n        }\n        operations {\n          operation\n        }\n        version {\n          friendlyWhen\n          number\n          when\n          by {\n            ... on KnownUser {\n              accountId\n              displayName\n              type\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},bfiC:function(e,n,t){"use strict";var o,i,a,r=t("97Jx"),d=t.n(r),c=t("tQaH"),m=t.n(c),s=t("VrFO"),l=t.n(s),u=t("Y9Ll"),p=t.n(u),v=t("N+ot"),f=t.n(v),h=t("AuHH"),k=t.n(h),y=t("5Yy7"),C=t.n(y),_=t("KEM+"),g=t.n(_),E=(t("aWzz"),t("ERkP")),b=t.n(E),S=t("nnRT"),I=t.n(S),N=t("IGvV"),A=t("WRP3"),w=t("g/An"),F=t.n(w),T=Object(N.a)(F.a)((a=i=function(e){function n(){return l()(this,n),f()(this,k()(n).apply(this,arguments))}return C()(n,e),p()(n,[{key:"shouldComponentUpdate",value:function(e){return!I()(this.props,e)}},{key:"render",value:function(){var e=this.props,n=e.contentType,t=e.editor,o=e.userInfo,i=e.canViewProfile,a=e.contentId,r=e.editorSaveHandler,c=e.editorCancelHandler,s=e.comments,l=e.highlightedComments,u=e.commentActions,p=e.focusOnCommentId,v=e.showAuthorLabel,f=e.atlToken,h=e.onEditorLoaded,k=[],y={contentId:a,contentType:n,commentActions:u,canViewProfile:i,showAuthorLabel:v,editor:t,atlToken:f,editorSaveHandler:r,editorCancelHandler:c,onEditorLoaded:h};return s.forEach(function(e){var n=m()({},y,{comment:e,userInfo:e.createdBy,isFocused:p===e.id,isHighlighted:l.indexOf(e.id)>-1,mode:t.contentId===e.id&&"editComment"===t.mode?"edit":"view"});if(k.push(b.a.createElement(A.a,d()({key:e.id},n))),t.contentId===e.id&&"replyComment"===t.mode){var i=m()({},y,{userInfo:o,mode:"edit",isEditorEnabled:!0,comment:{id:e.id,depthLevel:e.depthLevel+1}});k.push(b.a.createElement(A.a,d()({key:"".concat(e.id,"-reply")},i)))}}),b.a.createElement("div",{className:"comment-threads top-level ".concat(F.a.root),id:"page-comments","data-test-id":"page-comments"},k)}}]),n}(E.Component),g()(i,"defaultProps",{highlightedComments:[],onEditorLoaded:function(){}}),o=a))||o;n.a=T},dNso:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentsList_root_47I{margin-top:5px}",""]),n.locals={root:"CommentsList_root_47I"}},eeAI:function(e,n,t){(n=e.exports=t("RDo7")(!1)).push([e.i,".CommentAddPrompt_root_24r{border:1px solid #ccc;border-radius:3px;height:42px;color:#999;padding-top:5px}.CommentAddPrompt_root_24r span{padding:6px}",""]),n.locals={root:"CommentAddPrompt_root_24r"}},fJbV:function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommentsSectionQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"child"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"location"},value:{kind:"ListValue",values:[{kind:"StringValue",value:"footer",block:!1}]}},{kind:"Argument",name:{kind:"Name",value:"depth"},value:{kind:"StringValue",value:"all",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ancestors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"container"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"editor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"atlas_doc_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"view"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webresource"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"keys"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"atlas_doc_format"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"history"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdBy"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profilePicture"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"friendlyWhen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"when"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"by"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"KnownUser"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accountId"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"current"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"photos"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isPrimary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:2327,source:{body:'\n  query CommentsSectionQuery($offset: Int, $first: Int, $contentId: ID!) {\n    content(id: $contentId) {\n      child {\n        comment(\n          offset: $offset\n          first: $first\n          location: ["footer"]\n          depth: "all"\n        ) {\n          count\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n          edges {\n            cursor\n            node {\n              ancestors {\n                id\n              }\n              container {\n                history {\n                  createdBy {\n                    type\n                    displayName\n                    profilePicture {\n                      path\n                    }\n                    ... on KnownUser {\n                      accountId\n                    }\n                  }\n                }\n              }\n              body {\n                editor {\n                  value\n                }\n                atlas_doc_format {\n                  value\n                }\n                view {\n                  value\n                  webresource {\n                    keys\n                  }\n                }\n                atlas_doc_format {\n                  value\n                }\n              }\n              history {\n                createdBy {\n                  type\n                  displayName\n                  profilePicture {\n                    path\n                  }\n                  ... on KnownUser {\n                    accountId\n                  }\n                }\n              }\n              id\n              links {\n                webui\n              }\n              operations {\n                operation\n              }\n              version {\n                number\n                friendlyWhen\n                when\n                by {\n                  type\n                  displayName\n                  ... on KnownUser {\n                    accountId\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      nodes {\n        id\n        operations {\n          operation\n          targetType\n        }\n        space {\n          id\n          homepageId\n        }\n        type\n      }\n    }\n    user(current: true) {\n      displayName\n      photos {\n        isPrimary\n        value\n      }\n      id\n    }\n  }\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}}},"g/An":function(e,n,t){var o=t("dNso"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},iUdj:function(e,n,t){"use strict";n.a=function(e){t.e(359).then(t.bind(null,"LbM8")).then(function(n){return e(n.default)})}},pYTW:function(e,n,t){var o=t("eeAI"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},utTn:function(e,n,t){"use strict";t.d(n,"c",function(){return r}),t.d(n,"b",function(){return d}),t.d(n,"a",function(){return c}),t.d(n,"d",function(){return m});var o=t("Jygk"),i=t.n(o),a=t("M2LZ"),r=function(){a.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(function(){i.a.Confluence.SpaceBlueprint.Dialog.launch()})},d=function(){a.a.require(["wr!com.atlassian.confluence.plugins.confluence-create-content-plugin:resources"]).then(function(){i.a.Confluence.Blueprint.loadDialogAndOpenTemplate({})})},c=function(){return Confluence.Link},m=("undefined"!=typeof Confluence&&Confluence,function(){return"undefined"!=typeof Confluence&&Confluence.Binder&&Confluence.Binder.userHover&&Confluence.Binder.userHover()})},v45N:function(e,n,t){var o=t("TcLa"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}},wjr4:function(e,n,t){var o=t("C4P7"),i=t("7l8p");"string"==typeof o&&(o=[[e.i,o,""]]),e.exports=o.locals||{},e.exports._getContent=function(){return o},e.exports._getCss=function(){return o.toString()},e.exports._insertCss=function(e){return i(o,e)}}}]);
//# sourceMappingURL=page.comments.92038e644abea64d965d-v38.js.map