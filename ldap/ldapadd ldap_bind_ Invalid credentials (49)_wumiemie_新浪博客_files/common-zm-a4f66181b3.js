Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var o;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),c=n.length>>>0;if(0===c)return-1;var i=+e||0;if(Math.abs(i)===1/0&&(i=0),i>=c)return-1;for(o=Math.max(i>=0?i:c-Math.abs(i),0);o<c;){if(o in n&&n[o]===t)return o;o++}return-1}),define(function(require,t,e){function o(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=location.search.substr(1).match(e);return o?decodeURIComponent(o[2]):null}function n(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)}var c,$=require("jquery"),i=require("dialog"),a=require("api"),r=!1,s=2,m={"2980.com":"http://www.2980.com","163.com":"http://mail.163.com","vip.163.com":"http://vip.163.com","netease.com":"http://mail.netease.com","126.com":"http://mail.126.com","yeah.net":"http://www.yeah.net","qq.com":"https://mail.qq.com","foxmail.com":"https://mail.qq.com","vip.qq.com":"https://mail.qq.com","sina.com":"http://mail.sina.com.cn","vip.sina.com":"http://mail.sina.com.cn","aliyun.com":"https://mail.aliyun.com","21cn.com":"http://mail.21cn.com","gmail.com":"http://mail.google.com","yahoo.com":"http://mail.yahoo.com","sohu.com":"http://mail.sohu.com","263.net":"http://mail.263.net","tom.com":"http://web.mail.tom.com","outlook.com":"https://login.live.com","hotmail.com":"https://login.live.com","chinaren.com":"http://mail.chinaren.com","17173.com":"http://mail.17173.com","139.com":"http://mail.10086.cn","189.cn":"http://webmail30.189.cn","icloud.com":"https://www.icloud.com","tianya.cn":"http://mail.tianya.cn","wo.cn":"http://mail.wo.cn","188.com":"http://www.188.com"};try{document.domain="duoyi.com"}catch(t){}var l="id",d=!!window.ZMAPI_RegisterCertToken;d&&(l="imp");var h=o("gateSrc");h&&(l=h);try{if(window.parent.location.href.indexOf("duoyi.com/register")>-1){var u=function(t){if(!window.parent)return null;var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.parent.location.search.substr(1).match(e),n="";try{n=decodeURIComponent(o[2])}catch(t){n=""}return o?n:null}("gateSrc");u?["d10","dw","mx2"].indexOf(u)<0?$(".wrapper").html("注册错误。"):l=u:l="gw"}}catch(t){}var p=location.href;try{p=window.parent.location.href}catch(t){}window.commonParam={gateSrc:l,location:p};var f=location.protocol+"//wtc.duoyi.com/js/wtc.js";!function(t,e,o,n,c,i,a){t.DuoYiAnalyticsObject="_wtc",t._wtc=t._wtc||function(){(t._wtc.operate=t._wtc.operate||[]).push(arguments)},i=e.createElement("script"),a=e.getElementsByTagName("script")[0],i.async=1,i.src=n,a.parentNode.insertBefore(i,a)}(window,document,0,f),_wtc("create","DY-10020-1","auto");var w=/^1(3[0-9]|4[56789]|5[0-9]|6[567]|7[0-8]|8[0-9]|9[13589])\d{8}$/;n("https://captcha.duoyi.com:8099/publish/drage.publish.min.css"),$(function(){$(".link-menu").html('<a href="//dygame.duoyi.com/" id="link-downzm" target="_blank">下载多益战盟</a><a href="javascript:void(0);" style="color: #2681dd;" class="hide" id="link-phonelogin" target="_blank">手机快捷登录</a><a href="javascript:void(0);" style="color: #2681dd;" class="hide" id="link-acctpasslogin" target="_blank">帐号密码登录</a><span class="v-line">|</span><a href="register.html" id="link-signup">注册战盟帐号</a><span class="v-line">|</span><a href="find-password.html" id="link-findpass">忘记密码</a>'),$("#top-title").find(".s-reg").text("帐 号 注 册")});var g="captcha";window.ifNewWebsdkPage||$.when(a.ensure_gt({})).done(function(){g="geetest"}).fail(function(t){g=10134==t.code?"captcha":"imgcode"}),e.exports={isZMPC:d,ZMPCisNew:function(t){var e=navigator.userAgent.match(/zm_ver\/(\d+|\.)+\d+/g);if(e){for(var o=e[0].substr(7).split("."),n=t.split("."),c=Math.min(o.length,n.length),i=0;i<c;){if(parseInt(o[i])-parseInt(n[i])<0)return!1;i++}return!0}return!1},gateSrc:l,getUrlParam:o,loadStyle:n,vkey:"",WTC:_wtc,ROOT_DOMAIN:"duoyi.com",whichCode:g,isHascode:!1,ali:{},showInfo:function(t,e){e=e||"account",$(".error-"+e).hide(),$(".info-"+e).show(),$(".info-"+e).html(t)},showError:function(t,e){e=e||"account",$(".info-"+e).hide(),$(".error-"+e).show(),$(".error-"+e).html(t)},showIcon:function(t,e){e=e||"account","success"==t?$("#"+e).next(".icon").removeClass("icon-error").addClass("icon-success"):"error"==t?$("#"+e).next(".icon").removeClass("icon-success").addClass("icon-error"):$("#"+e).next(".icon").removeClass("icon-success icon-error")},bubble:function(t){var e=i.getCurrent();e&&e.close();var o=i({autofocus:!1,content:t,skin:"dc-bubble",padding:"8px 10px"});o.show(),setTimeout(function(){o.close().remove()},2e3)},bubbleGo:function(t){var e=i({autofocus:!1,content:t,skin:"dc-bubble",padding:"8px 10px"});e.show(),setTimeout(function(){e.close().remove()},1e3)},confirm:function(t,e,o,n){i({title:t,content:e,skin:"dc-confirm",width:239,padding:"14px 18px",okValue:"确定",ok:o,cancelValue:"取消",cancel:n}).showModal()},getImgcode:function(t){var e={},o=this;t&&(e.action=t),$.when(a.getImgcode(e)).done(function(t){$("#img-code").attr("src","data:image/gif;base64,"+t.data.img),o.vkey=t.data.vkey,o.isHascode=!0}).fail(function(t){o.bubble(t.msg)})},refreshImgcode:function(t){var e=this;if(r&&s<=0)return e.bubble("请求过于频繁");r=!0,s--,e.getImgcode(t),setTimeout(function(){r=!1,s=2},8e3)},phoneRegConfirm:function(t,e,o){i({title:t,content:e,skin:"dc-confirm dc-phoneregconfirm",width:239,padding:"14px 18px",okValue:"立即注册并登录",ok:o}).showModal()},sendSmscode:function(t,e){var o=this,n={phone:t,type:1};e&&(n.scene=3),$.when(a.sendSmscode(n)).done(function(t){o.bubble(t.msg),e&&(t.data&&t.data.up?($("#btn-getSmscode").removeClass("whole-width"),$("#codeTips").show().css("display","inline-block"),$("#smscode").hide()):($("#btn-getSmscode").removeClass("whole-width"),$("#smscode").show().val(""),$("#codeTips").hide()))})},sendVoicecode:function(t){var e=this,o={phone:t,type:3};$.when(a.sendSmscode(o)).done(function(t){e.bubble(t.msg)})},isPhone:function(t,e){return e&&"0086"!==e?/^\d{6,}$/.test(t):w.test(t)},countDown:function t(e,o){o>0?(e.attr("disabled",!0).addClass("disabled").text(o+"秒后重发"),o--,c=setTimeout(function(){t(e,o)},1e3)):(clearTimeout(c),e.attr("disabled",!1).removeClass("disabled").text("获取验证码"))},openEmail:function(t){var e=/.+@(.+)$/.exec(t);if(e&&e[1])var o=m[e[1]];window.open(o)},getQuery:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return o?decodeURIComponent(o[2]):null}}});