!function(){var d;(d={},function(i,e){var t,n,a,r=i?e?"is"+e+"IE"+i:"isIE"+i:"isIE",o=d[r];return void 0!==o?o:(i?(t=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:|Edge\/)(\d+)/))?(n=parseInt(t[1]),o=e?"lt"===e?n<i:"gt"===e?i<n:void 0:n===i):i<=9&&((a=document.createElement("b")).innerHTML="\x3c!--[if "+(e||"")+" IE "+i+"]><i></i><![endif]--\x3e",o=1===a.getElementsByTagName("i").length):o=-1!==navigator.userAgent.indexOf("MSIE")||-1<navigator.appVersion.indexOf("Trident/"),d[r]=o)})(11,"lt")&&-1===document.cookie.indexOf("ie_compatibility_hide=")&&(location.href="/ie_compatibility")}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.OSCRequire={module:{},base:{},page:{define:null},stringUtil:{isNull:function(e){return!("string"==typeof e&&e&&e.replace(/(^\s*)|(\s*$)/g,""))}},fetchBase:function(e){var t;return"function"==typeof this.base[e]&&(t=this.base[e].apply(Object),this.base[e]="function"==typeof t?new t:t),this.base[e]},buildModule:function(e,t,n){var i=this.stringUtil,r={require:null,target:null};if(!i.isNull(e)&&n instanceof Function){if(r.target=n,t instanceof Array){var o=[];for(var u in t){var a=t[u];if(i.isNull(a)||!this.base.hasOwnProperty(a))throw new Error("依赖参数错误!");o.push(a)}o.length&&(r.require=o)}this.module[e]=r}},initPage:function(){var e=document.querySelector("[data-define]")||document.querySelector("x-foo-define");e instanceof HTMLElement&&(this.page.define=e.getAttribute("data-define"));for(var t=null,n="",i="",r=document.querySelectorAll("val"),o=0,u=r.length;o<u;++o)(t=r[o])instanceof HTMLElement&&(n=t.getAttribute("data-name"),i=t.getAttribute("data-value"),n&&("true"!==i&&"false"!==i||(i="true"===i),this.page[n]=i));return this.page},initModule:function(e,t){var n=[];if("function"!=typeof e)throw new Error("非法模块调用!");if(Array.isArray(t)&&0<t.length)for(var i in t){var r=t[i];n.push(this.fetchBase(r))}return new(e.apply(Object,n))}},window.OSCDefine=function(){var e,t,n,i,r,o=arguments,u=o.length;2<=u&&(n=o[0],r=3===u?o[2]:null,(i=o[1])instanceof Function&&(e=i),r instanceof Function&&(e=r),i instanceof Array&&(t=i),OSCRequire.stringUtil.isNull(n)||OSCRequire.buildModule(n,t,e))},window.OSCPlugin=function(e,t){"string"==typeof e&&/^object|function$/.test(_typeof(t))&&""!==e&&void 0===OSCRequire.base[e]&&(OSCRequire.base[e]=t)};
"use strict";!function(a,e){function t(){this._timer=null,this._totalCountTransitionTimer=null,this._messageEl=a("#message"),this._messageTotalCountEl=this._messageEl.find(".total-count"),this._messageHeaderEl=this._messageEl.find(".message-header"),this._messageActionWrap=this._messageEl.find(".action"),this._messageMarkReadAllEl=this._messageEl.find(".mark-read-all")}var s="暂没有未读消息",i="未读消息";t.prototype.init=function(){this._messageEl.dropdown({on:"hover"}),this.bindMarkReadAll()},t.prototype.markReadAll=function(){var t=this;a.post(page.space_user_url+"/msg/updateReadStatu",{userId:page.g_user_id},function(e){1===e.code?(t.setAll({totalMsgCount:0}),"space-admin-inbox"!==page.define&&"space-admin-msgs"!==page.define||(a(".messages-wrap").find(".private-message.un-read").removeClass("un-read"),a("body").toast({type:"success",content:"成功设置全部已读"}))):a("body").toast({type:"error",content:"网络错误，请稍后再试"})})},t.prototype.bindMarkReadAll=function(){var t=this;this._messageEl.on("click",".mark-read-all",function(e){e.stopPropagation(),t.markReadAll()})},t.prototype.setAll=function(e){this.setMsgTotalCount(e),this.setMsgHeader(e),this.setMsgList(e),this.setMsgMarkReadAll(e),this.setSpaceAdminSidebar(e)},t.prototype.setMsgTotalCount=function(e){var t=this,s=void 0!==e&&e.totalMsgCount||0;t._messageTotalCountEl.html(s),0<s?(t._messageTotalCountEl.show(),t._totalCountTransitionTimer&&(clearInterval(t._totalCountTransitionTimer),t._totalCountTransitionTimer=null),t._totalCountTransitionTimer=setInterval(function(){t._messageTotalCountEl.transition("flash")},4e3)):(clearInterval(t._totalCountTransitionTimer),t._totalCountTransitionTimer=null,t._messageTotalCountEl.transition("hide"))},t.prototype.setMsgHeader=function(e){0<(void 0!==e&&e.totalMsgCount||0)?this._messageHeaderEl.html(i):this._messageHeaderEl.html(s)},t.prototype.setMsgList=function(e){if(!e)return!1;var t,s=e.totalMsgCount||0;this._messageEl.find(".message-item").remove(),0<s&&(t="",0<e.fansCount&&(t+='<a class="item message-item" href="{{g_user_url}}/followers">{{fansCount}} 位新粉丝</a>'.replace("{{g_user_url}}",page.g_user_url).replace("{{fansCount}}",e.fansCount)),0<e.privateMsgCount&&(t+='<a class="item message-item" href="{{g_user_url}}/admin/inbox">{{privateMsgCount}} 条新私信</a>'.replace("{{g_user_url}}",page.g_user_url).replace("{{privateMsgCount}}",e.privateMsgCount)),0<e.repliesCount&&(t+='<a class="item message-item" href="{{g_user_url}}?tab=activity&scope=reply">{{repliesCount}} 条新评论</a>'.replace("{{g_user_url}}",page.g_user_url).replace("{{repliesCount}}",e.repliesCount)),0<e.refMeCount&&(t+='<a class="item message-item" href="{{g_user_url}}?tab=activity&scope=atme">{{refMeCount}} 条提到我</a>'.replace("{{g_user_url}}",page.g_user_url).replace("{{refMeCount}}",e.refMeCount)),this._messageActionWrap.before(t))},t.prototype.setMsgMarkReadAll=function(e){0<(void 0!==e&&e.totalMsgCount||0)?this._messageMarkReadAllEl.show():this._messageMarkReadAllEl.hide()},t.prototype.setSpaceAdminSidebar=function(e){var t;-1<(page.define||"").indexOf("space-admin")&&(0<(t=void 0!==e&&e.privateMsgCount||0)?a(".un-read-count-label").text(t).show():a(".un-read-count-label").hide())},t.prototype.fetchMsgCount=function(){var s=this;a.post(page.space_user_url+"/msg/findAllMsgCount",{user_code:page.g_user_code,userId:page.g_user_id},function(e,t){1===e.code&&e.result&&s.setAll(e.result)})},t.prototype.startPolling=function(){this._timer&&(clearInterval(this._timer),this._timer=null);var e=this;this._timer=setInterval(function(){e.fetchMsgCount()},24e4)},t.prototype.stopPolling=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.OSCPollingMsg=t}(window.jQuery||window.$,window);
"use strict";!function(a){a.fn.toast=function(t){var o=a(this),e=a.extend({type:"success",position:"fixed",duration:3e3,animateDuration:1e3,content:"提示",top:"50%",left:"50%",zIndex:1002,closePrev:!0},t||{});!function(){var t=e.content||"";0===e.duration&&(t+='<i class="close icon close-btn"></i>'),e.closePrev&&a(".cpt-toast").remove();var n=-1<["info","success","positive","error","negative","warning"].indexOf(e.type)?e.type:"info",i=a("<div class='ui "+n+" message compact transition cpt-toast'></div>").css({position:e.position,top:e.top,left:e.left,"z-index":e.zIndex,"-webkit-transform":"translate3d(-50%, -50%, 0)","-moz-transform":"translate3d(-50%, -50%, 0)",transform:"translate3d(-50%, -50%, 0)","-webkit-animation-duration":e.animateDuration/1e3+"s","-moz-animation-duration":e.animateDuration/1e3+"s","animation-duration":e.animateDuration/1e3+"s"}).html(t);i.appendTo(o),i.fadeIn("this",function(){0===e.duration&&i.find(".close-btn").on("click",function(){i.fadeOut(400,function(){i.remove()})})}),0<e.duration&&setTimeout(function(){i.fadeOut(400,function(){a(this).remove()})},e.duration)}()}}(jQuery,window);
"use strict";!function(l){function u(e,t,n,i,r){var a=this,c=!1!==i;function o(e,t){return null!=e&&null!=t&&-1!==e.indexOf(t,e.length-t.length)}this.log=function(e){},this.getFileName=function(e){var t=l.__STATIC_DOMAIN||"";return/^http(s?):\/\//.test(e)||(e=t+e),c||(-1===e.indexOf("?")?e+="?no_cache="+(new Date).getTime():e+="&no_cache="+(new Date).getTime()),e},this.execStyleCallback=function(){"function"==typeof n&&n()},this.execScriptCallback=function(){"function"==typeof t&&t()},this.loadStyle=function(e){var t=a._css_files[e];if(c&&-1!==a.cssCacheList.indexOf(t))return a.log('Skip style file "'+t+'" cached.'),void r();var n=document.createElement("link"),i=!1;function r(){e+1<a._css_files.length?a.loadStyle(e+1):a.execStyleCallback()}function o(){i||(i=!0,c&&a.cssCacheList.push(t),a.log('Loaded style "'+t+'".'),r())}n.rel="stylesheet",n.type="text/css",n.href=a.getFileName(t),n.onload=o,n.onreadystatechange=function(){i||"complete"!==n.readyState||o()},n.onerror=function(){i||(i=!0,a.log('Error loading style "'+t+'".'),r())},a.log("Loading style "+t),a._head.appendChild(n)},this.loadScript=function(e){var t=a._js_files[e];if(c&&-1!==a.scriptCacheList.indexOf(t))return a.log('Skip script file "'+t+'" cached.'),void r();var n=document.createElement("script"),i=!1;function r(){e+1<a._js_files.length?a.loadScript(e+1):a.execScriptCallback()}function o(){i||(i=!0,c&&a.scriptCacheList.push(t),a.log('Loaded script "'+t+'".'),r())}n.type="text/javascript",n.src=a.getFileName(t),n.onload=o,n.onreadystatechange=function(){i||"complete"!==n.readyState||o()},n.onerror=function(){i||(i=!0,a.log('Error loading script "'+t+'".'),r())},a.log('Loading script "'+t+'".'),a._head.appendChild(n)},this.loadFiles=function(){0<a._css_files.length&&a.loadStyle(0),0<a._js_files.length&&a.loadScript(0)},this.cssCacheList=u.cssCacheList,this.scriptCacheList=u.scriptCacheList,this._js_files=[],this._css_files=[],this._head=document.getElementsByTagName("head")[0];for(var s=0;s<e.length;++s)o(e[s],".css")||o(e[s].split("?")[0],".css")?this._css_files.push(e[s]):o(e[s],".js")||o(e[s].split("?")[0],".js")?this._js_files.push(e[s]):this.log('Error unknown filetype "'+e[s]+'".')}l.common={dynamicLoader:(u.cssCacheList=[],u.scriptCacheList=[],u),throttle:function(n,i,r){var o,a,c,s=Date.now||function(){return(new Date).getTime()},l=null,u=0;r=r||{};function h(){u=!1===r.leading?0:s(),l=null,c=n.apply(o,a),l||(o=a=null)}return function(){var e=s();u||!1!==r.leading||(u=e);var t=i-(e-u);return o=this,a=arguments,t<=0||i<t?(clearTimeout(l),l=null,u=e,c=n.apply(o,a),l||(o=a=null)):l||!1===r.trailing||(l=setTimeout(h,t)),c}},debounce:function(i,r,o){var a;return function(){var e=this,t=arguments,n=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||i.apply(e,t)},r),n&&i.apply(e,t)}},getImagesBySizeFilter:function(e,t){for(var n=[],i=$(e),r=0;r<i.length;r++){var o=i.eq(r),a=parseInt(o.css("width")),c=parseInt(o.css("height"));o[0]&&o[0].naturalWidth&&(a=o[0].naturalWidth,c=o[0].naturalHeight),$.isFunction(t)&&t(a,c)&&n.push(o)}return n},getWeChatShareImgUrl:function(e){var n=[];return this.getImagesBySizeFilter(e,function(e,t){return 300<=e&&300<=t}).forEach(function(e){var t=e.attr("src");/http(s?):\/\//.test(t)&&n.push(t)}),0<n.length?n[0]:""},checkLogin:function(){if(page.g_user_code)return!0;var e=page.login_page?'点击<a href="'+page.login_page+'" target="_blank">此处</a>':"请先";return $("body").toast({type:"error",content:"您还没有登录，"+e+"登录",duration:0}),!1},checkLoginForWeChat:function(e,t){if(!l.common.checkWeChat()||page.g_user_code)return l.common.checkLogin();var n=page.site_url+"/action/openid/before_bind?op=wechat_mobile",i=e||location.href||"";return i&&(n=n+"&goto="+encodeURIComponent(i)),t&&"[object Function]"==={}.toString.call(t)&&t(),l.location.href=n,!1},checkPC:function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,i=0;i<t.length;i++)if(-1<e.indexOf(t[i])){n=!1;break}return n},checkWeChat:function(){for(var e=navigator.userAgent,t=["MicroMessenger"],n=!1,i=0;i<t.length;i++)if(-1<e.indexOf(t[i])){n=!0;break}return n},checkMobileSafari:function(){var e=navigator.userAgent,t=!!e.match(/Version\/[\d.]+.*Safari/),n=/iPad|iPhone|iPod/.test(e)&&!l.MSStream;return t&&n},formatNumberK:function(e){var t=Number(e)||0;if(1<=t/1e3){var n=(n=t/1e3).toFixed(1);return-1<String(n).indexOf(".0")&&(n=parseInt(n)),n+"K"}return t},getCurrentUrl:function(e){return e?l.location.href.split("#")[0]:l.location.href},queryString:function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},addQueryParams:function(e,t){var n=(e=e||"").split("#"),i=n[1]||"",r=n[0].split("?"),o=r[0],a=r[1]||"",c=this.queryString(t);return a?a+=c?"&"+c:"":a=c,o+(a?"?"+a:"")+(i?"#"+i:"")},setCookie:function(e,t,n){var i,r="";n&&((i=new Date).setTime(i.getTime()+864e5*n),r="; expires="+i.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/"},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},eraseCookie:function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/"},htmlEncode:function(e){return $("<div/>").text(e).html()},htmlDecode:function(e){return $("<div/>").html(e).text()}},$(function(){if(l.page=l.OSCRequire.initPage(),page.define){var e=l.OSCRequire.module[page.define];if(e instanceof Object){l.currentModule=l.OSCRequire.initModule(e.target,e.require);try{"function"==typeof currentModule.ready&&currentModule.ready(),"function"==typeof currentModule.register&&currentModule.register()}catch(e){}}}})}(window);
"use strict";$(function(){var e=$("#headerNavMenu");e.find(".dropdown").dropdown(),$("#btnDownloadApp").popup({position:"right center",popup:$("#btnDownloadAppContent")});var n=$("#mobileNavSidebar");n.sidebar({dimPage:!0,transition:"overlay",mobileTransition:"overlay",useLegacy:!1,exclusive:!0}),n.sidebar("attach events",".toggle-mobile-nav-sidebar");var i=$("#mobileUserSidebar");i.sidebar({dimPage:!0,transition:"overlay",mobileTransition:"overlay",useLegacy:!1,exclusive:!0}),i.sidebar("attach events",".toggle-mobile-user-sidebar");var o=$("#userSidebar");o.sidebar({dimPage:!0,transition:"uncover",useLegacy:"auto",duration:500,exclusive:!0}),$(".toggle-user-sidebar").on("click",function(e){o.sidebar("toggle"),e.preventDefault()});function t(){200<$(window).scrollTop()&&768<=window.innerWidth?d.fadeIn(100):d.fadeOut(100)}var a,s,c,r,l,p,u,g,d=$(".back-to-top");function m(){page.objType&&page.objId&&$.post(page.api_prefix+"/user/log_share",{objType:page.objType,objId:page.objId},function(e){e.code})}function w(){window.common.getImagesBySizeFilter(".article-detail .content img:not(.ad-wrap img)",function(e,n){return 200<=e||200<=n}).forEach(function(e){return!e.parent().is("a")&&(e.addClass("zoom-in-cursor"),void e.viewer({button:!0,navbar:!1,title:!1,toolbar:!1,zoomRatio:.2,maxZoomRatio:2,viewed:function(){this.viewer.options.minZoomRatio=this.viewer.initialImageData.ratio}}))})}t(),window.addEventListener("scroll",window.common.throttle(t,300),!1),$(document).on("click",".back-to-top-toggle",function(){$("html, body").stop().animate({scrollTop:0},500,"swing")}),$(document).on("click",'a[href*="#"]:not([href="#"]), area[href*="#"]',function(){var e,n,i;location.pathname.replace(/^\//,"")!==this.pathname.replace(/^\//,"")||location.hostname!==this.hostname||(i=(i=$(this.hash)).length&&i||$('[name="'+this.hash.slice(1)+'"]')).length&&(e=i.offset().top,n=parseInt(i.data("offset"))||0,0<e-80&&(e-=80),isNaN(n)||(e+=n),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))}),$(document).on("click",".logout-btn",function(){$.post(page.api_prefix+"/user/logout",{session:page.g_user_code},function(e){200===e.code?($("body").toast({type:"success",content:"退出成功"}),setTimeout(function(){location.reload()},0)):$("body").toast({type:"error",content:e.message||"退出失败，请稍后再试"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}),e.on("click",".search-item .search.link.icon",function(){var e=$(this).parents(".search-item:eq(0)");0<e.find("input[name=q]").val().trim().length&&e.submit()}),window.name||(c=(c=$(location.hash)).length&&c||$('[name="'+location.hash.slice(1)+'"]')).length&&(a=c.offset().top,s=parseInt(c.data("offset"))||0,0<a-80&&(a-=80),isNaN(s)||(a+=s),$("html, body").stop(!0).animate({scrollTop:a},500,"swing"),window.name="opened"),page.g_user_code&&(window.pollingMsg=new OSCPollingMsg,pollingMsg.init(),pollingMsg.startPolling(),pollingMsg.fetchMsgCount(),$(window).on("pageshow",function(e){(e.originalEvent.persisted||window.performance&&2===window.performance.navigation.type)&&pollingMsg.fetchMsgCount()})),l=page.weixinAppId,p=page.weixinTimestamp,u=page.weixinNonceStr,g=page.weixinSignature,l&&p&&u&&g&&(r={title:page.weixinShareTitle||document.title,desc:page.weixinShareDescription||$('meta[name="description"]').attr("content")||"",imgUrl:page.weixinShareImgUrl||"https://oscimg.oschina.net/oscnet/up-ccdf72787b19bc6396a1dbf8a7af432482b.png",link:page.weixinShareUrl||location.href},page.beforeWeChatShareHook&&"function"==typeof page.beforeWeChatShareHook&&(r=page.beforeWeChatShareHook(r)),wx.config({debug:!1,appId:l,timestamp:p,nonceStr:u,signature:g,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]}),wx.ready(function(){wx.onMenuShareTimeline({title:r.title,link:r.link,imgUrl:r.imgUrl,success:function(){m()},cancel:function(){}}),wx.onMenuShareAppMessage({title:r.title,desc:r.desc,link:r.link,imgUrl:r.imgUrl,type:"link",dataUrl:"",success:function(){m()},cancel:function(){}}),wx.onMenuShareQQ({title:r.title,desc:r.desc,link:r.link,imgUrl:r.imgUrl,success:function(){m()},cancel:function(){}}),wx.onMenuShareWeibo({title:r.title,desc:r.desc,link:r.link,imgUrl:r.imgUrl,success:function(){m()},cancel:function(){}}),wx.onMenuShareQZone({title:r.title,desc:r.desc,link:r.link,imgUrl:r.imgUrl,success:function(){m()},cancel:function(){}})})),$(".dropdown-share").dropdown({action:"hide",onChange:function(){m()}}),$(".menu-share").on("click",".item[data-value]",function(){$(this).data("value");m()}),$(document).on("click","[check-login]",function(e){if(window.common&&window.common.checkLogin&&!window.common.checkLogin())return e.preventDefault(),!1}),page.is_detail_page&&(window.Viewer?w():new window.common.dynamicLoader(["/new-osc/js/utils/plugins/viewer/viewer.min.css","/new-osc/js/utils/plugins/viewer/viewer.osc.css","/new-osc/js/utils/plugins/viewer/viewer.js","/new-osc/js/utils/plugins/viewer/jquery-viewer.min.js"],function(){w()}).loadFiles()),$(".osc-gitee-6th-label").popup()});
!function(t){var a,e,c,o,l,i,h,n='<svg><symbol id="oicon-switch" viewBox="0 0 1024 1024"><path d="M924.379429 145.700571L709.632 1.536a9.142857 9.142857 0 0 0-14.189714 7.753143V102.4H366.006857C163.913143 102.4 0 267.483429 0 471.04V544.914286c0 52.882286 11.117714 103.277714 31.012571 148.626285a9.216 9.216 0 0 0 13.458286 4.022858L153.6 624.274286a9.362286 9.362286 0 0 0 3.657143-10.605715 223.085714 223.085714 0 0 1-10.752-68.754285V471.04c0-59.099429 22.893714-114.614857 64.365714-156.525714a217.307429 217.307429 0 0 1 155.136-64.731429h329.435429v93.696c0 7.387429 8.192 11.776 14.189714 7.753143l214.601143-144.164571c21.869714-14.628571 21.869714-46.811429 0.146286-61.44zM99.766857 878.299429l214.601143 144.164571a9.142857 9.142857 0 0 0 14.189714-7.753143V921.6h329.435429C860.086857 921.6 1024 756.516571 1024 552.96V479.085714c0-52.882286-11.117714-103.277714-31.012571-148.626285a9.216 9.216 0 0 0-13.458286-4.022858l-108.982857 73.289143a9.362286 9.362286 0 0 0-3.657143 10.605715c7.021714 21.869714 10.678857 45.056 10.678857 68.754285V552.96c0 59.099429-22.893714 114.614857-64.292571 156.525714a217.234286 217.234286 0 0 1-155.282286 64.731429H328.557714V680.448c0-7.387429-8.192-11.776-14.189714-7.753143l-214.601143 144.164572a37.229714 37.229714 0 0 0 0 61.44z"  ></path></symbol><symbol id="oicon-org" viewBox="0 0 1024 1024"><path d="M456.96 22.656a78.016 78.016 0 0 1 110.08 0l100.48 100.544h155.52c42.88 0.128 77.632 34.88 77.76 77.76v155.52l100.48 100.544a78.016 78.016 0 0 1 0 109.952l-100.48 100.48v155.52a78.016 78.016 0 0 1-77.76 77.824h-155.52l-100.48 100.48a78.016 78.016 0 0 1-110.016 0l-100.48-100.48H200.96a78.016 78.016 0 0 1-77.824-77.76v-155.52L22.72 567.04a78.016 78.016 0 0 1 0-110.016l100.48-100.48V200.96A78.016 78.016 0 0 1 200.96 123.136h155.52z m235.904 375.104c-16.64-18.368-38.976-18.368-55.68 0L459.2 593.792l-72.32-79.68c-16.704-18.368-39.04-18.368-55.68 0A49.28 49.28 0 0 0 320 544.768a49.28 49.28 0 0 0 11.136 30.592l100.16 116.416c5.568 6.08 16.704 12.224 27.84 12.224a40.576 40.576 0 0 0 27.84-12.224l205.888-226.624C704 459.008 704 446.72 704 428.416a49.28 49.28 0 0 0-11.136-30.656z"  ></path></symbol><symbol id="oicon-gitee-circle" viewBox="0 0 1024 1024"><path d="M512 0a512 512 0 1 1 0 1024A512 512 0 0 1 512 0z m259.145143 227.547429h-354.011429a189.659429 189.659429 0 0 0-189.586285 189.659428v354.011429c0 13.897143 11.337143 25.234286 25.307428 25.234285h372.955429a170.642286 170.642286 0 0 0 170.642285-170.642285V480.402286a25.307429 25.307429 0 0 0-25.307428-25.307429H480.402286a25.307429 25.307429 0 0 0-25.307429 25.307429v63.195428c0 12.214857 8.630857 22.454857 20.187429 24.795429l5.12 0.512h177.005714c12.214857 0 22.381714 8.630857 24.722286 20.187428l0.512 5.12v12.580572c0 41.910857-33.938286 75.849143-75.849143 75.849143H366.592a25.307429 25.307429 0 0 1-25.307429-25.234286V417.206857c0-39.131429 29.622857-71.314286 67.584-75.410286l8.265143-0.438857h354.011429c13.897143 0 25.234286-11.337143 25.234286-25.307428v-63.195429a25.307429 25.307429 0 0 0-20.114286-24.795428l-5.12-0.512z"  ></path></symbol><symbol id="oicon-ask" viewBox="0 0 1024 1024"><path d="M146.295156 1024v-232.727273H73.079156A73.774545 73.774545 0 0 1 0.002793 716.986182V74.193455C0.002793 33.28 32.817338 0 73.125702 0H950.926429C991.188247 0 1024.002793 33.28 1024.002793 74.193455v642.839272c0 40.96-32.814545 74.193455-73.122909 74.193455H375.810793L146.295156 1024zM73.079156 49.431273a24.576 24.576 0 0 0-24.343272 24.762182v642.839272c0 13.684364 10.891636 24.762182 24.343272 24.762182h121.949091v162.816l160.581818-162.816h595.223273a24.529455 24.529455 0 0 0 24.343273-24.762182V74.193455a24.576 24.576 0 0 0-24.343273-24.762182H73.079156zM292.58752 438.458182c15.080727 8.843636 33.652364 8.843636 48.733091 0 15.080727-8.843636 24.389818-25.134545 24.389818-42.821818s-9.309091-33.978182-24.389818-42.821819a48.174545 48.174545 0 0 0-48.733091 0c-15.080727 8.843636-24.389818 25.134545-24.389818 42.821819s9.309091 33.978182 24.389818 42.821818z m390.050909 0c15.127273 8.843636 33.698909 8.843636 48.779636 0 15.080727-8.843636 24.389818-25.134545 24.389819-42.821818 0-27.322182-21.829818-49.477818-48.779637-49.477819-26.903273 0-48.733091 22.155636-48.733091 49.477819 0 17.687273 9.309091 33.978182 24.389819 42.821818zM512.002793 445.067636c26.949818 0 48.779636-22.155636 48.779636-49.431272 0-27.322182-21.876364-49.477818-48.779636-49.477819-26.949818 0-48.779636 22.155636-48.779637 49.477819 0 27.275636 21.876364 49.431273 48.779637 49.431272z"  ></path></symbol><symbol id="oicon-write" viewBox="0 0 1024 1024"><path d="M975.073029 1023.83715H48.926971A48.764121 48.764121 0 0 1 0.16285 975.073029V48.926971C0.16285 21.985725 21.985725 0.16285 48.926971 0.16285H585.053121a24.382061 24.382061 0 0 1 0 48.764121h-511.837151a24.382061 24.382061 0 0 0-24.33553 24.33553V950.78403c0 13.447358 10.888172 24.33553 24.33553 24.33553h877.56806a24.33553 24.33553 0 0 0 24.33553-24.33553v-511.837151a24.382061 24.382061 0 0 1 48.764121 0v536.172681c0 26.941246-21.822875 48.764121-48.764121 48.764121z m-487.362028-292.491666H316.338617a24.102877 24.102877 0 0 1-23.963285-24.195938c0-0.465307 0.279184-0.884082 0.279184-1.349389V535.730632c0-4.28082 0.186123-12.19103 0.465306-23.730632L790.346348 14.773474a48.764121 48.764121 0 0 1 68.911893 0l137.870316 137.870316a48.764121 48.764121 0 0 1 0 68.958423L487.711001 731.345484z m457.768535-561.624945L842.088431 66.236373a24.382061 24.382061 0 0 0-34.432681 0L340.534555 533.357568a19.496342 19.496342 0 0 1 0.465306 2.419594v147.222977h125.725817l478.800388-478.800389a24.382061 24.382061 0 0 0 0-34.525742h-0.093061z"  ></path></symbol><symbol id="oicon-plus" viewBox="0 0 1024 1024"><path d="M1024 426.666667H597.333333V0H426.666667v426.666667H0v170.666666h426.666667v426.666667h170.666666V597.333333h426.666667z"  ></path></symbol><symbol id="oicon-write_bak" viewBox="0 0 1024 1024"><path d="M975.234437 1023.9744H48.765563A48.739963 48.739963 0 0 1 0.0256 975.234437V48.765563C0.0256 21.835709 21.835709 0.0256 48.765563 0.0256H585.212339a24.369981 24.369981 0 1 1 0 48.739963h-511.9744a24.369981 24.369981 0 0 0-24.421179 24.421179V950.762061c0 13.464927 10.956252 24.421179 24.421179 24.421179h877.524122a24.369981 24.369981 0 0 0 24.421179-24.421179v-511.9744a24.369981 24.369981 0 0 1 48.739963 0v536.395579a48.739963 48.739963 0 0 1-48.739963 48.739963z m-463.592819-316.912154v0.102395a24.062797 24.062797 0 0 1-23.909205 24.216389H316.272187a24.062797 24.062797 0 0 1-23.909205-24.216389c0-0.460777 0.20479-0.819159 0.255988-1.279936v-170.129093c0-6.450877 2.662267-12.59457 7.321234-17.099945L293.079747 512 790.411679 14.668068a48.739963 48.739963 0 0 1 68.962951 0l137.925904 137.925903a48.739963 48.739963 0 0 1 0 68.962952L511.641618 707.062246zM945.642317 169.591521l-103.470026-103.418829a24.369981 24.369981 0 0 0-34.455878 0L340.488576 533.298135a19.455027 19.455027 0 0 1 0.511974 2.457477v147.243838h125.689716l478.952051-478.952052a24.369981 24.369981 0 0 0 0-34.558272h-0.051198z"  ></path></symbol><symbol id="oicon-ask_bak" viewBox="0 0 1186 1024"><path d="M154.565371 1009.712762V780.190476H81.422514C41.096419 780.190476 8.279657 747.373714 8.279657 707.047619v-633.904762C8.279657 32.816762 41.096419 0 81.422514 0h1024c40.326095 0 73.142857 32.816762 73.142857 73.142857v633.904762c0 40.326095-32.816762 73.142857-73.142857 73.142857H384.087657L154.565371 1009.712762zM81.422514 48.761905a24.380952 24.380952 0 0 0-24.380952 24.380952v633.904762a24.380952 24.380952 0 0 0 24.380952 24.380952H203.327276v160.572953L363.900228 731.428571H1105.422514a24.380952 24.380952 0 0 0 24.380953-24.380952v-633.904762a24.380952 24.380952 0 0 0-24.380953-24.380952h-1024zM349.61299 390.095238a48.761905 48.761905 0 1 0 97.52381 0 48.761905 48.761905 0 0 0-97.52381 0z m390.095238 0a48.761905 48.761905 0 1 0 97.52381 0 48.761905 48.761905 0 0 0-97.52381 0z m-195.047619 0a48.761905 48.761905 0 1 0 97.52381 0 48.761905 48.761905 0 0 0-97.52381 0z"  ></path></symbol><symbol id="oicon-trending" viewBox="0 0 1106 1024"><path d="M0 290.766798m55.308301 0l0 0q55.308301 0 55.3083 55.3083l0 608.391307q0 55.308301-55.3083 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-608.391307q0-55.308301 55.308301-55.3083Z" fill="#F5A623" ></path><path d="M331.849803 14.225295m55.308301 0l0 0q55.308301 0 55.308301 55.3083l0 884.93281q0 55.308301-55.308301 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-884.93281q0-55.308301 55.308301-55.3083Z" fill="#F5A623" opacity=".8" ></path><path d="M663.699607 401.383399m55.3083 0l0 0q55.308301 0 55.308301 55.3083l0 497.774706q0 55.308301-55.308301 55.3083l0 0q-55.308301 0-55.3083-55.3083l0-497.774706q0-55.308301 55.3083-55.3083Z" fill="#F5A623" opacity=".6" ></path><path d="M995.54941 124.841896m55.308301 0l0 0q55.308301 0 55.3083 55.308301l0 774.316208q0 55.308301-55.3083 55.3083l0 0q-55.308301 0-55.308301-55.3083l0-774.316208q0-55.308301 55.308301-55.308301Z" fill="#F5A623" opacity=".4" ></path></symbol><symbol id="oicon-gitee" viewBox="0 0 1024 1024"><path d="M966.524718 400.672821H456.520205c-24.497231 0-44.347077 19.954872-44.347077 44.557128v133.540102c0 24.602256 19.849846 44.530872 44.347077 44.530872h288.295385c33.266872 0 44.320821 11.132718 44.347077 44.530872 0.026256 89.035487-50.884923 133.566359-133.041231 133.566359h-376.779487c-24.602256 0-44.530872-19.954872-44.530872-44.530872v-400.67282c0-73.780513 59.575795-133.592615 133.014974-133.592616h598.593641c24.470974 0 44.320821-19.928615 44.320821-44.504615V44.530872C1010.740513 19.928615 990.916923 0 966.419692 0H367.826051C171.979487 0 13.128205 159.455179 13.128205 356.168205v623.32718C13.128205 1004.045128 32.978051 1024 57.475282 1024h598.646154c196.187897 0 352.439795-170.325333 354.619077-367.327179 0.131282-11.106462 0.131282-200.33641 0.131282-211.442872a44.478359 44.478359 0 0 0-44.347077-44.530872z"  ></path></symbol><symbol id="oicon-world" viewBox="0 0 1024 1024"><path d="M921.6 204.8h-1.024A510.464 510.464 0 0 0 512 0C229.696 0 0 229.696 0 512s229.696 512 512 512c167.04 0 315.072-80.64 408.576-204.8h1.024v-1.28C985.6 732.416 1024 626.816 1024 512s-38.4-220.416-102.4-305.92V204.8zM358.4 891.456A409.984 409.984 0 0 1 102.4 512c0-17.408 1.408-34.432 3.52-51.2H153.6l51.2 102.4v102.4L307.2 768l51.2 51.2v72.256zM512 921.6a408.32 408.32 0 0 1-96.448-11.904L460.8 819.2l51.2-102.4V614.4H409.6l-51.2-51.2h-51.2L256 460.8l51.2-102.4 51.2-51.2 51.2-51.2 51.2-102.4v-47.68c16.768-2.112 33.792-3.52 51.2-3.52a407.04 407.04 0 0 1 256 90.368V256l-51.2 102.4 51.2 51.2v51.2l-102.4 51.2-51.2 52.032 51.2 50.368 51.2 51.2 51.2 102.4 33.472 33.472A408.32 408.32 0 0 1 512 921.6z"  ></path></symbol><symbol id="oicon-setting" viewBox="0 0 1162 1024"><path d="M1055.479204 128.810127H442.676311c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.31103 97.21519H53.815552c-10.415913 0-19.095841 8.679928-19.095841 20.831826s8.679928 20.831826 20.831826 20.831826h156.238698c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519h611.066907c12.151899 0 20.831826-8.679928 20.831827-20.831826s-8.679928-20.831826-20.831827-20.831826zM328.101266 224.289331c-41.663653 0-76.383363-34.719711-76.383364-76.383364 0-41.663653 34.719711-76.383363 76.383364-76.383363 41.663653 0 76.383363 34.719711 76.383363 76.383363 0 41.663653-34.719711 76.383363-76.383363 76.383364zM1055.479204 840.564195H637.106691c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.311031 97.21519H55.551537c-12.151899 0-20.831826 8.679928-20.831826 20.831827s8.679928 20.831826 20.831826 20.831826h348.933092c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519H1055.479204c12.151899 0 20.831826-8.679928 20.831827-20.831826 0-10.415913-8.679928-20.831826-20.831827-20.831827z m-534.683544 97.21519c-41.663653 0-76.383363-34.719711-76.383363-76.383363 0-41.663653 34.719711-76.383363 76.383363-76.383364 41.663653 0 76.383363 34.719711 76.383364 76.383364-1.735986 41.663653-34.719711 76.383363-76.383364 76.383363zM1055.479204 484.687161h-67.703435c-10.415913-55.551537-57.287523-97.21519-116.311031-97.21519-57.287523 0-105.895118 41.663653-116.311031 97.21519H55.551537c-12.151899 0-20.831826 8.679928-20.831826 20.831826s8.679928 20.831826 20.831826 20.831827h699.60217c10.415913 55.551537 57.287523 97.21519 116.311031 97.21519 57.287523 0 105.895118-41.663653 116.311031-97.21519h67.703435c12.151899 0 20.831826-8.679928 20.831827-20.831827s-8.679928-20.831826-20.831827-20.831826z m-184.014466 97.21519c-41.663653 0-76.383363-34.719711-76.383364-76.383364 0-41.663653 34.719711-76.383363 76.383364-76.383363 41.663653 0 76.383363 34.719711 76.383363 76.383363 0 41.663653-34.719711 76.383363-76.383363 76.383364z"  ></path></symbol></svg>';if((a=document.getElementsByTagName("script"))[a.length-1].getAttribute("data-injectcss")&&!t.__oicon__svg__cssinject__){t.__oicon__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(a){console}}function s(){i||(i=!0,o())}e=function(){var t,a,e,c,o;(t=document.createElement("div")).innerHTML=n,n=null,(a=t.getElementsByTagName("svg")[0])&&(a.setAttribute("aria-hidden","true"),a.style.position="absolute",a.style.width=0,a.style.height=0,a.style.overflow="hidden",e=a,(c=document.body).firstChild?(o=c.firstChild).parentNode.insertBefore(e,o):c.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(c=function(){document.removeEventListener("DOMContentLoaded",c,!1),e()},document.addEventListener("DOMContentLoaded",c,!1)):document.attachEvent&&(o=e,l=t.document,i=!1,(h=function(){try{l.documentElement.doScroll("left")}catch(t){return void setTimeout(h,50)}s()})(),l.onreadystatechange=function(){"complete"==l.readyState&&(l.onreadystatechange=null,s())})}(window);
!function(x){function t(t,e,n){return n=u(e,n),this.on("click.pjax",t,function(t){var e=n;e.container||((e=x.extend({},n)).container=x(this).attr("data-pjax")),a(t,e)})}function a(t,e,n){n=u(e,n);var a,r,o,i=t.currentTarget,c=x(i);if("A"!==i.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol===i.protocol&&location.hostname===i.hostname&&(-1<i.href.indexOf("#")&&s(i)==s(location)||t.isDefaultPrevented()||(a={url:i.href,container:c.attr("data-pjax"),target:i},r=x.extend({},a,n),o=x.Event("pjax:click"),c.trigger(o,[r]),o.isDefaultPrevented()||(v(r),t.preventDefault(),c.trigger("pjax:clicked",[r]))))}function e(t,e,n){n=u(e,n);var a=t.currentTarget,r=x(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var o={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:a};if("GET"!==o.type&&void 0!==window.FormData)o.data=new FormData(a),o.processData=!1,o.contentType=!1;else{if(r.find(":file").length)return;o.data=r.serializeArray()}v(x.extend({},o,n)),t.preventDefault()}function v(d){d=x.extend(!0,{},x.ajaxSettings,v.defaults,d),x.isFunction(d.url)&&(d.url=d.url());var f=b(d.url).hash,t=x.type(d.container);if("string"!==t)throw"expected string value for 'container' option; got "+t;var a,h=d.context=x(d.container);if(!h.length)throw"the container selector '"+d.container+"' did not match anything";function m(t,e,n){(n=n||{}).relatedTarget=d.target;var a=x.Event(t,n);return h.trigger(a,e),!a.isDefaultPrevented()}d.data||(d.data={}),x.isArray(d.data)?d.data.push({name:"_pjax",value:d.container}):d.data._pjax=d.container,d.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",d.container),!m("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(a=setTimeout(function(){m("pjax:timeout",[t,d])&&t.abort("timeout")},e.timeout),e.timeout=0);var n=b(e.url);f&&(n.hash=f),d.requestUrl=l(n)},d.complete=function(t,e){a&&clearTimeout(a),m("pjax:complete",[t,e,d]),m("pjax:end",[t,d])},d.error=function(t,e,n){var a=T("",t,d),r=m("pjax:error",[t,e,n,d]);"GET"==d.type&&"abort"!==e&&r&&g(a.url)},d.success=function(t,e,n){var a=v.state,r="function"==typeof x.pjax.defaults.version?x.pjax.defaults.version():x.pjax.defaults.version,o=n.getResponseHeader("X-PJAX-Version"),i=T(t,n,d),c=b(i.url);if(f&&(c.hash=f,i.url=c.href),r&&o&&r!==o)g(i.url);else if(i.contents){if(v.state={id:d.id||j(),url:i.url,title:i.title,container:d.container,fragment:d.fragment,timeout:d.timeout},(d.push||d.replace)&&window.history.replaceState(v.state,i.title,i.url),x.contains(h,document.activeElement))try{document.activeElement.blur()}catch(t){}i.title&&(document.title=i.title),m("pjax:beforeReplace",[i.contents,d],{state:v.state,previousState:a}),h.html(i.contents);var s=h.find("input[autofocus], textarea[autofocus]").last()[0];s&&document.activeElement!==s&&s.focus(),function(t){if(!t)return;var a=x("script[src]");t.each(function(){var t,e,n=this.src;a.filter(function(){return this.src===n}).length||(t=document.createElement("script"),(e=x(this).attr("type"))&&(t.type=e),t.src=x(this).attr("src"),document.head.appendChild(t))})}(i.scripts);var u,l,p=d.scrollTo;f&&(u=decodeURIComponent(f.slice(1)),(l=document.getElementById(u)||document.getElementsByName(u)[0])&&(p=x(l).offset().top)),"number"==typeof p&&x(window).scrollTop(p),m("pjax:success",[t,e,n,d])}else g(i.url)},v.state||(v.state={id:j(),url:window.location.href,title:document.title,container:d.container,fragment:d.fragment,timeout:d.timeout},window.history.replaceState(v.state,document.title)),y(v.xhr),v.options=d;var e,n,r=v.xhr=x.ajax(d);return 0<r.readyState&&(d.push&&!d.replace&&(e=v.state.id,n=[d.container,w(h)],E[e]=n,P.push(e),C(S,0),C(P,v.defaults.maxCacheLength),window.history.pushState(null,"",d.requestUrl)),m("pjax:start",[r,d]),m("pjax:send",[r,d])),v.xhr}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return v(x.extend(n,u(t,e)))}function g(t){window.history.replaceState(null,"",v.state.url),window.location.replace(t)}var p=!0,d=window.location.href,r=window.history.state;function o(t){p||y(v.xhr);var e,n=v.state,a=t.state;if(a&&a.container){if(p&&d==a.url)return;if(n){if(n.id===a.id)return;e=n.id<a.id?"forward":"back"}var r,o,i,c=E[a.id]||[],s=c[0]||a.container,u=x(s),l=c[1];u.length?(n&&function(t,e,n){var a,r;E[e]=n,r="forward"===t?(a=P,S):(a=S,P);a.push(e),(e=r.pop())&&delete E[e];C(a,v.defaults.maxCacheLength)}(e,n.id,[s,w(u)]),r=x.Event("pjax:popstate",{state:a,direction:e}),u.trigger(r),o={id:a.id,url:a.url,container:s,push:!1,fragment:a.fragment,timeout:a.timeout,scrollTo:!1},l?(u.trigger("pjax:start",[null,o]),(v.state=a).title&&(document.title=a.title),i=x.Event("pjax:beforeReplace",{state:a,previousState:n}),u.trigger(i,[l,o]),u.html(l),u.trigger("pjax:end",[null,o])):v(o),u[0].offsetHeight):g(location.href)}p=!1}function i(t){var e=x.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=x("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(x("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r,o=t.data;if("string"==typeof o)x.each(o.split("&"),function(t,e){var n=e.split("=");a.append(x("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(x.isArray(o))x.each(o,function(t,e){a.append(x("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof o){for(r in o)a.append(x("<input>",{type:"hidden",name:r,value:o[r]}))}x(document.body).append(a),a.submit()}function y(t){t&&t.readyState<4&&(t.onreadystatechange=x.noop,t.abort())}function j(){return(new Date).getTime()}function w(t){var e=t.clone();return e.find("script").each(function(){this.src||x._data(this,"globalEval",!1)}),e.contents()}function l(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function b(t){var e=document.createElement("a");return e.href=t,e}function s(t){return t.href.replace(/#.*/,"")}function u(t,e){return t&&e?((e=x.extend({},e)).container=t,e):x.isPlainObject(t)?t:{container:t}}function f(t,e){return t.filter(e).add(t.find(e))}function h(t){return x.parseHTML(t,document,!0)}function T(t,e,n){var a,r,o,i,c={},s=/<html/i.test(t),u=e.getResponseHeader("X-PJAX-URL");return c.url=u?l(b(u)):n.requestUrl,o=s?(a=x(h(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0])),null!=(r=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i))?x(h(r[0])):a):a=x(h(t)),0===a.length||(c.title=f(o,"title").last().text(),n.fragment?(i=a,"body"!==n.fragment&&(i=f(i,n.fragment).first()),i.length&&(c.contents="body"===n.fragment?i:i.contents(),c.title||(c.title=i.attr("title")||i.data("title")))):s||(c.contents=a),c.contents&&(c.contents=c.contents.not(function(){return x(this).is("title")}),c.contents.find("title").remove(),c.scripts=f(c.contents,"script[src]").remove(),c.contents=c.contents.not(c.scripts)),c.title&&(c.title=x.trim(c.title))),c}r&&r.container&&(v.state=r),"state"in window.history&&(p=!1);var E={},S=[],P=[];function C(t,e){for(;t.length>e;)delete E[t.shift()]}function c(){return x("meta").filter(function(){var t=x(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function m(){x.fn.pjax=t,x.pjax=v,x.pjax.enable=x.noop,x.pjax.disable=A,x.pjax.click=a,x.pjax.submit=e,x.pjax.reload=n,x.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:c},x(window).on("popstate.pjax",o)}function A(){x.fn.pjax=function(){return this},x.pjax=i,x.pjax.enable=m,x.pjax.disable=x.noop,x.pjax.click=x.noop,x.pjax.submit=x.noop,x.pjax.reload=function(){window.location.reload()},x(window).off("popstate.pjax",o)}x.event.props&&x.inArray("state",x.event.props)<0?x.event.props.push("state"):"state"in x.Event.prototype||x.event.addProp("state"),x.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),(x.support.pjax?m:A)()}(jQuery);
!function(e,i){var r;"function"==typeof define&&define.amd?define(["exports","jquery"],i):"undefined"!=typeof exports?(r=require("jquery"),i(exports,r)):i(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,d){function i(t,r){function n(e,i,r){return e[i]=r,e}function a(e,i){for(var r,t,a=e.match(f.key);void 0!==(r=a.pop());){f.push.test(r)?i=n([],(t=e.replace(/\[\]$/,""),void 0===u[t]&&(u[t]=0),u[t]++),i):f.fixed.test(r)?i=n([],r,i):f.named.test(r)&&(i=n({},r,i))}return i}function e(){return s}var s={},u={};this.addPair=function(e){if(!f.validate.test(e.name))return this;var i=a(e.name,function(e){switch(d('[name="'+e.name+'"]',r).attr("type")){case"checkbox":return"on"===e.value||e.value;default:return e.value}}(e));return s=t.extend(!0,s,i),this},this.addPairs=function(e){if(!t.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var i=0,r=e.length;i<r;i++)this.addPair(e[i]);return this},this.serialize=e,this.serializeJSON=function(){return JSON.stringify(s)}}var f={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return i.patterns=f,i.serializeObject=function(){return new i(d,this).addPairs(this.serializeArray()).serialize()},i.serializeJSON=function(){return new i(d,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==d.fn&&(d.fn.serializeObject=i.serializeObject,d.fn.serializeJSON=i.serializeJSON),e.FormSerializer=i});
var QRCode;!function(){function r(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=[],r=0,o=this.data.length;r<o;r++){var i=this.data.charCodeAt(r);65536<i?(e[0]=240|(1835008&i)>>>18,e[1]=128|(258048&i)>>>12,e[2]=128|(4032&i)>>>6,e[3]=128|63&i):2048<i?(e[0]=224|(61440&i)>>>12,e[1]=128|(4032&i)>>>6,e[2]=128|63&i):128<i?(e[0]=192|(1984&i)>>>6,e[1]=128|63&i):e[0]=i,this.parsedData=this.parsedData.concat(e)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function h(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function _(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&0==t[r];)r++;this.num=new Array(t.length-r+e);for(var o=0;o<t.length-r;o++)this.num[o]=t[o+r]}function u(t,e){this.totalCount=t,this.dataCount=e}function l(){this.buffer=[],this.length=0}function o(){var t=!1,e=navigator.userAgent;return/android/i.test(e)&&(t=!0,aMat=e.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(t=parseFloat(aMat[1]))),t}function e(t,e){for(var r,o,i=1,n=(r=t,(o=encodeURI(r).toString().replace(/\%[0-9a-fA-F]{2}/g,"a")).length+(o.length!=r?3:0)),a=0,s=w.length;a<=s;a++){var h=0;switch(e){case g.L:h=w[a][0];break;case g.M:h=w[a][1];break;case g.Q:h=w[a][2];break;case g.H:h=w[a][3]}if(n<=h)break;i++}if(w.length<i)throw new Error("Too long data");return i}r.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}},h.prototype={addData:function(t){var e=new r(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[r][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=h.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var o=-1;o<=7;o++)e+o<=-1||this.moduleCount<=e+o||(this.modules[t+r][e+o]=0<=r&&r<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var o=v.getLostPoint(this);(0==r||o<t)&&(t=o,e=r)}return e},createMovieClip:function(t,e,r){var o=t.createEmptyMovieClip(e,r);this.make();for(var i=0;i<this.modules.length;i++)for(var n=+i,a=0;a<this.modules[i].length;a++){var s=+a;this.modules[i][a]&&(o.beginFill(0,100),o.moveTo(s,n),o.lineTo(1+s,n),o.lineTo(1+s,1+n),o.lineTo(s,1+n),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){for(var t=v.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var o=t[e],i=t[r];if(null==this.modules[o][i])for(var n=-2;n<=2;n++)for(var a=-2;a<=2;a++)this.modules[o+n][i+a]=-2==n||2==n||-2==a||2==a||0==n&&0==a}},setupTypeNumber:function(t){for(var e=v.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var o=!t&&1==(1&e>>r);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(r=0;r<18;r++){o=!t&&1==(1&e>>r);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=o}},setupTypeInfo:function(t,e){for(var r=this.errorCorrectLevel<<3|e,o=v.getBCHTypeInfo(r),i=0;i<15;i++){var n=!t&&1==(1&o>>i);i<6?this.modules[i][8]=n:i<8?this.modules[i+1][8]=n:this.modules[this.moduleCount-15+i][8]=n}for(i=0;i<15;i++){n=!t&&1==(1&o>>i);i<8?this.modules[8][this.moduleCount-i-1]=n:i<9?this.modules[8][15-i-1+1]=n:this.modules[8][15-i-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var r=-1,o=this.moduleCount-1,i=7,n=0,a=this.moduleCount-1;0<a;a-=2)for(6==a&&a--;;){for(var s,h=0;h<2;h++){null==this.modules[o][a-h]&&(s=!1,n<t.length&&(s=1==(1&t[n]>>>i)),v.getMask(e,o,a-h)&&(s=!s),this.modules[o][a-h]=s,-1==--i&&(n++,i=7))}if((o+=r)<0||this.moduleCount<=o){o-=r,r=-r;break}}}},h.PAD0=236,h.PAD1=17,h.createData=function(t,e,r){for(var o=u.getRSBlocks(t,e),i=new l,n=0;n<r.length;n++){var a=r[n];i.put(a.mode,4),i.put(a.getLength(),v.getLengthInBits(a.mode,t)),a.write(i)}for(var s=0,n=0;n<o.length;n++)s+=o[n].dataCount;if(i.getLengthInBits()>8*s)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*s+")");for(i.getLengthInBits()+4<=8*s&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*s)&&(i.put(h.PAD0,8),!(i.getLengthInBits()>=8*s));)i.put(h.PAD1,8);return h.createBytes(i,o)},h.createBytes=function(t,e){for(var r=0,o=0,i=0,n=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var h=e[s].dataCount,l=e[s].totalCount-h,o=Math.max(o,h),i=Math.max(i,l);n[s]=new Array(h);for(var u=0;u<n[s].length;u++)n[s][u]=255&t.buffer[u+r];r+=h;var g=v.getErrorCorrectPolynomial(l),f=new _(n[s],g.getLength()-1).mod(g);a[s]=new Array(g.getLength()-1);for(u=0;u<a[s].length;u++){var d=u+f.getLength()-a[s].length;a[s][u]=0<=d?f.get(d):0}}for(var c=0,u=0;u<e.length;u++)c+=e[u].totalCount;for(var p=new Array(c),m=0,u=0;u<o;u++)for(s=0;s<e.length;s++)u<n[s].length&&(p[m++]=n[s][u]);for(u=0;u<i;u++)for(s=0;s<e.length;s++)u<a[s].length&&(p[m++]=a[s][u]);return p};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},g={L:1,M:0,Q:3,H:2},i=0,a=1,s=2,f=3,d=4,c=5,p=6,m=7,v={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=v.getBCHDigit(e)-v.getBCHDigit(v.G15);)e^=v.G15<<v.getBCHDigit(e)-v.getBCHDigit(v.G15);return(t<<10|e)^v.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=v.getBCHDigit(e)-v.getBCHDigit(v.G18);)e^=v.G18<<v.getBCHDigit(e)-v.getBCHDigit(v.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return v.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case i:return 0==(e+r)%2;case a:return 0==e%2;case s:return 0==r%3;case f:return 0==(e+r)%3;case d:return 0==(Math.floor(e/2)+Math.floor(r/3))%2;case c:return 0==e*r%2+e*r%3;case p:return 0==(e*r%2+e*r%3)%2;case m:return 0==(e*r%3+(e+r)%2)%2;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new _([1],0),r=0;r<t;r++)e=e.multiply(new _([1,C.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,o=0;o<e;o++)for(var i=0;i<e;i++){for(var n=0,a=t.isDark(o,i),s=-1;s<=1;s++)if(!(o+s<0||e<=o+s))for(var h=-1;h<=1;h++)i+h<0||e<=i+h||0==s&&0==h||a!=t.isDark(o+s,i+h)||n++;5<n&&(r+=3+n-5)}for(o=0;o<e-1;o++)for(i=0;i<e-1;i++){var l=0;t.isDark(o,i)&&l++,t.isDark(o+1,i)&&l++,t.isDark(o,i+1)&&l++,t.isDark(o+1,i+1)&&l++,0!=l&&4!=l||(r+=3)}for(o=0;o<e;o++)for(i=0;i<e-6;i++)t.isDark(o,i)&&!t.isDark(o,i+1)&&t.isDark(o,i+2)&&t.isDark(o,i+3)&&t.isDark(o,i+4)&&!t.isDark(o,i+5)&&t.isDark(o,i+6)&&(r+=40);for(i=0;i<e;i++)for(o=0;o<e-6;o++)t.isDark(o,i)&&!t.isDark(o+1,i)&&t.isDark(o+2,i)&&t.isDark(o+3,i)&&t.isDark(o+4,i)&&!t.isDark(o+5,i)&&t.isDark(o+6,i)&&(r+=40);for(var u=0,i=0;i<e;i++)for(o=0;o<e;o++)t.isDark(o,i)&&u++;return r+10*(Math.abs(100*u/e/e-50)/5)}},C={glog:function(t){if(t<1)throw new Error("glog("+t+")");return C.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;256<=t;)t-=255;return C.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)C.EXP_TABLE[t]=1<<t;for(t=8;t<256;t++)C.EXP_TABLE[t]=C.EXP_TABLE[t-4]^C.EXP_TABLE[t-5]^C.EXP_TABLE[t-6]^C.EXP_TABLE[t-8];for(t=0;t<255;t++)C.LOG_TABLE[C.EXP_TABLE[t]]=t;_.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<t.getLength();o++)e[r+o]^=C.gexp(C.glog(this.get(r))+C.glog(t.get(o)));return new _(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=C.glog(this.get(0))-C.glog(t.get(0)),r=new Array(this.getLength()),o=0;o<this.getLength();o++)r[o]=this.get(o);for(o=0;o<t.getLength();o++)r[o]^=C.gexp(C.glog(t.get(o))+e);return new _(r,0).mod(t)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(t,e){var r=u.getRsBlockTable(t,e);if(null==r)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=r.length/3,i=[],n=0;n<o;n++)for(var a=r[3*n+0],s=r[3*n+1],h=r[3*n+2],l=0;l<a;l++)i.push(new u(s,h));return i},u.getRsBlockTable=function(t,e){switch(e){case g.L:return u.RS_BLOCK_TABLE[4*(t-1)+0];case g.M:return u.RS_BLOCK_TABLE[4*(t-1)+1];case g.Q:return u.RS_BLOCK_TABLE[4*(t-1)+2];case g.H:return u.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},l.prototype={get:function(t){var e=Math.floor(t/8);return 1==(1&this.buffer[e]>>>7-t%8)},put:function(t,e){for(var r=0;r<e;r++)this.putBit(1==(1&t>>>e-r-1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var w=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],D=(L.prototype.draw=function(t){function e(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&r.setAttribute(o,e[o]);return r}var r=this._htOption,o=this._el,i=t.getModuleCount();Math.floor(r.width/i),Math.floor(r.height/i),this.clear();var n=e("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:r.colorLight});n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(n),n.appendChild(e("rect",{fill:r.colorDark,width:"1",height:"1",id:"template"}));for(var a,s=0;s<i;s++)for(var h=0;h<i;h++)t.isDark(s,h)&&((a=e("use",{x:String(s),y:String(h)})).setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),n.appendChild(a))},L.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},L),A="svg"===document.documentElement.tagName.toLowerCase()?D:"undefined"!=typeof CanvasRenderingContext2D?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}var l,u;this._android&&this._android<=2.1&&(l=1/window.devicePixelRatio,u=CanvasRenderingContext2D.prototype.drawImage,CanvasRenderingContext2D.prototype.drawImage=function(t,e,r,o,i,n,a,s){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;1<=h;h--)arguments[h]=arguments[h]*l;else void 0===s&&(e*=l,r*=l,o*=l,i*=l);u.apply(this,arguments)});function e(t,e){this._bIsPainted=!1,this._android=o(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null}return e.prototype.draw=function(t){var e=this._elImage,r=this._oContext,o=this._htOption,i=t.getModuleCount(),n=o.width/i,a=o.height/i,s=Math.round(n),h=Math.round(a);e.style.display="none",this.clear();for(var l=0;l<i;l++)for(var u=0;u<i;u++){var g=t.isDark(l,u),f=u*n,d=l*a;r.strokeStyle=g?o.colorDark:o.colorLight,r.lineWidth=1,r.fillStyle=g?o.colorDark:o.colorLight,r.fillRect(f,d,n,a),r.strokeRect(Math.floor(f)+.5,Math.floor(d)+.5,s,h),r.strokeRect(Math.ceil(f)-.5,Math.ceil(d)-.5,s,h)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&function(t,e){var r=this;if(r._fFail=e,r._fSuccess=t,null===r._bSupportDataURI){function o(){r._bSupportDataURI=!1,r._fFail&&_fFail.call(r)}var i=document.createElement("img");return i.onabort=o,i.onerror=o,i.onload=function(){r._bSupportDataURI=!0,r._fSuccess&&r._fSuccess.call(r)},void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===r._bSupportDataURI&&r._fSuccess?r._fSuccess.call(r):!1===r._bSupportDataURI&&r._fFail&&r._fFail.call(r)}.call(this,t)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},e}():(E.prototype.draw=function(t){for(var e=this._htOption,r=this._el,o=t.getModuleCount(),i=Math.floor(e.width/o),n=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<o;s++){a.push("<tr>");for(var h=0;h<o;h++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+n+"px;background-color:"+(t.isDark(s,h)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),r.innerHTML=a.join("");var l=r.childNodes[0],u=(e.width-l.offsetWidth)/2,g=(e.height-l.offsetHeight)/2;0<u&&0<g&&(l.style.margin=g+"px "+u+"px")},E.prototype.clear=function(){this._el.innerHTML=""},E);function E(t,e){this._el=t,this._htOption=e}function L(t,e){this._el=t,this._htOption=e}(QRCode=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:g.H},"string"==typeof e&&(e={text:e}),e)for(var r in e)this._htOption[r]=e[r];"string"==typeof t&&(t=document.getElementById(t)),this._android=o(),this._el=t,this._oQRCode=null,this._oDrawing=new A(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new h(e(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||3<=this._android)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=g}();
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r){function a(e){"object"!==_typeof(e)||(this.option=r.extend({},t,e))}var t={weibokey:"",source:""};a.templates={qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}&summary={{SUMMARY}}",weibo:"http://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}"},a.prototype.init=function(){var i=this,n=["qq","weibo","wechat"];r(".osc-share").on("click","[data-platform]",function(){var e=r(this).data("platform");if(n.indexOf(e)<0)return!1;if("wechat"===e)return i.showWeChatShare(),!1;var t=a.templates[e],o=i.generateUrl(t);o&&window.open(o,"_blank")})},a.prototype.generateUrl=function(e){var t=e,o=page.shareUrl||location.href||"",i=page.shareTitle||window.document.title||"",n=page.shareDesc||"",r={URL:o,TITLE:i,DESCRIPTION:n,IMAGE:page.sharePic||"",SUMMARY:n,SOURCE:this.option.source,WEIBOKEY:this.option.weibokey};for(var a in r)t=t.replace("{{"+a+"}}",encodeURIComponent(r[a]||""));return t},a.prototype.showWeChatShare=function(){if(0<r("#wechatShareDialog").length)return!1;var e=r('<div id="wechatShareDialog">    <div class="wx-header"><span>分享到微信</span><a class="wx-close">×</a></div>    <div class="wx-qrcode" id="wechatQrCode"></div>    <div class="wx-footer">打开微信“扫一扫”分享</div></div>');r("body").append(e),e.on("click",".wx-close",function(){e.remove()}),new QRCode(document.getElementById("wechatQrCode"),{text:location.href,width:180,height:180})},r(function(){new a({weibokey:"582509177",source:"oschina"}).init()})}(window.jQuery||window.$);
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return o={},r.m=n=[function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t},i=u(n(1)),a=u(n(3)),c=u(n(4));function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t){return t&&t.__esModule?t:{default:t}}var s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,a.default),r(f,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===o(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,c.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return d("action",t)}},{key:"defaultTarget",value:function(t){var e=d("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return d("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),f);function f(t,e){!function(t){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return n.resolveOptions(e),n.listenClick(t),n}function d(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}t.exports=s},function(t,e,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t},i=n(2),a=i&&i.__esModule?i:{default:i};function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var l=(r(u,[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),u);function u(t){!function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.resolveOptions(t),this.initSelection()}t.exports=l},function(t,e){t.exports=function(t){var e,n,o,r="SELECT"===t.nodeName?(t.focus(),t.value):"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?((e=t.hasAttribute("readonly"))||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),t.value):(t.hasAttribute("contenteditable")&&t.focus(),n=window.getSelection(),(o=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(o),n.toString());return r}},function(t,e){function n(){}n.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,a=o.length;i<a;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=n},function(t,e,n){var u=n(5),s=n(6);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!u.string(e))throw new TypeError("Second argument must be a String");if(!u.fn(n))throw new TypeError("Third argument must be a Function");if(u.node(t))return c=e,l=n,(a=t).addEventListener(c,l),{destroy:function(){a.removeEventListener(c,l)}};if(u.nodeList(t))return o=t,r=e,i=n,Array.prototype.forEach.call(o,function(t){t.addEventListener(r,i)}),{destroy:function(){Array.prototype.forEach.call(o,function(t){t.removeEventListener(r,i)})}};if(u.string(t))return s(document.body,t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,i,a,c,l}},function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,n){var a=n(7);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=a(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},function(t,e){var n;"undefined"==typeof Element||Element.prototype.matches||((n=Element.prototype).matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}],r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0);function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n,o});
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(c){var a={type:"info",header:"",content:"",closeable:!1,disappear:0},l={hideAll:function(){c(this).find(".ui.message.osc").addClass("hidden")}};c.fn.message=function(e){if("string"!=typeof e){if("object"===_typeof(e)){var t=c.extend({},a,e),n=c(this),o=0<t.type.length?"."+t.type:"",i=n.find(".ui.message.osc"+o),s="";return t.closeable&&(s+='<i class="close icon"></i>',i.on("click",".close",function(){i.transition("fade")})),0<t.header.length&&(s+='<div class="header">'+t.header+"</div>"),0<t.content.length&&(s+="<p>"+t.content+"</p>"),i.html(s),i.removeClass("hidden"),void(0<t.disappear&&setTimeout(function(){i.addClass("hidden")},t.disappear))}}else c.isFunction(l[e])&&l[e].call(this)}}(window.jQuery||window.$);
"use strict";({bindLink:function(){var s=this;$(document).on("click",".send-message-btn",function(){if(!window.common.checkLogin())return!1;var e=$(this),t=e.attr("data-user-id"),a=e.attr("data-user-name");0===$.find(".send-message.modal").length&&!0!==window.oscSendMessageLoading?(window.oscSendMessageLoading=!0,$.get(page.space_user_url+"/widgets/private_message_modal",function(e){var n=document.createElement("div");n.innerHTML=e,document.body.appendChild(n),s.initModal(),s.showModal(t,a)}).always(function(){window.oscSendMessageLoading=!1})):s.showModal(t,a)})},initModal:function(){var a=$(".send-message.modal"),n=$("#sendMessageForm");n.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入内容"},{type:"maxLength[250]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/msg/send",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var n=a.attr("data-user-id"),t=e.data;return e.data={receiver:n,content:t.content},e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"发送成功"}),n.form("reset"),setTimeout(function(){a.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"发送失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.modal({onShow:function(){n.form("reset"),n.message("hideAll");var e=$(this).attr("data-user-name")||"";0<(e=e.trim()).length&&a.find("span.user-name").html(e)},onApprove:function(){return n.message("hideAll"),n.form("submit"),!1}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()})},showModal:function(e,n){var t=$(".send-message.modal");t.attr("data-user-id",e),t.attr("data-user-name",n),t.modal("show")}}).bindLink();
"use strict";({statusCode:{UN_FOLLOW:1,FOLLOWED:2,FOLLOW_EACH_OTHER:3},statusStyles:{heart:{UN_FOLLOW:{normal:{text:"关注",icon:"heart outline icon"},hover:{text:"关注",icon:"heart icon"}},FOLLOWED:{normal:{text:"已关注",icon:"heart icon"},hover:{text:"取消关注",icon:"heart outline icon"}},FOLLOW_EACH_OTHER:{normal:{text:"互相关注",icon:"exchange icon"},hover:{text:"取消关注",icon:"heart outline icon"}}},"simple-star":{UN_FOLLOW:{normal:{text:"关注",icon:"star outline grey icon"},hover:{text:"关注",icon:"star outline grey icon"}},FOLLOWED:{normal:{text:"关注",icon:"star yellow icon"},hover:{text:"关注",icon:"star yellow icon"}},FOLLOW_EACH_OTHER:{normal:{text:"关注",icon:"star yellow icon"},hover:{text:"关注",icon:"star yellow icon"}}},"simple-heart":{UN_FOLLOW:{normal:{text:"关注",icon:"heart outline grey icon"},hover:{text:"关注",icon:"heart outline grey icon"}},FOLLOWED:{normal:{text:"关注",icon:"heart red icon"},hover:{text:"关注",icon:"heart red icon"}},FOLLOW_EACH_OTHER:{normal:{text:"关注",icon:"heart red icon"},hover:{text:"关注",icon:"heart red icon"}}}},init:function(){this.bindHover(),this.bindClick()},bindHover:function(){var a=this;$(document).on("mouseenter",".follow-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status")),e=t.attr("data-icon-color");a.setBtnFollowStatus(o,"hover",t,e)}),$(document).on("mouseleave",".follow-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status")),e=t.attr("data-icon-color");a.setBtnFollowStatus(o,"normal",t,e)})},bindClick:function(){var n=this;$(document).on("click",".follow-btn",function(){if(!window.common.checkLogin())return!1;var o=$(this),e=o.attr("data-user-id"),a=o.attr("data-icon-color");$.post(page.space_user_url+"/user/switch_follow",{friendid:e},function(t){1===t.code?(n.setBtnFollowStatus(t.result.status,"normal",o,a),n.setGlobalFollowCount(page.g_user_id,t.result.meFollowing||0,t.result.meFollowers||0),n.setGlobalFollowCount(e,t.result.friendFollowing||0,t.result.friendFollowers||0)):$("body").toast({type:"error",content:t.message||"操作失败"})})})},setBtnFollowStatus:function(t,o,e,a){o="normal"===o?"normal":"hover",a="red"===a?"red":"";var n,r=this,l=e.find(".text"),i=e.find("i"),s=r.statusStyles.heart,c=e.attr("data-status-style")||"";switch(c&&r.statusStyles[c]&&(s=r.statusStyles[c]),t){case r.statusCode.UN_FOLLOW:e.attr("data-follow-status",r.statusCode.UN_FOLLOW),l.text(s.UN_FOLLOW[o].text),l&&0===l.length&&e.attr("title",s.UN_FOLLOW[o].text),n=s.UN_FOLLOW[o].icon,i.attr("class","hover"===o?n+" "+a:n);break;case r.statusCode.FOLLOWED:e.attr("data-follow-status",r.statusCode.FOLLOWED),l.text(s.FOLLOWED[o].text),l&&0===l.length&&e.attr("title",s.FOLLOWED[o].text),n=s.FOLLOWED[o].icon,i.attr("class","normal"===o?n+" "+a:n);break;case r.statusCode.FOLLOW_EACH_OTHER:e.attr("data-follow-status",r.statusCode.FOLLOW_EACH_OTHER),l.text(s.FOLLOW_EACH_OTHER[o].text),l&&0===l.length&&e.attr("title",s.FOLLOW_EACH_OTHER[o].text),n=s.FOLLOW_EACH_OTHER[o].icon,i.attr("class","normal"===o?n+" "+a:n)}},setGlobalFollowCount:function(t,r,l){if(null==t||""===t||""===t.trim())return!1;$('[data-following-count][data-user-id="'+t+'"]').each(function(t,o){var e=$(o),a=e.data("format"),n=r;a&&(n=window.common.formatNumberK(r)),e.text(n),e.attr("data-following-count",r)}),$('[data-followers-count][data-user-id="'+t+'"]').each(function(t,o){var e=$(o),a=e.data("format"),n=l;a&&(n=window.common.formatNumberK(l)),e.text(n),e.attr("data-followers-count",l)})}}).init();
"use strict";!function(c){c.fn.imgOptimize=function(h,a){function n(t,i,s){var h,a;void 0!==i&&void 0!==s&&(c(t).data("init")||(c(t).data("init",!0),h=t.naturalWidth,a=t.naturalHeight,h<i&&a<s?(c(t).css("width","100%"),c(t).css("height","100%"),c(t).css("object-fit","fill")):i/s<h/a?(c(t).css("width","auto"),c(t).css("height","100%")):(c(t).css("width","100%"),c(t).css("height","auto"))))}return this.each(function(){var t=this,i=h,s=a;void 0!==i&&void 0!==s||(i=c(this).data("width"),s=c(this).data("height")),t.onload=function(){n(t,i,s)},t.complete&&n(t,i,s)})}}(jQuery);
!function(i){i.fn.emoticon=function(e){var o=i.extend({},e),r={replaceEmoticonText:function(e){var r=this,a=String(e||"");return a=(a=a.replace(/:\w+?:/gi,function(e){var a=e.replace(/:/g,"");return"bowtie,smile,laughing,blush,smiley,relaxed,smirk,heart_eyes,kissing_heart,kissing_closed_eyes,flushed,relieved,satisfied,grin,wink,stuck_out_tongue_winking_eye,stuck_out_tongue_closed_eyes,grinning,kissing,kissing_smiling_eyes,stuck_out_tongue,sleeping,worried,frowning,anguished,open_mouth,grimacing,confused,hushed,expressionless,unamused,sweat_smile,sweat,disappointed_relieved,weary,pensive,disappointed,confounded,fearful,cold_sweat,persevere,cry,sob,joy,astonished,scream,neckbeard,tired_face,angry,rage,triumph,sleepy,yum,mask,sunglasses,dizzy_face,imp,smiling_imp,neutral_face,no_mouth,innocent,alien,yellow_heart,blue_heart,purple_heart,heart,green_heart,broken_heart,heartbeat,heartpulse,two_hearts,revolving_hearts,cupid,sparkling_heart,sparkles,star,star2,dizzy,boom,collision,anger,exclamation,question,grey_exclamation,grey_question,zzz,dash,sweat_drops,notes,musical_note,fire,hankey,poop,shit,+1,thumbsup,-1,thumbsdown,ok_hand,punch,facepunch,fist,v,wave,hand,raised_hand,open_hands,point_up,point_down,point_left,point_right,raised_hands,pray,point_up_2,clap,muscle,metal,fu,walking,runner,running,couple,family,two_men_holding_hands,two_women_holding_hands,dancer,dancers,ok_woman,no_good,information_desk_person,raising_hand,bride_with_veil,person_with_pouting_face,person_frowning,bow,couplekiss,couple_with_heart,massage,haircut,nail_care,boy,girl,woman,man,baby,older_woman,older_man,person_with_blond_hair,man_with_gua_pi_mao,man_with_turban,construction_worker,cop,angel,princess,smiley_cat,smile_cat,heart_eyes_cat,kissing_cat,smirk_cat,scream_cat,crying_cat_face,joy_cat,pouting_cat,japanese_ogre,japanese_goblin,see_no_evil,hear_no_evil,speak_no_evil,guardsman,skull,feet,lips,kiss,droplet,ear,eyes,nose,tongue,love_letter,bust_in_silhouette,busts_in_silhouette,speech_balloon,thought_balloon,feelsgood,finnadie,goberserk,godmode,hurtrealbad,rage1,rage2,rage3,rage4,suspect,trollface,sunny,umbrella,cloud,snowflake,snowman,zap,cyclone,foggy,ocean,cat,dog,mouse,hamster,rabbit,wolf,frog,tiger,koala,bear,pig,pig_nose,cow,boar,monkey_face,monkey,horse,racehorse,camel,sheep,elephant,panda_face,snake,bird,baby_chick,hatched_chick,hatching_chick,chicken,penguin,turtle,bug,honeybee,ant,beetle,snail,octopus,tropical_fish,fish,whale,whale2,dolphin,cow2,ram,rat,water_buffalo,tiger2,rabbit2,dragon,goat,rooster,dog2,pig2,mouse2,ox,dragon_face,blowfish,crocodile,dromedary_camel,leopard,cat2,poodle,paw_prints,bouquet,cherry_blossom,tulip,four_leaf_clover,rose,sunflower,hibiscus,maple_leaf,leaves,fallen_leaf,herb,mushroom,cactus,palm_tree,evergreen_tree,deciduous_tree,chestnut,seedling,blossom,ear_of_rice,shell,globe_with_meridians,sun_with_face,full_moon_with_face,new_moon_with_face,new_moon,waxing_crescent_moon,first_quarter_moon,waxing_gibbous_moon,full_moon,waning_gibbous_moon,last_quarter_moon,waning_crescent_moon,last_quarter_moon_with_face,first_quarter_moon_with_face,moon,earth_africa,earth_americas,earth_asia,volcano,milky_way,partly_sunny,octocat,squirrel,bamboo,gift_heart,dolls,school_satchel,mortar_board,flags,fireworks,sparkler,wind_chime,rice_scene,jack_o_lantern,ghost,santa,christmas_tree,gift,bell,no_bell,tanabata_tree,tada,confetti_ball,balloon,crystal_ball,cd,dvd,floppy_disk,camera,video_camera,movie_camera,computer,tv,iphone,phone,telephone,telephone_receiver,pager,fax,minidisc,vhs,sound,speaker,mute,loudspeaker,mega,hourglass,hourglass_flowing_sand,alarm_clock,watch,radio,satellite,loop,mag,mag_right,unlock,lock,lock_with_ink_pen,closed_lock_with_key,key,bulb,flashlight,high_brightness,low_brightness,electric_plug,battery,calling,email,mailbox,postbox,bath,bathtub,shower,toilet,wrench,nut_and_bolt,hammer,seat,moneybag,yen,dollar,pound,euro,credit_card,money_with_wings,e-mail,inbox_tray,outbox_tray,envelope,incoming_envelope,postal_horn,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,package,door,smoking,bomb,gun,hocho,pill,syringe,page_facing_up,page_with_curl,bookmark_tabs,bar_chart,chart_with_upwards_trend,chart_with_downwards_trend,scroll,clipboard,calendar,date,card_index,file_folder,open_file_folder,scissors,pushpin,paperclip,black_nib,pencil2,straight_ruler,triangular_ruler,closed_book,green_book,blue_book,orange_book,notebook,notebook_with_decorative_cover,ledger,books,bookmark,name_badge,microscope,telescope,newspaper,football,basketball,soccer,baseball,tennis,8ball,rugby_football,bowling,golf,mountain_bicyclist,bicyclist,horse_racing,snowboarder,swimmer,surfer,ski,spades,hearts,clubs,diamonds,gem,ring,trophy,musical_score,musical_keyboard,violin,space_invader,video_game,black_joker,flower_playing_cards,game_die,dart,mahjong,clapper,memo,pencil,book,art,microphone,headphones,trumpet,saxophone,guitar,shoe,sandal,high_heel,lipstick,boot,shirt,tshirt,necktie,womans_clothes,dress,running_shirt_with_sash,jeans,kimono,bikini,ribbon,tophat,crown,womans_hat,mans_shoe,closed_umbrella,briefcase,handbag,pouch,purse,eyeglasses,fishing_pole_and_fish,coffee,tea,sake,baby_bottle,beer,beers,cocktail,tropical_drink,wine_glass,fork_and_knife,pizza,hamburger,fries,poultry_leg,meat_on_bone,spaghetti,curry,fried_shrimp,bento,sushi,fish_cake,rice_ball,rice_cracker,rice,ramen,stew,oden,dango,egg,bread,doughnut,custard,icecream,ice_cream,shaved_ice,birthday,cake,cookie,chocolate_bar,candy,lollipop,honey_pot,apple,green_apple,tangerine,lemon,cherries,grapes,watermelon,strawberry,peach,melon,banana,pear,pineapple,sweet_potato,eggplant,tomato,corn,house,house_with_garden,school,office,post_office,hospital,bank,convenience_store,love_hotel,hotel,wedding,church,department_store,european_post_office,city_sunrise,city_sunset,japanese_castle,european_castle,tent,factory,tokyo_tower,japan,mount_fuji,sunrise_over_mountains,sunrise,stars,statue_of_liberty,bridge_at_night,carousel_horse,rainbow,ferris_wheel,fountain,roller_coaster,ship,speedboat,boat,sailboat,rowboat,anchor,rocket,airplane,helicopter,steam_locomotive,tram,mountain_railway,bike,aerial_tramway,suspension_railway,mountain_cableway,tractor,blue_car,oncoming_automobile,car,red_car,taxi,oncoming_taxi,articulated_lorry,bus,oncoming_bus,rotating_light,police_car,oncoming_police_car,fire_engine,ambulance,minibus,truck,train,station,train2,bullettrain_front,bullettrain_side,light_rail,monorail,railway_car,trolleybus,ticket,fuelpump,vertical_traffic_light,traffic_light,warning,construction,beginner,atm,slot_machine,busstop,barber,hotsprings,checkered_flag,crossed_flags,izakaya_lantern,moyai,circus_tent,performing_arts,round_pushpin,triangular_flag_on_post,jp,kr,cn,us,fr,es,it,ru,gb,uk,de,one,two,three,four,five,six,seven,eight,nine,keycap_ten,1234,zero,hash,symbols,arrow_backward,arrow_down,arrow_forward,arrow_left,capital_abcd,abcd,abc,arrow_lower_left,arrow_lower_right,arrow_right,arrow_up,arrow_upper_left,arrow_upper_right,arrow_double_down,arrow_double_up,arrow_down_small,arrow_heading_down,arrow_heading_up,leftwards_arrow_with_hook,arrow_right_hook,left_right_arrow,arrow_up_down,arrow_up_small,arrows_clockwise,arrows_counterclockwise,rewind,fast_forward,information_source,ok,twisted_rightwards_arrows,repeat,repeat_one,new,top,up,cool,free,ng,cinema,koko,signal_strength,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7a7a,u7981,sa,restroom,mens,womens,baby_symbol,no_smoking,parking,wheelchair,metro,baggage_claim,accept,wc,potable_water,put_litter_in_its_place,secret,congratulations,m,passport_control,left_luggage,customs,ideograph_advantage,cl,sos,id,no_entry_sign,underage,no_mobile_phones,do_not_litter,non-potable_water,no_bicycles,no_pedestrians,children_crossing,no_entry,eight_spoked_asterisk,sparkle,eight_pointed_black_star,heart_decoration,vs,vibration_mode,mobile_phone_off,chart,currency_exchange,aries,taurus,gemini,cancer,leo,virgo,libra,scorpius,sagittarius,capricorn,aquarius,pisces,ophiuchus,six_pointed_star,negative_squared_cross_mark,a,b,ab,o2,diamond_shape_with_a_dot_inside,recycle,end,back,on,soon,clock1,clock130,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,heavy_dollar_sign,copyright,registered,tm,x,heavy_exclamation_mark,bangbang,interrobang,o,heavy_multiplication_x,heavy_plus_sign,heavy_minus_sign,heavy_division_sign,white_flower,100,heavy_check_mark,ballot_box_with_check,radio_button,link,curly_loop,wavy_dash,part_alternation_mark,trident,black_small_square,white_small_square,black_medium_small_square,white_medium_small_square,black_medium_square,white_medium_square,black_large_square,white_large_square,white_check_mark,black_square_button,white_square_button,black_circle,white_circle,red_circle,large_blue_circle,large_blue_diamond,large_orange_diamond,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,shipit".split(",").some(function(e){return e===a})?r.emojiRender(a):e})).replace(/(?:<pre>.+?<\/pre>)|(?:\[\d+])/gm,function(e){var a=/^\[(\d+)]$/g.exec(e);if(a){var o=parseInt(a[1]);if(0<=o&&o<=134)return r.qqEmoticonRender(o)}return e})},emojiRender:function(e){return'<emoji data-emoji="emoji '+e+'" data-name="'+e+'"></emoji>'},qqEmoticonRender:function(e){return'<img data-emoticon="qq" src="'+(window.__STATIC_DOMAIN||"")+"/new-osc/js/ke/plugins/emoticons/"+e+'.gif" alt="">'}};return window.emoticonUtil=r,this.each(function(){var e=i(this).html(),a=r.replaceEmoticonText(e)||e;i(this).html(a),"function"==typeof o.callback&&o.callback(a)})}}(jQuery);
"use strict";({bindLink:function(){var i=this;$(document).on("click","a.ban[ban-report]",function(e){if(!window.common.checkLogin())return!1;var t=$(this),a=t.attr("data-id"),o=t.attr("data-key"),n=t.attr("data-obj-type"),r=t.attr("data-url");0===$.find(".ban-report.modal").length&&!0!==window.oscBanReportLoading?(window.oscBanReportLoading=!0,$.get(page.space_user_url+"/widgets/ban_report_modal",function(e){var t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t),i.initModal(),i.showModal(a,o,n,r)}).always(function(){window.oscBanReportLoading=!1})):i.showModal(a,o,n,r)})},initModal:function(){var i=$(".ban-report.modal"),e=$("#banReportForm");i.find(".checkbox").checkbox(),e.form({inline:!0,fields:{reason:{identifier:"reason",rules:[{type:"empty",prompt:"请选择原因"}]},memo:{identifier:"memo",rules:[{type:"maxLength[250]",prompt:"原因内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.space_user_url+"/communityManage/reportv2",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=i.attr("data-id"),a=i.attr("data-key"),o=i.attr("data-obj-type"),n=i.attr("data-url"),r=e.data;return e.data={reason:r.reason,memo:r.memo,obj_type:o,url:n,user_code:r.user_code},t&&""!==t&&0<parseInt(t)?e.data.obj_id=t:a&&""!==a&&(e.data.articleKey=a),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"举报成功"}),setTimeout(function(){i.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"网络错误，请稍后再试"})},onFailure:function(e){$(this).message({type:"negative",content:e.message||"网络错误，请稍后再试"})}}),i.modal({onShow:function(){e.form("reset"),e.message("hideAll")},onApprove:function(){return e.message("hideAll"),e.form("submit"),!1}}),i.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&i.find(".positive.button").click()})},showModal:function(e,t,a,o){var n=$(".ban-report.modal");n.attr("data-id",e),n.attr("data-key",t),n.attr("data-obj-type",a),n.attr("data-url",o),n.modal("show")}}).bindLink();
"use strict";$(function(){({blockedBtnStatusCode:{UN_BLOCK:0,BLOCKED:1},bindLink:function(){var n=this;$(document).on("click","[user-block]",function(t){if(!window.common.checkLogin())return!1;var e=$(this),o=e.attr("data-id"),a=e.attr("data-status");0===$.find(".user-block.modal").length&&!0!==window.oscuserBlockLoading?(window.oscuserBlockLoading=!0,$.get(page.space_user_url+"/widgets/user_block_modal",function(t){var e=document.createElement("div");e.innerHTML=t,document.body.appendChild(e),n.initModal(),n.showModal(o,a)}).always(function(){window.oscuserBlockLoading=!1})):n.showModal(o,a)})},initModal:function(){var s=this,d=$(".user-block.modal");d.find(".checkbox").checkbox(),d.modal({onShow:function(){var t=d.attr("data-status");parseInt(t)===s.blockedBtnStatusCode.BLOCKED?(d.find(".header").text("解除加灰"),d.find(".content p").text("确定解除加灰该用户吗？"),d.find(".actions .ok.button").text("解除")):(d.find(".header").text("确认加灰"),d.find(".content p").text("将用户加入加灰名单后，对方将不可评论你的动态，同时你也不能看到对方的动态。"),d.find(".actions .ok.button").text("加灰"))},onApprove:function(){var o=d.attr("data-id"),a=d.attr("data-status"),n=parseInt(a)===s.blockedBtnStatusCode.BLOCKED?"解除加灰":"加灰";$.ajax({url:page.space_user_url+"/user/update_blacklist",method:"post",data:{blackId:o},success:function(t){var e;1===t.code?($("body").toast({type:"success",content:t.message||n+"成功"}),e=$('[user-block][data-id="'+o+'"][data-status="'+a+'"]'),!!t.result?(e.attr("data-status",s.blockedBtnStatusCode.BLOCKED),e.find(".text").text("解除加灰")):(e.attr("data-status",s.blockedBtnStatusCode.UN_BLOCK),e.find(".text").text("加灰")),d.modal("hide")):$("body").toast({type:"error",content:t.message||n+"失败"})},error:function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})}})}})},showModal:function(t,e){var o=$(".user-block.modal");o.attr("data-id",t),o.attr("data-status",e),o.modal("show")}}).bindLink();var t={blockedBtnStatusCode:{UN_BLOCK:0,BLOCKED:1},blockedBtnStatusConf:{UN_BLOCK:{normal:{selfRemoveClass:"green",selfAddClass:"",text:"加灰",icon:"plus icon",textIcon:"+",textIconClass:"plus"},hover:{selfRemoveClass:"green",selfAddClass:"",text:"加灰",icon:"plus icon",textIcon:"+",textIconClass:"plus"}},BLOCKED:{normal:{selfRemoveClass:"green",selfAddClass:"green",text:"解除加灰",icon:"check icon",textIcon:"×",textIconClass:"check"},hover:{selfRemoveClass:"green",selfAddClass:"green",text:"解除加灰",icon:"",textIcon:"×",textIconClass:"check"}}},setBlockedBtnStatus:function(t,e,o){e="normal"===e?"normal":"hover";var a,n,s,d,c,l,i=this,r=o.find(".text"),u=o.find("i"),k=o.find(".text-icon");switch(t){case i.blockedBtnStatusCode.UN_BLOCK:a=i.blockedBtnStatusConf.UN_BLOCK[e],o.attr("data-blocked-status",i.blockedBtnStatusCode.UN_BLOCK);break;case i.blockedBtnStatusCode.BLOCKED:a=i.blockedBtnStatusConf.BLOCKED[e],o.attr("data-blocked-status",i.blockedBtnStatusCode.BLOCKED)}r.text(a.text),n=a.icon,u.attr("class",n),s=a.textIcon,d=a.textIconClass,k.text(s),k.attr("class","").addClass("text-icon").addClass(d),c=a.selfRemoveClass,l=a.selfAddClass,o.removeClass(c).addClass(l)},bindBlockedBtnHover:function(){var o=this;$(document).on("mouseenter",".blocked-btn",function(){var t=$(this),e=parseInt(t.attr("data-blocked-status"));o.setBlockedBtnStatus(e,"hover",t)}),$(document).on("mouseleave",".blocked-btn",function(){var t=$(this),e=parseInt(t.attr("data-blocked-status"));o.setBlockedBtnStatus(e,"normal",t)})},bindBlockedBtnClick:function(){var d=this;$(document).on("click",".blocked-btn",function(t){t.preventDefault();var e=$(this),o=this,a=parseInt(e.attr("data-blocked-status"))===d.blockedBtnStatusCode.BLOCKED?"解除加灰":"加灰",n=e.attr("data-id");if(!window.common.checkLogin())return!1;var s=$('.blocked-btn[data-id="'+n+'"]');$.post(page.space_user_url+"/user/update_blacklist",{blackId:n},function(t){var e;1===t.code?(e=!!t.result?d.blockedBtnStatusCode.BLOCKED:d.blockedBtnStatusCode.UN_BLOCK,d.setBlockedBtnStatus(e,"normal",s)):$("body").toast({type:"error",content:t.message||a+"失败"})}).always(function(){var t=document.createEvent("Event");t.initEvent("subscribe",!0,!0),o.dispatchEvent(t)})})}};t.bindBlockedBtnHover(),t.bindBlockedBtnClick(),$(document).on("mouseenter",".blocked",function(){var t=$(this);0===t.find(".blocked-cover-tip").length&&t.append('<div class="blocked-cover-tip"><span>亲，是不是眼花了？还是此人已被你“加灰” ？</span></div>'),setTimeout(function(){t.find(".blocked-cover-tip").addClass("hover")},0)}),$(document).on("mouseleave",".blocked",function(){$(this).find(".blocked-cover-tip").removeClass("hover")})});
"use strict";!function(e){function t(t,o){var n=this;if(n.actionItems=t||[],n.actionItems&&0<n.actionItems.length){for(var i=n.actionItems.length,a=0;a<i;a++){n.actionItems[a].addListener(function(){n.updatePopupStatus()})}n.bindEvent(),o&&n.updatePopupStatus()}}t.prototype={constructor:t,bindEvent:function(){var t=this;e("body").on("click",".action-tip .btn-close",function(){var o=e(this).parents(".action-tip:eq(0)").attr("data-name");t.actionItems.some(function(t){return t.name===o&&(t._closed=!0)}),t.destroyPopup(o),t.updatePopupStatus()})},showPopup:function(t,o){var n=e('.action-tip[data-name="'+t+'"]');if(0===n.length)return!1;var i=n.data("position"),a=n.find(".action-tip__toggle");a.popup("is visible")&&!0!==o||a.popup({position:i,on:"manual"}).popup("show")},destroyPopup:function(t){var o=e('.action-tip[data-name="'+t+'"]').find(".action-tip__toggle");o.popup("is visible")&&o.popup("hide")},destroyAllPopup:function(t){var o=this,n=t||[];o.actionItems.forEach(function(t){n.indexOf(t.name)<0&&o.destroyPopup(t.name)})},updatePopupStatus:function(o){var n=this;if(n.actionItems&&0<n.actionItems.length){for(var t=n.actionItems.length,i=[],a=0;a<t;a++){var e=n.actionItems[a];if(!e._closed&&(e.shouldShow()&&(i.push(e.name),!1!==e.interrupt)))break}0<i.length&&i.forEach(function(t){n.showPopup(t,o)}),n.destroyAllPopup(i)}}},window.OSCActionTip=t}(jQuery);
!function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"==typeof exports||exports.nodeType?t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs})):e(exports)}(function(n){var u=[],s=Object.keys,v={},b={},t=/^(no-?highlight|plain|text)$/i,p=/\blang(?:uage)?-([\w-]+)\b/i,r=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,a={case_insensitive:"cI",lexemes:"l",contains:"c",keywords:"k",subLanguage:"sL",className:"cN",begin:"b",beginKeywords:"bK",end:"e",endsWithParent:"eW",illegal:"i",excludeBegin:"eB",excludeEnd:"eE",returnBegin:"rB",returnEnd:"rE",variants:"v",IDENT_RE:"IR",UNDERSCORE_IDENT_RE:"UIR",NUMBER_RE:"NR",C_NUMBER_RE:"CNR",BINARY_NUMBER_RE:"BNR",RE_STARTERS_RE:"RSR",BACKSLASH_ESCAPE:"BE",APOS_STRING_MODE:"ASM",QUOTE_STRING_MODE:"QSM",PHRASAL_WORDS_MODE:"PWM",C_LINE_COMMENT_MODE:"CLCM",C_BLOCK_COMMENT_MODE:"CBCM",HASH_COMMENT_MODE:"HCM",NUMBER_MODE:"NM",C_NUMBER_MODE:"CNM",BINARY_NUMBER_MODE:"BNM",CSS_NUMBER_MODE:"CSSNM",REGEXP_MODE:"RM",TITLE_MODE:"TM",UNDERSCORE_TITLE_MODE:"UTM",COMMENT:"C",beginRe:"bR",endRe:"eR",illegalRe:"iR",lexemesRe:"lR",terminators:"t",terminator_end:"tE"},y="</span>",N={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},c="of and for in not or if then".split(" ");function w(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(e){return e.nodeName.toLowerCase()}function m(e){return t.test(e)}function i(e){var t,r={},a=Array.prototype.slice.call(arguments,1);for(t in e)r[t]=e[t];return a.forEach(function(e){for(t in e)r[t]=e[t]}),r}function g(e){var n=[];return function e(t,r){for(var a=t.firstChild;a;a=a.nextSibling)3===a.nodeType?r+=a.nodeValue.length:1===a.nodeType&&(n.push({event:"start",offset:r,node:a}),r=e(a,r),f(a).match(/br|hr|img|input/)||n.push({event:"stop",offset:r,node:a}));return r}(e,0),n}function o(e){if(a&&!e.langApiRestored){for(var t in e.langApiRestored=!0,a)e[t]&&(e[a[t]]=e[t]);(e.c||[]).concat(e.v||[]).forEach(o)}}function _(t,r){var i={};return"string"==typeof t?a("keyword",t):s(t).forEach(function(e){a(e,t[e])}),i;function a(n,e){r&&(e=e.toLowerCase()),e.split(" ").forEach(function(e){var t,r,a=e.split("|");i[a[0]]=[n,(t=a[0],(r=a[1])?Number(r):-1!=c.indexOf(t.toLowerCase())?0:1)]})}}function x(a){function l(e){return e&&e.source||e}function d(e,t){return new RegExp(l(e),"m"+(a.cI?"i":"")+(t?"g":""))}!function t(r,e){r.compiled||(r.compiled=!0,r.k=r.k||r.bK,r.k&&(r.k=_(r.k,a.cI)),r.lR=d(r.l||/\w+/,!0),e&&(r.bK&&(r.b="\\b("+r.bK.split(" ").join("|")+")\\b"),r.b||(r.b=/\B|\b/),r.bR=d(r.b),r.endSameAsBegin&&(r.e=r.b),r.e||r.eW||(r.e=/\B|\b/),r.e&&(r.eR=d(r.e)),r.tE=l(r.e)||"",r.eW&&e.tE&&(r.tE+=(r.e?"|":"")+e.tE)),r.i&&(r.iR=d(r.i)),null==r.relevance&&(r.relevance=1),r.c||(r.c=[]),r.c=Array.prototype.concat.apply([],r.c.map(function(e){return(t="self"===e?r:e).v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return i(t,{v:null},e)})),t.cached_variants?t.cached_variants:function e(t){return!!t&&(t.eW||e(t.starts))}(t)?[i(t,{starts:t.starts?i(t.starts):null})]:[t];var t})),r.c.forEach(function(e){t(e,r)}),r.starts&&t(r.starts,e),r.t=function(n){var e,i={},s=[],c={},r=1;function t(e,t){i[r]=e,s.push([e,t]),r+=new RegExp(t.toString()+"|").exec("").length-1+1}for(var a=0;a<n.c.length;a++)t(e=n.c[a],e.bK?"\\.?(?:"+e.b+")\\.?":e.b);n.tE&&t("end",n.tE),n.i&&t("illegal",n.i);var o=d(function(e){for(var t=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,r=0,a="",n=0;n<e.length;n++){var i=r+=1,s=l(e[n]);for(0<n&&(a+="|"),a+="(";0<s.length;){var c=t.exec(s);if(null==c){a+=s;break}a+=s.substring(0,c.index),s=s.substring(c.index+c[0].length),"\\"==c[0][0]&&c[1]?a+="\\"+String(Number(c[1])+i):(a+=c[0],"("==c[0]&&r++)}a+=")"}return a}(s.map(function(e){return e[1]})),!0);return c.lastIndex=0,c.exec=function(e){var t;if(0===s.length)return null;o.lastIndex=c.lastIndex;var r=o.exec(e);if(!r)return null;for(var a=0;a<r.length;a++)if(null!=r[a]&&null!=i[""+a]){t=i[""+a];break}return"string"==typeof t?(r.type=t,r.extra=[n.i,n.tE]):(r.type="begin",r.rule=t),r},c}(r))}(a)}function k(e,c,o,t){function l(e,t,r,a){if(!r&&""===t)return"";if(!e)return t;var n='<span class="'+(a?"":N.classPrefix);return(n+=e+'">')+t+(r?"":y)}function d(){m+=(null!=f.sL?function(){var e="string"==typeof f.sL;if(e&&!v[f.sL])return w(g);var t=e?k(f.sL,g,!0,a[f.sL]):E(g,f.sL.length?f.sL:void 0);return 0<f.relevance&&(_+=t.relevance),e&&(a[f.sL]=t.top),l(t.language,t.value,!1,!0)}:function(){var e,t,r,a,n,i,s;if(!f.k)return w(g);for(a="",t=0,f.lR.lastIndex=0,r=f.lR.exec(g);r;)a+=w(g.substring(t,r.index)),n=f,i=r,s=p.cI?i[0].toLowerCase():i[0],(e=n.k.hasOwnProperty(s)&&n.k[s])?(_+=e[1],a+=l(e[0],w(r[0]))):a+=w(r[0]),t=f.lR.lastIndex,r=f.lR.exec(g);return a+w(g.substr(t))})(),g=""}function u(e){m+=e.cN?l(e.cN,"",!0):"",f=Object.create(e,{parent:{value:f}})}var b={};function r(e,a){var t,r,n,i=a&&a[0];if(g+=e,null==i)return d(),0;if("begin"==b.type&&"end"==a.type&&b.index==a.index&&""===i)return g+=c.slice(a.index,a.index+1),1;if("begin"===(b=a).type)return r=(t=a)[0],(n=t.rule)&&n.endSameAsBegin&&(n.eR=new RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?g+=r:(n.eB&&(g+=r),d(),n.rB||n.eB||(g=r)),u(n),n.rB?0:r.length;if("illegal"===a.type&&!o)throw new Error('Illegal lexeme "'+i+'" for mode "'+(f.cN||"<unnamed>")+'"');if("end"===a.type){var s=function(){var e=a[0],t=function e(t,r){if(a=t.eR,(n=a&&a.exec(r))&&0===n.index){for(;t.endsParent&&t.parent;)t=t.parent;return t}var a,n;if(t.eW)return e(t.parent,r)}(f,e);if(t){var r=f;for(r.skip?g+=e:(r.rE||r.eE||(g+=e),d(),r.eE&&(g=e));f.cN&&(m+=y),f.skip||f.sL||(_+=f.relevance),(f=f.parent)!==t.parent;);return t.starts&&(t.endSameAsBegin&&(t.starts.eR=t.eR),u(t.starts)),r.rE?0:e.length}}();if(null!=s)return s}return g+=i,i.length}var p=M(e);if(!p)throw new Error('Unknown language: "'+e+'"');x(p);for(var f=t||p,a={},m="",n=f;n!==p;n=n.parent)n.cN&&(m=l(n.cN,"",!0)+m);var g="",_=0;try{for(var i,s,h=0;f.t.lastIndex=h,i=f.t.exec(c);)s=r(c.substring(h,i.index),i),h=i.index+s;for(r(c.substr(h)),n=f;n.parent;n=n.parent)n.cN&&(m+=y);return{relevance:_,value:m,i:!1,language:e,top:f}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{i:!0,relevance:0,value:w(c)};throw e}}function E(r,e){e=e||N.languages||s(v);var a={relevance:0,value:w(r)},n=a;return e.filter(M).filter(C).forEach(function(e){var t=k(e,r,!1);t.language=e,t.relevance>n.relevance&&(n=t),t.relevance>a.relevance&&(n=a,a=t)}),n.language&&(a.second_best=n),a}function h(e){return N.tabReplace||N.useBR?e.replace(r,function(e,t){return N.useBR&&"\n"===e?"<br>":N.tabReplace?t.replace(/\t/g,N.tabReplace):""}):e}function l(i){var e,t,r,a,n,s,c,o,l,d=function(){var e,t,r,a,n=i.className+" ";if(n+=i.parentNode?i.parentNode.className:"",t=p.exec(n))return M(t[1])?t[1]:"no-highlight";for(e=0,r=(n=n.split(/\s+/)).length;e<r;e++)if(m(a=n[e])||M(a))return a}();m(d)||(N.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=i.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):e=i,n=e.textContent,r=d?k(d,n,!0):E(n),(t=g(e)).length&&((a=document.createElementNS("http://www.w3.org/1999/xhtml","div")).innerHTML=r.value,r.value=function(e,t,r){var a=0,n="",i=[];function s(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function c(e){n+="<"+f(e)+u.map.call(e.attributes,function(e){return" "+e.nodeName+'="'+w(e.value).replace('"',"&quot;")+'"'}).join("")+">"}function o(e){n+="</"+f(e)+">"}function l(e){("start"===e.event?c:o)(e.node)}for(;e.length||t.length;){var d=s();if(n+=w(r.substring(a,d[0].offset)),a=d[0].offset,d===e){for(i.reverse().forEach(o);l(d.splice(0,1)[0]),(d=s())===e&&d.length&&d[0].offset===a;);i.reverse().forEach(c)}else"start"===d[0].event?i.push(d[0].node):i.pop(),l(d.splice(0,1)[0])}return n+w(r.substr(a))}(t,g(a),n)),r.value=h(r.value),i.innerHTML=r.value,i.className=(s=i.className,c=r.language,o=d?b[d]:c,l=[s.trim()],s.match(/\bhljs\b/)||l.push("hljs"),-1===s.indexOf(o)&&l.push(o),l.join(" ").trim()),i.result={language:r.language,re:r.relevance},r.second_best&&(i.second_best={language:r.second_best.language,re:r.second_best.relevance}))}function d(){var e;d.called||(d.called=!0,e=document.querySelectorAll("pre code"),u.forEach.call(e,l))}function M(e){return e=(e||"").toLowerCase(),v[e]||v[b[e]]}function C(e){var t=M(e);return t&&!t.disableAutodetect}return n.highlight=k,n.highlightAuto=E,n.fixMarkup=h,n.highlightBlock=l,n.configure=function(e){N=i(N,e)},n.initHighlighting=d,n.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",d,!1),addEventListener("load",d,!1)},n.registerLanguage=function(t,e){var r=v[t]=e(n);o(r),r.rawDefinition=e.bind(null,n),r.aliases&&r.aliases.forEach(function(e){b[e]=t})},n.listLanguages=function(){return s(v)},n.getLanguage=M,n.autoDetection=C,n.inherit=i,n.IR=n.IDENT_RE="[a-zA-Z]\\w*",n.UIR=n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NR=n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.CNR=n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BNR=n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RSR=n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BE=n.BACKSLASH_ESCAPE={b:"\\\\[\\s\\S]",relevance:0},n.ASM=n.APOS_STRING_MODE={cN:"string",b:"'",e:"'",i:"\\n",c:[n.BE]},n.QSM=n.QUOTE_STRING_MODE={cN:"string",b:'"',e:'"',i:"\\n",c:[n.BE]},n.PWM=n.PHRASAL_WORDS_MODE={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.C=n.COMMENT=function(e,t,r){var a=n.inherit({cN:"comment",b:e,e:t,c:[]},r||{});return a.c.push(n.PWM),a.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),a},n.CLCM=n.C_LINE_COMMENT_MODE=n.C("//","$"),n.CBCM=n.C_BLOCK_COMMENT_MODE=n.C("/\\*","\\*/"),n.HCM=n.HASH_COMMENT_MODE=n.C("#","$"),n.NM=n.NUMBER_MODE={cN:"number",b:n.NR,relevance:0},n.CNM=n.C_NUMBER_MODE={cN:"number",b:n.CNR,relevance:0},n.BNM=n.BINARY_NUMBER_MODE={cN:"number",b:n.BNR,relevance:0},n.CSSNM=n.CSS_NUMBER_MODE={cN:"number",b:n.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.RM=n.REGEXP_MODE={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[n.BE,{b:/\[/,e:/\]/,relevance:0,c:[n.BE]}]},n.TM=n.TITLE_MODE={cN:"title",b:n.IR,relevance:0},n.UTM=n.UNDERSCORE_TITLE_MODE={cN:"title",b:n.UIR,relevance:0},n.METHOD_GUARD={b:"\\.\\s*"+n.UIR,relevance:0},n}),hljs.registerLanguage("properties",function(e){var t="[ \\t\\f]*",r="("+t+"[:=]"+t+"|[ \\t\\f]+)",a="([^\\\\\\W:= \\t\\f\\n]|\\\\.)+",n="([^\\\\:= \\t\\f\\n]|\\\\.)+",i={e:r,relevance:0,starts:{cN:"string",e:/$/,relevance:0,c:[{b:"\\\\\\n"}]}};return{cI:!0,i:/\S/,c:[e.C("^\\s*[!#]","$"),{b:a+r,rB:!0,c:[{cN:"attr",b:a,endsParent:!0,relevance:0}],starts:i},{b:n+r,rB:!0,relevance:0,c:[{cN:"meta",b:n,endsParent:!0,relevance:0}],starts:i},{cN:"attr",relevance:0,b:n+t+"$"}]}}),hljs.registerLanguage("python",function(e){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},r={cN:"meta",b:/^(>>>|\.\.\.) /},a={cN:"subst",b:/\{/,e:/\}/,k:t,i:/#/},n={b:/\{\{/,relevance:0},i={cN:"string",c:[e.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[e.BE,r],relevance:10},{b:/(u|b)?r?"""/,e:/"""/,c:[e.BE,r],relevance:10},{b:/(fr|rf|f)'''/,e:/'''/,c:[e.BE,r,n,a]},{b:/(fr|rf|f)"""/,e:/"""/,c:[e.BE,r,n,a]},{b:/(u|r|ur)'/,e:/'/,relevance:10},{b:/(u|r|ur)"/,e:/"/,relevance:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},{b:/(fr|rf|f)'/,e:/'/,c:[e.BE,n,a]},{b:/(fr|rf|f)"/,e:/"/,c:[e.BE,n,a]},e.ASM,e.QSM]},s={cN:"number",relevance:0,v:[{b:e.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:e.CNR+"[lLjJ]?"}]},c={cN:"params",b:/\(/,e:/\)/,c:["self",r,s,i,e.HCM]};return a.c=[i,s,r],{aliases:["py","gyp","ipython"],k:t,i:/(<\/|->|\?)|=>/,c:[r,s,i,e.HCM,{v:[{cN:"function",bK:"def"},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[e.UTM,c,{b:/->/,eW:!0,k:"None"}]},{cN:"meta",b:/^[\t ]*@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("rust",function(e){var t="([ui](8|16|32|64|128|size)|f(32|64))?",r="drop i8 i16 i32 i64 i128 isize u8 u16 u32 u64 u128 usize f32 f64 str char bool Box Option Result String Vec Copy Send Sized Sync Drop Fn FnMut FnOnce ToOwned Clone Debug PartialEq PartialOrd Eq Ord AsRef AsMut Into From Default Iterator Extend IntoIterator DoubleEndedIterator ExactSizeIterator SliceConcatExt ToString assert! assert_eq! bitflags! bytes! cfg! col! concat! concat_idents! debug_assert! debug_assert_eq! env! panic! file! format! format_args! include_bin! include_str! line! local_data_key! module_path! option_env! print! println! select! stringify! try! unimplemented! unreachable! vec! write! writeln! macro_rules! assert_ne! debug_assert_ne!";return{aliases:["rs"],k:{keyword:"abstract as async await become box break const continue crate do dyn else enum extern false final fn for if impl in let loop macro match mod move mut override priv pub ref return self Self static struct super trait true try type typeof unsafe unsized use virtual where while yield",literal:"true false Some None Ok Err",built_in:r},l:e.IR+"!?",i:"</",c:[e.CLCM,e.C("/\\*","\\*/",{c:["self"]}),e.inherit(e.QSM,{b:/b?"/,i:null}),{cN:"string",v:[{b:/r(#*)"(.|\n)*?"\1(?!#)/},{b:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{cN:"symbol",b:/'[a-zA-Z_][a-zA-Z0-9_]*/},{cN:"number",v:[{b:"\\b0b([01_]+)"+t},{b:"\\b0o([0-7_]+)"+t},{b:"\\b0x([A-Fa-f0-9_]+)"+t},{b:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+t}],relevance:0},{cN:"function",bK:"fn",e:"(\\(|<)",eE:!0,c:[e.UTM]},{cN:"meta",b:"#\\!?\\[",e:"\\]",c:[{cN:"meta-string",b:/"/,e:/"/}]},{cN:"class",bK:"type",e:";",c:[e.inherit(e.UTM,{endsParent:!0})],i:"\\S"},{cN:"class",bK:"trait enum struct union",e:"{",c:[e.inherit(e.UTM,{endsParent:!0})],i:"[\\w\\d]"},{b:e.IR+"::",k:{built_in:r}},{b:"->"}]}}),hljs.registerLanguage("less",function(e){function t(e){return{cN:"string",b:"~?"+e+".*?"+e}}function r(e,t,r){return{cN:e,b:t,relevance:r}}var a="[\\w-]+",n="("+a+"|@{"+a+"})",i=[],s=[],c={b:"\\(",e:"\\)",c:s,relevance:0};s.push(e.CLCM,e.CBCM,t("'"),t('"'),e.CSSNM,{b:"(url|data-uri)\\(",starts:{cN:"string",e:"[\\)\\n]",eE:!0}},r("number","#[0-9A-Fa-f]+\\b"),c,r("variable","@@?"+a,10),r("variable","@{"+a+"}"),r("built_in","~?`[^`]*?`"),{cN:"attribute",b:a+"\\s*:",e:":",rB:!0,eE:!0},{cN:"meta",b:"!important"});var o=s.concat({b:"{",e:"}",c:i}),l={bK:"when",eW:!0,c:[{bK:"and not"}].concat(s)},d={b:n+"\\s*:",rB:!0,e:"[;}]",relevance:0,c:[{cN:"attribute",b:n,e:":",eE:!0,starts:{eW:!0,i:"[<=$]",relevance:0,c:s}}]},u={cN:"keyword",b:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{e:"[;{}]",rE:!0,c:s,relevance:0}},b={cN:"variable",v:[{b:"@"+a+"\\s*:",relevance:15},{b:"@"+a}],starts:{e:"[;}]",rE:!0,c:o}},p={v:[{b:"[\\.#:&\\[>]",e:"[;{}]"},{b:n,e:"{"}],rB:!0,rE:!0,i:"[<='$\"]",relevance:0,c:[e.CLCM,e.CBCM,l,r("keyword","all\\b"),r("variable","@{"+a+"}"),r("selector-tag",n+"%?",0),r("selector-id","#"+n),r("selector-class","\\."+n,0),r("selector-tag","&",0),{cN:"selector-attr",b:"\\[",e:"\\]"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"\\(",e:"\\)",c:o},{b:"!important"}]};return i.push(e.CLCM,e.CBCM,u,b,d,p),{cI:!0,i:"[=>'/<($\"]",c:i}}),hljs.registerLanguage("perl",function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",r={cN:"subst",b:"[$@]\\{",e:"\\}",k:t},a={b:"->{",e:"}"},n={v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,relevance:0}]},i=[e.BE,r,n],s=[n,e.HCM,e.C("^\\=\\w","\\=cut",{eW:!0}),a,{cN:"string",c:i,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",relevance:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",relevance:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",relevance:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",relevance:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",relevance:5},{b:"qw\\s+q",e:"q",relevance:5},{b:"'",e:"'",c:[e.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[e.BE]},{b:"{\\w+}",c:[],relevance:0},{b:"-?\\w+\\s*\\=\\>",c:[],relevance:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{b:"(\\/\\/|"+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",relevance:0,c:[e.HCM,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],relevance:0}]},{cN:"function",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",eE:!0,relevance:5,c:[e.TM]},{b:"-\\w\\b",relevance:0},{b:"^__DATA__$",e:"^__END__$",sL:"mojolicious",c:[{b:"^@@.*",e:"$",cN:"comment"}]}];return r.c=s,{aliases:["pl","pm"],l:/[\w\.]+/,k:t,c:a.c=s}}),hljs.registerLanguage("diff",function(e){return{aliases:["patch"],c:[{cN:"meta",relevance:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"comment",v:[{b:/Index: /,e:/$/},{b:/={3,}/,e:/$/},{b:/^\-{3}/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+{3}/,e:/$/},{b:/^\*{15}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"addition",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("scss",function(e){var t={cN:"variable",b:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},r={cN:"number",b:"#[0-9A-Fa-f]+"};return e.CSSNM,e.QSM,e.ASM,e.CBCM,{cI:!0,i:"[=/|']",c:[e.CLCM,e.CBCM,{cN:"selector-id",b:"\\#[A-Za-z0-9_-]+",relevance:0},{cN:"selector-class",b:"\\.[A-Za-z0-9_-]+",relevance:0},{cN:"selector-attr",b:"\\[",e:"\\]",i:"$"},{cN:"selector-tag",b:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{b:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{b:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{cN:"attribute",b:"\\b(z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",i:"[^\\s]"},{b:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{b:":",e:";",c:[t,r,e.CSSNM,e.QSM,e.ASM,{cN:"meta",b:"!important"}]},{b:"@",e:"[{;]",k:"mixin include extend for if else each while charset import debug media page content font-face namespace warn",c:[t,e.QSM,e.ASM,r,e.CSSNM,{b:"\\s[A-Za-z0-9_.-]+",relevance:0}]}]}}),hljs.registerLanguage("bash",function(e){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[e.BE]}]};return{aliases:["sh","zsh"],l:/\b-?[a-z\._]+\b/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,relevance:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[e.inherit(e.TM,{b:/\w[\w\d_]*/})],relevance:0},e.HCM,r,{cN:"",b:/\\"/},{cN:"string",b:/'/,e:/'/},t]}}),hljs.registerLanguage("shell",function(e){return{aliases:["console"],c:[{cN:"meta",b:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{e:"$",sL:"bash"}}]}}),hljs.registerLanguage("makefile",function(e){var t={cN:"variable",v:[{b:"\\$\\("+e.UIR+"\\)",c:[e.BE]},{b:/\$[@%<?\^\+\*]/}]},r={cN:"string",b:/"/,e:/"/,c:[e.BE,t]},a={cN:"variable",b:/\$\([\w-]+\s/,e:/\)/,k:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},c:[t]},n={b:"^"+e.UIR+"\\s*[:+?]?=",i:"\\n",rB:!0,c:[{b:"^"+e.UIR,e:"[:+?]?=",eE:!0}]},i={cN:"section",b:/^[^\s]+:/,e:/$/,c:[t]};return{aliases:["mk","mak"],k:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath",l:/[\w-]+/,c:[e.HCM,t,r,a,n,{cN:"meta",b:/^\.PHONY:/,e:/$/,k:{"meta-keyword":".PHONY"},l:/[\.\w]+/},i]}}),hljs.registerLanguage("json",function(e){var t={literal:"true false null"},r=[e.CLCM,e.CBCM],a=[e.QSM,e.CNM],n={e:",",eW:!0,eE:!0,c:a,k:t},i={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[e.BE],i:"\\n"},e.inherit(n,{b:/:/})].concat(r),i:"\\S"},s={b:"\\[",e:"\\]",c:[e.inherit(n)],i:"\\S"};return a.push(i,s),r.forEach(function(e){a.push(e)}),{c:a,k:t,i:"\\S"}}),hljs.registerLanguage("ini",function(e){var t={cN:"string",c:[e.BE],v:[{b:"'''",e:"'''",relevance:10},{b:'"""',e:'"""',relevance:10},{b:'"',e:'"'},{b:"'",e:"'"}]};return{aliases:["toml"],cI:!0,i:/\S/,c:[e.C(";","$"),e.HCM,{cN:"section",b:/^\s*\[+/,e:/\]+/},{b:/^[a-z0-9\[\]_\.-]+\s*=\s*/,e:"$",rB:!0,c:[{cN:"attr",b:/[a-z0-9\[\]_\.-]+/},{b:/=/,eW:!0,relevance:0,c:[e.C(";","$"),e.HCM,{cN:"literal",b:/\bon|off|true|false|yes|no\b/},{cN:"variable",v:[{b:/\$[\w\d"][\w\d_]*/},{b:/\$\{(.*?)}/}]},t,{cN:"number",b:/([\+\-]+)?[\d]+_[\d_]+/},e.NM]}]}]}}),hljs.registerLanguage("http",function(e){var t="HTTP/[0-9\\.]+";return{aliases:["https"],i:"\\S",c:[{b:"^"+t,e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{b:"^[A-Z]+ (.*?) "+t+"$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0},{b:t},{cN:"keyword",b:"[A-Z]+"}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{e:"$",relevance:0}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}}),hljs.registerLanguage("coffeescript",function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super yield import export from as default await then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},r="[A-Za-z$_][0-9A-Za-z$_]*",a={cN:"subst",b:/#\{/,e:/}/,k:t},n=[e.BNM,e.inherit(e.CNM,{starts:{e:"(\\s*/)?",relevance:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[e.BE]},{b:/'/,e:/'/,c:[e.BE]},{b:/"""/,e:/"""/,c:[e.BE,a]},{b:/"/,e:/"/,c:[e.BE,a]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[a,e.HCM]},{b:"//[gim]*",relevance:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W)/}]},{b:"@"+r},{sL:"javascript",eB:!0,eE:!0,v:[{b:"```",e:"```"},{b:"`",e:"`"}]}];a.c=n;var i=e.inherit(e.TM,{b:r}),s="(\\(.*\\))?\\s*\\B[-=]>",c={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:t,c:["self"].concat(n)}]};return{aliases:["coffee","cson","iced"],k:t,i:/\/\*/,c:n.concat([e.C("###","###"),e.HCM,{cN:"function",b:"^\\s*"+r+"\\s*=\\s*"+s,e:"[-=]>",rB:!0,c:[i,c]},{b:/[:\(,=]\s*/,relevance:0,c:[{cN:"function",b:s,e:"[-=]>",rB:!0,c:[c]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[i]},i]},{b:r+":",e:":",rB:!0,rE:!0,relevance:0}])}}),hljs.registerLanguage("css",function(e){var t={b:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,relevance:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("objectivec",function(e){var t=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],k:{keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},l:t,i:"</",c:[{cN:"built_in",b:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.CLCM,e.CBCM,e.CNM,e.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[e.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"meta",b:"#",e:"$",c:[{cN:"meta-string",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:t,c:[e.UTM]},{b:"\\."+e.UIR,relevance:0}]}}),hljs.registerLanguage("ruby",function(e){var t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",literal:"true false nil"},a={cN:"doctag",b:"@[A-Za-z]+"},n={b:"#<",e:">"},i=[e.C("#","$",{c:[a]}),e.C("^\\=begin","^\\=end",{c:[a],relevance:10}),e.C("^__END__","\\n$")],s={cN:"subst",b:"#\\{",e:"}",k:r},c={cN:"string",c:[e.BE,s],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/},{b:/<<[-~]?'?(\w+)(?:.|\n)*?\n\s*\1\b/,rB:!0,c:[{b:/<<[-~]?'?/},{b:/\w+/,endSameAsBegin:!0,c:[e.BE,s]}]}]},o={cN:"params",b:"\\(",e:"\\)",endsParent:!0,k:r},l=[c,n,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[e.inherit(e.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{b:"<\\s*",c:[{b:"("+e.IR+"::)?"+e.IR}]}].concat(i)},{cN:"function",bK:"def",e:"$|;",c:[e.inherit(e.TM,{b:t}),o].concat(i)},{b:e.IR+"::"},{cN:"symbol",b:e.UIR+"(\\!|\\?)?:",relevance:0},{cN:"symbol",b:":(?!\\s)",c:[c,{b:t}],relevance:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{cN:"params",b:/\|/,e:/\|/,k:r},{b:"("+e.RSR+"|unless)\\s*",k:"unless",c:[n,{cN:"regexp",c:[e.BE,s],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(i),relevance:0}].concat(i);s.c=l;var d=[{b:/^\s*=>/,starts:{e:"$",c:o.c=l}},{cN:"meta",b:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+>|(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>)",starts:{e:"$",c:l}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:r,i:/\/\*/,c:i.concat(d).concat(l)}}),hljs.registerLanguage("yaml",function(e){var t="true false yes no null",r={cN:"string",relevance:0,v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/\S+/}],c:[e.BE,{cN:"template-variable",v:[{b:"{{",e:"}}"},{b:"%{",e:"}"}]}]};return{cI:!0,aliases:["yml","YAML","yaml"],c:[{cN:"attr",v:[{b:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{b:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{b:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{cN:"meta",b:"^---s*$",relevance:10},{cN:"string",b:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{b:"<%[%=-]?",e:"[%-]?%>",sL:"ruby",eB:!0,eE:!0,relevance:0},{cN:"type",b:"!"+e.UIR},{cN:"type",b:"!!"+e.UIR},{cN:"meta",b:"&"+e.UIR+"$"},{cN:"meta",b:"\\*"+e.UIR+"$"},{cN:"bullet",b:"\\-(?=[ ]|$)",relevance:0},e.HCM,{bK:t,k:{literal:t}},{cN:"number",b:e.CNR+"\\b"},r]}}),hljs.registerLanguage("java",function(e){var t="false synchronized int abstract float private char boolean var static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do";return{aliases:["jsp"],k:t,i:/<\/|#/,c:[e.C("/\\*\\*","\\*/",{relevance:0,c:[{b:/\w+@/,relevance:0},{cN:"doctag",b:"@[A-Za-z]+"}]}),e.CLCM,e.CBCM,e.ASM,e.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},e.UTM]},{bK:"new throw return else",relevance:0},{cN:"function",b:"([À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(<[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*(\\s*,\\s*[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*)*>)?\\s+)+"+e.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:e.UIR+"\\s*\\(",rB:!0,relevance:0,c:[e.UTM]},{cN:"params",b:/\(/,e:/\)/,k:t,relevance:0,c:[e.ASM,e.QSM,e.CNM,e.CBCM]},e.CLCM,e.CBCM]},{cN:"number",b:"\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",relevance:0},{cN:"meta",b:"@[A-Za-z]+"}]}});hljs.registerLanguage("sql",function(e){var t=e.C("--","$");return{cI:!0,i:/[<>{}*]/,c:[{bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke comment values with",e:/;/,eW:!0,l:/[\w\.]+/,k:{keyword:"as abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias all allocate allow alter always analyze ancillary and anti any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound bucket buffer_cache buffer_pool build bulk by byte byteordermark bytes cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain explode export export_set extended extent external external_1 external_2 externally extract failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force foreign form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour hours http id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists keep keep_duplicates key keys kill language large last last_day last_insert_id last_value lateral lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minutes minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notnull notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second seconds section securefile security seed segment select self semi sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime table tables tablespace tablesample tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unnest unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace window with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null unknown",built_in:"array bigint binary bit blob bool boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text time timestamp tinyint varchar varchar2 varying void"},c:[{cN:"string",b:"'",e:"'",c:[e.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[e.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[e.BE]},e.CNM,e.CBCM,t,e.HCM]},e.CBCM,t,e.HCM]}}),hljs.registerLanguage("apache",function(e){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[e.HCM,{cN:"section",b:"</?",e:">"},{cN:"attribute",b:/\w+/,relevance:0,k:{nomarkup:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,relevance:0,k:{literal:"on off all"},c:[{cN:"meta",b:"\\s\\[",e:"\\]$"},{cN:"variable",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,e.QSM]}}],i:/\S/}}),hljs.registerLanguage("kotlin",function(e){var t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual trait volatile transient native default",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={cN:"symbol",b:e.UIR+"@"},a={cN:"subst",b:"\\${",e:"}",c:[e.CNM]},n={cN:"variable",b:"\\$"+e.UIR},i={cN:"string",v:[{b:'"""',e:'"""',c:[n,a]},{b:"'",e:"'",i:/\n/,c:[e.BE]},{b:'"',e:'"',i:/\n/,c:[e.BE,n,a]}]};a.c.push(i);var s={cN:"meta",b:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UIR+")?"},c={cN:"meta",b:"@"+e.UIR,c:[{b:/\(/,e:/\)/,c:[e.inherit(i,{cN:"meta-string"})]}]},o=e.C("/\\*","\\*/",{c:[e.CBCM]}),l={v:[{cN:"type",b:e.UIR},{b:/\(/,e:/\)/,c:[]}]},d=l;return d.v[1].c=[l],l.v[1].c=[d],{aliases:["kt"],k:t,c:[e.C("/\\*\\*","\\*/",{relevance:0,c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),e.CLCM,o,{cN:"keyword",b:/\b(break|continue|return|this)\b/,starts:{c:[{cN:"symbol",b:/@\w+/}]}},r,s,c,{cN:"function",bK:"fun",e:"[(]|$",rB:!0,eE:!0,k:t,i:/fun\s+(<.*>)?[^\s\(]+(\s+[^\s\(]+)\s*=/,relevance:5,c:[{b:e.UIR+"\\s*\\(",rB:!0,relevance:0,c:[e.UTM]},{cN:"type",b:/</,e:/>/,k:"reified",relevance:0},{cN:"params",b:/\(/,e:/\)/,endsParent:!0,k:t,relevance:0,c:[{b:/:/,e:/[=,\/]/,eW:!0,c:[l,e.CLCM,o],relevance:0},e.CLCM,o,s,c,i,e.CNM]},o]},{cN:"class",bK:"class interface trait",e:/[:\{(]|$/,eE:!0,i:"extends implements",c:[{bK:"public protected internal private constructor"},e.UTM,{cN:"type",b:/</,e:/>/,eB:!0,eE:!0,relevance:0},{cN:"type",b:/[,:]\s*/,e:/[<\(,]|$/,eB:!0,rE:!0},s,c]},i,{cN:"meta",b:"^#!/usr/bin/env",e:"$",i:"\n"},{cN:"number",b:"\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",relevance:0}]}}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,relevance:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",relevance:0},{b:/=\s*/,relevance:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",relevance:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{relevance:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",relevance:10},{cN:"meta",b:/<\?xml/,e:/\?>/,relevance:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0},{b:'b"',e:'"',skip:!0},{b:"b'",e:"'",skip:!0},e.inherit(e.ASM,{i:null,cN:null,c:null,skip:!0}),e.inherit(e.QSM,{i:null,cN:null,c:null,skip:!0})]},{cN:"tag",b:"<style(?=\\s|>)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,relevance:0},t]}]}}),hljs.registerLanguage("markdown",function(e){return{aliases:["md","mkdown","mkd"],c:[{cN:"section",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",relevance:0},{cN:"bullet",b:"^\\s*([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",relevance:0}]},{cN:"quote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"^```\\w*\\s*$",e:"^```[ ]*$"},{b:"`.+?`"},{b:"^( {4}|\\t)",e:"$",relevance:0}]},{b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"string",b:"\\[",e:"\\]",eB:!0,rE:!0,relevance:0},{cN:"link",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"symbol",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],relevance:10},{b:/^\[[^\n]+\]:/,rB:!0,c:[{cN:"symbol",b:/\[/,e:/\]/,eB:!0,eE:!0},{cN:"link",b:/:\s*/,e:/$/,eB:!0}]}]}}),hljs.registerLanguage("swift",function(e){var t={keyword:"#available #colorLiteral #column #else #elseif #endif #file #fileLiteral #function #if #imageLiteral #line #selector #sourceLocation _ __COLUMN__ __FILE__ __FUNCTION__ __LINE__ Any as as! as? associatedtype associativity break case catch class continue convenience default defer deinit didSet do dynamic dynamicType else enum extension fallthrough false fileprivate final for func get guard if import in indirect infix init inout internal is lazy left let mutating nil none nonmutating open operator optional override postfix precedence prefix private protocol Protocol public repeat required rethrows return right self Self set static struct subscript super switch throw throws true try try! try? Type typealias unowned var weak where while willSet",literal:"true false nil",built_in:"abs advance alignof alignofValue anyGenerator assert assertionFailure bridgeFromObjectiveC bridgeFromObjectiveCUnconditional bridgeToObjectiveC bridgeToObjectiveCUnconditional c contains count countElements countLeadingZeros debugPrint debugPrintln distance dropFirst dropLast dump encodeBitsAsWords enumerate equal fatalError filter find getBridgedObjectiveCType getVaList indices insertionSort isBridgedToObjectiveC isBridgedVerbatimToObjectiveC isUniquelyReferenced isUniquelyReferencedNonObjC join lazy lexicographicalCompare map max maxElement min minElement numericCast overlaps partition posix precondition preconditionFailure print println quickSort readLine reduce reflect reinterpretCast reverse roundUpToAlignment sizeof sizeofValue sort split startsWith stride strideof strideofValue swap toString transcode underestimateCount unsafeAddressOf unsafeBitCast unsafeDowncast unsafeUnwrap unsafeReflect withExtendedLifetime withObjectAtPlusZero withUnsafePointer withUnsafePointerToObject withUnsafeMutablePointer withUnsafeMutablePointers withUnsafePointer withUnsafePointers withVaList zip"},r=e.C("/\\*","\\*/",{c:["self"]}),a={cN:"subst",b:/\\\(/,e:"\\)",k:t,c:[]},n={cN:"string",c:[e.BE,a],v:[{b:/"""/,e:/"""/},{b:/"/,e:/"/}]},i={cN:"number",b:"\\b([\\d_]+(\\.[\\deE_]+)?|0x[a-fA-F0-9_]+(\\.[a-fA-F0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b",relevance:0};return a.c=[i],{k:t,c:[n,e.CLCM,r,{cN:"type",b:"\\b[A-Z][\\wÀ-ʸ']*[!?]"},{cN:"type",b:"\\b[A-Z][\\wÀ-ʸ']*",relevance:0},i,{cN:"function",bK:"func",e:"{",eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{b:/</,e:/>/},{cN:"params",b:/\(/,e:/\)/,endsParent:!0,k:t,c:["self",i,n,e.CBCM,{b:":"}],i:/["']/}],i:/\[|%/},{cN:"class",bK:"struct protocol class extension enum",k:t,e:"\\{",eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/})]},{cN:"meta",b:"(@discardableResult|@warn_unused_result|@exported|@lazy|@noescape|@NSCopying|@NSManaged|@objc|@objcMembers|@convention|@required|@noreturn|@IBAction|@IBDesignable|@IBInspectable|@IBOutlet|@infix|@prefix|@postfix|@autoclosure|@testable|@available|@nonobjc|@NSApplicationMain|@UIApplicationMain|@dynamicMemberLookup|@propertyWrapper)"},{bK:"import",e:/$/,c:[e.CLCM,r]}]}}),hljs.registerLanguage("plaintext",function(e){return{disableAutodetect:!0}}),hljs.registerLanguage("typescript",function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",r={keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class public private protected get set super static implements enum export import declare type namespace abstract as from extends async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document any number boolean string void Promise"},a={cN:"meta",b:"@"+t},n={b:"\\(",e:/\)/,k:r,c:["self",e.QSM,e.ASM,e.NM]},i={cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:[e.CLCM,e.CBCM,a,n]},s={cN:"number",v:[{b:"\\b(0[bB][01]+)n?"},{b:"\\b(0[oO][0-7]+)n?"},{b:e.CNR+"n?"}],relevance:0},c={cN:"subst",b:"\\$\\{",e:"\\}",k:r,c:[]},o={b:"html`",e:"",starts:{e:"`",rE:!1,c:[e.BE,c],sL:"xml"}},l={b:"css`",e:"",starts:{e:"`",rE:!1,c:[e.BE,c],sL:"css"}},d={cN:"string",b:"`",e:"`",c:[e.BE,c]};return c.c=[e.ASM,e.QSM,o,l,d,s,e.RM],{aliases:["ts"],k:r,c:[{cN:"meta",b:/^\s*['"]use strict['"]/},e.ASM,e.QSM,o,l,d,e.CLCM,e.CBCM,s,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+e.IR+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:e.IR},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:["self",e.CLCM,e.CBCM]}]}]}],relevance:0},{cN:"function",bK:"function",e:/[\{;]/,eE:!0,k:r,c:["self",e.inherit(e.TM,{b:t}),i],i:/%/,relevance:0},{bK:"constructor",e:/[\{;]/,eE:!0,c:["self",i]},{b:/module\./,k:{built_in:"module"},relevance:0},{bK:"module",e:/\{/,eE:!0},{bK:"interface",e:/\{/,eE:!0,k:"interface extends"},{b:/\$[(.]/},{b:"\\."+e.IR,relevance:0},a,n]}}),hljs.registerLanguage("nginx",function(e){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+e.UIR}]},r={eW:!0,l:"[a-z/_]+",k:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,i:"=>",c:[e.HCM,{cN:"string",c:[e.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[e.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],c:[e.HCM,{b:e.UIR+"\\s+{",rB:!0,e:"{",c:[{cN:"section",b:e.UIR}],relevance:0},{b:e.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"attribute",b:e.UIR,starts:r}],relevance:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("go",function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],k:t,i:"</",c:[e.CLCM,e.CBCM,{cN:"string",v:[e.QSM,{b:"'",e:"[^\\\\]'"},{b:"`",e:"`"}]},{cN:"number",v:[{b:e.CNR+"[i]",relevance:1},e.CNM]},{b:/:=/},{cN:"function",bK:"func",e:"\\s*(\\{|$)",eE:!0,c:[e.TM,{cN:"params",b:/\(/,e:/\)/,k:t,i:/["']/}]}]}}),hljs.registerLanguage("javascript",function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",r={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={cN:"number",v:[{b:"\\b(0[bB][01]+)n?"},{b:"\\b(0[oO][0-7]+)n?"},{b:e.CNR+"n?"}],relevance:0},n={cN:"subst",b:"\\$\\{",e:"\\}",k:r,c:[]},i={b:"html`",e:"",starts:{e:"`",rE:!1,c:[e.BE,n],sL:"xml"}},s={b:"css`",e:"",starts:{e:"`",rE:!1,c:[e.BE,n],sL:"css"}},c={cN:"string",b:"`",e:"`",c:[e.BE,n]};n.c=[e.ASM,e.QSM,i,s,c,a,e.RM];var o=n.c.concat([e.CBCM,e.CLCM]);return{aliases:["js","jsx"],k:r,c:[{cN:"meta",relevance:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,i,s,c,e.CLCM,e.CBCM,a,{b:/[{,\n]\s*/,relevance:0,c:[{b:t+"\\s*:",rB:!0,relevance:0,c:[{cN:"attr",b:t,relevance:0}]}]},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{cN:"function",b:"(\\(.*?\\)|"+t+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:t},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:r,c:o}]}]},{cN:"",b:/\s/,e:/\s*/,skip:!0},{b:/</,e:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,sL:"xml",c:[{b:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},{b:/<[A-Za-z0-9\\._:-]+/,e:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,skip:!0,c:[{b:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},"self"]}]}],relevance:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:t}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:o}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor get set",e:/\{/,eE:!0}],i:/#(?!!)/}}),hljs.registerLanguage("php",function(e){var t={b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},r={cN:"meta",b:/<\?(php)?|\?>/},a={cN:"string",c:[e.BE,r],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},e.inherit(e.ASM,{i:null}),e.inherit(e.QSM,{i:null})]},n={v:[e.BNM,e.CNM]};return{aliases:["php","php3","php4","php5","php6","php7"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[e.HCM,e.C("//","$",{c:[r]}),e.C("/\\*","\\*/",{c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),e.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:e.UIR}),{cN:"string",b:/<<<['"]?\w+['"]?$/,e:/^\w+;?$/,c:[e.BE,{cN:"subst",v:[{b:/\$\w+/},{b:/\{\$/,e:/\}/}]}]},r,{cN:"keyword",b:/\$this\b/},t,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[e.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",t,e.CBCM,a,n]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},e.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[e.UTM]},{bK:"use",e:";",c:[e.UTM]},{b:"=>"},a,n]}}),hljs.registerLanguage("cs",function(e){var t={keyword:"abstract as base bool break byte case catch char checked const continue decimal default delegate do double enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this try typeof uint ulong unchecked unsafe ushort using virtual void volatile while add alias ascending async await by descending dynamic equals from get global group into join let nameof on orderby partial remove select set value var when where yield",literal:"null false true"},r={cN:"number",v:[{b:"\\b(0b[01']+)"},{b:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{b:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},a={cN:"string",b:'@"',e:'"',c:[{b:'""'}]},n=e.inherit(a,{i:/\n/}),i={cN:"subst",b:"{",e:"}",k:t},s=e.inherit(i,{i:/\n/}),c={cN:"string",b:/\$"/,e:'"',i:/\n/,c:[{b:"{{"},{b:"}}"},e.BE,s]},o={cN:"string",b:/\$@"/,e:'"',c:[{b:"{{"},{b:"}}"},{b:'""'},i]},l=e.inherit(o,{i:/\n/,c:[{b:"{{"},{b:"}}"},{b:'""'},s]});i.c=[o,c,a,e.ASM,e.QSM,r,e.CBCM],s.c=[l,c,n,e.ASM,e.QSM,r,e.inherit(e.CBCM,{i:/\n/})];var d={v:[o,c,a,e.ASM,e.QSM]},u=e.IR+"(<"+e.IR+"(\\s*,\\s*"+e.IR+")*>)?(\\[\\])?";return{aliases:["csharp","c#"],k:t,i:/::/,c:[e.C("///","$",{rB:!0,c:[{cN:"doctag",v:[{b:"///",relevance:0},{b:"\x3c!--|--\x3e"},{b:"</?",e:">"}]}]}),e.CLCM,e.CBCM,{cN:"meta",b:"#",e:"$",k:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},d,r,{bK:"class interface",e:/[{;=]/,i:/[^\s:,]/,c:[e.TM,e.CLCM,e.CBCM]},{bK:"namespace",e:/[{;=]/,i:/[^\s:]/,c:[e.inherit(e.TM,{b:"[a-zA-Z](\\.?\\w)*"}),e.CLCM,e.CBCM]},{cN:"meta",b:"^\\s*\\[",eB:!0,e:"\\]",eE:!0,c:[{cN:"meta-string",b:/"/,e:/"/}]},{bK:"new return throw await else",relevance:0},{cN:"function",b:"("+u+"\\s+)+"+e.IR+"\\s*\\(",rB:!0,e:/\s*[{;=]/,eE:!0,k:t,c:[{b:e.IR+"\\s*\\(",rB:!0,c:[e.TM],relevance:0},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:t,relevance:0,c:[d,r,e.CBCM]},e.CLCM,e.CBCM]}]}}),hljs.registerLanguage("lua",function(e){var t="\\[=*\\[",r="\\]=*\\]",a={b:t,e:r,c:["self"]},n=[e.C("--(?!"+t+")","$"),e.C("--"+t,r,{c:[a],relevance:10})];return{l:e.UIR,k:{literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstringmodule next pairs pcall print rawequal rawget rawset require select setfenvsetmetatable tonumber tostring type unpack xpcall arg selfcoroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},c:n.concat([{cN:"function",bK:"function",e:"\\)",c:[e.inherit(e.TM,{b:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{cN:"params",b:"\\(",eW:!0,c:n}].concat(n)},e.CNM,e.ASM,e.QSM,{cN:"string",b:t,e:r,c:[a],relevance:5}])}}),hljs.registerLanguage("cpp",function(e){var t={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},r={cN:"string",v:[{b:'(u8?|U|L)?"',e:'"',i:"\\n",c:[e.BE]},{b:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",e:"'",i:"."},{b:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\((?:.|\n)*?\)\1"/}]},a={cN:"number",v:[{b:"\\b(0b[01']+)"},{b:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{b:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},n={cN:"meta",b:/#\s*[a-z]+\b/,e:/$/,k:{"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"},c:[{b:/\\\n/,relevance:0},e.inherit(r,{cN:"meta-string"}),{cN:"meta-string",b:/<[^\n>]*>/,e:/$/,i:"\\n"},e.CLCM,e.CBCM]},i=e.IR+"\\s*\\(",s={keyword:"int float while private char catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr consteval constinit decltype concept co_await co_return co_yield requires noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return and or not",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr",literal:"true false nullptr NULL"},c=[t,e.CLCM,e.CBCM,a,r];return{aliases:["c","cc","h","c++","h++","hpp","hh","hxx","cxx"],k:s,i:"</",c:c.concat([n,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:s,c:["self",t]},{b:e.IR+"::",k:s},{v:[{b:/=/,e:/;/},{b:/\(/,e:/\)/},{bK:"new throw return else",e:/;/}],k:s,c:c.concat([{b:/\(/,e:/\)/,k:s,c:c.concat(["self"]),relevance:0}]),relevance:0},{cN:"function",b:"("+e.IR+"[\\*&\\s]+)+"+i,rB:!0,e:/[{;=]/,eE:!0,k:s,i:/[^\w\s\*&]/,c:[{b:i,rB:!0,c:[e.TM],relevance:0},{cN:"params",b:/\(/,e:/\)/,k:s,relevance:0,c:[e.CLCM,e.CBCM,r,a,t,{b:/\(/,e:/\)/,k:s,relevance:0,c:["self",e.CLCM,e.CBCM,r,a,t]}]},e.CLCM,e.CBCM,n]},{cN:"class",bK:"class struct",e:/[{;:]/,c:[{b:/</,e:/>/,c:["self"]},e.TM]}]),exports:{preprocessor:n,strings:r,k:s}}});
var selectRange=function(e){this.__element=e};selectRange.of=function(e){return e?new selectRange(e):{}},selectRange.prototype={constructor:selectRange,getCurPos:function(){var e,t=this.__element,n=0;return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),n=e.text.length):!t.selectionStart&&"0"!=t.selectionStart||(n=t.selectionStart),n},setCurPos:function(e){var t,n=this.__element;n.setSelectionRange?(n.focus(),n.setSelectionRange(e,e)):n.createTextRange&&((t=n.createTextRange()).collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select())},getSelectText:function(){var e,t="";return window.getSelection?e=window.getSelection():document.selection&&(e=document.selection.createRange()),(t=e.text)||(t=e),t},setSelectText:function(e,t){var n,c=this.__element,e=parseInt(e),t=parseInt(t),a=c.value.length;a&&(a<(e=e||0)&&(e=a),a<(t=t||a)&&(t=a),e<0&&(e=a+e),t<0&&(t=a+t),c.createTextRange?((n=c.createTextRange()).moveStart("character",-a),n.moveEnd("character",-a),n.moveStart("character",e),n.moveEnd("character",t),n.select()):(c.setSelectionRange(e,t),c.focus()))},insertAfterText:function(e){var t,n,c,a=this.__element;document.selection?(a.focus(),document.selection.createRange().text=e,a.focus()):a.selectionStart||"0"==a.selectionStart?(t=a.selectionStart,n=a.selectionEnd,c=a.scrollTop,a.value=a.value.substring(0,t)+e+a.value.substring(n,a.value.length),a.focus(),a.selectionStart=t+e.length,a.selectionEnd=t+e.length,a.scrollTop=c):(a.value+=e,a.focus())}};
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.ObjHelper={copy:function(n,r){if(!(n instanceof Object))throw new Error("copy object error!");var e={},c=this;return Object.keys(n).forEach(function(t){var o;r instanceof Array&&-1<r.indexOf(t)||(null===(o=n[t])||"object"!==_typeof(o)?e[t]=o:e[t]=c.copy(o))}),e},set:function(n,r,e){var c;n instanceof Object&&r instanceof Object&&(c=this,Object.keys(n).forEach(function(t){var o=r[t];if(void 0!==o&&n.hasOwnProperty(t)){if("function"==typeof e)return void(n[t]=e(t,o));if("object"===_typeof(n[t]))return void c.set(n[t],r[t],e);n[t]=n[t].constructor.call(null,o)}}))},toJson:function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(t){return!1}return t}};
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(d){function m(t){var o=this;if("object"===_typeof(t))return o.option=d.extend({},b,t),o._collectPopupBtn=d(o.option.btnSelector+'[data-flag="'+o.option.uniqueFlag+'"]'),o._collectLabel=o._collectPopupBtn.find(o.option.btnLabelSelector),o._collectPopup=d(o.option.popupSelector+'[data-flag="'+o.option.uniqueFlag+'"]'),void(o._collectForm=o._collectPopup.find(o.option.formSelector))}var b={btnSelector:".collect-btn",btnLabelSelector:"[data-label]",popupSelector:".collect.popup",formSelector:".collect.form",uniqueFlag:"",objectId:"",objectKey:"",objectFromOSC:!0,objectTypeId:"",userId:"",recommendTags:[],maxNum:99,requiredTags:!1,activeClass:"active",nonActivatedIconClass:"outline",initFormatLabel:!0};m.prototype.init=function(){var t=this;t.option.initFormatLabel&&0<t._collectLabel.length&&m.labelFormat(t._collectLabel,t.option.maxNum),t.insertRecommendTags(),t.btnPopup(),t.blurTagEvent(),t.formInit(),t.bindTagsEvent()},m.prototype.insertRecommendTags=function(){var t=this;if(0<t.option.recommendTags.length){for(var o="",e=t.option.recommendTags.length,n=t._collectPopup.find(".recommend-tags"),a=0;a<e;a++){var c=t.option.recommendTags[a];o+='<a class="ui label" data-value="'+c+'">'+c+"</a>"}n.find(".labels").html(o+n.find(".labels").html()),n.show()}},m.prototype.btnPopup=function(){var l=this;l._collectPopupBtn.popup({popup:l._collectPopup,position:"bottom center",on:"click",onShow:function(){if(l._collectPopupBtn.hasClass(l.option.activeClass)){var t={type:l.option.objectTypeId,user:l.option.userId};return l.option.objectFromOSC?t.id=l.option.objectId:t.articleKey=l.option.objectKey,d.post(page.space_user_url+"/favorites/cancel",t,function(t){var o,e,n,a,c=t&&"string"==typeof t?JSON.parse(t):t;1===c.code?(o=m.getCollectNumFriendly(c.result,l.option.maxNum),e='[data-obj-type="'+l.option.objectTypeId+'"]',l.option.objectFromOSC?e+='[data-id="'+l.option.objectId+'"]':e+='[data-key="'+l.option.objectKey+'"]',(n=d(l.option.btnSelector+e)).removeClass(l.option.activeClass),n.find(".icon").addClass(l.option.nonActivatedIconClass),0<(a=n.find(l.option.btnLabelSelector)).length&&a.html("收藏("+o+")"),d("[data-collect-count]"+e).html(o)):d("body").toast({type:"error",content:"取消收藏失败"})}),!1}l._collectForm.form("reset"),l._collectForm.message("hideAll")},onVisible:function(){l._collectPopupBtn.hasClass(l.option.activeClass)||l._collectForm.find('input[name="tags"]').focus()}})},m.prototype.showPopup=function(){this._collectPopupBtn.popup("show")},m.prototype.blurTagEvent=function(){var o=this._collectForm.find("input[name=tags]");this._collectForm.on("focusout",o,function(t){setTimeout(function(){o.scrollLeft(o[0].scrollWidth)},0)})},m.prototype.formInit=function(){var c=this;c._collectForm.form({inline:!0,keyboardShortcuts:!1,on:"blur"}),c.option.requiredTags&&c._collectForm.form("add rule","tags",{identifier:"tags",rules:[{type:"empty",prompt:"必须填写收藏标签"}]}),c._collectForm.api({url:page.space_user_url+"/favorites/add",method:"post",serializeForm:!0,beforeSend:function(t){if(c._collectForm.message("hideAll"),!c._collectForm.form("validate form"))return!1;var o=t.data;return t.data={type:c.option.objectTypeId,user:c.option.userId,tags:o.tags},c.option.objectFromOSC?t.data.id=c.option.objectId:t.data.articleKey=c.option.objectKey,t},onSuccess:function(t){var o,e,n,a;1===t.code?(t.message&&d("body").toast({type:"success",content:t.message}),o=m.getCollectNumFriendly(t.result,c.option.maxNum),c._collectForm.form("reset"),e='[data-obj-type="'+c.option.objectTypeId+'"]',c.option.objectFromOSC?e+='[data-id="'+c.option.objectId+'"]':e+='[data-key="'+c.option.objectKey+'"]',(n=d(c.option.btnSelector+e)).addClass(c.option.activeClass),n.find(".icon").removeClass(c.option.nonActivatedIconClass),0<(a=n.find(c.option.btnLabelSelector)).length&&a.html("已收藏("+o+")"),d("[data-collect-count]"+e).html(o),c._collectPopupBtn.popup("hide")):c._collectForm.message({type:"negative",content:"收藏失败"})},onFailure:function(){c._collectForm.message({type:"negative",content:"网络错误，请稍后再试"})}})},m.prototype.bindTagsEvent=function(){var c=this;c._collectForm.on("click",".label",function(t){var e=d(this).attr("data-value"),o=c._collectForm.find("input[name=tags]"),n=m.commaStr2Arr(o.val()),a=-1;n.some(function(t,o){return t.trim()===e&&(a=o,!0)})?n.splice(a,1):n.push(e),o.val(n.join(",")).focus(),c._collectForm.form("validate form")})},m.getCollectNumFriendly=function(t,o){return t},m.labelFormat=function(t,e){var o=(o=t.html()).replace(/\((.*)?\)/,function(t,o){return"("+m.getCollectNumFriendly(o,e)+")"});t.html(o)},m.commaStr2Arr=function(t){var o=[];return t&&0<t.trim().length&&(o=(o=t.trim().replace(/，/gi,",").split(",")).filter(function(t){return t&&t.trim()})),o},window.OSCCollect=m;var t=function(){d(".collect-btn span.label").each(function(t,o){var e=d(o),n=parseInt(e.attr("data-max"))||b.maxNum;m.labelFormat(e,n)})},o=function(){var t,o,e,n;d(document).on("click",".collect-btn",function(t){var e=d(this);if(!window.common.checkLoginForWeChat(null,function(){try{var t,o;window.page&&page.objType&&page.objId&&(t=d(".collect-btn").index(e),o="OSC_COLLECT_"+page.objType+"_"+page.objId+"_CACHE",localStorage.setItem(o,t))}catch(t){}}))return!1;var o=e.attr("data-user-id"),n=parseInt(e.attr("data-obj-type")),a=e.attr("data-current-user-id");if(o===a){var c="内容";switch(n){case 1:c="软件";break;case 2:c="问答";break;case 3:c="博客";break;case 4:c="新闻"}return d("body").toast({type:"error",content:"不能收藏自己的"+c}),!1}var l=e.attr("data-flag")||Math.random().toString(36).substr(2,6);e.attr("data-flag",l);var r=m.commaStr2Arr(e.attr("data-recommend-tags")),i=e.attr("data-id"),p=e.attr("data-key"),s=!0;i&&0<parseInt(i)?s=!0:p&&(s=!1);var u={btnSelector:".collect-btn",popupSelector:".collect.popup",uniqueFlag:l,objectId:i,objectKey:p,objectFromOSC:s,objectTypeId:e.attr("data-obj-type"),userId:e.attr("data-current-user-id"),recommendTags:r,maxNum:parseInt(e.attr("data-max"))||b.maxNum,requiredTag:void 0!==e.attr("data-tag-required"),initFormatLabel:!1};0===d('.collect.popup[data-flag="'+l+'"]').length&&!0!==window.oscCollectLoading&&(window.oscCollectLoading=!0,d.get(page.space_user_url+"/widgets/collect_popup",function(t){var o=document.createElement("div");o.innerHTML=t,d(o).find(".collect.popup").attr("data-flag",l),document.body.appendChild(o);var e=new m(u);e.init(),e.showPopup()}).always(function(){window.oscCollectLoading=!1}))}),void 0!==window.localStorage&&window.page&&page.g_user_code&&page.objType&&page.objId&&(t="OSC_COLLECT_"+page.objType+"_"+page.objId+"_CACHE",(o=localStorage.getItem(t)||"")&&(localStorage.removeItem(t),0<(e=d(".collect-btn:eq("+(parseInt(o)||0)+")")).length&&(n=e.offset().top,d("html, body").stop(!0).animate({scrollTop:n-30},500,"swing"),setTimeout(function(){e.click()},1e3))))};d(function(){t(),o()})}(window.jQuery||window.$);
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r){function e(e){"object"!==_typeof(e)||(this.option=r.extend({},o,e))}var o={commentFormSelector:"#commentForm",commentsWrapEl:r(".comments-wrap"),toggleLoadComments:r.noop(),url:"",params:{},commentedAutoScrollToTop:!0,contentField:"content",commentMaxLength:1e3};e.prototype.init=function(){var e=this;e.commentsWrapEl=e.option.commentsWrapEl,e.initCommentForm(),e.initToolBoxPopup()},e.prototype.initCommentForm=function(){var n=this;n.commentFormVue=new Vue({el:n.option.commentFormSelector,data:function(){return{commentMaxLength:n.option.commentMaxLength||1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,o=this.emojiList.length;e<o;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},methods:{insertEmoji:function(e){this.clearMessage();var o=":"+e+":";this.insertContent(o),r(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){this.clearMessage();var e,o,t="#此处输入软件#";this.insertContent(t)&&(o=(e=selectRange.of(this.$refs.commentTextarea)).getCurPos(),e.setSelectText(o-(t.length-1),o-1))},publishComment:function(){var e,a=this;a.tweetPublishLoading||(a.clearMessage(),a.commentContentIsEmpty?a.showMessage("error","内容不能为空",2e3):a.commentContent.length>a.commentMaxLength?a.showMessage("error","最多只能输入"+a.commentMaxLength+"个字符！",2e3):(a.commentPublishLoading=!0,(e={})[n.option.contentField]=a.commentContent,"object"===_typeof(n.option.params)&&(e=r.extend({},e,n.option.params)),r.post(n.option.url,e,function(e){var o,t;1===e.code?(e.message&&r("body").toast({type:"success",content:e.message}),a.commentContent="",r.isFunction(n.option.toggleLoadComments)&&n.option.toggleLoadComments.call(this),o=r(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(t=e.result.replyCount,r("[data-article-reply-count]").html(t),o.attr("title","共有 "+t+" 条评论")),o.find(".icon").removeClass("outline"),!0===n.option.commentedAutoScrollToTop&&r("html, body").stop().animate({scrollTop:n.commentsWrapEl.offset().top-80},500,"swing"),a.removeCommentForm()):a.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){a.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){a.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,o,t){var a=this;a.tipMessage.className="success"===e?"positive":"negative",a.tipMessage.content=o;var n=parseInt(t)||0;a.tipMessage.show=!0,0<n&&setTimeout(function(){a.clearMessage()},n)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1},focus:function(){this.$refs.commentTextarea.focus()},removeCommentForm:function(){this.$el.remove(),this.$destroy()}}}),n.commentFormVue.$el.vueInstance=n.commentFormVue},e.prototype.focus=function(){var e=this;e.commentFormVue&&r.isFunction(e.commentFormVue.focus)&&e.commentFormVue.focus()},e.prototype.insertContent=function(e){var o=this;o.commentFormVue&&r.isFunction(o.commentFormVue.insertContent)&&o.commentFormVue.insertContent(e)},e.prototype.initToolBoxPopup=function(){r(this.commentFormVue.$el).find(".toolbox > .item[data-popup]").each(function(e,o){var t=r(o),a=r(t).parent().find(".toolbox-popup."+t.attr("data-popup"));t.popup({position:"bottom left",popup:a,on:"toolbox-picture"===t.attr("data-popup")?"manual":"click",exclusive:!0})})},window.OSCCommentForm=e}(window.jQuery||window.$);
"use strict";!function(){var i={getRadarOption:function(t,a,r,e){var n={},i=t||[],o=a||[],d=r||[],c=[];return o.forEach(function(t,a){c.push(e)}),n.data={maxValue:c,value:o,description:i,subText:d},n.config={scale:.8,originOffset:[0,5],dataFill:{fillStyle:"rgba(254,115,0,0.2)"},bg:{layer:3,evenFillStyle:"#F2F4F6",oddFillStyle:"#F8F9FA",evenStrokeStyle:"#DCE3E8",oddStrokeStyle:"#DCE3E8"},dataCircle:{r:3,strokeStyle:"#FE7300",fillStyle:"#FE7300",lineWidth:2},dataLine:{strokeStyle:"rgba(254,115,0,0.5)",lineWidth:2},font:{fontColor:"#537C8D",subFontColor:"#9b9b9b"}},n},buildRadarPanel:function(s,l,u){var p=this,t=l.attr("data-project-id")||0,f=l.attr("data-project-name")||"",y=l.find(".title"),g=l.find(".score"),F=l.find(".percent");$.post(page.api_prefix+"/project/get_project_portrait_radar_map",{project_id:t},function(t){var a,r,e,n,i,o,d,c;1===t.code&&t.result&&(r=(a=t.result).tagsName&&Array.isArray(a.tagsName)?a.tagsName:[],e=a.scores&&Array.isArray(a.scores)?a.scores:[],n=a.percents&&Array.isArray(a.percents)?a.percents:[],i=e.map(function(t,a){var r=(+t).toFixed(0),e=parseInt(100*(n[a]||0));return r+(0<e?" (>"+e+"%)":"")}),o=parseInt(100*(a.surpass||0))||0,d=(+a.summary||0).toFixed(0),c=a.homepage||"",s.show(),radarChart.init(u[0],p.getRadarOption(r,e,i,100)),p.bindLink(l,c),y.text(f),g.text(d),F.text(o+"%"))})},bindLink:function(t,a){var r=t.attr("data-url");r?t.on("click",function(){window.open(r)}):a?t.on("click",function(){window.open(a)}):t.css("cursor","default")}};new window.common.dynamicLoader(["/new-osc/js/utils/plugins/radarChart/radarChart.js"],function(){$(function(){var t=$("div[project-radar]");0<t.length&&t.each(function(t,a){var r=$(a),e=r.find(".radar-map"),n=r;r.attr("data-container")&&$(r.attr("data-container"))&&(n=$(r.attr("data-container"))),i.buildRadarPanel(n,r,e)})})}).loadFiles()}();
!function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){"use strict";function i(h,o,c){(c=c||e||t.jQuery)&&(o.prototype.option||(o.prototype.option=function(t){c.isPlainObject(t)&&(this.options=c.extend(!0,this.options,t))}),c.fn[h]=function(t){if("string"!=typeof t)return n=t,this.each(function(t,e){var i=c.data(e,h);i?(i.option(n),i._init()):(i=new o(e,n),c.data(e,h,i))}),this;var e,r,s,l,a,n,i=u.call(arguments,1);return s=i,a="$()."+h+'("'+(r=t)+'")',(e=this).each(function(t,e){var i,n,o=c.data(e,h);o?(i=o[r])&&"_"!=r.charAt(0)?(n=i.apply(o,s),l=void 0===l?n:l):d(a+" is not a valid method"):d(h+" not initialized. Cannot call methods, i.e. "+a)}),void 0!==l?l:e},n(c))}function n(t){!t||t&&t.bridget||(t.bridget=i)}var u=Array.prototype.slice,o=t.console,d=void 0===o?function(){}:function(t){o.error(t)};return n(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){i=i.slice(0),e=e||[];for(var n=this._onceEvents&&this._onceEvents[t],o=0;o<i.length;o++){var r=i[o];n&&n[r]&&(this.off(t,r),delete n[r]),r.apply(this,e)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==typeof module&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){"use strict";var i=function(){var t=window.Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var n=e[i]+"MatchesSelector";if(t[n])return n}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(h,r){var c={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e}},e=Array.prototype.slice;c.makeArray=function(t){return Array.isArray(t)?t:null==t?[]:"object"==typeof t&&"number"==typeof t.length?e.call(t):[t]},c.removeFrom=function(t,e){var i=t.indexOf(e);-1!=i&&t.splice(i,1)},c.getParent=function(t,e){for(;t.parentNode&&t!=document.body;)if(t=t.parentNode,r(t,e))return t},c.getQueryElement=function(t){return"string"==typeof t?document.querySelector(t):t},c.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.filterFindElements=function(t,n){t=c.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!n)return void o.push(t);r(t,n)&&o.push(t);for(var e=t.querySelectorAll(n),i=0;i<e.length;i++)o.push(e[i])}}),o},c.debounceMethod=function(t,e,n){n=n||100;var o=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];clearTimeout(t);var e=arguments,i=this;this[r]=setTimeout(function(){o.apply(i,e),delete i[r]},n)}},c.docReady=function(t){var e=document.readyState;"complete"==e||"interactive"==e?setTimeout(t):document.addEventListener("DOMContentLoaded",t)},c.toDashed=function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()};var u=h.console;return c.htmlInit=function(l,a){c.docReady(function(){var t=c.toDashed(a),o="data-"+t,e=document.querySelectorAll("["+o+"]"),i=document.querySelectorAll(".js-"+t),n=c.makeArray(e).concat(c.makeArray(i)),r=o+"-options",s=h.jQuery;n.forEach(function(e){var t,i=e.getAttribute(o)||e.getAttribute(r);try{t=i&&JSON.parse(i)}catch(t){return void(u&&u.error("Error parsing "+o+" on "+e.className+": "+t))}var n=new l(e,t);s&&s.data(e,a,n)})})},c}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("ev-emitter"),require("fizzy-ui-utils")):i.InfiniteScroll=n(i,i.EvEmitter,i.fizzyUIUtils)}(window,function(e,t,o){function r(t,e){var i=o.getQueryElement(t);if(i){if((t=i).infiniteScrollGUID){var n=l[t.infiniteScrollGUID];return n.option(e),n}this.element=t,this.options=o.extend({},r.defaults),this.option(e),s&&(this.$element=s(this.element)),this.create()}}var s=e.jQuery,l={};r.defaults={},r.create={},r.destroy={};var i=r.prototype;o.extend(i,t.prototype);var n=0;i.create=function(){var t=this.guid=++n;if(this.element.infiniteScrollGUID=t,(l[t]=this).pageIndex=1,this.loadCount=0,this.updateGetPath(),this.getPath&&this.getPath())for(var e in this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit(),r.create)r.create[e].call(this)},i.option=function(t){o.extend(this.options,t)},i.callOnInit=function(){var t=this.options.onInit;t&&t.call(this,this)},i.dispatchEvent=function(t,e,i){this.log(t,i);var n,o,r=e?[e].concat(i):i;this.emitEvent(t,r),s&&this.$element&&(n=t+=".infiniteScroll",e&&((o=s.Event(e)).type=t,n=o),this.$element.trigger(n,i))};var a={initialized:function(t){return"on "+t},request:function(t){return"URL: "+t},load:function(t,e){return(t.title||"")+". URL: "+e},error:function(t,e){return t+". URL: "+e},append:function(t,e,i){return i.length+" items. URL: "+e},last:function(t,e){return"URL: "+e},history:function(t,e){return"URL: "+e},pageIndex:function(t,e){return"current page determined to be: "+t+" from "+e}};i.log=function(t,e){var i;!this.options.debug||(i=a[t])&&i.apply(this,e)},i.updateMeasurements=function(){this.windowHeight=e.innerHeight;var t=this.element.getBoundingClientRect();this.top=t.top+e.pageYOffset},i.updateScroller=function(){var t=this.options.elementScroll;if(t){if(this.scroller=!0===t?this.element:o.getQueryElement(t),!this.scroller)throw"Unable to find elementScroll: "+t}else this.scroller=e},i.updateGetPath=function(){var t=this.options.path;if(t){var e=typeof t;if("function"!=e)return"string"==e&&t.match("{{#}}")?void this.updateGetPathTemplate(t):void this.updateGetPathSelector(t);this.getPath=t}},i.updateGetPathTemplate=function(e){this.getPath=function(){var t=this.pageIndex+1;return e.replace("{{#}}",t)}.bind(this);var t=e.replace("{{#}}","(\\d\\d?\\d?)"),i=new RegExp(t),n=location.href.match(i);n&&(this.pageIndex=parseInt(n[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))};var h=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return i.updateGetPathSelector=function(t){var e=document.querySelector(t);if(e){for(var i,n,o=e.getAttribute("href"),r=0;o&&r<h.length;r++){n=h[r];var s=o.match(n);if(s){i=s.slice(1);break}}return i?(this.isPathSelector=!0,this.getPath=function(){var t=this.pageIndex+1;return i[0]+t+i[2]}.bind(this),this.pageIndex=parseInt(i[1],10)-1,void this.log("pageIndex",[this.pageIndex,"next link"])):void 0}},i.updateGetAbsolutePath=function(){var t,e,i=this.getPath();i.match(/^http/)||i.match(/^\//)?this.getAbsolutePath=this.getPath:(t=location.pathname,e=t.substring(0,t.lastIndexOf("/")),this.getAbsolutePath=function(){return e+"/"+this.getPath()})},r.create.hideNav=function(){var t=o.getQueryElement(this.options.hideNav);t&&(t.style.display="none",this.nav=t)},r.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},i.destroy=function(){for(var t in this.allOff(),r.destroy)r.destroy[t].call(this);delete this.element.infiniteScrollGUID,delete l[this.guid]},r.throttle=function(n,o){var r,s;return o=o||200,function(){var t=+new Date,e=arguments,i=function(){r=t,n.apply(this,e)}.bind(this);r&&t<r+o?(clearTimeout(s),s=setTimeout(i,o)):i()}},r.data=function(t){var e=(t=o.getQueryElement(t))&&t.infiniteScrollGUID;return e&&l[e]},r.setJQuery=function(t){s=t},o.htmlInit(r,"infinite-scroll"),s&&s.bridget&&s.bridget("infiniteScroll",r),r}),function(e,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("./core")):i(e,e.InfiniteScroll)}(window,function(n,o){function s(t){for(var e=document.createDocumentFragment(),i=0;t&&i<t.length;i++)e.appendChild(t[i]);return e}function i(t){for(var e=t.querySelectorAll("script"),i=0;i<e.length;i++){var n=e[i],o=document.createElement("script");(function(t,e){for(var i=t.attributes,n=0;n<i.length;n++){var o=i[n];e.setAttribute(o.name,o.value)}})(n,o),o.innerHTML=n.innerHTML,n.parentNode.replaceChild(o,n)}}var t=o.prototype;return o.defaults.loadOnScroll=!0,o.defaults.checkLastPage=!0,o.defaults.responseType="document",o.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},t.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},t.loadNextPage=function(){var e,t,i,n,o,r,s,l;!this.isLoading&&this.canLoad&&(e=this.getAbsolutePath(),this.isLoading=!0,t=function(t){this.onPageLoad(t,e)}.bind(this),i=function(t){this.onPageError(t,e)}.bind(this),n=e,o=this.options.responseType,r=t,s=i,(l=new XMLHttpRequest).open("GET",n,!0),l.responseType=o||"",l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onload=function(){var t;200==l.status?r(l.response):(t=new Error(l.statusText),s(t))},l.onerror=function(){var t=new Error("Network error requesting "+n);s(t)},l.send(),this.dispatchEvent("request",null,[e]))},t.onPageLoad=function(t,e){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[t,e]),this.appendNextPage(t,e),t},t.appendNextPage=function(t,e){var i,n,o,r=this.options.append;"document"==this.options.responseType&&r&&(i=t.querySelectorAll(r),n=s(i),o=function(){this.appendItems(i,n),this.isLoading=!1,this.dispatchEvent("append",null,[t,e,i])}.bind(this),this.options.outlayer?this.appendOutlayerItems(n,o):o())},t.appendItems=function(t,e){t&&t.length&&(i(e=e||s(t)),this.element.appendChild(e))},t.appendOutlayerItems=function(t,e){var i=o.imagesLoaded||n.imagesLoaded;return i?void i(t,e):void(this.isLoading=!1)},t.onAppendOutlayer=function(t,e,i){this.options.outlayer.appended(i)},t.checkLastPage=function(t,e){var i=this.options.checkLastPage;if(i){var n,o=this.options.path;if("function"==typeof o)if(!this.getPath())return void this.lastPageReached(t,e);"string"==typeof i?n=i:this.isPathSelector&&(n=o),n&&t.querySelector&&(t.querySelector(n)||this.lastPageReached(t,e))}},t.lastPageReached=function(t,e){this.canLoad=!1,this.dispatchEvent("last",null,[t,e])},t.onPageError=function(t,e){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[t,e]),t},o.create.prefill=function(){if(this.options.prefill){var t=this.options.append;if(!t)return;this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()}},t.prefill=function(){var t=this.getPrefillDistance();this.isPrefilling=0<=t,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},t.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},t.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},o}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(i,t,e){var n=t.prototype;return t.defaults.scrollThreshold=400,t.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var t=this.options.scrollThreshold;!t&&0!==t||this.enableScrollWatch()},t.destroy.scrollWatch=function(){this.disableScrollWatch()},n.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},n.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},n.bindScrollWatchEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.pageScrollHandler),i[e]("resize",this.resizeHandler)},n.onPageScroll=t.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),n.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},n.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(i.pageYOffset+this.windowHeight)},n.getElementBottomDistance=function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)},n.onResize=function(){this.updateMeasurements()},e.debounceMethod(t,"onResize",150),t}),function(i,n){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(t,e){return n(i,t,e)}):"object"==typeof module&&module.exports?module.exports=n(i,require("./core"),require("fizzy-ui-utils")):n(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(n,t,e){var i=t.prototype;t.defaults.history="replace";var r=document.createElement("a");return t.create.history=function(){if(this.options.history)return r.href=this.getAbsolutePath(),(r.origin||r.protocol+"//"+r.host)==location.origin?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void 0},i.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},i.bindHistoryAppendEvents=function(t){var e=t?"addEventListener":"removeEventListener";this.scroller[e]("scroll",this.scrollHistoryHandler),n[e]("unload",this.unloadHandler)},i.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},t.destroy.history=i.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)},i.onAppendHistory=function(t,e,i){var n,o;i&&i.length&&(n=i[0],o=this.getElementScrollY(n),r.href=e,this.scrollPages.push({top:o,path:r.href,title:t.title}))},i.getElementScrollY=function(t){return this.options.elementScroll?this.getElementElementScrollY(t):this.getElementWindowScrollY(t)},i.getElementWindowScrollY=function(t){return t.getBoundingClientRect().top+n.pageYOffset},i.getElementElementScrollY=function(t){return t.offsetTop-this.top},i.onScrollHistory=function(){for(var t,e,i=this.getScrollViewY(),n=0;n<this.scrollPages.length;n++){var o=this.scrollPages[n];if(o.top>=i)break;t=n,e=o}t!=this.scrollPageIndex&&(this.scrollPageIndex=t,this.setHistory(e.title,e.path))},e.debounceMethod(t,"onScrollHistory",150),i.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:n.pageYOffset+this.windowHeight/2},i.setHistory=function(t,e){var i=this.options.history;i&&history[i+"State"]&&(history[i+"State"](null,t,e),this.options.historyTitle&&(document.title=t),this.dispatchEvent("history",null,[t,e]))},i.onUnload=function(){var t,e,i=this.scrollPageIndex;0!==i&&(t=this.scrollPages[i],e=n.pageYOffset-t.top+this.top,this.destroyHistory(),scrollTo(0,e))},i.onPageLoadHistory=function(t,e){this.setHistory(t.title,e)},t}),function(t,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./core"),require("fizzy-ui-utils")):i(0,t.InfiniteScroll,t.fizzyUIUtils)}(window,function(t,e,i){function n(t,e){this.element=t,this.infScroll=e,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),e.on("request",this.disable.bind(this)),e.on("load",this.enable.bind(this)),e.on("error",this.hide.bind(this)),e.on("last",this.hide.bind(this))}return e.create.button=function(){var t=i.getQueryElement(this.options.button);t&&(this.button=new n(t,this))},e.destroy.button=function(){this.button&&this.button.destroy()},n.prototype.onClick=function(t){t.preventDefault(),this.infScroll.loadNextPage()},n.prototype.enable=function(){this.element.removeAttribute("disabled")},n.prototype.disable=function(){this.element.disabled="disabled"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},e.Button=n,e}),function(t,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(t,e){return i(0,t,e)}):"object"==typeof module&&module.exports?module.exports=i(0,require("./core"),require("fizzy-ui-utils")):i(0,t.InfiniteScroll,t.fizzyUIUtils)}(window,function(t,e,i){function n(t){r(t,"none")}function o(t){r(t,"block")}function r(t,e){t&&(t.style.display=e)}var s=e.prototype;return e.create.status=function(){var t=i.getQueryElement(this.options.status);t&&(this.statusElement=t,this.statusEventElements={request:t.querySelector(".infinite-scroll-request"),error:t.querySelector(".infinite-scroll-error"),last:t.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},s.bindHideStatus=function(t){var e=this.options.append?"append":"load";this[t](e,this.hideAllStatus)},s.showRequestStatus=function(){this.showStatus("request")},s.showErrorStatus=function(){this.showStatus("error")},s.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},s.showStatus=function(t){o(this.statusElement),this.hideStatusEventElements(),o(this.statusEventElements[t])},s.hideAllStatus=function(){n(this.statusElement),this.hideStatusEventElements()},s.hideStatusEventElements=function(){for(var t in this.statusEventElements){n(this.statusEventElements[t])}},e}),function(t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}((window,function(t){return t})),function(e,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==typeof module&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function r(t,e){for(var i in e)t[i]=e[i];return t}function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);var n,o=t;return"string"==typeof t&&(o=document.querySelectorAll(t)),o?(this.elements=(n=o,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?h.call(n):[n]),this.options=r({},this.options),"function"==typeof e?i=e:r(this.options,e),i&&this.on("always",i),this.getImages(),l&&(this.jqDeferred=new l.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(o||t))}function i(t){this.img=t}function n(t,e){this.url=t,this.element=e,this.img=new Image}var l=e.jQuery,a=e.console,h=Array.prototype.slice;(s.prototype=Object.create(t.prototype)).options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background)for(var r=t.querySelectorAll(this.options.background),n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}};var c={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},s.prototype.addImage=function(t){var e=new i(t);this.images.push(e)},s.prototype.addBackground=function(t,e){var i=new n(t,e);this.images.push(i)},s.prototype.check=function(){function e(t,e,i){setTimeout(function(){n.progress(t,e,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},s.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},s.prototype.complete=function(){var t,e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(t=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[t](this))},(i.prototype=Object.create(t.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(s.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((l=t).fn.imagesLoaded=function(t,e){return new s(this,t,e).jqDeferred.promise(l(this))})})(),s});
"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}!function(l){function o(o){var t=this;if("object"===_typeof(o))return t.option=l.extend({},n,o),t._loadMoreButton=function(){return l(t.getFullSelector(t.option.loadMoreBtnSelector))},void(t._loader=function(){return l(t.getFullSelector(t.option.statusSelector)).find(".infinite-scroll-request .loader")})}var n={pagePath:void 0,containerSelector:"",itemListSelector:".articles-list-container",itemSelector:".item",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",hideNav:".pagination",checkLastPage:!0,loadOnScroll:!0,scrollThreshold:400,defaultAutoLoadPageCount:2,debug:!1,history:!1,onRequest:l.noop,onLoad:l.noop,onAppend:l.noop,onError:l.noop,onLast:l.noop};o.prototype.init=function(){var e=this;0!==l(e.getFullSelector(e.option.itemListSelector)).length&&(e._infScroll=new InfiniteScroll(e.getFullSelector(e.option.itemListSelector),{path:e.option.pagePath,history:e.option.history,loadOnScroll:e.option.loadOnScroll,scrollThreshold:e.option.scrollThreshold,append:e.option.itemSelector,button:e.getFullSelector(e.option.loadMoreBtnSelector),status:e.getFullSelector(e.option.statusSelector),checkLastPage:e.option.checkLastPage,hideNav:e.getFullSelector(e.option.hideNav),debug:e.option.debug}),e._infScroll.on("request",function(o){e._loadMoreButton().is(":visible")&&e._loadMoreButton().addClass("loading"),l.isFunction(e.option.onRequest)&&e.option.onRequest.bind(this)(o)}),e._infScroll.on("load",function(o,t){e._loadMoreButton().is(":visible")&&e._loadMoreButton().removeClass("loading"),l.isFunction(e.option.onLoad)&&e.option.onLoad.bind(this)(o,t)}),e._infScroll.on("load",function o(){0!==e.option.defaultAutoLoadPageCount&&e._infScroll.loadCount===e.option.defaultAutoLoadPageCount&&(e.disabledLoadOnScroll(),e._infScroll.off("load",o))}),e._infScroll.on("append",function(o,t,n){l.isFunction(e.option.onAppend)&&e.option.onAppend.bind(this)(o,t,n)}),e._infScroll.on("error",function(o,t){l.isFunction(e.option.onError)&&e.option.onError.bind(this)(o,t)}),e._infScroll.on("last",function(o,t){setTimeout(function(){e._loadMoreButton().hide()},0),l.isFunction(e.option.onLast)&&e.option.onLast.bind(this)(o,t)}),0!==e.option.defaultAutoLoadPageCount||e.option.loadOnScroll||(e._loadMoreButton().show(),e._loader().hide()))},o.prototype.destroy=function(){var o=this;0!==l(o.getFullSelector(o.option.itemListSelector)).length&&(o._infScroll&&o._infScroll.destroy(),o._loadMoreButton().hide(),o._loader().show())},o.prototype.disabledLoadOnScroll=function(){var o=this;o._infScroll.option({loadOnScroll:!1}),o._loadMoreButton().show(),o._loader().hide()},o.prototype.enabledLoadOnScroll=function(){var o=this;o._infScroll.option({loadOnScroll:!0}),o._loadMoreButton().hide(),o._loader().show()},o.prototype.getFullSelector=function(o){var t=this,n=o.trim();return t.option.containerSelector&&0<t.option.containerSelector.trim().length&&(n=t.option.containerSelector.trim()+" "+n),n},window.OSCInfiniteScroll=o}(window.jQuery||window.$);
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).Viewer=i()}(this,function(){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,zoom:null,zoomed:null},t="undefined"!=typeof window,e=t?window:{},a=t&&"ontouchstart"in e.document.documentElement,n=t&&"PointerEvent"in e,y="viewer",c="move",d="switch",u="zoom",g="".concat(y,"-active"),x="".concat(y,"-close"),k="".concat(y,"-fade"),z="".concat(y,"-fixed"),D="".concat(y,"-fullscreen"),r="".concat(y,"-fullscreen-exit"),T="".concat(y,"-hide"),h="".concat(y,"-hide-md-down"),l="".concat(y,"-hide-sm-down"),m="".concat(y,"-hide-xs-down"),f="".concat(y,"-in"),E="".concat(y,"-invisible"),v="".concat(y,"-loading"),p="".concat(y,"-move"),w="".concat(y,"-open"),b="".concat(y,"-show"),I="".concat(y,"-transition"),S="click",C="dblclick",L="dragstart",N="hidden",R="hide",q="keydown",M="load",Y=n?"pointerdown":a?"touchstart":"mousedown",X=n?"pointermove":a?"touchmove":"mousemove",F=n?"pointerup pointercancel":a?"touchend touchcancel":"mouseup",O="ready",A="resize",W="show",P="shown",H="transitionend",j="view",V="viewed",B="wheel",K="".concat(y,"Action"),U=/\s\s*/,Z=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function $(t){return"string"==typeof t}var _=Number.isNaN||e.isNaN;function G(t){return"number"==typeof t&&!_(t)}function J(t){return void 0===t}function Q(t){return"object"===i(t)&&null!==t}var tt=Object.prototype.hasOwnProperty;function it(t){if(!Q(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&tt.call(e,"isPrototypeOf")}catch(t){return!1}}function et(t){return"function"==typeof t}function nt(i,e){if(i&&et(e))if(Array.isArray(i)||G(i.length))for(var t=i.length,n=0;n<t&&!1!==e.call(i,i[n],n,i);n+=1);else Q(i)&&Object.keys(i).forEach(function(t){e.call(i,i[t],t,i)});return i}var st=Object.assign||function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Q(e)&&0<i.length&&i.forEach(function(i){Q(i)&&Object.keys(i).forEach(function(t){e[t]=i[t]})}),e},ot=/^(?:width|height|left|top|marginLeft|marginTop)$/;function at(t,i){var e=t.style;nt(i,function(t,i){ot.test(i)&&G(t)&&(t+="px"),e[i]=t})}function rt(t){return $(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function ht(t,i){return t.classList?t.classList.contains(i):-1<t.className.indexOf(i)}function lt(t,i){var e;i&&(G(t.length)?nt(t,function(t){lt(t,i)}):t.classList?t.classList.add(i):(e=t.className.trim())?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i)}function ct(t,i){i&&(G(t.length)?nt(t,function(t){ct(t,i)}):t.classList?t.classList.remove(i):0<=t.className.indexOf(i)&&(t.className=t.className.replace(i,"")))}function dt(t,i,e){i&&(G(t.length)?nt(t,function(t){dt(t,i,e)}):(e?lt:ct)(t,i))}var ut=/([a-z\d])([A-Z])/g;function mt(t){return t.replace(ut,"$1-$2").toLowerCase()}function gt(t,i){return Q(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(mt(i)))}function ft(t,i,e){Q(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(mt(i)),e)}var vt,pt,wt,bt,yt=(bt=!1,t&&(vt=!1,pt=function(){},wt=Object.defineProperty({},"once",{get:function(){return bt=!0,vt},set:function(t){vt=t}}),e.addEventListener("test",pt,wt),e.removeEventListener("test",pt,wt)),bt);function xt(e,t,n,i){var s=3<arguments.length&&void 0!==i?i:{},o=n;t.trim().split(U).forEach(function(t){var i;yt||(i=e.listeners)&&i[t]&&i[t][n]&&(o=i[t][n],delete i[t][n],0===Object.keys(i[t]).length&&delete i[t],0===Object.keys(i).length&&delete e.listeners),e.removeEventListener(t,o,s)})}function kt(o,t,a,i){var r=3<arguments.length&&void 0!==i?i:{},h=a;t.trim().split(U).forEach(function(n){var t,s;r.once&&!yt&&(t=o.listeners,h=function(){delete s[n][a],o.removeEventListener(n,h,r);for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];a.apply(o,i)},(s=void 0===t?{}:t)[n]||(s[n]={}),s[n][a]&&o.removeEventListener(n,s[n][a],r),s[n][a]=h,o.listeners=s),o.addEventListener(n,h,r)})}function zt(t,i,e){var n;return et(Event)&&et(CustomEvent)?n=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}function Dt(t){var i=t.rotate,e=t.scaleX,n=t.scaleY,s=t.translateX,o=t.translateY,a=[];G(s)&&0!==s&&a.push("translateX(".concat(s,"px)")),G(o)&&0!==o&&a.push("translateY(".concat(o,"px)")),G(i)&&0!==i&&a.push("rotate(".concat(i,"deg)")),G(e)&&1!==e&&a.push("scaleX(".concat(e,")")),G(n)&&1!==n&&a.push("scaleY(".concat(n,")"));var r=a.length?a.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}var Tt=e.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(e.navigator.userAgent);function Et(t,i){var e=document.createElement("img");if(t.naturalWidth&&!Tt)return i(t.naturalWidth,t.naturalHeight),e;var n=document.body||document.documentElement;return e.onload=function(){i(e.width,e.height),Tt||n.removeChild(e)},e.src=t.src,Tt||(e.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(e)),e}function It(t){switch(t){case 2:return m;case 3:return l;case 4:return h;default:return""}}function St(t,i){var e=t.pageX,n=t.pageY,s={endX:e,endY:n};return i?s:st({timeStamp:Date.now(),startX:e,startY:n},s)}var Ct={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var t,i=this.options,e=this.parent;i.inline&&(t={width:Math.max(e.offsetWidth,i.minWidth),height:Math.max(e.offsetHeight,i.minHeight)},this.parentData=t),!this.fulled&&t||(t=this.containerData),this.viewerData=st({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&at(this.viewer,this.viewerData)},initList:function(){var h=this,t=this.element,l=this.options,c=this.list,d=[];nt(this.images,function(t,i){var e,n,s,o=t.src,a=rt(t.alt||($(e=o)?decodeURIComponent(e.replace(/^.*\//,"").replace(/[?&#].*$/,"")):"")),r=l.url;$(r)?r=t.getAttribute(r):et(r)&&(r=r.call(h,t)),(o||r)&&(n=document.createElement("li"),(s=document.createElement("img")).src=o||r,s.alt=a,s.setAttribute("data-index",i),s.setAttribute("data-original-url",r||o),s.setAttribute("data-viewer-action","view"),s.setAttribute("role","button"),n.appendChild(s),c.appendChild(n),d.push(n))}),nt(this.items=d,function(i){var t=i.firstElementChild;ft(t,"filled",!0),l.loading&&lt(i,v),kt(t,M,function(t){l.loading&&ct(i,v),h.loadImage(t)},{once:!0})}),l.transition&&kt(t,V,function(){lt(c,I)},{once:!0})},renderList:function(t){var i=t||this.index,e=this.items[i].offsetWidth||30,n=e+1;at(this.list,st({width:n*this.length},Dt({translateX:(this.viewerData.width-e)/2-n*i})))},resetList:function(){var t=this.list;t.innerHTML="",ct(t,I),at(t,Dt({translateX:0}))},initImage:function(r){var t,h=this,l=this.options,i=this.image,e=this.viewerData,n=this.footer.offsetHeight,c=e.width,d=Math.max(e.height-n,n),u=this.imageData||{};this.imageInitializing={abort:function(){t.onload=null}},t=Et(i,function(t,i){var e=t/i,n=c,s=d;h.imageInitializing=!1,c<d*e?s=c/e:n=d*e;var o={naturalWidth:t,naturalHeight:i,aspectRatio:e,ratio:(n=Math.min(.9*n,t))/t,width:n,height:s=Math.min(.9*s,i),left:(c-n)/2,top:(d-s)/2},a=st({},o);l.rotatable&&(o.rotate=u.rotate||0,a.rotate=0),l.scalable&&(o.scaleX=u.scaleX||1,o.scaleY=u.scaleY||1,a.scaleX=1,a.scaleY=1),h.imageData=o,h.initialImageData=a,r&&r()})},renderImage:function(t){var i,e=this,n=this.image,s=this.imageData;at(n,st({width:s.width,height:s.height,marginLeft:s.left,marginTop:s.top},Dt(s))),t&&((this.viewing||this.zooming)&&this.options.transition?(i=function(){e.imageRendering=!1,t()},this.imageRendering={abort:function(){xt(n,H,i)}},kt(n,H,i,{once:!0})):t())},resetImage:function(){var t;(this.viewing||this.viewed)&&(t=this.image,this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null)}},Lt={bind:function(){var t=this.options,i=this.viewer,e=this.canvas,n=this.element.ownerDocument;kt(i,S,this.onClick=this.click.bind(this)),kt(i,B,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),kt(i,L,this.onDragStart=this.dragstart.bind(this)),kt(e,Y,this.onPointerDown=this.pointerdown.bind(this)),kt(n,X,this.onPointerMove=this.pointermove.bind(this)),kt(n,F,this.onPointerUp=this.pointerup.bind(this)),kt(n,q,this.onKeyDown=this.keydown.bind(this)),kt(window,A,this.onResize=this.resize.bind(this)),t.toggleOnDblclick&&kt(e,C,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,i=this.viewer,e=this.canvas,n=this.element.ownerDocument;xt(i,S,this.onClick),xt(i,B,this.onWheel,{passive:!1,capture:!0}),xt(i,L,this.onDragStart),xt(e,Y,this.onPointerDown),xt(n,X,this.onPointerMove),xt(n,F,this.onPointerUp),xt(n,q,this.onKeyDown),xt(window,A,this.onResize),t.toggleOnDblclick&&xt(e,C,this.onDblclick)}},Nt={click:function(t){var i=t.target,e=this.options,n=this.imageData,s=gt(i,K);switch(a&&t.isTrusted&&i===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():e.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(gt(i,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(e.loop);break;case"play":this.play(e.fullscreen);break;case"next":this.next(e.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-n.scaleX||-1);break;case"flip-vertical":this.scaleY(-n.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(a&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle())},load:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var i=this.element,e=this.options,n=this.image,s=this.index,o=this.viewerData;ct(n,E),e.loading&&ct(this.canvas,v),n.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:absolute;width:0;",this.initImage(function(){dt(n,p,e.movable),dt(n,I,e.transition),t.renderImage(function(){t.viewed=!0,t.viewing=!1,et(e.viewed)&&kt(i,V,e.viewed,{once:!0}),zt(i,V,{originalImage:t.images[s],index:s,image:n})})})},loadImage:function(t){var o=t.target,i=o.parentNode,a=i.offsetWidth||30,r=i.offsetHeight||50,h=!!gt(o,"filled");Et(o,function(t,i){var e=t/i,n=a,s=r;a<r*e?h?n=r*e:s=a/e:h?s=a/e:n=r*e,at(o,st({width:n,height:s},Dt({translateX:(a-n)/2,translateY:(r-s)/2})))})},keydown:function(t){var i=this.options;if(this.fulled&&i.keyboard)switch(t.keyCode||t.which||t.charCode){case 27:this.played?this.stop():i.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(i.loop);break;case 38:t.preventDefault(),this.zoom(i.zoomRatio,!0);break;case 39:this.next(i.loop);break;case 40:t.preventDefault(),this.zoom(-i.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle())}},dragstart:function(t){"img"===t.target.tagName.toLowerCase()&&t.preventDefault()},pointerdown:function(t){var i,e=this.options,n=this.pointers,s=t.buttons,o=t.button;!this.viewed||this.showing||this.viewing||this.hiding||G(s)&&1!==s||G(o)&&0!==o||t.ctrlKey||(t.preventDefault(),t.changedTouches?nt(t.changedTouches,function(t){n[t.identifier]=St(t)}):n[t.pointerId||0]=St(t),i=!!e.movable&&c,1<Object.keys(n).length?i=u:"touch"!==t.pointerType&&"touchstart"!==t.type||!this.isSwitchable()||(i=d),!e.transition||i!==c&&i!==u||ct(this.image,I),this.action=i)},pointermove:function(t){var i=this.pointers,e=this.action;this.viewed&&e&&(t.preventDefault(),t.changedTouches?nt(t.changedTouches,function(t){st(i[t.identifier]||{},St(t,!0))}):st(i[t.pointerId||0]||{},St(t,!0)),this.change(t))},pointerup:function(t){var i,e=this,n=this.options,s=this.action,o=this.pointers;t.changedTouches?nt(t.changedTouches,function(t){i=o[t.identifier],delete o[t.identifier]}):(i=o[t.pointerId||0],delete o[t.pointerId||0]),s&&(t.preventDefault(),!n.transition||s!==c&&s!==u||lt(this.image,I),this.action=!1,a&&s!==u&&i&&Date.now()-i.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){zt(e.image,C)},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){e.imageClicked=!1},500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){zt(e.canvas,S)},50)))))},resize:function(){var i=this;if(this.isShown&&!this.hiding&&(this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){i.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();nt(this.player.getElementsByTagName("img"),function(t){kt(t,M,i.loadImage.bind(i),{once:!0}),zt(t,M)})}},wheel:function(t){var i,e,n=this;this.viewed&&(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){n.wheeling=!1},50),i=Number(this.options.zoomRatio)||.1,e=1,t.deltaY?e=0<t.deltaY?1:-1:t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=0<t.detail?1:-1),this.zoom(-e*i,!0,t)))}},Rt={show:function(t){var i=0<arguments.length&&void 0!==t&&t,e=this.element,n=this.options;if(n.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(i),this;if(et(n.show)&&kt(e,W,n.show,{once:!0}),!1===zt(e,W)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var s,o=this.viewer;return ct(o,T),n.transition&&!i?(s=this.shown.bind(this),this.transitioning={abort:function(){xt(o,H,s),ct(o,f)}},lt(o,I),o.offsetWidth,kt(o,H,s,{once:!0}),lt(o,f)):(lt(o,f),this.shown()),this},hide:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=this.element,e=this.options;if(e.inline||this.hiding||!this.isShown&&!this.showing)return this;if(et(e.hide)&&kt(i,R,e.hide,{once:!0}),!1===zt(i,R))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var n,s,o=this.viewer;return e.transition&&!t?(n=this.hidden.bind(this),s=function(){setTimeout(function(){kt(o,H,n,{once:!0}),ct(o,f)},0)},this.transitioning={abort:function(){this.viewed?xt(this.image,H,s):xt(o,H,n)}},this.viewed&&ht(this.image,I)?(kt(this.image,H,s,{once:!0}),this.zoomTo(0,!1,!1,!0)):s()):(ct(o,f),this.hidden()),this},view:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:this.options.initialViewIndex,i=Number(i)||0;if(!this.isShown)return this.index=i,this.show();if(this.hiding||this.played||i<0||i>=this.length||this.viewed&&i===this.index)return this;this.viewing&&this.viewing.abort();var n=this.element,s=this.options,o=this.title,a=this.canvas,r=this.items[i],h=r.querySelector("img"),l=gt(h,"originalUrl"),c=rt(h.getAttribute("alt")),d=document.createElement("img");if(d.src=l,d.alt=c,et(s.view)&&kt(n,j,s.view,{once:!0}),!1===zt(n,j,{originalImage:this.images[i],index:i,image:d})||!this.isShown||this.hiding||this.played)return this;this.image=d,ct(this.items[this.index],g),lt(r,g),this.viewed=!1,this.index=i,this.imageData={},lt(d,E),s.loading&&lt(a,v),a.innerHTML="",a.appendChild(d),this.renderList(),o.innerHTML="";function u(){var t=e.imageData,i=Array.isArray(s.title)?s.title[1]:s.title;o.innerHTML=rt(et(i)?i.call(e,d,t):"".concat(c," (").concat(t.naturalWidth," × ").concat(t.naturalHeight,")"))}var m;return kt(n,V,u,{once:!0}),this.viewing={abort:function(){xt(n,V,u),d.complete?this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort():(d.src="",xt(d,M,m),this.timeout&&clearTimeout(this.timeout))}},d.complete?this.load():(kt(d,M,m=this.load.bind(this),{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){ct(d,E),e.timeout=!1},1e3)),this},prev:function(t){var i=0<arguments.length&&void 0!==t&&t,e=this.index-1;return e<0&&(e=i?this.length-1:0),this.view(e),this},next:function(t){var i=0<arguments.length&&void 0!==t&&t,e=this.length-1,n=this.index+1;return e<n&&(n=i?0:e),this.view(n),this},move:function(t,i){var e=this.imageData;return this.moveTo(J(t)?t:e.left+Number(t),J(i)?i:e.top+Number(i)),this},moveTo:function(t,i){var e,n=1<arguments.length&&void 0!==i?i:t,s=this.imageData;return t=Number(t),n=Number(n),this.viewed&&!this.played&&this.options.movable&&(e=!1,G(t)&&(s.left=t,e=!0),G(n)&&(s.top=n,e=!0),e&&this.renderImage()),this},zoom:function(t,i,e){var n=1<arguments.length&&void 0!==i&&i,s=2<arguments.length&&void 0!==e?e:null,o=this.imageData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(o.width*t/o.naturalWidth,n,s),this},zoomTo:function(t,i,e,n){var s,o,a,r,h,l,c,d=this,u=1<arguments.length&&void 0!==i&&i,m=2<arguments.length&&void 0!==e?e:null,g=3<arguments.length&&void 0!==n&&n,f=this.element,v=this.options,p=this.pointers,w=this.imageData,b=w.width,y=w.height,x=w.left,k=w.top,z=w.naturalWidth,D=w.naturalHeight;if(G(t=Math.max(0,t))&&this.viewed&&!this.played&&(g||v.zoomable)){g||(s=Math.max(.01,v.minZoomRatio),o=Math.min(100,v.maxZoomRatio),t=Math.min(Math.max(t,s),o)),m&&.95<t&&t<1.05&&(t=1);var T,E,I=z*t,S=D*t,C=I-b,L=S-y,N=b/z;if(et(v.zoom)&&kt(f,"zoom",v.zoom,{once:!0}),!1===zt(f,"zoom",{ratio:t,oldRatio:N,originalEvent:m}))return this;this.zooming=!0,m?(l=this.viewer,T={left:(c=l.getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:c.top+(window.pageYOffset-document.documentElement.clientTop)},E=p&&Object.keys(p).length?(h=r=a=0,nt(p,function(t){var i=t.startX,e=t.startY;a+=i,r+=e,h+=1}),{pageX:a/=h,pageY:r/=h}):{pageX:m.pageX,pageY:m.pageY},w.left-=(E.pageX-T.left-x)/b*C,w.top-=(E.pageY-T.top-k)/y*L):(w.left-=C/2,w.top-=L/2),w.width=I,w.height=S,w.ratio=t,this.renderImage(function(){d.zooming=!1,et(v.zoomed)&&kt(f,"zoomed",v.zoomed,{once:!0}),zt(f,"zoomed",{ratio:t,oldRatio:N,originalEvent:m})}),u&&this.tooltip()}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var i=this.imageData;return G(t=Number(t))&&this.viewed&&!this.played&&this.options.rotatable&&(i.rotate=t,this.renderImage()),this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t,i){var e,n=1<arguments.length&&void 0!==i?i:t,s=this.imageData;return t=Number(t),n=Number(n),this.viewed&&!this.played&&this.options.scalable&&(e=!1,G(t)&&(s.scaleX=t,e=!0),G(n)&&(s.scaleY=n,e=!0),e&&this.renderImage()),this},play:function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var e,s=this.options,o=this.player,a=this.loadImage.bind(this),r=[],h=0,l=0;return this.played=!0,this.onLoadWhenPlay=a,t&&this.requestFullscreen(),lt(o,b),nt(this.items,function(t,i){var e=t.querySelector("img"),n=document.createElement("img");n.src=gt(e,"originalUrl"),n.alt=rt(e.getAttribute("alt")),h+=1,lt(n,k),dt(n,I,s.transition),ht(t,g)&&(lt(n,f),l=i),r.push(n),kt(n,M,a,{once:!0}),o.appendChild(n)}),G(s.interval)&&0<s.interval&&(e=function t(){i.playing=setTimeout(function(){ct(r[l],f),lt(r[l=(l+=1)<h?l:0],f),t()},s.interval)},1<h&&e()),this},stop:function(){var i=this;if(!this.played)return this;var t=this.player;return this.played=!1,clearTimeout(this.playing),nt(t.getElementsByTagName("img"),function(t){xt(t,M,i.onLoadWhenPlay)}),ct(t,b),t.innerHTML="",this.exitFullscreen(),this},full:function(){var t=this,i=this.options,e=this.viewer,n=this.image,s=this.list;return!this.isShown||this.played||this.fulled||!i.inline||(this.fulled=!0,this.open(),lt(this.button,r),i.transition&&(ct(s,I),this.viewed&&ct(n,I)),lt(e,z),e.setAttribute("style",""),at(e,{zIndex:i.zIndex}),this.initContainer(),this.viewerData=st({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){i.transition&&setTimeout(function(){lt(n,I),lt(s,I)},0)})})),this},exit:function(){var t=this,i=this.options,e=this.viewer,n=this.image,s=this.list;return this.isShown&&!this.played&&this.fulled&&i.inline&&(this.fulled=!1,this.close(),ct(this.button,r),i.transition&&(ct(s,I),this.viewed&&ct(n,I)),ct(e,z),at(e,{zIndex:i.zIndexInline}),this.viewerData=st({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){t.renderImage(function(){i.transition&&setTimeout(function(){lt(n,I),lt(s,I)},0)})})),this},tooltip:function(){var t=this,i=this.options,e=this.tooltipBox,n=this.imageData;return this.viewed&&!this.played&&i.tooltip&&(e.textContent="".concat(Math.round(100*n.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&zt(e,H),lt(e,b),lt(e,k),lt(e,I),e.offsetWidth,lt(e,f)):lt(e,b),this.tooltipping=setTimeout(function(){i.transition?(kt(e,H,function(){ct(e,b),ct(e,k),ct(e,I),t.fading=!1},{once:!0}),ct(e,f),t.fading=!0):ct(e,b),t.tooltipping=!1},1e3)),this},toggle:function(){return 1===this.imageData.ratio?this.zoomTo(this.initialImageData.ratio,!0):this.zoomTo(1,!0),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=st({},this.initialImageData),this.renderImage()),this},update:function(){var t=this.element,i=this.options,e=this.isImg;if(e&&!t.parentNode)return this.destroy();var s,n,o=[];return nt(e?[t]:t.querySelectorAll("img"),function(t){(!i.filter||i.filter(t))&&o.push(t)}),o.length&&(this.images=o,this.length=o.length,this.ready?(s=[],nt(this.items,function(t,i){var e=t.querySelector("img"),n=o[i];n&&n.src===e.src||s.push(i)}),at(this.list,{width:"auto"}),this.initList(),this.isShown&&(this.length?this.viewed&&(0<=(n=s.indexOf(this.index))?(this.viewed=!1,this.view(Math.max(this.index-(n+1),0))):lt(this.items[this.index],g)):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))):this.build()),this},destroy:function(){var t=this.element,i=this.options;return t[y]&&(this.destroyed=!0,this.ready?(this.played&&this.stop(),i.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):i.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),i.inline||xt(t,S,this.onStart),t[y]=void 0),this}},qt={open:function(){var t=this.body;lt(t,w),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyPaddingRight)||0),"px")},close:function(){var t=this.body;ct(t,w),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,i=this.options;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,et(i.shown)&&kt(t,P,i.shown,{once:!0}),!1!==zt(t,P)&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var t=this.element,i=this.options;this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),lt(this.viewer,T),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(et(i.hidden)&&kt(t,N,i.hidden,{once:!0}),zt(t,N))},requestFullscreen:function(){var t,i=this.element.ownerDocument;this.fulled&&!(i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement)&&((t=i.documentElement).requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var i,e,h,n=this.options,s=this.pointers,o=s[Object.keys(s)[0]],a=o.endX-o.startX,r=o.endY-o.startY;switch(this.action){case c:this.move(a,r);break;case u:this.zoom((e=st({},i=s),h=[],nt(i,function(r,t){delete e[t],nt(e,function(t){var i=Math.abs(r.startX-t.startX),e=Math.abs(r.startY-t.startY),n=Math.abs(r.endX-t.endX),s=Math.abs(r.endY-t.endY),o=Math.sqrt(i*i+e*e),a=(Math.sqrt(n*n+s*s)-o)/o;h.push(a)})}),h.sort(function(t,i){return Math.abs(t)<Math.abs(i)}),h[0]),!1,t);break;case d:this.action="switched";var l=Math.abs(a);1<l&&l>Math.abs(r)&&(this.pointers={},1<a?this.prev(n.loop):a<-1&&this.next(n.loop))}nt(s,function(t){t.startX=t.endX,t.startY=t.endY})},isSwitchable:function(){var t=this.imageData,i=this.viewerData;return 1<this.length&&0<=t.left&&0<=t.top&&t.width<=i.width&&t.height<=i.height}},Mt=e.Viewer,Yt=function(){function e(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=st({},o,it(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1;this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.init()}var t,i,n;return t=e,n=[{key:"noConflict",value:function(){return window.Viewer=Mt,e}},{key:"setDefaults",value:function(t){st(o,it(t)&&t)}}],(i=[{key:"init",value:function(){var t,i,e,n,s,o,a=this,r=this.element,h=this.options;r[y]||(r[y]=this,t="img"===r.tagName.toLowerCase(),i=[],nt(t?[r]:r.querySelectorAll("img"),function(t){(!et(h.filter)||h.filter.call(a,t))&&i.push(t)}),this.isImg=t,this.length=i.length,this.images=i,n=(e=r.ownerDocument).body||e.documentElement,this.body=n,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=window.getComputedStyle(n).paddingRight,J(document.createElement(y).style.transition)&&(h.transition=!1),h.inline?(s=0,o=function(){var t;(s+=1)===a.length&&(a.initializing=!1,a.delaying={abort:function(){clearTimeout(t)}},t=setTimeout(function(){a.delaying=!1,a.build()},0))},this.initializing={abort:function(){nt(i,function(t){t.complete||xt(t,M,o)})}},nt(i,function(t){t.complete?o():kt(t,M,o,{once:!0})})):kt(r,S,this.onStart=function(t){var i=t.target;"img"!==i.tagName.toLowerCase()||et(h.filter)&&!h.filter.call(a,i)||a.view(a.images.indexOf(i))}))}},{key:"build",value:function(){var t,h,i,e,n,s,o,a,r,l,c,d,u,m,g,f,v,p,w,b;this.ready||(t=this.element,h=this.options,i=t.parentNode,(e=document.createElement("div")).innerHTML='<div class="viewer-container" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-toolbar-nav"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div role="button" class="viewer-button" data-viewer-action="mix"></div><div class="viewer-player"></div></div>',s=(n=e.querySelector(".".concat(y,"-container"))).querySelector(".".concat(y,"-title")),o=n.querySelector(".".concat(y,"-toolbar")),a=n.querySelector(".".concat(y,"-toolbar-nav")),r=n.querySelector(".".concat(y,"-navbar")),l=n.querySelector(".".concat(y,"-button")),c=n.querySelector(".".concat(y,"-canvas")),this.parent=i,this.viewer=n,this.title=s,this.toolbar=o,this.navbar=r,this.button=l,this.canvas=c,this.footer=n.querySelector(".".concat(y,"-footer")),this.tooltipBox=n.querySelector(".".concat(y,"-tooltip")),this.player=n.querySelector(".".concat(y,"-player")),this.list=n.querySelector(".".concat(y,"-list")),lt(s,h.title?It(Array.isArray(h.title)?h.title[0]:h.title):T),lt(r,h.navbar?It(h.navbar):T),dt(l,T,!h.button),h.backdrop&&(lt(n,"".concat(y,"-backdrop")),h.inline||"static"===h.backdrop||ft(c,K,"hide")),$(h.className)&&h.className&&h.className.split(U).forEach(function(t){lt(n,t)}),h.toolbar?(d=document.createElement("ul"),u=it(h.toolbar),m=Z.slice(0,3),g=Z.slice(7,9),f=Z.slice(9),u||lt(o,It(h.toolbar)),nt(u?h.toolbar:Z,function(t,i){var e,n,s,o=u&&it(t),a=u?mt(i):t,r=o&&!J(t.show)?t.show:t;!r||!h.zoomable&&-1!==m.indexOf(a)||!h.rotatable&&-1!==g.indexOf(a)||!h.scalable&&-1!==f.indexOf(a)||(e=o&&!J(t.size)?t.size:t,n=o&&!J(t.click)?t.click:t,(s=document.createElement("li")).setAttribute("role","button"),lt(s,"".concat(y,"-").concat(a)),et(n)||ft(s,K,a),G(r)&&lt(s,It(r)),-1!==["small","large"].indexOf(e)?lt(s,"".concat(y,"-").concat(e)):"play"===a&&lt(s,"".concat(y,"-large")),et(n)&&kt(s,S,n),d.appendChild(s))}),o.appendChild(d),v=[Z[4],Z[6]],(p=document.createElement("div")).className="".concat(y,"-toolbar-nav-inner"),nt(v,function(t,i){var e=document.createElement("span");e.setAttribute("role","button"),lt(e,"".concat(y,"-").concat(t)),ft(e,K,t),p.appendChild(e)}),a.appendChild(p)):lt(o,T),h.rotatable||(lt(w=o.querySelectorAll('li[class*="rotate"]'),E),nt(w,function(t){o.appendChild(t)})),h.inline?(lt(l,D),at(n,{zIndex:h.zIndexInline}),"static"===window.getComputedStyle(i).position&&at(i,{position:"relative"}),i.insertBefore(n,t.nextSibling)):(lt(l,x),lt(n,z),lt(n,k),lt(n,T),at(n,{zIndex:h.zIndex}),$(b=h.container)&&(b=t.ownerDocument.querySelector(b)),(b=b||this.body).appendChild(n)),h.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,et(h.ready)&&kt(t,O,h.ready,{once:!0}),!1!==zt(t,O)?this.ready&&h.inline&&this.view(this.index):this.ready=!1)}}])&&s(t.prototype,i),n&&s(t,n),e}();return st(Yt.prototype,Ct,Lt,Nt,Rt,qt),Yt});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery"),require("viewerjs")):"function"==typeof define&&define.amd?define(["jquery","viewerjs"],t):t(e.jQuery,e.Viewer)}(this,function(d,v){"use strict";var e,c;d=d&&d.hasOwnProperty("default")?d.default:d,v=v&&v.hasOwnProperty("default")?v.default:v,d.fn&&(e=d.fn.viewer,c="viewer",d.fn.viewer=function(o){for(var e=arguments.length,u=Array(1<e?e-1:0),t=1;t<e;t++)u[t-1]=arguments[t];var s=void 0;return this.each(function(e,t){var r,n=d(t),i="destroy"===o;if(!(a=n.data(c))){if(i)return;var f=d.extend({},n.data(),d.isPlainObject(o)&&o),a=new v(t,f);n.data(c,a)}"string"==typeof o&&(r=a[o],d.isFunction(r)&&((s=r.apply(a,u))===a&&(s=void 0),i&&n.removeData(c)))}),void 0!==s?s:this},d.fn.viewer.Constructor=v,d.fn.viewer.setDefaults=v.setDefaults,d.fn.viewer.noConflict=function(){return d.fn.viewer=e,this})});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Swiper=t()}(this,function(){"use strict";var m="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,ee="undefined"==typeof window?{document:m,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,l=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function I(e,t){var a=[],i=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){var s,r,n=e.trim();if(0<=n.indexOf("<")&&0<=n.indexOf(">")){var o="div";for(0===n.indexOf("<li")&&(o="ul"),0===n.indexOf("<tr")&&(o="tbody"),0!==n.indexOf("<td")&&0!==n.indexOf("<th")||(o="tr"),0===n.indexOf("<tbody")&&(o="table"),0===n.indexOf("<option")&&(o="select"),(r=m.createElement(o)).innerHTML=n,i=0;i<r.childNodes.length;i+=1)a.push(r.childNodes[i])}else for(s=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||m).querySelectorAll(e.trim()):[m.getElementById(e.trim().split("#")[1])],i=0;i<s.length;i+=1)s[i]&&a.push(s[i])}else if(e.nodeType||e===ee||e===m)a.push(e);else if(0<e.length&&e[0].nodeType)for(i=0;i<e.length;i+=1)a.push(e[i]);return new l(a)}function r(e){for(var t=[],a=0;a<e.length;a+=1)-1===t.indexOf(e[a])&&t.push(e[a]);return t}I.fn=l.prototype,I.Class=l,I.Dom7=l;var t={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.add(t[a]);return this},removeClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.remove(t[a]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),a=0;a<t.length;a+=1)for(var i=0;i<this.length;i+=1)void 0!==this[i]&&void 0!==this[i].classList&&this[i].classList.toggle(t[a]);return this},attr:function(e,t){var a=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var i=0;i<this.length;i+=1)if(2===a.length)this[i].setAttribute(e,t);else for(var s in e)this[i][s]=e[s],this[i].setAttribute(s,e[s]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var a;if(void 0!==t){for(var i=0;i<this.length;i+=1)(a=this[i]).dom7ElementDataStorage||(a.dom7ElementDataStorage={}),a.dom7ElementDataStorage[e]=t;return this}if(a=this[0])return a.dom7ElementDataStorage&&e in a.dom7ElementDataStorage?a.dom7ElementDataStorage[e]:a.getAttribute("data-"+e)||void 0},transform:function(e){for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransform=e,a.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var a=this[t].style;a.webkitTransitionDuration=e,a.transitionDuration=e}return this},on:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a=e[0],r=e[1],n=e[2],i=e[3];function s(e){var t=e.target;if(t){var a=e.target.dom7EventData||[];if(a.indexOf(e)<0&&a.unshift(e),I(t).is(r))n.apply(t,a);else for(var i=I(t).parents(),s=0;s<i.length;s+=1)I(i[s]).is(r)&&n.apply(i[s],a)}}function o(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),n.apply(this,t)}"function"==typeof e[1]&&(a=e[0],n=e[1],i=e[2],r=void 0),i=i||!1;for(var l,d=a.split(" "),p=0;p<this.length;p+=1){var c=this[p];if(r)for(l=0;l<d.length;l+=1){var u=d[l];c.dom7LiveListeners||(c.dom7LiveListeners={}),c.dom7LiveListeners[u]||(c.dom7LiveListeners[u]=[]),c.dom7LiveListeners[u].push({listener:n,proxyListener:s}),c.addEventListener(u,s,i)}else for(l=0;l<d.length;l+=1){var h=d[l];c.dom7Listeners||(c.dom7Listeners={}),c.dom7Listeners[h]||(c.dom7Listeners[h]=[]),c.dom7Listeners[h].push({listener:n,proxyListener:o}),c.addEventListener(h,o,i)}}return this},off:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a=e[0],i=e[1],s=e[2],r=e[3];"function"==typeof e[1]&&(a=e[0],s=e[1],r=e[2],i=void 0),r=r||!1;for(var n=a.split(" "),o=0;o<n.length;o+=1)for(var l=n[o],d=0;d<this.length;d+=1){var p=this[d],c=void 0;if(!i&&p.dom7Listeners?c=p.dom7Listeners[l]:i&&p.dom7LiveListeners&&(c=p.dom7LiveListeners[l]),c&&c.length)for(var u=c.length-1;0<=u;--u){var h=c[u];(s&&h.listener===s||s&&h.listener&&h.listener.dom7proxy&&h.listener.dom7proxy===s||!s)&&(p.removeEventListener(l,h.proxyListener,r),c.splice(u,1))}}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=e[0].split(" "),i=e[1],s=0;s<a.length;s+=1)for(var r=a[s],n=0;n<this.length;n+=1){var o=this[n],l=void 0;try{l=new ee.CustomEvent(r,{detail:i,bubbles:!0,cancelable:!0})}catch(e){(l=m.createEvent("Event")).initEvent(r,!0,!0),l.detail=i}o.dom7EventData=e.filter(function(e,t){return 0<t}),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(t){var a,i=["webkitTransitionEnd","transitionend"],s=this;function r(e){if(e.target===this)for(t.call(this,e),a=0;a<i.length;a+=1)s.off(i[a],r)}if(t)for(a=0;a<i.length;a+=1)s.on(i[a],r);return this},outerWidth:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var e=this[0],t=e.getBoundingClientRect(),a=m.body,i=e.clientTop||a.clientTop||0,s=e.clientLeft||a.clientLeft||0,r=e===ee?ee.scrollY:e.scrollTop,n=e===ee?ee.scrollX:e.scrollLeft;return{top:t.top+r-i,left:t.left+n-s}}return null},css:function(e,t){var a;if(1===arguments.length){if("string"!=typeof e){for(a=0;a<this.length;a+=1)for(var i in e)this[a].style[i]=e[i];return this}if(this[0])return ee.getComputedStyle(this[0],null).getPropertyValue(e)}if(2!==arguments.length||"string"!=typeof e)return this;for(a=0;a<this.length;a+=1)this[a].style[e]=t;return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,a,i=this[0];if(!i||void 0===e)return!1;if("string"==typeof e){if(i.matches)return i.matches(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);for(t=I(e),a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}if(e===m)return i===m;if(e===ee)return i===ee;if(e.nodeType||e instanceof l){for(t=e.nodeType?[e]:e,a=0;a<t.length;a+=1)if(t[a]===i)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,a=this.length;return new l(a-1<e?[]:e<0?(t=a+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];for(var i=0;i<t.length;i+=1){e=t[i];for(var s=0;s<this.length;s+=1)if("string"==typeof e){var r=m.createElement("div");for(r.innerHTML=e;r.firstChild;)this[s].appendChild(r.firstChild)}else if(e instanceof l)for(var n=0;n<e.length;n+=1)this[s].appendChild(e[n]);else this[s].appendChild(e)}return this},prepend:function(e){for(var t,a=0;a<this.length;a+=1)if("string"==typeof e){var i=m.createElement("div");for(i.innerHTML=e,t=i.childNodes.length-1;0<=t;--t)this[a].insertBefore(i.childNodes[t],this[a].childNodes[0])}else if(e instanceof l)for(t=0;t<e.length;t+=1)this[a].insertBefore(e[t],this[a].childNodes[0]);else this[a].insertBefore(e,this[a].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&I(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.nextElementSibling;){var i=a.nextElementSibling;e&&!I(i).is(e)||t.push(i),a=i}return new l(t)},prev:function(e){if(0<this.length){var t=this[0];return e?t.previousElementSibling&&I(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])}return new l([])},prevAll:function(e){var t=[],a=this[0];if(!a)return new l([]);for(;a.previousElementSibling;){var i=a.previousElementSibling;e&&!I(i).is(e)||t.push(i),a=i}return new l(t)},parent:function(e){for(var t=[],a=0;a<this.length;a+=1)null===this[a].parentNode||e&&!I(this[a].parentNode).is(e)||t.push(this[a].parentNode);return I(r(t))},parents:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].parentNode;i;)e&&!I(i).is(e)||t.push(i),i=i.parentNode;return I(r(t))},closest:function(e){var t=this;return void 0===e?new l([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].querySelectorAll(e),s=0;s<i.length;s+=1)t.push(i[s]);return new l(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var i=this[a].childNodes,s=0;s<i.length;s+=1)e?1===i[s].nodeType&&I(i[s]).is(e)&&t.push(i[s]):1===i[s].nodeType&&t.push(i[s]);return new l(r(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];for(e=0;e<t.length;e+=1)for(var i=I(t[e]),s=0;s<i.length;s+=1)this[this.length]=i[s],this.length+=1;return this},styles:function(){return this[0]?ee.getComputedStyle(this[0],null):{}}};function e(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})}Object.keys(t).forEach(function(e){I.fn[e]=I.fn[e]||t[e]});var a,i,s,n,te={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){var a,i,s;void 0===t&&(t="x");var r=ee.getComputedStyle(e,null);return ee.WebKitCSSMatrix?(6<(i=r.transform||r.webkitTransform).split(",").length&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),s=new ee.WebKitCSSMatrix("none"===i?"":i)):a=(s=r.MozTransform||r.OTransform||r.MsTransform||r.msTransform||r.transform||r.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(i=ee.WebKitCSSMatrix?s.m41:16===a.length?parseFloat(a[12]):parseFloat(a[4])),"y"===t&&(i=ee.WebKitCSSMatrix?s.m42:16===a.length?parseFloat(a[13]):parseFloat(a[5])),i||0},parseUrlQuery:function(e){var t,a,i,s,r={},n=e||ee.location.href;if("string"==typeof n&&n.length)for(s=(a=(n=-1<n.indexOf("?")?n.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<s;t+=1)i=a[t].replace(/#\S+/g,"").split("="),r[decodeURIComponent(i[0])]=void 0===i[1]?void 0:decodeURIComponent(i[1])||"";return r},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var a=Object(e[0]),i=1;i<e.length;i+=1){var s=e[i];if(null!=s)for(var r=Object.keys(Object(s)),n=0,o=r.length;n<o;n+=1){var l=r[n],d=Object.getOwnPropertyDescriptor(s,l);void 0!==d&&d.enumerable&&(te.isObject(a[l])&&te.isObject(s[l])?te.extend(a[l],s[l]):!te.isObject(a[l])&&te.isObject(s[l])?(a[l]={},te.extend(a[l],s[l])):a[l]=s[l])}}return a}},ae=(s=m.createElement("div"),{touch:ee.Modernizr&&!0===ee.Modernizr.touch||!!(0<ee.navigator.maxTouchPoints||"ontouchstart"in ee||ee.DocumentTouch&&m instanceof ee.DocumentTouch),pointerEvents:!!(ee.navigator.pointerEnabled||ee.PointerEvent||"maxTouchPoints"in ee.navigator&&0<ee.navigator.maxTouchPoints),prefixedPointerEvents:!!ee.navigator.msPointerEnabled,transition:"transition"in(i=s.style)||"webkitTransition"in i||"MozTransition"in i,transforms3d:ee.Modernizr&&!0===ee.Modernizr.csstransforms3d||("webkitPerspective"in(a=s.style)||"MozPerspective"in a||"OPerspective"in a||"MsPerspective"in a||"perspective"in a),flexbox:function(){for(var e=s.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),a=0;a<t.length;a+=1)if(t[a]in e)return!0;return!1}(),observer:"MutationObserver"in ee||"WebkitMutationObserver"in ee,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});ee.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in ee}),ie={isIE:!!ee.navigator.userAgent.match(/Trident/g)||!!ee.navigator.userAgent.match(/MSIE/g),isEdge:!!ee.navigator.userAgent.match(/Edge/g),isSafari:0<=(n=ee.navigator.userAgent.toLowerCase()).indexOf("safari")&&n.indexOf("chrome")<0&&n.indexOf("android")<0,isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(ee.navigator.userAgent)},o={components:{configurable:!0}};e.prototype.on=function(e,t,a){var i=this;if("function"!=typeof t)return i;var s=a?"unshift":"push";return e.split(" ").forEach(function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][s](t)}),i},e.prototype.once=function(a,i,e){var s=this;if("function"!=typeof i)return s;function r(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];i.apply(s,e),s.off(a,r),r.f7proxy&&delete r.f7proxy}return r.f7proxy=i,s.on(a,r,e)},e.prototype.off=function(e,i){var s=this;return s.eventsListeners&&e.split(" ").forEach(function(a){void 0===i?s.eventsListeners[a]=[]:s.eventsListeners[a]&&s.eventsListeners[a].length&&s.eventsListeners[a].forEach(function(e,t){(e===i||e.f7proxy&&e.f7proxy===i)&&s.eventsListeners[a].splice(t,1)})}),s},e.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var a,i,s,r=this;return r.eventsListeners&&(s="string"==typeof e[0]||Array.isArray(e[0])?(a=e[0],i=e.slice(1,e.length),r):(a=e[0].events,i=e[0].data,e[0].context||r),(Array.isArray(a)?a:a.split(" ")).forEach(function(e){var t;r.eventsListeners&&r.eventsListeners[e]&&(t=[],r.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(s,i)}))})),r},e.prototype.useModulesParams=function(a){var i=this;i.modules&&Object.keys(i.modules).forEach(function(e){var t=i.modules[e];t.params&&te.extend(a,t.params)})},e.prototype.useModules=function(i){void 0===i&&(i={});var s=this;s.modules&&Object.keys(s.modules).forEach(function(e){var a=s.modules[e],t=i[e]||{};a.instance&&Object.keys(a.instance).forEach(function(e){var t=a.instance[e];s[e]="function"==typeof t?t.bind(s):t}),a.on&&s.on&&Object.keys(a.on).forEach(function(e){s.on(e,a.on[e])}),a.create&&a.create.bind(s)(t)})},o.components.set=function(e){this.use&&this.use(e)},e.installModule=function(t){for(var e=[],a=arguments.length-1;0<a--;)e[a]=arguments[a+1];var i=this;i.prototype.modules||(i.prototype.modules={});var s=t.name||Object.keys(i.prototype.modules).length+"_"+te.now();return(i.prototype.modules[s]=t).proto&&Object.keys(t.proto).forEach(function(e){i.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){i[e]=t.static[e]}),t.install&&t.install.apply(i,e),i},e.use=function(e){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];var i=this;return Array.isArray(e)?(e.forEach(function(e){return i.installModule(e)}),i):i.installModule.apply(i,[e].concat(t))},Object.defineProperties(e,o);var d,p,c,u,h,v,f,g,b,w={updateSize:function(){var e=this,t=e.$el,a=void 0!==e.params.width?e.params.width:t[0].clientWidth,i=void 0!==e.params.height?e.params.height:t[0].clientHeight;0===a&&e.isHorizontal()||0===i&&e.isVertical()||(a=a-parseInt(t.css("padding-left"),10)-parseInt(t.css("padding-right"),10),i=i-parseInt(t.css("padding-top"),10)-parseInt(t.css("padding-bottom"),10),te.extend(e,{width:a,height:i,size:e.isHorizontal()?a:i}))},updateSlides:function(){var e=this,t=e.params,a=e.$wrapperEl,i=e.size,s=e.rtlTranslate,r=e.wrongRTL,n=e.virtual&&t.virtual.enabled,o=n?e.virtual.slides.length:e.slides.length,l=a.children("."+e.params.slideClass),d=n?e.virtual.slides.length:l.length,p=[],c=[],u=[],h=t.slidesOffsetBefore;"function"==typeof h&&(h=t.slidesOffsetBefore.call(e));var v=t.slidesOffsetAfter;"function"==typeof v&&(v=t.slidesOffsetAfter.call(e));var f,m=e.snapGrid.length,g=e.snapGrid.length,b=t.spaceBetween,w=-h,y=0,x=0;if(void 0!==i){"string"==typeof b&&0<=b.indexOf("%")&&(b=parseFloat(b.replace("%",""))/100*i),e.virtualSize=-b,s?l.css({marginLeft:"",marginTop:""}):l.css({marginRight:"",marginBottom:""}),1<t.slidesPerColumn&&(f=Math.floor(d/t.slidesPerColumn)===d/e.params.slidesPerColumn?d:Math.ceil(d/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(f=Math.max(f,t.slidesPerView*t.slidesPerColumn)));for(var T,E,S,C=t.slidesPerColumn,M=f/C,P=Math.floor(d/t.slidesPerColumn),k=0;k<d;k+=1){Y=0;var z,$,I,L,D,O,A,H,G,N,B,X,V,Y,F,R,q,W,j,U,K=l.eq(k);1<t.slidesPerColumn&&($=L=z=void 0,"column"===t.slidesPerColumnFill||"row"===t.slidesPerColumnFill&&1<t.slidesPerGroup?("column"===t.slidesPerColumnFill?($=k-(L=Math.floor(k/C))*C,(P<L||L===P&&$===C-1)&&C<=($+=1)&&($=0,L+=1)):(I=Math.floor(k/t.slidesPerGroup),L=k-($=Math.floor(k/t.slidesPerView)-I*t.slidesPerColumn)*t.slidesPerView-I*t.slidesPerView),z=L+$*f/C,K.css({"-webkit-box-ordinal-group":z,"-moz-box-ordinal-group":z,"-ms-flex-order":z,"-webkit-order":z,order:z})):L=k-($=Math.floor(k/M))*M,K.css("margin-"+(e.isHorizontal()?"top":"left"),0!==$&&t.spaceBetween&&t.spaceBetween+"px").attr("data-swiper-column",L).attr("data-swiper-row",$)),"none"!==K.css("display")&&("auto"===t.slidesPerView?(D=ee.getComputedStyle(K[0],null),O=K[0].style.transform,A=K[0].style.webkitTransform,O&&(K[0].style.transform="none"),A&&(K[0].style.webkitTransform="none"),Y=t.roundLengths?e.isHorizontal()?K.outerWidth(!0):K.outerHeight(!0):e.isHorizontal()?(H=parseFloat(D.getPropertyValue("width")),G=parseFloat(D.getPropertyValue("padding-left")),N=parseFloat(D.getPropertyValue("padding-right")),B=parseFloat(D.getPropertyValue("margin-left")),X=parseFloat(D.getPropertyValue("margin-right")),(V=D.getPropertyValue("box-sizing"))&&"border-box"===V&&!ie.isIE?H+B+X:H+G+N+B+X):(F=parseFloat(D.getPropertyValue("height")),R=parseFloat(D.getPropertyValue("padding-top")),q=parseFloat(D.getPropertyValue("padding-bottom")),W=parseFloat(D.getPropertyValue("margin-top")),j=parseFloat(D.getPropertyValue("margin-bottom")),(U=D.getPropertyValue("box-sizing"))&&"border-box"===U&&!ie.isIE?F+W+j:F+R+q+W+j),O&&(K[0].style.transform=O),A&&(K[0].style.webkitTransform=A),t.roundLengths&&(Y=Math.floor(Y))):(Y=(i-(t.slidesPerView-1)*b)/t.slidesPerView,t.roundLengths&&(Y=Math.floor(Y)),l[k]&&(e.isHorizontal()?l[k].style.width=Y+"px":l[k].style.height=Y+"px")),l[k]&&(l[k].swiperSlideSize=Y),u.push(Y),t.centeredSlides?(w=w+Y/2+y/2+b,0===y&&0!==k&&(w=w-i/2-b),0===k&&(w=w-i/2-b),Math.abs(w)<.001&&(w=0),t.roundLengths&&(w=Math.floor(w)),x%t.slidesPerGroup==0&&p.push(w),c.push(w)):(t.roundLengths&&(w=Math.floor(w)),x%t.slidesPerGroup==0&&p.push(w),c.push(w),w=w+Y+b),e.virtualSize+=Y+b,y=Y,x+=1)}if(e.virtualSize=Math.max(e.virtualSize,i)+v,s&&r&&("slide"===t.effect||"coverflow"===t.effect)&&a.css({width:e.virtualSize+t.spaceBetween+"px"}),ae.flexbox&&!t.setWrapperSize||(e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"})),1<t.slidesPerColumn&&(e.virtualSize=(Y+t.spaceBetween)*f,e.virtualSize=Math.ceil(e.virtualSize/t.slidesPerColumn)-t.spaceBetween,e.isHorizontal()?a.css({width:e.virtualSize+t.spaceBetween+"px"}):a.css({height:e.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){T=[];for(var _=0;_<p.length;_+=1){var Z=p[_];t.roundLengths&&(Z=Math.floor(Z)),p[_]<e.virtualSize+p[0]&&T.push(Z)}p=T}if(!t.centeredSlides){T=[];for(var Q=0;Q<p.length;Q+=1){var J=p[Q];t.roundLengths&&(J=Math.floor(J)),p[Q]<=e.virtualSize-i&&T.push(J)}p=T,1<Math.floor(e.virtualSize-i)-Math.floor(p[p.length-1])&&p.push(e.virtualSize-i)}0===p.length&&(p=[0]),0!==t.spaceBetween&&(e.isHorizontal()?s?l.css({marginLeft:b+"px"}):l.css({marginRight:b+"px"}):l.css({marginBottom:b+"px"})),t.centerInsufficientSlides&&(E=0,u.forEach(function(e){E+=e+(t.spaceBetween?t.spaceBetween:0)}),(E-=t.spaceBetween)<i&&(S=(i-E)/2,p.forEach(function(e,t){p[t]=e-S}),c.forEach(function(e,t){c[t]=e+S}))),te.extend(e,{slides:l,snapGrid:p,slidesGrid:c,slidesSizesGrid:u}),d!==o&&e.emit("slidesLengthChange"),p.length!==m&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),c.length!==g&&e.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,a,i=this,s=[],r=0;if("number"==typeof e?i.setTransition(e):!0===e&&i.setTransition(i.params.speed),"auto"!==i.params.slidesPerView&&1<i.params.slidesPerView)for(t=0;t<Math.ceil(i.params.slidesPerView);t+=1){var n=i.activeIndex+t;if(n>i.slides.length)break;s.push(i.slides.eq(n)[0])}else s.push(i.slides.eq(i.activeIndex)[0]);for(t=0;t<s.length;t+=1){void 0!==s[t]&&(r=r<(a=s[t].offsetHeight)?a:r)}r&&i.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){var t=this,a=t.params;void 0===e&&(e=t&&t.translate||0);var i=t.slides,s=t.rtlTranslate;if(0!==i.length){void 0===i[0].swiperSlideOffset&&t.updateSlidesOffset();var r=s?e:-e;i.removeClass(a.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var n=0;n<i.length;n+=1){var o,l,d=i[n],p=(r+(a.centeredSlides?t.minTranslate():0)-d.swiperSlideOffset)/(d.swiperSlideSize+a.spaceBetween);a.watchSlidesVisibility&&(l=(o=-(r-d.swiperSlideOffset))+t.slidesSizesGrid[n],(0<=o&&o<t.size-1||1<l&&l<=t.size||o<=0&&l>=t.size)&&(t.visibleSlides.push(d),t.visibleSlidesIndexes.push(n),i.eq(n).addClass(a.slideVisibleClass))),d.progress=s?-p:p}t.visibleSlides=I(t.visibleSlides)}},updateProgress:function(e){var t,a=this,i=a.params;void 0===e&&(t=a.rtlTranslate?-1:1,e=a&&a.translate&&a.translate*t||0);var s=a.maxTranslate()-a.minTranslate(),r=a.progress,n=a.isBeginning,o=n,l=d=a.isEnd,d=0==s?n=!(r=0):(n=(r=(e-a.minTranslate())/s)<=0,1<=r);te.extend(a,{progress:r,isBeginning:n,isEnd:d}),(i.watchSlidesProgress||i.watchSlidesVisibility)&&a.updateSlidesProgress(e),n&&!o&&a.emit("reachBeginning toEdge"),d&&!l&&a.emit("reachEnd toEdge"),(o&&!n||l&&!d)&&a.emit("fromEdge"),a.emit("progress",r)},updateSlidesClasses:function(){var e,t=this,a=t.slides,i=t.params,s=t.$wrapperEl,r=t.activeIndex,n=t.realIndex,o=t.virtual&&i.virtual.enabled;a.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=o?t.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):a.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+n+'"]').addClass(i.slideDuplicateActiveClass));var l=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===l.length&&(l=a.eq(0)).addClass(i.slideNextClass);var d=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===d.length&&(d=a.eq(-1)).addClass(i.slidePrevClass),i.loop&&(l.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),d.hasClass(i.slideDuplicateClass)?s.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):s.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+d.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,a,i=this,s=i.rtlTranslate?i.translate:-i.translate,r=i.slidesGrid,n=i.snapGrid,o=i.params,l=i.activeIndex,d=i.realIndex,p=i.snapIndex,c=e;if(void 0===c){for(var u=0;u<r.length;u+=1)void 0!==r[u+1]?s>=r[u]&&s<r[u+1]-(r[u+1]-r[u])/2?c=u:s>=r[u]&&s<r[u+1]&&(c=u+1):s>=r[u]&&(c=u);o.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}(t=0<=n.indexOf(s)?n.indexOf(s):Math.floor(c/o.slidesPerGroup))>=n.length&&(t=n.length-1),c!==l?(a=parseInt(i.slides.eq(c).attr("data-swiper-slide-index")||c,10),te.extend(i,{snapIndex:t,realIndex:a,previousIndex:l,activeIndex:c}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),d!==a&&i.emit("realIndexChange"),(i.initialized||i.runCallbacksOnInit)&&i.emit("slideChange")):t!==p&&(i.snapIndex=t,i.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,a=t.params,i=I(e.target).closest("."+a.slideClass)[0],s=!1;if(i)for(var r=0;r<t.slides.length;r+=1)t.slides[r]===i&&(s=!0);if(!i||!s)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(I(i).attr("data-swiper-slide-index"),10):t.clickedIndex=I(i).index(),a.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}},y={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,a=this.rtlTranslate,i=this.translate,s=this.$wrapperEl;if(t.virtualTranslate)return a?-i:i;var r=te.getTranslate(s[0],e);return a&&(r=-r),r||0},setTranslate:function(e,t){var a=this,i=a.rtlTranslate,s=a.params,r=a.$wrapperEl,n=a.progress,o=0,l=0;a.isHorizontal()?o=i?-e:e:l=e,s.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),s.virtualTranslate||(ae.transforms3d?r.transform("translate3d("+o+"px, "+l+"px, 0px)"):r.transform("translate("+o+"px, "+l+"px)")),a.previousTranslate=a.translate,a.translate=a.isHorizontal()?o:l;var d=a.maxTranslate()-a.minTranslate();(0==d?0:(e-a.minTranslate())/d)!==n&&a.updateProgress(e),a.emit("setTranslate",a.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}},x={slideTo:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=this,r=e;r<0&&(r=0);var n=s.params,o=s.snapGrid,l=s.slidesGrid,d=s.previousIndex,p=s.activeIndex,c=s.rtlTranslate;if(s.animating&&n.preventInteractionOnTransition)return!1;var u=Math.floor(r/n.slidesPerGroup);u>=o.length&&(u=o.length-1),(p||n.initialSlide||0)===(d||0)&&a&&s.emit("beforeSlideChangeStart");var h,v=-o[u];if(s.updateProgress(v),n.normalizeSlideIndex)for(var f=0;f<l.length;f+=1)-Math.floor(100*v)>=Math.floor(100*l[f])&&(r=f);if(s.initialized&&r!==p){if(!s.allowSlideNext&&v<s.translate&&v<s.minTranslate())return!1;if(!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(p||0)!==r)return!1}return h=p<r?"next":r<p?"prev":"reset",c&&-v===s.translate||!c&&v===s.translate?(s.updateActiveIndex(r),n.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==n.effect&&s.setTranslate(v),"reset"!=h&&(s.transitionStart(a,h),s.transitionEnd(a,h)),!1):(0!==t&&ae.transition?(s.setTransition(t),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(a,h))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))):(s.setTransition(0),s.setTranslate(v),s.updateActiveIndex(r),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(a,h),s.transitionEnd(a,h)),!0)},slideToLoop:function(e,t,a,i){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===a&&(a=!0);var s=e;return this.params.loop&&(s+=this.loopedSlides),this.slideTo(s,t,a,i)},slideNext:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating;return s.loop?!r&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)):i.slideTo(i.activeIndex+s.slidesPerGroup,e,t,a)},slidePrev:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i=this,s=i.params,r=i.animating,n=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate;if(s.loop){if(r)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}function d(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var p,c=d(l?i.translate:-i.translate),u=n.map(d),h=(o.map(d),n[u.indexOf(c)],n[u.indexOf(c)-1]);return void 0!==h&&(p=o.indexOf(h))<0&&(p=i.activeIndex-1),i.slideTo(p,e,t,a)},slideReset:function(e,t,a){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,a)},slideToClosest:function(e,t,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var i,s,r=this,n=r.activeIndex,o=Math.floor(n/r.params.slidesPerGroup);return o<r.snapGrid.length-1&&(i=r.rtlTranslate?r.translate:-r.translate,s=r.snapGrid[o],(r.snapGrid[o+1]-s)/2<i-s&&(n=r.params.slidesPerGroup)),r.slideTo(n,e,t,a)},slideToClickedSlide:function(){var e,t=this,a=t.params,i=t.$wrapperEl,s="auto"===a.slidesPerView?t.slidesPerViewDynamic():a.slidesPerView,r=t.clickedIndex;if(a.loop){if(t.animating)return;e=parseInt(I(t.clickedSlide).attr("data-swiper-slide-index"),10),a.centeredSlides?r<t.loopedSlides-s/2||r>t.slides.length-t.loopedSlides+s/2?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),te.nextTick(function(){t.slideTo(r)})):t.slideTo(r):r>t.slides.length-s?(t.loopFix(),r=i.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+a.slideDuplicateClass+")").eq(0).index(),te.nextTick(function(){t.slideTo(r)})):t.slideTo(r)}else t.slideTo(r)}},T={loopCreate:function(){var i=this,e=i.params,t=i.$wrapperEl;t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove();var s=t.children("."+e.slideClass);if(e.loopFillGroupWithBlank){var a=e.slidesPerGroup-s.length%e.slidesPerGroup;if(a!==e.slidesPerGroup){for(var r=0;r<a;r+=1){var n=I(m.createElement("div")).addClass(e.slideClass+" "+e.slideBlankClass);t.append(n)}s=t.children("."+e.slideClass)}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=s.length),i.loopedSlides=parseInt(e.loopedSlides||e.slidesPerView,10),i.loopedSlides+=e.loopAdditionalSlides,i.loopedSlides>s.length&&(i.loopedSlides=s.length);var o=[],l=[];s.each(function(e,t){var a=I(t);e<i.loopedSlides&&l.push(t),e<s.length&&e>=s.length-i.loopedSlides&&o.push(t),a.attr("data-swiper-slide-index",e)});for(var d=0;d<l.length;d+=1)t.append(I(l[d].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var p=o.length-1;0<=p;--p)t.prepend(I(o[p].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var e,t=this,a=t.params,i=t.activeIndex,s=t.slides,r=t.loopedSlides,n=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,d=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var p=-l[i]-t.getTranslate();i<r?(e=s.length-3*r+i,e+=r,t.slideTo(e,0,!1,!0)&&0!=p&&t.setTranslate((d?-t.translate:t.translate)-p)):("auto"===a.slidesPerView&&2*r<=i||i>=s.length-r)&&(e=-s.length+i+r,e+=r,t.slideTo(e,0,!1,!0)&&0!=p&&t.setTranslate((d?-t.translate:t.translate)-p)),t.allowSlidePrev=n,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,a=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}},E={setGrabCursor:function(e){var t;ae.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked||((t=this.el).style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab")},unsetGrabCursor:function(){ae.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}},S={appendSlide:function(e){var t=this,a=t.$wrapperEl,i=t.params;if(i.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var s=0;s<e.length;s+=1)e[s]&&a.append(e[s]);else a.append(e);i.loop&&t.loopCreate(),i.observer&&ae.observer||t.update()},prependSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&t.loopDestroy();var r=s+1;if("object"==typeof e&&"length"in e){for(var n=0;n<e.length;n+=1)e[n]&&i.prepend(e[n]);r=s+e.length}else i.prepend(e);a.loop&&t.loopCreate(),a.observer&&ae.observer||t.update(),t.slideTo(r,0,!1)},addSlide:function(e,t){var a=this,i=a.$wrapperEl,s=a.params,r=a.activeIndex;s.loop&&(r-=a.loopedSlides,a.loopDestroy(),a.slides=i.children("."+s.slideClass));var n=a.slides.length;if(e<=0)a.prependSlide(t);else if(n<=e)a.appendSlide(t);else{for(var o=e<r?r+1:r,l=[],d=n-1;e<=d;--d){var p=a.slides.eq(d);p.remove(),l.unshift(p)}if("object"==typeof t&&"length"in t){for(var c=0;c<t.length;c+=1)t[c]&&i.append(t[c]);o=e<r?r+t.length:r}else i.append(t);for(var u=0;u<l.length;u+=1)i.append(l[u]);s.loop&&a.loopCreate(),s.observer&&ae.observer||a.update(),s.loop?a.slideTo(o+a.loopedSlides,0,!1):a.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,a=t.params,i=t.$wrapperEl,s=t.activeIndex;a.loop&&(s-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+a.slideClass));var r,n=s;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)r=e[o],t.slides[r]&&t.slides.eq(r).remove(),r<n&&--n;n=Math.max(n,0)}else r=e,t.slides[r]&&t.slides.eq(r).remove(),r<n&&--n,n=Math.max(n,0);a.loop&&t.loopCreate(),a.observer&&ae.observer||t.update(),a.loop?t.slideTo(n+t.loopedSlides,0,!1):t.slideTo(n,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},C=(c=ee.navigator.userAgent,u={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:ee.cordova||ee.phonegap,phonegap:ee.cordova||ee.phonegap},h=c.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),v=c.match(/(Android);?[\s\/]+([\d.]+)?/),f=c.match(/(iPad).*OS\s([\d_]+)/),g=c.match(/(iPod)(.*OS\s([\d_]+))?/),b=!f&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h&&(u.os="windows",u.osVersion=h[2],u.windows=!0),v&&!h&&(u.os="android",u.osVersion=v[2],u.android=!0,u.androidChrome=0<=c.toLowerCase().indexOf("chrome")),(f||b||g)&&(u.os="ios",u.ios=!0),b&&!g&&(u.osVersion=b[2].replace(/_/g,"."),u.iphone=!0),f&&(u.osVersion=f[2].replace(/_/g,"."),u.ipad=!0),g&&(u.osVersion=g[3]?g[3].replace(/_/g,"."):null,u.iphone=!0),u.ios&&u.osVersion&&0<=c.indexOf("Version/")&&"10"===u.osVersion.split(".")[0]&&(u.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),u.desktop=!(u.os||u.android||u.webView),u.webView=(b||f||g)&&c.match(/.*AppleWebKit(?!.*Safari)/i),u.os&&"ios"===u.os&&(d=u.osVersion.split("."),p=m.querySelector('meta[name="viewport"]'),u.minimalUi=!u.webView&&(g||b)&&(7==+d[0]?1<=+d[1]:7<+d[0])&&p&&0<=p.getAttribute("content").indexOf("minimal-ui")),u.pixelRatio=ee.devicePixelRatio||1,u);function M(){var e,t,a,i,s=this,r=s.params,n=s.el;n&&0===n.offsetWidth||(r.breakpoints&&s.setBreakpoint(),e=s.allowSlideNext,t=s.allowSlidePrev,a=s.snapGrid,s.allowSlideNext=!0,s.allowSlidePrev=!0,s.updateSize(),s.updateSlides(),r.freeMode?(i=Math.min(Math.max(s.translate,s.maxTranslate()),s.minTranslate()),s.setTranslate(i),s.updateActiveIndex(),s.updateSlidesClasses(),r.autoHeight&&s.updateAutoHeight()):(s.updateSlidesClasses(),("auto"===r.slidesPerView||1<r.slidesPerView)&&s.isEnd&&!s.params.centeredSlides?s.slideTo(s.slides.length-1,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0)),s.autoplay&&s.autoplay.running&&s.autoplay.paused&&s.autoplay.run(),s.allowSlidePrev=t,s.allowSlideNext=e,s.params.watchOverflow&&a!==s.snapGrid&&s.checkOverflow())}var P=!1;function k(){}var z,$,L,D={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},O={update:w,translate:y,transition:{setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.params,r=a.previousIndex;s.autoHeight&&a.updateAutoHeight();var n=(n=t)||(r<i?"next":i<r?"prev":"reset");if(a.emit("transitionStart"),e&&i!==r){if("reset"===n)return void a.emit("slideResetTransitionStart");a.emit("slideChangeTransitionStart"),"next"===n?a.emit("slideNextTransitionStart"):a.emit("slidePrevTransitionStart")}},transitionEnd:function(e,t){void 0===e&&(e=!0);var a=this,i=a.activeIndex,s=a.previousIndex;a.animating=!1,a.setTransition(0);var r=(r=t)||(s<i?"next":i<s?"prev":"reset");if(a.emit("transitionEnd"),e&&i!==s){if("reset"===r)return void a.emit("slideResetTransitionEnd");a.emit("slideChangeTransitionEnd"),"next"===r?a.emit("slideNextTransitionEnd"):a.emit("slidePrevTransitionEnd")}}},slide:x,loop:T,grabCursor:E,manipulation:S,events:{attachEvents:function(){var e=this,t=e.params,a=e.touchEvents,i=e.el,s=e.wrapperEl;e.onTouchStart=function(e){var t,a,i,s,r,n,o,l=this,d=l.touchEventsData,p=l.params,c=l.touches;l.animating&&p.preventInteractionOnTransition||((t=e).originalEvent&&(t=t.originalEvent),d.isTouchEvent="touchstart"===t.type,!d.isTouchEvent&&"which"in t&&3===t.which||!d.isTouchEvent&&"button"in t&&0<t.button||d.isTouched&&d.isMoved||(p.noSwiping&&I(t.target).closest(p.noSwipingSelector?p.noSwipingSelector:"."+p.noSwipingClass)[0]?l.allowClick=!0:p.swipeHandler&&!I(t).closest(p.swipeHandler)[0]||(c.currentX="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,c.currentY="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,a=c.currentX,i=c.currentY,s=p.edgeSwipeDetection||p.iOSEdgeSwipeDetection,r=p.edgeSwipeThreshold||p.iOSEdgeSwipeThreshold,s&&(a<=r||a>=ee.screen.width-r)||(te.extend(d,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),c.startX=a,c.startY=i,d.touchStartTime=te.now(),l.allowClick=!0,l.updateSize(),l.swipeDirection=void 0,0<p.threshold&&(d.allowThresholdMove=!1),"touchstart"!==t.type&&(n=!0,I(t.target).is(d.formElements)&&(n=!1),m.activeElement&&I(m.activeElement).is(d.formElements)&&m.activeElement!==t.target&&m.activeElement.blur(),o=n&&l.allowTouchMove&&p.touchStartPreventDefault,(p.touchStartForcePreventDefault||o)&&t.preventDefault()),l.emit("touchStart",t)))))}.bind(e),e.onTouchMove=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=e;if(n.originalEvent&&(n=n.originalEvent),a.isTouched){if(!a.isTouchEvent||"mousemove"!==n.type){var o="touchmove"===n.type&&n.targetTouches&&(n.targetTouches[0]||n.changedTouches[0]),l="touchmove"===n.type?o.pageX:n.pageX,d="touchmove"===n.type?o.pageY:n.pageY;if(n.preventedByNestedSwiper)return s.startX=l,void(s.startY=d);if(!t.allowTouchMove)return t.allowClick=!1,void(a.isTouched&&(te.extend(s,{startX:l,startY:d,currentX:l,currentY:d}),a.touchStartTime=te.now()));if(a.isTouchEvent&&i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(d<s.startY&&t.translate<=t.maxTranslate()||d>s.startY&&t.translate>=t.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(l<s.startX&&t.translate<=t.maxTranslate()||l>s.startX&&t.translate>=t.minTranslate())return;if(a.isTouchEvent&&m.activeElement&&n.target===m.activeElement&&I(n.target).is(a.formElements))return a.isMoved=!0,void(t.allowClick=!1);if(a.allowTouchCallbacks&&t.emit("touchMove",n),!(n.targetTouches&&1<n.targetTouches.length)){s.currentX=l,s.currentY=d;var p,c=s.currentX-s.startX,u=s.currentY-s.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(c,2)+Math.pow(u,2))<t.params.threshold))if(void 0===a.isScrolling&&(t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?a.isScrolling=!1:25<=c*c+u*u&&(p=180*Math.atan2(Math.abs(u),Math.abs(c))/Math.PI,a.isScrolling=t.isHorizontal()?p>i.touchAngle:90-p>i.touchAngle)),a.isScrolling&&t.emit("touchMoveOpposite",n),void 0===a.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(a.startMoving=!0)),a.isScrolling)a.isTouched=!1;else if(a.startMoving){t.allowClick=!1,n.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&n.stopPropagation(),a.isMoved||(i.loop&&t.loopFix(),a.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!i.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",n)),t.emit("sliderMove",n),a.isMoved=!0;var h=t.isHorizontal()?c:u;s.diff=h,h*=i.touchRatio,r&&(h=-h),t.swipeDirection=0<h?"prev":"next",a.currentTranslate=h+a.startTranslate;var v=!0,f=i.resistanceRatio;if(i.touchReleaseOnEdges&&(f=0),0<h&&a.currentTranslate>t.minTranslate()?(v=!1,i.resistance&&(a.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+a.startTranslate+h,f))):h<0&&a.currentTranslate<t.maxTranslate()&&(v=!1,i.resistance&&(a.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-a.startTranslate-h,f))),v&&(n.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),0<i.threshold){if(!(Math.abs(h)>i.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,a.currentTranslate=a.startTranslate,void(s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}i.followFinger&&((i.freeMode||i.watchSlidesProgress||i.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&(0===a.velocities.length&&a.velocities.push({position:s[t.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:s[t.isHorizontal()?"currentX":"currentY"],time:te.now()})),t.updateProgress(a.currentTranslate),t.setTranslate(a.currentTranslate))}}}}else a.startMoving&&a.isScrolling&&t.emit("touchMoveOpposite",n)}.bind(e),e.onTouchEnd=function(e){var t=this,a=t.touchEventsData,i=t.params,s=t.touches,r=t.rtlTranslate,n=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,d=e;if(d.originalEvent&&(d=d.originalEvent),a.allowTouchCallbacks&&t.emit("touchEnd",d),a.allowTouchCallbacks=!1,!a.isTouched)return a.isMoved&&i.grabCursor&&t.setGrabCursor(!1),a.isMoved=!1,void(a.startMoving=!1);i.grabCursor&&a.isMoved&&a.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var p,c,u,h,v,f=te.now(),m=f-a.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(d),t.emit("tap",d),m<300&&300<f-a.lastClickTime&&(a.clickTimeout&&clearTimeout(a.clickTimeout),a.clickTimeout=te.nextTick(function(){t&&!t.destroyed&&t.emit("click",d)},300)),m<300&&f-a.lastClickTime<300&&(a.clickTimeout&&clearTimeout(a.clickTimeout),t.emit("doubleTap",d))),a.lastClickTime=te.now(),te.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!a.isTouched||!a.isMoved||!t.swipeDirection||0===s.diff||a.currentTranslate===a.startTranslate)return a.isTouched=!1,a.isMoved=!1,void(a.startMoving=!1);if(a.isTouched=!1,a.isMoved=!1,a.startMoving=!1,p=i.followFinger?r?t.translate:-t.translate:-a.currentTranslate,i.freeMode){if(p<-t.minTranslate())return void t.slideTo(t.activeIndex);if(p>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(i.freeModeMomentum){1<a.velocities.length?(c=a.velocities.pop(),u=a.velocities.pop(),h=c.position-u.position,v=c.time-u.time,t.velocity=h/v,t.velocity/=2,Math.abs(t.velocity)<i.freeModeMinimumVelocity&&(t.velocity=0),(150<v||300<te.now()-c.time)&&(t.velocity=0)):t.velocity=0,t.velocity*=i.freeModeMomentumVelocityRatio,a.velocities.length=0;var g=1e3*i.freeModeMomentumRatio,b=t.velocity*g,w=t.translate+b;r&&(w=-w);var y,x,T=!1,E=20*Math.abs(t.velocity)*i.freeModeMomentumBounceRatio;if(w<t.maxTranslate())i.freeModeMomentumBounce?(w+t.maxTranslate()<-E&&(w=t.maxTranslate()-E),y=t.maxTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.maxTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(w>t.minTranslate())i.freeModeMomentumBounce?(w-t.minTranslate()>E&&(w=t.minTranslate()+E),y=t.minTranslate(),T=!0,a.allowMomentumBounce=!0):w=t.minTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(i.freeModeSticky){for(var S,C=0;C<l.length;C+=1)if(l[C]>-w){S=C;break}w=-(Math.abs(l[S]-w)<Math.abs(l[S-1]-w)||"next"===t.swipeDirection?l[S]:l[S-1])}if(x&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)g=r?Math.abs((-w-t.translate)/t.velocity):Math.abs((w-t.translate)/t.velocity);else if(i.freeModeSticky)return void t.slideToClosest();i.freeModeMomentumBounce&&T?(t.updateProgress(y),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&a.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(i.speed),t.setTranslate(y),n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(w),t.setTransition(g),t.setTranslate(w),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,n.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(w),t.updateActiveIndex(),t.updateSlidesClasses()}else if(i.freeModeSticky)return void t.slideToClosest();(!i.freeModeMomentum||m>=i.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var M=0,P=t.slidesSizesGrid[0],k=0;k<o.length;k+=i.slidesPerGroup)void 0!==o[k+i.slidesPerGroup]?p>=o[k]&&p<o[k+i.slidesPerGroup]&&(P=o[(M=k)+i.slidesPerGroup]-o[k]):p>=o[k]&&(M=k,P=o[o.length-1]-o[o.length-2]);var z=(p-o[M])/P;if(m>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(z>=i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M)),"prev"===t.swipeDirection&&(z>1-i.longSwipesRatio?t.slideTo(M+i.slidesPerGroup):t.slideTo(M))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(M+i.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(M)}}}.bind(e),e.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(e);var r,n="container"===t.touchEventsTarget?i:s,o=!!t.nested;ae.touch||!ae.pointerEvents&&!ae.prefixedPointerEvents?(ae.touch&&(r=!("touchstart"!==a.start||!ae.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1},n.addEventListener(a.start,e.onTouchStart,r),n.addEventListener(a.move,e.onTouchMove,ae.passiveListener?{passive:!1,capture:o}:o),n.addEventListener(a.end,e.onTouchEnd,r),P||(m.addEventListener("touchstart",k),P=!0)),(t.simulateTouch&&!C.ios&&!C.android||t.simulateTouch&&!ae.touch&&C.ios)&&(n.addEventListener("mousedown",e.onTouchStart,!1),m.addEventListener("mousemove",e.onTouchMove,o),m.addEventListener("mouseup",e.onTouchEnd,!1))):(n.addEventListener(a.start,e.onTouchStart,!1),m.addEventListener(a.move,e.onTouchMove,o),m.addEventListener(a.end,e.onTouchEnd,!1)),(t.preventClicks||t.preventClicksPropagation)&&n.addEventListener("click",e.onClick,!0),e.on(C.ios||C.android?"resize orientationchange observerUpdate":"resize observerUpdate",M,!0)},detachEvents:function(){var e,t=this,a=t.params,i=t.touchEvents,s=t.el,r=t.wrapperEl,n="container"===a.touchEventsTarget?s:r,o=!!a.nested;ae.touch||!ae.pointerEvents&&!ae.prefixedPointerEvents?(ae.touch&&(e=!("onTouchStart"!==i.start||!ae.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1},n.removeEventListener(i.start,t.onTouchStart,e),n.removeEventListener(i.move,t.onTouchMove,o),n.removeEventListener(i.end,t.onTouchEnd,e)),(a.simulateTouch&&!C.ios&&!C.android||a.simulateTouch&&!ae.touch&&C.ios)&&(n.removeEventListener("mousedown",t.onTouchStart,!1),m.removeEventListener("mousemove",t.onTouchMove,o),m.removeEventListener("mouseup",t.onTouchEnd,!1))):(n.removeEventListener(i.start,t.onTouchStart,!1),m.removeEventListener(i.move,t.onTouchMove,o),m.removeEventListener(i.end,t.onTouchEnd,!1)),(a.preventClicks||a.preventClicksPropagation)&&n.removeEventListener("click",t.onClick,!0),t.off(C.ios||C.android?"resize orientationchange observerUpdate":"resize observerUpdate",M)}},breakpoints:{setBreakpoint:function(){var e=this,t=e.activeIndex,a=e.initialized,i=e.loopedSlides;void 0===i&&(i=0);var s,r,n,o,l,d=e.params,p=d.breakpoints;!p||p&&0===Object.keys(p).length||(s=e.getBreakpoint(p))&&e.currentBreakpoint!==s&&((r=s in p?p[s]:void 0)&&["slidesPerView","spaceBetween","slidesPerGroup"].forEach(function(e){var t=r[e];void 0!==t&&(r[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}),o=(n=r||e.originalParams).direction&&n.direction!==d.direction,l=d.loop&&(n.slidesPerView!==d.slidesPerView||o),o&&a&&e.changeDirection(),te.extend(e.params,n),te.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=s,l&&a&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-i+e.loopedSlides,0,!1)),e.emit("breakpoint",n))},getBreakpoint:function(e){if(e){var t=!1,a=[];Object.keys(e).forEach(function(e){a.push(e)}),a.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var i=0;i<a.length;i+=1){var s=a[i];this.params.breakpointsInverse?s<=ee.innerWidth&&(t=s):s>=ee.innerWidth&&!t&&(t=s)}return t||"max"}}},checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,a=this.params,e=this.rtl,i=this.$el,s=[];s.push("initialized"),s.push(a.direction),a.freeMode&&s.push("free-mode"),ae.flexbox||s.push("no-flexbox"),a.autoHeight&&s.push("autoheight"),e&&s.push("rtl"),1<a.slidesPerColumn&&s.push("multirow"),C.android&&s.push("android"),C.ios&&s.push("ios"),(ie.isIE||ie.isEdge)&&(ae.pointerEvents||ae.prefixedPointerEvents)&&s.push("wp8-"+a.direction),s.forEach(function(e){t.push(a.containerModifierClass+e)}),i.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,a,i,s,r){var n;function o(){r&&r()}(!e.complete||!s)&&t?((n=new ee.Image).onload=o,n.onerror=o,i&&(n.sizes=i),a&&(n.srcset=a),t&&(n.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var a=0;a<e.imagesToLoad.length;a+=1){var i=e.imagesToLoad[a];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}}},A={},H=function(c){function u(){for(var e,s,t=[],a=arguments.length;a--;)t[a]=arguments[a];s=(s=1===t.length&&t[0].constructor&&t[0].constructor===Object?t[0]:(e=t[0],t[1]))||{},s=te.extend({},s),e&&!s.el&&(s.el=e),c.call(this,s),Object.keys(O).forEach(function(t){Object.keys(O[t]).forEach(function(e){u.prototype[e]||(u.prototype[e]=O[t][e])})});var r=this;void 0===r.modules&&(r.modules={}),Object.keys(r.modules).forEach(function(e){var t=r.modules[e];if(t.params){var a=Object.keys(t.params)[0],i=t.params[a];if("object"!=typeof i||null===i)return;if(!(a in s&&"enabled"in i))return;!0===s[a]&&(s[a]={enabled:!0}),"object"!=typeof s[a]||"enabled"in s[a]||(s[a].enabled=!0),s[a]||(s[a]={enabled:!1})}});var i=te.extend({},D);r.useModulesParams(i),r.params=te.extend({},i,A,s),r.originalParams=te.extend({},r.params),r.passedParams=te.extend({},s);var n=(r.$=I)(r.params.el);if(e=n[0]){if(1<n.length){var o=[];return n.each(function(e,t){var a=te.extend({},s,{el:t});o.push(new u(a))}),o}e.swiper=r,n.data("swiper",r);var l,d,p=n.children("."+r.params.wrapperClass);return te.extend(r,{$el:n,el:e,$wrapperEl:p,wrapperEl:p[0],classNames:[],slides:I(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===r.params.direction},isVertical:function(){return"vertical"===r.params.direction},rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===r.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===p.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:r.params.allowSlideNext,allowSlidePrev:r.params.allowSlidePrev,touchEvents:(l=["touchstart","touchmove","touchend"],d=["mousedown","mousemove","mouseup"],ae.pointerEvents?d=["pointerdown","pointermove","pointerup"]:ae.prefixedPointerEvents&&(d=["MSPointerDown","MSPointerMove","MSPointerUp"]),r.touchEventsTouch={start:l[0],move:l[1],end:l[2]},r.touchEventsDesktop={start:d[0],move:d[1],end:d[2]},ae.touch||!r.params.simulateTouch?r.touchEventsTouch:r.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:te.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:r.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),r.useModules(),r.params.init&&r.init(),r}}c&&(u.__proto__=c);var e={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((u.prototype=Object.create(c&&c.prototype)).constructor=u).prototype.slidesPerViewDynamic=function(){var e=this,t=e.params,a=e.slides,i=e.slidesGrid,s=e.size,r=e.activeIndex,n=1;if(t.centeredSlides){for(var o,l=a[r].swiperSlideSize,d=r+1;d<a.length;d+=1)a[d]&&!o&&(n+=1,s<(l+=a[d].swiperSlideSize)&&(o=!0));for(var p=r-1;0<=p;--p)a[p]&&!o&&(n+=1,s<(l+=a[p].swiperSlideSize)&&(o=!0))}else for(var c=r+1;c<a.length;c+=1)i[c]-i[r]<s&&(n+=1);return n},u.prototype.update=function(){var e,t,a=this;function i(){var e=a.rtlTranslate?-1*a.translate:a.translate,t=Math.min(Math.max(e,a.maxTranslate()),a.minTranslate());a.setTranslate(t),a.updateActiveIndex(),a.updateSlidesClasses()}a&&!a.destroyed&&(e=a.snapGrid,(t=a.params).breakpoints&&a.setBreakpoint(),a.updateSize(),a.updateSlides(),a.updateProgress(),a.updateSlidesClasses(),a.params.freeMode?(i(),a.params.autoHeight&&a.updateAutoHeight()):(("auto"===a.params.slidesPerView||1<a.params.slidesPerView)&&a.isEnd&&!a.params.centeredSlides?a.slideTo(a.slides.length-1,0,!1,!0):a.slideTo(a.activeIndex,0,!1,!0))||i(),t.watchOverflow&&e!==a.snapGrid&&a.checkOverflow(),a.emit("update"))},u.prototype.changeDirection=function(a,e){void 0===e&&(e=!0);var t=this,i=t.params.direction;return(a=a||("horizontal"===i?"vertical":"horizontal"))===i||"horizontal"!==a&&"vertical"!==a||(t.$el.removeClass(""+t.params.containerModifierClass+i+" wp8-"+i).addClass(""+t.params.containerModifierClass+a),(ie.isIE||ie.isEdge)&&(ae.pointerEvents||ae.prefixedPointerEvents)&&t.$el.addClass(t.params.containerModifierClass+"wp8-"+a),t.params.direction=a,t.slides.each(function(e,t){"vertical"===a?t.style.width="":t.style.height=""}),t.emit("changeDirection"),e&&t.update()),t},u.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},u.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var a=this,i=a.params,s=a.$el,r=a.$wrapperEl,n=a.slides;return void 0===a.params||a.destroyed||(a.emit("beforeDestroy"),a.initialized=!1,a.detachEvents(),i.loop&&a.loopDestroy(),t&&(a.removeClasses(),s.removeAttr("style"),r.removeAttr("style"),n&&n.length&&n.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),a.emit("destroy"),Object.keys(a.eventsListeners).forEach(function(e){a.off(e)}),!1!==e&&(a.$el[0].swiper=null,a.$el.data("swiper",null),te.deleteProps(a)),a.destroyed=!0),null},u.extendDefaults=function(e){te.extend(A,e)},e.extendedDefaults.get=function(){return A},e.defaults.get=function(){return D},e.Class.get=function(){return c},e.$.get=function(){return I},Object.defineProperties(u,e),u}(e),G={name:"device",proto:{device:C},static:{device:C}},N={name:"support",proto:{support:ae},static:{support:ae}},B={name:"browser",proto:{browser:ie},static:{browser:ie}},X={name:"resize",create:function(){var e=this;te.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){ee.addEventListener("resize",this.resize.resizeHandler),ee.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){ee.removeEventListener("resize",this.resize.resizeHandler),ee.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},V={func:ee.MutationObserver||ee.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var a=this,i=new V.func(function(e){var t;1!==e.length?(t=function(){a.emit("observerUpdate",e[0])},ee.requestAnimationFrame?ee.requestAnimationFrame(t):ee.setTimeout(t,0)):a.emit("observerUpdate",e[0])});i.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.observer.observers.push(i)},init:function(){var e=this;if(ae.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),a=0;a<t.length;a+=1)e.observer.attach(t[a]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},Y={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){te.extend(this,{observer:{init:V.init.bind(this),attach:V.attach.bind(this),destroy:V.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},F={update:function(e){var t=this,a=t.params,i=a.slidesPerView,s=a.slidesPerGroup,r=a.centeredSlides,n=t.params.virtual,o=n.addSlidesBefore,l=n.addSlidesAfter,d=t.virtual,p=d.from,c=d.to,u=d.slides,h=d.slidesGrid,v=d.renderSlide,f=d.offset;t.updateActiveIndex();var m,g=t.activeIndex||0,b=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",w=r?(m=Math.floor(i/2)+s+o,Math.floor(i/2)+s+l):(m=i+(s-1)+o,s+l),y=Math.max((g||0)-w,0),x=Math.min((g||0)+m,u.length-1),T=(t.slidesGrid[y]||0)-(t.slidesGrid[0]||0);function E(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(te.extend(t.virtual,{from:y,to:x,offset:T,slidesGrid:t.slidesGrid}),p===y&&c===x&&!e)return t.slidesGrid!==h&&T!==f&&t.slides.css(b,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:y,to:x,slides:function(){for(var e=[],t=y;t<=x;t+=1)e.push(u[t]);return e}()}),void E();var S=[],C=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var M=p;M<=c;M+=1)(M<y||x<M)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+M+'"]').remove();for(var P=0;P<u.length;P+=1)y<=P&&P<=x&&(void 0===c||e?C.push(P):(c<P&&C.push(P),P<p&&S.push(P)));C.forEach(function(e){t.$wrapperEl.append(v(u[e],e))}),S.sort(function(e,t){return t-e}).forEach(function(e){t.$wrapperEl.prepend(v(u[e],e))}),t.$wrapperEl.children(".swiper-slide").css(b,T+"px"),E()},renderSlide:function(e,t){var a=this,i=a.params.virtual;if(i.cache&&a.virtual.cache[t])return a.virtual.cache[t];var s=i.renderSlide?I(i.renderSlide.call(a,e,t)):I('<div class="'+a.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return s.attr("data-swiper-slide-index")||s.attr("data-swiper-slide-index",t),i.cache&&(a.virtual.cache[t]=s),s},appendSlide:function(e){if("object"==typeof e&&"length"in e)for(var t=0;t<e.length;t+=1)e[t]&&this.virtual.slides.push(e[t]);else this.virtual.slides.push(e);this.virtual.update(!0)},prependSlide:function(e){var t,a,i=this,s=i.activeIndex,r=s+1,n=1;if(Array.isArray(e)){for(var o=0;o<e.length;o+=1)e[o]&&i.virtual.slides.unshift(e[o]);r=s+e.length,n=e.length}else i.virtual.slides.unshift(e);i.params.virtual.cache&&(t=i.virtual.cache,a={},Object.keys(t).forEach(function(e){a[parseInt(e,10)+n]=t[e]}),i.virtual.cache=a),i.virtual.update(!0),i.slideTo(r,0)},removeSlide:function(e){var t=this;if(null!=e){var a=t.activeIndex;if(Array.isArray(e))for(var i=e.length-1;0<=i;--i)t.virtual.slides.splice(e[i],1),t.params.virtual.cache&&delete t.virtual.cache[e[i]],e[i]<a&&--a,a=Math.max(a,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<a&&--a,a=Math.max(a,0);t.virtual.update(!0),t.slideTo(a,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},R={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var e=this;te.extend(e,{virtual:{update:F.update.bind(e),appendSlide:F.appendSlide.bind(e),prependSlide:F.prependSlide.bind(e),removeSlide:F.removeSlide.bind(e),removeAllSlides:F.removeAllSlides.bind(e),renderSlide:F.renderSlide.bind(e),slides:e.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var e,t=this;t.params.virtual.enabled&&(t.classNames.push(t.params.containerModifierClass+"virtual"),e={watchSlidesProgress:!0},te.extend(t.params,e),te.extend(t.originalParams,e),t.params.initialSlide||t.virtual.update())},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},q={handle:function(e){var t=this,a=t.rtlTranslate,i=e;i.originalEvent&&(i=i.originalEvent);var s=i.keyCode||i.charCode;if(!t.allowSlideNext&&(t.isHorizontal()&&39===s||t.isVertical()&&40===s||34===s))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&37===s||t.isVertical()&&38===s||33===s))return!1;if(!(i.shiftKey||i.altKey||i.ctrlKey||i.metaKey||m.activeElement&&m.activeElement.nodeName&&("input"===m.activeElement.nodeName.toLowerCase()||"textarea"===m.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(33===s||34===s||37===s||39===s||38===s||40===s)){var r=!1;if(0<t.$el.parents("."+t.params.slideClass).length&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var n=ee.innerWidth,o=ee.innerHeight,l=t.$el.offset();a&&(l.left-=t.$el[0].scrollLeft);for(var d=[[l.left,l.top],[l.left+t.width,l.top],[l.left,l.top+t.height],[l.left+t.width,l.top+t.height]],p=0;p<d.length;p+=1){var c=d[p];0<=c[0]&&c[0]<=n&&0<=c[1]&&c[1]<=o&&(r=!0)}if(!r)return}t.isHorizontal()?(33!==s&&34!==s&&37!==s&&39!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),(34!==s&&39!==s||a)&&(33!==s&&37!==s||!a)||t.slideNext(),(33!==s&&37!==s||a)&&(34!==s&&39!==s||!a)||t.slidePrev()):(33!==s&&34!==s&&38!==s&&40!==s||(i.preventDefault?i.preventDefault():i.returnValue=!1),34!==s&&40!==s||t.slideNext(),33!==s&&38!==s||t.slidePrev()),t.emit("keyPress",s)}},enable:function(){this.keyboard.enabled||(I(m).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(I(m).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},W={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){te.extend(this,{keyboard:{enabled:!1,enable:q.enable.bind(this),disable:q.disable.bind(this),handle:q.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}},j={lastScrollTime:te.now(),event:-1<ee.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":((L=($="onwheel")in m)||((z=m.createElement("div")).setAttribute($,"return;"),L="function"==typeof z[$]),!L&&m.implementation&&m.implementation.hasFeature&&!0!==m.implementation.hasFeature("","")&&(L=m.implementation.hasFeature("Events.wheel","3.0")),L?"wheel":"mousewheel"),normalize:function(e){var t=0,a=0,i=0,s=0;return"detail"in e&&(a=e.detail),"wheelDelta"in e&&(a=-e.wheelDelta/120),"wheelDeltaY"in e&&(a=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=a,a=0),i=10*t,s=10*a,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||s)&&e.deltaMode&&(1===e.deltaMode?(i*=40,s*=40):(i*=800,s*=800)),i&&!t&&(t=i<1?-1:1),s&&!a&&(a=s<1?-1:1),{spinX:t,spinY:a,pixelX:i,pixelY:s}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,a=this,i=a.params.mousewheel;if(!a.mouseEntered&&!i.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var s=0,r=a.rtlTranslate?-1:1,n=j.normalize(t);if(i.forceToAxis)if(a.isHorizontal()){if(!(Math.abs(n.pixelX)>Math.abs(n.pixelY)))return!0;s=n.pixelX*r}else{if(!(Math.abs(n.pixelY)>Math.abs(n.pixelX)))return!0;s=n.pixelY}else s=Math.abs(n.pixelX)>Math.abs(n.pixelY)?-n.pixelX*r:-n.pixelY;if(0===s)return!0;if(i.invert&&(s=-s),a.params.freeMode){a.params.loop&&a.loopFix();var o=a.getTranslate()+s*i.sensitivity,l=a.isBeginning,d=a.isEnd;if(o>=a.minTranslate()&&(o=a.minTranslate()),o<=a.maxTranslate()&&(o=a.maxTranslate()),a.setTransition(0),a.setTranslate(o),a.updateProgress(),a.updateActiveIndex(),a.updateSlidesClasses(),(!l&&a.isBeginning||!d&&a.isEnd)&&a.updateSlidesClasses(),a.params.freeModeSticky&&(clearTimeout(a.mousewheel.timeout),a.mousewheel.timeout=te.nextTick(function(){a.slideToClosest()},300)),a.emit("scroll",t),a.params.autoplay&&a.params.autoplayDisableOnInteraction&&a.autoplay.stop(),o===a.minTranslate()||o===a.maxTranslate())return!0}else{if(60<te.now()-a.mousewheel.lastScrollTime)if(s<0)if(a.isEnd&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slideNext(),a.emit("scroll",t);else if(a.isBeginning&&!a.params.loop||a.animating){if(i.releaseOnEdges)return!0}else a.slidePrev(),a.emit("scroll",t);a.mousewheel.lastScrollTime=(new ee.Date).getTime()}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},enable:function(){var e=this;if(!j.event)return!1;if(e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=I(e.params.mousewheel.eventsTarged)),t.on("mouseenter",e.mousewheel.handleMouseEnter),t.on("mouseleave",e.mousewheel.handleMouseLeave),t.on(j.event,e.mousewheel.handle),e.mousewheel.enabled=!0},disable:function(){var e=this;if(!j.event)return!1;if(!e.mousewheel.enabled)return!1;var t=e.$el;return"container"!==e.params.mousewheel.eventsTarged&&(t=I(e.params.mousewheel.eventsTarged)),t.off(j.event,e.mousewheel.handle),!(e.mousewheel.enabled=!1)}},U={update:function(){var e,t,a,i=this,s=i.params.navigation;i.params.loop||(t=(e=i.navigation).$nextEl,(a=e.$prevEl)&&0<a.length&&(i.isBeginning?a.addClass(s.disabledClass):a.removeClass(s.disabledClass),a[i.params.watchOverflow&&i.isLocked?"addClass":"removeClass"](s.lockClass)),t&&0<t.length&&(i.isEnd?t.addClass(s.disabledClass):t.removeClass(s.disabledClass),t[i.params.watchOverflow&&i.isLocked?"addClass":"removeClass"](s.lockClass)))},onPrevClick:function(e){e.preventDefault(),this.isBeginning&&!this.params.loop||this.slidePrev()},onNextClick:function(e){e.preventDefault(),this.isEnd&&!this.params.loop||this.slideNext()},init:function(){var e,t,a=this,i=a.params.navigation;(i.nextEl||i.prevEl)&&(i.nextEl&&(e=I(i.nextEl),a.params.uniqueNavElements&&"string"==typeof i.nextEl&&1<e.length&&1===a.$el.find(i.nextEl).length&&(e=a.$el.find(i.nextEl))),i.prevEl&&(t=I(i.prevEl),a.params.uniqueNavElements&&"string"==typeof i.prevEl&&1<t.length&&1===a.$el.find(i.prevEl).length&&(t=a.$el.find(i.prevEl))),e&&0<e.length&&e.on("click",a.navigation.onNextClick),t&&0<t.length&&t.on("click",a.navigation.onPrevClick),te.extend(a.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this,t=e.navigation,a=t.$nextEl,i=t.$prevEl;a&&a.length&&(a.off("click",e.navigation.onNextClick),a.removeClass(e.params.navigation.disabledClass)),i&&i.length&&(i.off("click",e.navigation.onPrevClick),i.removeClass(e.params.navigation.disabledClass))}},K={update:function(){var e=this,t=e.rtl,s=e.params.pagination;if(s.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a,i,n,o,l=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,d=e.pagination.$el,p=e.params.loop?Math.ceil((l-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>l-1-2*e.loopedSlides&&(r-=l-2*e.loopedSlides),p-1<r&&(r-=p),r<0&&"bullets"!==e.params.paginationType&&(r=p+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===s.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var c,u,h,v,f,m,g=e.pagination.bullets;if(s.dynamicBullets&&(e.pagination.bulletSize=g.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),d.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(s.dynamicMainBullets+4)+"px"),1<s.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>s.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=s.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),c=r-e.pagination.dynamicBulletIndex,h=((u=c+(Math.min(g.length,s.dynamicMainBullets)-1))+c)/2),g.removeClass(s.bulletActiveClass+" "+s.bulletActiveClass+"-next "+s.bulletActiveClass+"-next-next "+s.bulletActiveClass+"-prev "+s.bulletActiveClass+"-prev-prev "+s.bulletActiveClass+"-main"),1<d.length)g.each(function(e,t){var a=I(t),i=a.index();i===r&&a.addClass(s.bulletActiveClass),s.dynamicBullets&&(c<=i&&i<=u&&a.addClass(s.bulletActiveClass+"-main"),i===c&&a.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),i===u&&a.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next"))});else if(g.eq(r).addClass(s.bulletActiveClass),s.dynamicBullets){for(var b=g.eq(c),w=g.eq(u),y=c;y<=u;y+=1)g.eq(y).addClass(s.bulletActiveClass+"-main");b.prev().addClass(s.bulletActiveClass+"-prev").prev().addClass(s.bulletActiveClass+"-prev-prev"),w.next().addClass(s.bulletActiveClass+"-next").next().addClass(s.bulletActiveClass+"-next-next")}s.dynamicBullets&&(v=Math.min(g.length,s.dynamicMainBullets+4),f=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-h*e.pagination.bulletSize,m=t?"right":"left",g.css(e.isHorizontal()?m:"top",f+"px"))}"fraction"===s.type&&(d.find("."+s.currentClass).text(s.formatFractionCurrent(r+1)),d.find("."+s.totalClass).text(s.formatFractionTotal(p))),"progressbar"===s.type&&(a=s.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical",i=(r+1)/p,o=n=1,"horizontal"==a?n=i:o=i,d.find("."+s.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+n+") scaleY("+o+")").transition(e.params.speed)),"custom"===s.type&&s.renderCustom?(d.html(s.renderCustom(e,r+1,p)),e.emit("paginationRender",e,d[0])):e.emit("paginationUpdate",e,d[0]),d[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](s.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,i=e.pagination.$el,s="";if("bullets"===t.type){for(var r=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,n=0;n<r;n+=1)t.renderBullet?s+=t.renderBullet.call(e,n,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";i.html(s),e.pagination.bullets=i.find("."+t.bulletClass)}"fraction"===t.type&&(s=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',i.html(s)),"progressbar"===t.type&&(s=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',i.html(s)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e,a=this,t=a.params.pagination;!t.el||0!==(e=I(t.el)).length&&(a.params.uniqueNavElements&&"string"==typeof t.el&&1<e.length&&1===a.$el.find(t.el).length&&(e=a.$el.find(t.el)),"bullets"===t.type&&t.clickable&&e.addClass(t.clickableClass),e.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(e.addClass(""+t.modifierClass+t.type+"-dynamic"),a.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&e.addClass(t.progressbarOppositeClass),t.clickable&&e.on("click","."+t.bulletClass,function(e){e.preventDefault();var t=I(this).index()*a.params.slidesPerGroup;a.params.loop&&(t+=a.loopedSlides),a.slideTo(t)}),te.extend(a.pagination,{$el:e,el:e[0]}))},destroy:function(){var e,t=this,a=t.params.pagination;a.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length&&((e=t.pagination.$el).removeClass(a.hiddenClass),e.removeClass(a.modifierClass+a.type),t.pagination.bullets&&t.pagination.bullets.removeClass(a.bulletActiveClass),a.clickable&&e.off("click","."+a.bulletClass))}},_={setTranslate:function(){var e,t,a,i,s,r,n,o,l,d,p=this;p.params.scrollbar.el&&p.scrollbar.el&&(e=p.scrollbar,t=p.rtlTranslate,a=p.progress,i=e.dragSize,s=e.trackSize,r=e.$dragEl,n=e.$el,o=p.params.scrollbar,d=(s-(l=i))*a,t?0<(d=-d)?(l=i-d,d=0):s<-d+i&&(l=s+d):d<0?(l=i+d,d=0):s<d+i&&(l=s-d),p.isHorizontal()?(ae.transforms3d?r.transform("translate3d("+d+"px, 0, 0)"):r.transform("translateX("+d+"px)"),r[0].style.width=l+"px"):(ae.transforms3d?r.transform("translate3d(0px, "+d+"px, 0)"):r.transform("translateY("+d+"px)"),r[0].style.height=l+"px"),o.hide&&(clearTimeout(p.scrollbar.timeout),n[0].style.opacity=1,p.scrollbar.timeout=setTimeout(function(){n[0].style.opacity=0,n.transition(400)},1e3)))},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e,t,a,i,s,r,n,o=this;o.params.scrollbar.el&&o.scrollbar.el&&(t=(e=o.scrollbar).$dragEl,a=e.$el,t[0].style.width="",t[0].style.height="",i=o.isHorizontal()?a[0].offsetWidth:a[0].offsetHeight,r=(s=o.size/o.virtualSize)*(i/o.size),n="auto"===o.params.scrollbar.dragSize?i*s:parseInt(o.params.scrollbar.dragSize,10),o.isHorizontal()?t[0].style.width=n+"px":t[0].style.height=n+"px",a[0].style.display=1<=s?"none":"",o.params.scrollbar.hide&&(a[0].style.opacity=0),te.extend(e,{trackSize:i,divider:s,moveDivider:r,dragSize:n}),e.$el[o.params.watchOverflow&&o.isLocked?"addClass":"removeClass"](o.params.scrollbar.lockClass))},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY},setDragPosition:function(e){var t=this,a=t.scrollbar,i=t.rtlTranslate,s=a.$el,r=a.dragSize,n=a.trackSize,o=a.dragStartPos,l=(a.getPointerPosition(e)-s.offset()[t.isHorizontal()?"left":"top"]-(null!==o?o:r/2))/(n-r);l=Math.max(Math.min(l,1),0),i&&(l=1-l);var d=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*l;t.updateProgress(d),t.setTranslate(d),t.updateActiveIndex(),t.updateSlidesClasses()},onDragStart:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar,s=t.$wrapperEl,r=i.$el,n=i.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===n[0]||e.target===n?i.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),s.transition(100),n.transition(100),i.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),r.transition(0),a.hide&&r.css("opacity",1),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,a=this.$wrapperEl,i=t.$el,s=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),a.transition(0),i.transition(0),s.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,a=t.params.scrollbar,i=t.scrollbar.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,a.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=te.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),t.emit("scrollbarDragEnd",e),a.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e,t,a,i,s,r,n,o=this;o.params.scrollbar.el&&(e=o.scrollbar,t=o.touchEventsTouch,a=o.touchEventsDesktop,i=o.params,s=e.$el[0],r=!(!ae.passiveListener||!i.passiveListeners)&&{passive:!1,capture:!1},n=!(!ae.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1},ae.touch?(s.addEventListener(t.start,o.scrollbar.onDragStart,r),s.addEventListener(t.move,o.scrollbar.onDragMove,r),s.addEventListener(t.end,o.scrollbar.onDragEnd,n)):(s.addEventListener(a.start,o.scrollbar.onDragStart,r),m.addEventListener(a.move,o.scrollbar.onDragMove,r),m.addEventListener(a.end,o.scrollbar.onDragEnd,n)))},disableDraggable:function(){var e,t,a,i,s,r,n,o=this;o.params.scrollbar.el&&(e=o.scrollbar,t=o.touchEventsTouch,a=o.touchEventsDesktop,i=o.params,s=e.$el[0],r=!(!ae.passiveListener||!i.passiveListeners)&&{passive:!1,capture:!1},n=!(!ae.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1},ae.touch?(s.removeEventListener(t.start,o.scrollbar.onDragStart,r),s.removeEventListener(t.move,o.scrollbar.onDragMove,r),s.removeEventListener(t.end,o.scrollbar.onDragEnd,n)):(s.removeEventListener(a.start,o.scrollbar.onDragStart,r),m.removeEventListener(a.move,o.scrollbar.onDragMove,r),m.removeEventListener(a.end,o.scrollbar.onDragEnd,n)))},init:function(){var e,t,a,i,s,r=this;r.params.scrollbar.el&&(e=r.scrollbar,t=r.$el,i=I((a=r.params.scrollbar).el),r.params.uniqueNavElements&&"string"==typeof a.el&&1<i.length&&1===t.find(a.el).length&&(i=t.find(a.el)),0===(s=i.find("."+r.params.scrollbar.dragClass)).length&&(s=I('<div class="'+r.params.scrollbar.dragClass+'"></div>'),i.append(s)),te.extend(e,{$el:i,el:i[0],$dragEl:s,dragEl:s[0]}),a.draggable&&e.enableDraggable())},destroy:function(){this.scrollbar.disableDraggable()}},Z={setTransform:function(e,t){var a,i,s=this.rtl,r=I(e),n=s?-1:1,o=r.attr("data-swiper-parallax")||"0",l=r.attr("data-swiper-parallax-x"),d=r.attr("data-swiper-parallax-y"),p=r.attr("data-swiper-parallax-scale"),c=r.attr("data-swiper-parallax-opacity");l||d?(l=l||"0",d=d||"0"):this.isHorizontal()?(l=o,d="0"):(d=o,l="0"),l=0<=l.indexOf("%")?parseInt(l,10)*t*n+"%":l*t*n+"px",d=0<=d.indexOf("%")?parseInt(d,10)*t+"%":d*t+"px",null!=c&&(a=c-(c-1)*(1-Math.abs(t)),r[0].style.opacity=a),null==p?r.transform("translate3d("+l+", "+d+", 0px)"):(i=p-(p-1)*(1-Math.abs(t)),r.transform("translate3d("+l+", "+d+", 0px) scale("+i+")"))},setTranslate:function(){var i=this,e=i.$el,t=i.slides,s=i.progress,r=i.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(e,t){i.parallax.setTransform(t,s)}),t.each(function(e,t){var a=t.progress;1<i.params.slidesPerGroup&&"auto"!==i.params.slidesPerView&&(a+=Math.ceil(e/2)-s*(r.length-1)),a=Math.min(Math.max(a,-1),1),I(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(e,t){i.parallax.setTransform(t,a)})})},setTransition:function(s){void 0===s&&(s=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each(function(e,t){var a=I(t),i=parseInt(a.attr("data-swiper-parallax-duration"),10)||s;0===s&&(i=0),a.transition(i)})}},Q={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,a=e.targetTouches[0].pageY,i=e.targetTouches[1].pageX,s=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(i-t,2)+Math.pow(s-a,2))},onGestureStart:function(e){var t=this,a=t.params.zoom,i=t.zoom,s=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!ae.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,s.scaleStart=Q.getDistanceBetweenTouches(e)}s.$slideEl&&s.$slideEl.length||(s.$slideEl=I(e.target).closest(".swiper-slide"),0===s.$slideEl.length&&(s.$slideEl=t.slides.eq(t.activeIndex)),s.$imageEl=s.$slideEl.find("img, svg, canvas"),s.$imageWrapEl=s.$imageEl.parent("."+a.containerClass),s.maxRatio=s.$imageWrapEl.attr("data-swiper-zoom")||a.maxRatio,0!==s.$imageWrapEl.length)?(s.$imageEl.transition(0),t.zoom.isScaling=!0):s.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!ae.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;a.fakeGestureMoved=!0,i.scaleMove=Q.getDistanceBetweenTouches(e)}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=ae.gestures?e.scale*a.currentScale:i.scaleMove/i.scaleStart*a.currentScale,a.scale>i.maxRatio&&(a.scale=i.maxRatio-1+Math.pow(a.scale-i.maxRatio+1,.5)),a.scale<t.minRatio&&(a.scale=t.minRatio+1-Math.pow(t.minRatio-a.scale+1,.5)),i.$imageEl.transform("translate3d(0,0,0) scale("+a.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,a=this.zoom,i=a.gesture;if(!ae.gestures){if(!a.fakeGestureTouched||!a.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!C.android)return;a.fakeGestureTouched=!1,a.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(a.scale=Math.max(Math.min(a.scale,i.maxRatio),t.minRatio),i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+a.scale+")"),a.currentScale=a.scale,a.isScaling=!1,1===a.scale&&(i.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,a=t.gesture,i=t.image;a.$imageEl&&0!==a.$imageEl.length&&(i.isTouched||(C.android&&e.preventDefault(),i.isTouched=!0,i.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,i.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,a=t.zoom,i=a.gesture,s=a.image,r=a.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(t.allowClick=!1,s.isTouched&&i.$slideEl)){s.isMoved||(s.width=i.$imageEl[0].offsetWidth,s.height=i.$imageEl[0].offsetHeight,s.startX=te.getTranslate(i.$imageWrapEl[0],"x")||0,s.startY=te.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),t.rtl&&(s.startX=-s.startX,s.startY=-s.startY));var n=s.width*a.scale,o=s.height*a.scale;if(!(n<i.slideWidth&&o<i.slideHeight)){if(s.minX=Math.min(i.slideWidth/2-n/2,0),s.maxX=-s.minX,s.minY=Math.min(i.slideHeight/2-o/2,0),s.maxY=-s.minY,s.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,s.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!s.isMoved&&!a.isScaling){if(t.isHorizontal()&&(Math.floor(s.minX)===Math.floor(s.startX)&&s.touchesCurrent.x<s.touchesStart.x||Math.floor(s.maxX)===Math.floor(s.startX)&&s.touchesCurrent.x>s.touchesStart.x))return void(s.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(s.minY)===Math.floor(s.startY)&&s.touchesCurrent.y<s.touchesStart.y||Math.floor(s.maxY)===Math.floor(s.startY)&&s.touchesCurrent.y>s.touchesStart.y))return void(s.isTouched=!1)}e.preventDefault(),e.stopPropagation(),s.isMoved=!0,s.currentX=s.touchesCurrent.x-s.touchesStart.x+s.startX,s.currentY=s.touchesCurrent.y-s.touchesStart.y+s.startY,s.currentX<s.minX&&(s.currentX=s.minX+1-Math.pow(s.minX-s.currentX+1,.8)),s.currentX>s.maxX&&(s.currentX=s.maxX-1+Math.pow(s.currentX-s.maxX+1,.8)),s.currentY<s.minY&&(s.currentY=s.minY+1-Math.pow(s.minY-s.currentY+1,.8)),s.currentY>s.maxY&&(s.currentY=s.maxY-1+Math.pow(s.currentY-s.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=s.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=s.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(s.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(s.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(s.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(s.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=s.touchesCurrent.x,r.prevPositionY=s.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+s.currentX+"px, "+s.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,a=e.image,i=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!a.isTouched||!a.isMoved)return a.isTouched=!1,void(a.isMoved=!1);a.isTouched=!1,a.isMoved=!1;var s=300,r=300,n=i.x*s,o=a.currentX+n,l=i.y*r,d=a.currentY+l;0!==i.x&&(s=Math.abs((o-a.currentX)/i.x)),0!==i.y&&(r=Math.abs((d-a.currentY)/i.y));var p=Math.max(s,r);a.currentX=o,a.currentY=d;var c=a.width*e.scale,u=a.height*e.scale;a.minX=Math.min(t.slideWidth/2-c/2,0),a.maxX=-a.minX,a.minY=Math.min(t.slideHeight/2-u/2,0),a.maxY=-a.minY,a.currentX=Math.max(Math.min(a.currentX,a.maxX),a.minX),a.currentY=Math.max(Math.min(a.currentY,a.maxY),a.minY),t.$imageWrapEl.transition(p).transform("translate3d("+a.currentX+"px, "+a.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,a,i,s,r,n,o,l,d,p,c,u,h,v,f,m,g=this,b=g.zoom,w=g.params.zoom,y=b.gesture,x=b.image;y.$slideEl||(y.$slideEl=g.clickedSlide?I(g.clickedSlide):g.slides.eq(g.activeIndex),y.$imageEl=y.$slideEl.find("img, svg, canvas"),y.$imageWrapEl=y.$imageEl.parent("."+w.containerClass)),y.$imageEl&&0!==y.$imageEl.length&&(y.$slideEl.addClass(""+w.zoomedSlideClass),a=void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,"touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,x.touchesStart.y),b.scale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,b.currentScale=y.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(f=y.$slideEl[0].offsetWidth,m=y.$slideEl[0].offsetHeight,i=y.$slideEl.offset().left+f/2-t,s=y.$slideEl.offset().top+m/2-a,o=y.$imageEl[0].offsetWidth,l=y.$imageEl[0].offsetHeight,d=o*b.scale,p=l*b.scale,h=-(c=Math.min(f/2-d/2,0)),v=-(u=Math.min(m/2-p/2,0)),(r=i*b.scale)<c&&(r=c),h<r&&(r=h),(n=s*b.scale)<u&&(n=u),v<n&&(n=v)):n=r=0,y.$imageWrapEl.transition(300).transform("translate3d("+r+"px, "+n+"px,0)"),y.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+b.scale+")"))},out:function(){var e=this,t=e.zoom,a=e.params.zoom,i=t.gesture;i.$slideEl||(i.$slideEl=e.clickedSlide?I(e.clickedSlide):e.slides.eq(e.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+a.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(t.scale=1,t.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+a.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e,t=this,a=t.zoom;a.enabled||(a.enabled=!0,e=!("touchstart"!==t.touchEvents.start||!ae.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},ae.gestures?(t.$wrapperEl.on("gesturestart",".swiper-slide",a.onGestureStart,e),t.$wrapperEl.on("gesturechange",".swiper-slide",a.onGestureChange,e),t.$wrapperEl.on("gestureend",".swiper-slide",a.onGestureEnd,e)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,".swiper-slide",a.onGestureStart,e),t.$wrapperEl.on(t.touchEvents.move,".swiper-slide",a.onGestureChange,e),t.$wrapperEl.on(t.touchEvents.end,".swiper-slide",a.onGestureEnd,e)),t.$wrapperEl.on(t.touchEvents.move,"."+t.params.zoom.containerClass,a.onTouchMove))},disable:function(){var e,t=this,a=t.zoom;a.enabled&&(t.zoom.enabled=!1,e=!("touchstart"!==t.touchEvents.start||!ae.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},ae.gestures?(t.$wrapperEl.off("gesturestart",".swiper-slide",a.onGestureStart,e),t.$wrapperEl.off("gesturechange",".swiper-slide",a.onGestureChange,e),t.$wrapperEl.off("gestureend",".swiper-slide",a.onGestureEnd,e)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,".swiper-slide",a.onGestureStart,e),t.$wrapperEl.off(t.touchEvents.move,".swiper-slide",a.onGestureChange,e),t.$wrapperEl.off(t.touchEvents.end,".swiper-slide",a.onGestureEnd,e)),t.$wrapperEl.off(t.touchEvents.move,"."+t.params.zoom.containerClass,a.onTouchMove))}},J={loadInSlide:function(e,l){void 0===l&&(l=!0);var d,t,p=this,c=p.params.lazy;void 0!==e&&0!==p.slides.length&&(t=(d=p.virtual&&p.params.virtual.enabled?p.$wrapperEl.children("."+p.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):p.slides.eq(e)).find("."+c.elementClass+":not(."+c.loadedClass+"):not(."+c.loadingClass+")"),!d.hasClass(c.elementClass)||d.hasClass(c.loadedClass)||d.hasClass(c.loadingClass)||(t=t.add(d[0])),0!==t.length&&t.each(function(e,t){var i=I(t);i.addClass(c.loadingClass);var s=i.attr("data-background"),r=i.attr("data-src"),n=i.attr("data-srcset"),o=i.attr("data-sizes");p.loadImage(i[0],r||s,n,o,!1,function(){var e,t,a;null==p||!p||p&&!p.params||p.destroyed||(s?(i.css("background-image",'url("'+s+'")'),i.removeAttr("data-background")):(n&&(i.attr("srcset",n),i.removeAttr("data-srcset")),o&&(i.attr("sizes",o),i.removeAttr("data-sizes")),r&&(i.attr("src",r),i.removeAttr("data-src"))),i.addClass(c.loadedClass).removeClass(c.loadingClass),d.find("."+c.preloaderClass).remove(),p.params.loop&&l&&(e=d.attr("data-swiper-slide-index"),d.hasClass(p.params.slideDuplicateClass)?(t=p.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+p.params.slideDuplicateClass+")"),p.lazy.loadInSlide(t.index(),!1)):(a=p.$wrapperEl.children("."+p.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]'),p.lazy.loadInSlide(a.index(),!1))),p.emit("lazyImageReady",d[0],i[0]))}),p.emit("lazyImageLoad",d[0],i[0])}))},load:function(){var i=this,t=i.$wrapperEl,a=i.params,s=i.slides,e=i.activeIndex,r=i.virtual&&a.virtual.enabled,n=a.lazy,o=a.slidesPerView;function l(e){if(r){if(t.children("."+a.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return 1}else if(s[e])return 1}function d(e){return r?I(e).attr("data-swiper-slide-index"):I(e).index()}if("auto"===o&&(o=0),i.lazy.initialImageLoaded||(i.lazy.initialImageLoaded=!0),i.params.watchSlidesVisibility)t.children("."+a.slideVisibleClass).each(function(e,t){var a=r?I(t).attr("data-swiper-slide-index"):I(t).index();i.lazy.loadInSlide(a)});else if(1<o)for(var p=e;p<e+o;p+=1)l(p)&&i.lazy.loadInSlide(p);else i.lazy.loadInSlide(e);if(n.loadPrevNext)if(1<o||n.loadPrevNextAmount&&1<n.loadPrevNextAmount){for(var c=n.loadPrevNextAmount,u=o,h=Math.min(e+u+Math.max(c,u),s.length),v=Math.max(e-Math.max(u,c),0),f=e+o;f<h;f+=1)l(f)&&i.lazy.loadInSlide(f);for(var m=v;m<e;m+=1)l(m)&&i.lazy.loadInSlide(m)}else{var g=t.children("."+a.slideNextClass);0<g.length&&i.lazy.loadInSlide(d(g));var b=t.children("."+a.slidePrevClass);0<b.length&&i.lazy.loadInSlide(d(b))}}},se={LinearSpline:function(e,t){var a,i,s,r,n;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(n=function(e,t){for(i=-1,a=e.length;1<a-i;)e[s=a+i>>1]<=t?i=s:a=s;return a}(this.x,e),r=n-1,(e-this.x[r])*(this.y[n]-this.y[r])/(this.x[n]-this.x[r])+this.y[r]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new se.LinearSpline(t.slidesGrid,e.slidesGrid):new se.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var a,i,s=this,r=s.controller.control;function n(e){var t=s.rtlTranslate?-s.translate:s.translate;"slide"===s.params.controller.by&&(s.controller.getInterpolateFunction(e),i=-s.controller.spline.interpolate(-t)),i&&"container"!==s.params.controller.by||(a=(e.maxTranslate()-e.minTranslate())/(s.maxTranslate()-s.minTranslate()),i=(t-s.minTranslate())*a+e.minTranslate()),s.params.controller.inverse&&(i=e.maxTranslate()-i),e.updateProgress(i),e.setTranslate(i,s),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(r))for(var o=0;o<r.length;o+=1)r[o]!==t&&r[o]instanceof H&&n(r[o]);else r instanceof H&&t!==r&&n(r)},setTransition:function(t,e){var a,i=this,s=i.controller.control;function r(e){e.setTransition(t,i),0!==t&&(e.transitionStart(),e.params.autoHeight&&te.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){s&&(e.params.loop&&"slide"===i.params.controller.by&&e.loopFix(),e.transitionEnd())}))}if(Array.isArray(s))for(a=0;a<s.length;a+=1)s[a]!==e&&s[a]instanceof H&&r(s[a]);else s instanceof H&&e!==s&&r(s)}},re={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t,a=this,i=a.params.a11y;13===e.keyCode&&(t=I(e.target),a.navigation&&a.navigation.$nextEl&&t.is(a.navigation.$nextEl)&&(a.isEnd&&!a.params.loop||a.slideNext(),a.isEnd?a.a11y.notify(i.lastSlideMessage):a.a11y.notify(i.nextSlideMessage)),a.navigation&&a.navigation.$prevEl&&t.is(a.navigation.$prevEl)&&(a.isBeginning&&!a.params.loop||a.slidePrev(),a.isBeginning?a.a11y.notify(i.firstSlideMessage):a.a11y.notify(i.prevSlideMessage)),a.pagination&&t.is("."+a.params.pagination.bulletClass)&&t[0].click())},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e,t,a,i=this;i.params.loop||(t=(e=i.navigation).$nextEl,(a=e.$prevEl)&&0<a.length&&(i.isBeginning?i.a11y.disableEl(a):i.a11y.enableEl(a)),t&&0<t.length&&(i.isEnd?i.a11y.disableEl(t):i.a11y.enableEl(t)))},updatePagination:function(){var i=this,s=i.params.a11y;i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.bullets.each(function(e,t){var a=I(t);i.a11y.makeElFocusable(a),i.a11y.addElRole(a,"button"),i.a11y.addElLabel(a,s.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,a,i=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(a=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,i.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),a&&(e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,i.prevSlideMessage),a.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,a=this;a.a11y.liveRegion&&0<a.a11y.liveRegion.length&&a.a11y.liveRegion.remove(),a.navigation&&a.navigation.$nextEl&&(e=a.navigation.$nextEl),a.navigation&&a.navigation.$prevEl&&(t=a.navigation.$prevEl),e&&e.off("keydown",a.a11y.onEnterKey),t&&t.off("keydown",a.a11y.onEnterKey),a.pagination&&a.params.pagination.clickable&&a.pagination.bullets&&a.pagination.bullets.length&&a.pagination.$el.off("keydown","."+a.params.pagination.bulletClass,a.a11y.onEnterKey)}},ne={init:function(){var e=this;if(e.params.history){if(!ee.history||!ee.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var t=e.history;t.initialized=!0,t.paths=ne.getPathValues(),(t.paths.key||t.paths.value)&&(t.scrollToSlide(0,t.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||ee.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||ee.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=ne.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=ee.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){var a,i,s;this.history.initialized&&this.params.history.enabled&&(a=this.slides.eq(t),i=ne.slugify(a.attr("data-history")),ee.location.pathname.includes(e)||(i=e+"/"+i),(s=ee.history.state)&&s.value===i||(this.params.history.replaceState?ee.history.replaceState({value:i},null,i):ee.history.pushState({value:i},null,i)))},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,a){var i=this;if(t)for(var s=0,r=i.slides.length;s<r;s+=1){var n,o=i.slides.eq(s);ne.slugify(o.attr("data-history"))!==t||o.hasClass(i.params.slideDuplicateClass)||(n=o.index(),i.slideTo(n,e,a))}else i.slideTo(0,e,a)}},oe={onHashCange:function(){var e=this,t=m.location.hash.replace("#","");if(t!==e.slides.eq(e.activeIndex).attr("data-hash")){var a=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===a)return;e.slideTo(a)}},setHash:function(){var e,t,a=this;a.hashNavigation.initialized&&a.params.hashNavigation.enabled&&(a.params.hashNavigation.replaceState&&ee.history&&ee.history.replaceState?ee.history.replaceState(null,null,"#"+a.slides.eq(a.activeIndex).attr("data-hash")||""):(t=(e=a.slides.eq(a.activeIndex)).attr("data-hash")||e.attr("data-history"),m.location.hash=t||""))},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var t=m.location.hash.replace("#","");if(t)for(var a=0,i=e.slides.length;a<i;a+=1){var s,r=e.slides.eq(a);(r.attr("data-hash")||r.attr("data-history"))!==t||r.hasClass(e.params.slideDuplicateClass)||(s=r.index(),e.slideTo(s,0,e.params.runCallbacksOnInit,!0))}e.params.hashNavigation.watchState&&I(ee).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&I(ee).off("hashchange",this.hashNavigation.onHashCange)}},le={run:function(){var e=this,t=e.slides.eq(e.activeIndex),a=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(a=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=te.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},a)},start:function(){var e=this;return void 0===e.autoplay.timeout&&!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0)},stop:function(){var e=this;return!!e.autoplay.running&&void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},de={setTranslate:function(){for(var e=this,t=e.slides,a=0;a<t.length;a+=1){var i=e.slides.eq(a),s=-i[0].swiperSlideOffset;e.params.virtualTranslate||(s-=e.translate);var r=0;e.isHorizontal()||(r=s,s=0);var n=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:n}).transform("translate3d("+s+"px, "+r+"px, 0px)")}},setTransition:function(e){var a,i=this,t=i.slides,s=i.$wrapperEl;t.transition(e),i.params.virtualTranslate&&0!==e&&(a=!1,t.transitionEnd(function(){if(!a&&i&&!i.destroyed){a=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)s.trigger(e[t])}}))}},pe={setTranslate:function(){var e,t=this,a=t.$el,i=t.$wrapperEl,s=t.slides,r=t.width,n=t.height,o=t.rtlTranslate,l=t.size,d=t.params.cubeEffect,p=t.isHorizontal(),c=t.virtual&&t.params.virtual.enabled,u=0;d.shadow&&(p?(0===(e=i.find(".swiper-cube-shadow")).length&&(e=I('<div class="swiper-cube-shadow"></div>'),i.append(e)),e.css({height:r+"px"})):0===(e=a.find(".swiper-cube-shadow")).length&&(e=I('<div class="swiper-cube-shadow"></div>'),a.append(e)));for(var h,v,f,m,g,b=0;b<s.length;b+=1){var w=s.eq(b),y=b;c&&(y=parseInt(w.attr("data-swiper-slide-index"),10));var x=90*y,T=Math.floor(x/360);o&&(x=-x,T=Math.floor(-x/360));var E=Math.max(Math.min(w[0].progress,1),-1),S=0,C=0,M=0;y%4==0?(S=4*-T*l,M=0):(y-1)%4==0?(S=0,M=4*-T*l):(y-2)%4==0?(S=l+4*T*l,M=l):(y-3)%4==0&&(S=-l,M=3*l+4*l*T),o&&(S=-S),p||(C=S,S=0);var P,k,z="rotateX("+(p?0:-x)+"deg) rotateY("+(p?x:0)+"deg) translate3d("+S+"px, "+C+"px, "+M+"px)";E<=1&&-1<E&&(u=o?90*-y-90*E:90*y+90*E),w.transform(z),d.slideShadows&&(P=p?w.find(".swiper-slide-shadow-left"):w.find(".swiper-slide-shadow-top"),k=p?w.find(".swiper-slide-shadow-right"):w.find(".swiper-slide-shadow-bottom"),0===P.length&&(P=I('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),w.append(P)),0===k.length&&(k=I('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),w.append(k)),P.length&&(P[0].style.opacity=Math.max(-E,0)),k.length&&(k[0].style.opacity=Math.max(E,0)))}i.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),d.shadow&&(p?e.transform("translate3d(0px, "+(r/2+d.shadowOffset)+"px, "+-r/2+"px) rotateX(90deg) rotateZ(0deg) scale("+d.shadowScale+")"):(h=Math.abs(u)-90*Math.floor(Math.abs(u)/90),v=1.5-(Math.sin(2*h*Math.PI/360)/2+Math.cos(2*h*Math.PI/360)/2),f=d.shadowScale,m=d.shadowScale/v,g=d.shadowOffset,e.transform("scale3d("+f+", 1, "+m+") translate3d(0px, "+(n/2+g)+"px, "+-n/2/m+"px) rotateX(-90deg)")));var $=ie.isSafari||ie.isUiWebView?-l/2:0;i.transform("translate3d(0px,0,"+$+"px) rotateX("+(t.isHorizontal()?0:u)+"deg) rotateY("+(t.isHorizontal()?-u:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},ce={setTranslate:function(){for(var e=this,t=e.slides,a=e.rtlTranslate,i=0;i<t.length;i+=1){var s=t.eq(i),r=s[0].progress;e.params.flipEffect.limitRotation&&(r=Math.max(Math.min(s[0].progress,1),-1));var n,o,l=-180*r,d=0,p=-s[0].swiperSlideOffset,c=0;e.isHorizontal()?a&&(l=-l):(c=p,d=-l,l=p=0),s[0].style.zIndex=-Math.abs(Math.round(r))+t.length,e.params.flipEffect.slideShadows&&(n=e.isHorizontal()?s.find(".swiper-slide-shadow-left"):s.find(".swiper-slide-shadow-top"),o=e.isHorizontal()?s.find(".swiper-slide-shadow-right"):s.find(".swiper-slide-shadow-bottom"),0===n.length&&(n=I('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),s.append(n)),0===o.length&&(o=I('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),s.append(o)),n.length&&(n[0].style.opacity=Math.max(-r,0)),o.length&&(o[0].style.opacity=Math.max(r,0))),s.transform("translate3d("+p+"px, "+c+"px, 0px) rotateX("+d+"deg) rotateY("+l+"deg)")}},setTransition:function(e){var a,i=this,t=i.slides,s=i.activeIndex,r=i.$wrapperEl;t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),i.params.virtualTranslate&&0!==e&&(a=!1,t.eq(s).transitionEnd(function(){if(!a&&i&&!i.destroyed){a=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)r.trigger(e[t])}}))}},ue={setTranslate:function(){for(var e=this,t=e.width,a=e.height,i=e.slides,s=e.$wrapperEl,r=e.slidesSizesGrid,n=e.params.coverflowEffect,o=e.isHorizontal(),l=e.translate,d=o?t/2-l:a/2-l,p=o?n.rotate:-n.rotate,c=n.depth,u=0,h=i.length;u<h;u+=1){var v=i.eq(u),f=r[u],m=(d-v[0].swiperSlideOffset-f/2)/f*n.modifier,g=o?p*m:0,b=o?0:p*m,w=-c*Math.abs(m),y=o?0:n.stretch*m,x=o?n.stretch*m:0;Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(w)<.001&&(w=0),Math.abs(g)<.001&&(g=0),Math.abs(b)<.001&&(b=0);var T,E,S="translate3d("+x+"px,"+y+"px,"+w+"px)  rotateX("+b+"deg) rotateY("+g+"deg)";v.transform(S),v[0].style.zIndex=1-Math.abs(Math.round(m)),n.slideShadows&&(T=o?v.find(".swiper-slide-shadow-left"):v.find(".swiper-slide-shadow-top"),E=o?v.find(".swiper-slide-shadow-right"):v.find(".swiper-slide-shadow-bottom"),0===T.length&&(T=I('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),v.append(T)),0===E.length&&(E=I('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),v.append(E)),T.length&&(T[0].style.opacity=0<m?m:0),E.length&&(E[0].style.opacity=0<-m?-m:0))}(ae.pointerEvents||ae.prefixedPointerEvents)&&(s[0].style.perspectiveOrigin=d+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},he={init:function(){var e=this,t=e.params.thumbs,a=e.constructor;t.swiper instanceof a?(e.thumbs.swiper=t.swiper,te.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),te.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):te.isObject(t.swiper)&&(e.thumbs.swiper=new a(te.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e,t,a,i,s,r,n=this,o=n.thumbs.swiper;o&&(e=o.clickedIndex,(t=o.clickedSlide)&&I(t).hasClass(n.params.thumbs.slideThumbActiveClass)||null==e||(r=o.params.loop?parseInt(I(o.clickedSlide).attr("data-swiper-slide-index"),10):e,n.params.loop&&(a=n.activeIndex,n.slides.eq(a).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,a=n.activeIndex),i=n.slides.eq(a).prevAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),s=n.slides.eq(a).nextAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),r=void 0===i||void 0!==s&&s-a<a-i?s:i),n.slideTo(r)))},update:function(e){var t=this,a=t.thumbs.swiper;if(a){var i,s,r,n,o="auto"===a.params.slidesPerView?a.slidesPerViewDynamic():a.params.slidesPerView;t.realIndex!==a.realIndex&&(i=a.activeIndex,n=a.params.loop?(a.slides.eq(i).hasClass(a.params.slideDuplicateClass)&&(a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft,i=a.activeIndex),s=a.slides.eq(i).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),r=a.slides.eq(i).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),void 0===s?r:void 0===r?s:r-i==i-s?i:r-i<i-s?r:s):t.realIndex,a.visibleSlidesIndexes&&a.visibleSlidesIndexes.indexOf(n)<0&&(a.params.centeredSlides?n=i<n?n-Math.floor(o/2)+1:n+Math.floor(o/2)-1:i<n&&(n=n-o+1),a.slideTo(n,e?0:void 0)));var l=1,d=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(l=t.params.slidesPerView),a.slides.removeClass(d),a.params.loop||a.params.virtual)for(var p=0;p<l;p+=1)a.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+p)+'"]').addClass(d);else for(var c=0;c<l;c+=1)a.slides.eq(t.realIndex+c).addClass(d)}}},ve=[G,N,B,X,Y,R,W,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var e=this;te.extend(e,{mousewheel:{enabled:!1,enable:j.enable.bind(e),disable:j.disable.bind(e),handle:j.handle.bind(e),handleMouseEnter:j.handleMouseEnter.bind(e),handleMouseLeave:j.handleMouseLeave.bind(e),lastScrollTime:te.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;te.extend(e,{navigation:{init:U.init.bind(e),update:U.update.bind(e),destroy:U.destroy.bind(e),onNextClick:U.onNextClick.bind(e),onPrevClick:U.onPrevClick.bind(e)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t,a=this,i=a.navigation,s=i.$nextEl,r=i.$prevEl;!a.params.navigation.hideOnClick||I(e.target).is(r)||I(e.target).is(s)||(s?t=s.hasClass(a.params.navigation.hiddenClass):r&&(t=r.hasClass(a.params.navigation.hiddenClass)),!0===t?a.emit("navigationShow",a):a.emit("navigationHide",a),s&&s.toggleClass(a.params.navigation.hiddenClass),r&&r.toggleClass(a.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;te.extend(e,{pagination:{init:K.init.bind(e),render:K.render.bind(e),update:K.update.bind(e),destroy:K.destroy.bind(e),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){!this.params.loop&&void 0!==this.snapIndex||this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){var t=this;t.params.pagination.el&&t.params.pagination.hideOnClick&&0<t.pagination.$el.length&&!I(e.target).hasClass(t.params.pagination.bulletClass)&&(!0===t.pagination.$el.hasClass(t.params.pagination.hiddenClass)?t.emit("paginationShow",t):t.emit("paginationHide",t),t.pagination.$el.toggleClass(t.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;te.extend(e,{scrollbar:{init:_.init.bind(e),destroy:_.destroy.bind(e),updateSize:_.updateSize.bind(e),setTranslate:_.setTranslate.bind(e),setTransition:_.setTransition.bind(e),enableDraggable:_.enableDraggable.bind(e),disableDraggable:_.disableDraggable.bind(e),setDragPosition:_.setDragPosition.bind(e),getPointerPosition:_.getPointerPosition.bind(e),onDragStart:_.onDragStart.bind(e),onDragMove:_.onDragMove.bind(e),onDragEnd:_.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){te.extend(this,{parallax:{setTransform:Z.setTransform.bind(this),setTranslate:Z.setTranslate.bind(this),setTransition:Z.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax.enabled&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var i=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(e){t[e]=Q[e].bind(i)}),te.extend(i,{zoom:t});var s=1;Object.defineProperty(i.zoom,"scale",{get:function(){return s},set:function(e){var t,a;s!==e&&(t=i.zoom.gesture.$imageEl?i.zoom.gesture.$imageEl[0]:void 0,a=i.zoom.gesture.$slideEl?i.zoom.gesture.$slideEl[0]:void 0,i.emit("zoomChange",e,t,a)),s=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){te.extend(this,{lazy:{initialImageLoaded:!1,load:J.load.bind(this),loadInSlide:J.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var e=this;e.params.lazy.enabled&&(!e.params.lazy.loadOnTransitionStart&&(e.params.lazy.loadOnTransitionStart||e.lazy.initialImageLoaded)||e.lazy.load())},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var e=this;te.extend(e,{controller:{control:e.params.controller.control,getInterpolateFunction:se.getInterpolateFunction.bind(e),setTranslate:se.setTranslate.bind(e),setTransition:se.setTransition.bind(e)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;te.extend(t,{a11y:{liveRegion:I('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(re).forEach(function(e){t.a11y[e]=re[e].bind(t)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var e=this;te.extend(e,{history:{init:ne.init.bind(e),setHistory:ne.setHistory.bind(e),setHistoryPopState:ne.setHistoryPopState.bind(e),scrollToSlide:ne.scrollToSlide.bind(e),destroy:ne.destroy.bind(e)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var e=this;te.extend(e,{hashNavigation:{initialized:!1,init:oe.init.bind(e),destroy:oe.destroy.bind(e),setHash:oe.setHash.bind(e),onHashCange:oe.onHashCange.bind(e)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;te.extend(t,{autoplay:{running:!1,paused:!1,run:le.run.bind(t),start:le.start.bind(t),stop:le.stop.bind(t),pause:le.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){te.extend(this,{fadeEffect:{setTranslate:de.setTranslate.bind(this),setTransition:de.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"fade"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"fade"),e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0},te.extend(t.params,e),te.extend(t.originalParams,e))},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){te.extend(this,{cubeEffect:{setTranslate:pe.setTranslate.bind(this),setTransition:pe.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"cube"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"cube"),t.classNames.push(t.params.containerModifierClass+"3d"),e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0},te.extend(t.params,e),te.extend(t.originalParams,e))},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){te.extend(this,{flipEffect:{setTranslate:ce.setTranslate.bind(this),setTransition:ce.setTransition.bind(this)}})},on:{beforeInit:function(){var e,t=this;"flip"===t.params.effect&&(t.classNames.push(t.params.containerModifierClass+"flip"),t.classNames.push(t.params.containerModifierClass+"3d"),e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0},te.extend(t.params,e),te.extend(t.originalParams,e))},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){te.extend(this,{coverflowEffect:{setTranslate:ue.setTranslate.bind(this),setTransition:ue.setTransition.bind(this)}})},on:{beforeInit:function(){var e=this;"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){te.extend(this,{thumbs:{swiper:null,init:he.init.bind(this),update:he.update.bind(this),onThumbClick:he.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===H.use&&(H.use=H.Class.use,H.installModule=H.Class.installModule),H.use(ve),H});
"use strict";!function(p){var t=null;setInterval(function(){p('.bullet-wrapper[data-remove="true"]').remove()},6e4),p.fn.bullet=function(t){t=p.extend({avatar:"",content:"",url:"",color:"",bgColor:"",speed:20,top:0,safeTop:0,safeBottom:0,hasClose:!0},t||{});var a=p(this),e=a.width(),i=a.height(),n=window.innerWidth>e?e:window.innerWidth,s=window.innerHeight>i?i:window.innerHeight;"static"===a.css("position")&&a.css("position","relative");var o="bullet-"+Math.random().toString(36).substr(2,6),r=p('<div class="bullet-wrapper" id="'+o+'"></div>').appendTo(a),l=p('<div class="bullet-inner"></div>');r.append(l);var c="";t.avatar||(t.avatar='<img src="https://static.oschina.net/new-osc/img/portrait.gif" alt="">'),c+='<div class="bullet-avatar">'+t.avatar+"</div>",c+='<div class="bullet-text">',c+=t.url?'<a href="'+t.url+'" target="_blank" >'+t.content+"</a>":t.content,c+="</div>",t.hasClose&&(r.addClass("has-close"),c+='<div class="bullet-close"></div>'),l.html(c),t.color&&l.css("color",t.color),t.bgColor&&l.css("background-color",t.bgColor);var d=s-r.height()-t.safeBottom,v=t.safeTop,u=t.top||Math.floor(Math.random()*(d-v)+v);r.css("top",u+"px");var m=document.createElement("style");document.head.appendChild(m);var h="from { transform: translate3d("+n+"px, 0, 0); }";m.sheet.insertRule("@keyframes right-to-left { "+h+"to { transform: translate3d(-100%, 0, 0); } }",0),r.css("visibility","visible"),r.css("animation-iteration-count",1),r.css("animation-delay",0),r.css("animation-direction","normal"),r.css("animation-timing-function","linear"),r.css("will-change","transform"),r.css("animation-name","right-to-left"),r.css("animation-duration",t.speed+"s"),r.css("animation-play-state","running"),r.on("animationend",function(){r.attr("data-remove",!0),r.css("opacity","0"),r.css("visibility","hidden")}),r.on("click",".bullet-close",function(){r.attr("data-remove",!0),r.css("opacity","0"),r.css("visibility","hidden")})},p.fn.bullet.removeAll=function(){p(".bullet-wrapper").remove(),t&&(clearInterval(t),t=null)}}(jQuery);
"use strict";$(function(){!function(){function o(i,e){var t=window.common.getCurrentUrl(!0)+"#tweet-"+i;return!!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(a,i+","+e)}catch(e){}})&&(!r[i]&&(r[i]=!0,void $.get(page.space_user_url+"/tweet/tweet_love",{tweet_id:i,author_user_id:e},function(e){var t,a,o,r;1===e.code&&e.result?(t=!!e.result.isLove,a=e.result.loveCount||0,e.message&&$("body").toast({type:"success",content:e.message}),o=$('[data-tweet-like-btn][data-tweet-id="'+i+'"]'),t?(o.addClass("active"),o.find(".like.icon").removeClass("outline")):(o.removeClass("active"),o.find(".like.icon").addClass("outline")),$('[data-tweet-like-count][data-tweet-id="'+i+'"]').text(a),0<(r=$('[data-tweet-thumbups-list][data-tweet-id="'+i+'"]')).length&&$.get(page.space_user_url+"/widgets/_tweet_thumbups_ajax?tweetId="+i,function(e){r.html(e),$(".thumbups-wrap .thumbups .dropdown").dropdown()})):$("body").toast({type:"error",content:e.message||"点赞失败"})}).always(function(){r[i]=!1})))}var a="OSC_TWEET_LIKE_CACHE",r={};if($(document).on("click",".tweet-item .meta a.like",function(){var e=$(this).parents(".tweet-item:eq(0)"),t=e.attr("data-tweet-id"),a=e.attr("data-tweet-owner-id");o(t,a)}),void 0!==window.localStorage&&page.g_user_code){var e=localStorage.getItem(a)||"";if(e){var t=e.split(",");if(2===t.length){var i=t[0],n=t[1];if(0===$('.tweet-item[data-tweet-id="'+i+'"]').length)return;localStorage.removeItem(a),o(i,n)}}}}();function e(){var o,t,i;void 0!==window.Vue&&(o=new Vue({el:"#tweetShareForm",data:function(){return{tweetMaxLength:160,tweetContent:"",tweetPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}],repostId:""}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},tweetContentIsEmpty:function(){return 0===this.tweetContent.length},tweetCountText:function(){return this.tweetContent.length+"/"+this.tweetMaxLength}},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertTopic:function(){this.clearMessage();var e,t,a="#此处输入话题#";this.insertContent(a)&&(t=(e=selectRange.of(this.$refs.tweetTextarea)).getCurPos(),e.setSelectText(t-(a.length-1),t-1))},publishTweet:function(){var e,t=this;if(!window.common.checkLogin())return!1;t.tweetPublishLoading||(t.clearMessage(),t.tweetContentIsEmpty?t.showMessage("error","内容不能为空",2e3):t.tweetContent.length>t.tweetMaxLength?t.showMessage("error","最多只能输入"+t.tweetMaxLength+"个字符！",2e3):(t.tweetPublishLoading=!0,e={content:t.tweetContent,userId:page.g_user_id||"",user_code:page.g_user_code||"",repost_id:t.repostId},$.post(page.space_user_url+"/tweet/pubForwardTweet",e,function(a){var e;1===a.code?(t.showMessage("success",a.message||"动弹发布成功！",2e3),t.tweetContent="",a.result&&void 0!==a.result.refCount&&(e=a.result.refCount,$('[data-tweet-ref-count][data-tweet-id="'+t.repostId+'"]').html(e)),setTimeout(function(){var t,e;$(".tweet-share.modal").modal("hide"),!a.result||void 0===a.result.log||0<(t=$(".tweets-list-container[data-tweets-list]")).length&&(e=a.result.log,$.get("/tweets/widgets/_tweet_list_item_ajax?tweetId="+e,function(e){t.prepend(e),$(function(){$("[data-emoji-render]").emoticon()}),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages()}))},500)):t.showMessage("error",a.message||"动弹发布失败，请稍后再试！",2e3)}).fail(function(){t.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){t.tweetPublishLoading=!1})))},tweetContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&this.publishTweet()},insertContent:function(e){return!this.tweetPublishLoading&&(this.tweetContent.length>=this.tweetMaxLength||this.tweetContent.length+e.length>this.tweetMaxLength?(this.showMessage("error","最多只能输入"+this.tweetMaxLength+"个字符！",2e3),!1):(selectRange.of(this.$refs.tweetTextarea).insertAfterText(e),this.tweetContent=this.$refs.tweetTextarea.value,!0))},setCursor:function(e){var t=this.$refs.tweetTextarea;this.$nextTick(function(){selectRange.of(t).setCurPos(e)})},showMessage:function(e,t,a){var o=this;o.tipMessage.className="success"===e?"positive":"negative",o.tipMessage.content=t;var r=parseInt(a)||0;o.tipMessage.show=!0,0<r&&setTimeout(function(){o.clearMessage()},r)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}}}),$(".tweet-share.modal").modal({onShow:function(){o.$data.repostId=$(this).attr("data-repost-id")||0,o.$data.tweetContent=$(this).attr("data-repost-content")||"",o.setCursor(0)}}),$("#tweetShareForm .tweet-form .toolbox > .item[data-popup]").each(function(e,t){var a=$(t),o=$(a).parent().find(".toolbox-popup."+a.attr("data-popup"));a.popup({position:"bottom left",popup:o,on:"toolbox-picture"===a.attr("data-popup")?"manual":"click",exclusive:!0,onShow:function(){if(!window.common.checkLogin())return!1}})}),t=function(e){var t;Array.isArray(e)&&0<e.length&&((t=$("#tweetShareForm .tweet-textarea")).atwho({at:"@",data:e,headerTpl:'<div class="atwho-header">我的关注 <small>↑&nbsp;↓&nbsp;</small></div>',searchKey:"searchKey",insertTpl:"${atwho-at}${name}",displayTpl:"<li>${name}</li>",limit:10}),t.on("inserted.atwho",function(e,t,a){o.tweetContent=o.$refs.tweetTextarea.value}),window.__LIKE_SHARE_ATWHO_INIT=!0)},i=function(){var a;page.g_user_code&&768<=window.innerWidth&&!window.__LIKE_SHARE_ATWHO_INIT&&(window.__USER_FRIENDS?t(window.__USER_FRIENDS):(a=function(e){t(e)},$.post(page.space_user_url+"/tweet/atwho",function(e){var t=e;Array.isArray(t)&&0<t.length&&(window.__USER_FRIENDS=t,a(t))})))},$(document).on("click",".tweet-item .meta a.share",function(e){if(!window.common.checkLogin())return!1;var t=$(this).parents(".tweet-item:eq(0)"),a=t.attr("data-tweet-id"),o=t.attr("data-repost-content"),r=$(".tweet-share.modal");r.attr("data-repost-id",a),r.attr("data-repost-content",o),r.modal("show"),i()}))}void 0!==window.Vue&&void 0!==$.fn.atwho?e():new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js","/new-osc/js/utils/plugins/caret/jquery.caret.min.js","/new-osc/js/utils/plugins/atwho/jquery.atwho.min.js"],function(){e()}).loadFiles()});
"use strict";OSCPlugin("index-tweets-widget",function(){var n={onTabChange:null,setOnTabChangeCallback:function(e){jQuery.isFunction(e)&&(this.onTabChange=e)},refreshIndexTweets:function(){var t=$(".index-tweets-widget").find(".tweets-wrap"),e=t.find(".tweets-tab .item.active").data("tab")||"";$.get("/widgets/_index_tweets_list?type=ajax&tab="+e+"&nocache="+(new Date).getTime(),function(e){t.html(e),n.initTab(),n.parseEmoticon()})},initTweetWidgetForm:function(){var n=this;new Vue({el:"#tweetWidgetForm",data:function(){return{tweetMaxLength:160,tweetContent:"",tweetPublishLoading:!1,tipMessage:{show:!1,content:"",className:""}}},computed:{tweetContentIsEmpty:function(){return 0===this.tweetContent.length}},methods:{publishTweet:function(){var e,t=this;t.tweetPublishLoading||(t.clearMessage(),t.tweetContentIsEmpty?t.showMessage("error","内容不能为空",2e3):t.tweetContent.length>t.tweetMaxLength?t.showMessage("error","最多只能输入"+t.tweetMaxLength+"个字符！",2e3):(t.tweetPublishLoading=!0,t.showMessage("success","正在发送"),e={userId:page.g_user_id||"",user_code:page.g_user_code||"",content:t.tweetContent},$.post(page.api_prefix+"/tweet/pubForwardTweet",e,function(e){1===e.code?(t.showMessage("success",e.message||"动弹发布成功！",2e3),t.tweetPublishLoading=!1,t.tweetContent="",n.refreshIndexTweets()):t.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){t.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){t.tweetPublishLoading=!1})))},tweetContentOnKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),this.publishTweet())},tweetContentOnKeyDownCtrlEnter:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&(e.preventDefault(),this.publishTweet())},showMessage:function(e,t,n){var s=this;s.tipMessage.className="success"===e?"positive":"negative",s.tipMessage.content=t;var i=parseInt(n)||0;s.tipMessage.show=!0,0<i&&setTimeout(function(){s.clearMessage()},i)},clearMessage:function(){var e=this;e.tipMessage.className="",e.tipMessage.content="",e.tipMessage.show=!1}}})},initTab:function(){var a=this,o=$(".index-tweets-widget");o.on("click",".tweets-tab .item",function(){var e=$(this),t=e.data("tab"),n=o.find(".tweets-tab"),s=o.find(".tab-body"),i=o.find('.tab-body[data-tab="'+t+'"]');i&&0<i.length&&(n.find(".item").removeClass("active"),e.addClass("active"),s.removeClass("active"),i.addClass("active"),jQuery.isFunction(a.onTabChange)&&a.onTabChange())})},initAutoRefresh:function(){var e=this,t=~~page.tweetAutoRefreshInterval;20<=t&&setInterval(function(){e.refreshIndexTweets()},1e3*t)},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})}},e=$(".index-tweets-widget");return(!e||0!==e.length)&&(n.initTweetWidgetForm(),n.initTab(),n.parseEmoticon(),n.initAutoRefresh(),n)});
"use strict";OSCDefine("web-index",["index-tweets-widget"],function(n){function e(){}return e.prototype={constructor:e,playNews:function(){return new Vue({el:"#v_news",data:function(){return{industryNewsTab:1,projectNewsTab:1}},methods:{setPageIndex:function(n,e){this[n]=e}}}),this},playSolution:function(){var n;new Vue({el:"#v_wonderful",data:function(){return{items:window.__QUESTION_WONDERFUL||[],show:!0}},methods:{autoPlay:function(){var n=this.items,e=n.shift();setTimeout(function(){n.push(e)},1e3)},pause:function(){clearInterval(n)},play:function(){n=setInterval(this.autoPlay,1e4)}},mounted:function(){n=setInterval(this.autoPlay,1e4)}})},showAppGuide:function(){var n="app-guide",e=$(".app-guide-box"),o=window.common.getCookie(n);if(window.common.checkPC()||0===e.length||"1"===o)return!1;e.show(),$("body").addClass("app-guide-cover"),e.on("click",".btn-skip",function(){e.remove(),$("body").removeClass("app-guide-cover"),window.common.setCookie(n,"1")})},showAppDownloadBanner:function(){var n="app-download-banner",e=$(".app-download-banner-box"),o=window.common.getCookie(n);if(window.common.checkPC()||0===e.length||"1"===o)return!1;e.show(),e.on("click",".close-btn",function(){e.remove(),window.common.setCookie(n,"1",365)})},bindVisitNewIndexBtn:function(){$("body").on("click",".btn-switch-version",function(){$.post(page.api_prefix+"/IndexFeed/userSetting",{user_code:page.g_user_code,event:"homepage_version",value:"new"},function(){location.href="/index_feed"}).fail(function(){})})},register:function(){this.playNews(),this.playSolution(),this.showAppDownloadBanner(),this.bindVisitNewIndexBtn()}},e});
"use strict";OSCDefine("web-index-feed",["index-tweets-widget"],function(){function t(){var r=this;r._indexEl=$(".web-index-feed"),r._headerContainer=r._indexEl.find(".header-container"),r._mainContainer=r._indexEl.find(".main-container"),r._contentContainer=r._mainContainer.find(".content-container"),r._tabContainer=r._contentContainer.find(".tab-container"),r._articleContainer=r._contentContainer.find(".article-container"),r._articleListContainerWrap=r._articleContainer.find(".article-list-container-wrap"),r._hotBlogs=$(".index-sidebar.sidebar .section.hot-articles-list"),r._hotBlogsSticky={init:function(){if(r._hotBlogs.length<=0)return!1;var t=$(".index-sidebar.sidebar > *:last-child"),e=t.is(".section.hot-articles-list"),i=0;e||(i=t.offset().top+t.outerHeight());var n=".section.hot-articles__placeholder",o=$(".index-sidebar.sidebar > "+n);e||0!==o.length||(o=$("<div></div>").attr("class",n.replace(/\./g," ").trim()).insertBefore(r._hotBlogs));var a=r._hotBlogs.hasClass("ui sticky");768<=window.innerWidth&&window.scrollY>i?a||(e||o.css("height",r._hotBlogs.outerHeight()+"px"),r._hotBlogs.addClass("ui sticky"),r._hotBlogs.sticky({context:".index-main",offset:10})):a&&(e||o.css("height","0px"),r._hotBlogs.removeClass("ui sticky"),r._hotBlogs.sticky("destroy"))},refresh:function(){if(r._hotBlogs.length<=0)return!1;var t=r._hotBlogs.hasClass("ui sticky");768<=window.innerWidth&&t&&r._hotBlogs.sticky("refresh")}},r._articleInfiniteScroll={articleList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#articleList",itemListSelector:".article-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:5,itemSelector:".item.article-item",loadOnScroll:!0,onAppend:function(){r.optimizeImgShow(),r.initArticleItemMoreAction(),r._hotBlogsSticky.refresh()}})},r.followBtnStatusCode={UN_FOLLOW:1,FOLLOWED:2},r.followBtnStatusConf={UN_FOLLOW:{normal:{text:"关注",icon:"heart outline grey icon"},hover:{text:"关注",icon:"heart outline grey icon"}},FOLLOWED:{normal:{text:"关注",icon:"heart red icon"},hover:{text:"关注",icon:"heart red icon"}}}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.articleList&&t._articleInfiniteScroll.articleList.destroy(),t._articleInfiniteScroll.articleList.init()},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize()})},initArticleItemMoreAction:function(){this._articleListContainerWrap.find(".article-item .right-action > .item.more.dropdown").dropdown({action:"select"})},bindSearchButton:function(){this._headerContainer.find(".search-box").on("click",".search-button",function(){var t=$(this).parents(".search-form:eq(0)");0<t.find("input[name=q]").val().trim().length&&t.submit()})},initPJAX:function(){var i=this,n=i._articleContainer.find(".article-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".tab-container .tab-menu a.item",".article-list-container-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(t){n.addClass("active")}),$(document).on("pjax:complete",function(t){n.removeClass("active");var e=$(t.relatedTarget);e.data("tab");i._tabContainer.find(".tab-menu a.item").removeClass("active"),e.addClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i._hotBlogsSticky.refresh(),i.scrollTabMenuPositionOffset(),window.innerWidth<768&&$("html, body").stop(!0).animate({scrollTop:0},500,"swing")})},scrollTabMenuPositionOffset:function(){var t,e,i=this._tabContainer.find(".tab-list__inner"),n=i.find(".tab-menu .active.item");0<n.length&&(t=n.outerWidth(),e=n.position().left-i.innerWidth()/2+t/2,i.stop(!0).animate({scrollLeft:e},500,"swing"))},initHotBlog:function(){var t=this;if(t._hotBlogs.length<=0)return!1;t._hotBlogsSticky.init(),$(window).resize(window.common.throttle(t._hotBlogsSticky.init,200)),$(window).scroll(window.common.throttle(t._hotBlogsSticky.init,200))},bindAddButton:function(){this._indexEl.on("click",".toggle-add",function(t){})},updateTabBar:function(){var e=this,i=e._tabContainer.find(".tab-list__inner").find(".tab-menu .active.item").attr("data-tab");$.get("/widgets/index_feed/_index_tab_container?type=ajax",function(t){e._tabContainer.replaceWith(t),e._tabContainer=e._contentContainer.find(".tab-container"),e._tabContainer.find('.tab-menu .item[data-tab="'+i+'"]').click()})},initGuideModal:function(){var t,e,i,n,o,a,r=this;function s(){r.updateTabBar(),$.post(page.api_prefix+"/IndexFeed/userSetting",{user_code:page.g_user_code,event:"feed_guide_tags",value:"skip"},function(t){})}page.needShowGuide&&((t=$(".guide-modal")).modal({dimmerSettings:{className:{pageDimmer:"page web-index-feed-modal-dimmer",active:"active"}},closable:!1,duration:200,onShow:function(){$(this).is(".guide-modal--step-1")&&(r.bindFollowBtnHover(),r.bindFollowBtnClick())}}),t.on("click",".btn-skip",function(){s(),$(this).parents(".guide-modal").modal("hide")}),e=$(".guide-modal--step-1"),i=$(".guide-modal--step-2"),n=$(".guide-modal--step-3"),o=2,a=page.step1TagsTotalPage||1,e.on("click",".btn-next",function(){e.modal("set active",!1),i.modal("show")}),e.on("click",".btn-refresh",function(){var t=(o-1)%a+1;$.get("/widgets/index_feed/_guide_modal_tags?type=ajax&page="+t,function(t){e.find(".items-box__inner").html(t),o++})}),i.on("click",".btn-next",function(){i.modal("set active",!1),n.modal("show")}),i.on("click",".btn-prev",function(){i.modal("set active",!1),e.modal("show")}),i.on("click",".btn-refresh",function(){$.get("/widgets/index_feed/_guide_modal_authors?type=ajax",function(t){i.find(".items-box__inner").html(t)})}),n.on("click",".btn-join",function(){$.post(page.api_prefix+"/IndexFeed/userSetting",{user_code:page.g_user_code,event:"join_community_experience",value:"join"},function(t){}),s(),n.modal("hide")}),page.needShowGuide&&e.modal("show"))},initBackOldModal:function(){var e=$(".survey-modal"),i=$(".survey-form");function n(){$.post(page.api_prefix+"/IndexFeed/userSetting",{user_code:page.g_user_code,event:"homepage_version",value:"old"},function(){location.href="/"}).fail(function(){})}i.form({inline:!0,keyboardShortcuts:!1}).api({url:page.api_prefix+"/IndexFeed/back_old_survey",method:"post",serializeForm:!0,beforeSend:function(t){$(this).message("hideAll");var e=i.serializeObject();return void 0===e.score?($(this).message({type:"negative",content:"请选择评价",disappear:2e3}),!1):void 0===e.reason||0===e.reason.length?($(this).message({type:"negative",content:"请选择原因",disappear:2e3}),!1):(t.data={user_code:page.g_user_code,score:e.score,reason:e.reason,advice:e.advice},t)},onSuccess:function(t){1===t.code?(n(),e.modal("hide")):$(this).message({type:"negative",content:t.message,disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),i.find(".checkbox").checkbox(),e.modal({dimmerSettings:{className:{pageDimmer:"page web-index-feed-modal-dimmer",active:"active"}},autofocus:!1,closable:!0,onShow:function(){i.form("reset"),i.message("hideAll")}}),e.on("click",".btn-submit",function(){i.message("hideAll"),i.form("submit")}),e.on("click",".btn-skip",function(){n(),e.modal("hide")}),$("body").on("click",".btn-back-old",function(){e.modal("show")})},setFollowBtnStatus:function(t,e,i){e="normal"===e?"normal":"hover";var n,o=this,a=i.find(".text"),r=i.find("i");switch(t){case o.followBtnStatusCode.UN_FOLLOW:i.attr("data-follow-status",o.followBtnStatusCode.UN_FOLLOW),n=o.followBtnStatusConf.UN_FOLLOW[e],a.text(n.text),a&&0===a.length&&i.attr("title",n.text),r.attr("class",n.icon);break;case o.followBtnStatusCode.FOLLOWED:i.attr("data-follow-status",o.followBtnStatusCode.FOLLOWED),n=o.followBtnStatusConf.FOLLOWED[e],a.text(n.text),a&&0===a.length&&i.attr("title",n.text),r.attr("class",n.icon)}},setFollowBtnCount:function(t,e){var i=e.find(".count"),n=t;window.common&&"function"==typeof window.common.formatNumberK&&(n=window.common.formatNumberK(t)),i.text(n)},bindFollowBtnHover:function(){var i=this;$(document).on("mouseenter",".subscribe-btn",function(){var t=$(this),e=parseInt(t.attr("data-follow-status"));i.setFollowBtnStatus(e,"hover",t)}),$(document).on("mouseleave",".subscribe-btn",function(){var t=$(this),e=parseInt(t.attr("data-follow-status"));i.setFollowBtnStatus(e,"normal",t)})},bindFollowBtnClick:function(){var a=this;$(document).on("click",".subscribe-btn",function(t){t.preventDefault();var e=$(this),i=parseInt(e.attr("data-follow-status")),n=e.attr("data-id");if(!window.common.checkLogin())return!1;var o=$('.subscribe-btn[data-id="'+n+'"]');$.post(page.api_prefix+"/user/feedSubscribe",{user:page.g_user_id,user_code:page.g_user_code||"",catalog:n,event:1===i?"subscribe":"unsubscribe"},function(t){var e;1===t.code?(e=1===i?2:1,a.setFollowBtnStatus(e,"normal",o)):$("body").toast({type:"error",content:t.message||"操作失败"})})})},register:function(){this.initPJAX(),this.initArticleInfiniteScroll(),this.initArticleItemMoreAction(),this.initHotBlog(),this.bindSearchButton(),this.bindAddButton(),this.optimizeImgShow(),this.scrollTabMenuPositionOffset(),this.initGuideModal(),this.initBackOldModal()}},t});
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o,t){function e(t){void 0!==t&&_typeof(t);var e=this;t&&!t.refreshSelector&&(t.refreshSelector=t.imgSelector),e.opts=e.extend(e.defaultConf,t),e._imgEl=o(e.opts.imgSelector),e._refreshEl=o(e.opts.refreshSelector),e._inputEl=o(e.opts.inputSelector),e._captchaUrl=e.opts.captchaUrl,e._refreshEl.on("click",function(t){e.refresh(),0<e._inputEl.length&&e._inputEl.focus()})}e.prototype.refresh=function(){this._imgEl.attr("src",this._captchaUrl+"?t="+Math.random()),0<this._inputEl.length&&this._inputEl.val("")},e.prototype.defaultConf={imgSelector:".captcha img",refreshSelector:".captcha",inputSelector:"input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"},e.prototype.extend=function(t,e){var o={};for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o},t.OSCCaptcha=e}(window.jQuery||window.$,window);
var CryptoJS=CryptoJS||function(a){function i(){}var t={},n=t.lib={},e=n.Base={extend:function(t){i.prototype=this;var n=new i;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),(n.init.prototype=n).$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=n.WordArray=e.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=null!=n?n:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var n=this.words,i=t.words,e=this.sigBytes;if(t=t.sigBytes,this.clamp(),e%4)for(var r=0;r<t;r++)n[e+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(e+r)%4*8;else if(65535<i.length)for(r=0;r<t;r+=4)n[e+r>>>2]=i[r>>>2];else n.push.apply(n,i);return this.sigBytes+=t,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=a.ceil(n/4)},clone:function(){var t=e.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*a.random()|0);return new c.init(n,t)}}),r=t.enc={},s=r.Hex={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],e=0;e<t;e++){var r=n[e>>>2]>>>24-e%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var n=t.length,i=[],e=0;e<n;e+=2)i[e>>>3]|=parseInt(t.substr(e,2),16)<<24-e%8*4;return new c.init(i,n/2)}},o=r.Latin1={stringify:function(t){var n=t.words;t=t.sigBytes;for(var i=[],e=0;e<t;e++)i.push(String.fromCharCode(n[e>>>2]>>>24-e%4*8&255));return i.join("")},parse:function(t){for(var n=t.length,i=[],e=0;e<n;e++)i[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new c.init(i,n)}},h=r.Utf8={stringify:function(t){try{return decodeURIComponent(escape(o.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return o.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=e.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var n=this._data,i=n.words,e=n.sigBytes,r=this.blockSize,s=e/(4*r);if(t=(s=t?a.ceil(s):a.max((0|s)-this._minBufferSize,0))*r,e=a.min(4*t,e),t){for(var o=0;o<t;o+=r)this._doProcessBlock(i,o);o=i.splice(0,t),n.sigBytes-=e}return new c.init(o,e)},clone:function(){var t=e.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:e.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(t,n){return new i.init(n).finalize(t)}},_createHmacHelper:function(i){return function(t,n){return new f.HMAC.init(i,n).finalize(t)}}});var f=t.algo={};return t}(Math);!function(){var t=CryptoJS,n=(e=t.lib).WordArray,i=e.Hasher,u=[],e=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,n){for(var i,e=this._hash.words,r=e[0],s=e[1],o=e[2],a=e[3],c=e[4],h=0;h<80;h++){h<16?u[h]=0|t[n+h]:(i=u[h-3]^u[h-8]^u[h-14]^u[h-16],u[h]=i<<1|i>>>31),i=(r<<5|r>>>27)+c+u[h],i=h<20?i+(1518500249+(s&o|~s&a)):h<40?i+(1859775393+(s^o^a)):h<60?i+((s&o|s&a|o&a)-1894007588):i+((s^o^a)-899497514),c=a,a=o,o=s<<30|s>>>2,s=r,r=i}e[0]=e[0]+r|0,e[1]=e[1]+s|0,e[2]=e[2]+o|0,e[3]=e[3]+a|0,e[4]=e[4]+c|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,e=8*t.sigBytes;return n[e>>>5]|=128<<24-e%32,n[14+(64+e>>>9<<4)]=Math.floor(i/4294967296),n[15+(64+e>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=i._createHelper(e),t.HmacSHA1=i._createHmacHelper(e)}();
"use strict";OSCDefine("web-home-login",function(){function e(){var e=this;e._loginPanelWrapper=$("#loginPanelWrapper"),e._accountLoginForm=$("#accountLoginForm"),e._QrCodeTimer=null}return e.prototype={constructor:e,initLoginPanel:function(){var e=this;e._loginPanelWrapper.find(".checkbox").checkbox(),e._loginPanelWrapper.shape(),e._loginPanelWrapper.find(".switch-login-type").click(function(){"qrcode"===$(this).attr("data-type")?e._getQrcode():clearTimeout(e._QrCodeTimer),e._loginPanelWrapper.shape("flip back")})},initCaptcha:function(){var n=this;n._loginCaptcha=new OSCCaptcha({imgSelector:"#accountLoginForm .captcha img",refreshSelector:"#accountLoginForm .captcha",inputSelector:"#accountLoginForm input[name=verifyCode]",captchaUrl:"/user/captcha"}),$.fn.form.settings.rules.verifyCodeEmpty=function(e){return!(0===e.trim().length&&"block"===n._accountLoginForm.find(".captcha-filed").css("display"))}},initAccountLoginForm:function(){var o=this;o._accountLoginForm.form({inline:!0,fields:{account:{identifier:"account",rules:[{type:"empty",prompt:"请输入手机/邮箱"}]},pwd:{identifier:"pwd",rules:[{type:"empty",prompt:"请输入密码"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"verifyCodeEmpty",prompt:"请输入验证码"}]}}}).api({url:"/user/login",method:"post",dataType:"html",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var n=e.data;return e.data={from:n.from,email:n.account,pwd:CryptoJS.SHA1(n.pwd).toString(),verifyCode:n.verifyCode,save_login:n.save_login},e},onSuccess:function(e){var n="string"==typeof e?JSON.parse(e):e;if(n.length<=0)o._redirectLoginSuccessPage();else if(0<n.error||0<n.failCount)switch(o._showCaptchaCodeBeforeLogin(n),n.msg){case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),o._loginCaptcha.refresh(),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:n.msg})}},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},initAccountLoginFormCheckAccountNeedCaptcha:function(){var n=this;n._accountLoginForm.on("blur","input[name=account]",function(){var e={msg:"",failCount:0};0<n._accountLoginForm.find("input[name=account]").val().length&&(e.failCount=3),n._showCaptchaCodeBeforeLogin(e)})},_getQrcode:function(){var n=this;$.ajax({url:"/user/get_qrcode?_="+(new Date).getTime(),dataType:"json",cache:!1,success:function(e){$("#loginQrCode").attr("src","data:image/jpg;base64,"+e.qrCode),n._QrCodeTimer=setInterval(function(){n._setQrCodeLongConnection(e.uuid)},2e3)}})},_setQrCodeLongConnection:function(e){var n=this;$.ajax({url:"/user/long_connection",method:"post",data:{uuid:e},cache:!1,success:function(e){"success"===e?n._redirectLoginSuccessPage():null!=e&&"out of date"!==e||location.reload()}})},_redirectLoginSuccessPage:function(){var e,n=page.login_success_redirect||"";n&&0<n.length&&(n.indexOf("nocache")<0&&(e=-1<n.indexOf("?"),n=n+(e?"&":"?")+"nocache="+(new Date).getTime()),window.location.href=n)},_showCaptchaCodeBeforeLogin:function(e){var n=this;2<e.failCount||1===e.error?(n._loginCaptcha.refresh(),n._accountLoginForm.find(".captcha-filed").css("display","block")):(n._accountLoginForm.find(".captcha-filed").css("display","none"),n._accountLoginForm.find("input[name=verifyCode]").val(""))},register:function(){this.initLoginPanel(),this.initCaptcha(),this.initAccountLoginForm(),this.initAccountLoginFormCheckAccountNeedCaptcha()}},e});
"use strict";OSCDefine("web-home-register",function(){function e(){var e=this;e._registerPanelWrapper=$("#registerPanelWrapper"),e._mobileRegisterForm=$("#mobileRegisterForm"),e._sendPhoneCodeBtn=e._registerPanelWrapper.find(".send-phone-code"),e._mobileRegisterCaptcha=new OSCCaptcha({imgSelector:"#mobileRegisterForm .captcha img",refreshSelector:"#mobileRegisterForm .captcha",inputSelector:"#mobileRegisterForm input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"})}return e.prototype={constructor:e,_phoneCodeCountDown:function(e){var t=this,o=e||60;t._sendPhoneCodeBtn.addClass("disabled"),t._sendPhoneCodeBtn.text(o+"s 后重新发送"),window.localStorage&&localStorage.setItem("register_phone_code",parseInt((new Date).getTime()/1e3)+o);var r=setInterval(function(){--o<1?(clearInterval(r),t._sendPhoneCodeBtn.removeClass("disabled"),t._sendPhoneCodeBtn.text("获取验证码")):(t._sendPhoneCodeBtn.text(o+"s 后重新发送"),window.localStorage&&localStorage.setItem("register_phone_code",parseInt((new Date).getTime()/1e3)+o))},1e3)},_redirectRegisterSuccessPage:function(){var e,t=page.register_success_redirect||"";t&&0<t.length&&(t.indexOf("nocache")<0&&(e=-1<t.indexOf("?"),t=t+(e?"&":"?")+"nocache="+(new Date).getTime()),window.location.href=t)},initRegisterForm:function(){var o=this;o._registerPanelWrapper.find(".checkbox").checkbox(),$.fn.form.settings.rules.password=function(e){return!(!e.match(/[0-9]/)||!e.match(/[a-zA-Z]/)&&!/\W/.test(e))},o._mobileRegisterForm.form({inline:!0,fields:{phone:{identifier:"phone",rules:[{type:"empty",prompt:"请输入手机号码"},{type:"regExp",value:/^1([0-9]{10})$/,prompt:"请输入正确的手机号码"}]},name:{identifier:"name",rules:[{type:"minLength[2]",prompt:"昵称长度至少 {ruleValue} 位"},{type:"maxLength[20]",prompt:"昵称长度不能超过 {ruleValue} 位"}]},pwd:{identifier:"pwd",rules:[{type:"empty",prompt:"请输入密码"},{type:"minLength[8]",prompt:"密码长度至少 {ruleValue} 位"},{type:"maxLength[20]",prompt:"密码长度不能超过 {ruleValue} 位"},{type:"password",prompt:"密码必须由字母或特殊字符和数字组成"}]},cpwd:{identifier:"cpwd",rules:[{type:"empty",prompt:"请再次输入密码"},{type:"match[pwd]",prompt:"两次密码输入不一致"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入图片验证码"}]},phone_v_code:{identifier:"phone_v_code",rules:[{type:"empty",prompt:"请输入短信验证码"}]},gender:{identifier:"gender",rules:[{type:"empty",prompt:"请选择性别"}]},agree_terms:{identifier:"agree_terms",rules:[{type:"checked",prompt:"请阅读并同意服务条款"}]}}}).api({url:"/action/user/quick_create",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data.pwd=CryptoJS.SHA1(t.pwd).toString(),e},onSuccess:function(e){var t=e;if(t.success)return o._redirectRegisterSuccessPage(),!1;switch(o._mobileRegisterCaptcha.refresh(),t.msg){case"phone_exist":$(this).form("add prompt","phone","该号码已存在");break;case"phone_number_error":$(this).form("add prompt","phone","请输入正确的手机号码");break;case"phone_v_code_empty":$(this).form("add prompt","phone_v_code","请输入短信验证码");break;case"phone_v_code_error":$(this).form("add prompt","phone_v_code","请输入正确的短信验证码"),$(this).form("set value","phone_v_code","");break;case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:t.msg})}},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},initSendPhoneCodeBtn:function(){var e=this;e._sendPhoneCodeBtn.on("click",function(){e._mobileRegisterForm.form("validate field","phone")&&e._mobileRegisterForm.form("validate field","verifyCode")&&(e._sendPhoneCodeBtn.addClass("loading"),setTimeout(function(){e._phoneCodeCountDown(),e._sendPhoneCodeBtn.removeClass("loading")},1e3))})},initPhoneCodeLocalStorage:function(){var o=this;$(function(){var e,t=0;window.localStorage&&(t=localStorage.getItem("register_phone_code"))&&(0<(e=t-parseInt((new Date).getTime()/1e3))?o._phoneCodeCountDown(e):localStorage.removeItem("register_phone_code"))})},register:function(){this.initRegisterForm(),this.initSendPhoneCodeBtn(),this.initPhoneCodeLocalStorage()}},e});
"use strict";OSCDefine("web-home-reset-pwd",function(){function e(){var e=this;e._resetPwdPanelWrapper=$("#resetPwdPanelWrapper"),e._mobileResetPwdForm=$("#mobileResetPwdForm"),e._emailResetPwdForm=$("#emailResetPwdForm"),e._sendPhoneCodeBtn=e._resetPwdPanelWrapper.find(".send-phone-code"),e._mobileResetPwdCaptcha=new OSCCaptcha({imgSelector:"#mobileResetPwdForm .captcha img",refreshSelector:"#mobileResetPwdForm .captcha",inputSelector:"#mobileResetPwdForm input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"}),e._emailResetPwdCaptcha=new OSCCaptcha({imgSelector:"#emailResetPwdForm .captcha img",refreshSelector:"#emailResetPwdForm .captcha",inputSelector:"#emailResetPwdForm input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"})}return e.prototype={constructor:e,_phoneCodeCountDown:function(e){var t=this,o=e||60;t._sendPhoneCodeBtn.addClass("disabled"),t._sendPhoneCodeBtn.text(o+"s 后重新发送"),window.localStorage&&localStorage.setItem("reset_pwd_phone_code",parseInt((new Date).getTime()/1e3)+o);var i=t.setInterval(function(){--o<1?(clearInterval(i),t._sendPhoneCodeBtn.removeClass("disabled"),t._sendPhoneCodeBtn.text("获取验证码")):(t._sendPhoneCodeBtn.text(o+"s 后重新发送"),window.localStorage&&localStorage.setItem("reset_pwd_phone_code",parseInt((new Date).getTime()/1e3)+o))},1e3)},initResetPwdPanelTab:function(){var t=this;t._resetPwdPanelWrapper.find(".reset-pwd-tab .item").tab({onLoad:function(e){switch(e){case"mobile":t._mobileResetPwdForm.form("reset"),t._mobileResetPwdCaptcha.refresh();break;case"email":t._emailResetPwdForm.form("reset"),t._emailResetPwdCaptcha.refresh()}}})},initMobileResetPwdForm:function(){var o=this;o._mobileResetPwdForm.form({inline:!0,fields:{phone:{identifier:"phone",rules:[{type:"empty",prompt:"请输入手机号码"},{type:"regExp",value:/^1([0-9]{10})$/,prompt:"请输入正确的手机号码"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入图片验证码"}]},code:{identifier:"code",rules:[{type:"empty",prompt:"请输入短信验证码"}]}}}).api({url:"/action/user/resetPwdByPhoneStepOne",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){var t=e;if(t.result)location.href="reset-pwd-by-phone2";else if(t.msg)switch(o._mobileResetPwdCaptcha.refresh(),t.msg){case"手机验证码错误":$(this).form("add prompt","code","请输入正确的短信验证码"),$(this).form("set value","code","");break;case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:t.msg})}},onFailure:function(){o._mobileResetPwdForm.message({type:"negative",content:"网络错误，请稍后再试"})}})},initEmailResetPwdForm:function(){var o=this;o._emailResetPwdForm.form({inline:!0,fields:{email:{identifier:"email",rules:[{type:"empty",prompt:"请输入邮箱地址"},{type:"email",prompt:"请输入正确的邮箱地址"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入图片验证码"}]}}}).api({url:"/action/user/pwd_reset_request",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){var t=e;if(t.success)return $(this).message({type:"positive",content:t.msg}),!1;switch(o._emailResetPwdCaptcha.refresh(),t.msg){case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:t.msg})}},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},initSendPhoneCodeBtn:function(){var e=this;e._sendPhoneCodeBtn.on("click",function(){e._mobileResetPwdForm.form("validate field","phone")&&e._mobileResetPwdForm.form("validate field","verifyCode")&&(e._sendPhoneCodeBtn.addClass("loading"),setTimeout(function(){e._phoneCodeCountDown(),e._sendPhoneCodeBtn.removeClass("loading")},1e3))})},initPhoneCodeLocalStorage:function(){var o=this;$(function(){var e,t=0;window.localStorage&&(t=localStorage.getItem("reset_pwd_phone_code"))&&(0<(e=t-parseInt((new Date).getTime()/1e3))?o._phoneCodeCountDown(e):localStorage.removeItem("reset_pwd_phone_code"))})},register:function(){this.initResetPwdPanelTab(),this.initMobileResetPwdForm(),this.initEmailResetPwdForm(),this.initSendPhoneCodeBtn(),this.initPhoneCodeLocalStorage()}},e});
"use strict";OSCDefine("web-home-reset-pwd2",function(){function e(){this._resetPwdForm=$("#resetPwdForm"),this._resetPWdCaptcha=new OSCCaptcha({imgSelector:"#resetPwdForm .captcha img",refreshSelector:"#resetPwdForm .captcha",inputSelector:"#resetPwdForm input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"})}return e.prototype={constructor:e,initResetPwdForm:function(){$.fn.form.settings.rules.password=function(e){return!(!e.match(/[0-9]/)||!e.match(/[a-zA-Z]/)&&!/\W/.test(e))},self._resetPwdForm.form({inline:!0,fields:{pwd:{identifier:"pwd",rules:[{type:"empty",prompt:"请输入新的登录密码"},{type:"minLength[8]",prompt:"密码长度至少 {ruleValue} 位"},{type:"maxLength[20]",prompt:"密码长度不能超过 {ruleValue} 位"},{type:"password",prompt:"密码必须由字母或特殊字符和数字组成"}]},pwd2:{identifier:"pwd2",rules:[{type:"empty",prompt:"请再次输入新的登录密码"},{type:"match[pwd]",prompt:"两次密码输入不一致"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入验证码"}]}}}).api({url:"/user/reset_pwd",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){var t=e;if(0===t.length)return $(this).message({type:"positive",content:"重置成功"}),setTimeout(function(){location.href="login"},2e3),!1;switch(_resetPWdCaptcha.refresh(),t){case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:t})}},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},register:function(){this.initResetPwdForm()}},e});
"use strict";OSCDefine("web-home-reset-pwd-by-phone2",function(){function e(){this._resetPwdForm=$("#resetPwdForm"),this._resetPWdCaptcha=new OSCCaptcha({imgSelector:"#resetPwdForm .captcha img",refreshSelector:"#resetPwdForm .captcha",inputSelector:"#resetPwdForm input[name=verifyCode]",captchaUrl:"https://www.oschina.net/action/user/captcha"})}return e.prototype={constructor:e,initResetPwdForm:function(){$.fn.form.settings.rules.password=function(e){return!(!e.match(/[0-9]/)||!e.match(/[a-zA-Z]/)&&!/\W/.test(e))},this._resetPwdForm.form({inline:!0,fields:{pwd:{identifier:"pwd",rules:[{type:"empty",prompt:"请输入新的登录密码"},{type:"minLength[8]",prompt:"密码长度至少 {ruleValue} 位"},{type:"maxLength[20]",prompt:"密码长度不能超过 {ruleValue} 位"},{type:"password",prompt:"密码必须由字母或特殊字符和数字组成"}]},repeatPwd:{identifier:"repeatPwd",rules:[{type:"empty",prompt:"请再次输入新的登录密码"},{type:"match[pwd]",prompt:"两次密码输入不一致"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入验证码"}]}}}).api({url:"/user/resetPwdByPhoneStepTwo",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){var t=e;if(t.result)return $(this).message({type:"positive",content:"重置成功"}),setTimeout(function(){location.href="login"},2e3),!1;switch(_resetPWdCaptcha.refresh(),t.msg){case"验证码错误":$(this).form("add prompt","verifyCode","请输入正确的图片验证码"),$(this).find("input[name=verifyCode]").focus();break;default:$(this).message({type:"negative",content:t.msg})}},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},register:function(){this.initResetPwdForm()}},e});
"use strict";OSCPlugin("project-common",function(){function t(){var t=this;this._projectSidebar=$(".project-sidebar"),this._projectListContainer=$(".project-list-container"),this._projectListHeader=this._projectListContainer.children(".header-wrap.ui.sticky"),this._projectListHeaderSticky={init:function(){if(t._projectListHeader.length<=0)return!1;768<=window.innerWidth?t._projectListHeader.sticky({context:".project-list-container",offset:45}):t._projectListHeader.sticky("destroy")},refresh:function(){if(t._projectListHeader.length<=0)return!1;768<=window.innerWidth&&t._projectListHeader.sticky("refresh")}},this.register()}return t.prototype={constructor:t,initSidebarSectionTabs:function(){this._projectSidebar.on("click",".section .tabs .tab[data-tab]",function(t){var i=$(this),e=i.data("tab"),r=i.parents(".section:eq(0)"),n=r.find('.tab-body[data-tab="'+e+'"]');n&&0<n.length&&(r.find(".tabs .tab").removeClass("active"),i.addClass("active"),r.find(".tab-body").removeClass("active"),n.addClass("active"))})},initSidebarNumPopup:function(){768<=window.innerWidth&&this._projectSidebar.find(".popup-num").popup({hoverable:!0})},initProjectListHeaderSticky:function(){var t=this;t._projectListHeader=this._projectListContainer.children(".header-wrap.ui.sticky"),t._projectListHeaderSticky.init(),$(window).resize(t._projectListHeaderSticky.init)},refreshProjectListHeaderSticky:function(){this._projectListHeaderSticky.refresh()},register:function(){this.initSidebarSectionTabs(),this.initSidebarNumPopup()}},t});
"use strict";OSCDefine("web-project-index",["project-common"],function(o){function t(){this._projectEl=$(".web-project"),this._projectListContainerWrap=this._projectEl.find(".project-list-container-wrap");var t=this;this._articleInfiniteScroll={projectList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#projectList",itemListSelector:".projects-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.project-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),o.refreshProjectListHeaderSticky()}})}}return t.prototype={constructor:t,initCategoryMenu:function(){$("#projectCategoryMenu .dropdown").dropdown({on:"hover"})},initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.projectList&&(t._articleInfiniteScroll.projectList.destroy(),t._articleInfiniteScroll.projectList.init())},initPJAX:function(){var e=this,i=$(".project-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".project-list-container-wrap .header-wrap .filter-bar .dropdown .item, .project-list-container-wrap .header-wrap .sort-bar .sort-list .sort-item",".project-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){i.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);i.removeClass("active"),e.initArticleInfiniteScroll(),e.optimizeImgShow(),e.initFilterToolBar(),o.initProjectListHeaderSticky(),e._projectListContainerWrap.offset().top-$(window).scrollTop()<62&&e.scrollToListHeader()})},initFilterToolBar:function(){this._projectListContainerWrap.find(".filter-bar .dropdown").dropdown();var e=this._projectListContainerWrap.find(".filter-bar .only-recommend.checkbox");e.checkbox({onChange:function(){var t=e.data("url");$.pjax({url:t,container:".project-list-container",scrollTo:!1})}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(90,90)})},scrollToListHeader:function(){var t=this._projectListContainerWrap.offset().top;0<t-97&&(t-=97),$("html, body").stop(!0).animate({scrollTop:t},500,"swing")},register:function(){this.initCategoryMenu(),this.initArticleInfiniteScroll(),this.initPJAX(),this.initFilterToolBar(),o.initProjectListHeaderSticky()}},t});
"use strict";OSCDefine("web-project-list",["project-common"],function(o){function t(){this._projectEl=$(".web-project-list"),this._projectListContainerWrap=this._projectEl.find(".project-list-container-wrap");var t=this;this._articleInfiniteScroll={projectList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#projectList",itemListSelector:".projects-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.project-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),o.refreshProjectListHeaderSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.projectList&&(t._articleInfiniteScroll.projectList.destroy(),t._articleInfiniteScroll.projectList.init())},initPJAX:function(){var i=this,e=$(".project-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".project-list-container-wrap .header-wrap .filter-bar .dropdown .item, .project-list-container-wrap .header-wrap .sort-bar .sort-list .sort-item",".project-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i.initFilterToolBar(),o.initProjectListHeaderSticky(),i._projectListContainerWrap.offset().top-$(window).scrollTop()<62&&i.scrollToListHeader()})},initFilterToolBar:function(){this._projectListContainerWrap.find(".filter-bar .dropdown").dropdown();var i=this._projectListContainerWrap.find(".filter-bar .only-recommend.checkbox");i.checkbox({onChange:function(){var t=i.data("url");$.pjax({url:t,container:".project-list-container",scrollTo:!1})}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(90,90)})},scrollToListHeader:function(){var t=this._projectListContainerWrap.offset().top;0<t-97&&(t-=97),$("html, body").stop(!0).animate({scrollTop:t},500,"swing")},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.initFilterToolBar(),o.initProjectListHeaderSticky()}},t});
"use strict";OSCDefine("web-project-zh",["project-common"],function(o){function t(){this._projectEl=$(".web-project-zh"),this._projectListContainerWrap=this._projectEl.find(".project-list-container-wrap");var t=this;this._articleInfiniteScroll={projectList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#projectList",itemListSelector:".projects-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.project-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),o.refreshProjectListHeaderSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.projectList&&(t._articleInfiniteScroll.projectList.destroy(),t._articleInfiniteScroll.projectList.init())},initPJAX:function(){var i=this,e=$(".project-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".project-list-container-wrap .header-wrap .filter-bar .dropdown .item, .project-list-container-wrap .header-wrap .sort-bar .sort-list .sort-item",".project-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i.initFilterToolBar(),o.initProjectListHeaderSticky(),i._projectListContainerWrap.offset().top-$(window).scrollTop()<62&&i.scrollToListHeader()})},initFilterToolBar:function(){this._projectListContainerWrap.find(".filter-bar .dropdown").dropdown();var i=this._projectListContainerWrap.find(".filter-bar .only-recommend.checkbox");i.checkbox({onChange:function(){var t=i.data("url");$.pjax({url:t,container:".project-list-container",scrollTo:!1})}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(90,90)})},scrollToListHeader:function(){var t=this._projectListContainerWrap.offset().top;0<t-97&&(t-=97),$("html, body").stop(!0).animate({scrollTop:t},500,"swing")},initHotProjectsTab:function(){var r=this._projectEl.find(".nation-hot-projects-wrap");r.on("click",".panel-header .tabs .tab[data-tab]",function(t){var i=$(this),e=i.data("tab"),o=r.find('.tab-body[data-tab="'+e+'"]');o&&0<o.length&&(r.find(".tabs .tab").removeClass("active"),i.addClass("active"),r.find(".tab-body").removeClass("active"),o.addClass("active"))})},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.initFilterToolBar(),this.initHotProjectsTab(),o.initProjectListHeaderSticky()}},t});
$(function(){var t=0;$(".github-widget").each(function(){0==t&&$("head").append('<style type="text/css">.github-box{font-family:helvetica,arial,sans-serif;font-size:13px;line-height:18px;background:#fafafa;border:1px solid #ddd;color:#666;border-radius:3px}.github-box a{color:#4183c4;border:0;text-decoration:none}.github-box .github-box-title{position:relative;border-bottom:1px solid #ddd;border-radius:3px 3px 0 0;background:#fcfcfc;background:-moz-linear-gradient(#fcfcfc,#ebebeb);background:-webkit-linear-gradient(#fcfcfc,#ebebeb);}.github-box .github-box-title h3{font-family:helvetica,arial,sans-serif;font-weight:normal;font-size:16px;color:gray;margin:0;padding:10px 10px 10px 80px;background:url(http://www.oschina.net/img/github_logo.gif) bottom left no-repeat}.github-box .github-box-title h3 .repo{font-weight:bold}.github-box .github-box-title .github-stats{position:absolute;top:9px;right:10px;background:white;border:1px solid #ddd;border-radius:3px;font-size:12px;font-weight:bold;line-height:22px;height:22px;padding-left:2px;}.github-box .github-box-title .github-stats a{display:inline-block;height:20px;color:#666;padding:0 6px 0 0;}.github-box .github-box-title .github-stats span{display:inline-block;height:20px;padding:0 4px 0 6px;}.github-box .github-box-title .github-stats a + span{border-left:1px solid #ddd;}.github-box .github-box-content{padding:10px;font-weight:400}.github-box .github-box-content p{margin:0}.github-box .github-box-content .link{font-weight:bold}.github-box .github-box-download{position:relative;border-top:1px solid #ddd;background:white;border-radius:0 0 3px 3px;padding:6px 10px}.github-box .github-box-download .updated{margin:0;font-size:12px;color:#666;line-height:24px;font-weight:400}.github-box .github-box-download .updated strong{font-weight:bold;color:#000}.github-box .github-box-download .download{position:absolute;display:block;top:6px;right:10px;height:24px;line-height:24px;font-size:12px;color:#666;font-weight:bold;text-shadow:0 1px 0 rgba(255,255,255,0.9);padding:0 10px;border:1px solid #ddd;border-bottom-color:#bbb;border-radius:3px;background:#f5f5f5;background:-moz-linear-gradient(#f5f5f5,#e5e5e5);background:-webkit-linear-gradient(#f5f5f5,#e5e5e5);}.github-box .github-box-download .download:hover{color:#527894;border-color:#cfe3ed;border-bottom-color:#9fc7db;background:#f1f7fa;background:-moz-linear-gradient(#f1f7fa,#dbeaf1);background:-webkit-linear-gradient(#f1f7fa,#dbeaf1);</style>'),t++;function s(t){return t&&0!=t.length?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}var o=$(this),r=o.data("repo");$.ajax({url:"https://api.github.com/repos/"+r,dataType:"jsonp",success:function(t){if(!t||!t.meta||200!==t.meta.status)return!1;var e,i=t.data,a=i.pushed_at.substr(0,10);i.homepage?(e=i.homepage.match(/((http|https):\/\/)*[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/))&&e[0]&&!e[1]&&(i.homepage="http://"+e[0]):i.homepage="",$(' \t\t\t\t\t<div class="github-box repo">  \t\t\t\t\t    <div class="github-box-title"> \t\t\t\t\t        <h3> \t\t\t\t\t            <a class="owner" href="'+i.owner.url.replace("api.","").replace("users/","")+'" target="_blank">'+i.owner.login+'</a> \t\t\t\t\t            /  \t\t\t\t\t            <a class="repo" href="'+i.url.replace("api.","").replace("repos/","")+'" target="_blank">'+i.name+'</a> \t\t\t\t\t        </h3> \t\t\t\t\t        <div class="github-stats"><span>Watch</span> <a class="watchers" title="Watchers" href="'+i.url.replace("api.","").replace("repos/","")+'/watchers" target="_blank">'+i.subscribers_count+'</a><span>Star</span> <a class="stars" title="Stars" href="'+i.url.replace("api.","").replace("repos/","")+'/stargazers" target="_blank">'+i.stargazers_count+'</a><span>Fork</span> <a class="forks" title="Forks" href="'+i.url.replace("api.","").replace("repos/","")+'/network" target="_blank">'+i.forks+'</a></div> \t\t\t\t\t    </div> \t\t\t\t\t    <div class="github-box-content"> \t\t\t\t\t        <p class="description">'+s(i.description)+' &mdash; <a href="'+i.url.replace("api.","").replace("repos/","")+'#readme"  target="_blank">More...</a></p> \t\t\t\t\t        <p class="link"><a href="'+i.homepage+'">'+s(i.homepage)+'</a></p> \t\t\t\t\t        <table class="issues" width="100%"></table> \t\t\t\t\t    </div> \t\t\t\t\t    <div class="github-box-download"> \t\t\t\t\t        <p class="updated"><a href="'+i.url.replace("api.","").replace("repos/","")+"/tree/"+i.default_branch+'" target="_blank"><strong>'+i.default_branch+"</strong> 分支</a> ："+a+'</p> \t\t\t\t\t        <a class="download" href="'+i.url.replace("api.","").replace("repos/","")+'/zipball/master">下载zip</a> \t\t\t\t\t    </div> \t\t\t\t\t</div> \t\t\t\t').appendTo(o),i.has_issues&&0<i.open_issues&&$.ajax({url:"https://api.github.com/repos/"+r+"/issues?state=open&per_page=5&page=1&sort=updated",dataType:"jsonp",success:function(t){var e=t.data,a=$(".github-box-content table");a.append('<tr><td colspan="2"><a href="'+i.html_url+'/issues" target="_blank"><strong>Issues</strong></a></td></tr>');for(var o=0;o<e.length;o++){var r=e[o].updated_at.substr(0,10);a.append('<tr> \t\t\t\t\t\t\t\t\t\t<td class="number" width="30">#'+e[o].number+'</td> \t\t\t\t\t\t\t\t\t\t<td class="info"><a href="'+e[o].html_url+'" target="_blank">'+s(e[o].title)+'</a></td> \t\t\t\t\t\t\t\t\t\t<td class="author" width="200" align="right">by <a href="'+e[o].user.url.replace("api.","").replace("users/","")+'" target="_blank">'+e[o].user.login+'</a>&nbsp;&nbsp;<em style="font-size: 8pt;font-family: Candara,arial;color: #666;-webkit-text-size-adjust: none;">'+r+"</em></td></tr> \t\t\t\t\t\t\t\t")}}})}})})});
"use strict";OSCPlugin("project-detail-comments",function(){return function(){var t={config:{objId:0,fetchCommentsUrl:"",publishCommentUrl:"",replyCommentUrl:"",deleteCommentUrl:""},init:function(e){this._commentsContainer=$("#commentsContainer"),this._commentsWrap=this._commentsContainer.find(".comments-wrap"),this.config=$.isPlainObject(e)?$.extend(!0,{},this.config,e):$.extend({},this.config)},loadComments:function(e,t){var o,n=this,a=Math.floor(e)||1;-1===a&&(o=n._commentsWrap.find(".pagination-wrap"),a=Math.floor(o.data("page"))||1);var r=window.common.addQueryParams(n.config.fetchCommentsUrl,{p:a});$.get(r,function(e){n._commentsWrap.html(e),n.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},loadCommentsByCommentId:function(e,t){var o=this,n=Math.floor(e)||1,a=window.common.addQueryParams(o.config.fetchCommentsUrl,{commentId:n});$.get(a,function(e){o._commentsWrap.html(e),o.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},initCommentForm:function(){var a=this,r="OSC_PROJECT_"+page.objId+"_COMMENT_CACHE",o="OSC_PROJECT_"+page.objId+"_COMMENT_PUBLISH_CACHE",t=window.common.throttle(function(e){try{e&&0<e.trim().length?localStorage.setItem(r,e):localStorage.removeItem(r)}catch(e){}},500);a.commentFormVue=new Vue({el:"#commentForm",data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},mounted:function(){var e,t;void 0!==window.localStorage&&(e=localStorage.getItem(r)||"",t=localStorage.getItem(o)||"",e&&0<e.trim().length&&(this.commentContent=e,t&&page.g_user_code&&(localStorage.removeItem(o),this.publishComment())))},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){this.clearMessage();var e,t,o="#此处输入软件#";this.insertContent(o)&&(t=(e=selectRange.of(this.$refs.commentTextarea)).getCurPos(),e.setSelectText(t-(o.length-1),t-1))},publishComment:function(){var e,n=this,t=window.common.getCurrentUrl(!0)+"#commentForm";if(!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(o,"1")}catch(e){}}))return!1;n.tweetPublishLoading||(n.clearMessage(),n.commentContentIsEmpty?n.showMessage("error","内容不能为空",2e3):n.commentContent.length>n.commentMaxLength?n.showMessage("error","最多只能输入"+n.commentMaxLength+"个字符！",2e3):(n.commentPublishLoading=!0,e={projectId:a.config.objId,comment:n.commentContent,user_code:page.g_user_code||""},$.post(a.config.publishCommentUrl,e,function(e){var t,o;1===e.code?(e.message&&$("body").toast({type:"success",content:e.message||"评论发布成功"}),window.localStorage&&window.localStorage.removeItem(r),n.commentContent="",a.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),$("html, body").stop().animate({scrollTop:a._commentsWrap.offset().top-80},500,"swing")):n.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){n.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){n.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=t;var a=parseInt(o)||0;n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}},watch:{commentContent:function(e){t(e)}}}),$("#commentForm").find(".comment-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),n=$(o).parent().find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:n,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},initCommentDeleteModal:function(){var s=this,o=$(".delete-comment.modal");o.modal({onDeny:function(){var e=$(this).attr("data-comment-id"),i=s._commentsWrap.find("div.comment[data-comment-id="+e+"]");i.attr("data-comment-user-id");$.post(s.config.deleteCommentUrl,{commentId:e,user_code:page.g_user_code||""},function(e){var t,o,n,a,r;1===e.code?($("body").toast({type:"success",content:"删除成功"}),i.fadeOut(function(){i.remove()}),o=(t=s._commentsWrap.find("> .header span")).text(),n=$("[data-article-reply-count]"),a=$(".float-menu .comment-btn"),o?((r=parseInt(o)-(1+i.find("div.comment").length))<0&&(r=0),t.text(r),n.html(r),a.attr("title","共有 "+r+" 条评论")):(t.text(0),n.html(0),a.attr("title","共有 0 条评论")),e.result&&void 0!==e.result.selfCommentCount&&e.result.selfCommentCount<=0&&a.find(".icon").addClass("outline")):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),s._commentsWrap.on("click",".actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)").attr("data-comment-id");o.attr("data-comment-id",t),o.modal("show")})},initReplyCommentModal:function(){var n=this,a=$(".reply-comment.modal"),r=$("#replyCommentForm");a.modal({onShow:function(){r.form("reset"),r.message("hideAll");var e=$(this).attr("data-comment-user-id")||-1,t=$(this).attr("data-comment-id")||-1;r.find("input[name=reply_id]").val(e+"_"+t)},onApprove:function(){return r.message("hideAll"),r.form("submit"),!1}}),r.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[1000]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:n.config.replyCommentUrl,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={article:n.config.objId,reply_id:t.reply_id,content:t.content},e},onSuccess:function(e){var t,o;1===e.code?($(this).message({type:"positive",content:"评论回复成功"}),r.form("reset"),n.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),setTimeout(function(){a.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"回复失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()}),n._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment:eq(0)"),o=t.attr("data-comment-user-id"),n=t.attr("data-comment-id");a.attr("data-comment-user-id",o),a.attr("data-comment-id",n),a.modal("show")})},bindReplyBtn:function(){var l=this;l._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t,n=$(e.target).parents(".comment:eq(0)"),a=n.attr("data-comment-id"),o=n.attr("data-comment-user-name"),r=!!n.data("comment-is-last-level"),i=a,s="";if(r&&((t=n.parents(".comment:eq(0)"))&&(i=t.attr("data-comment-id")),s=o),0<n.find(".content:eq(0) [data-rely-comment-form]").length){var c=n.find(".content:eq(0) [data-rely-comment-form]").get(0);return c.vueInstance&&c.vueInstance.focus(),!1}$("[data-rely-comment-form]").each(function(e,t){var o=$(t);t.vueInstance&&t.vueInstance.$destroy(),o.remove()}),0===$('[data-reply-comment-form][data-comment-id="'+a+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get("/widgets/comments_reply_form",function(e){var t=document.createElement("div");t.innerHTML=e,$(t).find("[data-reply-comment-form]").attr("data-comment-id",a),n.find(".content:eq(0)").append(t);var o=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:l._commentsWrap,toggleLoadComments:function(){l.loadComments(-1)},url:l.config.replyCommentUrl,params:{projectId:l.config.objId,user_code:page.g_user_code||"",parentId:i},commentedAutoScrollToTop:!1,contentField:"comment"});o.init(),o.focus(),s&&o.insertContent("回复 @"+s+" : ")}).always(function(){window.oscReplyCommentFormLoading=!1}))})},initCommentsListPJAX:function(){var t=this,o=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax("#commentsContainer .comments-wrap .pagination a","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(e){$(e.target);"comments-wrap"===e.target.className&&o.addClass("active")}),$(document).on("pjax:complete",function(e){$(e.target);"comments-wrap"===e.target.className&&(t.parseEmoticon(),o.removeClass("active"),$("html, body").stop().animate({scrollTop:t._commentsWrap.offset().top-60},500,"swing"))})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},scrollToCommentFromUrlCommentId:function(){var o=location.hash,e=o.match(/#rpl_(\d+).*/),t=e?Math.floor(e[1]):-1;0<t&&this.loadCommentsByCommentId(t,function(){setTimeout(function(){var e,t=$(o);t.length&&(0<(e=t.offset().top)-160&&(e-=160),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))},0)})}};new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js"],function(){var e=window.page;t.init({objId:e.objId,fetchCommentsUrl:e.fetchCommentsUrl,publishCommentUrl:e.publishCommentUrl,replyCommentUrl:e.replyCommentUrl,deleteCommentUrl:e.deleteCommentUrl}),t.initCommentForm(),t.initCommentDeleteModal(),t.bindReplyBtn(),t.initCommentsListPJAX(),t.parseEmoticon(),t.scrollToCommentFromUrlCommentId()}).loadFiles()}});
"use strict";OSCDefine("web-project-detail",["project-detail-comments"],function(){function t(){var t=this;this._projectDetailEl=$(".web-project-detail"),this._projectDetailContainer=this._projectDetailEl.find(".project-detail-container"),this._projectDetailContainerTab=this._projectDetailContainer.find(".project-detail-tab-wrap"),this._tabSticky={init:function(){if($(".project-detail-container").length<=0)return!1;768<=window.innerWidth?t._projectDetailContainerTab.sticky({context:".project-detail-container",offset:45}):t._projectDetailContainerTab.sticky("destroy")},refresh:function(){if($(".project-detail-container").length<=0)return!1;768<=window.innerWidth&&t._projectDetailContainerTab.sticky("refresh")}}}return t.prototype={constructor:t,projectRating:function(){var o=this._projectDetailEl.find(".project-rating .ui.rating");o.rating({maxRating:5,onRate:function(t){if(!window.common.checkLogin())return!1;var e=2*t;$.post(page.api_prefix+"/action/project/comment",{comment:"",projectId:page.objId,user_code:page.g_user_code,score:e},function(t){t.result&&o.rating("disable")})}}),o.attr("disabled")&&o.rating("disable")},hightlight:function(){$("pre, pre code").each(function(t,e){var o,i=$(this),n=(i.attr("class")||"").match(/language-(.*)/);n&&1<n.length&&(o=n[n.length-1],i.attr("class","hljs "+o)),hljs.highlightBlock(e)})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},initDetailContainer:function(){var t,o=this,i={newsList:1,questionList:1,blogList:1,otherList:1},n={newsList:new OSCInfiniteScroll({pagePath:".news-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){o.optimizeImgShow(),o.refreshTabSticky()}}),questionList:new OSCInfiniteScroll({pagePath:".question-pagination.pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){o.optimizeImgShow(),o.refreshTabSticky()}}),blogList:new OSCInfiniteScroll({pagePath:".blog-pagination.pagination__next",checkLastPage:!0,containerSelector:"#blogList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){o.optimizeImgShow(),o.refreshTabSticky()}}),otherList:new OSCInfiniteScroll({pagePath:".other-pagination.pagination__next",checkLastPage:!0,containerSelector:"#otherList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){o.optimizeImgShow(),o.refreshTabSticky()}})},e="",a=o._projectDetailContainer.find(".active.tab");0<a.length&&((t=a.attr("data-tab")||"")&&n[t]&&(e=t)),n[e]&&n[e].init();var r=e;o._projectDetailContainer.find(".project-detail-tab.menu .item").tab({onLoad:function(t){var e;r!==t&&(n[r]&&(n[r]._infScroll&&(i[r]=n[r]._infScroll.pageIndex),n[r].destroy()),n[t]&&(n[t].init(),n[t]._infScroll&&(n[t]._infScroll.pageIndex=i[t])),r=t,o._projectDetailContainerTab.hasClass("fixed")&&(0<(e=o._projectDetailContainer.offset().top)-62&&(e-=62),$("html, body").stop(!0).animate({scrollTop:e},500,"swing")),o.refreshTabSticky())}})},initTabSticky:function(){this._tabSticky.init(),$(window).resize(this._tabSticky.init)},refreshTabSticky:function(){this._tabSticky.refresh()},bindClickCommentAnchor:function(){var e=this._projectDetailContainer.find(".project-detail-tab.menu .item");this._projectDetailEl.on("click",'a[href="#comments"]',function(t){t.preventDefault(),e.tab("change tab","projectIntro")})},initInviteAuthorAuthBtn:function(){var e=$(".invite-author-auth-btn");e.popup({popup:$(".invite-author-auth-popup"),on:"click",position:"bottom right",offset:16}),new ClipboardJS(".invite-author-auth-box .copy-btn").on("success",function(t){t.clearSelection(),$("body").toast({type:"success",content:"复制成功"}),e.popup("hide")})},initTopCN:function(){new Vue({el:"#topCnContainer",data:function(){return{projectId:page.objId,projectVoteCount:0,showVote:!1,userUnVoteCount:0,userIsVoted:!1}},created:function(){this.initData()},methods:{initData:function(){var e=this;$.post(page.api_prefix+"/action/pool/user_vote_info",{project:e.projectId},function(t){t.result&&t.data&&(e.showVote=!0,e.projectVoteCount=t.data.projectVoteCount||0,e.userUnVoteCount=t.data.userUnVoteCount||0,e.userIsVoted=!!t.data.userIsVoted)})},onClickVote:function(){if(this.userIsVoted)return!1;if(0===this.userUnVoteCount)return alert("您最多只能投5票，机会已经用完了哦：）"),!1;if(!page.g_user_code)return window.common.checkWeChat()&&page.weixinLogin?window.location.href=page.weixinLogin:window.common.checkLogin(),!1;var o,t="您将要投票的软件名是：\n\n"+page.projectName+"\n\n最多只能投5票，投票后不可以取消！确定投票？";confirm(t)&&(o=this,$.post(page.api_prefix+"/action/pool/vote_cn",{project:o.projectId},function(t){var e;t.result?(t.data&&t.data.vote&&(o.projectVoteCount=t.data.vote),o.userUnVoteCount=0,o.userIsVoted=!0):(e=t.msg||"投票失败",alert(e))}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}))}}})},register:function(){this.hightlight(),this.optimizeImgShow(),this.initDetailContainer(),this.initTabSticky(),this.bindClickCommentAnchor(),this.initInviteAuthorAuthBtn()}},t});
"use strict";OSCDefine("web-project-detail-new",["project-detail-comments"],function(){function t(){var t=this;this._projectDetailEl=$(".web-project-detail-new"),this._projectDetailContainer=this._projectDetailEl.find(".project-detail-container"),this._projectDetailContainerTab=this._projectDetailContainer.find(".project-detail-tab-wrap"),this._tabSticky={init:function(){if($(".project-detail-container").length<=0)return!1;768<=window.innerWidth?t._projectDetailContainerTab.sticky({context:".project-detail-container",offset:45}):t._projectDetailContainerTab.sticky("destroy")},refresh:function(){if($(".project-detail-container").length<=0)return!1;768<=window.innerWidth&&t._projectDetailContainerTab.sticky("refresh")}}}return t.prototype={constructor:t,hightlight:function(){$("pre, pre code").each(function(t,i){var e,n=$(this),o=(n.attr("class")||"").match(/language-(.*)/);o&&1<o.length&&(e=o[o.length-1],n.attr("class","hljs "+e)),hljs.highlightBlock(i)})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},initTabSticky:function(){this._tabSticky.init(),$(window).resize(this._tabSticky.init)},refreshTabSticky:function(){this._tabSticky.refresh()},bindCollapseContent:function(){var e=this;e._projectDetailEl.on("click",".collapse-bar .collapse-btn",function(){var t=$(this),i=e._projectDetailEl.find(".panel-intro .panel-content");t.hasClass("expand")?i.removeClass("collapse"):t.hasClass("collapse")&&i.addClass("collapse")})},initInviteAuthorAuthBtn:function(){var i=$(".invite-author-auth-btn");i.popup({popup:$(".invite-author-auth-popup"),on:"click",position:"bottom right",offset:16}),new ClipboardJS(".invite-author-auth-box .copy-btn").on("success",function(t){t.clearSelection(),$("body").toast({type:"success",content:"复制成功"}),i.popup("hide")})},register:function(){this.hightlight(),this.optimizeImgShow(),this.bindCollapseContent(),this.initInviteAuthorAuthBtn()}},t});
"use strict";OSCDefine("web-project-edit",function(){return function(){var t=$(".edit-project.form"),r=t.find("textarea[name=detail]");t.find(".checkbox").checkbox();var e={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.api_prefix+"/project/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/project/ckeditor_dialog_img_upload"},i=function(){var i=CKEDITOR.replace(r[0],e);i.on("change",function(e){r.val(e.editor.getData())}),i.on("fileUploadResponse",function(e){setTimeout(function(){r.val(e.editor.getData())},0)}),i.on("mode",function(e){var t;"source"===this.mode&&(t=i.editable()).attachListener(t,"input",function(){r.val(e.editor.getData())})})};t.form({inline:!0,fields:{name:{identifier:"name",rules:[{type:"empty",prompt:"请输入软件名称"},{type:"maxLength[50]",prompt:"软件名称长度不能超过 {ruleValue} 个字符"}]},title:{identifier:"title",rules:[{type:"empty",prompt:"请输入扩展标题"},{type:"maxLength[50]",prompt:"扩展标题长度不能超过 {ruleValue} 个字符"}]},license:{identifier:"license",rules:[{type:"empty",prompt:"请输入开源许可证"}]},home_url:{identifier:"home_url",rules:[{type:"empty",prompt:"请输入软件网址"},{type:"url",prompt:"请输入正确的软件网址"}]},download_url:{identifier:"download_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的下载地址"}]},doc_url:{identifier:"doc_url",optional:!0,rules:[{type:"url",prompt:"请输入正确的文档地址"}]},detail:{identifier:"detail",rules:[{type:"empty",prompt:"请输入详细介绍"}]},reason:{identifier:"reason",rules:[{type:"empty",prompt:"请输入修改原因"},{type:"maxLength[200]",prompt:"修改原因长度不能超过 {ruleValue} 个字符"}]}}}).api({url:page.saveUrl,method:"post",serializeForm:!1,beforeSend:function(e){return $(this).message("hideAll"),e.data=t.serialize(),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"提交成功"}),page.projectUrl&&setTimeout(function(){window.location.href=page.projectUrl},2e3)):$(this).message({type:"negative",content:e.message||"提交失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),t.on("reset",function(e){if($(CKEDITOR.instances).length)for(var t in CKEDITOR.instances){var i=CKEDITOR.instances[t];$(i.element.$).closest("form").attr("name")===$(e.target).attr("name")&&i.setData(i.element.$.defaultValue)}}),$(function(){i()})}});
"use strict";OSCDefine("web-project-author-authentication",function(){function t(){this._pageContainer=$(".web-project-author-authentication")}return t.prototype={constructor:t,initVueForm:function(){var t=this._pageContainer;new Vue({el:"#authorAuthenticationApp",data:function(){return{loader:!0,availablePlatforms:[],availableRepos:{},authenticationType:"",page:"form",submitLoading:!1,tipMessage:{show:!1,content:"",className:""},autoAuthForm:{platform:""},manualAuthForm:{prRepository:{gitee:{url:"https://gitee.com/oschina/oschina_authentication",regex:/http(s):\/\/gitee\.com\/oschina\/oschina_authentication\/pulls\/(\d+)/i},github:{url:"https://github.com/oschina-cn/oschina_authentication",regex:/http(s?):\/\/github\.com\/oschina-cn\/oschina_authentication\/pull\/(\d+)/i}},platform:"",prUrl:""}}},methods:{onSubmitManualAuthForm:function(){var e=this;return!this.submitLoading&&(this.prUrlIsEmpty?(e.showMessage("error","Pull Request 链接地址不能为空",2e3),!1):this.prUrlIsInvalid?(e.showMessage("error","Pull Request 链接地址格式不正确",2e3),!1):(e.submitLoading=!0,void $.post(page.api_prefix+"/project/submit_project_authentication",{source:e.manualAuthForm.platform,pull_request:e.manualAuthForm.prUrl,invite:page.inviteUserId||0,project:page.projectId||0},function(t){1===t.code?(e.showMessage("success","提交成功",2e3),e.page="apply-success"):e.showMessage("error",t.message||"提交失败",2e3)}).fail(function(){e.showMessage("error","网络异常，请稍后再试",2e3)}).always(function(){e.submitLoading=!1})))},showMessage:function(t,e,i){var a=this;a.tipMessage.className="success"===t?"positive":"negative",a.tipMessage.content=e;var o=parseInt(i)||0;a.tipMessage.show=!0,0<o&&setTimeout(function(){a.clearMessage()},o)},clearMessage:function(){var t=this;t.tipMessage.className="",t.tipMessage.content="",t.tipMessage.show=!1},initDOM:function(){t.find(".checkbox").checkbox(),new ClipboardJS(".copy-btn").on("success",function(t){$(t.trigger).popup({content:"已复制",position:"bottom center",onHidden:function(){return $(t.trigger).popup("destroy")}}),$(t.trigger).popup("show")})},initPlatformData:function(){page.projectGiteeUrl&&(this.availablePlatforms.push({ident:"gitee",name:"Gitee"}),this.$set(this.availableRepos,"gitee",page.projectGiteeUrl)),page.projectGithubUrl&&(this.availablePlatforms.push({ident:"github",name:"GitHub"}),this.$set(this.availableRepos,"github",page.projectGithubUrl))}},computed:{disabledAuthentication:function(){return!this.availablePlatforms||0===this.availablePlatforms.length},availablePlatformStr:function(){if(this.disabledAuthentication)return"";for(var t="",e=this.availablePlatforms.length,i=0;i<e;i++)0<t.length&&(t+=i<e-1?"、":" 和 "),t+=this.availablePlatforms[i].name;return t},prRepositoryUrl:function(){var t=this.manualAuthForm.prRepository[this.manualAuthForm.platform];return t?t.url:""},prUrlIsInvalid:function(){if(this.prUrlIsEmpty)return!0;var t=this.manualAuthForm.prRepository[this.manualAuthForm.platform];return!t||!t.regex.test(this.manualAuthForm.prUrl)},prUrlIsEmpty:function(){return 0===(this.manualAuthForm.prUrl||"").trim().length},gitRepoUrl:function(){return this.availableRepos[this.manualAuthForm.platform]||""}},mounted:function(){this.initDOM(),this.initPlatformData(),this.loader=!1},watch:{authenticationType:function(){this.initDOM(),this.disabledAuthentication||(this.autoAuthForm.platform=this.manualAuthForm.platform=this.availablePlatforms[0].ident)}}})},register:function(){this.initVueForm()}},t});
"use strict";OSCDefine("web-news-index",function(){function e(){}return e.prototype={constructor:e,initTopSwiper:function(){new Swiper(".swiper-container",{autoplay:{delay:3e3,disableOnInteraction:!1},simulateTouch:!1,pagination:{el:".swiper-pagination",clickable:!0}})},initNewsInfiniteScroll:function(){var e,t=this,n={newsList:1,genericNewsList:1,projectNewsList:1,industryNewsList:1,programmingLanguageNewsList:1},i={newsList:new OSCInfiniteScroll({pagePath:".all-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),genericNewsList:new OSCInfiniteScroll({pagePath:".generic-pagination.pagination__next",checkLastPage:!0,containerSelector:"#genericNewsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),projectNewsList:new OSCInfiniteScroll({pagePath:".project-pagination.pagination__next",checkLastPage:!0,containerSelector:"#projectNewsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),industryNewsList:new OSCInfiniteScroll({pagePath:".industry-pagination.pagination__next",checkLastPage:!0,containerSelector:"#industryNewsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),programmingLanguageNewsList:new OSCInfiniteScroll({pagePath:".programming-language-pagination.pagination__next",checkLastPage:!0,containerSelector:"#programmingLanguageNewsList",itemListSelector:".news-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.news-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})},o="newsList",a=$(".article-list.active.tab");0<a.length&&((e=a.attr("data-tab")||"")&&i[e]&&(o=e)),i[o].init();var r=o;$(".news-tab.menu .item").tab({onLoad:function(e){r!==e&&(i[r]._infScroll&&(n[r]=i[r]._infScroll.pageIndex),i[r].destroy(),i[e].init(),i[e]._infScroll&&(i[e]._infScroll.pageIndex=n[e]),r=e)}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(90,90)})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},register:function(){this.initNewsInfiniteScroll(),this.optimizeImgShow(),this.parseEmoticon()}},e});
"use strict";OSCPlugin("news-detail-comments",function(){return function(){var t={config:{objId:0,fetchCommentsUrl:"",publishCommentUrl:"",replyCommentUrl:"",deleteCommentUrl:""},init:function(e){this._commentsContainer=$("#commentsContainer"),this._commentsWrap=this._commentsContainer.find(".comments-wrap"),this.config=$.isPlainObject(e)?$.extend(!0,{},this.config,e):$.extend({},this.config)},loadComments:function(e,t){var o,n=this,a=Math.floor(e)||1;-1===a&&(o=n._commentsWrap.find(".pagination-wrap"),a=Math.floor(o.data("page"))||1);var r=window.common.addQueryParams(n.config.fetchCommentsUrl,{p:a});$.get(r,function(e){n._commentsWrap.html(e),n.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},loadCommentsByCommentId:function(e,t){var o=this,n=Math.floor(e)||1,a=window.common.addQueryParams(o.config.fetchCommentsUrl,{commentId:n});$.get(a,function(e){o._commentsWrap.html(e),o.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},initCommentForm:function(){var a=this,r="OSC_NEWS_"+page.objId+"_COMMENT_CACHE",o="OSC_NEWS_"+page.objId+"_COMMENT_PUBLISH_CACHE",t=window.common.throttle(function(e){try{e&&0<e.trim().length?localStorage.setItem(r,e):localStorage.removeItem(r)}catch(e){}},500);a.commentFormVue=new Vue({el:"#commentForm",data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},mounted:function(){var e,t;void 0!==window.localStorage&&(e=localStorage.getItem(r)||"",t=localStorage.getItem(o)||"",e&&0<e.trim().length&&(this.commentContent=e,t&&page.g_user_code&&(localStorage.removeItem(o),this.publishComment())))},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){this.clearMessage();var e,t,o="#此处输入软件#";this.insertContent(o)&&(t=(e=selectRange.of(this.$refs.commentTextarea)).getCurPos(),e.setSelectText(t-(o.length-1),t-1))},publishComment:function(){var e,n=this,t=window.common.getCurrentUrl(!0)+"#commentForm";if(!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(o,"1")}catch(e){}}))return!1;n.tweetPublishLoading||(n.clearMessage(),n.commentContentIsEmpty?n.showMessage("error","内容不能为空",2e3):n.commentContent.length>n.commentMaxLength?n.showMessage("error","最多只能输入"+n.commentMaxLength+"个字符！",2e3):(n.commentPublishLoading=!0,e={news:a.config.objId,content:n.commentContent},$.post(a.config.publishCommentUrl,e,function(e){var t,o;1===e.code?(e.message&&$("body").toast({type:"success",content:e.message||"评论发布成功"}),window.localStorage&&window.localStorage.removeItem(r),n.commentContent="",a.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),$("html, body").stop().animate({scrollTop:a._commentsWrap.offset().top-80},500,"swing")):n.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){n.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){n.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=t;var a=parseInt(o)||0;n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}},watch:{commentContent:function(e){t(e)}}}),$("#commentForm").find(".comment-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),n=$(o).parent().find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:n,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},initCommentDeleteModal:function(){var c=this,o=$(".delete-comment.modal");o.modal({onDeny:function(){var i=$(this).attr("data-comment-id"),s=c._commentsWrap.find("div.comment[data-comment-id="+i+"]"),e=s.attr("data-comment-user-id");$.post(c.config.deleteCommentUrl,{commentId:i,userId:e,newsId:c.config.objId},function(e){var t,o,n,a,r;1===e.code?($("body").toast({type:"success",content:"删除成功"}),s.fadeOut(function(){var e=s.parent();e.is(".comments[children-comments]")&&1===e.children(".comment").length&&1===e.children(".comment[data-comment-id="+i+"]").length?e.remove():s.remove()}),o=(t=c._commentsWrap.find("> .header span")).text(),n=$("[data-article-reply-count]"),a=$(".float-menu .comment-btn"),o?((r=parseInt(o)-(1+s.find("div.comment").length))<0&&(r=0),t.text(r),n.html(r),a.attr("title","共有 "+r+" 条评论")):(t.text(0),n.html(0),a.attr("title","共有 0 条评论")),e.result&&void 0!==e.result.selfCommentCount&&e.result.selfCommentCount<=0&&a.find(".icon").addClass("outline")):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),c._commentsWrap.on("click",".actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)").attr("data-comment-id");o.attr("data-comment-id",t),o.modal("show")})},initReplyCommentModal:function(){var n=this,a=$(".reply-comment.modal"),r=$("#replyCommentForm");a.modal({onShow:function(){r.form("reset"),r.message("hideAll");$(this).attr("data-comment-user-id");var e=$(this).attr("data-comment-id")||-1;r.find("input[name=reply_id]").val(e)},onApprove:function(){return r.message("hideAll"),r.form("submit"),!1}}),r.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[1000]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:n.config.replyCommentUrl,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={news:n.config.objId,reply_id:t.reply_id,content:t.content},e},onSuccess:function(e){var t,o;1===e.code?($(this).message({type:"positive",content:"评论回复成功"}),r.form("reset"),n.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),setTimeout(function(){a.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"回复失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()}),n._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment:eq(0)"),o=t.attr("data-comment-user-id"),n=t.attr("data-comment-id");a.attr("data-comment-user-id",o),a.attr("data-comment-id",n),a.modal("show")})},bindReplyBtn:function(){var l=this;l._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t,n=$(e.target).parents(".comment:eq(0)"),a=n.attr("data-comment-id"),o=n.attr("data-comment-user-name"),r=!!n.data("comment-is-last-level"),i=a,s="";if(r&&((t=n.parents(".comment:eq(0)"))&&(i=t.attr("data-comment-id")),s=o),0<n.find(".content:eq(0) [data-rely-comment-form]").length){var c=n.find(".content:eq(0) [data-rely-comment-form]").get(0);return c.vueInstance&&c.vueInstance.focus(),!1}$("[data-rely-comment-form]").each(function(e,t){var o=$(t);t.vueInstance&&t.vueInstance.$destroy(),o.remove()}),0===$('[data-reply-comment-form][data-comment-id="'+a+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get("/widgets/comments_reply_form",function(e){var t=document.createElement("div");t.innerHTML=e,$(t).find("[data-reply-comment-form]").attr("data-comment-id",a),n.find(".content:eq(0)").append(t);var o=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:l._commentsWrap,toggleLoadComments:function(){l.loadComments(-1)},url:l.config.replyCommentUrl,params:{news:page.objId,reply_id:i},commentedAutoScrollToTop:!1,contentField:"content"});o.init(),o.focus(),s&&o.insertContent("回复 @"+s+" : ")}).always(function(){window.oscReplyCommentFormLoading=!1}))})},initCommentsListPJAX:function(){var e=this,t=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){e.parseEmoticon(),t.removeClass("active"),$("html, body").stop().animate({scrollTop:e._commentsWrap.offset().top-80},500,"swing")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initCommentLike:function(){function a(a,r){var e=window.common.getCurrentUrl(!0)+"#rpl_"+a;window.common.checkLoginForWeChat(e,function(){try{localStorage.setItem(t,a)}catch(e){}})&&$.post(page.api_prefix+"/news/voteNewsComment",{newsCommentId:a,user:page.g_user_id,vote:r},function(e){var t,o,n;1===e.code?(t=r,o=0,e.result&&e.result.vote&&(o=e.result.vote),e.message&&$("body").toast({type:"success",content:e.message}),n=$('[data-comment-like-btn][data-comment-id="'+a+'"]'),t?(n.addClass("active"),n.find(".like.icon").removeClass("outline")):(n.removeClass("active"),n.find(".like.icon").addClass("outline")),$('[data-comment-like-count][data-comment-id="'+a+'"]').text(o)):$("body").toast({type:"error",content:e.message||"点赞失败"})})}var e,t="OSC_NEWS_"+page.objId+"_COMMENT_LIKE_CACHE";this._commentsWrap.on("click",".actions a.like[data-comment-like-btn]",function(e){e.stopPropagation();var t=$(this),o=t.parents(".comment:eq(0)").attr("data-comment-id"),n=t.hasClass("active");a(o,!n)}),void 0!==window.localStorage&&(!page.g_user_code||(e=localStorage.getItem(t)||"")&&(localStorage.removeItem(t),a(e,!0)))},scrollToCommentFromUrlCommentId:function(){var o=location.hash,e=o.match(/#rpl_(\d+).*/),t=e?Math.floor(e[1]):-1;0<t&&this.loadCommentsByCommentId(t,function(){setTimeout(function(){var e,t=$(o);t.length&&(0<(e=t.offset().top)-80&&(e-=80),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))},0)})}};new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js"],function(){var e=window.page;t.init({objId:e.objId,fetchCommentsUrl:e.fetchCommentsUrl,publishCommentUrl:e.publishCommentUrl,replyCommentUrl:e.replyCommentUrl,deleteCommentUrl:e.deleteCommentUrl}),t.initCommentForm(),t.initCommentDeleteModal(),t.bindReplyBtn(),t.initCommentsListPJAX(),t.parseEmoticon(),t.initCommentLike(),t.scrollToCommentFromUrlCommentId()}).loadFiles()}});
"use strict";OSCDefine("web-news-detail",["news-detail-comments"],function(){function t(){this._newsDetailEl=$(".news-detail")}return t.prototype={constructor:t,hightlight:function(){$("pre code").each(function(t,e){var i,n=$(this),o=(n.attr("class")||"").match(/language-(.*)/);o&&1<o.length&&(i=o[o.length-1],n.attr("class","hljs "+i)),hljs.highlightBlock(e)})},initNewsInfiniteScroll:function(){var t=this,e={relArticleList:1,newArticleList:1},i={relArticleList:new OSCInfiniteScroll({pagePath:".rel-pagination.pagination__next",checkLastPage:!0,containerSelector:"#relArticleList",itemListSelector:".news-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.news-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}}),newArticleList:new OSCInfiniteScroll({pagePath:".news-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newArticleList",itemListSelector:".news-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.news-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}})};i.relArticleList.init();var n="relArticleList";$(".newsDetail-tab.menu .item").tab({onLoad:function(t){n!==t&&(i[n]._infScroll&&(e[n]=i[n]._infScroll.pageIndex),i[n].destroy(),i[t].init(),i[t]._infScroll&&(i[t]._infScroll.pageIndex=e[t]),n=t)}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.hightlight(),this.initNewsInfiniteScroll(),this.optimizeImgShow()}},t});
"use strict";OSCPlugin("question-common",function(){function t(){var t=this;this._questionSidebar=$(".question-sidebar"),this._questionNavSidebar=$(".left-channel"),this._questionNavSidebarNavMenu=this._questionNavSidebar.find(".nav-menu"),this._questionListContainer=$(".question-list-container"),this.followBtnStatusCode={UN_FOLLOW:1,FOLLOWED:2},this.followBtnStatusConf={UN_FOLLOW:{normal:{selfRemoveClass:"unsubscribed unsubscribed-hover subscribed subscribed-hover",selfAddClass:"unsubscribed",text:"关注",icon:"plus icon",textIcon:"+",textIconClass:"plus"},hover:{selfRemoveClass:"unsubscribed unsubscribed-hover subscribed subscribed-hover",selfAddClass:"unsubscribed-hover",text:"关注",icon:"plus icon",textIcon:"+",textIconClass:"plus"}},FOLLOWED:{normal:{selfRemoveClass:"unsubscribed unsubscribed-hover subscribed subscribed-hover",selfAddClass:"subscribed",text:"已关注",icon:"check icon",textIcon:"×",textIconClass:"check"},hover:{selfRemoveClass:"unsubscribed unsubscribed-hover subscribed subscribed-hover",selfAddClass:"subscribed-hover",text:"取消关注",icon:"",textIcon:"×",textIconClass:"check"}}},t._navMenuSticky={init:function(){if($(".web-question-main-container").length<=0)return!1;768<=window.innerWidth?t._questionNavSidebarNavMenu.sticky({context:".web-question-main-container",offset:68}):t._questionNavSidebarNavMenu.sticky("destroy")},refresh:function(){if($(".web-question-main-container").length<=0)return!1;768<=window.innerWidth&&t._questionNavSidebarNavMenu.sticky("refresh")}},this.register()}return t.prototype={constructor:t,initSidebarSectionTabs:function(){this._questionSidebar.on("click",".section .tabs .tab[data-tab]",function(t){var e=$(this),n=e.data("tab"),o=e.parents(".section:eq(0)"),i=o.find('.tab-body[data-tab="'+n+'"]');i&&0<i.length&&(o.find(".tabs .tab").removeClass("active"),e.addClass("active"),o.find(".tab-body").removeClass("active"),i.addClass("active"))})},initUserListScorePopup:function(){768<=window.innerWidth&&this._questionSidebar.find(".popup-num").popup({hoverable:!0})},initTopicCardPopup:function(){768<=window.innerWidth&&$(".popup-tag").popup({position:"bottom left",hoverable:!0})},initQuestionItemUpDown:function(){var t=this;if(!t._questionListContainer||0===t._questionListContainer.length)return!1;function u(e,n,t,o){parseInt(n.text().match(/\d+/)[0]);$.post(page.api_prefix+"/question/vote_answer",{user:page.g_user_id,user_code:page.g_user_code,id:t,vote:o},function(t){0!==t.code?(o&&t.result,n.text(t.result.vote),e.toggleClass("active")):$("body").toast({type:"error",content:t.message||"投票失败"})})}t._questionListContainer.on("click",".question-item .vote-item .vote-btn",function(t){var e=$(this),n=e.parents(".answer-meta:eq(0)"),o=e.hasClass("vote-up"),i=0<n.find(".vote-btn.active").length,s=e.parents(".answer-container:eq(0)").attr("data-answer-id"),a=n.find(".vote-item .vote-count");if(!window.common.checkLogin())return!1;if(e.hasClass("active"))u(e,a,s,o);else if(i)$("body").toast({type:"error",content:"您已经对此问题投过票了，不能重复投票"});else{if(!o){var r=$(".vote-confirm.modal");return 0===r.length&&($("body").append('<div class="ui mini vote-confirm modal">    <div class="header">操作提示</div>    <div class="content">        <p>此操作将会扣除1积分，是否继续？</p>    </div>    <div class="actions">        <div class="ui cancel button">取消</div>        <div class="ui positive button">确定</div>    </div></div>'),r=$(r.selector)),void r.modal({onApprove:function(){u(e,a,s,!1)}}).modal("show")}u(e,a,s,!0)}})},initNavSidebarSticky:function(){this._navMenuSticky.init(),$(window).resize(this._navMenuSticky.init)},refreshNavSidebarSticky:function(){this._navMenuSticky.refresh()},setFollowBtnStatus:function(t,e,n){e="normal"===e?"normal":"hover";var o,i,s,a,r,u,c=this,d=n.find(".text"),l=n.find("i"),v=n.find(".text-icon");switch(t){case c.followBtnStatusCode.UN_FOLLOW:o=c.followBtnStatusConf.UN_FOLLOW[e],n.attr("data-follow-status",c.followBtnStatusCode.UN_FOLLOW);break;case c.followBtnStatusCode.FOLLOWED:o=c.followBtnStatusConf.FOLLOWED[e],n.attr("data-follow-status",c.followBtnStatusCode.FOLLOWED)}d.text(o.text),i=o.icon,l.attr("class",i),s=o.textIcon,a=o.textIconClass,v.text(s),v.attr("class","").addClass("text-icon").addClass(a),r=o.selfRemoveClass,u=o.selfAddClass,n.removeClass(r).addClass(u)},setFollowBtnCount:function(t,e){var n=e.find(".count"),o=t;window.common&&"function"==typeof window.common.formatNumberK&&(o=window.common.formatNumberK(t)),n.text(o)},bindFollowBtnHover:function(){var n=this;$(document).on("mouseenter",".question-follow-btn",function(){var t=$(this),e=parseInt(t.attr("data-follow-status"));n.setFollowBtnStatus(e,"hover",t)}),$(document).on("mouseleave",".question-follow-btn",function(){var t=$(this),e=parseInt(t.attr("data-follow-status"));n.setFollowBtnStatus(e,"normal",t)})},bindFollowBtnClick:function(){var u=this;$(document).on("click",".question-follow-btn",function(t){t.preventDefault();var e=$(this),n=this,o=e.attr("data-id"),i=e.attr("data-type"),s=e.attr("data-url"),a=e.data("hide-login-tip");if(e.data("as-link"))return s&&""!==s&&window.open(s,"_blank"),!1;if(!page.g_user_code)return!0===a?s&&""!==s&&window.open(s,"_blank"):window.common.checkLogin(),!1;var r=$('.question-follow-btn[data-id="'+o+'"][data-type="'+i+'"]');$.post(page.api_prefix+"/favorites/addV2",{user:page.g_user_id,user_code:page.g_user_code||"",id:o,type:i},function(t){var e;1===t.code&&t.result?(e=t.result.isFavorited?2:1,u.setFollowBtnStatus(e,"normal",r),0<=t.result.favoriteCount&&u.setFollowBtnCount(t.result.favoriteCount,r)):$("body").toast({type:"error",content:t.message||"操作失败"})}).always(function(){var t=document.createEvent("Event");t.initEvent("subscribe",!0,!0),n.dispatchEvent(t)})})},register:function(){this.initSidebarSectionTabs(),this.initUserListScorePopup(),this.initQuestionItemUpDown(),this.initNavSidebarSticky(),this.bindFollowBtnHover(),this.bindFollowBtnClick(),this.initTopicCardPopup()}},t});
"use strict";OSCDefine("web-question-index",["question-common"],function(n){function t(){this._questionEl=$(".web-question");var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),n.refreshNavSidebarSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},setPageTitle:function(){this._questionEl.find("input[name=currentCatalog]").val();var t=this._questionEl.find("input[name=currentCatalogTitle]").val(),i="";t&&""!==t&&(i=t);var e="开源中国";document.title=i?i+" - "+e:"开源问答 - "+e},initShowTypeDropdown:function(){var t=$(".show-type-dropdown");t.dropdown({className:{active:"on"}}),t.on("click",".text",function(t){var i=$(this).find(".text").html(),e=$(this).siblings(".menu").find("a").first();i===e.find(".text").html()&&e.trigger("click")})},initPJAX:function(){var i=this,e=$(".question-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".question-tab a.item, .question-tab .show-type .item",".question-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i.scrollTabPositionOffset(),n.refreshNavSidebarSticky()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},scrollTabPositionOffset:function(){var t,i,e,n=$(".question-tab-wrap");n&&0<n.length&&(i=(t=n.find(".active.item")).offset().left,e=t.get(0).offsetWidth,window.innerWidth<i+e+10&&n.stop(!0).animate({scrollLeft:i},500,"swing"))},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow(),this.scrollTabPositionOffset()}},t});
"use strict";OSCDefine("web-question-search",["question-common"],function(i){function t(){this._questionEl=$(".web-question");var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),i.refreshNavSidebarSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.optimizeImgShow()}},t});
"use strict";OSCDefine("web-question-my",["question-common"],function(i){function t(){this._questionEl=$(".web-question"),this._questionListContainer=$(".question-list-container");var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),i.refreshNavSidebarSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.optimizeImgShow()}},t});
"use strict";OSCDefine("web-question-answer",function(){function e(){this._questionAnswerEl=$(".question-answer"),this._answerForm=this._questionAnswerEl.find(".answer-form")}return e.prototype={constructor:e,hightlight:function(){$("pre, pre code").each(function(e,t){var i,n=$(this),o=(n.attr("class")||"").match(/language-(.*)/);o&&1<o.length&&(i=o[o.length-1],n.attr("class","hljs "+i)),hljs.highlightBlock(t)})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initForm:function(){var i=this,n=i._answerForm.find("textarea[name=body]").get(0),o=null,e={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload"};(o=CKEDITOR.replace(n,e)).on("instanceReady",function(e){CKEDITOR.instances.body.focus()}),o.on("change",function(e){$(n).val(e.editor.getData())}),o.on("fileUploadResponse",function(e){setTimeout(function(){$(n).val(e.editor.getData())},0)}),o.on("mode",function(e){var t;"source"===this.mode&&(t=o.editable()).attachListener(t,"input",function(){$(n).val(e.editor.getData())})}),o.on("key",function(e){var t=e.data.domEvent.$;(t.metaKey||t.ctrlKey)&&13===t.keyCode&&i._answerForm.form("submit")}),i._answerForm.form({inline:!0,fields:{body:{identifier:"body",rules:[{type:"empty",prompt:"请输入回答内容"}]}}}).api({url:page.api_prefix+"/question/answer",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||"提交成功"}),window.location.href=page.question_url):$(this).message({type:"negative",content:e.message||"提交失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},register:function(){this.initForm(),this.hightlight(),this.parseEmoticon()}},e});
"use strict";OSCDefine("web-question-answer-edit",function(){function e(){this._questionAnswerEl=$(".question-answer"),this._answerForm=this._questionAnswerEl.find(".answer-form")}return e.prototype={constructor:e,initForm:function(){var i=this,n=i._answerForm.find("textarea[name=body]").get(0),o=null,e={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload"};(o=CKEDITOR.replace(n,e)).on("instanceReady",function(e){CKEDITOR.instances.body.focus()}),o.on("change",function(e){$(n).val(e.editor.getData())}),o.on("fileUploadResponse",function(e){setTimeout(function(){$(n).val(e.editor.getData())},0)}),o.on("mode",function(e){var t;"source"===this.mode&&(t=o.editable()).attachListener(t,"input",function(){$(n).val(e.editor.getData())})}),o.on("key",function(e){var t=e.data.domEvent.$;(t.metaKey||t.ctrlKey)&&13===t.keyCode&&i._answerForm.form("submit")}),i._answerForm.form({inline:!0,fields:{body:{identifier:"body",rules:[{type:"empty",prompt:"请输入回答内容"}]}}}).api({url:page.api_prefix+"/question/editAnswerV2",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:"修改成功"}),window.location.href=page.question_url):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}})},register:function(){this.initForm()}},e});
"use strict";OSCDefine("web-question-tags",["question-common"],function(){function t(){this._tagsWrap=$("#tagsContainer .tags-wrapper")}return t.prototype={constructor:t,initListPJAX:function(){var t=this,a=$(".tags-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#tagsContainer .tags-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){a.addClass("active")}),$(document).on("pjax:complete",function(){a.removeClass("active"),$("html, body").stop().animate({scrollTop:t._tagsWrap.offset().top-80},500,"swing")})},register:function(){this.initListPJAX()}},t});
"use strict";OSCDefine("web-question-tag",["question-common"],function(){function t(){this._questionEl=$(".web-question-tag"),this._questionListContainer=$(".question-list-container");var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},initPJAX:function(){var i=this,e=$(".question-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".question-tab > a.item, .question-tab .show-type .item",".question-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i.scrollTabPositionOffset()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},scrollTabPositionOffset:function(){var t,i,e,n=$(".question-tab-wrap");n&&0<n.length&&(i=(t=n.find(".active.item")).offset().left,e=t.get(0).offsetWidth,window.innerWidth<i+e+10&&n.stop(!0).animate({scrollLeft:i},500,"swing"))},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow(),this.scrollTabPositionOffset()}},t});
"use strict";OSCDefine("web-question-topics",["question-common"],function(n){function t(){this._pageContainer=$(".web-question-topics"),this._topicsWrap=$("#topicsContainer .topics-wrapper")}return t.prototype={constructor:t,initListPJAX:function(){var t=this,i=$(".topics-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#topicsContainer .topics-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){i.addClass("active")}),$(document).on("pjax:complete",function(){i.removeClass("active"),$("html, body").stop().animate({scrollTop:t._topicsWrap.offset().top-140},500,"swing"),n.refreshNavSidebarSticky()})},bindTopicCardLink:function(){this._topicsWrap.on("click",".question-topic-cards .topic-card",function(t){var i=$(t.target),n=$(this).attr("data-url");0===i.parents(".card-action").length&&n&&""!==n&&window.open(n,"_blank")})},bindSearchClick:function(){this._pageContainer.on("click",".search-form .search.link.icon",function(){var t=$(this).parents(".search-form:eq(0)");0<t.find("input[name=q]").val().trim().length&&t.submit()})},register:function(){this.initListPJAX(),this.bindTopicCardLink(),this.bindSearchClick()}},t});
"use strict";OSCDefine("web-question-topic",["question-common"],function(n){function t(){this._questionEl=$(".web-question-topic"),this._questionListContainer=$(".question-list-container");var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),n.refreshNavSidebarSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},initPJAX:function(){var i=this,e=$(".question-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".question-tab > a.item, .question-tab .show-type .item",".question-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),i.scrollTabPositionOffset(),n.refreshNavSidebarSticky()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},scrollTabPositionOffset:function(){var t,i,e,n=$(".question-tab-wrap");n&&0<n.length&&(i=(t=n.find(".active.item")).offset().left,e=t.get(0).offsetWidth,window.innerWidth<i+e+10&&n.stop(!0).animate({scrollLeft:i},500,"swing"))},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow(),this.scrollTabPositionOffset()}},t});
"use strict";OSCDefine("web-question-subscribed",["question-common"],function(n){function t(){var t=this;this._articleInfiniteScroll={questionList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#questionList",itemListSelector:".questions-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.question-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow(),n.refreshNavSidebarSticky()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.questionList&&(t._articleInfiniteScroll.questionList.destroy(),t._articleInfiniteScroll.questionList.init())},initPJAX:function(){var i=this,e=$(".question-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".question-tags.tab .tag-item",".question-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);e.removeClass("active"),i.initArticleInfiniteScroll(),i.optimizeImgShow(),n.refreshNavSidebarSticky()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow()}},t});
"use strict";OSCDefine("web-question-subscribed-settings",["question-common"],function(r){function t(){this._subscribedSettings=$(".web-question-subscribed-settings"),this._subscribedTagsPanel=this._subscribedSettings.find(".subscribed-tags-panel"),this._subscribedTopicsPanel=this._subscribedSettings.find(".subscribed-topics-panel"),this._questionTagsSettings=$(".question-tags.settings"),this._questionTagAddWrap=this._questionTagsSettings.find(".tag-add-wrap")}return t.prototype={constructor:t,initSubscribedTags:function(){var i=this,e=i._subscribedTagsPanel.find(".subscribed-tags-count");i._subscribedTagsPanel.on("subscribe",function(){var t=i._subscribedTagsPanel.find(".tag-item.question-follow-btn.subscribed").length;e.text(t)})},initSubscribedTopics:function(){var i=this,e=i._subscribedTopicsPanel.find(".subscribed-topics-count");i._subscribedTopicsPanel.on("subscribe",function(){var t=i._subscribedTopicsPanel.find(".topic-card .card-action > .button.question-follow-btn.subscribed").length;e.text(t)})},initTagAdd:function(){var i=this,e=i._questionTagAddWrap.find(".tag-input");i._questionTagAddWrap.find(".tag-name.dropdown").dropdown({allowAdditions:!1,forceSelection:!1,fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/question/list_tags?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(t){var i=[];return 1===t.code&&Array.isArray(t.result)&&0<t.result.length&&(i=t.result.map(function(t){return{name:t.name,value:t.obj_id+","+t.type}})),{results:i}}},onNoResults:function(t){return!!(t&&0<t.trim().length)}}),document.addEventListener("click",function(t){0!==i._questionTagAddWrap.find(t.target).length||$(t.target).is(".tag-add-wrap")||(i._questionTagAddWrap.find(".tag-name.dropdown").dropdown("clear"),e.val(""),i._questionTagAddWrap.removeClass("active"))}),i._questionTagAddWrap.on("click",function(){$(this).hasClass("active")||(i._questionTagAddWrap.addClass("active"),e.focus())}),i._questionTagAddWrap.on("click",".tag-submit-btn",i._submitTagAdd.bind(i)),i._questionTagAddWrap.on("keydown",function(t){13===t.keyCode&&i._submitTagAdd()})},_submitTagAdd:function(){var e=this,t=e._questionTagAddWrap.find("input[name=tag]"),i=e._questionTagAddWrap.find(".tag-input"),s=t.val()||"";if(""===s&&/^\d+,\d+$/.test(s))return!1;var n=s.split(","),a=n[0],d=n[1],o=33===parseInt(d)?1:2;e._questionTagAddWrap.find(".tag-name.dropdown").dropdown("get text");$.post(page.api_prefix+"/favorites/addV2",{user:page.g_user_id,user_code:page.g_user_code||"",id:a,type:d},function(t){1===t.code&&t.result?($.get(page.api_prefix+"/question/widgets/_subscribed_tag_ajax?tagId="+a+"&tagType="+o,function(t){e._questionTagAddWrap.before(t),r.initTopicCardPopup()}).always(function(){var t=document.createEvent("Event");t.initEvent("subscribe",!0,!0);var i=e._subscribedTagsPanel.find('.question-follow-btn[data-id="'+a+'"][data-type="'+d+'"]');i&&0<i.length&&i.get(0).dispatchEvent(t)}),e._questionTagAddWrap.find(".tag-name.dropdown").dropdown("clear"),i.val(""),e._questionTagAddWrap.removeClass("active")):$("body").toast({type:"error",content:t.message||"添加失败"})})},bindTopicCardLink:function(){this._subscribedTopicsPanel.on("click",".question-topic-cards .topic-card",function(t){var i=$(t.target),e=$(this).attr("data-url");0===i.parents(".card-action").length&&e&&""!==e&&window.open(e,"_blank")})},register:function(){this.initSubscribedTags(),this.initSubscribedTopics(),this.initTagAdd(),this.bindTopicCardLink()}},t});
"use strict";OSCDefine("web-question-detail",["question-common"],function(){function e(){this._questionDetailEl=$(".question-detail"),this._metaWrap=this._questionDetailEl.find(".meta-wrap"),this._questionCommentModal=$(".question-comment.modal"),this._commentsContainer=$("#commentsContainer"),this._answersList=this._commentsContainer.find(".comments-wrap")}return e.prototype={constructor:e,initManagerMenu:function(){var u=$("#managerMenu");u.dropdown(),u.on("click","a.item.delete-btn",function(){var e=page.objId,t=$(this).attr("data-hash-code")||"";$(".delete-question.modal").modal({onApprove:function(){$.post(page.api_prefix+"/question/delete",{id:e,hash:t,user_code:page.g_user_code},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),setTimeout(function(){location.href=page.questionRootURL},1e3)):$("body").toast({type:"error",content:e.message||"删除失败"})})}}).modal("show")}),u.on("click","a.item.edit-tags-btn",function(){var t=$(".edit-tags.modal"),e=t.find("#editTagsForm");e.form({inline:!0,keyboardShortcuts:!1,fields:{catalog:{rules:[{type:"empty",prompt:"请选择分类"}]}}}).api({url:page.api_prefix+"/question/edit_tags",method:"post",serializeForm:!0,beforeSend:function(e){var t=e.data;return e.data={id:page.objId,catalog:t.catalog,prj:t.prj,tags:t.tags,user_code:page.g_user_code||""},e},onSuccess:function(e){1===e.code?($("body").toast({type:"success",content:"设置成功"}),t.modal("hide"),$(this).form("reset"),setTimeout(function(){location.reload()},1e3)):$("body").toast({type:"error",content:e.message||"设置失败"})},onFailure:function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}}),e.find(".catalog.dropdown").dropdown(),e.find(".project-name.dropdown").dropdown({allowAdditions:!0,maxSelections:5,fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/project/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result.map(function(e){return{name:e.name,value:e.name}})),{results:t}}},onNoResults:function(e){return!!(e&&0<e.trim().length)}}),t.modal({autofocus:!1,onApprove:function(){return e.message("hideAll"),e.form("submit"),!1},onHide:function(){e.form("reset")}}),t.modal("show")}),u.on("click",".item.mark-btn",function(){var n=$(this),e=parseInt(n.attr("data-value")),t=page.objId,o=u.find(".item.mark-btn.mark-as-top-btn"),a=1===e?"置顶":"取消置顶",i=1===e?"取消置顶":"置顶",r=1===e?0:1,s=1===e?"undo icon":"arrow up icon",d=u.find(".item.mark-btn.mark-as-bottom-btn"),m=-1===e?"置底":"取消置底",c=-1===e?"取消置底":"置底",l=-1===e?0:-1,p=-1===e?"undo icon":"arrow down icon";$.post(page.api_prefix+"/question/mark_as_top",{id:t,top:e,user_code:page.g_user_code},function(e){var t=n.hasClass("mark-as-top-btn")?a:m;1===e.code?($("body").toast({type:"success",content:t+"成功"}),o.find("span").text(i),o.find("i").attr("class",s),o.attr("data-value",r),d.find("span").text(c),d.find("i").attr("class",p),d.attr("data-value",l)):$("body").toast({type:"error",content:e.message||text+"失败"})})})},initAddRemarkBtn:function(){var n=this,o=$(".add-remark.modal"),a=$("#addRemarkForm");o.modal({onShow:function(){a.form("reset"),a.message("hideAll")},onApprove:function(){return a.message("hideAll"),a.form("submit"),!1}}),a.form({inline:!0,fields:{body:{identifier:"body",rules:[{type:"empty",prompt:"请输入补充内容"},{type:"maxLength[200]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.api_prefix+"/question/add_detail",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){if(1!==e.code)return $(this).message({type:"negative",content:e.message||"发表失败"}),!1;$(this).message({type:"positive",content:"发表成功"}),a.form("reset");var t=page.objId||-1;n.loadAdditionalRemarks(t,function(){setTimeout(function(){o.modal("hide")},1e3)})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&o.find(".positive.button").click()}),n._metaWrap.on("click",".item.add-remark-btn",function(){o.modal("show")})},initAdditionalRemarkAction:function(){var o=this,n=$(".additional-remarks");n.on("click",".remark-item .remove-btn",function(){var e=$(this).parents(".remark-item:eq(0)").attr("data-remark-id"),t=page.objId||-1,n=$(".delete-remark.modal");0===n.length&&($("body").append('<div class="ui mini delete-remark modal">    <div class="header">删除一条补充话题</div>    <div class="content">        <p>此补充话题删除后，数据将无法恢复</p>    </div>    <div class="actions">        <div class="ui cancel button">取消</div>        <div class="ui red ok button">确定</div>    </div></div>'),n=$(n.selector)),n.modal({onApprove:function(){$.post(page.api_prefix+"/question/delete_detail",{id:e,user_code:page.g_user_code},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),o.loadAdditionalRemarks(t)):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),n.modal("show")}),n.on("click",".view-all-button",function(){var e=$(this),t=n.find(".remark-item");e.hide(),t.removeClass("hide")})},loadAdditionalRemarks:function(e,t){var n=$(".additional-remarks");$.post("/question/widgets/_additional_remarks",{qid:e},function(e){n.html(e)}).always(function(){t&&$.isFunction(t)&&t()})},hightlight:function(){$("pre, pre code").each(function(e,t){var n,o=$(this),a=(o.attr("class")||"").match(/language-(.*)/);a&&1<a.length&&(n=a[a.length-1],o.attr("class","hljs "+n)),hljs.highlightBlock(t)})},answersListPJAX:function(){var e=this,t=$("#commentsContainer"),n=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a, .comments-title .tab, .comments-header-tabs .menu > .item","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(){e.parseEmoticon(),e.hightlight(),n.removeClass("active"),$("html, body").stop().animate({scrollTop:t.offset().top-50},500,"swing")})},answerReplies:function(){var a=this;this._answersList.on("click",".comment.answer > .answer-content-wrap > .replies-wrap .page-link",function(e){var t=$(this),n=t.attr("data-page"),o=t.attr("data-answer-id");a.loadCommentReplies(o,n)})},loadComments:function(e,t,n){var o=this,a=o._commentsContainer.find(".pagination-wrap"),i=Math.floor(e)||1;-1===i&&(i=Math.floor(a.data("page"))||1);var r=t;["default","time"].indexOf(r)<0&&(r=a.data("sort")||"default");var s=window.common.addQueryParams(page.fetchCommentsUrl,{p:i,sort:r});$.get(s,function(e){o._answersList.html(e),o.parseEmoticon(),o.hightlight(),n&&$.isFunction(n)&&n.call(this)})},loadCommentsByCommentId:function(e,t){var n=this,o=n._commentsContainer.find(".pagination-wrap"),a=Math.floor(e)||1,i=o.data("sort")||"default",r=window.common.addQueryParams(page.fetchCommentsUrl,{commentId:a,sort:i});$.get(r,function(e){n._answersList.html(e),n.parseEmoticon(),n.hightlight(),t&&$.isFunction(t)&&t.call(this)})},loadCommentReplies:function(n,o,e){var a=this;o=parseInt(o)||1,$.post(page.getCommentRepliesUrl,{answer:n,rp:o},function(e){var t=a._answersList.find(".comment.answer[data-answer-id="+n+"] > .answer-content-wrap > .replies-wrap");t&&(t.html(e),t.attr("data-page",o),a.parseEmoticon())}).always(function(){e&&$.isFunction(e)&&e()})},commentForm:function(){function e(){(i=CKEDITOR.replace(d,r)).on("change",function(e){s.val(e.editor.getData())}),i.on("change",l),i.on("fileUploadResponse",function(e){setTimeout(function(){s.val(e.editor.getData())},0)}),i.on("fileUploadResponse",l),i.on("mode",function(e){var t;"source"===this.mode&&((t=i.editable()).attachListener(t,"input",function(){s.val(e.editor.getData())}),t.attachListener(t,"input",l))}),i.on("key",function(e){var t=e.data.domEvent.$;(t.metaKey||t.ctrlKey)&&13===t.keyCode&&a.form("submit")})}var t,n,o=this,a=$(".comment.form"),i=null,r={height:160,resize_maxHeight:400,toolbar:[{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table"]},{name:"basicstyles",items:["Bold","Italic","Strike"]},{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"clipboard",items:["Undo","Redo"]},{name:"align",items:["JustifyLeft","JustifyCenter"]},{name:"styles",items:["Blockquote","CodeSnippet","Format"]},{name:"source",items:["Source","Maximize"]}],removePlugins:"elementspath",uploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload"},s=a.find("textarea[name=body]"),d=s.get(0),m="OSC_QUESTION_"+page.objId+"_ANSWER_CACHE",c="OSC_QUESTION_"+page.objId+"_ANSWER_PUBLISH_CACHE",l=window.common.throttle(function(){try{var e=s.val()||"";e&&0<e.trim().length?localStorage.setItem(m,e):localStorage.removeItem(m)}catch(e){}},500);s.on("focus",function(){e(),i.on("instanceReady",function(e){CKEDITOR.instances.body.focus()})}),a.form({inline:!0,fields:{body:{identifier:"body",rules:[{type:"empty",prompt:"请输入回答内容"}]}}}).api({url:page.api_prefix+"/question/answer",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=window.common.getCurrentUrl(!0)+"#comment";return!!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(c,"1")}catch(e){}})&&e},onSuccess:function(e){var t;1===e.code?(e.message&&$("body").toast({type:"success",content:e.message||"发布成功"}),window.localStorage&&window.localStorage.removeItem(m),i.setData(""),0<(t=e.result.id||-1)&&$.post(page.getCommentUrl,{_answer_id:t},function(e){o._answersList.find(".answers-list").append(e),o.parseEmoticon(),o.hightlight(),o._setAnswersCount(1)})):$(this).message({type:"negative",content:e.message||"发布失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),void 0!==window.localStorage&&(t=localStorage.getItem(m)||"",n=localStorage.getItem(c)||"",t&&0<t.trim().length&&(s.val(t),e(),n&&page.g_user_code&&(localStorage.removeItem(c),a.form("submit"))))},_setAnswersCount:function(e){e=parseInt(e)||0;var t,n=this._questionDetailEl.find("span[data-article-reply-count]"),o=n.first();o&&0<o.length&&(t=parseInt(o.text())||0,(t+=e)<0&&(t=0),n.text(t))},_setAnswerRepliesCount:function(e,t){if((e=e||-1)<=0)return!1;t=parseInt(t)||0;var n,o,a=this._answersList.find(".comment.answer[data-answer-id="+e+"]");a&&0<a.length&&(n=a.find(".actions > a.reply > span.reply-count"),o=parseInt(n.text())||0,n.text(o+t))},questionComment:function(){var n=this,o=this._questionCommentModal,a=$("#questionCommentForm");o.modal({onShow:function(){a.form("reset"),a.message("hideAll");var e=$(this).attr("data-answer-id")||-1;a.find("input[name=parent]").val(e);var t=$(this).attr("data-atwho")||"";0<(t=t.trim()).length&&a.find("textarea[name=body]").val("回复 @"+t+" : ")},onApprove:function(){return a.message("hideAll"),a.form("submit"),!1}}),a.form({inline:!0,fields:{body:{identifier:"body",rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[200]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.api_prefix+"/question/reply_to_post",method:"post",serializeForm:!0,beforeSend:function(e){return $(this).message("hideAll"),e},onSuccess:function(e){if(1!==e.code)return $(this).message({type:"negative",content:e.message||"评论失败"}),!1;$(this).message({type:"positive",content:e.message||"评论成功"});var t=a.find("input[name=parent]").val();a.form("reset"),n.loadCommentReplies(t,1,function(){setTimeout(function(){o.modal("hide")},1e3)}),n._setAnswerRepliesCount(t,1)},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),o.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&o.find(".positive.button").click()});var e=this._answersList;e.on("click",".comment.answer > .answer-content-wrap > .content > .actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment.answer:eq(0)").attr("data-answer-id");o.attr("data-answer-id",t),o.attr("data-atwho",""),o.modal("show")}),e.on("click",".comment.reply > .content > .actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment.answer:eq(0)").attr("data-answer-id"),n=$(this).attr("data-atwho");o.attr("data-answer-id",t),o.attr("data-atwho",n),o.modal("show")})},questionCommentInnerReply:function(){var d=this,m=d._answersList,c="OSC_QUESTION_"+page.objId+"_ANSWER_REPLY_CACHE";if(m.on("click",".comment .actions a.reply",function(e){e.stopPropagation();var o=$(e.target).parents(".comment:eq(0)"),a=o.attr("data-answer-id"),i=$(this).attr("data-atwho")||"",r=$(e.target).parents(".comment.answer:eq(0)").attr("data-answer-id"),t="";o.hasClass("answer")?t="#answer_"+a:o.hasClass("reply")&&(t="#answer_reply_"+a);var n=window.common.getCurrentUrl(!0)+t;if(!window.common.checkLoginForWeChat(n,function(){try{localStorage.setItem(c,a)}catch(e){}}))return!1;if(0<o.find(".content:eq(0) [data-rely-comment-form]").length){var s=o.find(".content:eq(0) [data-rely-comment-form]").get(0);return s.vueInstance&&s.vueInstance.focus(),!1}$("[data-rely-comment-form]").each(function(e,t){var n=$(t);t.vueInstance&&t.vueInstance.$destroy(),n.remove()}),0===$('[data-reply-comment-form][data-comment-id="'+a+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get("/widgets/comments_reply_form",function(e){var t=document.createElement("div");t.innerHTML=e,$(t).find("[data-reply-comment-form]").attr("data-comment-id",a),o.find(".content:eq(0)").append(t);var n=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:m,toggleLoadComments:function(){d.loadCommentReplies(r,1),d._setAnswerRepliesCount(r,1)},url:page.api_prefix+"/question/reply_to_post",params:{parent:r,user:page.g_user_id},commentedAutoScrollToTop:!1,contentField:"body",commentMaxLength:200});n.init(),n.focus(),i&&n.insertContent("回复 @"+i+" : ")}).always(function(){window.oscReplyCommentFormLoading=!1}))}),void 0!==window.localStorage&&page.g_user_code){var e=localStorage.getItem(c)||"";if(e){if(0===$('.comment[data-answer-id="'+e+'"]').length)return;localStorage.removeItem(c),setTimeout(function(){$('.comment[data-answer-id="'+e+'"] .content .actions a.reply').click()},1e3)}}},deleteAnswer:function(){var o=this;$(".delete-answer.modal").modal({onApprove:function(){var e=$(this).attr("data-answer-id"),t=$(this).attr("data-answer-hash"),n=o._answersList.find(".comment.answer[data-answer-id="+e+"]");$.post(page.api_prefix+"/question/delete_answer",{id:e,hash:t,user_code:page.g_user_code},function(e){1===e.code?(n.fadeOut(function(){n.remove()}),o._setAnswersCount(-1)):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),this._answersList.on("click",".comment.answer > .answer-content-wrap > .content > .actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)"),n=t.attr("data-answer-id"),o=t.attr("data-answer-hash"),a=$(".delete-answer.modal");a.attr("data-answer-id",n),a.attr("data-answer-hash",o),a.modal("show")})},deleteComment:function(){var o=this;$(".delete-comment.modal").modal({onApprove:function(){var e=$(this).attr("data-reply-answer-id"),t=$(this).attr("data-reply-answer-hash"),n=$(this).attr("data-answer-id");$(this).attr("data-page-index");$.post(page.api_prefix+"/question/delete_answer",{id:e,hash:t,user_code:page.g_user_code},function(e){1===e.code?(o.loadCommentReplies(n,1),o._setAnswerRepliesCount(n,-1)):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),this._answersList.on("click",".comment.reply > .content > .actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)"),n=t.attr("data-answer-id"),o=t.attr("data-answer-hash"),a=$(e.target).parents(".comment:eq(1)").attr("data-answer-id"),i=$(e.target).parents(".replies-wrap:eq(0)").attr("data-page-index"),r=$(".delete-comment.modal");r.attr("data-reply-answer-id",n),r.attr("data-reply-answer-hash",o),r.attr("data-answer-id",a),r.attr("data-page-index",i),r.modal("show")})},answerVote:function(){var a="OSC_QUESTION_"+page.objId+"_ANSWER_VOTE_CACHE";function r(t,e,n){var o=t.parent().find(".vote-count");parseInt(o.text().match(/\d+/)[0]);$.post(page.api_prefix+"/question/vote_answer",{user:page.g_user_id,user_code:page.g_user_code,id:e,vote:n},function(e){0!==e.code?(n&&e.result,o.text(e.result.vote),t.toggleClass("active")):$("body").toast({type:"error",content:e.message||"投票失败"})})}function i(e,t){var n,o,a,i=$('.comment.answer[data-answer-id="'+e+'"]');0!==i.length&&(n=i.find(".vote-wrap"),o=n.find(".vote-btn."+(t?"vote-up":"vote-down")),a=0<n.find(".vote-btn.active").length,o.hasClass("active")?r(o,e,t):a?$("body").toast({type:"error",content:"您已经对此问题投过票了，不能重复投票"}):t?r(o,e,!0):$(".vote-confirm.modal").modal({onApprove:function(){r(o,e,!1)}}).modal("show"))}if(this._commentsContainer.on("click",".comment.answer > .answer-left > .vote-wrap > .vote-btn",function(e){var t=$(this).hasClass("vote-up"),n=$(e.target).parents(".comment:eq(0)").attr("data-answer-id"),o=window.common.getCurrentUrl(!0)+"#answer_"+n;if(!window.common.checkLoginForWeChat(o,function(){try{localStorage.setItem(a,n+","+t)}catch(e){}}))return!1;i(n,t)}),void 0!==window.localStorage&&page.g_user_code){var e=localStorage.getItem(a)||"";if(e){var t=e.split(",");if(2===t.length){var n=t[0],o="true"===t[1];if(0===$('.comment.answer[data-answer-id="'+n+'"]').length)return;localStorage.removeItem(a),setTimeout(function(){i(n,o)},1e3)}}}},markBestAnswer:function(){var i=this;this._answersList.on("click",".comment.answer > .answer-content-wrap > .content > .actions a.mark-best-answer",function(e){var t=$(e.target).parents(".comment:eq(0)"),n=t.attr("data-answer-id"),o=t.hasClass("best-answer");if(!window.common.checkLogin())return!1;function a(){$.post(page.api_prefix+"/question/mark_as_best_v2",{id:n,user_code:page.g_user_code},function(e){1===e.code?(i.loadComments(),$("body").toast({type:"success",content:"操作成功"})):$("body").toast({type:"error",content:e.message||"操作失败"})})}o?$(".cancel-best-answer.modal").modal({onApprove:a}).modal("show"):$(".best-answer.modal").modal({onApprove:a}).modal("show")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initPoll:function(){var t=this,e=$(".poll-wrap"),n=e.find(".vote-form"),o=n.find(".poll-options");o.find(".option-progress .ui.progress").progress();var a=n.find('input[name="multiple"]').val()||"",a=1===parseInt(a),i=e.find('input[name="maxSelect"]').val(),i=parseInt(i)||0,r="true"===(r=e.find('input[name="isVoted"]').val());o.find("input[type=checkbox]").on("change",function(){var e=o.find("input[type=checkbox]:checked").length;a&&0<i&&(i<=e?o.find("input[type=checkbox]:not(:checked)").parents(".option-item.field").addClass("disabled"):o.find(".option-item.field").removeClass("disabled"))}),n.on("click",".submit.button",function(){if(!window.common.checkLogin())return!1;if(r)return $("body").toast({type:"error",content:"您已投过票，感谢参与"}),!1;var e=a?o.find("input[type=checkbox]:checked"):o.find("input[type=radio]:checked");if(!e||e.length<=0)return $("body").toast({type:"error",content:"您还没有选择任何一项"}),!1;$.post(page.api_prefix+"/pool/vote",n.serialize(),function(e){1===e.code?($("body").toast({type:"success",content:"投票成功"}),t.loadPollWrapAJAX()):$("body").toast({type:"error",content:e.message||"投票失败"})})})},loadPollWrapAJAX:function(){var t=this,n=$(".poll-wrap");$.get("/question/widgets/_detail_poll?qid="+page.objId,function(e){n.html(e),t.initPoll()})},scrollToCommentFromUrlCommentId:function(){var n=location.hash,e=n.match(/#\w*_(\d+).*/),t=e?Math.floor(e[1]):-1;0<t&&this.loadCommentsByCommentId(t,function(){setTimeout(function(){var e,t=$(n);t.length&&(0<(e=t.offset().top)-80&&(e-=80),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))},0)})},register:function(){this.initManagerMenu(),this.initAddRemarkBtn(),this.initAdditionalRemarkAction(),this.hightlight(),this.parseEmoticon(),this.answersListPJAX(),this.answerReplies(),this.commentForm(),this.questionCommentInnerReply(),this.deleteAnswer(),this.deleteComment(),this.answerVote(),this.markBestAnswer(),this.initPoll(),this.scrollToCommentFromUrlCommentId()}},e});
"use strict";OSCDefine("web-question-ask",function(){function e(){var r=$(".new-question.form"),e=r.find("input[name=subject]"),n=r.find("textarea[name=body]"),t={height:350,resize_minHeight:423,resize_maxHeight:1e3,uploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/question/ckeditor_dialog_img_upload"},i=function(){var i=CKEDITOR.replace(n[0],t);i.on("change",function(e){n.val(e.editor.getData())}),i.on("fileUploadResponse",function(e){setTimeout(function(){n.val(e.editor.getData())},0)}),i.on("mode",function(e){var t;"source"===this.mode&&(t=i.editable()).attachListener(t,"input",function(){n.val(e.editor.getData())})})};r.find(".checkbox").checkbox(),$(".catalog.menu .item").on("click",function(){r.find("input[name=catalog]").val($(this).data("value")),$(this).addClass("active").closest(".ui.menu").find(".item").not($(this)).removeClass("active")});var o=new OSCCaptcha({imgSelector:".new-question.form .captcha img",refreshSelector:".new-question.form .captcha",inputSelector:".new-question.form input[name=verifyCode]",captchaUrl:page.api_prefix+"/user/captcha"});$.fn.form.settings.rules.expertName=function(e){return!r.find("input[name=expertPresent]").is(":checked")||/^@\S+$/.test(e)};var a=r.find("input[name=expertName]");r.find("input[name=expertPresent]").on("change",function(){$(this).is(":checked")?a.show():(a.hide(),r.form("validate field","expertName"),r.find("input[name=expertName]").val(""))}),r.find(".project-name.dropdown").dropdown({allowAdditions:!0,maxSelections:5,fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/project/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result.map(function(e){return{name:e.name,value:e.name}})),{results:t}}},onNoResults:function(e){return!!(e&&0<e.trim().length)}}),r.form({inline:!0,fields:{catalog:{identifier:"catalog",rules:[{type:"empty",prompt:"请选择板块"}]},subject:{identifier:"subject",rules:[{type:"empty",prompt:"请输入标题"},{type:"maxLength[120]",prompt:"标题长度不能超过 {ruleValue} 个字符"}]},body:{identifier:"body",rules:[{type:"empty",prompt:"请输入描述"},{type:"minLength[10]",prompt:"描述内容长度不能少于 {ruleValue} 个字符"}]},expertName:{identifier:"expertName",rules:[{type:"expertName",prompt:"请输入正确的格式：@昵称"}]},verifyCode:{identifier:"verifyCode",rules:[{type:"empty",prompt:"请输入验证码"}]}}}).api({url:page.api_prefix+"/question/newAsk",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t,i=e.data,n={user_code:i.user_code,userId:i.userId,id:i.id,askUserId:i.askUserId,tag:i.tag,tag_type:i.tag_type,subject:i.subject,catalog:i.catalog,prj:i.prj,body:i.body,notifyMethod:i.notifyMethod,closeAnswer:i.closeAnswer,expertPresent:i.expertPresent,expertName:i.expertName,togglePoll:i.togglePoll,independentPoll:i.independentPoll,expiration:i.expiration,visible:i.visible,scoreLimit:i.scoreLimit,postsLimit:i.postsLimit,multiple:i.multiple,maxSelect:i.maxSelect,verifyCode:i.verifyCode||""},o=$.param(n),a=[];return 1===parseInt(n.togglePoll)&&(r.find(".poll-detail-settings .options-list .option-item").each(function(e,t){var i=$(t),n=i.find('input[name="pollOptionId"]').val(),o=i.find('input[name="pollOption"]').val();o&&""!==o.trim()&&a.push({pollOptionId:n,pollOption:o})}),0<(t=a.map(function(e){return $.param(e)}).join("&")).length&&(o=o+"&"+t)),e.data=o,e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||(page.is_edit?"保存成功":"发布成功")}),window.onbeforeunload=null,window.location.href=page.question_url+"/"+page.question_user_id+"_"+e.result.questionId):($(this).message({type:"negative",content:e.message||"操作失败",disappear:2e3}),o.refresh())},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),$(function(){i(),e.focus(),window.onbeforeunload=function(){var e=r.find("input[name=subject]").val().trim(),t=n.val().trim();if(""!==e||""!==t)return"确认放弃此问题"}})}return e.prototype={constructor:e,initPollSettings:function(){var o=$(".poll-settings");if(!o||0===o.length)return!1;var e=o.find(".poll-detail-settings"),t=e.find(".options-wrap").find(".options-list");o.find("input[name=togglePoll]").on("change",function(){$(this).is(":checked")?e.show():e.hide()}),e.on("click",".options-wrap .add-option",function(){var e=$("#optionItemTemplate");t.append(e.html())}),e.on("click",".options-wrap .remove-option",function(e){var t=$(e.target).parents(".option-item:eq(0)"),i=o.find('input[name="pollId"]').val(),n=t.find('input[name="pollOptionId"]').val();t.find('input[name="pollOption"]').val();page.is_edit&&0<n?$(".delete-poll-option.modal").modal({onApprove:function(){$.post(page.api_prefix+"/pool/del_option",{id:page.question_id,pid:i,opid:n},function(e){1===e.code?t.remove():$("body").toast({type:"error",content:"删除失败，请重试"})})}}).modal("show"):t.remove()})},register:function(){this.initPollSettings()}},e});
!function(){function e(t){var r,n=t.element||null,a=t.getIndex||null,s=t.bigImgArr||[],l=t.smallImgArr||[],d=t.rawImgArr||[],i=t.showBigImgCallback,g=t.isBigImgMode;s.length<=0&&l<=0&&n.find('[data-multi-image-raw="item"] img').each(function(t,a){var i=$(a).attr("data-big-img"),e=$(a).attr("data-small-img"),r=$(a).attr("data-raw-img");s.push(i),l.push(e),d.push(r)}),r={createMultiImageWrapper:function(t){t=t||[];var r=$("<div>").attr("data-multi-image","wrapper");return t.forEach(function(t){var a=$("<div>").attr("data-multi-image","item"),i=$("<img>").attr("src",t),e=$("<div>").addClass("loading-gif");a.append(e).append(i),r.append(a)}),r},createStageWrapper:function(t){t=t||[];var e=$("<div>").attr("data-multi-image-stage","wrapper");return 1<t.length&&t.forEach(function(t){var a=$("<div>").attr("data-multi-image-stage","item"),i=$("<img>").attr("src",t);a.append(i),e.append(a)}),e},createToolbarWrapper:function(){var t,a,i,e,r=$("<div>").attr("data-multi-image","toolbar");return g?(t=$("<span>").attr("data-multi-image-tools","show_big_img").html('<i class="icon-svg icon-enlarge-gray"></i>查看原图'),r.append(t)):(a=$("<a>").attr({href:"",target:"_blank","data-multi-image-tools":"show_big_img"}).html('<i class="icon-svg icon-enlarge-gray"></i>查看原图'),i=$("<span>").attr("data-multi-image-tools","rotate_left").html('<i class="icon-svg icon-redo-gray"></i>向左旋转'),e=$("<span>").attr("data-multi-image-tools","rotate_right").html('<i class="icon-svg icon-rotate-right-gray"></i>向右旋转'),r.append(a).append(i).append(e)),r}},this.init=function(){var t,a=r.createMultiImageWrapper(d),i=r.createStageWrapper(l),e=r.createToolbarWrapper();g?((t=$("<div>").attr("data-multi-image-big","wrapper")).append(e).append(a).append(i),$("body").append(t)):((t=$("<div>").attr("data-multi-image","panel")).append(e).append(a).append(i),n.append(t),t.show())},"false"===(n.attr("data-init-multiImage")||"false")&&(this.init(),n.attr("data-init-multiImage","true"));var e=n.find('[data-multi-image="panel"]'),m=e.find('[data-multi-image="wrapper"]'),o=n.find('[data-multi-image-raw="list"]'),h=m.find('[data-multi-image="item"]'),c=h.length,u=e.find('[data-multi-image-stage="wrapper"]'),p=u.find('[data-multi-image-stage="item"]'),f=0,w=m.width(),v=(m.height(),{left:.4*w,right:.6*w}),I={closePanel:function(){o.show(),e.hide()},showPanel:function(){o.hide(),e.show()}},b={showCursor:function(){m.delegate('[data-multi-image="item"]',"mousemove",function(t){var a,i,e=$(this).find("img");0<e.length&&(a=e.width(),(i=t.pageX-e.offset().left)<=(v={left:.35*a,right:.65*a}).left&&0<f?m.attr("data-cursor","left"):i>=v.right&&f<c-1?m.attr("data-cursor","right"):m.attr("data-cursor","small"))})},switchImage:function(){m.delegate('[data-multi-image="item"]',"mousedown",function(t){var a,i,e=$(this).find("img");0<e.length&&3!==t.which&&(a=t.pageX-e.offset().left,i=e.width(),a<=(v={left:.35*i,right:.65*i}).left&&0<f?S.switchToPrev():a>=v.right&&f<c-1?S.switchToNext():I.closePanel())})},switchByStage:function(){u.delegate('[data-multi-image-stage="item"]',"click",function(t){var a=$(this).index()||0;$(this).addClass("active").siblings('[data-multi-image-stage="item"]').removeClass("active"),S.switchSlide(a)})},rotateLeft:function(){var i=this;e.delegate('[data-multi-image-tools="rotate_left"]',"click",function(){var t=h.eq(f),a=t.find("img");i.rotateImg(a,t,"left")})},rotateRight:function(){var i=this;e.delegate('[data-multi-image-tools="rotate_right"]',"click",function(){var t=h.eq(f),a=t.find("img");i.rotateImg(a,t,"right")})},rotateImg:function(t,a,i){var e=t.attr("data-isAppendWrapper")||"false",r=t.attr("data-rotate-count")||0,n=0,s=0,l=0;$(a).width(),$(a).height();if(t){var d={width:t.width()>=m.width()?m.width():t.width(),height:t.height()};"left"===i?r--:"right"===i&&r++;var g,o=90*r;switch(r%4){case 0:s=n=0,l=d.height;break;case-1:n=(d.width-d.height)/2,l=s=d.width;break;case-2:n=d.width,l=s=d.height;break;case-3:n=(d.width+d.height)/2,s=0,l=d.width;break;case-4:s=0,n=d.height/2,l=d.width;break;case 1:n=(d.width+d.height)/2,s=0,l=d.width;break;case 2:n=d.width,l=s=d.height;break;case 3:n=(d.width-d.height)/2,l=s=d.width;break;case 4:n=-d.width/2,s=0,l=d.height}t.css({"transform-origin":"0 0",transform:"rotateZ("+o+"deg)"}),t.attr("data-rotate-count",r),"false"==e?((g=$("<div>").height(l).css({left:n,top:s,position:"relative"}).addClass("image-rotate-wrapper")).append(t),a.append(g),t.attr("data-isAppendWrapper","true")):t.parents(".image-rotate-wrapper").height(l).css({left:n,top:s})}},showOriginImg:function(){e.delegate('[data-multi-image-tools="show_big_img"]',"click",function(){h.eq(f).find("img");"function"==typeof i&&i(f)})}},S={switchToNext:function(){f<c-1?f++:f=c-1,this.switchSlide(f)},switchToPrev:function(){0<f?f--:f=0,this.switchSlide(f)},switchToCur:function(){f=f,this.switchSlide(f)},switchSlide:function(t){f=t,h.eq(t).addClass("active").siblings('[data-multi-image="item"]').removeClass("active").removeClass("active-opacity"),p.eq(t).addClass("active").siblings('[data-multi-image-stage="item"]').removeClass("active"),e.find('[data-multi-image-tools="show_big_img"]').attr("href",d[t]),setTimeout(function(){h.eq(t).addClass("active-opacity")},0),"function"==typeof a&&a(t)}};this.switchIndex=function(t){S.switchSlide&&S.switchSlide(t)},this.closePanel=function(){I.closePanel()},this.showPanel=function(){I.showPanel()},$('[data-multi-image="item"] img').each(function(t,a){a.onload=function(){$(this).parents('[data-multi-image="item"]').find(".loading-gif").remove()}}),this.register=(b.showCursor(),b.switchImage(),b.switchByStage(),b.rotateLeft(),b.rotateRight(),void S.switchSlide(f))}var t={showMultiImages:{},initShowMultiImages:function(t,a){var i=t.attr("data-optlog-id")||0;"false"===(t.attr("data-init-multiImage")||"false")&&(this.showMultiImages[i]=new e({element:t}),t.attr("data-init-multiImage","true")),this.showMultiImages[i].switchIndex(a),this.showMultiImages[i].showPanel()},initSmallImages:function(){function i(t){var a=$(t).data("max-height"),i=$(t).data("max-width"),e=t.naturalWidth;t.naturalHeight<e?($(t).css("width","auto"),$(t).css("max-height",a)):($(t).css("max-width",i),$(t).css("height","auto"))}$('[data-multi-image-raw="item"] img').each(function(t,a){$(a).data("init")||($(a).data("init",!0),a.onload=function(){i(a)},a.complete&&i(a))})},bindSmallImages:function(){var i=this;$("body").delegate('[data-multi-image-raw="wrapper"] [data-multi-image-raw="item"]',"click",function(){var t=$(this).parents('[data-multi-image-raw="wrapper"]'),a=$(this).index()||0;i.initShowMultiImages(t,a)})}};t.bindSmallImages(),$(function(){t.initSmallImages()}),window.OSCMultipleImageViewer=t}();
!function(){var i={_initViewer:function(){if(window.innerWidth<768)return!1;var i=$('.tweet-item .multimgs[data-list-multiple-image-viewer="true"]');if(i.length<=0)return!1;i.each(function(i,e){var t=$(e);t.data("loaded-viewer")||(new Viewer(e,{button:!0,navbar:!0,title:!1,toolbar:!0,tooltip:!1,movable:!0,zoomable:!0,rotatable:!1,scalable:!1,transition:!0,fullscreen:!1,keyboard:!0,backdrop:!0,loop:!0,loading:!0,zoomRatio:.25,maxZoomRatio:5,viewed:function(){this.viewer.options.minZoomRatio=this.viewer.initialImageData.ratio},url:function(i){return i.getAttribute("data-raw-img")}}),t.data("loaded-viewer",!0))})},initViewer:function(){var i=this;window.Viewer?i._initViewer():new window.common.dynamicLoader(["/new-osc/js/utils/plugins/viewer/viewer.min.css","/new-osc/js/utils/plugins/viewer/viewer.osc.css","/new-osc/js/utils/plugins/viewer/viewer.js","/new-osc/js/utils/plugins/viewer/jquery-viewer.min.js"],function(){i._initViewer()}).loadFiles()}};$(function(){i.initViewer()}),window.OSCListMultipleImageViewer=i}();
"use strict";OSCPlugin("tweet-publish-form",function(){return function(){var a="OSC_TWEET_"+page.tweetPublishFormKey+"_CONTENT_CACHE",i="OSC_TWEET_"+page.tweetPublishFormKey+"_PUBLISH_CACHE",t=window.common.throttle(function(e){try{e&&0<e.trim().length?localStorage.setItem(a,e):localStorage.removeItem(a)}catch(e){}},500),r=new Vue({el:"#tweetForm",data:function(){return{tweetMaxLength:160,tweetContent:page.tweetTopicPrefix||"",tweetPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}],uploadAttachmentId:0,uploadFileCount:0,uploadFileMax:9,uploadDropzone:null,uploadDropzoneProgress:!1,pictureLocalError:"",pictureNetwork:!1,pictureNetworkUrl:"",pictureNetworkImgUrl:"",pictureNetworkError:"",pictureNetworkUploading:!1,codeEditable:!0,codeLanguage:"",codeSnippet:""}},computed:{uploadFileAvaluableCount:function(){return this.uploadFileMax-this.uploadFileCount},curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},tweetContentIsEmpty:function(){return 0===this.tweetContent.length},tweetCountText:function(){return this.tweetContent.length+"/"+this.tweetMaxLength}},mounted:function(){var e,t,o=this;o.__$data=ObjHelper.copy(o.$data),o.initDropzone(),document.addEventListener("click",function(e){0!==$(".tweet-form .toolbox-popup.toolbox-picture").find(e.target).length||0!==$('a[data-popup="toolbox-picture"]').find(e.target).length||$(e.target).hasClass("dz-hidden-input")||$(e.target).is(".tweet-form .toolbox-popup.toolbox-picture")||$(e.target).is('a[data-popup="toolbox-picture"]')||0===o.uploadFileCount&&""===o.pictureNetworkImgUrl&&$(o.$refs.showPictureToolBox).popup("hide")}),o.initPasteUploadPicture(),void 0!==window.localStorage&&(e=localStorage.getItem(a)||"",t=localStorage.getItem(i)||"",e&&0<e.trim().length&&(o.tweetContent=e,t&&page.g_user_code&&(localStorage.removeItem(i),o.publishTweet())))},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},initDropzone:function(){var r=this;r.uploadDropzone=new Dropzone("#dropzone",{parallelUploads:1,maxFilesize:1,paramName:"resource",addRemoveLinks:!0,acceptedFiles:"image/png,image/jpeg,image/gif",maxFiles:r.uploadFileMax,url:"/tweet/upload_multi_image",accept:function(e,t){r.pictureLocalError="",r.uploadDropzoneProgress=!0,t()}}),r.uploadDropzone.on("queuecomplete",function(){r.uploadDropzoneProgress=!1}),r.uploadDropzone.on("removedfile",function(e){r.pictureLocalError="",r.uploadAttachmentId&&e.attachmentId&&$.post(page.api_prefix+"/tweet/delete_tweet_image",{id:e.attachmentId,lastId:r.uploadAttachmentId,user_code:page.g_user_code||""},function(e){1===e.code?r.uploadFileCount=r.uploadDropzone.getAcceptedFiles().length:r.pictureLocalError=e.message})}),r.uploadDropzone.on("addedfile",function(t){r.pictureLocalError="",r.uploadDropzone.getAcceptedFiles().forEach(function(e){e.name===t.name&&e.size===t.size&&e.lastModified===t.lastModified&&(r.uploadDropzone.removeFile(t),r.pictureLocalError="图片( "+t.name+" )已存在，请勿重复上传!")})}),r.uploadDropzone.on("sending",function(e,t,o){o.append("photoId",r.uploadAttachmentId)}),r.uploadDropzone.on("success",function(e,t){var o,a;r.pictureLocalError="",1===t.code?(a=(o=t.result).id>r.uploadAttachmentId?o.id:r.uploadAttachmentId,e.attachmentId=a,r.uploadAttachmentId=a,r.uploadFileCount=r.uploadDropzone.getAcceptedFiles().length):r.pictureLocalError=t.message})},insertNetworkPicture:function(){var o=this;if(o.pictureNetworkError="",!$(".upload-picture-network.form").form("validate form"))return!1;o.pictureNetworkUploading=!0,$.post("/tweet/insert_img",{source:2,url:o.pictureNetworkUrl},function(e){var t;1===e.code?(t=e.result,o.pictureNetworkImgUrl=t.view,o.uploadAttachmentId=t.id>o.uploadAttachmentId?t.id:o.uploadAttachmentId):o.pictureNetworkError=e.message||"上传图片失败"}).fail(function(){o.pictureNetworkError="网络错误，请稍后再试！"}).always(function(){o.pictureNetworkUploading=!1})},initPasteUploadPicture:function(){this.$el&&this.$el.addEventListener("paste",this._pasteUpload.bind(this))},_pasteUpload:function(e){var t,o,a,r=e.clipboardData||window.clipboardData;if(r){if(!(t=r.items)||t.length<=0)return;a=r.types||[];for(var i=0;i<a.length;i++)if("Files"===a[i]){o=t[i];break}if(o&&"file"===o.kind&&o.type.match(/^image\//i)){var n=o.getAsFile();if(!n)return!1;if(this.uploadFileCount>=this.uploadFileMax)return!1;this.uploadDropzone.addFile(n),$(this.$refs.showPictureToolBox).popup("show"),e.preventDefault()}}},insertTopic:function(){this.clearMessage();var e,t,o="#此处输入话题#";this.insertContent(o)&&(t=(e=selectRange.of(this.$refs.tweetTextarea)).getCurPos(),e.setSelectText(t-(o.length-1),t-1))},saveCodeSnippet:function(){if(!$(".code-editor.form").form("validate form"))return!1;this.codeEditable=!1,$(".code-editor pre code").each(function(e,t){hljs.highlightBlock(t)})},deleteCodeSnippet:function(){this.codeEditable=!0,this.codeSnippet=""},reset:function(){var e=this;ObjHelper.set(e.$data,e.__$data),e.uploadDropzone.removeAllFiles(),$(e.$refs.showPictureToolBox).popup("hide"),$(e.$refs.codeLanguageDropdown).dropdown("clear"),window.localStorage&&window.localStorage.removeItem(a)},publishTweet:function(){var e,r=this;if(!window.common.checkLoginForWeChat(null,function(){try{localStorage.setItem(i,"1")}catch(e){}}))return!1;r.tweetPublishLoading||(r.clearMessage(),r.tweetContentIsEmpty?r.showMessage("error","内容不能为空",2e3):r.tweetContent.length>r.tweetMaxLength?r.showMessage("error","最多只能输入"+r.tweetMaxLength+"个字符！",2e3):(r.tweetPublishLoading=!0,e={userId:page.g_user_id||"",user_code:page.g_user_code||"",content:r.tweetContent,code_snippet:r.codeSnippet,code_brush:r.codeLanguage,attachment:r.uploadAttachmentId},$.post("/tweet/pubForwardTweet",e,function(e){var o,a;1===e.code?(e.message&&$("body").toast({type:"success",content:e.message||"动弹发布成功"}),r.tweetPublishLoading=!1,r.reset(),!e.result||void 0===e.result.log||0<(o=$(".tweets-list-container[data-tweets-list]")).length&&(a=e.result.log,$.get("/tweets/widgets/_tweet_list_item_ajax?tweetId="+a,function(e){if(e){if(0===$(e).filter('.tweet-item[data-tweet-id="'+a+'"]').length)return void r.showMessage("error","网络错误，请稍后再试！");var t=o.find(".empty-tips");0<t.length&&t.remove(),o.prepend(e),$(function(){$("[data-emoji-render]").emoticon()}),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages(),OSCListMultipleImageViewer&&OSCListMultipleImageViewer.initViewer()}}))):r.showMessage("error",e.message||"发布失败")}).fail(function(){r.showMessage("error","网络错误，请稍后再试！")}).always(function(){r.tweetPublishLoading=!1})))},tweetContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&this.publishTweet()},addTopic:function(e){var t=e.target.innerText+" ";this.insertContent(t)},showPictureToolBox:function(){$(this.$refs.showPictureToolBox).popup("is visible")?$(this.$refs.showPictureToolBox).popup("hide"):$(this.$refs.showPictureToolBox).popup("show")},insertContent:function(e){return!this.tweetPublishLoading&&(this.tweetContent.length>=this.tweetMaxLength||this.tweetContent.length+e.length>this.tweetMaxLength?(this.showMessage("error","最多只能输入"+this.tweetMaxLength+"个字符！",2e3),!1):(selectRange.of(this.$refs.tweetTextarea).insertAfterText(e),this.tweetContent=this.$refs.tweetTextarea.value,!0))},showMessage:function(e,t,o){var a=this;a.tipMessage.className="success"===e?"positive":"negative",a.tipMessage.content=t;var r=parseInt(o)||0;a.tipMessage.show=!0,0<r&&setTimeout(function(){a.clearMessage()},r)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}},watch:{tweetContent:function(e){t(e)}}});$("#tweetForm.tweet-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),a=$(o).parent().find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:a,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0,onShow:function(){if(!window.common.checkLogin())return!1}})}),$(".tweet-form .toolbox .toolbox-code .dropdown").dropdown(),$(".upload-picture-network.form").form({inline:!0,fields:{pictureNetworkUrl:{identifier:"pictureNetworkUrl",rules:[{type:"empty",prompt:"请输入图片网址"},{type:"regExp",value:/(https?:\/\/[^\s\.]+\.[^\s]{2,}\/[^\s]+\.(jpeg|gif|jpg|png|bmp|svg|webp)$)/i,prompt:"请输入正确的图片网址"}]}}}),$(".code-editor.form").form({inline:!0,fields:{codeLanguage:{identifier:"codeLanguage",rules:[{type:"empty",prompt:"请选择编程语言"}]},codeSnippet:{identifier:"codeSnippet",rules:[{type:"empty",prompt:"请输入代码"}]}}});function o(e){var t;Array.isArray(e)&&0<e.length&&((t=$("#tweetForm .tweet-textarea")).atwho({at:"@",data:e,headerTpl:'<div class="atwho-header">我的关注 <small>↑&nbsp;↓&nbsp;</small></div>',searchKey:"searchKey",insertTpl:"${atwho-at}${name}",displayTpl:"<li>${name}</li>",limit:10}),t.on("inserted.atwho",function(e,t,o){r.tweetContent=r.$refs.tweetTextarea.value}),window.__PUBLISH_FORM_ATWHO_INIT=!0)}var n;page.g_user_code&&768<=window.innerWidth&&!window.__PUBLISH_FORM_ATWHO_INIT&&(window.__USER_FRIENDS?o(window.__USER_FRIENDS):(n=function(e){o(e)},$.post("/tweet/atwho",function(e){var t=e;Array.isArray(t)&&0<t.length&&(window.__USER_FRIENDS=t,n(t))})));var e=$("#tweetForm .hot-topics"),s=e.find(".topics-list > .item"),l=e.find('input[name="hotTopicsNewLabels"]').val().split(",");l&&0<l.length&&s.each(function(e,t){var o=$(t),a=o.data("name")||"";-1<l.indexOf(a)&&o.prepend('<span class="new-label">新</span>')})}});
"use strict";OSCDefine("web-tweet-index",["tweet-publish-form"],function(){function t(){this.tweetList=$(".tweet-list")}return t.prototype={constructor:t,initTweetInfiniteScroll:function(){var t=this;({tweetList:new OSCInfiniteScroll({pagePath:function(){return $(".pagination__next").attr("href")},checkLastPage:".pagination__next",containerSelector:"#tweetList",itemListSelector:".tweets-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:10,itemSelector:".tweet-item",loadOnScroll:!0,onLoad:function(t){var e,i=t.querySelector(".pagination__next");i&&(e=i.getAttribute("href"),$(".pagination__next").attr("href",e))},onAppend:function(){t.parseEmoticon(),OSCListMultipleImageViewer&&OSCListMultipleImageViewer.initViewer(),$(".osc-gitee-6th-label").popup(),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages()}})}).tweetList.init(),AOS.init({duration:300,once:!0})},initDeleteTweet:function(){var n=this;$(".delete-tweet.modal").modal({onApprove:function(){var i=$(this).attr("data-tweet-id")||0;$.post(page.api_prefix+"/tweet/deleteTweet",{id:i,user_code:page.g_user_code||""},function(t){var e;1===t.code?($("body").toast({type:"success",content:"删除成功"}),(e=n.tweetList.find('.tweet-item[data-tweet-id="'+i+'"]')).fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:t.message||"删除失败"})})}}),n.tweetList.on("click",".tweet-item .meta a.remove",function(t){var e=$(this).parents(".tweet-item:eq(0)").attr("data-tweet-id"),i=$(".delete-tweet.modal");i.attr("data-tweet-id",e),i.modal("show")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initMobileClick:function(){this.tweetList.on("click",".tweet-item",function(t){var e,i=$(t.target),n=0<i.parents(".meta").length,o="a"===t.target.nodeName.toLowerCase()||0<i.parents("a").length;n||o||(e=$(this),window.open(e.find(".meta a.view").attr("href"),"_blank"),t.stopPropagation())})},register:function(){this.initTweetInfiniteScroll(),this.initDeleteTweet(),this.parseEmoticon(),window.innerWidth<768&&this.initMobileClick()}},t});
"use strict";OSCDefine("web-tweet-topic",["tweet-publish-form"],function(){function t(){this.tweetList=$(".tweet-list")}return t.prototype={constructor:t,initTweetInfiniteScroll:function(){var t=this;({tweetList:new OSCInfiniteScroll({pagePath:function(){return $(".pagination__next").attr("href")},checkLastPage:".pagination__next",containerSelector:"#tweetList",itemListSelector:".tweets-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:10,itemSelector:".tweet-item",loadOnScroll:!0,onLoad:function(t){var e,i=t.querySelector(".pagination__next");i&&(e=i.getAttribute("href"),$(".pagination__next").attr("href",e))},onAppend:function(){t.parseEmoticon(),OSCListMultipleImageViewer&&OSCListMultipleImageViewer.initViewer(),$(".osc-gitee-6th-label").popup(),OSCMultipleImageViewer&&OSCMultipleImageViewer.initSmallImages()}})}).tweetList.init(),AOS.init({duration:300,once:!0})},initDeleteTweet:function(){var n=this;$(".delete-tweet.modal").modal({onApprove:function(){var i=$(this).attr("data-tweet-id")||0;$.post(page.space_user_url+"/tweet/deleteTweet",{id:i,user_code:page.g_user_code||""},function(t){var e;1===t.code?((e=n.tweetList.find('.tweet-item[data-tweet-id="'+i+'"]')).attr("data-aos","zoom-out"),setTimeout(function(){e.remove()},500)):$("body").toast({type:"error",content:t.message||"删除失败"})})}}),n.tweetList.on("click",".tweet-item .meta a.remove",function(t){var e=$(this).parents(".tweet-item:eq(0)").attr("data-tweet-id"),i=$(".delete-tweet.modal");i.attr("data-tweet-id",e),i.modal("show")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initMobileClick:function(){this.tweetList.on("click",".tweet-item",function(t){var e,i=$(t.target),n=0<i.parents(".meta").length,o="a"===t.target.nodeName.toLowerCase()||0<i.parents("a").length;n||o||(e=$(this),window.open(e.find(".meta a.view").attr("href"),"_blank"),t.stopPropagation())})},register:function(){this.initTweetInfiniteScroll(),this.initDeleteTweet(),this.parseEmoticon(),window.innerWidth<768&&this.initMobileClick()}},t});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.rgbaster=e()}(this,function(){function o(r,u){void 0===u&&(u=1);var s=new Image;return r.startsWith("data")||(s.crossOrigin="Anonymous"),new Promise(function(c,t){s.onload=function(){var t,e,r,n=s.width*u,o=s.height*u,i=(t=n,e=o,(r=document.createElement("canvas")).setAttribute("width",t),r.setAttribute("height",e),r.getContext("2d"));i.drawImage(s,0,0,n,o);var a=i.getImageData(0,0,n,o);c(a.data)};function e(){return t(new Error("An error occurred attempting to load image"))}s.onerror=e,s.onabort=e,s.src=r})}var i={ignore:[],scale:1};return function(t,e){void 0===e&&(e=i);try{var r=(e=Object.assign({},i,e)).ignore,n=e.scale;return Promise.resolve(o(t,n)).then(function(t){return function(t,e){for(var r={},n=0;n<t.length;n+=4){var o,i,a=t[n+3];0===a||-1===(o=Array.from(t.subarray(n,n+3))).indexOf(void 0)&&(i=a&&255!==a?"rgba("+o.concat([a]).join(",")+")":"rgb("+o.join(",")+")",-1===e.indexOf(i)&&(r[i]?r[i].count++:r[i]={color:i,count:1}))}return Object.values(r).sort(function(t,e){return e.count-t.count})}(t,r)})}catch(t){return Promise.reject(t)}}});
"use strict";OSCDefine("web-tweet-topics",function(){function t(){this._topicsWrap=$("#topicsContainer .topics-wrapper")}return t.prototype={constructor:t,getGrayLevel:function(t){var o=0,e=t.match(/\d+/g);return e&&(o=(299*e[0]+587*e[1]+114*e[2]+500)/1e3),o},generateCardColor:function(){var r=this;$(".topic-cards").find(".topic-card").each(function(t,i){var o=$(i).data("topic-image-url"),e=$(i).data("topic-text-color"),n=$(i).data("topic-bg-color");!o||e&&n||rgbaster(o,{scale:.1,ignore:["rgb(255,255,255)","rgb(0,0,0)"]}).then(function(t){var o=t[0].color,e="rgb(255,255,255)",n=r.getGrayLevel(o);192<=n?(e="rgb(0,0,0)",t.some(function(t){return r.getGrayLevel(t.color)<152&&(e=t.color,!0)})):(e="rgb(255,255,255)",t.some(function(t){return 232<=r.getGrayLevel(t.color)&&(e=t.color,!0)})),$(i).find(".topic-info").css("color",e),$(i).find(".topic-info .cover").css("background","linear-gradient(-180deg, rgba(0, 0, 0, 0) 0%, "+o+" 50%)"),$(i).find(".topic-info .cover").css("opacity","1")})})},initListPJAX:function(){var t=this,o=$(".topics-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#topicsContainer .topics-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){o.addClass("active")}),$(document).on("pjax:complete",function(){o.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing"),t.generateCardColor()})},initTopicInfiniteScroll:function(){var t=this;({topicList:new OSCInfiniteScroll({pagePath:function(){return $(".pagination__next").attr("href")},checkLastPage:".pagination__next",containerSelector:".topics-wrapper-container",itemListSelector:".topics-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:2,itemSelector:".topics-list-item",loadOnScroll:!0,onLoad:function(t){var o,e=t.querySelector(".pagination__next");e&&(o=e.getAttribute("href"),$(".pagination__next").attr("href",o))},onAppend:function(){t.generateCardColor()}})}).topicList.init()},register:function(){this.generateCardColor(),this.initTopicInfiniteScroll()}},t});
"use strict";OSCDefine("web-blog-index",function(){function t(){this._blogListWrap=$(".blog-list-wrap")}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t,e=this,o={recommendArticleList:1,dailyArticleList:1,newestArticleList:1},i={recommendArticleList:new OSCInfiniteScroll({pagePath:".recommend-pagination.pagination__next",checkLastPage:!0,containerSelector:"#recommendArticleList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow()}}),dailyArticleList:new OSCInfiniteScroll({pagePath:".daily-pagination.pagination__next",checkLastPage:!0,containerSelector:"#dailyArticleList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow()}}),newestArticleList:new OSCInfiniteScroll({pagePath:".newest-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newestArticleList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow()}})},n="recommendArticleList",a=$(".article-list.active.tab");0<a.length&&((t=a.attr("data-tab")||"")&&i[t]&&(n=t)),i[n].init();var l=n;$(".blog-tab.menu .item").tab({onLoad:function(t){l!==t&&(i[l]._infScroll&&(o[l]=i[l]._infScroll.pageIndex),i[l].destroy(),i[t].init(),i[t]._infScroll&&(i[t]._infScroll.pageIndex=o[t]),l=t)}})},bindDeleteBlog:function(){this._blogListWrap.on("click",".blog-item .delete-btn",function(){var e=$(this).parents(".blog-item:eq(0)"),t=e.attr("data-id");$(".delete-blog.modal").modal({onApprove:function(){$.post(page.api_prefix+"/blog/delete",{id:t,user_code:page.g_user_code||""},function(t){1===t.code?($("body").toast({type:"success",content:"删除成功"}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:t.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},initMobileClick:function(){this._blogListWrap.on("click",".blog-item",function(t){var e,o=$(t.target);"a"===t.target.nodeName.toLowerCase()||0<o.parents("a").length||(e=$(this),window.open(e.find("a.header").attr("href"),"_blank"),t.stopPropagation())})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.optimizeImgShow(),window.innerWidth<768&&this.initMobileClick()}},t});
"use strict";OSCDefine("web-blog-recommend",function(){function t(){this._blogListWrap=$(".blog-list-wrap")}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;({recommendArticleList:new OSCInfiniteScroll({pagePath:".recommend-pagination.pagination__next",checkLastPage:!0,containerSelector:"#recommendArticleList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})}).recommendArticleList.init()},bindDeleteBlog:function(){this._blogListWrap.on("click",".blog-item .delete-btn",function(){var e=$(this).parents(".blog-item:eq(0)"),t=e.attr("data-id");$(".delete-blog.modal").modal({onApprove:function(){$.post(page.api_prefix+"/blog/delete",{id:t,user_code:page.g_user_code||""},function(t){1===t.code?($("body").toast({type:"success",content:"删除成功"}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:t.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},initMobileClick:function(){this._blogListWrap.on("click",".blog-item",function(t){var e,o=$(t.target);"a"===t.target.nodeName.toLowerCase()||0<o.parents("a").length||(e=$(this),window.open(e.find("a.header").attr("href"),"_blank"),t.stopPropagation())})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.optimizeImgShow(),window.innerWidth<768&&this.initMobileClick()}},t});
"use strict";OSCDefine("web-blog-daily",function(){function t(){this._blogListWrap=$(".blog-list-wrap")}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;({dailyArticleList:new OSCInfiniteScroll({pagePath:".daily-pagination.pagination__next",checkLastPage:!0,containerSelector:"#dailyArticleList",itemListSelector:".blog-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.blog-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})}).dailyArticleList.init()},bindDeleteBlog:function(){this._blogListWrap.on("click",".blog-item .delete-btn",function(){var e=$(this).parents(".blog-item:eq(0)"),t=e.attr("data-id");$(".delete-blog.modal").modal({onApprove:function(){$.post(page.api_prefix+"/blog/delete",{id:t,user_code:page.g_user_code||""},function(t){1===t.code?($("body").toast({type:"success",content:"删除成功"}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:t.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},initMobileClick:function(){this._blogListWrap.on("click",".blog-item",function(t){var e,i=$(t.target);"a"===t.target.nodeName.toLowerCase()||0<i.parents("a").length||(e=$(this),window.open(e.find("a.header").attr("href"),"_blank"),t.stopPropagation())})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.optimizeImgShow(),window.innerWidth<768&&this.initMobileClick()}},t});
"use strict";OSCDefine("web-translate-index",function(){function t(){this._translateEl=$(".web-translate"),this._translateListContainer=$(".translate-list-container"),this._currentInfiniteScroll="";var t=this;this._articleInfiniteScroll={completed:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#completedList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),pending:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#pendingList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),none:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#noneList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll[t._currentInfiniteScroll]&&t._articleInfiniteScroll[t._currentInfiniteScroll].destroy();var e=t._translateEl.find("input[name=currentTab]").val();t._articleInfiniteScroll[e]&&(t._articleInfiniteScroll[e].init(),t._currentInfiniteScroll=e)},initPJAX:function(){var e=this,n=$(".translate-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".translate-tab a.item, .translate-tab .sort-type a",".translate-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);n.removeClass("active"),e.initArticleInfiniteScroll(),e.optimizeImgShow()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},initDeliverArticleModal:function(){var e=$(".deliver-article.modal"),t=e.find("#deliverArticleForm");t.form({inline:!0,keyboardShortcuts:!1,fields:{title_en:{rules:[{type:"empty",prompt:"请输入英文标题"}]},title_cn:{rules:[{type:"empty",prompt:"请输入中文标题"}]},link_en:{rules:[{type:"empty",prompt:"请输入文章原文链接"},{type:"url",prompt:"请输入正确的原文链接"}]},category:{rules:[{type:"empty",prompt:"请选择分类"}]}}}).api({url:page.api_prefix+"/translate/deliver_article",method:"post",serializeForm:!0,beforeSend:function(t){$(this).message("hideAll");var e=t.data;return t.data={title_en:e.title_en,title_cn:e.title_cn,link_en:e.link_en,category:e.category},t},onSuccess:function(t){1===t.code?($("body").toast({type:"success",content:t.message||"投递成功"}),e.modal("hide"),$(this).form("reset")):$("body").toast({type:"error",content:t.message||"投递失败"})},onFailure:function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}}),t.find(".category.dropdown").dropdown(),e.modal({onApprove:function(){return t.message("hideAll"),t.form("submit"),!1}}),this._translateEl.on("click",".deliver-article-btn",function(){return!!window.common.checkLogin()&&void e.modal("show")})},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow(),this.initDeliverArticleModal()}},t});
"use strict";OSCDefine("web-translate-tags",function(){function t(){this._tagsWrap=$("#tagsContainer .tags-wrapper")}return t.prototype={constructor:t,initListPJAX:function(){var t=this,a=$(".tags-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#tagsContainer .tags-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){a.addClass("active")}),$(document).on("pjax:complete",function(){a.removeClass("active"),$("html, body").stop().animate({scrollTop:t._tagsWrap.offset().top-80},500,"swing")})},register:function(){this.initListPJAX()}},t});
"use strict";OSCDefine("web-translate-tag",function(){function t(){this._translateEl=$(".translate-tag-detail"),this._translateListContainer=$(".translate-list-container"),this._currentInfiniteScroll="";var t=this;this._articleInfiniteScroll={completed:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#completedList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),pending:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#pendingList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}}),none:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#noneList",itemListSelector:".translate-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:3,itemSelector:".item.translate-item",loadOnScroll:!0,onAppend:function(){t.optimizeImgShow()}})}}return t.prototype={constructor:t,initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll[t._currentInfiniteScroll]&&t._articleInfiniteScroll[t._currentInfiniteScroll].destroy();var e=t._translateEl.find("input[name=currentTab]").val();t._articleInfiniteScroll[e]&&(t._articleInfiniteScroll[e].init(),t._currentInfiniteScroll=e)},initPJAX:function(){var e=this,n=$(".translate-list-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".translate-tab a.item, .translate-tab .sort-type a",".translate-list-container",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(t){$(t.relatedTarget);n.removeClass("active"),e.initArticleInfiniteScroll(),e.optimizeImgShow()})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initArticleInfiniteScroll(),this.initPJAX(),this.optimizeImgShow()}},t});
"use strict";OSCPlugin("translate-detail-comments",function(){return function(){var t={config:{objId:0,fetchCommentsUrl:"",publishCommentUrl:"",replyCommentUrl:"",deleteCommentUrl:""},init:function(e){this._commentsContainer=$("#commentsContainer"),this._commentsWrap=this._commentsContainer.find(".comments-wrap"),this.config=$.isPlainObject(e)?$.extend(!0,{},this.config,e):$.extend({},this.config)},loadComments:function(e,t){var o,n=this,a=Math.floor(e)||1;-1===a&&(o=n._commentsWrap.find(".pagination-wrap"),a=Math.floor(o.data("page"))||1);var r=window.common.addQueryParams(n.config.fetchCommentsUrl,{p:a});$.get(r,function(e){n._commentsWrap.html(e),n.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},loadCommentsByCommentId:function(e,t){var o=this,n=Math.floor(e)||1,a=window.common.addQueryParams(o.config.fetchCommentsUrl,{commentId:n});$.get(a,function(e){o._commentsWrap.html(e),o.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},initCommentForm:function(){var a=this,r="OSC_TRANSLATE_"+page.objId+"_COMMENT_CACHE",o="OSC_TRANSLATE_"+page.objId+"_COMMENT_PUBLISH_CACHE",t=window.common.throttle(function(e){try{e&&0<e.trim().length?localStorage.setItem(r,e):localStorage.removeItem(r)}catch(e){}},500);a.commentFormVue=new Vue({el:"#commentForm",data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},mounted:function(){var e,t;void 0!==window.localStorage&&(e=localStorage.getItem(r)||"",t=localStorage.getItem(o)||"",e&&0<e.trim().length&&(this.commentContent=e,t&&page.g_user_code&&(localStorage.removeItem(o),this.publishComment())))},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){this.clearMessage();var e,t,o="#此处输入软件#";this.insertContent(o)&&(t=(e=selectRange.of(this.$refs.commentTextarea)).getCurPos(),e.setSelectText(t-(o.length-1),t-1))},publishComment:function(){var e,n=this,t=window.common.getCurrentUrl(!0)+"#commentForm";if(!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(o,"1")}catch(e){}}))return!1;n.tweetPublishLoading||(n.clearMessage(),n.commentContentIsEmpty?n.showMessage("error","内容不能为空",2e3):n.commentContent.length>n.commentMaxLength?n.showMessage("error","最多只能输入"+n.commentMaxLength+"个字符！",2e3):(n.commentPublishLoading=!0,e={article:a.config.objId,content:n.commentContent},$.post(a.config.publishCommentUrl,e,function(e){var t,o;1===e.code?(e.message&&$("body").toast({type:"success",content:e.message||"评论发布成功"}),window.localStorage&&window.localStorage.removeItem(r),n.commentContent="",a.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),$("html, body").stop().animate({scrollTop:a._commentsWrap.offset().top-80},500,"swing")):n.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){n.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){n.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=t;var a=parseInt(o)||0;n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}},watch:{commentContent:function(e){t(e)}}}),$("#commentForm").find(".comment-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),n=$(o).parent().find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:n,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},initCommentDeleteModal:function(){var s=this,o=$(".delete-comment.modal");o.modal({onDeny:function(){var e=$(this).attr("data-comment-id"),i=s._commentsWrap.find("div.comment[data-comment-id="+e+"]");i.attr("data-comment-user-id");$.post(s.config.deleteCommentUrl,{article:page.objId,cmt:e},function(e){var t,o,n,a,r;1===e.code?($("body").toast({type:"success",content:"删除成功"}),i.fadeOut(function(){i.remove()}),o=(t=s._commentsWrap.find("> .header span")).text(),n=$("[data-article-reply-count]"),a=$(".float-menu .comment-btn"),o?((r=parseInt(o)-(1+i.find("div.comment").length))<0&&(r=0),t.text(r),n.html(r),a.attr("title","共有 "+r+" 条评论")):(t.text(0),n.html(0),a.attr("title","共有 0 条评论")),e.result&&void 0!==e.result.selfCommentCount&&e.result.selfCommentCount<=0&&a.find(".icon").addClass("outline")):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),s._commentsWrap.on("click",".actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)").attr("data-comment-id");o.attr("data-comment-id",t),o.modal("show")})},initReplyCommentModal:function(){var n=this,a=$(".reply-comment.modal"),r=$("#replyCommentForm");a.modal({onShow:function(){r.form("reset"),r.message("hideAll");var e=$(this).attr("data-comment-user-id")||-1,t=$(this).attr("data-comment-id")||-1;r.find("input[name=reply_id]").val(e+"_"+t)},onApprove:function(){return r.message("hideAll"),r.form("submit"),!1}}),r.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[1000]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:n.config.replyCommentUrl,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={article:n.config.objId,reply_id:t.reply_id,content:t.content},e},onSuccess:function(e){var t,o;1===e.code?($(this).message({type:"positive",content:"评论回复成功"}),r.form("reset"),n.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),setTimeout(function(){a.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"回复失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()}),n._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment:eq(0)"),o=t.attr("data-comment-user-id"),n=t.attr("data-comment-id");a.attr("data-comment-user-id",o),a.attr("data-comment-id",n),a.modal("show")})},bindReplyBtn:function(){var _=this;_._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t,n=$(e.target).parents(".comment:eq(0)"),a=n.attr("data-comment-id"),o=n.attr("data-comment-user-id"),r=n.attr("data-comment-user-name"),i=!!n.data("comment-is-last-level"),s=a,c=o,l="";if(i&&((t=n.parents(".comment:eq(0)"))&&(s=t.attr("data-comment-id"),c=t.attr("data-comment-user-id")),l=r),0<n.find(".content:eq(0) [data-rely-comment-form]").length){var m=n.find(".content:eq(0) [data-rely-comment-form]").get(0);return m.vueInstance&&m.vueInstance.focus(),!1}$("[data-rely-comment-form]").each(function(e,t){var o=$(t);t.vueInstance&&t.vueInstance.$destroy(),o.remove()}),0===$('[data-reply-comment-form][data-comment-id="'+a+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get("/widgets/comments_reply_form",function(e){var t=document.createElement("div");t.innerHTML=e,$(t).find("[data-reply-comment-form]").attr("data-comment-id",a),n.find(".content:eq(0)").append(t);var o=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:_._commentsWrap,toggleLoadComments:function(){_.loadComments(-1)},url:_.config.replyCommentUrl,params:{article:page.objId,reply_id:c+"_"+s},commentedAutoScrollToTop:!1,contentField:"content"});o.init(),o.focus(),l&&o.insertContent("回复 @"+l+" : ")}).always(function(){window.oscReplyCommentFormLoading=!1}))})},initCommentsListPJAX:function(){var t=this,o=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax("#commentsContainer .comments-wrap .pagination a","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(e){$(e.target);"comments-wrap"===e.target.className&&o.addClass("active")}),$(document).on("pjax:complete",function(e){$(e.target);"comments-wrap"===e.target.className&&(t.parseEmoticon(),o.removeClass("active"),$("html, body").stop().animate({scrollTop:t._commentsWrap.offset().top-80},500,"swing"))})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},scrollToCommentFromUrlCommentId:function(){var o=location.hash,e=o.match(/#rpl_(\d+).*/),t=e?Math.floor(e[1]):-1;0<t&&this.loadCommentsByCommentId(t,function(){setTimeout(function(){var e,t=$(o);t.length&&(0<(e=t.offset().top)-80&&(e-=80),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))},0)})}};new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js"],function(){var e=window.page;t.init({objId:e.objId,fetchCommentsUrl:e.fetchCommentsUrl,publishCommentUrl:e.publishCommentUrl,replyCommentUrl:e.replyCommentUrl,deleteCommentUrl:e.deleteCommentUrl}),t.initCommentForm(),t.initCommentDeleteModal(),t.bindReplyBtn(),t.initCommentsListPJAX(),t.parseEmoticon(),t.scrollToCommentFromUrlCommentId()}).loadFiles()}});
"use strict";OSCDefine("web-translate-detail",["translate-detail-comments"],function(){function a(){this._translateDetailEl=$(".translate-detail"),this._headerWrap=this._translateDetailEl.find(".header-wrap"),this._paragraphsContainer=this._translateDetailEl.find("#paragraphsContainer"),this._paragraphsWrap=this._paragraphsContainer.find(".paragraphs-wrap")}return a.prototype={constructor:a,initFloatMenu:function(){$("#floatMenu").sticky({context:".float-menu-content",offset:200})},hightlight:function(){$("pre, pre code").each(function(a,t){var e,r=$(this),n=(r.attr("class")||"").match(/language-(.*)/);n&&1<n.length&&(e=n[n.length-1],r.attr("class","hljs "+e)),hljs.highlightBlock(t)})},initManagerMenu:function(){var a=$("#managerMenu");a.dropdown(),a.on("click","a.item.edit-tags-btn",function(){var t=$(".edit-tags.modal"),a=t.find("#editTagsForm");a.form({inline:!0,keyboardShortcuts:!1,fields:{category:{rules:[{type:"empty",prompt:"请选择分类"}]}}}).api({url:page.api_prefix+"/translate/edit_tags",method:"post",serializeForm:!0,beforeSend:function(a){var t=a.data;return a.data={id:page.objId,category:t.category,prj:t.prj,tags:t.tags,user_code:page.g_user_code||""},a},onSuccess:function(a){1===a.code?($("body").toast({type:"success",content:"设置成功"}),t.modal("hide"),$(this).form("reset"),setTimeout(function(){location.reload()},1e3)):$("body").toast({type:"error",content:a.message||"设置失败"})},onFailure:function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}}),a.find(".category.dropdown").dropdown(),a.find(".project-name.dropdown").dropdown({allowAdditions:!0,maxSelections:5,fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/project/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(a){var t=[];return 1===a.code&&Array.isArray(a.result)&&0<a.result.length&&(t=a.result.map(function(a){return{name:a.name,value:a.name}})),{results:t}}},onNoResults:function(a){return!!(a&&0<a.trim().length)}}),t.modal({autofocus:!1,onApprove:function(){return a.message("hideAll"),a.form("submit"),!1},onHide:function(){a.form("reset")}}),t.modal("show")})},initParagraphListPJAX:function(){var r=this,n=$(".paragraph-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax("#paragraphsContainer .paragraphs-wrap .pagination a, .lang-switch-btn","#paragraphsContainer .paragraphs-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(a){$(a.target);"paragraphs-wrap"===a.target.className&&n.addClass("active")}),$(document).on("pjax:complete",function(a){var t,e;$(a.target);"paragraphs-wrap"===a.target.className&&(t=a.relatedTarget,(e=$(t).parent()).hasClass("pagination"),$(t).hasClass("lang-switch-btn")&&(e.find(".lang-switch-btn").removeClass("active"),$(t).addClass("active")),n.removeClass("active"),$("html, body").stop().animate({scrollTop:r._paragraphsWrap.offset().top-120},500,"swing"))})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},initParagraphAction:function(){var r=this,e=$(".delete-paragraph.modal").modal({onApprove:function(){var a=$(this).attr("data-paragraph-id"),t=r._paragraphsWrap.find("div.translate-paragraph[data-paragraph-id="+a+"]"),e=r._paragraphsWrap.find("div.other-translated-wrap[data-paragraph-id="+a+"]");$.post(page.api_prefix+"/translate/delete_paragraph",{id:a},function(a){1===a.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:a.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})})}});this._paragraphsContainer.on("click",".actions a.item.delete-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)").attr("data-paragraph-id");e.attr("data-paragraph-id",t),e.modal("show")});function n(a){var t,e,r=$('.translate-paragraph[data-translated-paragraph-id="'+a+'"]');0!==r.length&&(t=r.find(".vote-count"),e=parseInt(t.text())||0,$.post(page.api_prefix+"/translate/vote_block",{id:a,user:page.g_user_id},function(a){1===a.code?t.text(e+1):$("body").toast({type:"error",content:a.message||"点赞失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}))}var o="OSC_TRANSLATE_"+page.objId+"_PARAGRAPH_VOTE_CACHE";if(this._paragraphsContainer.on("click",".vote-up-btn",function(a){a.stopPropagation();$(a.target).parents(".translate-paragraph:eq(0)").attr("data-paragraph-id");var t=$(this).attr("data-translated-paragraph-id");if(!window.common.checkLoginForWeChat(null,function(){try{localStorage.setItem(o,t)}catch(a){}}))return!1;n(t)}),void 0!==window.localStorage&&page.g_user_code){var a=localStorage.getItem(o)||"";if(a){if(0===$('.translate-paragraph[data-translated-paragraph-id="'+a+'"]').length)return;localStorage.removeItem(o),n(a)}}},initParagraphOtherTranslated:function(){var o=this;this._paragraphsContainer.on("click",".show-other-translated-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)"),e=t.attr("data-paragraph-id"),r=t.attr("data-translated-paragraph-id"),n=o._paragraphsContainer.find('.other-translated-wrap[data-paragraph-id="'+e+'"]');if(!n||n.length<=0)return!1;"block"===n.css("display")?n.slideUp():(n.slideDown(),n.data("load")||$.get("/translate/widgets/_translate_detail_paragraph_chs_others_ajax?pid="+e+"&ppid="+r,function(a){n.html(a),n.data("load",!0),o.hightlight()}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"}),setTimeout(function(){n.slideUp()},2e3)}))}),this._paragraphsContainer.on("click",".collapse-other-translated-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)"),e=t.attr("data-paragraph-id"),r=(t.attr("data-translated-paragraph-id"),o._paragraphsContainer.find('.other-translated-wrap[data-paragraph-id="'+e+'"]'));if(!r||r.length<=0)return!1;"block"===r.css("display")&&r.slideUp()})},initArticleVote:function(){function a(){$.post(page.api_prefix+"/translate/vote_article",{id:page.objId,user:page.g_user_id},function(a){1===a.code?(e.text(r+1),a.message&&$("body").toast({type:"success",content:a.message})):$("body").toast({type:"error",content:a.message||"操作失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})})}var t=this._headerWrap.find(".translate-vote-btn"),e=this._headerWrap.find(".vote-count"),r=parseInt(e.text()),n="OSC_TRANSLATE_"+page.objId+"_VOTE_CACHE";t.on("click",function(){return!!window.common.checkLoginForWeChat(null,function(){try{localStorage.setItem(n,"1")}catch(a){}})&&void a()}),void 0!==window.localStorage&&page.g_user_code&&(localStorage.getItem(n)||"")&&(localStorage.removeItem(n),setTimeout(function(){a()},1e3))},register:function(){this.initFloatMenu(),this.hightlight(),this.initManagerMenu(),this.initParagraphListPJAX(),this.initParagraphAction(),this.initParagraphOtherTranslated(),this.optimizeImgShow(),this.initArticleVote()}},a});
"use strict";OSCDefine("web-translate-detail-compare",function(){function a(){this._translateDetailEl=$(".translate-detail-compare"),this._paragraphsContainer=this._translateDetailEl.find("#paragraphsContainer"),this._paragraphsWrap=this._paragraphsContainer.find(".paragraphs-wrap")}return a.prototype={constructor:a,hightlight:function(){$("pre, pre code").each(function(a,t){var r,n=$(this),e=(n.attr("class")||"").match(/language-(.*)/);e&&1<e.length&&(r=e[e.length-1],n.attr("class","hljs "+r)),hljs.highlightBlock(t)})},initParagraphListPJAX:function(){var r=$(".paragraph-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax("#paragraphsContainer .paragraphs-wrap .pagination a","#paragraphsContainer .paragraphs-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(a){$(a.target);"paragraphs-wrap"===a.target.className&&r.addClass("active")}),$(document).on("pjax:complete",function(a){var t;$(a.target);"paragraphs-wrap"===a.target.className&&(t=a.relatedTarget,$(t).parent().hasClass("pagination"),r.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing"))})},initTranslatorPopup:function(){this._paragraphsWrap.find(".popup-translator").popup({on:"click"})},initParagraphAction:function(){function r(a){var t,r,n=$('.translated-paragraph[data-translated-paragraph-id="'+a+'"]');0!==n.length&&(t=n.find(".vote-count"),r=parseInt(t.text())||0,$.post(page.api_prefix+"/translate/vote_block",{id:a,user:page.g_user_id},function(a){1===a.code?t.text(r+1):$("body").toast({type:"error",content:a.message||"点赞失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}))}var n="OSC_TRANSLATE_"+page.objId+"_PARAGRAPH_VOTE_CACHE";if(this._paragraphsContainer.on("click",".vote-paragraph",function(a){a.stopPropagation();$(a.target).parents(".translate-paragraph:eq(0)").attr("data-paragraph-id");var t=$(this).attr("data-translated-paragraph-id");if(!window.common.checkLoginForWeChat(null,function(){try{localStorage.setItem(n,t)}catch(a){}}))return!1;r(t)}),void 0!==window.localStorage&&page.g_user_code){var a=localStorage.getItem(n)||"";if(a){if(0===$('.translated-paragraph[data-translated-paragraph-id="'+a+'"]').length)return;localStorage.removeItem(n),r(a)}}},initSwitchOtherParagraph:function(){this._paragraphsContainer.on("click",".switch-other-paragraph-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)"),r=(t.attr("data-paragraph-id"),$(a.target).parents(".translated-paragraph:eq(0)").attr("data-translated-paragraph-id"),$(this).attr("data-translated-paragraph-id")),n=t.find('.translated-paragraph[data-translated-paragraph-id="'+r+'"]');n&&0<n.length&&(t.find(".column.translated-paragraph").hide(),n.show())})},register:function(){this.hightlight(),this.initParagraphListPJAX(),this.initTranslatorPopup(),this.initParagraphAction(),this.initSwitchOtherParagraph()}},a});
"use strict";OSCDefine("web-translate-paragraph-edit",function(){function t(){this._translatePageEl=$(".translate-paragraph-edit"),this._paragraphEditForm=this._translatePageEl.find(".paragraph-edit-form"),this._paragraphContentTextarea=this._paragraphEditForm.find("textarea[name=content]"),this._initContent=this._paragraphContentTextarea.val().trim()}return t.prototype={constructor:t,hightlight:function(){$("pre, pre code").each(function(t,a){var e,n=$(this),i=(n.attr("class")||"").match(/language-(.*)/);i&&1<i.length&&(e=i[i.length-1],n.attr("class","hljs "+e)),hljs.highlightBlock(a)})},initParagraphForm:function(){var n=this,t=556;window.innerWidth<768&&(t=456);var a={height:t,resize_enabled:!1,removePlugins:"elementspath",uploadUrl:page.api_prefix+"/translate/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/translate/ckeditor_dialog_img_upload",toolbar:[{name:"basicstyles",items:["Bold","Italic","Underline","Strike"]},{name:"links",items:["Link","Unlink"]},{name:"insert",items:["Image","Table"]},{name:"colors",items:["TextColor","BGColor"]},{name:"paragraph",items:["NumberedList","BulletedList","-","JustifyLeft","JustifyCenter","-","Blockquote","CodeSnippet"]},{name:"styles",items:["Format"]}]},e=function(){var e=CKEDITOR.replace(n._paragraphContentTextarea[0],a);e.on("instanceReady",function(t){e.focus()}),e.on("change",function(t){n._paragraphContentTextarea.val(t.editor.getData())}),e.on("fileUploadResponse",function(t){setTimeout(function(){n._paragraphContentTextarea.val(t.editor.getData())},0)}),e.on("mode",function(t){var a;"source"===this.mode&&(a=e.editable()).attachListener(a,"input",function(){n._paragraphContentTextarea.val(t.editor.getData())})})};n._paragraphEditForm.form({inline:!0,fields:{content:{identifier:"content",rules:[{type:"empty",prompt:"请输入内容"}]}}}).api({url:page.api_prefix+page.submitUrl,method:"post",serializeForm:!0,beforeSend:function(t){var a=t.data;return t.data={id:page.paragraphId,article:page.articleId,content:a.content},t},onSuccess:function(t){1===t.code?($("body").toast({type:"success",content:"提交成功"}),window.onbeforeunload=null,setTimeout(function(){window.location.href=page.successUrl},2e3)):$("body").toast({type:"error",content:t.message||"提交失败"})},onFailure:function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})}}),n._translatePageEl.on("click",".submit-btn",function(){n._paragraphEditForm.form("submit")}),$(function(){e(),window.onbeforeunload=function(){if(n._paragraphContentTextarea.val().trim()!==n._initContent)return"确认放弃此内容"}})},initCopyOriginBtn:function(){function t(){var t=e._translatePageEl.find(".original-content-wrap .content").html(),a=CKEDITOR.instances.content;a&&(a.setData(t),e._paragraphContentTextarea.val(t))}var e=this,a=$(".copy-origin.modal").modal({onApprove:function(){t()}});this._translatePageEl.find(".copy-origin-btn").on("click",function(){""===e._paragraphContentTextarea.val().trim()?t():a.modal("show")})},register:function(){this.initParagraphForm(),this.hightlight(),this.initCopyOriginBtn()}},t});
!function(se,e,C,M){"use strict";e=void 0!==e&&e.Math==Math?e:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),se.fn.calendar=function(h){var g,e=se(this),m=(e.selector,(new Date).getTime()),y=[],D=h,v="string"==typeof D,b=[].slice.call(arguments,1);return e.each(function(){var c,oe=se.isPlainObject(h)?se.extend(!0,{},se.fn.calendar.settings,h):se.extend({},se.fn.calendar.settings),re=oe.className,e=oe.namespace,t=oe.selector,ie=oe.formatter,a=oe.parser,le=oe.metadata,l=oe.error,n="."+e,o="module-"+e,r=se(this),i=r.find(t.input),de=r.find(t.popup),d=r.find(t.activator),u=this,s=r.data(o),f=!1,p=!1,ue={initialize:function(){ue.debug("Initializing calendar for",u),c=ue.get.isTouch(),ue.setup.popup(),ue.setup.inline(),ue.setup.input(),ue.setup.date(),ue.create.calendar(),ue.bind.events(),ue.instantiate()},instantiate:function(){ue.verbose("Storing instance of calendar"),s=ue,r.data(o,s)},destroy:function(){ue.verbose("Destroying previous calendar for",u),r.removeData(o),ue.unbind.events()},setup:{popup:function(){if(!oe.inline&&(d.length||(d=r.children().first()).length)){if(se.fn.popup===M)return void ue.error(l.popup);de.length||(de=se("<div/>").addClass(re.popup).prependTo(d.parent())),de.addClass(re.calendar);var e=oe.onVisible,t=oe.onHidden;i.length||(de.attr("tabindex","0"),e=function(){return ue.focus(),oe.onVisible.apply(de,arguments)},t=function(){return ue.blur(),oe.onHidden.apply(de,arguments)});var a=oe.on||(i.length?"focus":"click"),n=se.extend({},oe.popupOptions,{popup:de,on:a,hoverable:"hover"===a,onShow:function(){return ue.set.focusDate(ue.get.date()),ue.set.mode(oe.startMode),oe.onShow.apply(de,arguments)},onVisible:e,onHide:oe.onHide,onHidden:t});ue.popup(n)}},inline:function(){d.length&&!oe.inline||(de=se("<div/>").addClass(re.calendar).appendTo(r),i.length||de.attr("tabindex","0"))},input:function(){oe.touchReadonly&&i.length&&c&&i.prop("readonly",!0)},date:function(){var e,t;i.length&&(e=i.val(),t=a.date(e,oe),ue.set.date(t,oe.formatInput,!1))}},create:{calendar:function(){var e,t,a,n=ue.get.mode(),o=new Date,r=ue.get.date(),i=ue.get.focusDate(),l=i||r||oe.initialDate||o,l=ue.helper.dateInRange(l);i||(i=l,ue.set.focusDate(i,!1,!1));var d="year"===n,u="month"===n,s="day"===n,p="hour"===n,c="minute"===n,f="time"===oe.type,h=Math.max(oe.multiMonth,1),g=s?ue.get.monthOffset():0,m=l.getMinutes(),y=l.getHours(),D=l.getDate(),v=l.getMonth()+g,b=l.getFullYear(),C=s?7:p?4:3,M=7==C?"seven":4==C?"four":"three",w=s||p?6:4,x=s?h:1,k=de;for(k.empty(),1<x&&(a=se("<div/>").addClass(re.grid).appendTo(k)),t=0;t<x;t++){1<x&&(k=se("<div/>").addClass(re.column).appendTo(a));var T,F=v+t,H=(new Date(b,F,1).getDay()-oe.firstDayOfWeek%7+7)%7;!oe.constantHeight&&s&&(T=new Date(b,F+1,0).getDate()+H,w=Math.ceil(T/7));var O=d?10:u?1:0,I=s?1:0,N=p||c?1:0,Y=p||c?D:1,R=new Date(b-O,F-I,Y-N,y),E=new Date(b+O,F+I,Y+N,y),j=d?new Date(10*Math.ceil(b/10)-9,0,0):u?new Date(b,0,0):s?new Date(b,F,0):new Date(b,F,D,-1),A=d?new Date(10*Math.ceil(b/10)+1,0,1):u?new Date(b+1,0,1):s?new Date(b,F+1,1):new Date(b,F,D+1),S=se("<table/>").addClass(re.table).addClass(M+" column").addClass(n).appendTo(k);if(!f){var V=se("<thead/>").appendTo(S),P=se("<tr/>").appendTo(V),q=se("<th/>").attr("colspan",""+C).appendTo(P),K=d||u?new Date(b,0,1):s?new Date(b,F,1):new Date(b,F,D,y,m),J=se("<span/>").addClass(re.link).appendTo(q);J.text(ie.header(K,n,oe));var W,z,L=u?oe.disableYear?"day":"year":s?oe.disableMonth?"year":"month":"day";if(J.data(le.mode,L),0===t&&((W=se("<span/>").addClass(re.prev).appendTo(q)).data(le.focusDate,R),W.toggleClass(re.disabledCell,!ue.helper.isDateInRange(j,n)),se("<i/>").addClass(re.prevIcon).appendTo(W)),t===x-1&&((z=se("<span/>").addClass(re.next).appendTo(q)).data(le.focusDate,E),z.toggleClass(re.disabledCell,!ue.helper.isDateInRange(A,n)),se("<i/>").addClass(re.nextIcon).appendTo(z)),s)for(P=se("<tr/>").appendTo(V),Z=0;Z<C;Z++)(q=se("<th/>").appendTo(P)).text(ie.dayColumnHeader((Z+oe.firstDayOfWeek)%7,oe))}for(var B,U,Q=se("<tbody/>").appendTo(S),Z=d?10*Math.ceil(b/10)-9:s?1-H:0,G=0;G<w;G++)for(P=se("<tr/>").appendTo(Q),e=0;e<C;e++,Z++){var X=d?new Date(Z,F,1,y,m):u?new Date(b,Z,1,y,m):s?new Date(b,F,Z,y,m):p?new Date(b,F,D,Z):new Date(b,F,D,y,5*Z),$=d?Z:u?oe.text.monthsShort[Z]:s?X.getDate():ie.time(X,oe,!0);(q=se("<td/>").addClass(re.cell).appendTo(P)).text($),q.data(le.date,X);var _=s&&X.getMonth()!==(F+12)%12,ee=_||!ue.helper.isDateInRange(X,n)||oe.isDisabled(X,n),te=ue.helper.dateEqual(X,r,n),ae=ue.helper.dateEqual(X,o,n);q.toggleClass(re.adjacentCell,_),q.toggleClass(re.disabledCell,ee),q.toggleClass(re.activeCell,te&&!_),p||c||q.toggleClass(re.todayCell,!_&&ae);var ne={mode:n,adjacent:_,disabled:ee,active:te,today:ae};ie.cell(q,X,ne),ue.helper.dateEqual(X,i,n)&&ue.set.focusDate(X,!1,!1)}oe.today&&(B=se("<tr/>").appendTo(Q),(U=se("<td/>").attr("colspan",""+C).addClass(re.today).appendTo(B)).text(ie.today(oe)),U.data(le.date,o)),ue.update.focus(!1,S)}}},update:{focus:function(e,t){t=t||de;var l=ue.get.mode(),a=ue.get.date(),d=ue.get.focusDate(),u=ue.get.startDate(),s=ue.get.endDate(),p=(e?d:null)||a||(c?null:d);t.find("td").each(function(){var e,t,a,n,o,r=se(this),i=r.data(le.date);i&&(e=r.hasClass(re.disabledCell),t=r.hasClass(re.activeCell),a=r.hasClass(re.adjacentCell),n=ue.helper.dateEqual(i,d,l),o=!!p&&(!!u&&ue.helper.isDateInRange(i,l,u,p)||!!s&&ue.helper.isDateInRange(i,l,p,s)),r.toggleClass(re.focusCell,n&&(!c||f)&&!a),r.toggleClass(re.rangeCell,o&&!t&&!e))})}},refresh:function(){ue.create.calendar()},bind:{events:function(){de.on("mousedown"+n,ue.event.mousedown),de.on("touchstart"+n,ue.event.mousedown),de.on("mouseup"+n,ue.event.mouseup),de.on("touchend"+n,ue.event.mouseup),de.on("mouseover"+n,ue.event.mouseover),i.length?(i.on("input"+n,ue.event.inputChange),i.on("focus"+n,ue.event.inputFocus),i.on("blur"+n,ue.event.inputBlur),i.on("click"+n,ue.event.inputClick),i.on("keydown"+n,ue.event.keydown)):de.on("keydown"+n,ue.event.keydown)}},unbind:{events:function(){de.off(n),i.length&&i.off(n)}},event:{mouseover:function(e){var t=se(e.target).data(le.date),a=1===e.buttons;t&&ue.set.focusDate(t,!1,!0,a)},mousedown:function(e){i.length&&e.preventDefault(),f=0<=e.type.indexOf("touch");var t=se(e.target).data(le.date);t&&ue.set.focusDate(t,!1,!0,!0)},mouseup:function(e){ue.focus(),e.preventDefault(),e.stopPropagation(),f=!1;var t=se(e.target),a=t.parent();(a.data(le.date)||a.data(le.focusDate)||a.data(le.mode))&&(t=a);var n,o=t.data(le.date),r=t.data(le.focusDate),i=t.data(le.mode);o?(n=t.hasClass(re.today),ue.selectDate(o,n)):r?ue.set.focusDate(r):i&&ue.set.mode(i)},keydown:function(e){var t,a,n,o,r,i,l,d,u,s,p;27!==e.keyCode&&9!==e.keyCode||ue.popup("hide"),ue.popup("is visible")&&(37===e.keyCode||38===e.keyCode||39===e.keyCode||40===e.keyCode?(t="day"===(s=ue.get.mode())?7:"hour"===s?4:3,a=37===e.keyCode?-1:38===e.keyCode?-t:39==e.keyCode?1:t,a*="minute"===s?5:1,o=(n=ue.get.focusDate()||ue.get.date()||new Date).getFullYear()+("year"===s?a:0),r=n.getMonth()+("month"===s?a:0),i=n.getDate()+("day"===s?a:0),l=n.getHours()+("hour"===s?a:0),d=n.getMinutes()+("minute"===s?a:0),u=new Date(o,r,i,l,d),"time"===oe.type&&(u=ue.helper.mergeDateTime(n,u)),ue.helper.isDateInRange(u,s)&&ue.set.focusDate(u)):13===e.keyCode&&(s=ue.get.mode(),(p=ue.get.focusDate())&&!oe.isDisabled(p,s)&&ue.selectDate(p),e.preventDefault(),e.stopPropagation())),38!==e.keyCode&&40!==e.keyCode||(e.preventDefault(),ue.popup("show"))},inputChange:function(){var e=i.val(),t=a.date(e,oe);ue.set.date(t,!1)},inputFocus:function(){de.addClass(re.active)},inputBlur:function(){var e,t;de.removeClass(re.active),oe.formatInput&&(e=ue.get.date(),t=ie.datetime(e,oe),i.val(t))},inputClick:function(){ue.popup("show")}},get:{date:function(){return r.data(le.date)||null},focusDate:function(){return r.data(le.focusDate)||null},startDate:function(){var e=ue.get.calendarModule(oe.startCalendar);return(e?e.get.date():r.data(le.startDate))||null},endDate:function(){var e=ue.get.calendarModule(oe.endCalendar);return(e?e.get.date():r.data(le.endDate))||null},monthOffset:function(){return r.data(le.monthOffset)||0},mode:function(){var e=r.data(le.mode)||oe.startMode,t=ue.get.validModes();return 0<=se.inArray(e,t)?e:"time"===oe.type?"hour":"month"===oe.type?"month":"year"===oe.type?"year":"day"},validModes:function(){var e=[];return"time"!==oe.type&&(oe.disableYear&&"year"!==oe.type||e.push("year"),(oe.disableMonth||"year"===oe.type)&&"month"!==oe.type||e.push("month"),0<=oe.type.indexOf("date")&&e.push("day")),0<=oe.type.indexOf("time")&&(e.push("hour"),oe.disableMinute||e.push("minute")),e},isTouch:function(){try{return C.createEvent("TouchEvent"),!0}catch(e){return!1}},calendarModule:function(e){return e?(e instanceof se||(e=r.parent().children(e).first()),e.data(o)):null}},set:{date:function(e,t,a){t=!1!==t,a=!1!==a,e=ue.helper.sanitiseDate(e),e=ue.helper.dateInRange(e);var n=ue.get.mode(),o=ie.datetime(e,oe);if(a&&!1===oe.onChange.call(u,e,o,n))return!1;if(ue.set.focusDate(e),oe.isDisabled(e,n))return!1;var r=ue.get.endDate();r&&e&&r<e&&ue.set.endDate(M),ue.set.dataKeyValue(le.date,e),t&&i.length&&i.val(o)},startDate:function(e,t){e=ue.helper.sanitiseDate(e);var a=ue.get.calendarModule(oe.startCalendar);a&&a.set.date(e),ue.set.dataKeyValue(le.startDate,e,t)},endDate:function(e,t){e=ue.helper.sanitiseDate(e);var a=ue.get.calendarModule(oe.endCalendar);a&&a.set.date(e),ue.set.dataKeyValue(le.endDate,e,t)},focusDate:function(e,t,a,n){e=ue.helper.sanitiseDate(e),e=ue.helper.dateInRange(e);var o,r,i="day"===ue.get.mode(),l=ue.get.focusDate();i&&e&&l&&((o=12*(e.getFullYear()-l.getFullYear())+e.getMonth()-l.getMonth())&&(r=ue.get.monthOffset()-o,ue.set.monthOffset(r,!1)));var d=ue.set.dataKeyValue(le.focusDate,e,t);a=!1!==a&&d&&!1===t||p!=n,p=n,a&&ue.update.focus(n)},monthOffset:function(e,t){var a=Math.max(oe.multiMonth,1);e=Math.max(1-a,Math.min(0,e)),ue.set.dataKeyValue(le.monthOffset,e,t)},mode:function(e,t){ue.set.dataKeyValue(le.mode,e,t)},dataKeyValue:function(e,t,a){var n=r.data(e),o=n===t||n<=t&&t<=n;return t?r.data(e,t):r.removeData(e),(a=!1!==a&&!o)&&ue.create.calendar(),!o}},selectDate:function(e,t){var a,n,o=ue.get.mode();t||"minute"===o||oe.disableMinute&&"hour"===o||"date"===oe.type&&"day"===o||"month"===oe.type&&"month"===o||"year"===oe.type&&"year"===o?!1!==ue.set.date(e)&&oe.closable&&(ue.popup("hide"),(a=ue.get.calendarModule(oe.endCalendar))&&(a.popup("show"),a.focus())):(n="year"===o?oe.disableMonth?"day":"month":"month"===o?"day":"day"===o?"hour":"minute",ue.set.mode(n),"hour"===o||"day"===o&&ue.get.date()?ue.set.date(e):ue.set.focusDate(e))},changeDate:function(e){ue.set.date(e)},clear:function(){ue.set.date(M)},popup:function(){return d.popup.apply(d,arguments)},focus:function(){i.length?i.focus():de.focus()},blur:function(){i.length?i.blur():de.blur()},helper:{sanitiseDate:function(e){return e?(e instanceof Date||(e=a.date(""+e,oe)),isNaN(e.getTime())?M:e):M},dateDiff:function(e,t,a){a=a||"day";var n="time"===oe.type,o="year"===a,r=o||"month"===a,i="minute"===a,l=i||"hour"===a;return e=new Date(n?2e3:e.getFullYear(),n||o?0:e.getMonth(),n||r?1:e.getDate(),l?e.getHours():0,i?5*Math.floor(e.getMinutes()/5):0),(t=new Date(n?2e3:t.getFullYear(),n||o?0:t.getMonth(),n||r?1:t.getDate(),l?t.getHours():0,i?5*Math.floor(t.getMinutes()/5):0)).getTime()-e.getTime()},dateEqual:function(e,t,a){return!!e&&!!t&&0===ue.helper.dateDiff(e,t,a)},isDateInRange:function(e,t,a,n){var o;return a||n||(a=(o=ue.get.startDate())&&oe.minDate?new Date(Math.max(o,oe.minDate)):o||oe.minDate,n=oe.maxDate),a=a&&new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),5*Math.ceil(a.getMinutes()/5)),!(!e||a&&0<ue.helper.dateDiff(e,a,t)||n&&0<ue.helper.dateDiff(n,e,t))},dateInRange:function(e,t,a){var n;t||a||(t=(n=ue.get.startDate())&&oe.minDate?new Date(Math.max(n,oe.minDate)):n||oe.minDate,a=oe.maxDate),t=t&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),5*Math.ceil(t.getMinutes()/5));var o="time"===oe.type;return e?t&&0<ue.helper.dateDiff(e,t,"minute")?o?ue.helper.mergeDateTime(e,t):t:a&&0<ue.helper.dateDiff(a,e,"minute")?o?ue.helper.mergeDateTime(e,a):a:e:e},mergeDateTime:function(e,t){return e&&t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes()):t}},setting:function(e,t){if(ue.debug("Changing setting",e,t),se.isPlainObject(e))se.extend(!0,oe,e);else{if(t===M)return oe[e];se.isPlainObject(oe[e])?se.extend(!0,oe[e],t):oe[e]=t}},internal:function(e,t){return ue.debug("Changing internal",e,t),t===M?ue[e]:void(se.isPlainObject(e)?se.extend(!0,ue,e):ue[e]=t)},debug:function(){!oe.silent&&oe.debug&&(oe.performance?ue.performance.log(arguments):(ue.debug=Function.prototype.bind.call(console.info,console,oe.name+":"),ue.debug.apply(console,arguments)))},verbose:function(){!oe.silent&&oe.verbose&&oe.debug&&(oe.performance?ue.performance.log(arguments):(ue.verbose=Function.prototype.bind.call(console.info,console,oe.name+":"),ue.verbose.apply(console,arguments)))},error:function(){oe.silent||(ue.error=Function.prototype.bind.call(console.error,console,oe.name+":"),ue.error.apply(console,arguments))},performance:{log:function(e){var t,a;oe.performance&&(a=(t=(new Date).getTime())-(m||t),m=t,y.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:u,"Execution Time":a})),clearTimeout(ue.performance.timer),ue.performance.timer=setTimeout(ue.performance.display,500)},display:function(){oe.name;m=!1,clearTimeout(ue.performance.timer),se.each(y,function(e,t){t["Execution Time"]}),(console.group!==M||console.table!==M)&&0<y.length&&(console.table||se.each(y,function(e,t){})),y=[]}},invoke:function(n,e,t){var o,r,a,i=s;return e=e||b,t=u||t,"string"==typeof n&&i!==M&&(n=n.split(/[\. ]/),o=n.length-1,se.each(n,function(e,t){var a=e!=o?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(se.isPlainObject(i[a])&&e!=o)i=i[a];else{if(i[a]!==M)return r=i[a],!1;if(!se.isPlainObject(i[t])||e==o)return i[t]!==M?r=i[t]:ue.error(l.method,n),!1;i=i[t]}})),se.isFunction(r)?a=r.apply(t,e):r!==M&&(a=r),se.isArray(g)?g.push(a):g!==M?g=[g,a]:a!==M&&(g=a),r}};v?(s===M&&ue.initialize(),ue.invoke(D)):(s!==M&&s.invoke("destroy"),ue.initialize())}),g!==M?g:this},se.fn.calendar.settings={name:"Calendar",namespace:"calendar",silent:!1,debug:!1,verbose:!1,performance:!1,type:"datetime",firstDayOfWeek:0,constantHeight:!0,today:!1,closable:!0,monthFirst:!0,touchReadonly:!0,inline:!1,on:null,initialDate:null,startMode:!1,minDate:null,maxDate:null,ampm:!0,disableYear:!1,disableMonth:!1,disableMinute:!1,formatInput:!0,startCalendar:null,endCalendar:null,multiMonth:1,popupOptions:{position:"bottom left",lastResort:"bottom left",prefer:"opposite",hideOnScroll:!1},text:{days:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",now:"Now",am:"AM",pm:"PM"},formatter:{header:function(e,t,a){return"year"===t?a.formatter.yearHeader(e,a):"month"===t?a.formatter.monthHeader(e,a):"day"===t?a.formatter.dayHeader(e,a):"hour"===t?a.formatter.hourHeader(e,a):a.formatter.minuteHeader(e,a)},yearHeader:function(e,t){var a=10*Math.ceil(e.getFullYear()/10);return a-9+" - "+(2+a)},monthHeader:function(e,t){return e.getFullYear()},dayHeader:function(e,t){return t.text.months[e.getMonth()]+" "+e.getFullYear()},hourHeader:function(e,t){return t.formatter.date(e,t)},minuteHeader:function(e,t){return t.formatter.date(e,t)},dayColumnHeader:function(e,t){return t.text.days[e]},datetime:function(e,t){if(!e)return"";var a="time"===t.type?"":t.formatter.date(e,t),n=t.type.indexOf("time")<0?"":t.formatter.time(e,t,!1);return a+("datetime"===t.type?" ":"")+n},date:function(e,t){if(!e)return"";var a=e.getDate(),n=t.text.months[e.getMonth()],o=e.getFullYear();return"year"===t.type?o:"month"===t.type?n+" "+o:(t.monthFirst?n+" "+a:a+" "+n)+", "+o},time:function(e,t,a){if(!e)return"";var n=e.getHours(),o=e.getMinutes(),r="";return t.ampm&&(r=" "+(n<12?t.text.am:t.text.pm),n=0===n?12:12<n?n-12:n),n+":"+(o<10?"0":"")+o+r},today:function(e){return"date"===e.type?e.text.today:e.text.now},cell:function(e,t,a){}},parser:{date:function(e,t){if(!e)return null;if(0===(e=(""+e).trim().toLowerCase()).length)return null;var a,n,o=-1,r=-1,i=-1,l=-1,d=-1,u=M,s="time"===t.type,p=t.type.indexOf("time")<0,c=e.split(t.regExp.dateWords),f=e.split(t.regExp.dateNumbers);if(!p)for(u=0<=se.inArray(t.text.am.toLowerCase(),c)||!(0<=se.inArray(t.text.pm.toLowerCase(),c))&&M,a=0;a<f.length;a++){var h=f[a];if(0<=h.indexOf(":")){if(r<0||o<0)for(var g=h.split(":"),m=0;m<Math.min(2,g.length);m++)n=parseInt(g[m]),isNaN(n)&&(n=0),0===m?r=n%24:o=n%60;f.splice(a,1)}}if(!s){for(a=0;a<c.length;a++){var y=c[a];if(!(y.length<=0)){for(y=y.substring(0,Math.min(y.length,3)),n=0;n<t.text.months.length;n++){var D=t.text.months[n];if((D=D.substring(0,Math.min(y.length,Math.min(D.length,3))).toLowerCase())===y){l=n+1;break}}if(0<=l)break}}for(a=0;a<f.length;a++)if(n=parseInt(f[a]),!isNaN(n)&&59<n){d=n,f.splice(a,1);break}if(l<0)for(a=0;a<f.length;a++)if(m=1<a||t.monthFirst?a:1===a?0:1,n=parseInt(f[m]),!isNaN(n)&&1<=n&&n<=12){l=n,f.splice(m,1);break}for(a=0;a<f.length;a++)if(n=parseInt(f[a]),!isNaN(n)&&1<=n&&n<=31){i=n,f.splice(a,1);break}if(d<0)for(a=f.length-1;0<=a;a--)if(n=parseInt(f[a]),!isNaN(n)){n<99&&(n+=2e3),d=n,f.splice(a,1);break}}if(!p){if(r<0)for(a=0;a<f.length;a++)if(n=parseInt(f[a]),!isNaN(n)&&0<=n&&n<=23){r=n,f.splice(a,1);break}if(o<0)for(a=0;a<f.length;a++)if(n=parseInt(f[a]),!isNaN(n)&&0<=n&&n<=59){o=n,f.splice(a,1);break}}if(o<0&&r<0&&i<0&&l<0&&d<0)return null;o<0&&(o=0),r<0&&(r=0),i<0&&(i=1),l<0&&(l=1),d<0&&(d=(new Date).getFullYear()),u!==M&&(u?12===r&&(r=0):r<12&&(r+=12));var v=new Date(d,l-1,i,r,o);return v.getMonth()===l-1&&v.getFullYear()===d||(v=new Date(d,l,0,r,o)),isNaN(v.getTime())?null:v}},onChange:function(e,t,a){return!0},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},isDisabled:function(e,t){return!1},selector:{popup:".ui.popup",input:"input",activator:"input"},regExp:{dateWords:/[^A-Za-z\u00C0-\u024F]+/g,dateNumbers:/[^\d:]+/g},error:{popup:"UI Popup, a required component is not included in this page",method:"The method you called is not defined."},className:{calendar:"calendar",active:"active",popup:"ui popup",grid:"ui equal width grid",column:"column",table:"ui celled center aligned unstackable table",prev:"prev link",next:"next link",prevIcon:"chevron left icon",nextIcon:"chevron right icon",link:"link",cell:"link",disabledCell:"disabled",adjacentCell:"adjacent",activeCell:"active",rangeCell:"range",focusCell:"focus",todayCell:"today",today:"today link"},metadata:{date:"date",focusDate:"focusDate",startDate:"startDate",endDate:"endDate",mode:"mode",monthOffset:"monthOffset"}}}(jQuery,window,document);
"use strict";OSCDefine("web-translate-edit",function(){function a(){this._translateEditEl=$(".translate-edit"),this._baseTab=$(".base-tab.menu"),this._paragraphsContainer=this._translateEditEl.find("#paragraphsContainer"),this._paragraphsWrap=this._paragraphsContainer.find(".paragraphs-wrap"),this._baseInfoForm=$(".base-info.form"),this._addParagraphForm=$(".add-paragraph.form"),this._addParagraphContentTextarea=this._addParagraphForm.find("textarea[name=article_detail]")}return a.prototype={constructor:a,hightlight:function(){$("pre, pre code").each(function(a,t){var e,r=$(this),n=(r.attr("class")||"").match(/language-(.*)/);n&&1<n.length&&(e=n[n.length-1],r.attr("class","hljs "+e)),hljs.highlightBlock(t)})},initTab:function(){this._baseTab.find(".item").tab({onLoad:function(a){var t;"paragraph"!==a||(t=CKEDITOR.instances.article_detail)&&t.focus()}})},initBaseInfoForm:function(){var t=this;this._baseInfoForm.find(".ui.checkbox").checkbox(),this._baseInfoForm.find(".pub-time").calendar({type:"date",text:{days:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",now:"现在",am:"上午",pm:"下午"},formatter:{date:function(a){if(!a)return"";function t(a){return 9<parseInt(a)?a+"":"0"+a}return t(a.getFullYear())+"-"+t(a.getMonth()+1)+"-"+t(a.getDate())}}}),this._baseInfoForm.find(".category.dropdown").dropdown(),this._baseInfoForm.find(".project-name.dropdown").dropdown({allowAdditions:!0,maxSelections:5,fields:{remoteValues:"results",value:"value",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/project/list_projects?q={query}",method:"get",dataType:"JSON",cache:!1,throttle:200,interruptRequests:!0,onResponse:function(a){var t=[];return 1===a.code&&Array.isArray(a.result)&&0<a.result.length&&(t=a.result.map(function(a){return{name:a.name,value:a.name}})),{results:t}}},onNoResults:function(a){return!!(a&&0<a.trim().length)}}),this._baseInfoForm.form({inline:!0,keyboardShortcuts:!1,fields:{title_en:{rules:[{type:"empty",prompt:"请输入英文标题"}]},title_cn:{rules:[{type:"empty",prompt:"请输入中文标题"}]},link_en:{rules:[{type:"empty",prompt:"请输入英文链接"}]},ident:{rules:[{type:"empty",prompt:"请输入URL标识"}]},category:{rules:[{type:"empty",prompt:"请选择分类"}]},pub_time:{rules:[{type:"empty",prompt:"请选择发布日期"}]}}}).api({url:page.api_prefix+"/translate/edit_paying",method:"post",serializeForm:!0,beforeSend:function(a){$(this).message("hideAll");var t=a.data;return a.data={id:page.objId,title_en:t.title_en,title_cn:t.title_cn,link_en:t.link_en,ident:t.ident,type:t.type,fee:t.fee,assign:t.assign,category:t.category,prj:t.prj,tags:t.tags,pub_time:t.pub_time,user_name:t.user_name,status:t.status,trans_status:t.trans_status},a},onSuccess:function(a){var t,e,r;1===a.code?(t=a.result.titleEN||"",e=a.result.url||"",r=t&&e?'文章修改成功：<a href="'+e+'" target="_blank">'+t+"</a>":"修改成功",$(this).message({type:"positive",content:r,disappear:2e3})):$(this).message({type:"negative",content:a.message||"修改失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),this._baseInfoForm.find(".check-title-btn").on("click",function(){var a;t._baseInfoForm.form("validate field","title_en")&&(a=t._baseInfoForm.find('input[name="title_en"]').val()||"",$.post(page.api_prefix+"/translate/check_article_title",{title:a},function(a){1===a.code?$("body").toast({type:"success",content:a.message||"文章标题可用"}):$("body").toast({type:"error",content:a.message||"文章标题已存在"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})}))})},initAddParagraphForm:function(){var r=this,a={height:300,resize_enabled:!1,removePlugins:"elementspath",uploadUrl:page.api_prefix+"/translate/ckeditor_dialog_img_upload",filebrowserUploadUrl:page.api_prefix+"/translate/ckeditor_dialog_img_upload"};(function(){var e=CKEDITOR.replace(r._addParagraphContentTextarea[0],a);e.on("instanceReady",function(a){e.focus()}),e.on("change",function(a){r._addParagraphContentTextarea.val(a.editor.getData())}),e.on("fileUploadResponse",function(a){setTimeout(function(){r._addParagraphContentTextarea.val(a.editor.getData())},0)}),e.on("mode",function(a){var t;"source"===this.mode&&(t=e.editable()).attachListener(t,"input",function(){r._addParagraphContentTextarea.val(a.editor.getData())})})})(),r._addParagraphForm.form({inline:!0,fields:{article_detail:{identifier:"article_detail",rules:[{type:"empty",prompt:"请输入内容"}]}}}).api({url:page.api_prefix+"/translate/add_paragraph",method:"post",serializeForm:!0,beforeSend:function(a){$(this).message("hideAll");var t=a.data;return a.data={id:page.objId,article_detail:t.article_detail},a},onSuccess:function(a){var t;1===a.code?($(this).message({type:"positive",content:"添加成功",disappear:2e3}),r._translateEditEl.find(".switch-buttons .active.lang-switch-btn").click(),(t=CKEDITOR.instances.article_detail)&&(t.setData(""),r._addParagraphContentTextarea.val(""))):$(this).message({type:"negative",content:a.message||"添加失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},initParagraphListPJAX:function(){var r=this,n=$(".paragraph-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax("#paragraphsContainer .paragraphs-wrap .pagination a, .lang-switch-btn","#paragraphsContainer .paragraphs-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(a){$(a.target);"paragraphs-wrap"===a.target.className&&n.addClass("active")}),$(document).on("pjax:complete",function(a){var t,e;$(a.target);"paragraphs-wrap"===a.target.className&&(t=a.relatedTarget,(e=$(t).parent()).hasClass("pagination"),$(t).hasClass("lang-switch-btn")&&(e.find(".lang-switch-btn").removeClass("active"),$(t).addClass("active")),n.removeClass("active"),$("html, body").stop().animate({scrollTop:r._paragraphsWrap.offset().top-120},500,"swing"))})},initParagraphAction:function(){var r=this,e=$(".delete-paragraph.modal").modal({onApprove:function(){var a=$(this).attr("data-paragraph-id"),t=r._paragraphsWrap.find("div.translate-paragraph[data-paragraph-id="+a+"]"),e=r._paragraphsWrap.find("div.other-translated-wrap[data-paragraph-id="+a+"]");$.post(page.api_prefix+"/translate/delete_paragraph",{id:a},function(a){1===a.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()}),e.fadeOut(function(){e.remove()})):$("body").toast({type:"error",content:a.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})})}});this._paragraphsContainer.on("click",".actions a.item.delete-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)").attr("data-paragraph-id");e.attr("data-paragraph-id",t),e.modal("show")})},initParagraphOtherTranslated:function(){var i=this;this._paragraphsContainer.on("click",".show-other-translated-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)"),e=t.attr("data-paragraph-id"),r=t.attr("data-translated-paragraph-id"),n=i._paragraphsContainer.find('.other-translated-wrap[data-paragraph-id="'+e+'"]');if(!n||n.length<=0)return!1;"block"===n.css("display")?n.slideUp():(n.slideDown(),n.data("load")||$.get("/translate/widgets/_translate_detail_paragraph_chs_others_ajax?pid="+e+"&ppid="+r,function(a){n.html(a),n.data("load",!0),i.hightlight()}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"}),setTimeout(function(){n.slideUp()},2e3)}))}),this._paragraphsContainer.on("click",".collapse-other-translated-btn",function(a){a.stopPropagation();var t=$(a.target).parents(".translate-paragraph:eq(0)"),e=t.attr("data-paragraph-id"),r=(t.attr("data-translated-paragraph-id"),i._paragraphsContainer.find('.other-translated-wrap[data-paragraph-id="'+e+'"]'));if(!r||r.length<=0)return!1;"block"===r.css("display")&&r.slideUp()})},register:function(){this.initTab(),this.initBaseInfoForm(),this.initAddParagraphForm(),this.initParagraphListPJAX(),this.initParagraphAction(),this.initParagraphOtherTranslated(),this.hightlight()}},a});
"use strict";OSCDefine("web-search",function(){function a(){this._searchEl=$(".web-search"),this._searchContainerWrap=this._searchEl.find(".search-container-wrap")}return a.prototype={constructor:a,initPJAX:function(){var c=this,s=c._searchContainerWrap.find(".search-container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".search-container .search-tabs .item, .search-container .search-filter .dropdown .item, .search-container .search-list-wrap .pagination a",".search-container",{scrollTo:!1}),$(document).on("pjax:send",function(){s.addClass("active")}),$(document).on("pjax:complete",function(a){$(a.target);var e,t,n=a.relatedTarget,r=$(n).parent(),i=r.hasClass("pagination"),o=r.hasClass("search-tabs");s.removeClass("active"),c.optimizeImgShow(),c.initFilterToolBar(),!o||(e=$(n).data("scope")||"")&&$('#headerNavMenu .search-item input[name="scope"]').val(e),i&&(0<=(t=c._searchContainerWrap.offset().top)-59&&(t-=59),$("html, body").stop(!0).animate({scrollTop:t},500,"swing"))})},initFilterToolBar:function(){this._searchContainerWrap.find(".search-filter .dropdown").dropdown(),this._searchContainerWrap.find(".search-filter .checkbox").checkbox({onChange:function(){var a=$(this).parent(".checkbox"),e=a.data("url");$.pjax({url:e,container:".search-container",scrollTo:!1})}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize(110,70)})},register:function(){this.initPJAX(),this.initFilterToolBar()}},a});
"use strict";OSCPlugin("feed-common",function(){function t(){this._feedPageCommon=$(".web-feed-common"),this._feedSidebar=$(".feed-sidebar"),this._feedListContainer=$(".feed-list-container"),this.followBtnStatusCode={UN_FOLLOW:1,FOLLOWED:2},this.followBtnStatusConf={UN_FOLLOW:{normal:{selfRemoveClass:"basic",selfAddClass:"basic",text:"订阅",icon:"plus icon",textIcon:"+",textIconClass:"plus"},hover:{selfRemoveClass:"basic",selfAddClass:"basic",text:"订阅",icon:"plus icon",textIcon:"+",textIconClass:"plus"}},FOLLOWED:{normal:{selfRemoveClass:"basic",selfAddClass:"",text:"已订阅",icon:"check icon",textIcon:"×",textIconClass:"check"},hover:{selfRemoveClass:"basic",selfAddClass:"",text:"取消订阅",icon:"check icon",textIcon:"×",textIconClass:"check"}}},this.register()}return t.prototype={constructor:t,setFollowBtnStatus:function(t,o,s){o="normal"===o?"normal":"hover";var e,n,a,i,l,c,d=this,r=s.find(".text"),f=s.find("i"),u=s.find(".text-icon");switch(t){case d.followBtnStatusCode.UN_FOLLOW:e=d.followBtnStatusConf.UN_FOLLOW[o],s.attr("data-follow-status",d.followBtnStatusCode.UN_FOLLOW);break;case d.followBtnStatusCode.FOLLOWED:e=d.followBtnStatusConf.FOLLOWED[o],s.attr("data-follow-status",d.followBtnStatusCode.FOLLOWED)}r.html(e.text),n=e.icon,f.attr("class",n),a=e.textIcon,i=e.textIconClass,u.text(a),u.attr("class","").addClass("text-icon").addClass(i),l=e.selfRemoveClass,c=e.selfAddClass,s.removeClass(l).addClass(c)},setFollowBtnCount:function(t,o){var s=o.find(".count"),e=t;window.common&&"function"==typeof window.common.formatNumberK&&(e=window.common.formatNumberK(t)),s.text(e)},bindFollowBtnHover:function(){var s=this;$(document).on("mouseenter",".subscribe-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status"));s.setFollowBtnStatus(o,"hover",t)}),$(document).on("mouseleave",".subscribe-btn",function(){var t=$(this),o=parseInt(t.attr("data-follow-status"));s.setFollowBtnStatus(o,"normal",t)})},bindFollowBtnClick:function(){var f=this;$(document).on("click",".subscribe-btn",function(t){t.preventDefault();var o=$(this),s=this,e=parseInt(o.attr("data-follow-status")),n=parseInt(o.attr("data-follow-count")),a=o.attr("data-id"),i=o.attr("data-type"),l=$('.subscribe-btn[data-id="'+a+'"][data-type="'+i+'"]'),c=1===e?2:1,d=isNaN(n)?-1:n+(1==c?-1:1);f.setFollowBtnStatus(c,"normal",l),o.attr("data-follow-count",d);var r=new CustomEvent("subscribe",{detail:{id:a,count:d},bubbles:!0,cancelable:!0});s.dispatchEvent(r)})},bindVisitLinkRecord:function(){this._feedPageCommon.on("click","a[data-visit-key]",function(){var t=$(this).data("visit-key")+"";t&&t&&$.post(page.api_prefix+"/feed/readingRecord",{key:t},function(t){t.code}).fail(function(){})})},register:function(){this.bindFollowBtnHover(),this.bindFollowBtnClick(),this.bindVisitLinkRecord()}},t});
"use strict";OSCDefine("web-feed-index",["feed-common"],function(){function e(){var e=this;e._feedEl=$(".web-feed"),e._feedListContainerWrap=e._feedEl.find(".feed-list-container-wrap"),e._deliveryForm=e._feedEl.find(".delivery-form"),e._articleInfiniteScroll={feedList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#feedList",itemListSelector:".feed-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:5,itemSelector:".item.feed-item",loadOnScroll:!0,onAppend:function(){e.optimizeImgShow(),e.initArticleItemMoreAction()}})}}return e.prototype={constructor:e,initArticleInfiniteScroll:function(){var e=this;e._articleInfiniteScroll.feedList&&e._articleInfiniteScroll.feedList.destroy(),e._articleInfiniteScroll.feedList.init()},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize()})},initDeliveryForm:function(){function t(){var e=n._deliveryForm.find(".delivery.button"),t=n._deliveryForm.find('input[name="link"]'),i=t.val();return null==i||0===i.length?($("body").toast({type:"negative",content:"请输入文章链接"}),!1):/http(s?):\/\//.test(i)?!!window.common.checkLogin()&&(e.addClass("disabled"),void $.post(page.api_prefix+"/feed/addLink",{link:i,userId:page.g_user_id||""},function(e){1===e.code?($("body").toast({type:"positive",content:"投递成功"}),t.val("")):$("body").toast({type:"negative",content:e.message||"投递失败，请稍后再试"})}).fail(function(){$("body").toast({type:"negative",content:"网络错误，请稍后再试"})}).always(function(){e.removeClass("disabled")})):($("body").toast({type:"negative",content:"请输入正确的 URL 地址"}),!1)}var n=this;n._deliveryForm.on("click",".delivery.button",function(){t()}),n._deliveryForm.keyup(function(e){13===e.keyCode&&t()})},bindListRecommendTags:function(){this._feedListContainerWrap.on("subscribe",function(e){var t=e.originalEvent.detail,i=$(e.target).parents(".card:eq(0)"),n=i.find(".subscribe-info > .text > .count");t&&0<=t.count&&n.text(t.count)})},initArticleItemMoreAction:function(){this._feedListContainerWrap.find(".feed-item .right-action > .item.dislike").each(function(e,t){var i=$(t);if(!0===i.data("init-popup"))return!0;i.popup({position:"bottom right",hoverable:!1,on:"click",popup:".popup-dislike-panel",onShow:function(){if(!window.common.checkLogin())return!1;$(this).parents(".feed-item:eq(0)").find(".popup-dislike-panel").find(".checkbox").checkbox("uncheck")}}),i.data("init-popup",!0)})},initArticleItemMoreDislikeAction:function(){this._feedListContainerWrap.on("click",".feed-item .popup-dislike-panel .button",function(){var n,e,t=$(this),i=$(this).parents(".feed-item:eq(0)"),o=i.find(".popup-dislike-panel"),a=i.attr("data-key");if(t.hasClass("cancel"))return i.find(".right-action > .item.dislike").popup("hide"),!0;t.hasClass("confirm")&&(n=[],o.find(".checkbox input[type=checkbox]:checked").each(function(e,t){var i=$(t).val();i&&n.push(i)}),e=n.join(",")||"",t.addClass("disabled"),$.post(page.api_prefix+"/feed/not_interested",{article:a,tags:e,user:page.g_user_id||""},function(e){1===e.code?(i.fadeOut(function(){i.remove()}),i.find(".right-action > .item.dislike").popup("hide")):$("body").toast({type:"negative",content:e.message||"提交失败，请稍后再试"})}).fail(function(){$("body").toast({type:"negative",content:"网络错误，请稍后再试"})}).always(function(){t.removeClass("disabled")}))})},register:function(){this.initArticleInfiniteScroll(),this.initArticleItemMoreAction(),this.initArticleItemMoreDislikeAction(),this.optimizeImgShow(),this.initDeliveryForm(),this.bindListRecommendTags()}},e});
"use strict";OSCPlugin("feed-detail-comments",function(){return function(){var t={config:{objId:0,fetchCommentsUrl:"",publishCommentUrl:"",replyCommentUrl:"",deleteCommentUrl:""},init:function(e){this._commentsContainer=$("#commentsContainer"),this._commentsWrap=this._commentsContainer.find(".comments-wrap"),this.config=$.isPlainObject(e)?$.extend(!0,{},this.config,e):$.extend({},this.config)},loadComments:function(e,t){var o,n=this,a=Math.floor(e)||1;-1===a&&(o=n._commentsWrap.find(".pagination-wrap"),a=Math.floor(o.data("page"))||1);var i=window.common.addQueryParams(n.config.fetchCommentsUrl,{p:a});$.get(i,function(e){n._commentsWrap.html(e),n.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},loadCommentsByCommentId:function(e,t){var o=this,n=Math.floor(e)||1,a=window.common.addQueryParams(o.config.fetchCommentsUrl,{commentId:n});$.get(a,function(e){o._commentsWrap.html(e),o.parseEmoticon(),t&&$.isFunction(t)&&t.call(this)})},initCommentForm:function(){var a=this,i="OSC_FEED_"+page.objId+"_COMMENT_CACHE",o="OSC_FEED_"+page.objId+"_COMMENT_PUBLISH_CACHE",t=window.common.throttle(function(e){try{e&&0<e.trim().length?localStorage.setItem(i,e):localStorage.removeItem(i)}catch(e){}},500);a.commentFormVue=new Vue({el:"#commentForm",data:function(){return{commentMaxLength:1e3,commentContent:"",commentPublishLoading:!1,tipMessage:{show:!1,content:"",className:""},curEmojiType:"People",emojiList:[{type:"People",items:["bowtie","smile","laughing","blush","smiley","relaxed","smirk","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","relieved","satisfied","grin","wink","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","grinning","kissing","kissing_smiling_eyes","stuck_out_tongue","sleeping","worried","frowning","anguished","open_mouth","grimacing","confused","hushed","expressionless","unamused","sweat_smile","sweat","disappointed_relieved","weary","pensive","disappointed","confounded","fearful","cold_sweat","persevere","cry","sob","joy","astonished","scream","neckbeard","tired_face","angry","rage","triumph","sleepy","yum","mask","sunglasses","dizzy_face","imp","smiling_imp","neutral_face","no_mouth","innocent","alien","yellow_heart","blue_heart","purple_heart","heart","green_heart","broken_heart","heartbeat","heartpulse","two_hearts","revolving_hearts","cupid","sparkling_heart","sparkles","star","star2","dizzy","boom","collision","anger","exclamation","question","grey_exclamation","grey_question","zzz","dash","sweat_drops","notes","musical_note","fire","hankey","poop","shit","+1","thumbsup","-1","thumbsdown","ok_hand","punch","facepunch","fist","v","wave","hand","raised_hand","open_hands","point_up","point_down","point_left","point_right","raised_hands","pray","point_up_2","clap","muscle","metal","fu","walking","runner","running","couple","family","two_men_holding_hands","two_women_holding_hands","dancer","dancers","ok_woman","no_good","information_desk_person","raising_hand","bride_with_veil","person_with_pouting_face","person_frowning","bow","couplekiss","couple_with_heart","massage","haircut","nail_care","boy","girl","woman","man","baby","older_woman","older_man","person_with_blond_hair","man_with_gua_pi_mao","man_with_turban","construction_worker","cop","angel","princess","smiley_cat","smile_cat","heart_eyes_cat","kissing_cat","smirk_cat","scream_cat","crying_cat_face","joy_cat","pouting_cat","japanese_ogre","japanese_goblin","see_no_evil","hear_no_evil","speak_no_evil","guardsman","skull","feet","lips","kiss","droplet","ear","eyes","nose","tongue","love_letter","bust_in_silhouette","busts_in_silhouette","speech_balloon","thought_balloon","feelsgood","finnadie","goberserk","godmode","hurtrealbad","rage1","rage2","rage3","rage4","suspect","trollface"]},{type:"Nature",items:["sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel"]},{type:"Objects",items:["bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","package","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn"]},{type:"Places",items:["house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de"]},{type:"Symbols",items:["one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","sparkle","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","back","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","100","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"]}]}},computed:{curEmojiItems:function(){for(var e=0,t=this.emojiList.length;e<t;e++)if(this.emojiList[e].type===this.curEmojiType)return this.emojiList[e].items;return this.emojiList[0].items},commentContentIsEmpty:function(){return 0===this.commentContent.length},commentCountText:function(){return this.commentContent.length+"/"+this.commentMaxLength}},mounted:function(){var e,t;void 0!==window.localStorage&&(e=localStorage.getItem(i)||"",t=localStorage.getItem(o)||"",e&&0<e.trim().length&&(this.commentContent=e,t&&page.g_user_code&&(localStorage.removeItem(o),this.publishComment())))},methods:{insertEmoji:function(e){this.clearMessage();var t=":"+e+":";this.insertContent(t),$(this.$refs.showEmojiBox).popup("hide")},insertProject:function(){this.clearMessage();var e,t,o="#此处输入软件#";this.insertContent(o)&&(t=(e=selectRange.of(this.$refs.commentTextarea)).getCurPos(),e.setSelectText(t-(o.length-1),t-1))},publishComment:function(){var e,n=this,t=window.common.getCurrentUrl(!0)+"#commentForm";if(!window.common.checkLoginForWeChat(t,function(){try{localStorage.setItem(o,"1")}catch(e){}}))return!1;n.tweetPublishLoading||(n.clearMessage(),n.commentContentIsEmpty?n.showMessage("error","内容不能为空",2e3):n.commentContent.length>n.commentMaxLength?n.showMessage("error","最多只能输入"+n.commentMaxLength+"个字符！",2e3):(n.commentPublishLoading=!0,e={articleKey:page.articleKey||"",content:n.commentContent},$.post(a.config.publishCommentUrl,e,function(e){var t,o;1===e.code?(window.localStorage&&window.localStorage.removeItem(i),n.commentContent="",a.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),$("html, body").stop().animate({scrollTop:a._commentsWrap.offset().top-80},500,"swing")):n.showMessage("error",e.message||"发布失败",2e3)}).fail(function(){n.showMessage("error","网络错误，请稍后再试！",2e3)}).always(function(){n.commentPublishLoading=!1})))},commentContentOnKeyDown:function(e){(e.metaKey||e.ctrlKey)&&13==e.keyCode&&this.publishComment()},insertContent:function(e){return!this.commentPublishLoading&&(this.commentContent.length>=this.commentMaxLength||this.commentContent.length+e.length>this.commentMaxLength?void this.showMessage("error","最多只能输入"+this.commentMaxLength+"个字符！",2e3):(selectRange.of(this.$refs.commentTextarea).insertAfterText(e),this.commentContent=this.$refs.commentTextarea.value,!0))},showMessage:function(e,t,o){var n=this;n.tipMessage.className="success"===e?"positive":"negative",n.tipMessage.content=t;var a=parseInt(o)||0;n.tipMessage.show=!0,0<a&&setTimeout(function(){n.clearMessage()},a)},clearMessage:function(){this.tipMessage.className="",this.tipMessage.content="",this.tipMessage.show=!1}},watch:{commentContent:function(e){t(e)}}}),$("#commentForm").find(".comment-form .toolbox > .item[data-popup]").each(function(e,t){var o=$(t),n=$(o).parent().find(".toolbox-popup."+o.attr("data-popup"));o.popup({position:"bottom left",popup:n,on:"toolbox-picture"===o.attr("data-popup")?"manual":"click",exclusive:!0})})},initCommentDeleteModal:function(){var c=this,o=$(".delete-comment.modal");o.modal({onDeny:function(){var r=$(this).attr("data-comment-id"),s=c._commentsWrap.find("div.comment[data-comment-id="+r+"]"),e=s.attr("data-comment-user-id");$.post(c.config.deleteCommentUrl,{articleKey:page.articleKey||"",commentId:r,userId:e},function(e){var t,o,n,a,i;1===e.code?($("body").toast({type:"success",content:"删除成功"}),s.fadeOut(function(){var e=s.parent();e.is(".comments[children-comments]")&&1===e.children(".comment").length&&1===e.children(".comment[data-comment-id="+r+"]").length?e.remove():s.remove()}),o=(t=c._commentsWrap.find("> .header span")).text(),n=$("[data-article-reply-count]"),a=$(".float-menu .comment-btn"),o?((i=parseInt(o)-(1+s.find("div.comment").length))<0&&(i=0),t.text(i),n.html(i),a.attr("title","共有 "+i+" 条评论")):(t.text(0),n.html(0),a.attr("title","共有 0 条评论")),e.result&&void 0!==e.result.selfCommentCount&&e.result.selfCommentCount<=0&&a.find(".icon").addClass("outline")):$("body").toast({type:"error",content:e.message||"删除失败"})})}}),c._commentsWrap.on("click",".actions a.remove",function(e){e.stopPropagation();var t=$(e.target).parents(".comment:eq(0)").attr("data-comment-id");o.attr("data-comment-id",t),o.modal("show")})},initReplyCommentModal:function(){var n=this,a=$(".reply-comment.modal"),i=$("#replyCommentForm");a.modal({onShow:function(){i.form("reset"),i.message("hideAll");var e=$(this).attr("data-comment-user-id")||-1,t=$(this).attr("data-comment-id")||-1;i.find("input[name=reply_id]").val(e+"_"+t)},onApprove:function(){return i.message("hideAll"),i.form("submit"),!1}}),i.form({inline:!0,fields:{content:{rules:[{type:"empty",prompt:"请输入评论内容"},{type:"maxLength[1000]",prompt:"内容长度不能超过 {ruleValue} 个字"}]}}}).api({url:n.config.replyCommentUrl,method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={articleKey:page.articleKey||"",referId:t.referId,content:t.content},e},onSuccess:function(e){var t,o;1===e.code?($(this).message({type:"positive",content:"评论回复成功"}),i.form("reset"),n.loadComments(),t=$(".float-menu .comment-btn"),e.result&&void 0!==e.result.replyCount&&(o=e.result.replyCount,$("[data-article-reply-count]").html(o),t.attr("title","共有 "+o+" 条评论")),t.find(".icon").removeClass("outline"),setTimeout(function(){a.modal("hide")},2e3)):$(this).message({type:"negative",content:e.message||"回复失败"})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试"})}}),a.on("keydown",function(e){(e.metaKey||e.ctrlKey)&&13===e.keyCode&&a.find(".positive.button").click()}),n._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t=$(e.target).parents(".comment:eq(0)"),o=t.attr("data-comment-user-id"),n=t.attr("data-comment-id");a.attr("data-comment-user-id",o),a.attr("data-comment-id",n),a.modal("show")})},bindReplyBtn:function(){var l=this;l._commentsWrap.on("click",".actions a.reply",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var t,n=$(e.target).parents(".comment:eq(0)"),a=n.attr("data-comment-id"),o=n.attr("data-comment-user-name"),i=!!n.data("comment-is-last-level"),r=a,s="";if(i&&((t=n.parents(".comment:eq(0)"))&&(r=t.attr("data-comment-id")),s=o),0<n.find(".content:eq(0) [data-rely-comment-form]").length){var c=n.find(".content:eq(0) [data-rely-comment-form]").get(0);return c.vueInstance&&c.vueInstance.focus(),!1}$("[data-rely-comment-form]").each(function(e,t){var o=$(t);t.vueInstance&&t.vueInstance.$destroy(),o.remove()}),0===$('[data-reply-comment-form][data-comment-id="'+a+'"]').length&&!0!==window.oscReplyCommentFormLoading&&(window.oscReplyCommentFormLoading=!0,$.get("/widgets/comments_reply_form",function(e){var t=document.createElement("div");t.innerHTML=e,$(t).find("[data-reply-comment-form]").attr("data-comment-id",a),n.find(".content:eq(0)").append(t);var o=new OSCCommentForm({commentFormSelector:"#replyCommentForm",commentsWrapEl:l._commentsWrap,toggleLoadComments:function(){l.loadComments(-1)},url:l.config.replyCommentUrl,params:{articleKey:page.articleKey||"",type:page.articleType||"",referId:r},commentedAutoScrollToTop:!1,contentField:"content"});o.init(),o.focus(),s&&o.insertContent("回复 @"+s+" : ")}).always(function(){window.oscReplyCommentFormLoading=!1}))})},initCommentsListPJAX:function(){var e=this,t=$(".comments-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a","#commentsContainer .comments-wrap",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){e.parseEmoticon(),t.removeClass("active"),$("html, body").stop().animate({scrollTop:e._commentsWrap.offset().top-80},500,"swing")})},parseEmoticon:function(){$(function(){$("[data-emoji-render]").emoticon()})},initCommentLike:function(){this._commentsWrap.on("click",".actions a.like[data-comment-like-btn]",function(e){if(e.stopPropagation(),!window.common.checkLogin())return!1;var a=$(this),t=a.parents(".comment:eq(0)"),i=(t.attr("data-comment-user-id"),t.attr("data-comment-id")),r=a.find("span"),s=a.hasClass("active");$.post(page.api_prefix+"/feed/commentVote",{commentId:i},function(e){var t,o,n;1===e.code?(t=!s,o=0,e.result&&e.result.vote&&(o=e.result.vote,t=1===e.result.voteState),n=$('[data-comment-like-btn][data-comment-id="'+i+'"]'),t?(a.addClass("active"),a.find(".like.icon").removeClass("outline"),n.addClass("active"),n.find(".like.icon").removeClass("outline")):(a.removeClass("active"),a.find(".like.icon").addClass("outline"),n.removeClass("active"),n.find(".like.icon").addClass("outline")),r.text(o),$('[data-comment-like-count][data-comment-id="'+i+'"]').text(o)):$("body").toast({type:"error",content:e.message||"点赞失败"})})})},scrollToCommentFromUrlCommentId:function(){var o=location.hash,e=o.match(/#rpl_(\d+).*/),t=e?Math.floor(e[1]):-1;0<t&&this.loadCommentsByCommentId(t,function(){setTimeout(function(){var e,t=$(o);t.length&&(0<(e=t.offset().top)-80&&(e-=80),$("html, body").stop(!0).animate({scrollTop:e},500,"swing"))},0)})}};new window.common.dynamicLoader(["/new-osc/js/utils/vue.min.js"],function(){var e=window.page;t.init({objId:e.objId,fetchCommentsUrl:e.fetchCommentsUrl,publishCommentUrl:e.publishCommentUrl,replyCommentUrl:e.replyCommentUrl,deleteCommentUrl:e.deleteCommentUrl}),t.initCommentForm(),t.initCommentDeleteModal(),t.bindReplyBtn(),t.initCommentsListPJAX(),t.parseEmoticon(),t.initCommentLike(),t.scrollToCommentFromUrlCommentId()}).loadFiles()}});
"use strict";OSCDefine("web-feed-detail",["feed-common","feed-detail-comments"],function(){function t(){this._feedDetailEl=$(".feed-detail")}return t.prototype={constructor:t,hightlight:function(){$("pre code").each(function(t,e){var i,n=$(this),o=(n.attr("class")||"").match(/language-(.*)/);o&&1<o.length&&(i=o[o.length-1],n.attr("class","hljs "+i)),hljs.highlightBlock(e)})},initNewsInfiniteScroll:function(){var t=this,e={relArticleList:1,newArticleList:1},i={relArticleList:new OSCInfiniteScroll({pagePath:".rel-pagination.pagination__next",checkLastPage:!0,containerSelector:"#relArticleList",itemListSelector:".news-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.news-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}}),newArticleList:new OSCInfiniteScroll({pagePath:".news-pagination.pagination__next",checkLastPage:!0,containerSelector:"#newArticleList",itemListSelector:".news-detail-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:0,itemSelector:".item.news-item",loadOnScroll:!1,onAppend:function(){t.optimizeImgShow()}})};i.relArticleList.init();var n="relArticleList";$(".feedDetail-tab.menu .item").tab({onLoad:function(t){n!==t&&(i[n]._infScroll&&(e[n]=i[n]._infScroll.pageIndex),i[n].destroy(),i[t].init(),i[t]._infScroll&&(i[t]._infScroll.pageIndex=e[t]),n=t)}})},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize()})},register:function(){this.hightlight(),this.initNewsInfiniteScroll(),this.optimizeImgShow()}},t});
"use strict";OSCDefine("web-shop-index",function(){function n(){this._shopIndexEl=$(".web-shop-index")}return n.prototype={constructor:n,initBannerSwiper:function(){new Swiper(".shop-banner-swiper",{autoplay:{delay:5e3,disableOnInteraction:!1},simulateTouch:!1,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},loop:!0})},initModal:function(){var n=$(".shopping-help-modal"),o=$(".business-cooperation-modal");$(".toggle-shopping-help-modal").on("click",function(){n.show()}),$(".toggle-business-cooperation-modal").on("click",function(){o.show()}),this._shopIndexEl.on("click",".shop-modal-wrap .close-modal",function(){$(this).parents(".shop-modal-wrap:eq(0)").hide()}),this._shopIndexEl.on("click",".shop-modal-wrap",function(n){0<$(n.target).parents(".shop-modal-wrap").length||$(this).hide()})},register:function(){this.initBannerSwiper(),this.initModal()}},n});
"use strict";OSCDefine("web-column-list",function(){function e(){this.columnsContainer=$(".columns-container"),this.columnsWrapper=this.columnsContainer.find(".columns-wrapper")}return e.prototype={constructor:e,initListPJAX:function(){var e=this,o=$(".columns-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".columns-container .columns-wrapper",{scrollTo:!1}),$(document).on("pjax:send",function(){o.addClass("active")}),$(document).on("pjax:complete",function(){o.removeClass("active"),$("html, body").stop().animate({scrollTop:e.columnsWrapper.offset().top-80},500,"swing")})},initFeedbackForm:function(){function o(){if(!window.common.checkLogin())return!1;var e=(n.val()+"").trim();if(!e)return $("body").toast({type:"error",content:"请输入内容"}),!1;t.addClass("disabled"),a.addClass("loading"),$.post(page.api_prefix+"/tweet/pubForwardTweet",{userId:page.g_user_id||"",user_code:page.g_user_code||"",content:(page.feedbackTopic?"#"+page.feedbackTopic+"# ":"")+e},function(e){1===e.code&&e.result?($("body").toast({type:"success",content:"反馈成功，感谢您的建议"}),n.val("")):$("body").toast({type:"error",content:e.message||"提交失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})}).always(function(){t.removeClass("disabled"),a.removeClass("loading")})}var t=$(".feedback-form"),n=t.find("input"),a=t.find(".button");a.on("click",o),n.on("keydown",function(e){13===e.keyCode&&o()})},register:function(){this.initListPJAX(),this.initFeedbackForm()}},e});
"use strict";OSCDefine("web-column-index",function(){function t(){var r=this;r._columnEl=$(".web-column"),r._columnListContainerWrap=r._columnEl.find(".column-list-container-wrap"),r._relatedProjects=$(".sidebar .section.related-projects"),r._relatedProjectsSticky={init:function(){if(r._relatedProjects.length<=0)return!1;var t=$(".column-sidebar > *:last-child"),e=t.is(".section.related-projects"),o=0;e||(o=t.offset().top+t.outerHeight());var n=".section.related-projects__placeholder",i=$(".column-sidebar > "+n);e||0!==i.length||(i=$("<div></div>").attr("class",n.replace(/\./g," ").trim()).insertBefore(r._relatedProjects));var a=r._relatedProjects.hasClass("ui sticky");768<=window.innerWidth&&window.scrollY>o?a||(e||i.css("height",r._relatedProjects.outerHeight()+"px"),r._relatedProjects.addClass("ui sticky"),r._relatedProjects.sticky({context:".column-main",offset:56})):a&&(e||i.css("height","0px"),r._relatedProjects.removeClass("ui sticky"),r._relatedProjects.sticky("destroy"))},refresh:function(){if(r._relatedProjects.length<=0)return!1;var t=r._relatedProjects.hasClass("ui sticky");768<=window.innerWidth&&t&&r._relatedProjects.sticky("refresh")}},r._articleInfiniteScroll={columnList:new OSCInfiniteScroll({pagePath:".pagination__next",checkLastPage:!0,containerSelector:"#columnList",itemListSelector:".column-list-container",loadMoreBtnSelector:".load-more-button",statusSelector:".page-load-status",defaultAutoLoadPageCount:5,itemSelector:".item.column-item",loadOnScroll:!0,onAppend:function(){r.optimizeImgShow(),r.initArticleItemMoreAction(),r._relatedProjectsSticky.refresh()}})}}return t.prototype={constructor:t,initTopSwiper:function(){new Swiper(".swiper-container",{autoplay:{delay:5e3,disableOnInteraction:!1},simulateTouch:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button .next",prevEl:".swiper-button .prev"},loop:!0})},initArticleInfiniteScroll:function(){var t=this;t._articleInfiniteScroll.columnList&&t._articleInfiniteScroll.columnList.destroy(),t._articleInfiniteScroll.columnList.init()},optimizeImgShow:function(){$(function(){$("[data-img-render]").imgOptimize()})},initArticleItemMoreAction:function(){var c=this;c._columnListContainerWrap.find(".column-item .right-action > .item.more.dropdown").dropdown({action:"select"}),c._columnListContainerWrap.on("click",".column-item .extra a.mark-as-top",function(){var e=$(this),o=e.parents(".column-item:eq(0)"),n=o.find(".content > .header"),t=o.attr("data-id"),i=1===e.data("value"),a=!i,r=$(".mark-as-top-article.modal");r.modal({onShow:function(){a?(r.find(".header").text("置顶文章"),r.find(".content p").text("确定置顶此文章吗？")):(r.find(".header").text("取消置顶文章"),r.find(".content p").text("确定取消置顶此文章吗？"))},onApprove:function(){$.post(page.api_prefix+"/column/updateAsTop",{columnId:page.columnId||"",articleId:t,asTop:a?1:0},function(t){1===t.code?a?($("body").toast({type:"success",content:"置顶成功"}),e.html('<i class="undo icon"></i> 取消置顶'),e.attr("data-value",1),n.find(".as-top-label").remove(),n.append('<div class="ui red label horizontal as-top-label" data-tooltip="置顶">顶</div>'),o.attr("data-as-top",1),o.prependTo(c._columnListContainerWrap.find(".column-list-container"))):($("body").toast({type:"success",content:"取消置顶成功"}),e.html('<i class="arrow up icon"></i> 置顶'),e.attr("data-value",0),n.find(".as-top-label").remove(),o.attr("data-as-top",0)):$("body").toast({type:"error",content:t.message||"操作失败"})})}}),r.modal("show")}),c._columnListContainerWrap.on("click",".column-item .extra a.mark-as-bottom",function(){var e=$(this),o=e.parents(".column-item:eq(0)"),t=o.attr("data-id"),n=-1===e.data("value"),i=!n,a=$(".mark-as-bottom-article.modal");a.modal({onShow:function(){i?(a.find(".header").text("置底文章"),a.find(".content p").text("确定置底此文章吗？")):(a.find(".header").text("取消置底文章"),a.find(".content p").text("确定取消置底此文章吗？"))},onApprove:function(){$.post(page.space_user_url+"/column/updateAsTop",{columnId:page.columnId||"",articleId:t,asTop:i?-1:0},function(t){1===t.code?i?($("body").toast({type:"success",content:"置底成功"}),e.html('<i class="undo icon"></i> 取消置底'),e.attr("data-value",-1),o.fadeOut(function(){o.remove()})):($("body").toast({type:"success",content:"取消置底成功"}),e.html('<i class="arrow down icon"></i> 置底'),e.attr("data-value",0),o.attr("data-as-top",0)):$("body").toast({type:"error",content:t.message||"操作失败"})})}}),a.modal("show")}),c._columnListContainerWrap.on("click",".column-item .extra a.hidden",function(){var e=$(this),o=e.parents(".column-item:eq(0)"),t=o.attr("data-id"),n=1===e.data("value"),i=!n,a=$(".hide-article.modal");a.modal({onShow:function(){i?(a.find(".header").text("隐藏文章"),a.find(".content p").text("确定隐藏此文章吗？")):(a.find(".header").text("取消隐藏文章"),a.find(".content p").text("确定取消隐藏此文章吗？"))},onApprove:function(){$.post(page.api_prefix+"/column/hiddenArticle",{columnId:page.columnId||"",articleId:t,shown:i?0:1},function(t){1===t.code?i?($("body").toast({type:"success",content:"隐藏成功"}),e.html('<i class="eye icon"></i> 取消隐藏'),e.attr("data-value",1),o.fadeOut(function(){o.remove()})):($("body").toast({type:"success",content:"取消隐藏成功"}),e.html('<i class="eye slash icon"></i> 隐藏'),e.attr("data-value",0),o.attr("data-shown",1)):$("body").toast({type:"error",content:t.message||"操作失败"})})}}),a.modal("show")})},initRelatedProjects:function(){if(this._relatedProjects.length<=0)return!1;this._relatedProjectsSticky.init(),$(window).resize(window.common.throttle(this._relatedProjectsSticky.init,200)),$(window).scroll(window.common.throttle(this._relatedProjectsSticky.init,200))},register:function(){this.initTopSwiper(),this.initArticleInfiniteScroll(),this.initArticleItemMoreAction(),this.initRelatedProjects(),this.optimizeImgShow()}},t});
"use strict";OSCDefine("column-admin-banners",function(){function n(){this._dataContainer=$(".data-container")}return n.prototype={constructor:n,initPJAX:function(){var n=$(".container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".container-inner",{scrollTo:!1}),$(document).on("pjax:send",function(){n.addClass("active")}),$(document).on("pjax:complete",function(){n.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindShownAction:function(){this._dataContainer.on("click",".banner-item .shown .toggle",function(){var n=$(this),t=n.parents("td.shown:eq(0)"),e=n.parents(".banner-item:eq(0)"),o=e.attr("data-id"),a=parseInt(n.attr("data-value"))||0,i=null;if(1===a?i={actionName:"显示",positionClass:"visible"}:0===a&&(i={actionName:"隐藏",positionClass:"invisible"}),!i)return!1;var s=$(".set-shown.modal");s.modal({onShow:function(){s.find(".header").text(i.actionName+" Banner"),s.find(".content p").text("确定"+i.actionName+"此 Banner 吗？")},onApprove:function(){$.post(page.api_prefix+"/column/hiddenBanner",{columnId:page.columnId||"",bannerId:o,shown:a},function(n){1===n.code?($("body").toast({type:"success",content:i.actionName+"成功"}),t.attr("class","shown shown--"+i.positionClass),e.attr("data-shown",a)):$("body").toast({type:"error",content:n.message||"操作失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindDeleteBtn:function(){this._dataContainer.on("click",".banner-item .action a.delete",function(n){var t=$(this).parents(".banner-item:eq(0)"),e=t.data("id");$(".delete-action.modal").modal({onApprove:function(){$.post(page.api_prefix+"/column/deleteColumnBanner",{special_column:page.columnId||"",id:e},function(n){1===n.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:n.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},register:function(){this.initPJAX(),this.bindShownAction(),this.bindDeleteBtn()}},n});
"use strict";OSCDefine("column-admin-banner-add",function(){return function(){var t=!!page.editMode,n=$(".banner-add.form");n.form({inline:!0,fields:{desc:{rules:[{type:"empty",prompt:"请输入标题"},{type:"maxLength[60]",prompt:"标题长度不能超过 60 个字"}]},image_href_url:{rules:[{type:"empty",prompt:"请输入链接"},{type:"url",prompt:"请输入正确的链接"}]},image_url:{rules:[{type:"empty",prompt:"请选择要上传的图片"},{type:"url",prompt:"请上传正确的图片格式"}]},sort:{rules:[{type:"empty",prompt:"请输入排序值"},{type:"integer",prompt:"只能输入整数"}]}}}).api({url:page.api_prefix+(t?"/column/editColumnBanner":"/column/addColumnBanner"),method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var a=e.data;return e.data={special_column:page.columnId||"",desc:a.desc,image_href_url:a.image_href_url,image_url:a.image_url,sort:a.sort},t&&(e.data.id=page.bannerId||""),e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:e.message||t?"保存成功":"添加成功"}),t||n.find(".submit.button").text("正在跳转").addClass("disabled"),setTimeout(function(){window.location.href=page.bannersAdminUrl},1500)):$(this).message({type:"negative",content:e.message||"操作失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}});var r=$(".image-upload"),a=r.find('input[type="file"]'),i=r.find("img.upload-img");r.on("click",".image-upload__inner",function(e){a.trigger("click")}),a.on("click",function(e){e.stopPropagation()}),a.on("change",function(e){var a=e.target.files[0];if(!a)return!1;var t=new FormData;t.append("upload",a),r.addClass("image-upload--loading"),$.ajax({url:page.api_prefix+"/column/upload_image",data:t,processData:!1,contentType:!1,type:"post",dataType:"json",success:function(e){1===e.uploaded?($(r.data("target")).val(e.url),i.attr("src",e.url),n.form("validate field","image_url"),r.addClass("image-upload--pic")):$("body").toast({type:"negative",content:e.error&&e.error.message||"上传失败"})}}).fail(function(){$("body").toast({type:"negative",content:"网络错误，请稍后再试"})}).always(function(){r.removeClass("image-upload--loading")})})}});
"use strict";OSCDefine("column-admin-members",function(){function e(){this._dataContainer=$(".data-container")}return e.prototype={constructor:e,initPJAX:function(){var e=$(".container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".container-inner",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindDeleteBtn:function(){this._dataContainer.on("click",".member-item .action a.delete",function(e){var t=$(this).parents(".member-item:eq(0)"),n=t.data("id");$(".delete-action.modal").modal({onApprove:function(){$.post(page.api_prefix+"/column/delete_column_admin",{special_column:page.columnId||"",id:n},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindAddBtn:function(){var t=$(".add-action.modal"),n=t.find(".add-member.form");this._dataContainer.on("click","a.add-member-btn",function(){t.modal("show")}),n.form({inline:!0,fields:{user_id:{rules:[{type:"empty",prompt:"请输入用户名"}]},super_user:{rules:[{type:"empty",prompt:"请选择权限角色"}]}}}).api({url:page.api_prefix+"/column/add_column_admin",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={special_column:page.columnId||"",user_type:"id",user_value:t.user_id,super_user:t.super_user},e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:"添加成功"}),n.form("reset"),setTimeout(function(){t.modal("hide"),location.reload()},1e3)):$(this).message({type:"negative",content:e.message||"添加失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),n.find(".select-user.dropdown").dropdown({templates:{menu:function(e,o){var t=e[o.values]||{},a="";return $.each(t,function(e,t){var n=t.portrait?'<img class="ui mini avatar image" src="'+t.portrait+'" alt="'+t[o.name]+'"/> ':"";a+='<div class="item" data-value="'+t[o.value]+'">',a+=n+t[o.name],a+="</div>"}),a}},fields:{remoteValues:"results",value:"id",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/column/query_user?name={query}",method:"get",dataType:"JSON",onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result),{results:t}}}}),n.find(".select-role.dropdown").dropdown(),t.modal({autofocus:!1,onShow:function(){n.form("reset"),n.message("hideAll")},onApprove:function(){return n.message("hideAll"),n.form("submit"),!1}})},bindListRoleChange:function(){this._dataContainer.find(".member-item .role-change-dropdown").dropdown({onChange:function(e,t,n){var o=$(this),a=n.parents(".member-item:eq(0)"),i=a.data("id"),r=parseInt(a.attr("data-super-user"))||0,s=parseInt(e)||0;if(r===s)return!1;$.post(page.api_prefix+"/column/update_column_admin",{special_column:page.columnId||"",id:i,super_user:s},function(e){1===e.code?($("body").toast({type:"success",content:"修改成功"}),a.attr("data-super-user",s)):($("body").toast({type:"error",content:e.message||"修改失败"}),o.dropdown("set selected",r+""))}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"}),o.dropdown("set selected",r+"")})}})},register:function(){this.initPJAX(),this.bindDeleteBtn(),this.bindAddBtn(),this.bindListRoleChange()}},e});
"use strict";OSCDefine("column-admin-articles",function(){function t(){this._pageContainer=$(".web-column-admin-articles"),this._dataContainer=$(".data-container")}return t.prototype={constructor:t,initPJAX:function(){var t=$(".container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".container-inner",{scrollTo:!1}),$(document).on("pjax:send",function(){t.addClass("active")}),$(document).on("pjax:complete",function(){t.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindPositionAction:function(){this._dataContainer.on("click",".article-item .position .toggle",function(){var t=$(this),n=t.parents("td.position:eq(0)"),e=t.parents(".article-item:eq(0)"),o=e.attr("data-id"),a=parseInt(e.attr("data-as-top"))||0,i=parseInt(t.attr("data-value"))||0,s=null;if(1===i?s={actionName:"置顶",positionClass:"top"}:-1===i?s={actionName:"置底",positionClass:"bottom"}:0===i&&(1===a?s={actionName:"取消置顶",positionClass:"empty"}:-1===a&&(s={actionName:"取消置底",positionClass:"empty"})),!s)return!1;var r=$(".mark-as-top.modal");r.modal({onShow:function(){r.find(".header").text(s.actionName+"文章"),r.find(".content p").text("确定"+s.actionName+"此文章吗？")},onApprove:function(){$.post(page.api_prefix+"/column/updateAsTop",{columnId:page.columnId||"",articleId:o,asTop:i},function(t){1===t.code?($("body").toast({type:"success",content:s.actionName+"成功"}),n.attr("class","position position--"+s.positionClass),e.attr("data-as-top",i)):$("body").toast({type:"error",content:t.message||"操作失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindShownAction:function(){this._dataContainer.on("click",".article-item .shown .toggle",function(){var t=$(this),n=t.parents("td.shown:eq(0)"),e=t.parents(".article-item:eq(0)"),o=e.attr("data-id"),a=parseInt(t.attr("data-value"))||0,i=null;if(1===a?i={actionName:"显示",positionClass:"visible"}:0===a&&(i={actionName:"隐藏",positionClass:"invisible"}),!i)return!1;var s=$(".set-shown.modal");s.modal({onShow:function(){s.find(".header").text(i.actionName+"文章"),s.find(".content p").text("确定"+i.actionName+"此文章吗？")},onApprove:function(){$.post(page.api_prefix+"/column/hiddenArticle",{columnId:page.columnId||"",articleId:o,shown:a},function(t){1===t.code?($("body").toast({type:"success",content:i.actionName+"成功"}),n.attr("class","shown shown--"+i.positionClass),e.attr("data-shown",a)):$("body").toast({type:"error",content:t.message||"操作失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindAddBtn:function(){function e(){d.html("").removeClass("visible"),p.html("").removeClass("visible")}function s(t,n){e(),t?d.html(n).addClass("visible"):p.html(n).addClass("visible")}var n=$(".add-action.modal"),r=n.find(".actions .positive.button"),o=n.find(".add-article.form"),t=o.find('input[name="url"]'),c=o.find('input[name="obj_id"]'),l=o.find('input[name="obj_type"]'),a=o.find(".url-input"),i=o.find(".parse-article"),d=i.find(".success-result"),p=i.find(".error-result");t.on("keyup",window.common.debounce(function(){var t=$(this),n=(t.val()||"").trim();return r.addClass("disabled"),c.val(""),l.val(""),e(),!(!n||n.length<=0)&&(/^http(s?):\/\//.test(n)?(a.addClass("loading"),void $.post(page.api_prefix+"/column/parse_article_url",{special_column:page.columnId||"",url:n},function(t){var n,e,o,a,i;1===t.code&&t.result?(n=t.result.obj_id,e=t.result.obj_type,o=t.result.obj_type_name,a=t.result.title,i=t.result.url,c.val(n),l.val(e),s(!0,'<span class="article-type">['+o+']</span> <a href="'+i+'" target="_blank">'+a+"</a>"),r.removeClass("disabled")):s(!1,t.message||"解析失败")}).fail(function(){s(!1,"网络错误，请稍后再试")}).always(function(){a.removeClass("loading")})):(s(!1,"请输入正确的文章链接"),!1))},300,!1)),o.form({inline:!0,fields:{url:{rules:[{type:"empty",prompt:"请输入文章链接"},{type:"url",prompt:"请输入正确的文章链接"}]},obj_id:{rules:[{type:"empty",prompt:"请输入正确的文章链接"}]},obj_type:{rules:[{type:"empty",prompt:"请输入正确的文章链接"}]}}}).api({url:page.api_prefix+"/column/addColumnArticle",method:"post",serializeForm:!0,beforeSend:function(t){$(this).message("hideAll");var n=t.data;return t.data={special_column:page.columnId||"",obj_type:n.obj_type,obj_id:n.obj_id,url:n.url},t},onSuccess:function(t){1===t.code?($(this).message({type:"positive",content:"添加成功"}),e(),o.form("reset"),setTimeout(function(){n.modal("hide"),location.reload()},1e3)):$(this).message({type:"negative",content:t.message||"添加失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),n.modal({autofocus:!1,onShow:function(){e(),o.form("reset"),o.message("hideAll")},onApprove:function(){return o.message("hideAll"),o.form("submit"),!1}}),this._dataContainer.on("click","a.add-article-btn",function(){n.modal("show")})},bindSearchBtn:function(){$(".search-form").on("click",".search.link.icon",function(){var t=$(this).parents(".search-form:eq(0)");0<t.find("input[name=q]").val().trim().length&&t.submit()})},bindQuickAddBtn:function(){this._pageContainer.on("click",".quick-add-article-btn",function(){var t=$(this),n=t.data("obj-id"),e=t.data("obj-type"),o=t.data("url");$.post(page.api_prefix+"/column/addColumnArticle",{special_column:page.columnId||"",obj_type:e,obj_id:n,url:o},function(t){1===t.code?($("body").toast({type:"success",content:"添加成功"}),setTimeout(function(){page.articlesAdminUrl?location.href=page.articlesAdminUrl:location.reload()},1e3)):$("body").toast({type:"error",content:t.message||"添加失败"})}).fail(function(){$("body").toast({type:"error",content:"网络异常，请稍后再试"})})})},register:function(){this.initPJAX(),this.bindPositionAction(),this.bindShownAction(),this.bindAddBtn(),this.bindSearchBtn(),this.bindQuickAddBtn()}},t});
"use strict";OSCDefine("column-admin-experts",function(){function e(){this._dataContainer=$(".data-container")}return e.prototype={constructor:e,initPJAX:function(){var e=$(".container-loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".pagination a",".container-inner",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(){e.removeClass("active"),$("html, body").stop().animate({scrollTop:0},500,"swing")})},bindDeleteBtn:function(){this._dataContainer.on("click",".expert-item .action a.delete",function(e){var t=$(this).parents(".expert-item:eq(0)"),n=t.data("id");$(".delete-action.modal").modal({onApprove:function(){$.post(page.api_prefix+"/column/delete_column_expert",{special_column:page.columnId||"",id:n},function(e){1===e.code?($("body").toast({type:"success",content:"删除成功"}),t.fadeOut(function(){t.remove()})):$("body").toast({type:"error",content:e.message||"删除失败"})}).fail(function(){$("body").toast({type:"error",content:"网络错误，请稍后再试"})})}}).modal("show")})},bindAddBtn:function(){var t=$(".add-action.modal"),n=t.find(".add-expert.form");this._dataContainer.on("click","a.add-expert-btn",function(){t.modal("show")}),n.form({inline:!0,fields:{user_id:{rules:[{type:"empty",prompt:"请输入用户名"}]},description:{rules:[{type:"empty",prompt:"请输入描述"},{type:"maxLength[32]",prompt:"长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.api_prefix+"/column/add_column_expert",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={special_column:page.columnId||"",user_id:t.user_id,description:t.description},e},onSuccess:function(e){1===e.code?($(this).message({type:"positive",content:"添加成功"}),n.form("reset"),setTimeout(function(){t.modal("hide"),location.reload()},1e3)):$(this).message({type:"negative",content:e.message||"添加失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),n.find(".select-user.dropdown").dropdown({templates:{menu:function(e,i){var t=e[i.values]||{},a="";return $.each(t,function(e,t){var n=t.portrait?'<img class="ui mini avatar image" src="'+t.portrait+'" alt="'+t[i.name]+'"/> ':"";a+='<div class="item" data-value="'+t[i.value]+'">',a+=n+t[i.name],a+="</div>"}),a}},fields:{remoteValues:"results",value:"id",name:"name"},filterRemoteData:!1,apiSettings:{url:page.api_prefix+"/column/query_user?name={query}",method:"get",dataType:"JSON",onResponse:function(e){var t=[];return 1===e.code&&Array.isArray(e.result)&&0<e.result.length&&(t=e.result),{results:t}}}}),n.find(".select-role.dropdown").dropdown(),t.modal({autofocus:!1,onShow:function(){n.form("reset"),n.message("hideAll")},onApprove:function(){return n.message("hideAll"),n.form("submit"),!1}})},bindEditBtn:function(){var i=this,a=$(".edit-action.modal"),o=a.find(".edit-expert.form");this._dataContainer.on("click",".expert-item .action a.edit",function(){var e=$(this).parents(".expert-item:eq(0)").data("id");a.attr("data-id",e),a.modal("show")}),o.form({inline:!0,fields:{description:{rules:[{type:"empty",prompt:"请输入描述"},{type:"maxLength[32]",prompt:"长度不能超过 {ruleValue} 个字"}]}}}).api({url:page.api_prefix+"/column/edit_column_expert",method:"post",serializeForm:!0,beforeSend:function(e){$(this).message("hideAll");var t=e.data;return e.data={special_column:page.columnId||"",id:t.id,description:t.description},e},onSuccess:function(e){var t,n;1===e.code?($(this).message({type:"positive",content:"修改成功"}),t=o.find('input[name="id"]').val()||"",n=o.find('input[name="description"]').val()||"",i._dataContainer.find('.expert-item[data-id="'+t+'"]').find("td.description").text(n),setTimeout(function(){a.modal("hide")},1e3)):$(this).message({type:"negative",content:e.message||"修改失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),a.modal({autofocus:!1,onShow:function(){o.form("reset"),o.message("hideAll");var e=$(this).attr("data-id")||"",t=i._dataContainer.find('.expert-item[data-id="'+e+'"]');$(this).find('input[name="id"]').val(e),$(this).find('input[name="description"]').val((t.find("td.description").html()||"").trim()),$(this).find(".expert-wrap").html(t.find(".expert-wrap").html())},onApprove:function(){return o.message("hideAll"),o.form("submit"),!1}})},register:function(){this.initPJAX(),this.bindDeleteBtn(),this.bindAddBtn(),this.bindEditBtn()}},e});
"use strict";OSCDefine("column-admin-content-settings",function(){function e(){}return e.prototype={constructor:e,initForm:function(){var e=$(".content-settings.form");e.find(".ui.checkbox").checkbox(),e.form({inline:!0,fields:{}}).api({url:page.api_prefix+"/column/update_content_settings",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var t=e.data;return e.data={special_column:page.columnId||"",pushRelatedNews:t.pushRelatedNews,pushRelatedQuestion:t.pushRelatedQuestion,pushAdminBlog:t.pushAdminBlog},e},onSuccess:function(e){1===e.code?$(this).message({type:"positive",content:e.message||"保存成功",disappear:2e3}):$(this).message({type:"negative",content:e.message||"保存失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},register:function(){this.initForm()}},e});
"use strict";OSCDefine("web-organization-authentication",function(){function e(){this._authForm=$(".identity-verify-form.form"),this.SMS_CODE_FLAG="org_auth_phone_code"}return e.prototype={constructor:e,getSMSCode:function(e){e.form("validate field","phone")&&$("#yp-riddler-box").click()},_phoneCodeCountDown:function(e,t,o){var n=o||60;e.addClass("disabled"),e.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem(t,Math.floor((new Date).getTime()/1e3)+n);var r=setInterval(function(){--n<1?(clearInterval(r),e.removeClass("disabled"),e.text("获取验证码")):(e.text(n+"s 后重新发送"),window.localStorage&&localStorage.setItem(t,Math.floor((new Date).getTime()/1e3)+n))},1e3)},_sendBindPhoneSMSWithYunpianRiddlerAjax:function(t,o,n){var r=this;o.addClass("loading"),$.ajax({type:"POST",url:page.api_prefix+"/organization/sendVerifyCode",data:{ypAuthenticate:t.form("get value","ypAuthenticate"),ypToken:t.form("get value","ypToken")},success:function(e){switch(e.message){case"success":r._phoneCodeCountDown(o,n);break;case"not_allow_to_send":t.form("add prompt","vCode","发送次数过多，暂时不可获取验证码");break;case"fail":t.form("add prompt","vCode","短信发送失败");break;case"phone_exist":t.form("add prompt","phone","该手机号码已绑定其它帐号");break;default:!e.result||"phone"!==e.result&&"vCode"!==e.result?setTimeout(function(){t.message({type:"negative",content:e.message||"短信验证码发送失败",disappear:2e3})},2e3):t.form("add prompt",e.result,e.message||"发送失败")}},dataType:"json"}).fail(function(){t.form("add prompt","vCode","短信发送失败")}).always(function(){o.removeClass("loading")})},initYunpianRiddler:function(o,n,r){var a=this,e=document.getElementById("yp-riddler-box");e.innerHTML="",window.YpRiddler&&new YpRiddler({expired:30,mode:"dialog",winWidth:300,lang:"zh-cn",noButton:!0,container:e,appId:page.yunpian_riddler_appid||"",version:"v1",onError:function(e){429!==e.code?o.form("add prompt","vCode","验证服务异常"):o.form("add prompt","vCode","验证过于频繁，请稍后再试")},onSuccess:function(e,t){o.find(".error").removeClass("error").find(".prompt").remove(),t(),o.form("set value","ypAuthenticate",e.authenticate),o.form("set value","ypToken",e.token),a._sendBindPhoneSMSWithYunpianRiddlerAjax(o,n,r)},onFail:function(e,t,o){o()},beforeStart:function(e){e()},onExit:function(){}})},initAuthForm:function(){var o=this,n=o._authForm.find(".send-phone-code"),r=o.SMS_CODE_FLAG;n.on("click",function(){o.getSMSCode(o._authForm,n,r)}),$(function(){var e,t;window.localStorage&&(e=localStorage.getItem(r))&&(0<(t=(Math.floor(e)||0)-Math.floor((new Date).getTime()/1e3))?o._phoneCodeCountDown(n,r,t):localStorage.removeItem(r))}),$.fn.form.settings.templates.prompt=function(e){var t=document.createElement("div");return t.innerHTML=e[0]||"",t.className="prompt error",$(t)},o._authForm.form({inline:!0,selector:{prompt:".prompt"},fields:{phone:{rules:[{type:"empty",prompt:"请输入手机号码"}]},vCode:{rules:[{type:"empty",prompt:"请输入短信验证码"}]}}}).api({url:page.space_user_url+"/organization/verifyPhone",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");e.data;return e},onSuccess:function(e){1===e.code&&e.result?($(this).message({type:"positive",content:"验证成功，开始认证"}),location.href=page.applyUrl+"?key="+encodeURIComponent(e.result)):"phone"===e.result||"vCode"===e.result?($(this).form("add prompt",e.result,e.message),$(this).find('input[name="'+e.result+'"]').focus()):$(this).message({type:"negative",content:e.message||"验证失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}})},register:function(){var e,t=this;0<t._authForm.length&&(t.initAuthForm(),e=t._authForm.find(".send-phone-code"),t.initYunpianRiddler(t._authForm,e,t.BIND_TEL_SMS_CODE_FLAG))}},e});
"use strict";OSCDefine("web-organization-authentication-apply",function(){function t(){this._pageContainer=$(".web-organization-authentication"),this._pageApply=this._pageContainer.find(".page-content--apply"),this._authForm=this._pageApply.find(".authentication-form")}return t.prototype={constructor:t,initUploadFilePreview:function(){var i=this,n=i._authForm.find(".image-upload"),t=n.find('input[type="file"]'),o=n.find("img.upload-img");n.on("click",".image-upload__inner",function(){t.trigger("click")}),t.on("click",function(t){t.stopPropagation()}),t.on("change",function(t){var e=t.target.files[0];if(!e)return!1;if(10240<=Math.round(e.size/1024*100)/100)return i._authForm.form("add prompt","imageUrl","图片大小不能超过 10MB"),!1;window.createObjectURL=window.createObjectURL||window.URL.createObjectURL||window.webkitURL.createObjectURL;var a=window.createObjectURL(e);o.attr("src",a),n.addClass("image-upload--pic"),$(n.data("target")).val(a),i._authForm.form("validate field","imageUrl")})},initAuthForm:function(){var p=this;if(0===p._authForm.length)return!1;var t=p._authForm.find(".popup-name-help");p._authForm.find(".popup-name-help-toggle").popup({popup:t,on:"click",hoverable:!1,position:"bottom left"}),p._authForm.form({on:"blur",inline:!0,fields:{organizationShortName:{rules:[{type:"empty",prompt:"请输入账号名称"},{type:"minLength[3]",prompt:"账号名称最短 3 个字"},{type:"maxLength[20]",prompt:"账号名称不能超过 20 个字"}]},organizationFullName:{rules:[{type:"empty",prompt:"请输入公司名称"}]},organizationEmail:{rules:[{type:"empty",prompt:"请输入公司邮箱"},{type:"email",prompt:"请输入正确的邮箱地址"}]},agreement:{rules:[{type:"checked",prompt:"请阅读并同意协议"}]},imageUrl:{rules:[{type:"empty",prompt:"请选择要上传的图片"},{type:"url",prompt:"请上传正确的图片格式"}]}}}),p._authForm.on("submit",function(t){if(t.preventDefault(),p._authForm.find(".error").removeClass("error").find(".prompt").remove(),p._authForm.message("hideAll"),!p._authForm.form("validate form"))return!1;p._authForm.addClass("loading");var e=new FormData,a=p._authForm.find('.image-upload input[type="file"]')[0].files[0],i=p._authForm.find('input[name="key"]').val(),n=p._authForm.find('input[name="organizationShortName"]').val(),o=p._authForm.find('input[name="organizationFullName"]').val(),r=p._authForm.find('input[name="organizationEmail"]').val();e.append("key",i),e.append("short_name",n),e.append("name",o),e.append("email",r),e.append("license",a),$.ajax({url:page.api_prefix+"/organization/apply",data:e,processData:!1,contentType:!1,type:"post",dataType:"json",success:function(t){1===t.code?location.href=page.authenticationPendingUrl:p._authForm.message({type:"negative",content:t.message||"提交失败",disappear:2e3})}}).fail(function(){p._authForm.message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}).always(function(){p._authForm.removeClass("loading")})})},register:function(){this.initAuthForm(),this.initUploadFilePreview()}},t});
"use strict";OSCPlugin("web-sharing-plan-invite-box",function(){function t(){this.register()}return t.prototype={constructor:t,initInvitePopup:function(){var t=$(".invite-box"),i=t.find(".btn-invite"),n=t.find(".invite-share-box");i.popup({on:"click",position:"right center"});var e=n.find(".poster-qrcode");new QRCode(e.get(0),{text:e.data("url"),width:120,height:120}),new ClipboardJS(".invite-share-box .btn-copy-link").on("success",function(t){t.clearSelection(),$("body").toast({type:"success",content:"邀请链接已复制"}),i.popup("hide")})},register:function(){this.initInvitePopup()}},t});
"use strict";OSCDefine("web-sharing-plan-index",function(){function i(){}return i.prototype={constructor:i,initSwiper:function(){var i=4;window.innerWidth<=767&&(i=2);var e=new Swiper(".swiper-container",{spaceBetween:16,slidesPerView:i,slidesPerGroup:i,loop:!0,loopFillGroupWithBlank:!0,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:6e3}});e.el.onmouseover=function(){e.autoplay.stop()},e.el.onmouseout=function(){e.autoplay.start()}},initFAQList:function(){var i=$(".faq-box");i.on("click",".faq-item .question",function(){var i=$(this).parents(".faq-item:eq(0)");i.hasClass("active")?(i.find(".answer").slideUp(200),i.removeClass("active")):(i.find(".answer").slideDown(200),i.addClass("active"))})},register:function(){this.initSwiper(),this.initFAQList()}},i});
"use strict";OSCDefine("web-sharing-plan-apply",function(){function a(e,o){try{o&&0<o.trim().length?localStorage.setItem(e,o):localStorage.removeItem(e)}catch(e){}}function e(){var e=this;e._applyForm=$(".apply-form.form"),e.SMS_CODE_FLAG="support_plan_phone_code",e.PHONE_CACHE_KEY="OSC_SHARING_PLAN_PHONE_CACHE_KEY",e.VCODE_CACHE_KEY="OSC_SHARING_PLAN_VCODE_CACHE_KEY"}return e.prototype={constructor:e,getSMSCode:function(e){e.form("validate field","phone")&&$("#yp-riddler-box").click()},_phoneCodeCountDown:function(e,o,t){var a=t||60;e.addClass("disabled"),e.text(a+"s 后重新发送"),window.localStorage&&localStorage.setItem(o,Math.floor((new Date).getTime()/1e3)+a);var r=setInterval(function(){--a<1?(clearInterval(r),e.removeClass("disabled"),e.text("发送验证码")):(e.text(a+"s 后重新发送"),window.localStorage&&localStorage.setItem(o,Math.floor((new Date).getTime()/1e3)+a))},1e3)},_sendBindPhoneSMSWithYunpianRiddlerAjax:function(o,t,a){var r=this;t.addClass("loading"),$.ajax({type:"POST",url:page.api_prefix+"/SupportPlanInfo/sendVerifyCodeForBindPhoneByYun",data:{phoneNumber:o.form("get value","phone"),ypAuthenticate:o.form("get value","ypAuthenticate"),ypToken:o.form("get value","ypToken")},success:function(e){switch(e.message){case"success":r._phoneCodeCountDown(t,a);break;case"not_allow_to_send":o.form("add prompt","vCode","发送次数过多，暂时不可获取验证码");break;case"fail":o.form("add prompt","vCode","短信发送失败");break;case"phone_exist":o.form("add prompt","phone","该手机号码已绑定其它帐号");break;default:!e.result||"phone"!==e.result&&"vCode"!==e.result?setTimeout(function(){o.message({type:"negative",content:e.message||"短信验证码发送失败",disappear:2e3})},2e3):o.form("add prompt",e.result,e.message||"发送失败")}},dataType:"json"}).fail(function(){o.form("add prompt","vCode","短信发送失败")}).always(function(){t.removeClass("loading")})},initYunpianRiddler:function(t,a,r){var n=this,e=document.getElementById("yp-riddler-box");if(!e)return!1;e.innerHTML="",window.YpRiddler&&new YpRiddler({expired:30,mode:"dialog",winWidth:300,lang:"zh-cn",noButton:!0,container:e,appId:page.yunpian_riddler_appid||"",version:"v1",onError:function(e){429!==e.code?t.form("add prompt","vCode","验证服务异常"):t.form("add prompt","vCode","验证过于频繁，请稍后再试")},onSuccess:function(e,o){t.find(".error").removeClass("error").find(".prompt").remove(),o(),t.form("set value","ypAuthenticate",e.authenticate),t.form("set value","ypToken",e.token),n._sendBindPhoneSMSWithYunpianRiddlerAjax(t,a,r)},onFail:function(e,o,t){t()},beforeStart:function(e){e()},onExit:function(){}})},initApplyForm:function(){var i=this,p=i._applyForm.find(".send-phone-code"),l=i.SMS_CODE_FLAG;function e(){var e=i._applyForm.find('input[name="platform"]:checked').val();i._applyForm.find(".error").removeClass("error").find(".prompt").remove(),i._applyForm.form("remove field","wechatMpName"),i._applyForm.form("remove field","websiteUrl"),i._applyForm.form("remove field","websiteArticleUrl"),"1"===e?(i._applyForm.find(".platform-info").removeClass("active"),i._applyForm.find(".platform-info--wechat").addClass("active"),i._applyForm.form("add rule","wechatMpName",{rules:[{type:"empty",prompt:"请授权公众号"}]})):"2"===e&&(i._applyForm.find(".platform-info").removeClass("active"),i._applyForm.find(".platform-info--website").addClass("active"),i._applyForm.form("add rule","websiteUrl",{rules:[{type:"empty",prompt:"请输入个人网站/博客链接"},{type:"url",prompt:"请输入正确的链接地址"}]}),i._applyForm.form("add rule","websiteArticleUrl",{rules:[{type:"empty",prompt:"请输入带同步声明的文章链接地址"},{type:"url",prompt:"请输入正确的链接地址"}]}))}p.on("click",function(){i.getSMSCode(i._applyForm,p,l)}),$(function(){var e,o,t,a,r,n;window.localStorage&&(e=localStorage.getItem(l))&&(0<(o=(Math.floor(e)||0)-Math.floor((new Date).getTime()/1e3))?i._phoneCodeCountDown(p,l,o):localStorage.removeItem(l)),window.localStorage&&(t=localStorage.getItem(i.PHONE_CACHE_KEY)||"",a=localStorage.getItem(i.VCODE_CACHE_KEY)||"",r=i._applyForm.find('input[name="phone"]'),n=i._applyForm.find('input[name="vCode"]'),0<r.length&&0<n.length&&(r.val(t),n.val(a)))}),$.fn.form.settings.rules.vCodeEmpty=function(e){return!(0===e.trim().length&&0<i._applyForm.find(".verify-code").length)},i._applyForm.form({inline:!0,fields:{phone:{rules:[{type:"empty",prompt:"请输入手机号码"},{type:"regExp",value:/^1([0-9]{10})$/,prompt:"请输入正确的手机号码"}]},vCode:{rules:[{type:"vCodeEmpty",prompt:"请输入短信验证码"}]},agreement:{rules:[{type:"checked",prompt:"请阅读并同意协议"}]},wechatMpName:{},websiteUrl:{},websiteArticleUrl:{}}}).api({url:page.api_prefix+"/SupportPlanInfo/register",method:"post",serializeForm:!0,beforeSend:function(e){$(this).find(".error").removeClass("error").find(".prompt").remove(),$(this).message("hideAll");var o=e.data;return e.data={user_code:page.g_user_code||"",phone:o.phone,vCode:o.vCode,type:o.platform,invite:o.invite,wechatMpName:o.wechatMpName,websiteUrl:o.websiteUrl,websiteArticleUrl:o.websiteArticleUrl},e},onSuccess:function(e){1===e.code?(window.localStorage&&(window.localStorage.removeItem(i.PHONE_CACHE_KEY),window.localStorage.removeItem(i.VCODE_CACHE_KEY)),location.href=page.apply_success_url):$(this).message({type:"negative",content:e.message||"提交失败",disappear:2e3})},onFailure:function(){$(this).message({type:"negative",content:"网络错误，请稍后再试",disappear:2e3})}}),e(),i._applyForm.find('input[name="platform"]').on("change",function(){e()});var t=i._applyForm.find(".tip-modal");t.on("click",".btn-close",function(){t.find(".tip-modal-wrap").transition("scale",function(){t.removeClass("active")})}),i._applyForm.find(".btn-wechat-authorization").on("click",function(){var e=i._applyForm.find('input[name="phone"]'),o=i._applyForm.find('input[name="vCode"]');if(0<e.length&&0<o.length&&(a(i.PHONE_CACHE_KEY,e.val()),a(i.VCODE_CACHE_KEY,o.val())),767<window.innerWidth||window.common.checkPC())location.href=page.wechat_authorization_url;else{if(window.common.checkWeChat()&&page.wechat_authorization_mobile_url)return location.href=page.wechat_authorization_mobile_url,!1;t.addClass("active"),t.find(".tip-modal-wrap").transition("scale")}}),new ClipboardJS(".btn-copy-text").on("success",function(e){e.clearSelection();var o=$(e.trigger).data("tip");$("body").toast({type:"success",content:o||"已复制"})})},register:function(){var e=this;e.initApplyForm();var o=e._applyForm.find(".send-phone-code");e.initYunpianRiddler(e._applyForm,o,e.BIND_TEL_SMS_CODE_FLAG)}},e});
"use strict";OSCDefine("web-sharing-plan-success",["web-sharing-plan-invite-box"],function(){function n(){}return n.prototype={constructor:n,register:function(){}},n});
"use strict";OSCDefine("web-sharing-plan-invite",["web-sharing-plan-invite-box"],function(){function t(){this._inviteListBoxContainer=$(".invite-list-box")}return t.prototype={constructor:t,initPJAX:function(){var n=this,e=$(".invite-list-box__loader");$.pjax.defaults.timeout=1e4,$.pjax.defaults.maxCacheLength=20,$(document).pjax(".invite-list-box .pagination a, .invite-list-box .tab-menu a.tab-item",".invite-list-box__container",{scrollTo:!1}),$(document).on("pjax:send",function(){e.addClass("active")}),$(document).on("pjax:complete",function(t){e.removeClass("active");var i=t.relatedTarget;$(i).parent().hasClass("pagination")&&$("html, body").stop().animate({scrollTop:n._inviteListBoxContainer.offset().top-60},300,"swing")})},register:function(){this.initPJAX()}},t});