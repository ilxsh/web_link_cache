<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="profile" href="https://gmpg.org/xfn/11" />
	<link rel='dns-prefetch' href='//static.wp.huzheyang.cn' /><title>Linux 基于duplicity的备份与还原 &#8211; 胡先生与他愉快的朋友们</title>
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="胡先生与他愉快的朋友们 &raquo; Feed" href="https://huzheyang.cn/feed/" />
<link rel="alternate" type="application/rss+xml" title="胡先生与他愉快的朋友们 &raquo; 评论Feed" href="https://huzheyang.cn/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="胡先生与他愉快的朋友们 &raquo; Linux 基于duplicity的备份与还原评论Feed" href="https://huzheyang.cn/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/huzheyang.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3"}};
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-quicklatex-format-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/wp-quicklatex/css/quicklatex-format.css?ver=5.3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://static.wp.huzheyang.cn/wp-includes/css/dist/block-library/style.min.css?ver=5.3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-theme-css'  href='https://static.wp.huzheyang.cn/wp-includes/css/dist/block-library/theme.min.css?ver=5.3' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.1.5' type='text/css' media='all' />
<link rel='stylesheet' id='lwptoc-main-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/luckywp-table-of-contents/front/assets/main.min.css?ver=1.9.11' type='text/css' media='all' />
<link rel='stylesheet' id='pz-linkcard-css'  href='//huzheyang.cn/wp-content/uploads/pz-linkcard/style.css?ver=5.3' type='text/css' media='all' />
<link rel='stylesheet' id='math-captcha-frontend-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/wp-math-captcha/css/frontend.css?ver=5.3' type='text/css' media='all' />
<link rel='stylesheet' id='wordpress-popular-posts-css-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/wordpress-popular-posts/assets/css/wpp.css?ver=5.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentynineteen-style-css'  href='https://static.wp.huzheyang.cn/wp-content/themes/twentynineteen/style.css?ver=1.4' type='text/css' media='all' />
<link rel='stylesheet' id='twentynineteen-print-style-css'  href='https://static.wp.huzheyang.cn/wp-content/themes/twentynineteen/print.css?ver=1.4' type='text/css' media='print' />
<link rel='stylesheet' id='tablepress-default-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/tablepress/css/default.min.css?ver=1.10' type='text/css' media='all' />
<link rel='stylesheet' id='enlighter-local-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/enlighter/resources/EnlighterJS.min.css?ver=3.10.0' type='text/css' media='all' />
<link rel='stylesheet' id='tmm-css'  href='https://static.wp.huzheyang.cn/wp-content/plugins/team-members/inc/css/tmm_style.min.css?ver=5.3' type='text/css' media='all' />
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-includes/js/jquery/jquery.js?ver=1.12.4-wp'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/luckywp-table-of-contents/front/assets/main.min.js?ver=1.9.11'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wpp_params = {"sampling_active":"0","sampling_rate":"100","ajax_url":"https:\/\/huzheyang.cn\/wp-json\/wordpress-popular-posts\/v1\/popular-posts","ID":"420","token":"f7f9eeced2","debug":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/wordpress-popular-posts/assets/js/wpp-5.0.0.min.js?ver=5.0.1'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/wp-quicklatex/js/wp-quicklatex-frontend.js?ver=1.0'></script>
<link rel='https://api.w.org/' href='https://huzheyang.cn/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://huzheyang.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://static.wp.huzheyang.cn/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='解决home目录下出现的dead.letter' href='https://huzheyang.cn/2018/02/%e8%a7%a3%e5%86%b3home%e7%9b%ae%e5%bd%95%e4%b8%8b%e5%87%ba%e7%8e%b0%e7%9a%84dead-letter/' />
<link rel='next' title='Socks5隧道在Ubuntu上的部署' href='https://huzheyang.cn/2018/07/socks5%e9%9a%a7%e9%81%93%e5%9c%a8ubuntu%e4%b8%8a%e7%9a%84%e9%83%a8%e7%bd%b2/' />
<meta name="generator" content="WordPress 5.3" />
<link rel="canonical" href="https://huzheyang.cn/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/" />
<link rel='shortlink' href='https://huzheyang.cn/?p=420' />
<link rel="alternate" type="application/json+oembed" href="https://huzheyang.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhuzheyang.cn%2F2018%2F06%2Flinux-%25e5%259f%25ba%25e4%25ba%258eduplicity%25e7%259a%2584%25e8%2587%25aa%25e5%258a%25a8%25e5%258c%2596%25e5%25a4%2587%25e4%25bb%25bd%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://huzheyang.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fhuzheyang.cn%2F2018%2F06%2Flinux-%25e5%259f%25ba%25e4%25ba%258eduplicity%25e7%259a%2584%25e8%2587%25aa%25e5%258a%25a8%25e5%258c%2596%25e5%25a4%2587%25e4%25bb%25bd%2F&#038;format=xml" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124560913-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124560913-1');
</script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-3086218760521612",
    enable_page_level_ads: true
  });
</script>

<link rel="pingback" href="https://huzheyang.cn/xmlrpc.php"><link rel="icon" href="https://static.wp.huzheyang.cn/wp-content/uploads/2019/03/lliella_HHoppity2_h_90.199592668024px_534128_easyicon.net_.png" sizes="32x32" />
<link rel="icon" href="https://static.wp.huzheyang.cn/wp-content/uploads/2019/03/lliella_HHoppity2_h_90.199592668024px_534128_easyicon.net_.png" sizes="192x192" />
<link rel="apple-touch-icon-precomposed" href="https://static.wp.huzheyang.cn/wp-content/uploads/2019/03/lliella_HHoppity2_h_90.199592668024px_534128_easyicon.net_.png" />
<meta name="msapplication-TileImage" content="https://static.wp.huzheyang.cn/wp-content/uploads/2019/03/lliella_HHoppity2_h_90.199592668024px_534128_easyicon.net_.png" />
		<style type="text/css" id="wp-custom-css">
			del{
    background-color: #252525;
    color: #252525;
    text-shadow: none;
}
del:hover{
	color: #FFFFFF;
}		</style>
		</head>

<body class="post-template-default single single-post postid-420 single-format-standard wp-embed-responsive singular image-filters-enabled">


<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">跳至内容</a>

		<header id="masthead" class="site-header">

			<div class="site-branding-container">
				<div class="site-branding">

								<p class="site-title"><a href="https://huzheyang.cn/" rel="home">胡先生与他愉快的朋友们</a></p>
			
				<p class="site-description">
				技术内容归档			</p>
				<nav id="site-navigation" class="main-navigation" aria-label="顶部菜单">
			<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container"><ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95" class="main-menu"><li id="menu-item-848" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-848"><a href="https://www.jsjyhzy.cc" aria-haspopup="true" aria-expanded="false">首页</a><button class="submenu-expand" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg></button>
<ul class="sub-menu">
	<li id="menu-item--1" class="mobile-parent-nav-menu-item menu-item--1"><button class="menu-item-link-return" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>首页</button></li>
	<li id="menu-item-688" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-688"><a href="https://huzheyang.cn/index/%e5%9f%ba%e6%9c%ackms%e6%9c%8d%e5%8a%a1/">KMS</a></li>
	<li id="menu-item-689" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-689"><a href="https://huzheyang.cn/index/%e5%85%ac%e9%92%a5%e5%85%ac%e7%a4%ba/">公钥公示</a></li>
</ul>
</li>
<li id="menu-item-857" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-has-children menu-item-857"><a href="https://huzheyang.cn/posts/" aria-haspopup="true" aria-expanded="false">文章</a><button class="submenu-expand" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg></button>
<ul class="sub-menu">
	<li id="menu-item--2" class="mobile-parent-nav-menu-item menu-item--2"><button class="menu-item-link-return" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>文章</button></li>
	<li id="menu-item-847" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-847"><a href="https://huzheyang.cn/blog/">索引</a></li>
	<li id="menu-item-790" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-790"><a href="https://huzheyang.cn/category/prodriver/">那些老司机踩过的坑</a></li>
	<li id="menu-item-791" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-791"><a href="https://huzheyang.cn/category/program/">软件与编程</a></li>
	<li id="menu-item-792" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-792"><a href="https://huzheyang.cn/category/server/">服务器管理与运用</a></li>
	<li id="menu-item-793" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-793"><a href="https://huzheyang.cn/category/theory/">重大(?)理论研究与进展</a></li>
	<li id="menu-item-1068" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1068"><a href="https://huzheyang.cn/category/column/knowledgeup/">学院派报告</a></li>
</ul>
</li>
<li id="menu-item-824" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-824"><a href="https://huzheyang.cn/cookbooks-intro/" aria-haspopup="true" aria-expanded="false">Cookbooks 专栏</a><button class="submenu-expand" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg></button>
<ul class="sub-menu">
	<li id="menu-item--3" class="mobile-parent-nav-menu-item menu-item--3"><button class="menu-item-link-return" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>Cookbooks 专栏</button></li>
	<li id="menu-item-827" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-827"><a href="https://orgchem.cookbook.huzheyang.cn">有机化学</a></li>
</ul>
</li>
<li id="menu-item-1024" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-1024"><a aria-haspopup="true" aria-expanded="false">翻译作品</a><button class="submenu-expand" tabindex="-1"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path><path fill="none" d="M0 0h24v24H0V0z"></path></svg></button>
<ul class="sub-menu">
	<li id="menu-item--4" class="mobile-parent-nav-menu-item menu-item--4"><a>翻译作品</button></li>
	<li id="menu-item-1025" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1025"><a href="https://chemfig.man.huzheyang.cn">Chemfig中文手册</a></li>
</ul>
</li>
<li id="menu-item-1129" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1129"><a href="https://huzheyang.cn/about/">关于</a></li>
</ul></div><div class="main-menu-more"><ul class="main-menu"><li class="menu-item menu-item-has-children"><button class="submenu-expand main-menu-more-toggle is-empty" tabindex="-1" aria-label="More" aria-haspopup="true" aria-expanded="false"><span class="screen-reader-text">更多</span><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path fill="currentColor" fill-rule="nonzero" d="M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM6 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></g></svg></button><ul class="sub-menu hidden-links"><li id="menu-item--1" class="mobile-parent-nav-menu-item menu-item--1"><button class="menu-item-link-return"><svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>返回</button></li></ul></li></ul></div>		</nav><!-- #site-navigation -->
		</div><!-- .site-branding -->
			</div><!-- .site-branding-container -->

					</header><!-- #masthead -->

	<div id="content" class="site-content">

	<section id="primary" class="content-area">
		<main id="main" class="site-main">

			
<article id="post-420" class="post-420 post type-post status-publish format-standard hentry category-os-problem-collection category-prodriver entry">
		<header class="entry-header">
		
<h1 class="entry-title">Linux 基于duplicity的备份与还原</h1>
<div class="entry-meta">
	<span class="byline"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">发布者：</span><span class="author vcard"><a class="url fn n" href="https://huzheyang.cn/author/jsjyhzy/">热心市民胡先生</a></span></span>	<span class="posted-on"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"></path></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"></use></clipPath><path clip-path="url(#b)" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></svg><a href="https://huzheyang.cn/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/" rel="bookmark"><time class="entry-date published" datetime="2018-06-29T17:54:44+08:00">2018年6月29日</time><time class="updated" datetime="2019-01-05T12:29:33+08:00">2019年1月5日</time></a></span>	<span class="comment-count">
				<span class="comments-link"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><a href="https://huzheyang.cn/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/#respond"><span class="screen-reader-text">于Linux 基于duplicity的备份与还原</span>留下评论</a></span>	</span>
	</div><!-- .entry-meta -->
	</header>
	
	<div class="entry-content">
		<div class="iemws5ddd42c238c7e" ><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- 文章前广告 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-3086218760521612"
     data-ad-slot="7263332337"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div><style type="text/css">
@media screen and (min-width: 1201px) {
.iemws5ddd42c238c7e {
display: block;
}
}
@media screen and (min-width: 993px) and (max-width: 1200px) {
.iemws5ddd42c238c7e {
display: block;
}
}
@media screen and (min-width: 769px) and (max-width: 992px) {
.iemws5ddd42c238c7e {
display: block;
}
}
@media screen and (min-width: 768px) and (max-width: 768px) {
.iemws5ddd42c238c7e {
display: block;
}
}
@media screen and (max-width: 767px) {
.iemws5ddd42c238c7e {
display: block;
}
}
</style>

<p>与Windows不同，Linux在运行状态下任何文件都是可读的，因此对Linux的备份，其重点主要在于如何打包“/”目录下所有文件。首先，显而易见的是，可以用tar命令，将所有文件打包。这种方法，十分简单，同时也可以启用tar的增量压缩功能，以减少定期备份的空间占用，但正因为简单，所以使用时也有些许不便。其一、使用增量压缩时，如何清理过于古老的备份是需要花费一定精力的地方；其二、打包得到的文件只能放于本地文件系统（远程的则需要使用各种软件映射到本地）。</p>



<p>因此引入<em>duplicity</em>软件包，可以充分解决以上两个难点。</p>



<h2>0 安装</h2>



<pre class="wp-block-preformatted EnlighterJSRAW">sudo apt update
sudo apt install duplicity</pre>



<h2>1 确定备份范围</h2>



<ul><li>包含范围：/</li><li>必须排除：/sys、/proc（因为这两者是虚拟文件系统）和设备文件</li><li>建议排除：/tmp和/lost+found</li><li>按需排除：/mnt和/media</li></ul>



<h2>2 建议备份配置</h2>



<p>每日增量备份、每周全量备份、保留6个全量备份，保存到可移动存储设备（地址URL用file:///&#8230;）或者公共云的对象储存空间中（根据服务商选取URL头，可用<code class="EnlighterJSRAW" data-enlighter-language="shell">duplicity --help</code>查询）</p>



<h2>3 Crontab配置</h2>



<p>以备份到/media/backup为例，执行命令如下：</p>



<pre class="wp-block-preformatted EnlighterJSRAW">sudo duplicity --full-if-older-than 1W \
--no-encryption \
--exclude-device-files \
--exclude /mnt \
--exclude /tmp \
--exclude /proc \
--exclude /lost+found \
--exclude /media \
--exclude /run \
--exclude /sys \
/ file:///media/backup/ \
&amp;&amp; \
sudo duplicity remove-all-but-n-full 6 \
--no-encryption \
--force \
file:///media/backup/ \</pre>



<p>然后Crontab中配置为每日运行即可。elegant 🙂</p>



<p>值得注意的是，crontab不支持任何换行符，亦即上面的执行命令分行只是为了方便阅读，具体填入crontab中时，需要合成完整的一行。</p>



<h2>4 还原</h2>



<p>视损坏的轻重有不同的处理方法，这里以最严重的情况为例，例如错误地将<code class="EnlighterJSRAW" data-enlighter-language="generic">/etc</code>整个删除了<em>（source：不愿透露姓名的朋友）</em>。那么可以按如下建议步骤进行抢救：</p>



<ol><li><del>先喝一杯冷水压压惊</del></li><li>制作一个Ubuntu Live USB
<ul>
<li>具体而言就是将ISO文件写入到U盘</li>
</ul>
</li><li>从Live USB启动</li><li>安装duplicity&nbsp;<code class="EnlighterJSRAW" data-enlighter-language="generic">sudo apt install duplicity</code></li><li>将存有备份文件的硬盘挂载，例如说<code class="EnlighterJSRAW" data-enlighter-language="generic">/media/ubuntu/backup</code></li><li>将上文所述<code class="EnlighterJSRAW" data-enlighter-language="generic">/etc</code>所在卷挂载，例如说<code class="EnlighterJSRAW" data-enlighter-language="generic">/media/ubuntu/broken</code></li><li>执行命令<code class="EnlighterJSRAW" data-enlighter-language="generic">duplicity restore&nbsp;--no-encryption -r etc&nbsp;/media/ubuntu/backup&nbsp;/media/ubuntu/broken/etc</code></li><li>通常而言若当前系统状态与最新备份系统状态差异不大的话，就可以重新启动了。抢救到此结束。
<ul>
<li>但能做出 <code class="EnlighterJSRAW" data-enlighter-language="generic">sudo rm -rf /etc</code>这种举动的，想必是在艰苦卓绝的系统配置过程中意外手滑了一下（source：不愿透露姓名的朋友）。此时的差异应该相当大。
<ul>
<li>在这种情况下，可能需要视情况恢复<code class="EnlighterJSRAW" data-enlighter-language="generic">/usr</code>目录（source：不愿透露姓名的朋友）</li>
</ul>
</li>
</ul>
</li></ol>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">发布者：</span><span class="author vcard"><a class="url fn n" href="https://huzheyang.cn/author/jsjyhzy/">热心市民胡先生</a></span></span><span class="posted-on"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"></path></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"></use></clipPath><path clip-path="url(#b)" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></svg><a href="https://huzheyang.cn/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/" rel="bookmark"><time class="entry-date published" datetime="2018-06-29T17:54:44+08:00">2018年6月29日</time><time class="updated" datetime="2019-01-05T12:29:33+08:00">2019年1月5日</time></a></span><span class="cat-links"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">发布于</span><a href="https://huzheyang.cn/category/prodriver/os-problem-collection/" rel="category tag">操作系统疑难杂症合集</a>、<a href="https://huzheyang.cn/category/prodriver/" rel="category tag">职业老司机</a></span>	</footer><!-- .entry-footer -->

				
</article><!-- #post-420 -->

	<nav class="navigation post-navigation" role="navigation" aria-label="文章">
		<h2 class="screen-reader-text">文章导航</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://huzheyang.cn/2018/02/%e8%a7%a3%e5%86%b3home%e7%9b%ae%e5%bd%95%e4%b8%8b%e5%87%ba%e7%8e%b0%e7%9a%84dead-letter/" rel="prev"><span class="meta-nav" aria-hidden="true">上一篇文章</span> <span class="screen-reader-text">上一篇文章：</span> <br/><span class="post-title">解决home目录下出现的dead.letter</span></a></div><div class="nav-next"><a href="https://huzheyang.cn/2018/07/socks5%e9%9a%a7%e9%81%93%e5%9c%a8ubuntu%e4%b8%8a%e7%9a%84%e9%83%a8%e7%bd%b2/" rel="next"><span class="meta-nav" aria-hidden="true">下一篇文章</span> <span class="screen-reader-text">下一篇文章：</span> <br/><span class="post-title">Socks5隧道在Ubuntu上的部署</span></a></div></div>
	</nav>
<div id="comments" class="comments-area">
	<div class="comments-title-wrap no-responses">
		<h2 class="comments-title">
		留下评论		</h2><!-- .comments-title -->
			</div><!-- .comments-title-flex -->
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title"> <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2018/06/linux-%e5%9f%ba%e4%ba%8eduplicity%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e5%a4%87%e4%bb%bd/#respond" style="display:none;">取消回复</a></small></h3><p class="must-log-in">要发表评论，您必须先<a href="https://huzheyang.cn/wp-login.php?redirect_to=https%3A%2F%2Fhuzheyang.cn%2F2018%2F06%2Flinux-%25e5%259f%25ba%25e4%25ba%258eduplicity%25e7%259a%2584%25e8%2587%25aa%25e5%258a%25a8%25e5%258c%2596%25e5%25a4%2587%25e4%25bb%25bd%2F">登录</a>。</p>	</div><!-- #respond -->
	</div><!-- #comments -->

		</main><!-- #main -->
	</section><!-- #primary -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer">
		
	<aside class="widget-area" role="complementary" aria-label="页脚">
							<div class="widget-column footer-widget-1">
					
<section id="wpp-2" class="widget popular-posts">
<h2 class="widget-title">热门文章</h2>            <script type="text/javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    var wpp_widget_container = document.getElementById('wpp-2');

                    if ( 'undefined' != typeof WordPressPopularPosts ) {
                        WordPressPopularPosts.get(
                            wpp_params.ajax_url + '/widget/2',
                            'is_single=420',
                            function(response){
                                wpp_widget_container.innerHTML += JSON.parse(response).widget;

                                let sr = wpp_widget_container.querySelector('.popular-posts-sr');

                                if ( sr ) {
                                    WordPressPopularPosts.theme(sr);
                                }

                                var event = null;

                                if ( 'function' === typeof(Event) ) {
                                    event = new Event("wpp-onload", {"bubbles": true, "cancelable": false});
                                } /* Fallback for older browsers */
                                else {
                                    if ( document.createEvent ) {
                                        event = document.createEvent('Event');
                                        event.initEvent("wpp-onload", true, false);
                                    }
                                }

                                if ( event ) {
                                    wpp_widget_container.dispatchEvent(event);
                                }
                            }
                        );
                    }
                });
            </script>
            
</section>
					</div>
					</aside><!-- .widget-area -->

		<div class="site-info">
										<a class="site-name" href="https://huzheyang.cn/" rel="home">胡先生与他愉快的朋友们</a>,
						<a href="https://cn.wordpress.org/" class="imprint">
				自豪地由WordPress驱动。			</a>
			<a class="privacy-policy-link" href="https://huzheyang.cn/privacy-policy/">隐私政策</a><span role="separator" aria-hidden="true"></span>							<nav class="footer-navigation" aria-label="页脚菜单">
					<div class="menu-%e9%a1%b5%e8%84%9a-container"><ul id="menu-%e9%a1%b5%e8%84%9a" class="footer-menu"><li id="menu-item-772" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-772"><a href="https://huzheyang.cn/copyright/">版权声明</a></li>
<li id="menu-item-883" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-883"><a href="https://huzheyang.cn/contract/">联系方式</a></li>
<li id="menu-item-762" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-762"><a href="http://js.beian.miit.gov.cn">苏ICP备16038746号-3</a></li>
<li id="menu-item-763" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-763"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=32028102000155"><img src="https://static.wp.huzheyang.cn/wp-content/uploads/2016/08/备案图标.png"> 苏公网安备 32028102000155号</a></li>
<li id="menu-item-905" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-905"><a href="https://huzheyang.cn"><br><br></a></li>
<li id="menu-item-858" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-858"><a href="https://www.vultr.com/?ref=7110592"><img src="https://www.vultr.com/media/badge_onwhite.svg"   width="130" height="20" alt="加载不出来那就不要选Vultr家的服务器吧"></a></li>
<li id="menu-item-860" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-860"><a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=xdvflwl0"><img  src="https://static.wp.huzheyang.cn/wp-content/uploads/2018/11/14746235995341077.jpg" width="60" height="20" alt="aliyun"></a></li>
</ul></div>				</nav><!-- .footer-navigation -->
					</div><!-- .site-info -->
	</footer><!-- #colophon -->

</div><!-- #page -->



        <script type="text/javascript">
            (function(){
                document.addEventListener('DOMContentLoaded', function(){
                    let wpp_widgets = document.querySelectorAll('.popular-posts-sr');

                    if ( wpp_widgets ) {
                        for (let i = 0; i < wpp_widgets.length; i++) {
                            let wpp_widget = wpp_widgets[i];
                            WordPressPopularPosts.theme(wpp_widget);
                        }
                    }
                });
            })();
        </script>
                <script>
            var WPPImageObserver = null;

            function wpp_load_img(img) {
                if ( ! 'imgSrc' in img.dataset || ! img.dataset.imgSrc )
                    return;

                img.src = img.dataset.imgSrc;

                if ( 'imgSrcset' in img.dataset ) {
                    img.srcset = img.dataset.imgSrcset;
                    img.removeAttribute('data-img-srcset');
                }

                img.classList.remove('wpp-lazyload');
                img.removeAttribute('data-img-src');
                img.classList.add('wpp-lazyloaded');
            }

            function wpp_observe_imgs(){
                let wpp_images = document.querySelectorAll('img.wpp-lazyload'),
                    wpp_widgets = document.querySelectorAll('.popular-posts-sr');

                if ( wpp_images.length || wpp_widgets.length ) {
                    if ( 'IntersectionObserver' in window ) {
                        WPPImageObserver = new IntersectionObserver(function(entries, observer) {
                            entries.forEach(function(entry) {
                                if (entry.isIntersecting) {
                                    let img = entry.target;
                                    wpp_load_img(img);
                                    WPPImageObserver.unobserve(img);
                                }
                            });
                        });

                        if ( wpp_images.length ) {
                            wpp_images.forEach(function(image) {
                                WPPImageObserver.observe(image);
                            });
                        }

                        if ( wpp_widgets.length ) {
                            for (var i = 0; i < wpp_widgets.length; i++) {
                                let wpp_widget_images = wpp_widgets[i].querySelectorAll('img.wpp-lazyload');

                                if ( ! wpp_widget_images.length && wpp_widgets[i].shadowRoot ) {
                                    wpp_widget_images = wpp_widgets[i].shadowRoot.querySelectorAll('img.wpp-lazyload');
                                }

                                if ( wpp_widget_images.length ) {
                                    wpp_widget_images.forEach(function(image) {
                                        WPPImageObserver.observe(image);
                                    });
                                }
                            }
                        }
                    } /** Fallback for older browsers */
                    else {
                        if ( wpp_images.length ) {
                            for (var i = 0; i < wpp_images.length; i++) {
                                wpp_load_img(wpp_images[i]);
                                wpp_images[i].classList.remove('wpp-lazyloaded');
                            }
                        }

                        if ( wpp_widgets.length ) {
                            for (var j = 0; j < wpp_widgets.length; j++) {
                                let wpp_widget = wpp_widgets[j],
                                    wpp_widget_images = wpp_widget.querySelectorAll('img.wpp-lazyload');

                                if ( ! wpp_widget_images.length && wpp_widget.shadowRoot ) {
                                    wpp_widget_images = wpp_widget.shadowRoot.querySelectorAll('img.wpp-lazyload');
                                }

                                if ( wpp_widget_images.length ) {
                                    for (var k = 0; k < wpp_widget_images.length; k++) {
                                        wpp_load_img(wpp_widget_images[k]);
                                        wpp_widget_images[k].classList.remove('wpp-lazyloaded');
                                    }
                                }
                            }
                        }
                    }
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                wpp_observe_imgs();

                // When an ajaxified WPP widget loads,
                // Lazy load its images
                document.addEventListener('wpp-onload', function(){
                    wpp_observe_imgs();
                });
            });
        </script>
        <script type='text/javascript'>
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"https:\/\/huzheyang.cn\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"}};
/* ]]> */
</script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=5.1.5'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/themes/twentynineteen/js/priority-menu.js?ver=1.1'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/themes/twentynineteen/js/touch-keyboard-navigation.js?ver=1.1'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-includes/js/comment-reply.min.js?ver=5.3'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/enlighter/resources/mootools-core-yc.js?ver=3.10.0'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-content/plugins/enlighter/resources/EnlighterJS.min.js?ver=3.10.0'></script>
<script type='text/javascript' src='https://static.wp.huzheyang.cn/wp-includes/js/wp-embed.min.js?ver=5.3'></script>
	<script>
	/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);
	</script>
	<script type="text/javascript">/* <![CDATA[ */EnlighterJS_Config = {"selector":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"language":"generic","theme":"git","indent":2,"hover":"hoverEnabled","showLinenumbers":true,"rawButton":true,"infoButton":true,"windowButton":true,"rawcodeDoubleclick":false,"grouping":true,"cryptex":{"enabled":false,"email":"mail@example.tld"}};!function(){var a=function(a){var b="Enlighter Error: ";console.error?console.error(b+a):console.log&&console.log(b+a)};return window.addEvent?"undefined"==typeof EnlighterJS?void a("Javascript Resources not loaded yet!"):"undefined"==typeof EnlighterJS_Config?void a("Configuration not loaded yet!"):void window.addEvent("domready",function(){EnlighterJS.Util.Init(EnlighterJS_Config.selector.block,EnlighterJS_Config.selector.inline,EnlighterJS_Config)}):void a("MooTools Framework not loaded yet!")}();;/* ]]> */</script>
</body>
</html>
