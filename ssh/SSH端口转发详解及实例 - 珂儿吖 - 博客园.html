<!DOCTYPE html>
<!-- saved from url=(0045)https://www.cnblogs.com/keerya/p/7612715.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="origin">
    <title>SSH端口转发详解及实例 - 珂儿吖 - 博客园</title>
<meta property="og:description" content="ssh端口转发    三种转发方式及实例">
    <link type="text/css" rel="stylesheet" href="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/bundle-StylePink.css">
<link type="text/css" rel="stylesheet" href="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/368867.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/bundle-StylePink-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/keerya/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/keerya/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/keerya/wlwmanifest.xml">
    <script src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/amp4ads-host-v0.js.download"></script><script src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/pubads_impl_rendering_2019050701.js.download"></script><script async="" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/analytics.js.download"></script><script type="text/javascript" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/encoder.js.download"></script><script src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/jquery-2.2.0.min.js.download"></script>
    <script>var currentBlogId=368867;var currentBlogApp='keerya',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/blog-common.js.download" type="text/javascript"></script>
<link rel="preload" href="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/f.txt" as="script"><script type="text/javascript" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/f.txt"></script><script src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/pubads_impl_2019050701.js.download" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-33/html/container.html"></head>
<body>
<a name="top"></a>

<div id="page_begin_html"><script type="text/javascript">window['__document_write_ajax_callbacks__']['2']();</script><script language="javascript" type="text/javascript">window['__document_write_ajax_callbacks__']['1']();</script></div><script>load_page_begin_html();</script>

<!--done-->
<div id="banner">
<!--done-->
<div class="header">
	<div class="headerText">
		<a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/keerya/">珂儿吖</a><br>
		<div class="headerDis"></div>
	</div>
</div>
</div>
<div id="main">
	<!-- right starts -->
	<div id="right">
		<div id="right_content">
			<div id="mystats">
				
					<div id="blog_stats">
<!--done-->
<div class="blogStats">
随笔- 36&nbsp;
文章- 0&nbsp;
评论- 41&nbsp;

</div></div>
				
			</div>
			<div id="mylinks">
<!--done-->
<a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a>&nbsp;&nbsp;<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/keerya/">首页</a>&nbsp;&nbsp;<a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a>&nbsp;&nbsp;<a id="blog_nav_contact" accesskey="9" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E7%8F%82%E5%84%BF%E5%90%96">联系</a>&nbsp;&nbsp;<a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a>&nbsp;&nbsp;<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/keerya/rss">订阅</a>&nbsp;<a id="blog_nav_rss_image" href="https://www.cnblogs.com/keerya/rss"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/xml.gif" alt="订阅"></a></div>
			<div id="topics">
				
        <div id="post_detail">
<!--done-->
<div class="post">
	<div class="postTitle">
		<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/keerya/p/7612715.html">SSH端口转发详解及实例</a>
	</div>
	<div id="cnblogs_post_body" class="blogpost-body"><p style="color:navy;font-size:12px"></p><a name="_labelTop"></a><div id="navCategory"><p style="font-size:18px"><b>目录</b></p><ul><li><a href="https://www.cnblogs.com/keerya/p/7612715.html#_label0">1.1 SSH端口转发的两大功能</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html#_label1">实验一：实现SSH端口转发——本地转发</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html#_label2">实验二、实现SSH端口转发——远程转发</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html#_label3">实验三、实现SSH端口转发——动态转发</a></li></ul></div><p>&nbsp;</p><p style="font-size:18px"><b>正文</b></p><h1>一、SSH端口转发简介</h1>
<p><span style="font-family: 楷体; font-size: 14pt;">　　SSH会自动加密和解密所有SSH客户端与服务端之间的网络数据。但是，SSH还能够将其他TCP端口的网络数据通SSH链接来转发，并且自动提供了相应的加密及解密服务。这一过程也被叫做"<span style="color: #df402a;"><strong>隧道</strong></span>"（tunneling），这是因为SSH为其他TCP链接提供了一个安全的通道来进行传输而得名。例如，Telnet ，SMTP ，LDAP这些TCP应用均能够从中得益，避免了用户名，密码以及隐私信息的明文传输。而与此同时，如果工作环境许中的防火墙限制了一些网络端口的使用，但是允许SSH的连接，也能够将通过将TCP用端口转发来使用SSH进行通讯。 </span></p>
<div style="text-align: right"><a href="https://www.cnblogs.com/keerya/p/7612715.html#_labelTop">回到顶部</a><a name="_label0"></a></div><h2>1.1 SSH端口转发的两大功能</h2>
<ul>
<li><span style="font-family: 楷体; font-size: 14pt;">加密SSH Client端至SSH Server端之间的通讯数据。</span></li>
<li><span style="font-family: 楷体; font-size: 14pt;">突破防火墙的简直完成一些之前无法建立的TCP连接。 </span></li>
</ul>
<p>&nbsp;</p>
<h1>二、本地转发</h1>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>命令：-L localport:remotehost:remotehostport sshserver</strong> </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>说明：</strong>localport　　　　　　 本机开启的端口号 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; remotehost　　　　　　最终连接机器的IP地址 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp; &nbsp; remotehostport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;转发机器的端口号 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp; &nbsp; sshserver　　　　　　 转发机器的IP地址 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>选项：</strong>-f 后台启用 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp; &nbsp; -N 不打开远程shell，处于等待状态（不加-N则直接登录进去） </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -g 启用网关功能 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;接下来，我们通过实验来详细的说明一下如何实现本地转发： </span></p>
<div style="text-align: right"><a href="https://www.cnblogs.com/keerya/p/7612715.html#_labelTop">回到顶部</a><a name="_label1"></a></div><h2>实验一：实现SSH端口转发——本地转发</h2>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>背景：</strong>企业内部C服务器只允许telnet连接（23端口）访问，不允许外部直接访问，B服务器是一个ssh服务器；有一个用户需要从外部连接到企业内部的C服务器。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>前提：</strong>防火墙允许22端口进来（或者企业内部有一个堡垒机，ssh -t通过堡垒机进去）。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>原理：</strong>A用户通过ssh协议连接到B机器上，再通过B机器做跳板，连接至C机器。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>机器：</strong>rhel5模拟A用户，centos6模拟B机器，centos7模拟C机器 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>图示如下：</strong> </span></div>
</li>
</ul>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929204939184-1198655976.png" alt=""></p>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>实验步骤： </strong></span></div>
</li>
</ul>
<p><span style="font-family: 楷体; font-size: 14pt;">1）模拟C机器不允许A用户连接，并且开启B机器的telnet服务端口23。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">在centos7上输入以下口令： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>iptables -A INPUT -s 192.168.191.55 -j REJECT </strong></span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929204946090-799558356.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">此时，从rhel5用ssh命令连接centos7，是拒绝的： </span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929204952997-420060970.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">同时，我们还要开启7的telnet服务端口23： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>systemctl start telnet.soc ket </strong></span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">用<strong>ss -ntl</strong>命令可以查看的服务端口是否已开启 </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929204959340-216194604.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">2）开启端口转发（telnet隧道） </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;首先，我们在5机器上确认已经开启的端口有哪些： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205045544-338468897.png" alt=""></p>
<p>&nbsp;</p>
<p><span style="font-family: 楷体; font-size: 14pt;">我们使用的端口是9527端口，从上图中我么已经看出，9527端口没有被占用，所以我们可以使用~ </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">接着我们建立本地转发的隧道（5上输入以下命令）： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>ssh <span style="color: #df402a;">-L</span> 9527:192.168.191.77:23 <span style="color: #df402a;">-fN </span>192.168.191.66</strong> </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205053544-608836533.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;在这里，我们可以使用<strong>ps aux</strong>来查询后台运行的进程。也可以通过<strong>ss -nt</strong>查看接口连接情况： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205059575-1478652996.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205104325-1955892788.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">3）在rhel5上输入以下命令，用9527端口连接自己： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>telnet 127.0.0.1 9527 </strong></span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205110356-28832344.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;此时，我们可以查看一下centos6和centos7的连接情况： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205116965-799174141.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205121356-1208183849.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;至此，我们已经实现了A用户在公司外部远程连接C机器的需求，接下来我们就来讲一讲实现过程： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;data &lt;- -&gt; localhost:9527端口 &lt;- -&gt; localhost:XXXXX（随机在客户端6开一个端口） &lt;- -&gt; sshsrv:22（通过ssh封装） &lt;- -&gt; sshsrv:YYYYY（服务器解封装，开一个端口，代表telnet客户端） &lt;- -&gt; telnetsrv:23 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　用大白话来解释就是：当rhel5（A用户）连接自己的9527端口时，该请求自然会通过ssh协议封装发送给centos6（B机器），然后在centos6（C机器）上解封装,形成telnet流量，发送给centos7（C机器）。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　实验做完了，如果我们想要停止这个隧道，直接把后台的隧道进程杀死就可以了，命令如下： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　killall ssh </strong></span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205131200-118523022.png" alt=""></p>
<p><span style="font-size: 14pt;"><span style="font-family: 楷体;">　　我们的实验圆满完成ヾ(</span><span style="font-family: MS Mincho;">✿</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">▽</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">)ノ </span></span></p>
<p>&nbsp;</p>
<h1>三、远程转发</h1>
<p><span style="font-family: 楷体; font-size: 14pt;">　　在我们实验一的场景下，首先要满足的是防火墙上必须打开22端口，但是在现实生活中，企业处于安全考虑，一般是不会打开防火墙，只允许出不允许进。所以，当防火墙的端口没有打开的时候，我们要怎么办呢？这就要用到我们接下来要说的远程转发了： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>命令：</strong>-R sshserverport:remotehost:remotehostport sshserver </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>说明：</strong>sshserverport &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;被转发机器开启的端口号 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; remotehost&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;　　&nbsp;最终连接机器的IP地址 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp; &nbsp; remotehostport&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;被转发机器的端口号 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp; &nbsp; sshserver&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 被转发机器的IP地址 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　同样的，我们以实验来具体说明我们的远程转发： </span></p>
<div style="text-align: right"><a href="https://www.cnblogs.com/keerya/p/7612715.html#_labelTop">回到顶部</a><a name="_label2"></a></div><h2>实验二、实现SSH端口转发——远程转发</h2>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>背景：</strong>企业内部C服务器只允许telnet连接（23端口）访问，不允许外部直接访问，B服务器是一个ssh服务器；有一个用户需要从外部连接到企业内部的C服务器。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>原理：</strong>B机器访问A用户，给A用户转发 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>机器：</strong>rhel5模拟A用户，centos6模拟B机器，centos7模拟C机器 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>图示如下： </strong></span></div>
</li>
</ul>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205136872-1668551804.png" alt=""></p>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>实验步骤： </strong></span></div>
</li>
</ul>
<p><span style="font-family: 楷体; font-size: 14pt;">1）模拟C机器不允许A用户连接，并且开启B机器的telnet服务端口23。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　在centos7上输入以下口令： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　iptables -A INPUT -s 192.168.191.55 -j REJECT </strong></span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205145247-127307491.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　此时，从rhel5用ssh命令连接centos7，是拒绝的： </span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205248294-1843157952.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　同时，我们还要开启7的telnet服务端口23： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　systemctl start telnet.soc ket </strong></span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　用<strong>ss -ntl</strong>命令可以查看的服务端口是否已开启 </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205303122-1448246970.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">2）开启隧道转发（telnet隧道） </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;这一次，由于防火墙完全关闭，外部的设备连接不进来，所以我们要通过B机器去连接A用户的机器，因此，我们的开启隧道命令要在B机器（centos6）上运行： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;首先，我们要确定一下centos6上开启了哪些端口： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205322028-576361080.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;然后，我们选择一个没有被开启的端口开启隧道，进行实验： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205327637-662271955.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　同样的，在这里，我们可以使用<strong>ps aux</strong>来查询后台运行的进程。也可以通过<strong>ss -nt</strong>查看接口连接情况： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205338044-686952570.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205344044-556145885.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">3）在rhel5上输入以下命令，用9527端口连接自己： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;<strong>telnet 127.0.0.1 9527 </strong></span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205351325-1129373533.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;此时，我们可以查看一下centos6和centos7的连接情况： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205409215-1545186456.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205416481-508450694.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;至此，我们已经实现了A用户在公司外部远程连接C机器的需求，接下来我们就来讲一讲实现过程： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　data &lt;- -&gt; sshsrv:9527端口 &lt;- -&gt; sshsrv:22（通过ssh封装） &lt;- -&gt; localhost:XXXXX（随机在客户端6开一个端口） &lt;- -&gt; localhost:YYYYY（服务器解封装，开一个端口，代表telnet客户端） &lt;- -&gt; telnetsrv:23 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　用大白话来解释就是：当rhel5（A用户）连接自己的9527端口时，该请求自然会通过ssh协议封装发送给centos6（B机器），然后在centos6（C机器）上解封装,形成telnet流量，发送给centos7（C机器）。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　实验做完了，如果我们想要停止这个隧道，直接把后台的隧道进程杀死就可以了，命令如下： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　killall ssh </strong></span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205425247-2126441723.png" alt=""></p>
<p><span style="font-size: 14pt;"><span style="font-family: 楷体;">　　我们的实验圆满完成ヾ(</span><span style="font-family: MS Mincho;">✿</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">▽</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">)ノ </span></span></p>
<p>&nbsp;</p>
<h1>四、动态转发</h1>
<p><span style="font-family: 楷体; font-size: 14pt;">　　众所周知，我国有一个功能强大的防火墙，用来避免我们访问谷歌等外国的部分网站，嗯。。。FQ的方法有很多，相信大家不比小编懂的少，所以我们就不一一举例说明了。接下来，小编就给大家说一说如何通过ssh转发技术实现FQ~ </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　这里，就要用到我们的动态转发技术了：</span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　当用firefox 访问internet 时，本机的1080 端口做为代理服务器，firefox 的访问请求被转发到sshserver 上，由sshserver替之访问internet。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　接下来，我们还是以实验进行说明： </span></p>
<div style="text-align: right"><a href="https://www.cnblogs.com/keerya/p/7612715.html#_labelTop">回到顶部</a><a name="_label3"></a></div><h2>实验三、实现SSH端口转发——动态转发</h2>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>背景：</strong>模拟Google的服务器C不允许国内网站A直接访问，B服务器是国外的一个小型的学习用的服务器；国内网站A可以访问国外学习服务器B；实现国内网站A访问模拟Google服务器C。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>原理：</strong>国内网站A通过ssh协议连接到国外学习服务器B上，再通过国外学习服务器B做跳板，连接至Google服务器C。 </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>机器：</strong>centos6模拟国内网站A，rhel5模拟国外学习服务器B，centos7模拟Google服务器C </span></div>
</li>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>图示如下：</strong> </span></div>
</li>
</ul>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205432215-1263045591.png" alt=""></p>
<ul>
<li>
<div style="text-align: justify;"><span style="font-family: 楷体; font-size: 14pt;"><strong>实验步骤： </strong></span></div>
</li>
</ul>
<p><span style="font-family: 楷体; font-size: 14pt;">1）在模拟google服务器C上搭建一个网页，从互联网上访问centos7时，页面显示"Welcome to www.google.com" </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　命令如下： </span></p>
<div class="cnblogs_code">
<pre>[root@centos7 ~]# cd /var/www/html/<span style="color: #000000;">
[root@centos7 html]# vim index.html
</span>&lt;h1&gt; Welcome to www.google.com &lt;/h1&gt; </pre>
</div>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;编写完文件以后，记得重启一下httpd服务： </span></p>
<div class="cnblogs_code">
<pre>[root@centos7 html]# systemctl restart httpd </pre>
</div>
<p><span style="font-family: 楷体; font-size: 14pt;">2）模拟Google服务器C不允许国内网站A连接 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　在centos7上输入以下口令： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　[root@centos7 ~]# iptables -A INPUT -s 192.168.191.66 -j REJECT</strong> </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　此时，我们来测试一下centos6和rhel5能否访问centos7，命令为： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　curl 192.168.191.77 </strong> 或 <strong>links 192.168.191.77</strong> </span></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>[root@rhel5 ~]# curl <span style="color: #800080;">192.168</span>.<span style="color: #800080;">191.77</span>
&lt;h1&gt; Welcome to www.google.com &lt;/h1&gt;<span style="color: #000000;">

 
[root@centos6 </span>~]# curl <span style="color: #800080;">192.168</span>.<span style="color: #800080;">191.77</span><span style="color: #000000;">
curl: (</span><span style="color: #800080;">7</span>) couldn<span style="color: #800000;">'</span><span style="color: #800000;">t connect to host </span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p><span style="font-family: 楷体; font-size: 14pt;">　　可以看出，rhel5可以连接到centos7，但是centos6不能连接到centos7。我们现在的需求就是希望centos6可以借助于rhel5访问centos7，方法也很简单，接下来就给大家说一说。 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">3）动态端口转发 </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;首先，我们在6机器上确认已经开启的端口有哪些： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205535059-1032039355.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　我们使用1080端口，从上图中我么已经看出，1080端口没有被占用，所以我们可以使用~ </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">　　接着我们建立动态转发的隧道（6上输入以下命令）： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　ssh <span style="color: #df402a;">-D </span>1080 -fN 192.168.191.55</strong> </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205541669-2100046067.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">&nbsp;&nbsp;&nbsp;&nbsp;在这里，我们可以在rhel5上查看到centos6的连接： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205548340-494872131.png" alt=""></p>
<p><span style="font-family: 楷体; font-size: 14pt;">4）设置代理rhel5访问centos7，命令如下（在centos6上输入）： </span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><strong>　　curl --socks5 127.0.0.1:1080 http://192.168.191.77</strong></span></p>
<p><span style="font-family: 楷体; font-size: 14pt;"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205555278-1023160986.png" alt=""></span></p>
<p><span style="font-family: 楷体; font-size: 14pt;">5）在图形化界面，在centos6上的firefox浏览器设置代理： </span></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205601419-1786576273.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205607122-1134889932.png" alt=""></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205615356-509324349.png" alt=""></p>
<p><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/1204916-20170929205624606-1436174155.png" alt=""></p>
<p><span style="font-size: 14pt;"><span style="font-family: 楷体;">　　我们的实验圆满完成ヾ(</span><span style="font-family: MS Mincho;">✿</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">▽</span><span style="font-family: 微软雅黑;">ﾟ</span><span style="font-family: 楷体;">)ノ </span></span></p>
<p>&nbsp;</p></div><div id="MySignature" style="display: block;"><div style="background: pink; color: #0; font-size: smail">
<p>作者：<a href="http://www.cnblogs.com/keerya/" target="_blank">珂儿吖</a></p>
<p>出处：<a href="http://www.cnblogs.com/keerya/" target="_blank">http://www.cnblogs.com/keerya/</a></p>
<p>本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。 
<br>
大家写文都不容易，希望尊重劳动成果哟~ 
</p>
</div></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag">标签: <a href="https://www.cnblogs.com/keerya/tag/ssh/">ssh</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(7612715,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;b65ff178-7cd6-41e3-36bc-08d49c352df3&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/keerya/" target="_blank"><img src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/20171024190543.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/keerya/">珂儿吖</a><br>
            <a href="http://home.cnblogs.com/u/keerya/followees">关注 - 8</a><br>
            <a href="http://home.cnblogs.com/u/keerya/followers">粉丝 - 176</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;b65ff178-7cd6-41e3-36bc-08d49c352df3&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(7612715,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">11</span>
    </div>
    <div class="buryit" onclick="votePost(7612715,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">1</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/keerya/p/7553491.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/keerya/p/7553491.html" title="发布于2017-09-19 19:12">私人订制——属于你自己的Linux</a><br><a href="https://www.cnblogs.com/keerya/p/7663742.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/keerya/p/7663742.html" title="发布于2017-10-13 23:03">Linux上mysql的安装与配置</a><br></div>
</div>


	<div class="postDesc">posted on <span id="post-date">2017-09-29 20:58</span> <a href="https://www.cnblogs.com/keerya/">珂儿吖</a> 阅读(<span id="post_view_count">11811</span>) 评论(<span id="post_comment_count">3</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=7612715" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/keerya/p/7612715.html#" onclick="AddToWz(7612715);return false;">收藏</a></div>
</div>
<script type="text/javascript">var allowComments=true,cb_blogId=368867,cb_entryId=7612715,cb_blogApp=currentBlogApp,cb_blogUserGuid='b65ff178-7cd6-41e3-36bc-08d49c352df3',cb_entryCreatedDate='2017/9/29 20:58:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>

</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<!--done-->
<div class="comment">
<div class="feedback_area_title">发表评论</div>
<div class="feedbackNoItems"></div>
	

		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="https://www.cnblogs.com/keerya/p/7612715.html#3800893" class="layer">#1楼</a><a name="3800893" id="comment_anchor_3800893"></a>  <span class="comment_date">2017-09-29 20:59</span> | <a id="a_comment_author_3800893" href="https://www.cnblogs.com/along21/" target="_blank">alonghub</a> <a href="http://msg.cnblogs.com/send/alonghub" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3800893" class="blog_comment_body">好</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3800893,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3800893,&#39;Bury&#39;,this)">反对(0)</a></div><span id="comment_3800893_avatar" style="display:none;">http://pic.cnblogs.com/face/1216496/20180511164826.png</span>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="https://www.cnblogs.com/keerya/p/7612715.html#4006459" class="layer">#2楼</a><a name="4006459" id="comment_anchor_4006459"></a>  <span class="comment_date">2018-06-26 22:02</span> | <a id="a_comment_author_4006459" href="https://www.cnblogs.com/radio/" target="_blank">大树的博客</a> <a href="http://msg.cnblogs.com/send/%E5%A4%A7%E6%A0%91%E7%9A%84%E5%8D%9A%E5%AE%A2" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_4006459" class="blog_comment_body">真棒</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4006459,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4006459,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="https://www.cnblogs.com/keerya/p/7612715.html#4144949" class="layer">#3楼</a><a name="4144949" id="comment_anchor_4144949"></a><span id="comment-maxId" style="display:none;">4144949</span><span id="comment-maxDate" style="display:none;">2018/12/21 16:35:36</span>  <span class="comment_date">2018-12-21 16:35</span> | <a id="a_comment_author_4144949" href="http://home.cnblogs.com/u/968356/" target="_blank">iworker</a> <a href="http://msg.cnblogs.com/send/iworker" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_4144949" class="blog_comment_body">好文啊。只是远程转发那个，感觉有点儿模糊</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4144949,&#39;Digg&#39;,this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4144949,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
		</div>
	
</div><div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/keerya/p/7612715.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/keerya/p/7612715.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://www.bagevent.com/event/2195041?bag_track=13072958" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-看雪&#39;)">【活动】看雪2019安全开发者峰会，共话安全领域焦点</a><br><a href="https://ke.qq.com/adActivity.html?name=xiangxueketang2" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-享学&#39;)">【培训】Java程序员年薪40W，他1年走了别人5年的路</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/gpt.js.download"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CJG5j-yhjuICFVeylgodd5cJfw"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/ITtangtang/p/3921543.html" target="_blank" onclick="clickRecomItmem(3921543)">Linux：ssh端口转发详解</a><br>·  <a href="https://www.cnblogs.com/hftian/p/9998330.html" target="_blank" onclick="clickRecomItmem(9998330)">SSH端口转发详解及实例</a><br>·  <a href="https://www.cnblogs.com/cloudiest/p/8485612.html" target="_blank" onclick="clickRecomItmem(8485612)">利用SSH端口转发实现跨机器直接访问</a><br>·  <a href="https://www.cnblogs.com/yxh168/p/9069465.html" target="_blank" onclick="clickRecomItmem(9069465)">SSH高级服务</a><br>·  <a href="https://www.cnblogs.com/liuwentaolaji/p/9608255.html" target="_blank" onclick="clickRecomItmem(9608255)">ssh端口转发详解</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CJK5j-yhjuICFVeylgodd5cJfw"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="2" data-load-complete="true" src="./SSH端口转发详解及实例 - 珂儿吖 - 博客园_files/saved_resource(1).html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/625049/" target="_blank">一线｜龚宇：未来包月付费占主导，但单点付费比例可能变大</a><br> ·  <a href="https://news.cnblogs.com/n/625048/" target="_blank">李彦宏被申请列入失信名单后，百度文库的侵权问题解决了吗</a><br> ·  <a href="https://news.cnblogs.com/n/625047/" target="_blank">杨浩涌：2025年中国二手车市场规模有望超过2万亿元</a><br> ·  <a href="https://news.cnblogs.com/n/625046/" target="_blank">缺了整整一类脑细胞，他的神经元集体“迷路”了</a><br> ·  <a href="https://news.cnblogs.com/n/625045/" target="_blank">雷军现身印度：穿传统服装 画面感受下</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
			</div>
		</div>
	</div>
	<!-- right ends -->
	<!-- left starts -->
	<div id="left">
		<!-- 左侧工具部分 -->
		<div id="left_content">
			<div id="calendar"><div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/04/01&#39;);return false;">&lt;</a></td><td align="center">2019年5月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/06/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td class="CalWeekendDay" align="center">4</td></tr><tr><td class="CalWeekendDay" align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td class="CalTodayDay" align="center">9</td><td align="center">10</td><td class="CalWeekendDay" align="center">11</td></tr><tr><td class="CalWeekendDay" align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td class="CalWeekendDay" align="center">18</td></tr><tr><td class="CalWeekendDay" align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td class="CalWeekendDay" align="center">25</td></tr><tr><td class="CalWeekendDay" align="center">26</td><td align="center">27</td><td align="center">28</td><td align="center">29</td><td align="center">30</td><td align="center">31</td><td class="CalOtherMonthDay" align="center">1</td></tr><tr><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
<!--done-->
<!-- <h1 class="listtitle">公告</h1> -->
<div class="newsItem">
	<div id="blog-news"><div id="myTime">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="160" height="70" id="honehoneclock" align="middle">
            <param name="allowScriptAccess" value="always">
            <param name="movie" value="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_wh.swf">
            <param name="quality" value="high">
            <param name="bgcolor" value="#ffffff">
            <param name="wmode" value="transparent">
            <embed wmode="transparent" src="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_wh.swf" quality="high" bgcolor="#ffffff" width="160" height="70" name="honehoneclock" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">
        </object>
</div>


<script type="text/javascript">window['__document_write_ajax_callbacks__']['3']();</script><script type="text/javascript">window['__document_write_ajax_callbacks__']['1']();</script><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/keerya/">珂儿吖</a><br>园龄：<a href="https://home.cnblogs.com/u/keerya/" title="入园时间：2017-07-22">1年9个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/keerya/followers/">176</a><br>关注：<a href="https://home.cnblogs.com/u/keerya/followees/">8</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;b65ff178-7cd6-41e3-36bc-08d49c352df3&#39;)">+加关注</a></div><script type="text/javascript">window['__document_write_ajax_callbacks__']['4']();</script><script>window['__document_write_ajax_callbacks__']['2']();</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			
				<div id="leftcontentcontainer">
					<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block"></div><div id="sidebar_recentposts" class="sidebar-block">
<h3 class="catListTitle">最新随笔</h3>
<div class="RecentComment" id="RecentPosts">
<ul style="word-break:break-all">
<li><a href="https://www.cnblogs.com/keerya/p/8127716.html">1. 企业级nosql数据库应用与实战-redis</a></li><li><a href="https://www.cnblogs.com/keerya/p/8119597.html">2. Linux企业运维人员必备150个命令汇总</a></li><li><a href="https://www.cnblogs.com/keerya/p/8087675.html">3. 自动化运维工具——puppet详解（二）</a></li><li><a href="https://www.cnblogs.com/keerya/p/8040071.html">4. 自动化运维工具——puppet详解（一）</a></li><li><a href="https://www.cnblogs.com/keerya/p/8004566.html">5. 自动化运维工具——ansible详解（二）</a></li><li><a href="https://www.cnblogs.com/keerya/p/7987886.html">6. 自动化运维工具——ansible详解（一）</a></li><li><a href="https://www.cnblogs.com/keerya/p/7953695.html">7. 项目实战——企业级Zabbix监控实战（一）</a></li><li><a href="https://www.cnblogs.com/keerya/p/7899830.html">8. 实现基于tomcat集群会话保持</a></li><li><a href="https://www.cnblogs.com/keerya/p/7883766.html">9. mysql实现高可用架构之MHA</a></li><li><a href="https://www.cnblogs.com/keerya/p/7873502.html">10. 实战项目——mysql主从架构的实现</a></li>
</ul>
</div>
</div><div id="sidebar_categories">
<!--done-->

		<h1 class="catListTitle">随笔分类</h1>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_0" class="listitem" href="https://www.cnblogs.com/keerya/category/1049232.html">shell脚本(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_1" class="listitem" href="https://www.cnblogs.com/keerya/category/1049231.html">vim(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_2" class="listitem" href="https://www.cnblogs.com/keerya/category/1049230.html">xshell(1)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_3" class="listitem" href="https://www.cnblogs.com/keerya/category/1050982.html">文本处理(2)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_0_Link_4" class="listitem" href="https://www.cnblogs.com/keerya/category/1050984.html">正则表达式(2)</a></li>
			
				</ul>
			
	
		<h1 class="catListTitle">随笔档案</h1>
		
				<ul class="catList">
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_0" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/12.html">2017年12月 (7)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_1" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/11.html">2017年11月 (7)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_2" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/10.html">2017年10月 (4)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_3" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/09.html">2017年9月 (4)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_4" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/08.html">2017年8月 (11)</a></li>
			
				<li class="catListItem"> <a id="CatList_LinkList_1_Link_5" class="listitem" href="https://www.cnblogs.com/keerya/archive/2017/07.html">2017年7月 (3)</a></li>
			
				</ul>
			
	
</div><div id="sidebar_scorerank" class="sidebar-block">
<h3>积分与排名</h3>
<ul>
	<li>
		积分 -
		39887
	</li><li>
		排名 -
		14543
	</li>
</ul>
</div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<h3 class="catListTitle">阅读排行榜</h3>
<div class="RecentComment" id="TopViewPosts"> 
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/keerya/p/8040071.html">1. 自动化运维工具——puppet详解（一）(26357)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7987886.html">2. 自动化运维工具——ansible详解（一）(16509)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html">3. SSH端口转发详解及实例(11811)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7953695.html">4. 项目实战——企业级Zabbix监控实战（一）(5911)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7553491.html">5. 私人订制——属于你自己的Linux(4116)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7833724.html">6. Varnish 实战项目(3530)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8004566.html">7. 自动化运维工具——ansible详解（二）(3078)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8087675.html">8. 自动化运维工具——puppet详解（二）(2453)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8119597.html">9. Linux企业运维人员必备150个命令汇总(2035)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7819842.html">10. Nginx实现负载均衡&amp;Nginx缓存功能(2015)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<h3 class="catListTitle">评论排行榜</h3>
<div class="RecentComment" id="TopCommentsPosts">
	<div id="TopFeedbackPostsBlock"><ul><li><a href="https://www.cnblogs.com/keerya/p/8119597.html">1. Linux企业运维人员必备150个命令汇总(4)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8127716.html">2. 企业级nosql数据库应用与实战-redis(3)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7833724.html">3. Varnish 实战项目(3)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7819970.html">4. 实现基于Keepalived高可用集群网站架构的多种方法(3)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html">5. SSH端口转发详解及实例(3)</a></li></ul></div>
</div></div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/keerya/p/7987886.html">1. 自动化运维工具——ansible详解（一）(34)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7953695.html">2. 项目实战——企业级Zabbix监控实战（一）(21)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8040071.html">3. 自动化运维工具——puppet详解（一）(15)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8004566.html">4. 自动化运维工具——ansible详解（二）(15)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7612715.html">5. SSH端口转发详解及实例(11)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8127716.html">6. 企业级nosql数据库应用与实战-redis(11)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7553491.html">7. 私人订制——属于你自己的Linux(10)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8119597.html">8. Linux企业运维人员必备150个命令汇总(9)</a></li><li><a href="https://www.cnblogs.com/keerya/p/8087675.html">9. 自动化运维工具——puppet详解（二）(6)</a></li><li><a href="https://www.cnblogs.com/keerya/p/7873502.html">10. 实战项目——mysql主从架构的实现(6)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
				</div>
			
		</div>
		<!-- //右侧工具部分 -->
	</div>
	<!-- left ends -->	
	<div class="clear"></div>
</div>
<div id="footer">
	
<!--done-->
Copyright ©2019 珂儿吖
</div>




<script type="text/javascript">

        // 生成目录索引列表
        function GenerateContentList()
        {
            var mainContent = $('#cnblogs_post_body');
            var h2_list = $('#cnblogs_post_body h2');//如果你的章节标题不是h2,只需要将这里的h2换掉即可

            if(mainContent.length < 1)
                return;
        
            if(h2_list.length>0)
            {
                var content = '<a name="_labelTop"></a>';
                content += '<div id="navCategory">';
                content += '<p style="font-size:18px"><b>目录</b></p>';
                content += '<ul>';
                // 一级目录
                for(var i=0; i<h2_list.length; i++)
                {
                    var go_to_top = '<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label' + i + '"></a></div>';
                    $(h2_list[i]).before(go_to_top);
                    
                    var h3_list = $(h2_list[i]).nextAll("h3");
                    var li3_content = '';
                    
                    // 二级目录
                    for(var j=0; j<h3_list.length; j++)
                    {
                        var tmp = $(h3_list[j]).prevAll('h2').first();

                        if(!tmp.is(h2_list[i]))
                            break;

                        var li3_anchor = '<a name="_label' + i + '_' + j + '"></a>';

                        $(h3_list[j]).before(li3_anchor);                        

                        // 三级目录
                        var h4_list = $(h3_list[j]).nextAll('h4');
                        var li4_content = '';

                        for (var h = 0; h < h4_list.length; h++) {                            

                            var tmp = $(h4_list[h]).prevAll('h3').first();

                            if (!tmp.is(h3_list[j]))
                                break;
                            
                            var li4_anchor = '<a name="_label' + i + '_' + j + '_' + h + '"></a>';
                            $(h4_list[h]).before(li4_anchor);

                            // li4_content += '<li><a href="#_label' + i + '_' + j + '_' + h + '">' + $(h4_list[h]).text() + '</a></li>';

                            // 四级目录
                            var h5_list = $(h4_list[h]).nextAll('h5');
                            var li5_content = '';
                            
                            for(var l = 0; l < h5_list.length; l++) {
                                var tmp = $(h5_list[l]).prevAll('h4').first();

                                if (!tmp.is(h4_list[h]))
                                break;

                                var li5_anchor = '<a name="_label' + i + '_' + j +'_' + h + '_' + l + '"></a>';

                                $(h5_list[l]).before(li5_anchor);

                                li5_content += '<li><a href="#_label' + i + '_' + j + '_' + h + '_' + l + '">' + $(h5_list[l]).text() + '</a></li>';
                            }

                            if (li5_content.length > 0) {
                                li4_content += '<li><a href="#_label' + i + '_' + j + '_' + h + '">' + $(h4_list[h]).text() + '</a><ul>' + li5_content + '</ul></li>';
                            } else {
                                li4_content += '<li><a href="#_label' + i + '_' + j + '_' + h + '">' + $(h4_list[h]).text() + '</a></li>';
                            }
                        }

                        if (li4_content.length > 0) {
                            li3_content += '<li><a href="#_label' + i + '_' + j + '">' + $(h3_list[j]).text() + '</a><ul>' + li4_content + '</ul></li>';
                        } else {
                            li3_content += '<li><a href="#_label' + i + '_' + j + '">' + $(h3_list[j]).text() + '</a></li>';
                        }
                    }
                    
                    var li2_content = '';

                    if(li3_content.length > 0)
                        li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a><ul>' + li3_content + '</ul></li>';
                    else
                        li2_content = '<li><a href="#_label' + i + '">' + $(h2_list[i]).text() + '</a></li>';

                    content += li2_content;
                }

                content += '</ul>';
                content += '</div><p>&nbsp;</p>';
                content += '<p style="font-size:18px"><b>正文</b></p>';
                if($('#cnblogs_post_body').length != 0 )
                {
                    $($('#cnblogs_post_body')[0]).prepend(content);
                }
            }   

            var qqinfo =  '<p style="color:navy;font-size:12px"></p>';
            $(mainContent[0]).prepend(qqinfo);
        }

        GenerateContentList();
    </script><script type="text/javascript">
    window.onload = function() {
        function $(id) {return document.getElementById(id);}
        function show(obj){obj.style.display = 'block';}
        function hide(obj){obj.style.display = 'none';}
        function scroll() {
              if(window.pageYOffset != null ){//ie9+浏览器
                return {
                    left:window.pageXOffset,
                    top:window.pageYOffset
                }
            } else if(document.compatMode == "CSS1Compat"){//标准浏览器
                    return {
                        left:document.documentElement.scrollLeft,
                        top:document.documentElement.scrollTop
                    }
                }
                return {//其它浏览器
                    left:document.body.scrollLeft,
                    top:document.body.scrollTop
                }
            }
            var goTop = $("gotop");
            window.onscroll = function() {
                scroll().top > 0 ? show(goTop) : hide(goTop);
                leader = scroll().top;
            }
            var leader = 0,target = 0,timer = null;
            goTop.onclick = function() {
                target = 0; //可以省略
                timer = setInterval(function(){
                    leader = leader + (target - leader) / 10;
                    window.scroll(0,leader);
                    if (leader == target) {
                        clearInterval(timer);
                    }
                },30)
            }
        }
    </script><script type="text/javascript">getFollowStatus('b65ff178-7cd6-41e3-36bc-08d49c352df3')</script></body></html>