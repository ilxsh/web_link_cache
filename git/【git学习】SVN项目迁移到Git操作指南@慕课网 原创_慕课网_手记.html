<!doctype html>
<html lang="en"> 

    

    
    
    

    
    
    
    <head>
        
        <title>【git学习】SVN项目迁移到Git操作指南@慕课网 原创_慕课网_手记</title>
        
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="慕课网">
        <meta name="keywords" content="慕课网">
        <meta name="author" content="">
        <meta name = "format-detection" content="telephone=no">
        <meta http-equiv="Cache-Control" content="no-transform " />
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <link rel="shortcut icon" href="/static/wap/static/favicon.ico" />
        
        <script type="text/javascript" src="/static/wap/static/common/js/flexible.js"></script>
        <script type="text/javascript">
            var userInfo = "";
        </script>
        
<link rel="canonical" href="https://www.imooc.com/article/30301">
<link rel="miphtml" href="https://m.imooc.com/mip/article/30301">




    <link rel="stylesheet" href="/static/wap/static/common/css/common_41cb51e.css" /><link rel="stylesheet" href="/static/wap/static/lib/pretty/prettify_5ca3b7e.css" /><link rel="stylesheet" href="/static/wap/static/css/article/details_93106ea.css" /></head>
    <body >
        
          
        

        
          
        

        
          







<header class="directory2">
	<div class="header clearfix">
		
			
				<div class="page-title clearfix">
					<a href="//m.imooc.com" class="imwap-icon-imooc"></a>
					<div class="page-title-name js-page-name">
						<span>手记</span>
						<i class="imwap-arrow_d"></i>
					</div>
				</div>
			

			
			<div class="drawer-box js-drawer-more">
				<i class="imwap-more_vert"></i>
				<div class="drawer-content js-drawer-content">
					<p class="line-row"></p>
					<a class="drawer-item" href="//m.imooc.com"><i class="imwap-center"></i>回到首页</a>
					<a class="drawer-item" href="//www.imooc.com/m/web/user/usercenter.html"><i class="imwap-peaple"></i>个人中心</a>
					<a class="drawer-item" href="//m.imooc.com/feedback"><i class="imwap-comment"></i>反馈问题</a>
					
					<a class="drawer-item" href="//m.imooc.com/account/login"><i class="imwap-out"></i>注册登录</a>
					
				</div>
			</div>
			

			
				<a class="imwap-share header-share js-share" href="javascript:void(0);"></a>
			

		
	</div>
	
	<div class="page-tab-wrap">
		<div class="page-tab-list">
			<a href="//m.imooc.com" class="page-tab-item">首页</a>
			<a href="//m.imooc.com/course/list" class="page-tab-item">课程</a>
			<a href="//coding.m.imooc.com" class="page-tab-item">实战</a>
			<a href="//class.m.imooc.com" class="page-tab-item">就业班</a>
			<a href="//m.imooc.com/article" class="page-tab-item active">手记</a>
			<a href="//m.imooc.com/read" class="page-tab-item">专栏</a>
			<a href="//m.imooc.com/wenda" class="page-tab-item">猿问</a>
			<a href="//job.m.imooc.com" class="page-tab-item">猿聘</a>
		</div>
	</div>
	
</header>


        

        <div id="wrapper">
            <div id="middle" class="container">

                

                
<div class="article-box">
	<h2>【git学习】SVN项目迁移到Git操作指南</h2>
	
	<div class="article-info">
		<img src="//img1.mukewang.com/54584cd10001404b02200220-100-100.jpg" class="author-avator">
		<span class="author-name">30秒到达战场</span>
		<span class="time">2018-05-22 13:25:23</span>
		<span class="view-num">浏览 1149</span>
	</div>
	
	<div class="article-content" id="article_content">
		<h1><a name="t0"></a>参考链接</h1><p>在迁移的过程中，参考了以下的链接：</p><ul class=" list-paddingleft-2"><li><p><a href="https://www.chenyudong.com/archives/git-and-svn-collaboration.html">git与svn 共舞</a></p></li><li><p><a href="https://yq.aliyun.com/articles/6046?spm=5176.100239.blogcont5843.27.Snqs8O">走进git时代系列二》 从SVN迁移到GIT教程</a></p></li><li><p><a href="http://www.blogjava.net/lishunli/archive/2012/01/15/368562.html">SVN迁移到Git的过程（+一些技巧)</a></p></li><li><p><a href="http://www.aikaiyuan.com/6584.html">svn 迁移到git下全过程</a></p></li><li><p><a href="https://www.lovelucy.info/codebase-from-svn-to-git-migration-keep-commit-history.html">将代码库从 SVN 迁移至 Git 并保留所有 commit 记录</a></p></li><li><p><a href="https://git-scm.com/book/zh/v1/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git">Git 与其他系统 - 迁移到 Git</a></p></li><li><p><a href="https://www.jianshu.com/p/e6be6f76b21c">从SVN迁移代码到Git实践总结</a></p></li></ul><h1><a name="t1"></a>第一步、建立SVN用户到git用户的映射文件</h1><blockquote><p>在 Subversion，每个提交者在都在主机上有一个用户名，记录在提交信息中。如果想让已有的信息更好的映射到 Git 作者数据里，则需要 从 Subversion 用户名到 Git 作者的一个映射关系，因为Git是用邮箱来标识一个提交者的。建立一个叫做 <code>userinfo.txt</code> 的文件，每行一条<code>svn作者 = 作者昵称 &lt;邮箱地址&gt;</code>，用<strong>如下格式表示映射关系</strong>：</p></blockquote><p>因为网易云音乐这个项目有ouyangpeng和huxiaoqiao的提交记录，所以userinfo.txt内容如下所示：</p><pre name="code">ouyangpeng&nbsp;=&nbsp;ouyangpeng&nbsp;&lt;ouyangpeng@oaserver.dw.gdbbk.com&gt;
huxiaoqiao&nbsp;=&nbsp;huxiaoqiao&nbsp;&lt;huxiaoqiao@oaserver.dw.gdbbk.com&gt;12</pre><p>现在SVN代码的文件中，使用如下命令获取到所有提交者的名字。</p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a694000192e009320621.jpg"/></p><p>SVN代码的所有提交者的作者名可以通过以下命令获得：</p><p>获取svn提交的作者名</p><pre name="code">svn&nbsp;log&nbsp;--xml&nbsp;|&nbsp;grep&nbsp;&quot;^&lt;author&quot;&nbsp;|&nbsp;sort&nbsp;-u&nbsp;|&nbsp;\awk&nbsp;-F&nbsp;&#39;&lt;author&gt;&#39;&nbsp;&#39;{print&nbsp;$2}&#39;&nbsp;|&nbsp;awk&nbsp;-F&nbsp;&#39;&lt;/author&gt;&#39;&nbsp;&#39;{print&nbsp;$1}&#39;&nbsp;&gt;&nbsp;userinfo.txt1</pre><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a6960001357a07500300.jpg"/></p><p>得到以下文本，然后根据以上的格式编辑作者的邮件信息等。</p><pre name="code">lihongmeng
liyang
wangshuyin
wuqi
youpeng
ouyangpeng&nbsp;123456</pre><p>这样我们的把有svn的提交记录的作者、邮箱<code>userinfo.txt</code>都准备好了，接下来就克隆svn的地址。</p><pre name="code">lihongmeng&nbsp;=&nbsp;lihongmeng&nbsp;&lt;lihongmeng@oaserver.dw.gdbbk.com&gt;liyang&nbsp;=&nbsp;liyang&nbsp;&lt;liyang@oaserver.dw.gdbbk.com&gt;wangshuyin&nbsp;=&nbsp;wangshuyin&nbsp;&lt;wangshuyin@oaserver.dw.gdbbk.com&gt;wuqi&nbsp;=&nbsp;wuqi&nbsp;&lt;wuqi@oaserver.dw.gdbbk.com&gt;youpeng&nbsp;=&nbsp;youpeng&nbsp;&lt;youpeng@oaserver.dw.gdbbk.com&gt;ouyangpeng&nbsp;=&nbsp;ouyangpeng&nbsp;&lt;ouyangpeng@oaserver.dw.gdbbk.com&gt;123456</pre><h1><a name="t2"></a>第二步、通过git svn clone克隆一个git版本库,SVN里面包含trunk,branches和tags。</h1><p>SVN版本库的内容如下所示：</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a6960001dc6608010223.jpg"/></p><p>把上面的userinfo.txt 拷贝到 新建好的准备克隆svn代码的git目录下， <br/> 然后执行 <strong>git svn clone</strong>命令克隆一个git版本库</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a6970001a84f09020591.jpg"/></p><pre name="code">&nbsp;git&nbsp;svn&nbsp;clone&nbsp;svn://172.28.1.171/XTCWatch_device_I3_APP/NetEaseCloudeMusic/&nbsp;--no-metadata&nbsp;--authors-file=userinfo.txt&nbsp;--trunk=trunk&nbsp;--tags=tags&nbsp;--branches=branches1</pre><ul class=" list-paddingleft-2"><li><p>参数–no-metadata表示阻止git导出SVN包含的一些无用信息</p></li><li><p>参数–authors-file表示SVN账号映射到git账号文件，所有svn作者都要做映射</p></li><li><p>参数–trunk表示主开发项目</p></li><li><p>参数–branches表示分支项目</p></li></ul><p>敲完命令后，会要求填写SSH相关信息，填写好svn的账户名和密码 即可继续执行。</p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a697000137a408310412.jpg"/></p><p>填写用户名</p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a6970001afc503160165.jpg"/></p><p>填写密码</p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a6980001f30a08330423.jpg"/></p><p>填写完毕后，回车则会开始执行clone操作。</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a6980001285409350423.jpg"/></p><p>执行过程中，在不断的从svn服务器拉取代码到本地git版本库</p><p><img title="" alt="这里写图片描述" src="https://img3.mukewang.com/5b03a69900010ebd09440569.jpg"/></p><p>使用<strong>git log</strong> 命令查看转换好的代码库，可以看到历史记录</p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a6990001962009470427.jpg"/></p><p>widgetPhone的提交历史记录如下：</p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a70000018a9f08840854.jpg"/></p><p>这个时候执行<em>* git branch*</em> 命令发现只有 master一个分支。</p><p>但是实际上我有好几个分支， <br/><strong>APP_NetEaseCloudMusic_SearchSongs </strong> , <br/><strong>APP_NetEaseCloudMusic_UseByAnonymous</strong>, <br/><strong>App_NetEaseCloudMusic_V0.1_backup</strong></p><p>执行命令 <strong>git show-ref</strong>可以看到所有的引用，如下所示， <br/> 可以看到有master这个本地分支，同时有remote 分支trunk, APP_NetEaseCloudMusic_SearchSongs , APP_NetEaseCloudMusic_UseByAnonymous, <br/> App_NetEaseCloudMusic_V0.1_backup 等，</p><p>通过Git Version 发现trunk 和 Master分支的版本是一样的， 其他几个分支和SVN客户端branches 目录下的结构是一样的。 说明 git svn 将svn的主干和其他分支 转换为了git的 master 和其他branch 。</p><p><img title="" alt="这里写图片描述" src="https://img.mukewang.com/5b03a7010001195a08740323.jpg"/></p><p>这时我们发现有一些remote 分支，不是本地仓库的分支， 我们还没有设置remote， 那就需要执行以下的命令将remote 分支移回本地分支。</p><h2><a name="t3"></a>尝试方法1</h2><p>首先要移动标签，把它们从奇怪的远程分支变成实际的标签，然后把剩下的分支移动到本地。要把标签变成合适的Git标签，运行</p><pre name="code">cp&nbsp;-Rf&nbsp;.git/refs/remotes/tags/*&nbsp;.git/refs/tags/
rm&nbsp;-Rf&nbsp;.git/refs/remotes/tags12</pre><p>该命令将原本以tag/开头的远程分支的索引变成真正的（轻巧的）标签。</p><p>接下来，把refs/remotes下面剩下的索引变成本地分支：</p><pre name="code">cp&nbsp;-Rf&nbsp;.git/refs/remotes/*&nbsp;.git/refs/heads/
rm&nbsp;-Rf&nbsp;.git/refs/remotes12</pre><p>合并一起一共执行4条命令。</p><pre name="code">cp&nbsp;-Rf&nbsp;.git/refs/remotes/tags/*&nbsp;.git/refs/tags/rm&nbsp;-Rf&nbsp;.git/refs/remotes/tags

cp&nbsp;-Rf&nbsp;.git/refs/remotes/*&nbsp;.git/refs/heads/rm&nbsp;-Rf&nbsp;.git/refs/remotes1234567</pre><h2><a name="t4"></a>尝试方法2</h2><p>在迁移 WidgetPhone 的时候，git/refs/remotes/tags/目录不存在，而目录.git/refs/remotes/origin/tags/存在，于是命令改为</p><pre name="code">cp&nbsp;-rf&nbsp;.git/refs/remotes/origin/tags/*&nbsp;.git/refs/tags/rm&nbsp;-rf&nbsp;.git/refs/remotes/origin/tags

cp&nbsp;-rf&nbsp;.git/refs/remotes/origin/*&nbsp;.git/refs/heads/rm&nbsp;-rf&nbsp;.git/refs/remotes1234567</pre><p>现在所有的旧分支都变成真正的分支，所有的旧标签也变成真正的标签。 <br/> 执行后效果如下所示，可以看到其他的branch都挪到了本地。</p><p><img title="" alt="这里写图片描述" src="https://img3.mukewang.com/5b03a7010001642209460459.jpg"/></p><h2><a name="t5"></a>尝试方法3</h2><p>迁移 WidgetCommon 项目的时候，上面两种命令都无效，都提示 .git/refs/remotes/origin/tags/* 目录不存在，如下图所示：</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a702000134b808770068.jpg"/></p><p>没办法，去官网查询了下</p><ul class=" list-paddingleft-2"><li><p><a href="https://git-scm.com/book/zh/v1/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git">https://git-scm.com/book/zh/v1/Git-%E4%B8%8E%E5%85%B6%E4%BB%96%E7%B3%BB%E7%BB%9F-%E8%BF%81%E7%A7%BB%E5%88%B0-Git</a></p></li></ul><p>使用如下的方法做操作。</p><p>首先要移动标签，把它们从奇怪的远程分支变成实际的标签，然后把剩下的分支移动到本地。要把标签变成合适的 Git 标签，运行</p><pre name="code">$&nbsp;git&nbsp;for-each-ref&nbsp;refs/remotes/tags&nbsp;|&nbsp;cut&nbsp;-d&nbsp;/&nbsp;-f&nbsp;4-&nbsp;|&nbsp;grep&nbsp;-v&nbsp;@&nbsp;|&nbsp;while&nbsp;read&nbsp;tagname;&nbsp;do&nbsp;git&nbsp;tag&nbsp;&quot;$tagname&quot;&nbsp;&quot;tags/$tagname&quot;;&nbsp;git&nbsp;branch&nbsp;-r&nbsp;-d&nbsp;&quot;tags/$tagname&quot;;&nbsp;done1</pre><p>该命令将原本以 <code>tag/</code> 开头的远程分支的索引变成真正的（轻巧的）标签。</p><p>接下来，把 <code>refs/remotes</code> 下面剩下的索引变成本地分支：</p><pre name="code">$&nbsp;git&nbsp;for-each-ref&nbsp;refs/remotes&nbsp;|&nbsp;cut&nbsp;-d&nbsp;/&nbsp;-f&nbsp;3-&nbsp;|&nbsp;grep&nbsp;-v&nbsp;@&nbsp;|&nbsp;while&nbsp;read&nbsp;branchname;&nbsp;do&nbsp;git&nbsp;branch&nbsp;&quot;$branchname&quot;&nbsp;&quot;refs/remotes/$branchname&quot;;&nbsp;git&nbsp;branch&nbsp;-r&nbsp;-d&nbsp;&quot;$branchname&quot;;&nbsp;done1</pre><p><img title="" alt="这里写图片描述" src="https://img3.mukewang.com/5b03a7020001d10509510271.jpg"/></p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a7020001fc0518980818.jpg"/></p><h1><a name="t6"></a>第三步、添加远程git服务器地址</h1><h2><a name="t7"></a>1、添加远程git remote 地址</h2><p>在本地的仓库中，增加远程git remote 地址：</p><pre name="code">git&nbsp;remote&nbsp;add&nbsp;origin&nbsp;git@172.28.10.23:AndroidWatch/NetEaseCloudMusic.git1</pre><h2><a name="t8"></a>2、配置git 的 username 和 email</h2><pre name="code">git&nbsp;config&nbsp;--global&nbsp;user.name&nbsp;ouyangpeng
git&nbsp;config&nbsp;--global&nbsp;user.email&nbsp;ouyangpeng@oaserver.dw.gdbbk.com123</pre><p>下面是配置好的内容</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a704000141c008440162.jpg"/></p><h2><a name="t9"></a>3、执行<em>* git push origin –all*</em> 命令</h2><p>然后执行<em>* git push origin –all*</em> 命令，推送到远程Gitlab仓库</p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a70400013dc808920265.jpg"/></p><pre name="code">$&nbsp;git&nbsp;push&nbsp;origin&nbsp;--all
Counting&nbsp;objects:&nbsp;7210,&nbsp;done.
Delta&nbsp;compression&nbsp;using&nbsp;up&nbsp;to&nbsp;8&nbsp;threads.
Compressing&nbsp;objects:&nbsp;100%&nbsp;(5548/5548),&nbsp;done.
Writing&nbsp;objects:&nbsp;100%&nbsp;(7210/7210),&nbsp;16.08&nbsp;MiB&nbsp;|&nbsp;9.68&nbsp;MiB/s,&nbsp;done.
Total&nbsp;7210&nbsp;(delta&nbsp;3588),&nbsp;reused&nbsp;0&nbsp;(delta&nbsp;0)
remote:&nbsp;Resolving&nbsp;deltas:&nbsp;100%&nbsp;(3588/3588),&nbsp;done.
remote:&nbsp;GitLab:&nbsp;You&nbsp;are&nbsp;not&nbsp;allowed&nbsp;to&nbsp;push&nbsp;code&nbsp;to&nbsp;protected&nbsp;branches&nbsp;on&nbsp;this&nbsp;p&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;roject.To&nbsp;172.28.10.23:AndroidWatch/NetEaseCloudMusic.git
&nbsp;!&nbsp;[remote&nbsp;rejected]&nbsp;master&nbsp;-&gt;&nbsp;master&nbsp;(pre-receive&nbsp;hook&nbsp;declined)error:&nbsp;failed&nbsp;to&nbsp;push&nbsp;some&nbsp;refs&nbsp;to&nbsp;&#39;git@172.28.10.23:AndroidWatch/NetEaseCloudMu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sic.git&#39;123456789101112</pre><p>如上图所示，有可能push失败，是因为master分支没有给我授予权限push。 <br/> 因为我是管理员，所以我在该项目中，设置我为master，如下图所示：</p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a70400013c5308740538.jpg"/></p><p>将我设置我为master</p><p><img title="" alt="这里写图片描述" src="https://img.mukewang.com/5b03a7040001d47e10570086.jpg"/></p><p>然后就提交成功了。</p><p><img title="" alt="这里写图片描述" src="https://img.mukewang.com/5b03a98b0001ed8e10170252.jpg"/></p><pre name="code">DH207891+OuyangPeng@DH207891&nbsp;MINGW32&nbsp;/d/git&nbsp;test/AndroidWatch_NetEaseCloudMusic/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NetEaseCloudeMusic&nbsp;(master)
$&nbsp;git&nbsp;push&nbsp;-u&nbsp;origin&nbsp;--all
Counting&nbsp;objects:&nbsp;7210,&nbsp;done.
Delta&nbsp;compression&nbsp;using&nbsp;up&nbsp;to&nbsp;8&nbsp;threads.
Compressing&nbsp;objects:&nbsp;100%&nbsp;(5548/5548),&nbsp;done.
Writing&nbsp;objects:&nbsp;100%&nbsp;(7210/7210),&nbsp;16.08&nbsp;MiB&nbsp;|&nbsp;9.87&nbsp;MiB/s,&nbsp;done.
Total&nbsp;7210&nbsp;(delta&nbsp;3586),&nbsp;reused&nbsp;0&nbsp;(delta&nbsp;0)
remote:&nbsp;Resolving&nbsp;deltas:&nbsp;100%&nbsp;(3586/3586),&nbsp;done.
To&nbsp;172.28.10.23:AndroidWatch/NetEaseCloudMusic.git
&nbsp;*&nbsp;[new&nbsp;branch]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;master&nbsp;-&gt;&nbsp;master
Branch&nbsp;master&nbsp;set&nbsp;up&nbsp;to&nbsp;track&nbsp;remote&nbsp;branch&nbsp;master&nbsp;from&nbsp;origin.123456789101112</pre><h2><a name="t10"></a>4、执行 &nbsp;<em>git push -u origin –tags</em> 命令</h2><p>如果你的项目有Tags的话，上面最后部分<strong>git push -u origin –all</strong>，运行之后并不能如它所说，分支和标签(branches and tags)都在gitlab服务器中。</p><p>实际上，只提交了branches到gitlab上面，并没有提交tags，当然，很简单，你可以使用<strong>git push –h</strong>查看下帮助，就会发现，你应该知道怎么做了，使用<strong>git push –tags</strong>就可以了。</p><p>执行下面命令即可，由于网易并没有建立tags，所以没有任何代码push到gitlab.</p><pre name="code">DH207891+OuyangPeng@DH207891&nbsp;MINGW32&nbsp;/d/git&nbsp;test/AndroidWatch_NetEaseCloudMusic/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NetEaseCloudeMusic&nbsp;(master)
$&nbsp;git&nbsp;push&nbsp;-u&nbsp;origin&nbsp;--tagsEverything&nbsp;up-to-date1234</pre><p><img title="" alt="这里写图片描述" src="https://img3.mukewang.com/5b03a98c00018fbb10010133.jpg"/></p><h1><a name="t11"></a>第四步、查看gitlab上面是否正常提交</h1><p>master分支</p><p><img title="" alt="这里写图片描述" src="https://img2.mukewang.com/5b03a98c0001a91d13720659.jpg"/></p><p>点击master下拉框，切换分支</p><p><img title="" alt="这里写图片描述" src="https://img4.mukewang.com/5b03a98d0001484109730423.jpg"/></p><p>切换到 APP_NetEaseCloudMusic_SearchSongs 分支 <br/><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a98e0001a2c914680361.jpg"/></p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a98e0001c6ac14110842.jpg"/></p><p>查看commit 提交记录</p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a98f0001fd5614590888.jpg"/></p><p><img title="" alt="这里写图片描述" src="https://img1.mukewang.com/5b03a99000019e0314170765.jpg"/></p><p><img title="" alt="这里写图片描述" src="https://img3.mukewang.com/5b03a9920001b6cd13960937.jpg"/></p><p>切换到 Branch 选项 可以查看所有的 Branch</p><p><img title="" alt="这里写图片描述" src="https://img.mukewang.com/5b03a9920001ed6315910658.jpg"/></p><h1><a name="t12"></a>第四步、定期同步SVN后续提交的代码到Git仓库</h1><p>第一步，通过<code>git show-ref</code>命令查看分支情况</p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/2018051911101862?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><p>其中 refs/remotes/git-svn 分支就是刚才用git svn clone 之后的远程分支，可以在本地建立一个分支来同步svn后续的提交记录</p><p>第二步，建立本地分支 <strong>local-git-svn</strong> 对应远程分支<strong>git-svn</strong></p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20180519111045442?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><pre name="code">[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;show-ref9caa27cc211162aeed6e944144f4c676d2f1dfe1&nbsp;refs/heads/develop9caa27cc211162aeed6e944144f4c676d2f1dfe1&nbsp;refs/heads/master
0ba94e3383d6f478844b1e674465fbc6ae0277e3&nbsp;refs/remotes/git-svn9caa27cc211162aeed6e944144f4c676d2f1dfe1&nbsp;refs/remotes/origin/develop62333dcb3beeb73e28538f815abfdfe791b88c00&nbsp;refs/remotes/origin/local-git-svn9caa27cc211162aeed6e944144f4c676d2f1dfe1&nbsp;refs/remotes/origin/master
[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;checkout&nbsp;-b&nbsp;local-git-svn&nbsp;remotes/git-svn切换到一个新分支&nbsp;&#39;local-git-svn&#39;[root@xtgl207940&nbsp;trunk]#1234567891011</pre><p>第三步，同步svn最新的提交记录 <br/> 使用 <code>git svn fetch</code> 命令同步SVN最新的提交记录，然后可以通过 <code>git log</code>命令查看git的提交记录对应的svn记录相同。</p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20180519111112524?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><pre name="code">[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;svn&nbsp;fetch&nbsp;[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;log123</pre><p>第四步，切换分支到<strong>master分支</strong>，然后merge刚才的local-git-svn分支</p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20180519111136777?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><pre name="code">[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;checkout&nbsp;master切换到分支&nbsp;&#39;master&#39;您的分支与上游分支&nbsp;&#39;origin/master&#39;&nbsp;一致。
[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;branch&nbsp;
&nbsp;&nbsp;develop&nbsp;&nbsp;local-git-svn
*&nbsp;master
[root@xtgl207940&nbsp;trunk]#&nbsp;git&nbsp;merge&nbsp;local-git-svn&nbsp;更新&nbsp;9caa27c..0ba94e3
Fast-forward
&nbsp;watch/src/main/java/com/xtc/watch/view/contact/activity/ContactPhoneActivity.java&nbsp;|&nbsp;2&nbsp;+-
&nbsp;watch/src/main/res/values/strings.xml&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;2&nbsp;+-&nbsp;2&nbsp;files&nbsp;changed,&nbsp;2&nbsp;insertions(+),&nbsp;2&nbsp;deletions(-)
[root@xtgl207940&nbsp;trunk]#123456789101112131415</pre><p>第五步，提交<strong>master分支</strong>到GitLab远程仓库</p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20180519111158812?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><p>第六步，查看gitlab上的代码</p><p><img title="" alt="这里写图片描述" src="https://img-blog.csdn.net/20180519111244677?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxNDQ2MjgyNDEy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"/></p><hr/><p>终于将之前写好的指导文件迁移到了CSDN博客上，这份指导文件已经完成了它的历史使命，因为我们团队内部所有代码都已经成功迁移到了GitLab上，SVN已经成为过去式，但是这份文件可以分享出来给有需要的人。</p><blockquote><p>作者：欧阳鹏 欢迎转载，与人分享是进步的源泉！ &nbsp;<br/><a title="原文出处" href="https://blog.csdn.net/ouyang_peng/article/details/80372805" target="_self">原文出处</a></p></blockquote><p><br/></p>
		<div class="article-more-wrap hide js-article-more">
			<i class="imwap-zhankai js-more-article"></i>
			<span class="appload-open js-appload-open">打开App，阅读手记</span>
		</div>
	</div>
	<div class="article-label">
		<dl class="clearfix">
			<dt>相关标签</dt>
			
			<dd><a href="javascript:void(0)" class="js-tagarticle" data-id="20" data-name="Linux">Linux</a></dd>
			
		</dl>
	</div>
	<div class="article-upvote">
		
		<a href="javascript:void(0);" class="article-upvote-btn imwap-thumb_up active js-article-upvote"></a>
		
		<dl class="article-upvote-list js-upvote-list">
		
			<dd class="article-upvote-number"><span class="js-upvote-number">0</span>人推荐</dd>
		</dl>
	</div>
</div>
<div class="app-box shadow">
	<img class="logo" src="/static/wap/static/common/img/logo-small@2x.png" />随时随地看视频<a id="js-appload" href="javascript:void(0);" class="r">慕课网APP</a>
</div>


	<div class="course-box">
		<p class="tit">相关课程</p>
		<div class="course-list">
			
			<a href="http://coding.imooc.com/class/96.html" class="list-item">
				<img src="//img4.mukewang.com/szimg/58f57d200001461105400300-360-202.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name">从0开始 独立完成企业级Java电商网站开发(服务端)</p>
					<p class="item-info">
						
							<span>¥348</span>
							
						<span class="item-level">中级</span>
						<span class="item-number"><i class="imwap-peaple"></i>7041</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
			<a href="http://coding.imooc.com/class/154.html" class="list-item">
				<img src="//img1.mukewang.com/szimg/59fc347400016ad405400300-360-202.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name">快速上手Linux 玩转典型应用</p>
					<p class="item-info">
						
							<span>¥199</span>
							
						<span class="item-level">中级</span>
						<span class="item-number"><i class="imwap-peaple"></i>1450</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
			<a href="http://coding.imooc.com/class/281.html" class="list-item">
				<img src="//img4.mukewang.com/szimg/5bbc82dd000134e012000676-360-202.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name">Go语言开发分布式任务调度 轻松搞定高性能Crontab </p>
					<p class="item-info">
						
							<span>¥299</span>
							
						<span class="item-level">中级</span>
						<span class="item-number"><i class="imwap-peaple"></i>418</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
			<a href="http://www.imooc.com/learn/175" class="list-item">
				<img src="//img1.mukewang.com/57035f110001a57906000338.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name"> Linux达人养成计划 I</p>
					<p class="item-info">
						
							<span>免费</span>
						
						<span class="item-level">入门</span>
						<span class="item-number"><i class="imwap-peaple"></i>348643</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
			<a href="http://www.imooc.com/learn/111" class="list-item">
				<img src="//img1.mukewang.com/57035f580001a91806000338.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name">Linux 达人养成计划 II</p>
					<p class="item-info">
						
							<span>免费</span>
						
						<span class="item-level">入门</span>
						<span class="item-number"><i class="imwap-peaple"></i>112194</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
			<a href="http://class.imooc.com/sc/31" class="list-item">
				<img src="//climg.mukewang.com/59cb5f4300014a4906000338-228-128.jpg" class="course-pic">
				<div class="item-right">
					<p class="item-name">Java Web基础入门</p>
					<p class="item-info">
						
							<span>¥468</span>
							
						<span class="item-level"></span>
						<span class="item-number"><i class="imwap-peaple"></i>716</span>
					</p>
					<div class="line-row"></div>
				</div>
			</a>
			
		</div>
	</div>


<div class="read-box">
	<p class="tit">相关阅读</p>
	<dl class="read-article-list">
	
		<dd><a href="/article/details?article_id=24506">Linux中常用的命令都是哪些单词的缩写？</a></dd>
	
		<dd><a href="/article/details?article_id=25645">如何解决 “mount.nfs: Stale file handle”错误</a></dd>
	
		<dd><a href="/article/details?article_id=25839">如何记录 Linux 的系统运行时间的统计信息</a></dd>
	
		<dd><a href="/article/details?article_id=26859">在 CentOS/RHEL 上查找 yum 安裝的软件的位置</a></dd>
	
		<dd><a href="/article/details?article_id=27621">在 Linux 命令行上使用日历</a></dd>
	
	</dl>
</div>


            </div>
        </div>
        
        
        
        
        
<script type="text/javascript">
var article_id = 30301;
window.onload = function() {
	zhuge.track('ContentPage', {
		'Category': '手记',
		'Name': '【git学习】SVN项目迁移到Git操作指南',
		'CID': '30301',
		'Direction': '',
		'Price': 0,
	});
}
</script>



        
            <script type="text/javascript">
                var shareData = { 
                    title:  "【git学习】SVN项目迁移到Git操作指南@慕课网 原创_慕课网_手记",
                    desc: "慕课网",
                    imgUrl: 'https://moco.imooc.com/static/base/images/logo-share.png',
                    otherImgUrl: '',
                    text: '我正在参加@慕课网的课程，很不错哦！快来一起学习吧！',
                    // url: 'https://www.imooc.com' + window.location.pathname + window.location.search
                    url: window.location.href,
                    link: window.location.href
                }
            </script>
            
            <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
            <!-- 微信分享 -->
            <script type="text/javascript">
                wx.config({
                    debug: false,
                    appId: 'wxe02b60dcb9fbd01f',
                    timestamp: '1555256051',
                    nonceStr: '(@*IMOOC+==+AK47%#)',
                    signature: 'b5432573aa87db28d18ae6844554bee89fcf054f',
                    jsApiList: 'onMenuShareTimeline,onMenuShareAppMessage,onMenuShareQQ,onMenuShareWeibo'.split(',')
                });
                wx.ready(function() {
                    wx.onMenuShareTimeline(shareData);
                    wx.onMenuShareAppMessage(shareData);
                    wx.onMenuShareQQ(shareData);
                    wx.onMenuShareWeibo(shareData); 
                });
            </script>
            
        
        <div style="display:none;">
            <!-- 百度统计 -->
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?c92536284537e1806a07ef3e6873f2b3";
              var s = document.getElementsByTagName("script")[0];
              s.parentNode.insertBefore(hm, s);
            })();
            </script>

            <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
            </script>
            <!-- 友盟统计 -->
            <script src="https://s95.cnzz.com/z_stat.php?id=1261728817&web_id=1261728817" language="JavaScript"></script>
        </div>
        
    <script type="text/javascript" src="/static/wap/static/lib/zhugeio/init_92fa69b.js"></script><script type="text/javascript" src="/static/wap/static/common/js/jquery-2.1.0.min_ac9f840.js"></script><script type="text/javascript" src="/static/wap/static/common/js/common_62b1384.js"></script><script type="text/javascript" src="/static/wap/static/lib/pretty/prettify_c723a70.js"></script><script type="text/javascript" src="/static/wap/static/common/js/msg_bed8d10.js"></script><script type="text/javascript" src="/static/wap/static/js/article/details_06ef648.js"></script><script type="text/javascript" src="/static/wap/static/js/course/advertisementReport_6e58a98.js"></script></body>
</html>
