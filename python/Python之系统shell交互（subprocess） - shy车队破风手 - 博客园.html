<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="origin">
    <title>Python之系统shell交互（subprocess） - shy车队破风手 - 博客园</title>
<meta property="og:description" content="我们几乎可以在任何操作系统上通过命令行指令与操作系统进行交互，比如Linux平台下的shell。那么我们如何通过Python来完成这些命令行指令的执行呢？另外，我们应该知道的是命令行指令的执行通常有两">
    <link type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-LoveIsIntheAir.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-LoveIsIntheAir-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/domestique/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/domestique/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/domestique/wlwmanifest.xml">
    <script src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/amp4ads-host-v0.js"></script><script src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_rendering_2019032501.js"></script><script async="" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/analytics.js"></script><script type="text/javascript" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/encoder.js"></script><script src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/jquery-2.js"></script>
    <script>var currentBlogId=339538;var currentBlogApp='domestique',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.js" type="text/javascript"></script>
<link rel="preload" href="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js" as="script"><script type="text/javascript" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js"></script><script src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_2019032501.js" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-32/html/container.html"></head>
<body>
<a name="top"></a>


<!--done-->
<center>
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/domestique/"><img id="blogLogo" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/logo.gif" alt=""></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/domestique/">关灯吃面</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
	<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
	<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/domestique/">首页</a></li>
	<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
	<li><a id="blog_nav_contact" accesskey="9" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B">联系</a></li>
	<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
	<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/domestique/rss">订阅</a>
	<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/domestique/rss"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/xml.gif" alt="订阅"></a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<!--done-->
随笔- 151&nbsp;
文章- 0&nbsp;
评论- 0&nbsp;
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div class="clear"></div>
	<div id="topicList">
		
        <div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/domestique/p/8056269.html">Python之系统shell交互（subprocess）</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><ol>
<li>os与commands模块</li>
<li>subprocess模块</li>
<li>subprocess.Popen类</li>
<li>总结</li>
</ol>
<p>我们几乎可以在任何操作系统上通过命令行指令与操作系统进行交互，比如Linux平台下的shell。那么我们如何通过Python来完成这些命令行指令的执行呢？另外，我们应该知道的是命令行指令的执行通常有两个我们比较关注的结果：</p>
<ol>
<li>命令执行的状态码--表示命令执行是否成功</li>
<li>命令执行的输出结果--命令执行成功后的输出</li>
</ol>
<p>早期的Python版本中，我们主要是通过os.system()、os.popen().read()等函数来执行命令行指令的，另外还有一个很少使用的commands模块。但是<span style="color: #993300;">从Python 2.4开始官方文档中建议使用的是subprocess模块</span>，所以os模块和commands模块的相关函数在这里只提供一个简单的使用示例，我们重要要介绍的是subprocess模块。</p>
<h2 id="一os与commands模块">一、os与commands模块</h2>
<p style="margin-left: 30px;">Python中提供了以下几个函数来帮助我们完成命令行指令的执行：</p>
<p style="margin-left: 30px;">os.system(command)&nbsp;&nbsp;<span style="color: #800000;">返回命令执行状态码，而将命令执行结果输出到屏幕</span></p>
<p style="margin-left: 30px;">os.popen(command).read()&nbsp; <span style="color: #800000;">可以获取命令执行结果，但是无法获取命令执行状态码</span></p>
<p style="margin-left: 30px;">commands.getstatuoutput(command)&nbsp; 返回一个元组(命令执行状态码, 命令执行结果)</p>
<div class="cnblogs_code" style="margin-left: 30px;">
<pre><span style="color: #000000;">说明：
os.popen(command)函数得到的是一个文件对象，因此除了read()方法外还支持write()等方法，具体要根据command来定；
<span style="color: #993300;">commands模块只存在于Python </span></span><span style="color: #993300;">2.7中，且不支持windows平台，因此commands模块很少被使用。</span>另外，commands模块实际上也是通过对os.popen()的封装来完成的。</pre>
</div>
<h3 id="os.system函数实例" style="margin-left: 30px;">1. os.system()函数实例</h3>
<div class="cnblogs_code" style="margin-left: 30px;" onclick="cnblogs_code_show('3a18677b-934c-468c-bb01-917e027c1f7f')"><img id="code_img_closed_3a18677b-934c-468c-bb01-917e027c1f7f" class="code_img_closed" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_3a18677b-934c-468c-bb01-917e027c1f7f" class="code_img_opened" style="" onclick="cnblogs_code_hide('3a18677b-934c-468c-bb01-917e027c1f7f',event)" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_3a18677b-934c-468c-bb01-917e027c1f7f" class="cnblogs_code_hide" style="margin-left: 30px; display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt;<span style="color: #000000;"> import os
</span>&gt;&gt;&gt;
&gt;&gt;&gt; retcode = os.system(<span style="color: #800000;">'</span><span style="color: #800000;">dir</span><span style="color: #800000;">'</span><span style="color: #000000;">)
 驱动器 C 中的卷没有标签。
 卷的序列号是 4C32</span>-<span style="color: #000000;">B292

 C:\Users\wader\PycharmProjects\LearnPython 的目录

</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">03</span>/<span style="color: #800080;">21</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">15</span>    &lt;DIR&gt;<span style="color: #000000;">          .
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">03</span>/<span style="color: #800080;">21</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">15</span>    &lt;DIR&gt;<span style="color: #000000;">          ..
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">29</span>  <span style="color: #800080;">18</span>:<span style="color: #800080;">04</span>    &lt;DIR&gt;<span style="color: #000000;">          .idea
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">19</span>    &lt;DIR&gt;<span style="color: #000000;">          blog
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">42</span>    &lt;DIR&gt;<span style="color: #000000;">          day01
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">09</span>  <span style="color: #800080;">22</span>:<span style="color: #800080;">07</span>    &lt;DIR&gt;<span style="color: #000000;">          day02
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">01</span>/<span style="color: #800080;">04</span>  <span style="color: #800080;">09</span>:<span style="color: #800080;">14</span>    &lt;DIR&gt;<span style="color: #000000;">          day03
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">19</span>  <span style="color: #800080;">16</span>:<span style="color: #800080;">11</span>    &lt;DIR&gt;<span style="color: #000000;">          day04
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">29</span>  <span style="color: #800080;">14</span>:<span style="color: #800080;">44</span>    &lt;DIR&gt;<span style="color: #000000;">          day05
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">14</span>:<span style="color: #800080;">45</span>    &lt;DIR&gt;<span style="color: #000000;">          day06
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">17</span>:<span style="color: #800080;">13</span>    &lt;DIR&gt;<span style="color: #000000;">          exam01
               </span><span style="color: #800080;">0</span> 个文件              <span style="color: #800080;">0</span><span style="color: #000000;"> 字节
              </span><span style="color: #800080;">11</span> 个目录  <span style="color: #800080;">6</span>,<span style="color: #800080;">659</span>,<span style="color: #800080;">977</span>,<span style="color: #800080;">216</span><span style="color: #000000;"> 可用字节
</span>&gt;&gt;&gt;<span style="color: #000000;"> retcode
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h3 id="os.popen函数实例" style="margin-left: 30px;">2. os.popen()函数实例</h3>
<div class="cnblogs_code" style="margin-left: 30px;" onclick="cnblogs_code_show('7db782b5-01a5-42b7-a8d2-ef8d8730a2eb')"><img id="code_img_closed_7db782b5-01a5-42b7-a8d2-ef8d8730a2eb" class="code_img_closed" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_7db782b5-01a5-42b7-a8d2-ef8d8730a2eb" class="code_img_opened" style="" onclick="cnblogs_code_hide('7db782b5-01a5-42b7-a8d2-ef8d8730a2eb',event)" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_7db782b5-01a5-42b7-a8d2-ef8d8730a2eb" class="cnblogs_code_hide" style="margin-left: 30px; display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt;<span style="color: #000000;"> import os
</span>&gt;&gt;&gt;
&gt;&gt;&gt; ret = os.popen(<span style="color: #800000;">'</span><span style="color: #800000;">dir</span><span style="color: #800000;">'</span><span style="color: #000000;">).read()
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(ret)
 驱动器 C 中的卷没有标签。
 卷的序列号是 4C32</span>-<span style="color: #000000;">B292

 C:\Users\wader\PycharmProjects\LearnPython 的目录

</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">03</span>/<span style="color: #800080;">21</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">15</span>    &lt;DIR&gt;<span style="color: #000000;">          .
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">03</span>/<span style="color: #800080;">21</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">15</span>    &lt;DIR&gt;<span style="color: #000000;">          ..
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">29</span>  <span style="color: #800080;">18</span>:<span style="color: #800080;">04</span>    &lt;DIR&gt;<span style="color: #000000;">          .idea
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">19</span>    &lt;DIR&gt;<span style="color: #000000;">          blog
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">11</span>:<span style="color: #800080;">42</span>    &lt;DIR&gt;<span style="color: #000000;">          day01
</span><span style="color: #800080;">2016</span>/<span style="color: #800080;">12</span>/<span style="color: #800080;">09</span>  <span style="color: #800080;">22</span>:<span style="color: #800080;">07</span>    &lt;DIR&gt;<span style="color: #000000;">          day02
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">01</span>/<span style="color: #800080;">04</span>  <span style="color: #800080;">09</span>:<span style="color: #800080;">14</span>    &lt;DIR&gt;<span style="color: #000000;">          day03
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">19</span>  <span style="color: #800080;">16</span>:<span style="color: #800080;">11</span>    &lt;DIR&gt;<span style="color: #000000;">          day04
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">29</span>  <span style="color: #800080;">14</span>:<span style="color: #800080;">44</span>    &lt;DIR&gt;<span style="color: #000000;">          day05
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">14</span>:<span style="color: #800080;">45</span>    &lt;DIR&gt;<span style="color: #000000;">          day06
</span><span style="color: #800080;">2017</span>/<span style="color: #800080;">07</span>/<span style="color: #800080;">06</span>  <span style="color: #800080;">17</span>:<span style="color: #800080;">13</span>    &lt;DIR&gt;<span style="color: #000000;">          exam01
               </span><span style="color: #800080;">0</span> 个文件              <span style="color: #800080;">0</span><span style="color: #000000;"> 字节
              </span><span style="color: #800080;">11</span> 个目录  <span style="color: #800080;">6</span>,<span style="color: #800080;">664</span>,<span style="color: #800080;">052</span>,<span style="color: #800080;">736</span><span style="color: #000000;"> 可用字节

</span>&gt;&gt;&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h3 id="commands.getstatusoutput函数实例" style="margin-left: 30px;">3. commands.getstatusoutput()函数实例</h3>
<p style="margin-left: 30px;">需要注意的是commands模块不支持windows平台，因此该实例是在Linux平台下执行的</p>
<div class="cnblogs_code" style="margin-left: 30px;" onclick="cnblogs_code_show('52365c6a-f9ab-4c8e-8475-42ec183aee5e')"><img id="code_img_closed_52365c6a-f9ab-4c8e-8475-42ec183aee5e" class="code_img_closed" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_52365c6a-f9ab-4c8e-8475-42ec183aee5e" class="code_img_opened" style="" onclick="cnblogs_code_hide('52365c6a-f9ab-4c8e-8475-42ec183aee5e',event)" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_52365c6a-f9ab-4c8e-8475-42ec183aee5e" class="cnblogs_code_hide" style="margin-left: 30px; display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt;<span style="color: #000000;"> import commands
</span>&gt;&gt;&gt; retcode, ret = commands.getstatusoutput(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt;<span style="color: #000000;"> retcode
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt;<span style="color: #000000;"> print(ret)
total </span><span style="color: #800080;">68</span>
-rw-r--r-- <span style="color: #800080;">1</span> root root <span style="color: #800080;">20124</span> Jul <span style="color: #800080;">11</span>  <span style="color: #800080;">2016</span> cmdline-jmxclient-<span style="color: #800080;">0.10</span>.<span style="color: #800080;">3</span><span style="color: #000000;">.jar
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root   <span style="color: #800080;">424</span> Aug <span style="color: #800080;">22</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> dhparam.pem
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">2576</span> Jul <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span> FtpMan.<span style="color: #0000ff;">class</span>
-rw-r--r-- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">1302</span> Aug <span style="color: #800080;">22</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> gitlab.crt
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">1054</span> Aug <span style="color: #800080;">22</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> gitlab.csr
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">1675</span> Aug <span style="color: #800080;">22</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> gitlab.key
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root  <span style="color: #800080;">9329</span> Jun <span style="color: #800080;">24</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> resolv.txt
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root   <span style="color: #800080;">594</span> Mar  <span style="color: #800080;">7</span> <span style="color: #800080;">08</span>:<span style="color: #800080;">14</span><span style="color: #000000;"> test.json
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root   <span style="color: #800080;">162</span> Jun <span style="color: #800080;">28</span> <span style="color: #800080;">10</span>:<span style="color: #800080;">39</span><span style="color: #000000;"> test.php
</span>-rw-r--r-- <span style="color: #800080;">1</span> root root   <span style="color: #800080;">760</span> Jun <span style="color: #800080;">24</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> test.sh
</span>-r-x------ <span style="color: #800080;">1</span> root root     <span style="color: #800080;">0</span> Feb  <span style="color: #800080;">6</span> <span style="color: #800080;">08</span>:<span style="color: #800080;">21</span><span style="color: #000000;"> test.text
drwxr</span>-xr-x <span style="color: #800080;">2</span> root root  <span style="color: #800080;">4096</span> Feb  <span style="color: #800080;">7</span> <span style="color: #800080;">16</span>:<span style="color: #800080;">43</span><span style="color: #000000;"> test.txt
</span>&gt;&gt;&gt; </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p style="margin-left: 30px;">通过查看commands模块提供的属性可知，它也提供了单独获取命令执行状态码和执行结果的函数，如下所示：</p>
<div class="cnblogs_code" style="margin-left: 30px;">
<pre>&gt;&gt;&gt;<span style="color: #000000;"> dir(commands)
[</span><span style="color: #800000;">'</span><span style="color: #800000;">__all__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__builtins__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__doc__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__file__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__name__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">__package__</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">getoutput</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">getstatus</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">getstatusoutput</span><span style="color: #800000;">'</span>,<br> <span style="color: #800000;">'</span><span style="color: #800000;">mk2arg</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">mkarg</span><span style="color: #800000;">'</span>]</pre>
</div>
<h2 id="二subprocess模块">二、subprocess模块</h2>
<hr>
<p>subprocess是Python 2.4中新增的一个模块，它允许你<span style="color: #ff0000;">生成新的进程，连接到它们的 input/output/error 管道，并获取它们的返回（状态）码</span>。这个模块的目的在于替换几个旧的模块和方法，如：</p>
<ul>
<li>os.system</li>
<li>os.spawn*</li>
</ul>
<h3 id="subprocess模块中的常用函数">1. subprocess模块中的常用函数</h3>
<table>
<thead>
<tr class="header"><th>
<p><span style="font-size: 13px;">函数</span></p>
</th><th>
<p><span style="font-size: 13px;">描述</span></p>
</th></tr>
</thead>
<tbody>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">subprocess.run()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">Python 3.5中新增的函数。<span style="color: #800000;">执行指定的命令，等待命令执行完成后返回一个包含执行结果的CompletedProcess类的实例。</span></span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">subprocess.call()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">执行指定的命令，<span style="color: #800000;">返回命令执行状态</span>，其功能类似于os.system(cmd)。</span></p>
</td>
</tr>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">subprocess.check_call()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">Python 2.5中新增的函数。<span style="color: #800000;"> 执行指定的命令，如果执行成功则返回状态码</span>，否则抛出异常。</span></p>
<p><span style="font-size: 13px;">其功能等价于subprocess.run(..., check=True)。</span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">subprocess.check_output()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">Python 2.7中新增的的函数。<span style="color: #800000;">执行指定的命令，如果执行状态码为0则返回命令执行结果，否则抛出异常</span>。</span></p>
</td>
</tr>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">subprocess.getoutput(cmd)</span></p>
</td>
<td>
<p><span style="font-size: 13px;"><span style="color: #800000;">接收字符串格式的命令，执行命令并返回执行结果</span>，其功能类似于os.popen(cmd).read()和commands.getoutput(cmd)。</span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">subprocess.getstatusoutput(cmd)</span></p>
</td>
<td>
<p><span style="font-size: 13px;"><span style="color: #800000;">执行cmd命令，返回一个元组(命令执行状态, 命令执行结果输出)，</span>其功能类似于commands.getstatusoutput()。</span></p>
</td>
</tr>
</tbody>
</table>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">说明：

<span style="color: #993300;">在Python </span></span><span style="color: #993300;">3</span><span style="color: #000000;"><span style="color: #993300;">.5之后的版本中，官方文档中提倡通过subprocess.run()函数替代其他函数来使用subproccess模块的功能；
在Python </span></span><span style="color: #993300;">3</span><span style="color: #000000;"><span style="color: #993300;">.5之前的版本中，我们可以通过subprocess.call()，subprocess.getoutput()等上面列出的其他函数来使用subprocess模块的功能；
</span>subprocess.run()、subprocess.call()、subprocess.check_call()和subprocess.check_output()都是通过对subprocess.Popen的封装来实现的高级函数，<br>因此如果我们需要更复杂功能时，可以通过subprocess.Popen来完成。
subprocess.getoutput()和subprocess.getstatusoutput()函数是来自Python </span><span style="color: #800080;">2</span>.x的commands模块的两个遗留函数。它们隐式的调用系统shell，并且不保证其<br>他函数所具有的安全性和异常处理的一致性。另外，它们从Python <span style="color: #800080;">3.3</span>.4开始才支持Windows平台。</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h3 id="上面各函数的定义及参数说明">2. 上面各函数的定义及参数说明</h3>
<h4 id="函数参数列表">函数参数列表：</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, shell=False, timeout=None, check=False, universal_newlines=<span style="color: #000000;">False)

subprocess.call(args, </span>*, stdin=None, stdout=None, stderr=None, shell=False, timeout=<span style="color: #000000;">None)

subprocess.check_call(args, </span>*, stdin=None, stdout=None, stderr=None, shell=False, timeout=<span style="color: #000000;">None)

subprocess.check_output(args, </span>*, stdin=None, stderr=None, shell=False, universal_newlines=False, timeout=<span style="color: #000000;">None)

subprocess.getstatusoutput(cmd)

subprocess.getoutput(cmd)</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4 id="参数说明">参数说明：</h4>
<ul>
<li><strong><em>args：</em></strong><span class="Apple-converted-space">&nbsp;要执行的shell命令，默认应该是一个字符串序列，如['df', '-Th']或('df', '-Th')，也可以是一个字符串，如'df -Th'，但是此时需要把shell参数的值置为True。</span></li>
<li><strong><em>shell：</em></strong><span class="Apple-converted-space">&nbsp;
如果shell为True，那么指定的命令将通过shell执行。如果我们需要访问某些shell的特性，如管道、文件名通配符、环境变量扩展功能，这将
是非常有用的。当然，python本身也提供了许多类似shell的特性的实现，如glob、fnmatch、os.walk()、
os.path.expandvars()、os.expanduser()和shutil等。</span><span class="Apple-converted-space">　　</span></li>
</ul>
<div class="cnblogs_code" style="margin-left: 30px;" onclick="cnblogs_code_show('27bde8f9-5489-4ef8-bc3e-dfa48e7c0227')"><img id="code_img_closed_27bde8f9-5489-4ef8-bc3e-dfa48e7c0227" class="code_img_closed" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ContractedBlock.gif" alt=""><img id="code_img_opened_27bde8f9-5489-4ef8-bc3e-dfa48e7c0227" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('27bde8f9-5489-4ef8-bc3e-dfa48e7c0227',event)" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_27bde8f9-5489-4ef8-bc3e-dfa48e7c0227" class="cnblogs_code_hide">
<pre>shell=True参数会让subprocess.call接受字符串类型的变量作为命令，并调用shell去执行这个字符串，当shell=<span style="color: #000000;">False是，subprocess.call只接受数组变量作为命令，并将数组的第一个元素作为命令，剩下的全部作为该命令的参数。

举个例子来说明:
</span><span style="color: #0000ff;">from</span><span style="color: #000000;"> subprocess import call    
cmd </span>= <span style="color: #800000;">"</span><span style="color: #800000;">cat test.txt; rm test.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">    
call(cmd, shell</span>=<span style="color: #000000;">True)  


上述脚本中，shell</span>=<span style="color: #000000;">True的设置，最终效果是执行了两个命令
cat test.txt 和 rm test.txt


把shell</span>=<span style="color: #000000;">True 改为False，
</span><span style="color: #0000ff;">from</span><span style="color: #000000;"> subprocess import call 
cmd </span>= <span style="color: #800000;">"</span><span style="color: #800000;">cat test.txt; rm test.txt</span><span style="color: #800000;">"</span><span style="color: #000000;">    
cmd </span>=<span style="color: #000000;"> shlex(cmd)    
call(cmd, shell</span>=<span style="color: #000000;">False)  

则调用call的时候，只会执行cat的命令，且把 </span><span style="color: #800000;">"</span><span style="color: #800000;">test.txt;</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">rm</span><span style="color: #800000;">"</span> <span style="color: #800000;">"</span><span style="color: #800000;">test.txt</span><span style="color: #800000;">"</span><span style="color: #000000;"> 三个字符串当作cat的参数，所以并不是我们直观看到的好像有两个shell命令了。

也许你会说，shell</span>=True 不是很好吗，执行两个命令就是我期望的呀。但其实，这种做法是不安全的，因为多个命令用分号隔开，万一检查不够仔细，执行了危险的命令比如 rm -rf / 这种那后果会非常严重，而使用shell=<span style="color: #000000;">False就可以避免这种风险。

总体来说，看实际需要而定，官方的推荐是尽量不要设置shell</span>=True。</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<ul>
<li><strong><em>check：</em></strong><span class="Apple-converted-space">&nbsp;如果check参数的值是True，且执行命令的进程以非0状态码退出，则会抛出一个CalledProcessError的异常，且该异常对象会包含退出状态码、以及stdout和stderr(如果它们有被捕获的话)参数。</span></li>
<li><strong><em>stdout, stderr：</em></strong></li>
<li><span style="color: #993300;">run()函数默认不会捕获命令执行结果的正常输出和错误输出，如果我们向获取这些内容需要传递subprocess.PIPE，然后可以通过返回的CompletedProcess类实例的stdout和stderr属性或捕获相应的内容；</span></li>
<li>call()和check_call()函数返回的是命令执行的状态码，而不是CompletedProcess类实例，所以对于它们而言，stdout和stderr不适合赋值为subprocess.PIPE；</li>
<li>check_output()函数默认就会返回命令执行结果，所以不用设置stdout的值，如果我们希望在结果中捕获错误信息，可以执行stderr=subprocess.STDOUT。</li>
<li><strong><em>input：</em></strong><span class="Apple-converted-space">&nbsp;该参数是传递给Popen.communicate()，通常该参数的值必须是一个字节序列，如果universal_newlines=Ture则其值应该是一个字符串。</span></li>
<li><strong><em>universal_newlines：</em></strong><span class="Apple-converted-space">&nbsp;该参数影响的是输出与输出的数据格式，比如它的值默认为False，此时stdout和stderr的输出是字节序列；当该参数的值设置为True时，stdout和stderr的输出是字符串。</span></li>
</ul>
<h3 id="subprocess.completedprocess类介绍">3. subprocess.CompletedProcess类介绍</h3>
<p>需要说明的是，subprocess.run()函数是Python3.5中新增的一个高级函数，其返回值是一个
subprocess.CompletedPorcess类的实例，因此，subprocess.completedPorcess类也是Python 
3.5中才存在的。它表示的是一个已结束进程的状态信息，它所包含的属性如下：</p>
<ul>
<li><strong><em>args：</em></strong><span class="Apple-converted-space">&nbsp;用于加载该进程的参数，这可能是一个列表或一个字符串</span></li>
<li><strong><em>returncode：</em></strong><span class="Apple-converted-space">&nbsp;子进程的退出状态码。通常情况下，退出状态码为0则表示进程成功运行了；一个负值-N表示这个子进程被信号N终止了</span></li>
<li><strong><em>stdout：</em></strong><span class="Apple-converted-space">&nbsp;
从子进程捕获的stdout。这通常是一个字节序列，如果run()函数被调用时指定universal_newlines=True，则该属性值是一个
字符串。如果run()函数被调用时指定stderr=subprocess.STDOUT，那么stdout和stderr将会被整合到这一个属性中，
且stderr将会为None</span></li>
<li><strong><em>stderr：</em></strong><span class="Apple-converted-space">&nbsp;从子进程捕获的stderr。它的值与stdout一样，是一个字节序列或一个字符串。如果stderr灭有被捕获的话，它的值就为None</span></li>
<li><strong><em>check_returncode()：</em></strong><span class="Apple-converted-space">&nbsp;如果returncode是一个非0值，则该方法会抛出一个CalledProcessError异常。</span></li>
</ul>
<h3 id="实例">4. 实例</h3>
<h4 id="subprocess.run">subprocess.run()</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; subprocess.run([<span style="color: #800000;">"</span><span style="color: #800000;">ls</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">-l</span><span style="color: #800000;">"</span>])  # doesn<span style="color: #800000;">'</span><span style="color: #800000;">t capture output</span>
CompletedProcess(args=[<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span>], returncode=<span style="color: #800080;">0</span><span style="color: #000000;">)

</span>&gt;&gt;&gt; subprocess.run(<span style="color: #800000;">"</span><span style="color: #800000;">exit 1</span><span style="color: #800000;">"</span>, shell=True, check=<span style="color: #000000;">True)
Traceback (most recent call last):
  ...
subprocess.CalledProcessError: Command </span><span style="color: #800000;">'</span><span style="color: #800000;">exit 1</span><span style="color: #800000;">'</span> returned non-zero exit status <span style="color: #800080;">1</span>

&gt;&gt;&gt; subprocess.run([<span style="color: #800000;">"</span><span style="color: #800000;">ls</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">-l</span><span style="color: #800000;">"</span>, <span style="color: #800000;">"</span><span style="color: #800000;">/dev/null</span><span style="color: #800000;">"</span>], stdout=<span style="color: #000000;">subprocess.PIPE)
CompletedProcess(args</span>=[<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">/dev/null</span><span style="color: #800000;">'</span>], returncode=<span style="color: #800080;">0</span><span style="color: #000000;">,
stdout</span>=b<span style="color: #800000;">'</span><span style="color: #800000;">crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\n</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4 id="subprocess.call">subprocess.call()</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; subprocess.call([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span><span style="color: #000000;">])
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt; subprocess.call(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l</span><span style="color: #800000;">'</span>, shell=<span style="color: #000000;">True)
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt; subprocess.call([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span>], stdout=<span style="color: #000000;">subprocess.DEVNULL)
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt; subprocess.call([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">/test</span><span style="color: #800000;">'</span><span style="color: #000000;">])
ls: 无法访问</span>/<span style="color: #000000;">test: 没有那个文件或目录
</span><span style="color: #800080;">2</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h5 id="suprocess.check_call">suprocess.check_call()</h5>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; subprocess.check_call([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span><span style="color: #000000;">])
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt; subprocess.check_call(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l</span><span style="color: #800000;">'</span>, shell=<span style="color: #000000;">True)
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt; subprocess.check_call(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l /test</span><span style="color: #800000;">'</span>, shell=<span style="color: #000000;">True)
ls: 无法访问</span>/<span style="color: #000000;">test: 没有那个文件或目录

Traceback (most recent call last):
  File </span><span style="color: #800000;">"</span><span style="color: #800000;">&lt;stdin&gt;</span><span style="color: #800000;">"</span>, line <span style="color: #800080;">1</span>, <span style="color: #0000ff;">in</span> &lt;module&gt;<span style="color: #000000;">
  File </span><span style="color: #800000;">"</span><span style="color: #800000;">/usr/lib/python3.4/subprocess.py</span><span style="color: #800000;">"</span>, line <span style="color: #800080;">557</span>, <span style="color: #0000ff;">in</span><span style="color: #000000;"> check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command </span><span style="color: #800000;">'</span><span style="color: #800000;">ls -l /test</span><span style="color: #800000;">'</span> returned non-zero exit status <span style="color: #800080;">2</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p id="sbuprocess.check_output">sbuprocess.check_output()</p>
<div class="cnblogs_code" style="width: 95%; height: 406px;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; ret = subprocess.check_output([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span><span style="color: #000000;">])
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(ret)
b</span><span style="color: #800000;">'</span><span style="color: #800000;"> \xe5\x85\xac\xe5\x85\xb1\xe7\x9a\x84\ndrwxr-xr-x  2 wader wader   4096 12\xe6\x9c\x88  7  <br>2015 \xe6\xa8\xa1\xe6\x9d\xbf\ndrwxr-xr-x  2 wader wader   4096 12\xe6\x9c\x88  7  <br>2015 \xe8\xa7\x86\xe9\xa2\x91\ndrwxr-xr-x  2 wader wader   4096 12\xe6\x9c\x88  7  <br>2015 \xe5\x9b\xbe\xe7\x89\x87\ndrwxr-xr-x  2 wader wader   4096 12\xe6\x9c\x88  7  <br>2015 \xe6\x96\x87\xe6\xa1\xa3\ndrwxr-xr-x  2 wader wader   4096  4\xe6\x9c\x88 13  <br>2016 \xe4\xb8\x8b\xe8\xbd\xbd\ndrwxr-xr-x  2 wader wader   4096 12\xe6\x9c\x88  7  <br>2015 \xe9\x9f\xb3\xe4\xb9\x90\ndrwxr-xr-x  7 wader wader   4096  5\xe6\x9c\x88 26  <br>2016 \xe6\xa1\x8c\xe9\x9d\xa2\n</span><span style="color: #800000;">'</span>
&gt;&gt;&gt; ret = subprocess.check_output([<span style="color: #800000;">'</span><span style="color: #800000;">ls</span><span style="color: #800000;">'</span>,  <span style="color: #800000;">'</span><span style="color: #800000;">-l</span><span style="color: #800000;">'</span>], universal_newlines=<span style="color: #000000;">True)
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(ret)
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span> 桌面</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4 id="subprocess.getoutput与subprocess.getstatusoutput">subprocess.getoutput()与subprocess.getstatusoutput()</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; ret = subprocess.getoutput(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(ret)
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span>&gt;&gt;&gt; retcode, output = subprocess.getstatusoutput(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(retcode)
</span><span style="color: #800080;">0</span>
&gt;&gt;&gt;<span style="color: #000000;"> print(output)
总用量 </span><span style="color: #800080;">160</span><span style="color: #000000;">
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 公共的
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 模板
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 视频
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 图片
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 文档
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span>  4月 <span style="color: #800080;">13</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 下载
drwxr</span>-xr-x  <span style="color: #800080;">2</span> wader wader   <span style="color: #800080;">4096</span> 12月  <span style="color: #800080;">7</span>  <span style="color: #800080;">2015</span><span style="color: #000000;"> 音乐
drwxr</span>-xr-x  <span style="color: #800080;">7</span> wader wader   <span style="color: #800080;">4096</span>  5月 <span style="color: #800080;">26</span>  <span style="color: #800080;">2016</span><span style="color: #000000;"> 桌面
</span>&gt;&gt;&gt; retcode, output = subprocess.getstatusoutput(<span style="color: #800000;">'</span><span style="color: #800000;">ls -l /test</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(retcode)
</span><span style="color: #800080;">2</span>
&gt;&gt;&gt;<span style="color: #000000;"> print(output)
ls: 无法访问</span>/test: 没有那个文件或目录</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h2 id="三subprocess.popen介绍">三、subprocess.Popen介绍</h2>
<p>该类用于在一个新的进程中执行一个子程序。前面我们提到过，上面介绍的这些函数都是基于subprocess.Popen类实现的，通过使用这些被
封装后的高级函数可以很方面的完成一些常见的需求。由于subprocess模块底层的进程创建和管理是由Popen类来处理的，因此，当我们无法通过上
面哪些高级函数来实现一些不太常见的功能时就可以通过subprocess.Popen类提供的灵活的api来完成。</p>
<h3 id="subprocess.popen的构造函数">1.subprocess.Popen的构造函数</h3>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span> subprocess.Popen(args, bufsize=-<span style="color: #800080;">1</span>, executable=None, stdin=None, stdout=None, stderr=<span style="color: #000000;">None, 
    preexec_fn</span>=None, close_fds=True, shell=False, cwd=None, env=None, universal_newlines=<span style="color: #000000;">False,
    startup_info</span>=None, creationflags=<span style="color: #800080;">0</span>, restore_signals=True, start_new_session=False, pass_fds=())</pre>
</div>
<p>参数说明：</p>
<ul>
<li><strong><em>args：</em></strong><span class="Apple-converted-space">&nbsp;要执行的shell命令，可以是字符串，也可以是命令各个参数组成的序列。当该参数的值是一个字符串时，该命令的解释过程是与平台相关的，因此通常建议将args参数作为一个序列传递。</span></li>
<li><strong><em>bufsize：</em></strong><span class="Apple-converted-space">&nbsp;指定缓存策略，0表示不缓冲，1表示行缓冲，其他大于1的数字表示缓冲区大小，负数 表示使用系统默认缓冲策略。</span></li>
<li><strong><em>stdin, stdout, stderr：</em></strong><span class="Apple-converted-space">&nbsp;分别表示程序标准输入、输出、错误句柄。</span></li>
<li><strong><em>preexec_fn：</em></strong><span class="Apple-converted-space">&nbsp;用于指定一个将在子进程运行之前被调用的可执行对象，只在Unix平台下有效。</span></li>
<li><strong><em>close_fds：</em></strong><span class="Apple-converted-space">&nbsp;如果该参数的值为True，则除了0,1和2之外的所有文件描述符都将会在子进程执行之前被关闭。</span></li>
<li><strong><em>shell：</em></strong><span class="Apple-converted-space">&nbsp;该参数用于标识是否使用shell作为要执行的程序，如果shell值为True，则建议将args参数作为一个字符串传递而不要作为一个序列传递。</span></li>
<li><strong><em>cwd：</em></strong><span class="Apple-converted-space">&nbsp;如果该参数值不是None，则该函数将会在执行这个子进程之前改变当前工作目录。</span></li>
<li><strong><em>env：</em></strong><span class="Apple-converted-space">&nbsp;用于指定子进程的环境变量，如果env=None，那么子进程的环境变量将从父进程中继承。如果env!=None，它的值必须是一个映射对象。</span></li>
<li><strong><em>universal_newlines：</em></strong><span class="Apple-converted-space">&nbsp;如果该参数值为True，则该文件对象的stdin，stdout和stderr将会作为文本流被打开，否则他们将会被作为二进制流被打开。</span></li>
<li><strong><em>startupinfo和creationflags：</em></strong><span class="Apple-converted-space">&nbsp;这两个参数只在Windows下有效，它们将被传递给底层的CreateProcess()函数，用于设置子进程的一些属性，如主窗口的外观，进程优先级等。</span></li>
</ul>
<div class="cnblogs_code">
<pre>p = subprocess.Popen(<span style="color: #800000;">'</span><span style="color: #800000;">sleep 300</span><span style="color: #800000;">'</span>,stdout = subprosess.PIPE,stderr = subprosess.PIPE,shell=<span style="color: #000000;">True)
p.terminate() #这个只能终止父进程，子进程不能全部杀死，造成僵尸进程
###完全杀死主进程、子进程（通过进程组杀死）<br>p</span>=subprocess.Popen(<span style="color: #800000;">'</span><span style="color: #800000;">sleep 300</span><span style="color: #800000;">'</span>,shell=True,stdout=subprocess.PIPE,preexec_fn=<span style="color: #000000;">os.setsid)
# 取进程id os.getpid()，同p.pid,os.getpgid(os.getpid())获取进程组id<br>os.killpg(os.getpgid(os.getpid()),signal.SIGTERM)</span></pre>
</div>
<p>杀死主进程，避免子进程成为僵尸进程<a href="http://www.cnblogs.com/domestique/p/8241219.html" target="_blank">http://www.cnblogs.com/domestique/p/8241219.html</a></p>
<p>&nbsp;</p>
<h3 id="subprocess.popen类的实例可调用的方法">2. subprocess.Popen类的实例可调用的方法</h3>
<table>
<thead>
<tr class="header"><th>
<p><span style="font-size: 13px;">方法</span></p>
</th><th>
<p><span style="font-size: 13px;">描述</span></p>
</th></tr>
</thead>
<tbody>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">Popen.poll()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">用于检查子进程（命令）是否已经执行结束，没结束返回None，结束后返回状态码。</span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">Popen.wait(timeout=None)</span></p>
</td>
<td>
<p><span style="font-size: 13px;">等待子进程结束，并返回状态码；如果在timeout指定的秒数之后进程还没有结束，将会抛出一个TimeoutExpired异常。</span></p>
</td>
</tr>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">Popen.communicate(input=None, timeout=None)</span></p>
</td>
<td>
<p><span style="font-size: 13px;">该方法可用来与进程进行交互，比如发送数据到stdin，从stdout和stderr读取数据，直到到达文件末尾。</span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">Popen.send_signal(signal)</span></p>
</td>
<td>
<p><span style="font-size: 13px;">发送指定的信号给这个子进程。</span></p>
</td>
</tr>
<tr class="odd">
<td>
<p><span style="font-size: 13px;">Popen.terminate()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">停止该子进程。</span></p>
</td>
</tr>
<tr class="even">
<td>
<p><span style="font-size: 13px;">Popen.kill()</span></p>
</td>
<td>
<p><span style="font-size: 13px;">杀死该子进程。</span></p>
</td>
</tr>
</tbody>
</table>
<h4 id="关于communicate方法的说明">关于communicate()方法的说明：</h4>
<ul>
<li>该方法中的可选参数 input 应该是将被发送给子进程的数据，或者如没有数据发送给子进程，该参数应该是None。input参数的数据类型必须是字节串，如果universal_newlines参数值为True，则input参数的数据类型必须是字符串。</li>
<li>该方法返回一个元组(stdout_data, stderr_data)，这些数据将会是字节穿或字符串（如果universal_newlines的值为True）。</li>
<li>如果在timeout指定的秒数后该进程还没有结束，将会抛出一个TimeoutExpired异常。捕获这个异常，然后重新尝试通信不会丢失任何输出的数据。但是超时之后子进程并没有被杀死，为了合理的清除相应的内容，一个好的应用应该手动杀死这个子进程来结束通信。</li>
<li>需要注意的是，这里读取的数据是缓冲在内存中的，所以，如果数据大小非常大或者是无线的，就不应该使用这个方法。</li>
</ul>
<h3 id="subprocess.popen使用实例">3. subprocess.Popen使用实例</h3>
<h4 id="实例1">实例1：</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt;<span style="color: #000000;"> import subprocess
</span>&gt;&gt;&gt;
&gt;&gt;&gt; p = subprocess.Popen(<span style="color: #800000;">'</span><span style="color: #800000;">df -Th</span><span style="color: #800000;">'</span>, stdout=subprocess.PIPE, shell=<span style="color: #000000;">True)
</span>&gt;&gt;&gt;<span style="color: #000000;"> print(p.stdout.read())
Filesystem     Type      Size  Used Avail Use</span>%<span style="color: #000000;"> Mounted on
</span>/dev/vda1      ext4       40G   12G   26G  <span style="color: #800080;">31</span>% /<span style="color: #000000;">
devtmpfs       devtmpfs  </span><span style="color: #800080;">3</span>.9G     <span style="color: #800080;">0</span>  <span style="color: #800080;">3</span>.9G   <span style="color: #800080;">0</span>% /<span style="color: #000000;">dev
tmpfs          tmpfs     </span><span style="color: #800080;">3</span>.9G     <span style="color: #800080;">0</span>  <span style="color: #800080;">3</span>.9G   <span style="color: #800080;">0</span>% /dev/<span style="color: #000000;">shm
tmpfs          tmpfs     </span><span style="color: #800080;">3</span>.9G  386M  <span style="color: #800080;">3</span>.5G  <span style="color: #800080;">10</span>% /<span style="color: #000000;">run
tmpfs          tmpfs     </span><span style="color: #800080;">3</span>.9G     <span style="color: #800080;">0</span>  <span style="color: #800080;">3</span>.9G   <span style="color: #800080;">0</span>% /sys/fs/<span style="color: #000000;">cgroup
tmpfs          tmpfs     783M     </span><span style="color: #800080;">0</span>  783M   <span style="color: #800080;">0</span>% /run/user/<span style="color: #800080;">0</span><span style="color: #000000;">
tmpfs          tmpfs     783M     </span><span style="color: #800080;">0</span>  783M   <span style="color: #800080;">0</span>% /run/user/<span style="color: #800080;">1000</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4 id="实例2">实例2：</h4>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; obj = subprocess.Popen([<span style="color: #800000;">"</span><span style="color: #800000;">python</span><span style="color: #800000;">"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=<span style="color: #000000;">subprocess.PIPE)
</span>&gt;&gt;&gt; obj.stdin.write(<span style="color: #800000;">'</span><span style="color: #800000;">print(1) \n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt; obj.stdin.write(<span style="color: #800000;">'</span><span style="color: #800000;">print(2) \n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt; obj.stdin.write(<span style="color: #800000;">'</span><span style="color: #800000;">print(3) \n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt; <span style="color: #0000ff;">out</span>,err =<span style="color: #000000;"> obj.communicate()
</span>&gt;&gt;&gt; print(<span style="color: #0000ff;">out</span><span style="color: #000000;">)
</span><span style="color: #800080;">1</span>
<span style="color: #800080;">2</span>
<span style="color: #800080;">3</span>

&gt;&gt;&gt; print(err)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h4 id="实例3">实例3：</h4>
<div class="cnblogs_code">
<pre>&gt;&gt;&gt; obj = subprocess.Popen([<span style="color: #800000;">"</span><span style="color: #800000;">python</span><span style="color: #800000;">"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=<span style="color: #000000;">subprocess.PIPE)
</span>&gt;&gt;&gt; <span style="color: #0000ff;">out</span>,err = obj.communicate(input=<span style="color: #800000;">'</span><span style="color: #800000;">print(1) \n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span>&gt;&gt;&gt; print(<span style="color: #0000ff;">out</span><span style="color: #000000;">)
</span><span style="color: #800080;">1</span>

&gt;&gt;&gt; print(err)</pre>
</div>
<h4 id="实例4">实例4：</h4>
<p>实现类似<code style="margin: 1px 5px; padding: 0px 5px !important; border-radius: 3px !important; border: 1px solid #cccccc !important; line-height: 1.8; font-family: 'Courier New', sans-serif !important; font-size: 12px !important; vertical-align: middle; display: inline-block; background-color: #f5f5f5 !important;">df -Th | grep data</code>命令的功能，实际上就是实现shell中管道的共功能。</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&gt;&gt;&gt; 
&gt;&gt;&gt; p1 = subprocess.Popen([<span style="color: #800000;">'</span><span style="color: #800000;">df</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">-Th</span><span style="color: #800000;">'</span>], stdout=<span style="color: #000000;">subprocess.PIPE)
</span>&gt;&gt;&gt; p2 = subprocess.Popen([<span style="color: #800000;">'</span><span style="color: #800000;">grep</span><span style="color: #800000;">'</span>, <span style="color: #800000;">'</span><span style="color: #800000;">data</span><span style="color: #800000;">'</span>], stdin=p1.stdout, stdout=<span style="color: #000000;">subprocess.PIPE)
</span>&gt;&gt;&gt; <span style="color: #0000ff;">out</span>,err =<span style="color: #000000;"> p2.communicate()
</span>&gt;&gt;&gt; print(<span style="color: #0000ff;">out</span><span style="color: #000000;">)
</span>/dev/vdb1      ext4      493G  <span style="color: #800080;">4</span>.8G  463G   <span style="color: #800080;">2</span>% /<span style="color: #000000;">data
</span>/dev/vdd1      ext4     1008G  420G  537G  <span style="color: #800080;">44</span>% /<span style="color: #000000;">data1
</span>/dev/vde1      ext4      985G  503G  432G  <span style="color: #800080;">54</span>% /<span style="color: #000000;">data2

</span>&gt;&gt;&gt;<span style="color: #000000;"> print(err)
None</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/copycode.gif" alt="复制代码"></a></span></div></div>
<h2 id="四总结">四、总结</h2>
<hr>
<p>那么我们到底该用哪个模块、哪个函数来执行命令与系统及系统进行交互呢？下面我们来做个总结：</p>
<ul>
<li>首先应该知道的是，Python2.4版本引入了subprocess模块用来替换os.system()、os.popen()、
os.spawn*()等函数以及commands模块；也就是说如果你使用的是Python 
2.4及以上的版本就应该使用subprocess模块了。</li>
<li>如果你的应用使用的Python 2.4以上，但是是Python 
3.5以下的版本，Python官方给出的建议是使用subprocess.call()函数。Python 
2.5中新增了一个subprocess.check_call()函数，Python 
2.7中新增了一个subprocess.check_output()函数，这两个函数也可以按照需求进行使用。</li>
<li>如果你的应用使用的是Python 3.5及以上的版本（目前应该还很少），Python官方给出的建议是尽量使用subprocess.run()函数。</li>
<li>当subprocess.call()、subprocess.check_call()、subprocess.check_output()
和subprocess.run()这些高级函数无法满足需求时，我们可以使用subprocess.Popen类来实现我们需要的复杂功能。</li>
</ul>
<p>参考：http://blog.csdn.net/xiaoyaozizai017/article/details/72794469</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(8056269,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
            <a id="green_channel_follow" onclick="follow('8d983fa2-f305-e711-845c-ac853d9f53ac');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/domestique/" target="_blank"><img src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/20170412083727.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/domestique/">shy车队破风手</a><br>
            <a href="http://home.cnblogs.com/u/domestique/followees">关注 - 25</a><br>
            <a href="http://home.cnblogs.com/u/domestique/followers">粉丝 - 7</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('8d983fa2-f305-e711-845c-ac853d9f53ac');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(8056269,'Digg')">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(8056269,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/domestique/p/8052686.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/domestique/p/8052686.html" title="发布于2017-12-17 17:30">爬取https网站</a><br><a href="https://www.cnblogs.com/domestique/p/8094377.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/domestique/p/8094377.html" title="发布于2017-12-23 20:46">xargs命令详解，xargs与管道的区别</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2017-12-18 10:04</span> <a href="https://www.cnblogs.com/domestique/">shy车队破风手</a> 阅读(<span id="post_view_count">1904</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=8056269" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(8056269);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=339538,cb_entryId=8056269,cb_blogApp=currentBlogApp,cb_blogUserGuid='8d983fa2-f305-e711-845c-ac853d9f53ac',cb_entryCreatedDate='2017/12/18 10:04:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login('commentform');">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-工控')">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://cloud.baidu.com/campaign/purchase-2019/index.html?track=cp:dsp|pf:pc|pp:chui-bokeyuan-huodong-19caigouji-BCC-neiyeCH-190311|pu:neiyeCH-wenzilian|ci:2019cgj|kw:2105959" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-百度云')">【推荐】百度云“猪”你开年行大运，红包疯狂拿，低至1折</a><br><a href="https://gitee.com/enterprises?from=bky-2" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-gitee')">【推荐】专业便捷的企业级代码托管服务 - Gitee 码云</a><br><a href="https://www.bagevent.com/event/2468856" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-GAITC')">【活动】2019第四届全球人工技术大会解码“智能+时代”</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="Python%E4%B9%8B%E7%B3%BB%E7%BB%9Fshell%E4%BA%A4%E4%BA%92%EF%BC%88subprocess%EF%BC%89%20-%20shy%E8%BD%A6%E9%98%9F%E7%A0%B4%E9%A3%8E%E6%89%8B%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/gpt.js"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CLHF1NqErOECFUogYAodxAcJmw"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" data-google-container-id="1" data-load-complete="true" width="300" height="250" frameborder="0"></iframe></div></div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/viviancc/archive/2013/05/03/3056925.html" target="_blank" onclick="clickRecomItmem(3056925)">Python subprocess</a><br>·  <a href="https://www.cnblogs.com/yyds/p/7288916.html" target="_blank" onclick="clickRecomItmem(7288916)">Python之系统交互（subprocess）</a><br>·  <a href="https://www.cnblogs.com/wenwei-blog/p/7606578.html" target="_blank" onclick="clickRecomItmem(7606578)">subprocess模块</a><br>·  <a href="https://www.cnblogs.com/SnailIng/p/10187948.html" target="_blank" onclick="clickRecomItmem(10187948)">Pythonsubprocess</a><br>·  <a href="https://www.cnblogs.com/yuanjiangw/p/9010882.html" target="_blank" onclick="clickRecomItmem(9010882)">subprocess</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CLLF1NqErOECFUogYAodxAcJmw"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" data-google-container-id="2" data-load-complete="true" width="468" height="60" frameborder="0"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/623085/" target="_blank">中英教学差异</a><br> ·  <a href="https://news.cnblogs.com/n/623084/" target="_blank">外媒称苹果挖走特斯拉高管 可能将重启电动汽车开发</a><br> ·  <a href="https://news.cnblogs.com/n/623083/" target="_blank">熊猫直播发文宣布正式关闭</a><br> ·  <a href="https://news.cnblogs.com/n/623082/" target="_blank">马化腾：产业互联网的春天才刚刚开始</a><br> ·  <a href="https://news.cnblogs.com/n/623035/" target="_blank">“邪教”奥修派与互联网社群</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div><!--end: topicList 文章列表容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/domestique/">shy车队破风手</a><br>园龄：<a href="https://home.cnblogs.com/u/domestique/" title="入园时间：2017-03-11">2年</a><br>粉丝：<a href="https://home.cnblogs.com/u/domestique/followers/">7</a><br>关注：<a href="https://home.cnblogs.com/u/domestique/followees/">25</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow('8d983fa2-f305-e711-845c-ac853d9f53ac')">+加关注</a></div><script>getFollowStatus('8d983fa2-f305-e711-845c-ac853d9f53ac')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" title="Calendar" cellspacing="0" cellpadding="0">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar('2019/02/01');return false;">&lt;</a></td><td align="center">2019年3月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar('2019/04/01');return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" abbr="日" scope="col" align="center">日</th><th class="CalDayHeader" abbr="一" scope="col" align="center">一</th><th class="CalDayHeader" abbr="二" scope="col" align="center">二</th><th class="CalDayHeader" abbr="三" scope="col" align="center">三</th><th class="CalDayHeader" abbr="四" scope="col" align="center">四</th><th class="CalDayHeader" abbr="五" scope="col" align="center">五</th><th class="CalDayHeader" abbr="六" scope="col" align="center">六</th></tr><tr><td class="CalOtherMonthDay" align="center">24</td><td class="CalOtherMonthDay" align="center">25</td><td class="CalOtherMonthDay" align="center">26</td><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td align="center">1</td><td class="CalWeekendDay" align="center">2</td></tr><tr><td class="CalWeekendDay" align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td class="CalWeekendDay" align="center">9</td></tr><tr><td class="CalWeekendDay" align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td class="CalWeekendDay" align="center">16</td></tr><tr><td class="CalWeekendDay" align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td class="CalWeekendDay" align="center">23</td></tr><tr><td class="CalWeekendDay" align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td align="center">29</td><td class="CalWeekendDay" align="center">30</td></tr><tr><td class="CalTodayDay" align="center">31</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="https://www.cnblogs.com/domestique/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="https://www.cnblogs.com/domestique/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="https://www.cnblogs.com/domestique/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="https://www.cnblogs.com/domestique/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="https://www.cnblogs.com/domestique/tag/" title="我的博客的标签列表">我的标签</a></li>
<li><a id="itemListLink" onclick="this.blur();WarpClass('itemListLink', 'itemListLin_con');return false;" href="#">更多链接</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
<li><a href="https://www.cnblogs.com/domestique/tag/Linux%E4%B9%8B%E8%B7%AF/">Linux之路</a>(1)</li>
</ul>
</div></div><div id="sidebar_categories">
<div class="catListPostCategory">
<h3 class="catListTitle">随笔分类</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/domestique/category/1031472.html">Django框架学习(1)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/domestique/category/1020494.html">Django框架自学(11)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/domestique/category/1121204.html">golang(22)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="https://www.cnblogs.com/domestique/category/983429.html">linux基础(18)</a> </li>

<li><a id="CatList_LinkList_0_Link_4" href="https://www.cnblogs.com/domestique/category/1013692.html">MySQL(7)</a> </li>

<li><a id="CatList_LinkList_0_Link_5" href="https://www.cnblogs.com/domestique/category/991247.html">python底层基础(12)</a> </li>

<li><a id="CatList_LinkList_0_Link_6" href="https://www.cnblogs.com/domestique/category/983430.html">python函数面向对象(11)</a> </li>

<li><a id="CatList_LinkList_0_Link_7" href="https://www.cnblogs.com/domestique/category/983432.html">python小程序(9)</a> </li>

<li><a id="CatList_LinkList_0_Link_8" href="https://www.cnblogs.com/domestique/category/983439.html">python小知识点(6)</a> </li>

<li><a id="CatList_LinkList_0_Link_9" href="https://www.cnblogs.com/domestique/category/989475.html">shell语法(8)</a> </li>

<li><a id="CatList_LinkList_0_Link_10" href="https://www.cnblogs.com/domestique/category/989457.html">计算机基础(2)</a> </li>

<li><a id="CatList_LinkList_0_Link_11" href="https://www.cnblogs.com/domestique/category/1067972.html">爬虫(3)</a> </li>

<li><a id="CatList_LinkList_0_Link_12" href="https://www.cnblogs.com/domestique/category/1003358.html">前端HTML JS(9)</a> </li>

<li><a id="CatList_LinkList_0_Link_13" href="https://www.cnblogs.com/domestique/category/1117257.html">软件操作(8)</a> </li>

<li><a id="CatList_LinkList_0_Link_14" href="https://www.cnblogs.com/domestique/category/999175.html">网络编程(12)</a> </li>

<li><a id="CatList_LinkList_0_Link_15" href="https://www.cnblogs.com/domestique/category/1117258.html">资源下载</a> </li>

</ul>

</div>

<div class="catListPostArchive">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="https://www.cnblogs.com/domestique/archive/2018/11.html">2018年11月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="https://www.cnblogs.com/domestique/archive/2018/04.html">2018年4月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="https://www.cnblogs.com/domestique/archive/2018/03.html">2018年3月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="https://www.cnblogs.com/domestique/archive/2018/02.html">2018年2月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="https://www.cnblogs.com/domestique/archive/2018/01.html">2018年1月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_5" href="https://www.cnblogs.com/domestique/archive/2017/12.html">2017年12月 (12)</a> </li>

<li><a id="CatList_LinkList_1_Link_6" href="https://www.cnblogs.com/domestique/archive/2017/11.html">2017年11月 (28)</a> </li>

<li><a id="CatList_LinkList_1_Link_7" href="https://www.cnblogs.com/domestique/archive/2017/10.html">2017年10月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_8" href="https://www.cnblogs.com/domestique/archive/2017/09.html">2017年9月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_9" href="https://www.cnblogs.com/domestique/archive/2017/08.html">2017年8月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_10" href="https://www.cnblogs.com/domestique/archive/2017/07.html">2017年7月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_11" href="https://www.cnblogs.com/domestique/archive/2017/06.html">2017年6月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_12" href="https://www.cnblogs.com/domestique/archive/2017/05.html">2017年5月 (14)</a> </li>

<li><a id="CatList_LinkList_1_Link_13" href="https://www.cnblogs.com/domestique/archive/2017/04.html">2017年4月 (38)</a> </li>

<li><a id="CatList_LinkList_1_Link_14" href="https://www.cnblogs.com/domestique/archive/2017/03.html">2017年3月 (11)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap" style="display: none;">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"></div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/domestique/p/7859352.html">1. Python安装官方whl包、tar.gz包、zip包(8321)</a></li><li><a href="https://www.cnblogs.com/domestique/p/7814007.html">2. Python下定时任务框架APScheduler的使用(4680)</a></li><li><a href="https://www.cnblogs.com/domestique/p/7860570.html">3. 查看mysql表结构和表创建语句的方法,建表42000错误解决办法(3007)</a></li><li><a href="https://www.cnblogs.com/domestique/p/8056269.html">4. Python之系统shell交互（subprocess）(1904)</a></li><li><a href="https://www.cnblogs.com/domestique/p/8215020.html">5. Masscan操作配置(1438)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap" style="display: none;">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<h3 class="catListTitle">推荐排行榜</h3>
<div class="RecentComment">
	<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/domestique/p/7207529.html">1. 点赞(1)</a></li><li><a href="https://www.cnblogs.com/domestique/p/8052686.html">2. 爬取https网站(1)</a></li><li><a href="https://www.cnblogs.com/domestique/p/7896870.html">3. Selenium + PhantomJS + python 简单实现动态页面的爬取(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
		<div class="clear"></div>
		<div id="footer">
			
<!--done-->
Copyright ©2019 shy车队破风手
		</div><!--end: footer -->
	</div><!--end: sideBar 侧边栏容器 -->
</div><!--end: home 自定义的最大容器 -->
</center>



</body></html>