<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="referrer" content="origin" />
    <title>python二进制数据 - moisiet - 博客园</title>
<meta property="og:description" content="一直以来对python的二进制数据搞不清楚。 一、二进制显示格式与实际存储值区别 1.二进制数据在python中以字节（bytes)类型和字节数组类型（bytearray)保存着，前者数据固定，后者不" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=svlZeZMvc3He7PqOD4T7SOuQn0_kIfLBYiy3idqd35Y1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/LuxInteriorDark/bundle-LuxInteriorDark.css?v=gW5LiWuuDl_DYvHPSiVf9j0P0lsxKOjmdNS7WdcyR6Y1"/>
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/LuxInteriorDark/bundle-LuxInteriorDark-mobile.css?v=Go8Bj0ZU9gZXuPSKWcSQabps3E1njgJKYz4DiOq6-N41"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/zhuluqing/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/zhuluqing/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/zhuluqing/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=409696;var currentBlogApp='zhuluqing',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="/bundles/blog-common.js?v=OFBZTzkHKauV7mtIFLF9jlqrX-sesK9-mY9KjurLrq01" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<div id="container">
	<div id="header">
<div id="top">
			<h1><a id="Header1_HeaderTitle" class="weblogtitle" href="https://www.cnblogs.com/zhuluqing/">moisiet</a></h1>
			<p></p>
			</div>
<div id="navstats"><div id="blog_stats">
posts - 128, comments - 0, trackbacks - 0, articles - 0</div></div><div id="nav">
<ul>
	<li>
		<a id="blog_nav_sitehome" href="https://www.cnblogs.com/">博客园</a></li>
	<li>
		<a id="blog_nav_myhome" href="https://www.cnblogs.com/zhuluqing/">首页</a></li>
	<li>
		<a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
	<li>
		<a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/moisiet">联系</a></li>
	<li>
		<a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
<span>
	<a id="blog_nav_rss_image" href="https://www.cnblogs.com/zhuluqing/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>
	<a id="blog_nav_rss" href="https://www.cnblogs.com/zhuluqing/rss">订阅</a>
</span>
</div>


</div>
	<div class="clr"></div>
	<div id="sidebar-a">
		
			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
<div id="news">
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script></div>

			<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
		
	</div>
	<div id="content">
		
        <div id="post_detail">
	<div class="post">
		<div class="posthead">
			<h2>
				<a id="cb_post_title_url" class="singleposttitle" href="https://www.cnblogs.com/zhuluqing/p/8482452.html">python二进制数据</a>
			</h2>
 			Posted on <span id="post-date">2018-02-28 10:58</span> <a href='https://www.cnblogs.com/zhuluqing/'>moisiet</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=8482452" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(8482452);return false;">收藏</a>
			<script type="text/javascript">var allowComments=true,cb_blogId=409696,cb_entryId=8482452,cb_blogApp=currentBlogApp,cb_blogUserGuid='2122318a-38d0-e411-b908-9dcfd8948a71',cb_entryCreatedDate='2018/2/28 10:58:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
			
		</div>
		<div class="postbody"><div id="cnblogs_post_body" class="blogpost-body"><p>一直以来对python的二进制数据搞不清楚。</p>
<h3>一、二进制显示格式与实际存储值区别</h3>
<p>1.二进制数据在python中以字节（bytes)类型和字节数组类型（bytearray)保存着，前者数据固定，后者不固定，可继续添加。其每个元素为一个字节的数值，这就要求每个元素数值必须位于【0，255】之间，因为一个字节只能表示这个范围的数据。</p>
<p>2.由于字节或字节数组类型元素只能处于【0，255】之间，因此要表示中文（通常是三个字节（utf-8编码）），必须将中文转成字节格式，下例就出错了：</p>
<p>&gt;&gt;&gt; b'中文'<br />&nbsp; File "&lt;stdin&gt;", line 1<br />SyntaxError: bytes can only contain ASCII literal characters.</p>
<p>错误原因是字节只能包含ASCII常量字符</p>
<p>解决办法是先将中文字符转其他类型的编码即可，如转成utf-8编码：</p>
<p>&gt;&gt;&gt; '中文'.encode('utf-8')<br />b'\xe4\xb8\xad\xe6\x96\x87'</p>
<p>这就是unicode与bytes之间相互转化方式，我们循环这个bytes:</p>
<p>&gt;&gt;&gt; for i in b'\xe4\xb8\xad\xe6\x96\x87':<br />...&nbsp;&nbsp;&nbsp;&nbsp; print(i)<br />...<br />228<br />184<br />173<br />230<br />150<br />135</p>
<p>发现字符&ldquo;中&rdquo;由三个8位数据构成，即228 184 173，我们将其转化成二进制格式：</p>
<p>&gt;&gt;&gt; bin(228)<br />'0b11100100'<br />&gt;&gt;&gt; bin(184)<br />'0b10111000'<br />&gt;&gt;&gt; bin(173)<br /><span style="color: #888888;">'0b10101101'</span></p>
<p><span style="color: #888888;">发现字符&ldquo;中&rdquo;的utf-8编码方式为：11100100 10111000&nbsp;10101101，这也是它在计算机中存储的方式。</span></p>
<p><span style="color: #888888;">3.ASCII码能够表示的字符（0-9a-zA-Z及一些标点符号转义字符等）转化成utf-8码不发生改变，因为utf-8编码是ASCII编码的超集。</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; 'afAFA!@#'.encode('utf-8')</span><br /><span style="color: #888888;">b'afAFA!@#'</span></p>
<p><span style="color: #888888;">而实际上存储的是各字符的ASCII码值：</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; for i in b'afAFA!@#':</span><br /><span style="color: #888888;">...&nbsp;&nbsp;&nbsp;&nbsp; print(i)</span><br /><span style="color: #888888;">...</span><br /><span style="color: #888888;">97</span><br /><span style="color: #888888;">102</span><br /><span style="color: #888888;">65</span><br /><span style="color: #888888;">70</span><br /><span style="color: #888888;">65</span><br /><span style="color: #888888;">33</span><br /><span style="color: #888888;">64</span><br /><span style="color: #888888;">35</span></p>
<p><span style="color: #888888;">当中英文混合时我们看的更清楚：</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; '中c'.encode()</span><br /><span style="color: #888888;">b'\xe4\xb8\xadc'</span></p>
<p><span style="color: #888888;">我们看到最后的字符c并没有发生转义成十六进制，仍然是c。</span></p>
<p><span style="color: #888888;">这就是说明，tytes类型显示格式是十六进制格式，ASCII码原样不改变，但最终存储的值还是对应十六进制值格式对等的二进制格式值。</span></p>
<p><span style="color: #888888;">始终记住：显示的是十六进制格式，存储的是对应的码值。如:</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; b'a'[0]<br />97</span></p>
<p><span style="color: #888888;">显示的是字符a，实际上保存的是对应的ASCII码值97.</span></p>
<h3><span style="color: #888888;">二、binascii模块：</span></h3>
<p><span style="color: #888888;">binascii模块定义了很多二进制转化的函数。</span></p>
<p><span style="color: #888888;">binascii.hexlify() 将单个字符转化成对应码值的十六进制格式（\xxx)格式</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; binascii.hexlify(b'\xefmm')<br />b'ef6d6d'</span></p>
<p><span style="color: #888888;">binascii.unhexlify() 两个字符为单位，看作十六进制值，转化成对应码值的字符格式</span></p>
<p><span style="color: #888888;">&gt;&gt;&gt; binascii.unhexlify(b'ef6d6d')<br />b'\xefmm'</span></p>
<p><span style="color: #ff6600;">因此参数里不能是基数个字符</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">&nbsp;</span></p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>

</div>
	</div></div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id='comment_form' class='commentform'>
<a name='commentform'></a>
<div id='divCommentShow'></div>
<div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
<div id='comment_form_container'></div>
<div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
<div id='ad_t2'></div>
<div id='opt_under_post'></div>
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id='cnblogs_c1' class='c_ad_block'>
    <div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'></div>
</div>
<div id='under_post_news'></div>
<div id='cnblogs_c2' class='c_ad_block'>
    <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'></div>
</div>
<div id='under_post_kb'></div>
<div id='HistoryToday' class='c_ad_block'></div>
<script type='text/javascript'>
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div>
	<div id="footer">
		
<p align="center">Copyright Copyright moisiet</p>


		
	</div>
</div>


</body>
</html>
