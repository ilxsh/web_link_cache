<!DOCTYPE html>
<html lang="zh-cn"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="origin">
    <title>Python之数据序列化（json、pickle、shelve） - 云游道士 - 博客园</title>
<meta property="og:description" content="本节内容 1. 前言 2. json模块 3. pickle模块 4. shelve模块 5. 总结 一、前言 1. 现实需求 每种编程语言都有各自的数据类型，其中面向对象的编程语言还允许开发者自定义">
    <link type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-BlackLowKey.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/bundle-BlackLowKey-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/yyds/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/yyds/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/yyds/wlwmanifest.xml">
    <script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/osd.js"></script><script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/amp4ads-host-v0.js"></script><script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_rendering_2019032501.js"></script><script async="" src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/analytics.js"></script><script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/jquery-2.js"></script>
    <script>var currentBlogId=316903;var currentBlogApp='yyds',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/blog-common.js" type="text/javascript"></script>
<link rel="preload" href="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js" as="script"><script type="text/javascript" src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/integrator.js"></script><script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/pubads_impl_2019032501.js" async=""></script><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-32/html/container.html"></head>
<body>
<a name="top"></a>


<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/yyds/"><img id="blogLogo" src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/yyds/">云游道士</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/yyds/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/yyds/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/yyds/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 30&nbsp; </span>
<span id="stats_article_count">文章 - 0&nbsp; </span>
<span id="stats-comment_count">评论 - 71</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
        <div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/yyds/p/6563608.html">Python之数据序列化（json、pickle、shelve）</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"><h2 id="本节内容">本节内容</h2>
<hr>
<ol>
<li>前言</li>
<li>json模块</li>
<li>pickle模块</li>
<li>shelve模块</li>
<li>总结</li>
</ol>
<h2 id="一前言">一、前言</h2>
<hr>
<h3 id="现实需求">1. 现实需求</h3>
<p>每种编程语言都有各自的数据类型，其中面向对象的编程语言还允许开发者自定义数据类型（如：自定义类），Python也是一样。很多时候我们会有这样的需求：</p>
<ul>
<li>把内存中的各种数据类型的数据通过网络传送给其它机器或客户端；</li>
<li>把内存中的各种数据类型的数据保存到本地磁盘持久化；</li>
</ul>
<h3 id="数据格式">2.数据格式</h3>
<p>如果要将一个系统内的数据通过网络传输给其它系统或客户端，我们通常都需要先把这些数据转化为字符串或字节串，而且需要规定一种统一的数据格式才能让数据接收端正确解析并理解这些数据的含义。<strong><em>XML</em></strong> 是早期被广泛使用的数据交换格式，在早期的系统集成论文中经常可以看到它的身影；如今大家使用更多的数据交换格式是<strong><em>JSON（JavaScript Object Notation）</em></strong>，它是一种轻量级的数据交换格式。JSON相对于XML而言，更加加单、易于阅读和编写，同时也易于机器解析和生成。除此之外，我们也可以自定义内部使用的数据交换格式。</p>
<p>如果是想把数据持久化到本地磁盘，这部分数据通常只是供系统内部使用，因此数据转换协议以及转换后的数据格式也就不要求是标准、统一的，只要本系统
内部能够正确识别即可。但是，系统内部的转换协议通常会随着编程语言版本的升级而发生变化（改进算法、提高效率），因此通常会涉及转换协议与编程语言的版
本兼容问题，下面要介绍的pickle协议就是这样一个例子。</p>
<h3 id="序列化反序列化">3. 序列化/反序列化</h3>
<p>将对象转换为可通过网络传输或可以存储到本地磁盘的数据格式（如：XML、JSON或特定格式的字节串）的过程称为序列化；反之，则称为反序列化。</p>
<h3 id="相关模块">4.相关模块</h3>
<p>本节要介绍的就是Python内置的几个用于进行数据序列化的模块：</p>
<table>
<thead>
<tr class="header">
<th>模块名称</th>
<th>描述</th>
<th>提供的api</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>json</td>
<td>用于实现Python数据类型与通用（json）字符串之间的转换</td>
<td>dumps()、dump()、loads()、load()</td>
</tr>
<tr class="even">
<td>pickle</td>
<td>用于实现Python数据类型与Python特定二进制格式之间的转换</td>
<td>dumps()、dump()、loads()、load()</td>
</tr>
<tr class="odd">
<td>shelve</td>
<td>专门用于将Python数据类型的数据持久化到磁盘，shelve是一个类似dict的对象，操作十分便捷</td>
<td>open()</td>
</tr>
</tbody>
</table>
<h2 id="二json模块">二、json模块</h2>
<hr>
<p>大部分编程语言都会提供处理json数据的接口，Python 2.6开始加入了json模块，且把它作为一个内置模块提供，无需下载即可使用。</p>
<h3 id="序列化与反序列化">1. 序列化与反序列化</h3>
<p>Python的JSON模块 序列化与反序列化的过程分别叫做：encoding 和 decoding。</p>
<ul>
<li><strong><em>encoding：</em></strong> 把Python对象转换成JSON字符串</li>
<li><strong><em>decoding：</em></strong> 把JSON字符串转换成python对象</li>
</ul>
<p>json模块提供了以下两个方法来进行序列化和反序列化操作：</p>
<pre><code class="hljs python"><span class="hljs-comment"># 序列化：将Python对象转换成json字符串</span>
dumps(obj, skipkeys=<span class="hljs-keyword">False</span>, ensure_ascii=<span class="hljs-keyword">True</span>, check_circular=<span class="hljs-keyword">True</span>, allow_nan=<span class="hljs-keyword">True</span>, cls=<span class="hljs-keyword">None</span>, indent=<span class="hljs-keyword">None</span>, separators=<span class="hljs-keyword">None</span>, default=<span class="hljs-keyword">None</span>, sort_keys=<span class="hljs-keyword">False</span>, **kw)

<span class="hljs-comment"># 反序列化：将json字符串转换成Python对象</span>
loads(s, encoding=<span class="hljs-keyword">None</span>, cls=<span class="hljs-keyword">None</span>, object_hook=<span class="hljs-keyword">None</span>, parse_float=<span class="hljs-keyword">None</span>, parse_int=<span class="hljs-keyword">None</span>, parse_constant=<span class="hljs-keyword">None</span>, object_pairs_hook=<span class="hljs-keyword">None</span>, **kw)</code></pre>
<p>除此之外，json模块还提供了两个额外的方法允许我们直接将序列化后得到的json数据保存到文件中，以及直接读取文件中的json数据进行反序列化操作：</p>
<pre><code class="hljs python"><span class="hljs-comment"># 序列化：将Python对象转换成json字符串并存储到文件中</span>
dump(obj, fp, skipkeys=<span class="hljs-keyword">False</span>, ensure_ascii=<span class="hljs-keyword">True</span>, check_circular=<span class="hljs-keyword">True</span>, allow_nan=<span class="hljs-keyword">True</span>, cls=<span class="hljs-keyword">None</span>, indent=<span class="hljs-keyword">None</span>, separators=<span class="hljs-keyword">None</span>, default=<span class="hljs-keyword">None</span>, sort_keys=<span class="hljs-keyword">False</span>, **kw)

<span class="hljs-comment"># 反序列化：读取指定文件中的json字符串并转换成Python对象</span>
load(fp, cls=<span class="hljs-keyword">None</span>, object_hook=<span class="hljs-keyword">None</span>, parse_float=<span class="hljs-keyword">None</span>, parse_int=<span class="hljs-keyword">None</span>, parse_constant=<span class="hljs-keyword">None</span>, object_pairs_hook=<span class="hljs-keyword">None</span>, **kw)</code></pre>
<h3 id="json与python之间数据类型对应关系">2. JSON与Python之间数据类型对应关系</h3>
<h4 id="python转json">Python转JSON</h4>
<table>
<thead>
<tr class="header">
<th>Python</th>
<th>JSON</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dict</td>
<td>Object</td>
</tr>
<tr class="even">
<td>list, tuple</td>
<td>array</td>
</tr>
<tr class="odd">
<td>str</td>
<td>string</td>
</tr>
<tr class="even">
<td>int, float, int- &amp; float-derived Enums</td>
<td>numbers</td>
</tr>
<tr class="odd">
<td>True</td>
<td>true</td>
</tr>
<tr class="even">
<td>False</td>
<td>false</td>
</tr>
<tr class="odd">
<td>None</td>
<td>null</td>
</tr>
</tbody>
</table>
<h4 id="json转python">JSON转Python</h4>
<table>
<thead>
<tr class="header">
<th>JSON</th>
<th>Python</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>object</td>
<td>dict</td>
</tr>
<tr class="even">
<td>array</td>
<td>list</td>
</tr>
<tr class="odd">
<td>string</td>
<td>str</td>
</tr>
<tr class="even">
<td>number(int)</td>
<td>int</td>
</tr>
<tr class="odd">
<td>number(real)</td>
<td>float</td>
</tr>
<tr class="even">
<td>true</td>
<td>True</td>
</tr>
<tr class="odd">
<td>false</td>
<td>False</td>
</tr>
<tr class="even">
<td>null</td>
<td>None</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong><em>说明：</em></strong></p>
<ul>
<li>Python dict中的非字符串key被转换成JSON字符串时都会被转换为小写字符串；</li>
<li>Python中的tuple，在序列化时会被转换为array，但是反序列化时，array会被转化为list；</li>
<li>由以上两点可知，当Python对象中包含tuple数据或者包含dict，且dict中存在非字符串的key时，反序列化后得到的结果与原来的Python对象是不一致的；</li>
<li>对于Python内置的数据类型（如：str, unicode, int, float, bool, None, list, tuple,
 
dict）json模块可以直接进行序列化/反序列化处理；对于自定义类的对象进行序列化和反序列化时，需要我们自己定义一个方法来完成定义object
和dict之间进行转化。</li>
</ul>
</blockquote>
<h3 id="实例内置数据类型序列化反序列化">3. 实例：内置数据类型序列化/反序列化</h3>
<h4 id="序列化">序列化</h4>
<pre><code class="hljs fsharp"># 序列化
&gt;&gt;&gt; json.dumps({<span class="hljs-symbol">'a</span>':'str', <span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>, <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'g</span>':(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)})
'{<span class="hljs-string">"a"</span>: <span class="hljs-string">"str"</span>, <span class="hljs-string">"c"</span>: <span class="hljs-keyword">true</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">"e"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"d"</span>: <span class="hljs-keyword">null</span>, <span class="hljs-string">"g"</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-string">"f"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}'</code></pre>
<p><strong><em>sort_keys参数：</em></strong> 表示序列化时是否对dict的key进行排序（dict默认是无序的）</p>
<pre><code class="hljs fsharp"># 序列化并对key进行排序
&gt;&gt;&gt; json.dumps({<span class="hljs-symbol">'a</span>':'str', <span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>, <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'g</span>':(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}, sort_keys=True)
'{<span class="hljs-string">"a"</span>: <span class="hljs-string">"str"</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">"c"</span>: <span class="hljs-keyword">true</span>, <span class="hljs-string">"d"</span>: <span class="hljs-keyword">null</span>, <span class="hljs-string">"e"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"f"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">"g"</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]}'</code></pre>
<p><strong><em>indent参数：</em></strong> 表示缩进的意思，它可以使得数据存储的格式变得更加优雅、可读性更强；如果indent是一个非负整数或字符串，则JSON array元素和object成员将会被以相应的缩进级别进行打印输出；如果indent是0或负数或空字符串，则将只会插入换行，不会有缩进。</p>
<pre><code class="hljs python"><span class="hljs-comment"># 序列化并对key进行排序及格式化输出</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(json.dumps({<span class="hljs-string">'a'</span>:<span class="hljs-string">'str'</span>, <span class="hljs-string">'c'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span>:(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}, sort_keys=<span class="hljs-keyword">True</span>, indent=<span class="hljs-number">4</span>)) 
{
    <span class="hljs-string">"a"</span>: <span class="hljs-string">"str"</span>, 
    <span class="hljs-string">"b"</span>: <span class="hljs-number">11.1</span>, 
    <span class="hljs-string">"c"</span>: true, 
    <span class="hljs-string">"d"</span>: null, 
    <span class="hljs-string">"e"</span>: <span class="hljs-number">10</span>, 
    <span class="hljs-string">"f"</span>: [
        <span class="hljs-number">1</span>, 
        <span class="hljs-number">2</span>, 
        <span class="hljs-number">3</span>
    ], 
    <span class="hljs-string">"g"</span>: [
        <span class="hljs-number">4</span>, 
        <span class="hljs-number">5</span>, 
        <span class="hljs-number">6</span>
    ]
}</code></pre>
<p><strong><em>separators参数：</em></strong> 
尽管indent参数可以使得数据存储的格式变得更加优雅、可读性更强，但是那是通过添加一些冗余的空白字符进行填充的。当json被用于网络数据通信
时，应该尽可能的减少无用的数据传输，这样可以节省带宽并加快数据传输速度。json模块序列化Python对象后得到的json字符串中的','号和
':'号分隔符后默认都会附加一个空白字符，我们可以通过separators参数重新指定分隔符，从而去除无用的空白字符；</p>
<ul>
<li>该参数的值应该是一个tuple(item_separator, key_separator)</li>
<li>如果indent是None，其默认值为(', ', ': ')</li>
<li>如果indent不为None，则默认值为(',', ': ')</li>
<li>我们可以通过为separator赋值为(',', ':')来消除空白字符</li>
</ul>
<pre><code class="hljs fsharp">&gt;&gt;&gt; json.dumps({<span class="hljs-symbol">'a</span>':'str', <span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>, <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'g</span>':(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)})
'{<span class="hljs-string">"a"</span>: <span class="hljs-string">"str"</span>, <span class="hljs-string">"c"</span>: <span class="hljs-keyword">true</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">"e"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"d"</span>: <span class="hljs-keyword">null</span>, <span class="hljs-string">"g"</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-string">"f"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}'

&gt;&gt;&gt; json.dumps({<span class="hljs-symbol">'a</span>':'str', <span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>, <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'g</span>':(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}, separators=(',',':'))
'{<span class="hljs-string">"a"</span>:<span class="hljs-string">"str"</span>,<span class="hljs-string">"c"</span>:<span class="hljs-keyword">true</span>,<span class="hljs-string">"b"</span>:<span class="hljs-number">11.1</span>,<span class="hljs-string">"e"</span>:<span class="hljs-number">10</span>,<span class="hljs-string">"d"</span>:<span class="hljs-keyword">null</span>,<span class="hljs-string">"g"</span>:[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],<span class="hljs-string">"f"</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]}'</code></pre>
<p><strong><em>ensure_ascii参数：</em></strong> 
当该参数的值为True（默认值）时，输出中的所有非ASCII字符（比如中文）都会被转义成'\uXXXX'组成的序列，得到的结果是一个完全由
ASCII字符组成的str实例。如果我们想得到一个人类可读的输出结果，需要把ensure_ascii参数的值设置为False。</p>
<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; stu={<span class="hljs-string">"name"</span>: <span class="hljs-string">"小明"</span>, <span class="hljs-string">"age"</span> : <span class="hljs-number">16</span>}
<span class="hljs-meta">&gt;&gt;</span>&gt; stu_json = json.dumps(stu)
<span class="hljs-meta">&gt;&gt;</span>&gt; print(stu_json)
<span class="hljs-string">'{"name": "\u5c0f\u660e", "age": 16}'</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; stu_json01 = json.dumps(stu, ensure_ascii=False)
<span class="hljs-meta">&gt;&gt;</span>&gt; print(stu_json01)
<span class="hljs-string">'{"name": "小明", "age": 16}'</span></code></pre>
<blockquote>
<p><strong><em>说明：</em></strong> 实际上'\uXXXX'是Unicode字符对应的内存编码值，该内存编码名称为"unicode-escape",我们可以通过<code>unicodestr.encode('unicode-escape')</code>和<code>decode('unicode-escape')</code>来完成Unicode字符串与Unicode内存编码序列进行相互转换，如下所示：</p>
</blockquote>
<pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; str1 = <span class="hljs-string">"hello 中国"</span></span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; str2 = str1.encode(<span class="hljs-string">"unicode_escape"</span>)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(str2)</span>
b'hello \\u4e2d\\u56fd'
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; str3 = str2.decode(<span class="hljs-string">"unicode_escape"</span>)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(str3)</span>
hello 中国</code></pre>
<p>注意str2是字节串，不是字符串，因此\u前面需要再加一个反斜线做转义。我们把str2转换成字符串就是我们熟悉的格式了：</p>
<pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; str4=str2.decode(<span class="hljs-string">"utf-8"</span>)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(str4)</span>
hello \u4e2d\u56fd
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;</span></code></pre>
<h4 id="反序列化">反序列化</h4>
<pre><code class="hljs fsharp"># 反序列化
&gt;&gt;&gt; json.loads('{<span class="hljs-string">"a"</span>: <span class="hljs-string">"str"</span>, <span class="hljs-string">"c"</span>: <span class="hljs-keyword">true</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">"e"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"d"</span>: <span class="hljs-keyword">null</span>, <span class="hljs-string">"g"</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-string">"f"</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}')
{<span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'a</span>': 'str', <span class="hljs-symbol">'g</span>': [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>}

&gt;&gt;&gt; json.loads('{<span class="hljs-string">"a"</span>:<span class="hljs-string">"str"</span>,<span class="hljs-string">"c"</span>:<span class="hljs-keyword">true</span>,<span class="hljs-string">"b"</span>:<span class="hljs-number">11.1</span>,<span class="hljs-string">"e"</span>:<span class="hljs-number">10</span>,<span class="hljs-string">"d"</span>:<span class="hljs-keyword">null</span>,<span class="hljs-string">"g"</span>:[<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>],<span class="hljs-string">"f"</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]}')
{<span class="hljs-symbol">'c</span>': True, <span class="hljs-symbol">'e</span>': <span class="hljs-number">10</span>, <span class="hljs-symbol">'a</span>': 'str', <span class="hljs-symbol">'g</span>': [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-symbol">'d</span>': None, <span class="hljs-symbol">'f</span>': [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-symbol">'b</span>': <span class="hljs-number">11.1</span>}</code></pre>
<h4 id="dump与load函数示例">dump()与load()函数示例</h4>
<pre><code class="hljs python"><span class="hljs-comment"># 序列化到文件中</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> open(<span class="hljs-string">'test.json'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> fp:
<span class="hljs-meta">... </span>    json.dump({<span class="hljs-string">'a'</span>:<span class="hljs-string">'str中国'</span>, <span class="hljs-string">'c'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span>:(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}, fp, indent=<span class="hljs-number">4</span>)

<span class="hljs-comment"># 反序列化文件中的内容</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> open(<span class="hljs-string">'test.json'</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> fp:
<span class="hljs-meta">... </span>    json.load(fp)
{<span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'g'</span>: [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'c'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'d'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'a'</span>: <span class="hljs-string">'str中国'</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}</code></pre>
<blockquote>
<p><strong><em>需要说明的是：</em></strong> 如果试图使用相同的fp重复调用dump()函数去序列化多个对象（或序列化同一个对象多次），将会产生一个无效的JSON文件，也就是说对于一个fp只能调用一次dump()。</p>
</blockquote>
<h3 id="实例自定义数据类型的序列化反序列化">4. 实例：自定义数据类型的序列化/反序列化</h3>
<p>Python是面向对象的编程语言，我们可以自定义需要的数据类型；实际工作中，我们常常会用到自定义数据类型的序列化与反序列化操作。要实现自定义数据类型的序列化与反序列化有两种方式：</p>
<ul>
<li>通过转换函数实现</li>
<li>通过继承JSONEncoder和JSONDecoder类实现</li>
</ul>
<h4 id="首先来自定义一个数据类型">首先来自定义一个数据类型</h4>
<pre><code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-title">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, name, age, sno)</span></span>:
        <span class="hljs-keyword">self</span>.name = name
        <span class="hljs-keyword">self</span>.age = age
        <span class="hljs-keyword">self</span>.sno = sno
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Student [name: %s, age: %d, sno: %d]'</span> % (<span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.age, <span class="hljs-keyword">self</span>.sno)</code></pre>
<p>直接调用dumps()方法会引发TypeError错误：</p>
<pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; stu = Student(<span class="hljs-string">'Tom'</span>, 19, 1)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(stu)</span>
Student [name: Tom, age: 19, sno:   1]
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt;</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; json.dumps(stu)</span>
...
TypeError: Student [name: Tom, age: 19, sno:   1] is not JSON serializable</code></pre>
<p>上面的异常信息中指出：stu对象不可以被序列化为JSON格式的数据。那么我们分别通过“编写转换函数” 和 “继承JSONEncoder和JSONDecoder类” 来实现对这个自定义数据类型的JSON序列化和反序列化。</p>
<h4 id="方法1编写转换函数">方法1：编写转换函数</h4>
<p><strong><em>那么这个转换函数要完成哪两个数据类型之间的转换呢？</em></strong> 
从上面列出的JSON与Python数据类型的对应表中可知，JSON中的object对应的是Python中的dict，因此要对Python中的自定
义数据类型的对象进行序列化，就需要先把这个对象转换成json模块可以直接进行序列化dict类型。由此可知，这个转换函数是要完成的是Python对
象（不是JSON对象）与dict之间的相互转换，且序列化时转换过程是“Python对象 --&gt; dict --&gt; JSON 
object”，反序列化的过程是“JSON object -&gt; dict --&gt; 
Python对象”。所以，我们需要编写两个转换函数来分别实现序列化和反序列化时的转换过程。</p>
<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">obj2dict</span><span class="hljs-params">(obj)</span>:</span>
    d = {}
    d[<span class="hljs-string">'__class__'</span>] = obj.__class__.__name__
    d[<span class="hljs-string">'__module__'</span>] = obj.__module__
    d.update(obj.__dict__)
    <span class="hljs-keyword">return</span> d

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dict2obj</span><span class="hljs-params">(d)</span>:</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'__class__'</span> <span class="hljs-keyword">in</span> d:
        class_name = d.pop(<span class="hljs-string">'__class__'</span>)
        module_name = d.pop(<span class="hljs-string">'__module__'</span>)
        module = __import__(module_name)
        class_ = getattr(module, class_name)
        args = dict((key.encode(<span class="hljs-string">'ascii'</span>), value) <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> d.items())
        instance = class_(**args)
    <span class="hljs-keyword">else</span>:
        instance = d
    <span class="hljs-keyword">return</span> instance</code></pre>
<h5 id="序列化测试">序列化测试：</h5>
<pre><code class="hljs scala">&gt;&gt;&gt; <span class="hljs-keyword">import</span> json

&gt;&gt;&gt; obj2dict(stu)
{<span class="hljs-symbol">'sn</span>o': <span class="hljs-number">1</span>, <span class="hljs-symbol">'__module_</span>_': <span class="hljs-symbol">'__main_</span>_', <span class="hljs-symbol">'ag</span>e': <span class="hljs-number">19</span>, <span class="hljs-symbol">'__class_</span>_': <span class="hljs-symbol">'Studen</span>t', <span class="hljs-symbol">'nam</span>e': <span class="hljs-symbol">'To</span>m'}

&gt;&gt;&gt; json.dumps(obj2dict(stu))
'{<span class="hljs-string">"sno"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"__module__"</span>: <span class="hljs-string">"__main__"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"__class__"</span>: <span class="hljs-string">"Student"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>}'

&gt;&gt;&gt; json.dumps(stu, <span class="hljs-keyword">default</span>=obj2dict)
'{<span class="hljs-string">"sno"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"__module__"</span>: <span class="hljs-string">"__main__"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"__class__"</span>: <span class="hljs-string">"Student"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>}'</code></pre>
<p><code>json.dumps(stu, default=obj2dict)</code> 等价于 <code>json.dumps(obj2dict(stu))</code></p>
<h5 id="反序列化测试">反序列化测试：</h5>
<pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>json.loads(<span class="hljs-string">'{"sno": 1, "__module__": "__main__", "age": 19, "__class__": "Student", "name": "Tom"}'</span>)
{<span class="hljs-string">u'sno'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">u'__module__'</span>: <span class="hljs-string">u'__main__'</span>, <span class="hljs-string">u'age'</span>: <span class="hljs-number">19</span>, <span class="hljs-string">u'name'</span>: <span class="hljs-string">u'Tom'</span>, <span class="hljs-string">u'__class__'</span>: <span class="hljs-string">u'Student'</span>}

<span class="hljs-meta">&gt;&gt;&gt; </span>dict2obj(json.loads(<span class="hljs-string">'{"sno": 1, "__module__": "__main__", "age": 19, "__class__": "Student", "name": "Tom"}'</span>))
Student [name: Tom, age: <span class="hljs-number">19</span>, sno: <span class="hljs-number">1</span>]

<span class="hljs-meta">&gt;&gt;&gt; </span>json.loads(<span class="hljs-string">'{"sno": 1, "__module__": "__main__", "age": 19, "__class__": "Student", "name": "Tom"}'</span>, object_hook=dict2obj)
Student [name: Tom, age: <span class="hljs-number">19</span>, sno: <span class="hljs-number">1</span>]</code></pre>
<p><code>json.loads(JSON_STR, object_hook=dict2obj)</code> 等价于 <code>dict2obj(json.loads(JSON_STR))</code></p>
<h4 id="方法2继承jsonencoder和jsondecoder实现子类">方法2：继承JSONEncoder和JSONDecoder实现子类</h4>
<pre><code class="hljs python"><span class="hljs-keyword">import</span> json

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyJSONEncoder</span><span class="hljs-params">(json.JSONEncoder)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">default</span><span class="hljs-params">(self, obj)</span>:</span>
        d = {}
        d[<span class="hljs-string">'__class__'</span>] = obj.__class__.__name__
        d[<span class="hljs-string">'__module__'</span>] = obj.__module__
        d.update(obj.__dict__)
        <span class="hljs-keyword">return</span> d

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyJSONDecoder</span><span class="hljs-params">(json.JSONDecoder)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span>
        json.JSONDecoder.__init__(self, object_hook=self.dict2obj)
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dict2obj</span><span class="hljs-params">(self, d)</span>:</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'__class__'</span> <span class="hljs-keyword">in</span> d:
            class_name = d.pop(<span class="hljs-string">'__class__'</span>)
            module_name = d.pop(<span class="hljs-string">'__module__'</span>)
            module = __import__(module_name)
            class_ = getattr(module, class_name)
            args = dict((key.encode(<span class="hljs-string">'ascii'</span>), value) <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> d.items())
            instance = class_(**args)
        <span class="hljs-keyword">else</span>:
            instance = d
        <span class="hljs-keyword">return</span> instance</code></pre>
<h5 id="序列化测试-1">序列化测试：</h5>
<pre><code class="hljs cmake">&gt;&gt;&gt; stu = Student('Tom', <span class="hljs-number">19</span>, <span class="hljs-number">1</span>)

<span class="hljs-comment"># 方式一：直接调用子类MyJSONEncoder的encode()方法进行序列化</span>
&gt;&gt;&gt; MyJSONEncoder().encode(stu)
'{<span class="hljs-string">"__class__"</span>: <span class="hljs-string">"Student"</span>, <span class="hljs-string">"__module__"</span>: <span class="hljs-string">"__main__"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"sno"</span>: <span class="hljs-number">1</span>}'
&gt;&gt;&gt; MyJSONEncoder(separators=(',', ':')).encode(stu)
'{<span class="hljs-string">"__class__"</span>:<span class="hljs-string">"Student"</span>,<span class="hljs-string">"__module__"</span>:<span class="hljs-string">"__main__"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"Tom"</span>,<span class="hljs-string">"age"</span>:<span class="hljs-number">19</span>,<span class="hljs-string">"sno"</span>:<span class="hljs-number">1</span>}'

<span class="hljs-comment"># 方式二：将子类MyJSONEncoder作为cls参数的值传递给json.dumps()函数</span>
&gt;&gt;&gt; json.dumps(stu, cls=MyJSONEncoder)
'{<span class="hljs-string">"__class__"</span>: <span class="hljs-string">"Student"</span>, <span class="hljs-string">"__module__"</span>: <span class="hljs-string">"__main__"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"sno"</span>: <span class="hljs-number">1</span>}'
&gt;&gt;&gt; json.dumps(stu, cls=MyJSONEncoder, separators=(',', ':'))
'{<span class="hljs-string">"__class__"</span>:<span class="hljs-string">"Student"</span>,<span class="hljs-string">"__module__"</span>:<span class="hljs-string">"__main__"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"Tom"</span>,<span class="hljs-string">"age"</span>:<span class="hljs-number">19</span>,<span class="hljs-string">"sno"</span>:<span class="hljs-number">1</span>}'</code></pre>
<h5 id="反序列化测试-1">反序列化测试：</h5>
<pre><code class="hljs accesslog">&gt;&gt;&gt; MyJSONDecoder().decode('{<span class="hljs-string">"sno"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"__module__"</span>: <span class="hljs-string">"__main__"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>, <span class="hljs-string">"__class__"</span>: <span class="hljs-string">"Student"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"Tom"</span>}')
Student <span class="hljs-string">[name: Tom, age: 19, sno: 1]</span></code></pre>
<blockquote>
<p><strong><em>说明：</em></strong> 经过测试发现<code>MyJSONDecoder().decode(JSON_STR)</code> 和 <code>json.loads(JSON_STR, object_hook=dict2obj)</code> 只能在Python 2.7上正确执行，在Python 3.5上无法正确执行；而 <code>json.loads(JSON_STR, cls=MyJSONDecoder)</code>
 无论在Python 2.7还是在Python 
3.5上都无法正确执行。这说明json模块对于自定义数据类型的反序列化支持还是比较有限的，但是我们也可以通过
json.loads(JSON_STR)函数，不指定cls参数来得到一个dict对象，然后自己完成dict到object的转换。</p>
</blockquote>
<p>继承JSONEncoder实现序列化时还有一个额外的作用，就是可以通过iterencode()方法把一个很大的数据对象分多次进行序列化，这对于网络传输、磁盘持久化等情景非常有用。</p>
<pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> MyJSONEncoder().iterencode(stu):
<span class="hljs-meta">... </span>    print(chunk)
...
{
<span class="hljs-string">"__class__"</span>
:
<span class="hljs-string">"Student"</span>
,
<span class="hljs-string">"name"</span>
:
<span class="hljs-string">"Tom"</span>
,
<span class="hljs-string">"__module__"</span>
:
<span class="hljs-string">"__main__"</span>
,
<span class="hljs-string">"sno"</span>
:
<span class="hljs-number">1</span>
,
<span class="hljs-string">"age"</span>
:
<span class="hljs-number">19</span>
}</code></pre>
<p>大数据对象序列化网络传输伪代码：</p>
<pre><code class="hljs lua"><span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> JSONEncoder().iterencode(bigobject):
    mysocket.<span class="hljs-built_in">write</span>(chunk)</code></pre>
<h2 id="三pickle模块">三、pickle模块</h2>
<hr>
<p>pickle模块实现了用于对Python对象结构进行 序列化 和 反序列化 的二进制协议，与json模块不同的是pickle模块序列化和反序列化的过程分别叫做 pickling 和 unpickling：</p>
<ul>
<li><strong><em>pickling：</em></strong> 是将Python对象转换为字节流的过程；</li>
<li><strong><em>unpickling：</em></strong> 是将字节流二进制文件或字节对象转换回Python对象的过程；</li>
</ul>
<h3 id="pickle模块与json模块对比">1. pickle模块与json模块对比</h3>
<ul>
<li>JSON是一种文本序列化格式（它输出的是unicode文件，大多数时候会被编码为utf-8），而pickle是一个二进制序列化格式;</li>
<li>JOSN是我们可以读懂的数据格式，而pickle是二进制格式，我们无法读懂；</li>
<li>JSON是与特定的编程语言或系统无关的，且它在Python生态系统之外被广泛使用，而pickle使用的数据格式是特定于Python的；</li>
<li>默认情况下，JSON只能表示Python内建数据类型，对于自定义数据类型需要一些额外的工作来完成；pickle可以直接表示大量的
Python数据类型，包括自定数据类型（其中，许多是通过巧妙地使用Python内省功能自动实现的；复杂的情况可以通过实现specific 
object API来解决）</li>
</ul>
<h3 id="pickle模块使用的数据流格式">2. pickle模块使用的数据流格式</h3>
<p>上面提到，pickle使用的数据格式是特定于Python的。这使得它不受诸如JSON或XDR的外部标准限值，但是这也意味着非Python程
序可能无法重建pickled 
Python对象。默认情况下，pickle数据格式使用相对紧凑的二进制表示。如果需要最佳大小特征，可以有效的压缩pickled数据。
pickletools模块包含可以用于对pickle生成的数据流进行分析的工具。目前有5种不同的协议可以用于pickle。使用的协议越高，就需要
更新的Python版本去读取pickle产生的数据：</p>
<ul>
<li>协议v0是原始的“人类可读”协议，并且向后兼容早期的Python版本；</li>
<li>协议v1是一个旧的二进制格式，也与早期版本的Python兼容；</li>
<li>协议v2在Python 2.3中引入，它提供更高效的pickling；</li>
<li>协议v3是在Python 3.0添加的协议，它明确支持bytes对象，且不能被Python 2.x 进行unpickle操作；这是默认协议，也是当需要兼容其他Python 3版本时被推荐使用的协议；</li>
<li>协议4是在Python 3.4添加的协议，它添加了对极大对象的支持，pickling更多种类的对象，以及一些数据格式的优化。</li>
</ul>
<blockquote>
<p><strong><em>说明：</em></strong> Python 2.x中默认使用的是协议v0，如果协议指定为赋值或HIGHEST_PROTOCOL，将使用当前可用的最高协议版本；Python 3.x中默认使用的是协议v3，它兼容其他Python 3版本，但是不兼容Python 2。</p>
</blockquote>
<blockquote>
<p><strong><em>注意：</em></strong> 序列化（Serialization）是一个比持久化（Persistence）更加原始的概念；虽然<code>pickle</code>可以读写文件对象，但是它不处理持久化对象的命名问题，也不处理对持久化对象的并发访问问题（甚至更复杂的问题）。<code>pickle</code>模块可以将复杂对象转换为字节流，并且可以将字节流转换为具有相同内部结构的对象。或许最可能对这些字节流做的事情是将它们写入文件，但是也可以对它们进行网络传输或将它们存储在数据库中。<code>shelve</code>模块提供了一个简单的接口用于在DBM风格的数据库文件上对对象进行pickle和unpickle操作。</p>
</blockquote>
<h3 id="pickle模块提供的相关函数">3. pickle模块提供的相关函数</h3>
<p>pickle模块提供的几个序列化/反序列化的函数与json模块基本一致：</p>
<pre><code class="hljs python"><span class="hljs-comment"># 将指定的Python对象通过pickle序列化作为bytes对象返回，而不是将其写入文件</span>
dumps(obj, protocol=<span class="hljs-keyword">None</span>, *, fix_imports=<span class="hljs-keyword">True</span>)

<span class="hljs-comment"># 将通过pickle序列化后得到的字节对象进行反序列化，转换为Python对象并返回</span>
loads(bytes_object, *, fix_imports=<span class="hljs-keyword">True</span>, encoding=<span class="hljs-string">"ASCII"</span>, errors=<span class="hljs-string">"strict"</span>)

<span class="hljs-comment"># 将指定的Python对象通过pickle序列化后写入打开的文件对象中，等价于`Pickler(file, protocol).dump(obj)`</span>
dump(obj, file, protocol=<span class="hljs-keyword">None</span>, *, fix_imports=<span class="hljs-keyword">True</span>)

<span class="hljs-comment"># 从打开的文件对象中读取pickled对象表现形式并返回通过pickle反序列化后得到的Python对象</span>
load(file, *, fix_imports=<span class="hljs-keyword">True</span>, encoding=<span class="hljs-string">"ASCII"</span>, errors=<span class="hljs-string">"strict"</span>)</code></pre>
<blockquote>
<p><strong><em>说明：</em></strong> 上面这几个方法参数中，*号后面的参数都是Python 3.x新增的，目的是为了兼容Python 2.x，具体用法请参看官方文档。</p>
</blockquote>
<h3 id="实例内置数据类型的序列化反序列化">4. 实例：内置数据类型的序列化/反序列化</h3>
<h4 id="python-2.x">Python 2.x</h4>
<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; import pickle
<span class="hljs-meta">&gt;&gt;</span>&gt; 
&gt;&gt;&gt; var_a = {<span class="hljs-string">'a'</span><span class="hljs-symbol">:<span class="hljs-string">'str'</span></span>, <span class="hljs-string">'c'</span>: True, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'d'</span>: None, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span><span class="hljs-symbol">:</span>(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}

<span class="hljs-comment"># 序列化</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; var_b = pickle.dumps(var_a)
<span class="hljs-meta">&gt;&gt;</span>&gt; var_b
<span class="hljs-string">"(dp0\nS'a'\np1\nS'str'\np2\nsS'c'\np3\nI01\nsS'b'\np4\nF11.1\nsS'e'\np5\nI10\nsS'd'\np6\nNsS'g'\np7\n(I4\nI5\nI6\ntp8\nsS'f'\np9\n(lp10\nI1\naI2\naI3\nas."</span>

<span class="hljs-comment"># 反序列化</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; var_c = pickle.loads(var_b)
<span class="hljs-meta">&gt;&gt;</span>&gt; var_c
{<span class="hljs-string">'a'</span>: <span class="hljs-string">'str'</span>, <span class="hljs-string">'c'</span>: True, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'d'</span>: None, <span class="hljs-string">'g'</span>: (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]}</code></pre>
<h4 id="python-3.x">Python 3.x</h4>
<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; import pickle
<span class="hljs-meta">&gt;&gt;</span>&gt;
&gt;&gt;&gt; var_a = {<span class="hljs-string">'a'</span><span class="hljs-symbol">:<span class="hljs-string">'str'</span></span>, <span class="hljs-string">'c'</span>: True, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'d'</span>: None, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span><span class="hljs-symbol">:</span>(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}

<span class="hljs-comment"># 序列化</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; var_b = pickle.dumps(var_a)
<span class="hljs-meta">&gt;&gt;</span>&gt; var_b
b<span class="hljs-string">'\x80\x03}q\x00(X\x01\x00\x00\x00eq\x01K\nX\x01\x00\x00\x00aq\x02X\x03\x00\x00\x00strq\x03X\x01\x00\x00\x00fq\x04]q\x05(K\x01K\x02K\x03eX\x01\x00\x00\x00gq\x06K\x04K\x05K\x06\x87q\x07X\x01\x00\x00\x00bq\x08G@&amp;333333X\x01\x00\x00\x00cq\t\x88X\x01\x00\x00\x00dq\nNu.'</span>

<span class="hljs-comment"># 反序列化</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; var_c = pickle.loads(var_b)
<span class="hljs-meta">&gt;&gt;</span>&gt; var_c
{<span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'a'</span>: <span class="hljs-string">'str'</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span>: (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'c'</span>: True, <span class="hljs-string">'d'</span>: None}</code></pre>
<h4 id="dump与load">dump()与load()</h4>
<pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> pickle
&gt;&gt;&gt;
<span class="hljs-meta">&gt;&gt;&gt; </span>var_a = {<span class="hljs-string">'a'</span>:<span class="hljs-string">'str'</span>, <span class="hljs-string">'c'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'d'</span>: <span class="hljs-keyword">None</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span>:(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)}

<span class="hljs-comment"># 持久化到文件</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> open(<span class="hljs-string">'pickle.txt'</span>, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
<span class="hljs-meta">... </span>    pickle.dump(var_a, f)
...

<span class="hljs-comment"># 从文件中读取数据</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">with</span> open(<span class="hljs-string">'pickle.txt'</span>, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
<span class="hljs-meta">... </span>    var_b = pickle.load(f)
...
<span class="hljs-meta">&gt;&gt;&gt; </span>var_b
{<span class="hljs-string">'e'</span>: <span class="hljs-number">10</span>, <span class="hljs-string">'a'</span>: <span class="hljs-string">'str'</span>, <span class="hljs-string">'f'</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-string">'g'</span>: (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>), <span class="hljs-string">'b'</span>: <span class="hljs-number">11.1</span>, <span class="hljs-string">'c'</span>: <span class="hljs-keyword">True</span>, <span class="hljs-string">'d'</span>: <span class="hljs-keyword">None</span>}
&gt;&gt;&gt;</code></pre>
<blockquote>
<p><strong><em>说明：</em></strong></p>
<ul>
<li>默认情况下Python 2.x中pickled后的数据是字符串形式，需要将它转换为字节对象才能被Python 
3.x中的pickle.loads()反序列化；Python 
3.x中pickling所使用的协议是v3，因此需要在调用pickle.dumps()时指定可选参数protocol为Python 
2.x所支持的协议版本（0,1,2），否则pickled后的数据不能被被Python 2.x中的pickle.loads()反序列化；</li>
<li>Python 3.x中pickle.dump()和pickle.load()方法中指定的文件对象，必须以二进制模式打开，而Python 2.x中可以以二进制模式打开，也可以以文本模式打开。</li>
</ul>
</blockquote>
<h3 id="实例自定义数据类型的序列化反序列化-1">5. 实例：自定义数据类型的序列化/反序列化</h3>
<p>首先来自定义一个数据类型：</p>
<pre><code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-title">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, name, age, sno)</span></span>:
        <span class="hljs-keyword">self</span>.name = name
        <span class="hljs-keyword">self</span>.age = age
        <span class="hljs-keyword">self</span>.sno = sno
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Student [name: %s, age: %d, sno: %d]'</span> % (<span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.age, <span class="hljs-keyword">self</span>.sno)</code></pre>
<p>pickle模块可以直接对自定数据类型进行序列化/反序列化操作，无需编写额外的处理函数或类。</p>
<pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; stu = Student(<span class="hljs-string">'Tom'</span>, 19, 1)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; <span class="hljs-built_in">print</span>(stu)</span>
Student [name: Tom, age: 19, sno: 1]
<span class="hljs-meta">
#</span><span class="bash"> 序列化</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; var_b = pickle.dumps(stu)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; var_b</span>
b'\x80\x03c__main__\nStudent\nq\x00)\x81q\x01}q\x02(X\x04\x00\x00\x00nameq\x03X\x03\x00\x00\x00Tomq\x04X\x03\x00\x00\x00ageq\x05K\x13X\x03\x00\x00\x00snoq\x06K\x01ub.'
<span class="hljs-meta">
#</span><span class="bash"> 反序列化</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; var_c = pickle.loads(var_b)</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; var_c</span>
Student [name: Tom, age: 19, sno: 1]
<span class="hljs-meta">
#</span><span class="bash"> 持久化到文件</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; with open(<span class="hljs-string">'pickle.txt'</span>, <span class="hljs-string">'wb'</span>) as f:</span>
...     pickle.dump(stu, f)
...
<span class="hljs-meta">
#</span><span class="bash"> 从文件总读取数据</span>
<span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; with open(<span class="hljs-string">'pickle.txt'</span>, <span class="hljs-string">'rb'</span>) as f:</span>
...     pickle.load(f)
...
Student [name: Tom, age: 19, sno: 1]</code></pre>
<h2 id="四shelve模块">四、shelve模块</h2>
<hr>
<p>shelve是一个简单的数据存储方案，类似key-value数据库，可以很方便的保存python对象，其内部是通过pickle协议来实现数
据序列化。shelve只有一个open()函数，这个函数用于打开指定的文件（一个持久的字典），然后返回一个shelf对象。shelf是一种持久
的、类似字典的对象。它与“dbm”的不同之处在于，其values值可以是任意基本Python对象--pickle模块可以处理的任何数据。这包括大
多数类实例、递归数据类型和包含很多共享子对象的对象。keys还是普通的字符串。</p>
<pre><code class="hljs python">open(filename, flag=<span class="hljs-string">'c'</span>, protocol=<span class="hljs-keyword">None</span>, writeback=<span class="hljs-keyword">False</span>)</code></pre>
<p><strong><em>flag</em></strong> 参数表示打开数据存储文件的格式，可取值与<code>dbm.open()</code>函数一致：</p>
<table>
<thead>
<tr class="header">
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>'r'</td>
<td>以只读模式打开一个已经存在的数据存储文件</td>
</tr>
<tr class="even">
<td>'w'</td>
<td>以读写模式打开一个已经存在的数据存储文件</td>
</tr>
<tr class="odd">
<td>'c'</td>
<td>以读写模式打开一个数据存储文件，如果不存在则创建</td>
</tr>
<tr class="even">
<td>'n'</td>
<td>总是创建一个新的、空数据存储文件，并以读写模式打开</td>
</tr>
</tbody>
</table>
<p><strong><em>protocol</em></strong> 参数表示序列化数据所使用的协议版本，默认是pickle v3；</p>
<p><strong><em>writeback</em></strong> 参数表示是否开启回写功能。</p>
<p>我们可以把shelf对象当dict来使用--存储、更改、查询某个key对应的数据，当操作完成之后，调用shelf对象的close()函数即可。当然，也可以使用上下文管理器（with语句），避免每次都要手动调用close()方法。</p>
<h3 id="实例内置数据类型操作">实例：内置数据类型操作</h3>
<pre><code class="hljs python"><span class="hljs-comment"># 保存数据</span>
<span class="hljs-keyword">with</span> shelve.open(<span class="hljs-string">'student'</span>) <span class="hljs-keyword">as</span> db:
    db[<span class="hljs-string">'name'</span>] = <span class="hljs-string">'Tom'</span>
    db[<span class="hljs-string">'age'</span>] = <span class="hljs-number">19</span>
    db[<span class="hljs-string">'hobby'</span>] = [<span class="hljs-string">'篮球'</span>, <span class="hljs-string">'看电影'</span>, <span class="hljs-string">'弹吉他'</span>]
    db[<span class="hljs-string">'other_info'</span>] = {<span class="hljs-string">'sno'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'addr'</span>: <span class="hljs-string">'xxxx'</span>}

<span class="hljs-comment"># 读取数据</span>
<span class="hljs-keyword">with</span> shelve.open(<span class="hljs-string">'student'</span>) <span class="hljs-keyword">as</span> db:
    <span class="hljs-keyword">for</span> key,value <span class="hljs-keyword">in</span> db.items():
        print(key, <span class="hljs-string">': '</span>, value)</code></pre>
<p>输出结果：</p>
<pre><code class="hljs less"><span class="hljs-attribute">name </span>:  Tom
<span class="hljs-attribute">age </span>:  <span class="hljs-number">19</span>
<span class="hljs-attribute">hobby </span>:  [<span class="hljs-string">'篮球'</span>, <span class="hljs-string">'看电影'</span>, <span class="hljs-string">'弹吉他'</span>]
<span class="hljs-attribute">other_info </span>:  {<span class="hljs-string">'sno'</span>: <span class="hljs-number">1</span>, <span class="hljs-string">'addr'</span>: <span class="hljs-string">'xxxx'</span>}</code></pre>
<h3 id="实例自定义数据类型操作">实例：自定义数据类型操作</h3>
<pre><code class="hljs ruby"><span class="hljs-comment"># 自定义class</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span>(<span class="hljs-title">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, name, age, sno)</span></span>:
        <span class="hljs-keyword">self</span>.name = name
        <span class="hljs-keyword">self</span>.age = age
        <span class="hljs-keyword">self</span>.sno = sno
    
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__repr__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Student [name: %s, age: %d, sno: %d]'</span> % (<span class="hljs-keyword">self</span>.name, <span class="hljs-keyword">self</span>.age, <span class="hljs-keyword">self</span>.sno)

<span class="hljs-comment"># 保存数据</span>
tom = Student(<span class="hljs-string">'Tom'</span>, <span class="hljs-number">19</span>, <span class="hljs-number">1</span>)
jerry = Student(<span class="hljs-string">'Jerry'</span>, <span class="hljs-number">17</span>, <span class="hljs-number">2</span>)

with shelve.open(<span class="hljs-string">"stu.db"</span>) as <span class="hljs-symbol">db:</span>
    db[<span class="hljs-string">'Tom'</span>] = tom
    db[<span class="hljs-string">'Jerry'</span>] = jerry

<span class="hljs-comment"># 读取数据</span>
with shelve.open(<span class="hljs-string">"stu.db"</span>) as <span class="hljs-symbol">db:</span>
    print(db[<span class="hljs-string">'Tom'</span>])
    print(db[<span class="hljs-string">'Jerry'</span>])</code></pre>
<p>输出结果：</p>
<pre><code class="hljs groovy">Student [<span class="hljs-string">name:</span> Tom, <span class="hljs-string">age:</span> <span class="hljs-number">19</span>, <span class="hljs-string">sno:</span> <span class="hljs-number">1</span>]
Student [<span class="hljs-string">name:</span> Jerry, <span class="hljs-string">age:</span> <span class="hljs-number">17</span>, <span class="hljs-string">sno:</span> <span class="hljs-number">2</span>]</code></pre>
<h2 id="五总结">五、总结</h2>
<hr>
<h3 id="对比">1. 对比</h3>
<p>json模块常用于编写web接口，将Python数据转换为通用的json格式传递给其它系统或客户端；也可以用于将Python数据保存到本地文件中，缺点是明文保存，保密性差。另外，如果需要保存非内置数据类型需要编写额外的转换函数或自定义类。</p>
<p>pickle模块和shelve模块由于使用其特有的序列化协议，其序列化之后的数据只能被Python识别，因此只能用于Python系统内部。另外，Python 2.x 和 Python<br>
3.x 
默认使用的序列化协议也不同，如果需要互相兼容需要在序列化时通过protocol参数指定协议版本。除了上面这些缺点外，pickle模块和
shelve模块相对于json模块的优点在于对于自定义数据类型可以直接序列化和反序列化，不需要编写额外的转换函数或类。</p>
<p>shelve模块可以看做是pickle模块的升级版，因为shelve使用的就是pickle的序列化协议，但是shelve比pickle提供
的操作方式更加简单、方便。shelve模块相对于其它两个模块在将Python数据持久化到本地磁盘时有一个很明显的优点就是，它允许我们可以像操作
dict一样操作被序列化的数据，而不必一次性的保存或读取所有数据。</p>
<h3 id="建议">2. 建议</h3>
<ul>
<li>需要与外部系统交互时用json模块；</li>
<li>需要将少量、简单Python数据持久化到本地磁盘文件时可以考虑用pickle模块；</li>
<li>需要将大量Python数据持久化到本地磁盘文件或需要一些简单的类似数据库的增删改查功能时，可以考虑用shelve模块。</li>
</ul>
<h3 id="附录">3. 附录</h3>
<table>
<thead>
<tr class="header">
<th>要实现的功能</th>
<th>可以使用的api</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>将Python数据类型转换为（json）字符串</td>
<td>json.dumps()</td>
</tr>
<tr class="even">
<td>将json字符串转换为Python数据类型</td>
<td>json.loads()</td>
</tr>
<tr class="odd">
<td>将Python数据类型以json形式保存到本地磁盘</td>
<td>json.dump()</td>
</tr>
<tr class="even">
<td>将本地磁盘文件中的json数据转换为Python数据类型</td>
<td>json.load()</td>
</tr>
<tr class="odd">
<td>将Python数据类型转换为Python特定的二进制格式</td>
<td>pickle.dumps()</td>
</tr>
<tr class="even">
<td>将Python特定的的二进制格式数据转换为Python数据类型</td>
<td>pickle.loads()</td>
</tr>
<tr class="odd">
<td>将Python数据类型以Python特定的二进制格式保存到本地磁盘</td>
<td>pickle.dump()</td>
</tr>
<tr class="even">
<td>将本地磁盘文件中的Python特定的二进制格式数据转换为Python数据类型</td>
<td>pickle.load()</td>
</tr>
<tr class="odd">
<td>以类型dict的形式将Python数据类型保存到本地磁盘或读取本地磁盘数据并转换为数据类型</td>
<td>shelve.open()</td>
</tr>
</tbody>
</table>
<blockquote>
<h4 id="问题交流群666948590">问题交流群：666948590</h4>
</blockquote>
</div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="https://www.cnblogs.com/yyds/category/911529.html" target="_blank">Python</a></div>
<div id="EntryTag">标签: <a href="https://www.cnblogs.com/yyds/tag/Python%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96/">Python数据序列化</a>, <a href="https://www.cnblogs.com/yyds/tag/json%E6%A8%A1%E5%9D%97/">json模块</a>, <a href="https://www.cnblogs.com/yyds/tag/pickle%E6%A8%A1%E5%9D%97/">pickle模块</a>, <a href="https://www.cnblogs.com/yyds/tag/shelve%E6%A8%A1%E5%9D%97/">shelve模块</a></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(6563608,cb_blogId,1);green_channel_success(this,'谢谢推荐！');">好文要顶</a>
            <a id="green_channel_follow" onclick="follow('ddbe9fe8-42aa-e611-845c-ac853d9f53ac');" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/yyds/" target="_blank"><img src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/20161114162244.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/yyds/">云游道士</a><br>
            <a href="http://home.cnblogs.com/u/yyds/followees">关注 - 0</a><br>
            <a href="http://home.cnblogs.com/u/yyds/followers">粉丝 - 213</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow('ddbe9fe8-42aa-e611-845c-ac853d9f53ac');return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(6563608,'Digg')">
        <span class="diggnum" id="digg_count">9</span>
    </div>
    <div class="buryit" onclick="votePost(6563608,'Bury')">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/yyds/p/6427349.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/yyds/p/6427349.html" title="发布于2017-02-22 09:10">Python之文件与目录操作（os、zipfile、tarfile、shutil）</a><br><a href="https://www.cnblogs.com/yyds/p/6627208.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/yyds/p/6627208.html" title="发布于2017-03-27 16:03">Python之xml文档及配置文件处理（ElementTree模块、ConfigParser模块）</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2017-03-17 08:10</span> <a href="https://www.cnblogs.com/yyds/">云游道士</a> 阅读(<span id="post_view_count">23906</span>) 评论(<span id="post_comment_count">5</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=6563608" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(6563608);return false;">收藏</a></div>
	</div>
	<script src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/highlight.js"></script><script>markdown_highlight();</script><script type="text/javascript">var allowComments=true,cb_blogId=316903,cb_entryId=6563608,cb_blogApp=currentBlogApp,cb_blogUserGuid='ddbe9fe8-42aa-e611-845c-ac853d9f53ac',cb_entryCreatedDate='2017/3/17 8:10:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=true;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<br>
<div class="feedback_area_title">评论列表</div>
<div class="feedbackNoItems"></div>	

		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="#3643417" class="layer">#1楼</a><a name="3643417" id="comment_anchor_3643417"></a>  <span class="comment_date">2017-03-17 14:26</span> <a id="a_comment_author_3643417" href="https://www.cnblogs.com/yxnyd/" target="_blank">-草根-颜</a> <a href="http://msg.cnblogs.com/send/-%E8%8D%89%E6%A0%B9-%E9%A2%9C" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3643417" class="blog_comment_body">666666666</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3643417,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3643417,'Bury',this)">反对(0)</a></div>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="#3644132" class="layer">#2楼</a><a name="3644132" id="comment_anchor_3644132"></a>  <span class="comment_date">2017-03-18 13:18</span> <a id="a_comment_author_3644132" href="https://www.cnblogs.com/hongten/" target="_blank">Hongten</a> <a href="http://msg.cnblogs.com/send/Hongten" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3644132" class="blog_comment_body">nice!</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3644132,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3644132,'Bury',this)">反对(0)</a></div><span id="comment_3644132_avatar" style="display:none;">http://pic.cnblogs.com/face/284226/20150204161515.png</span>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="#3644693" class="layer">#3楼</a><a name="3644693" id="comment_anchor_3644693"></a>  <span class="comment_date">2017-03-19 02:23</span> <a id="a_comment_author_3644693" href="https://www.cnblogs.com/gayhub/" target="_blank">codegay</a> <a href="http://msg.cnblogs.com/send/codegay" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3644693" class="blog_comment_body">可以很方面的保存python对象，其内部上海移动pickle来序列化数据</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3644693,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3644693,'Bury',this)">反对(0)</a></div><span id="comment_3644693_avatar" style="display:none;">http://pic.cnblogs.com/face/898917/20170412122922.png</span>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="#3841025" class="layer">#4楼</a><a name="3841025" id="comment_anchor_3841025"></a>  <span class="comment_date">2017-11-15 11:33</span> <a id="a_comment_author_3841025" href="https://www.cnblogs.com/yangmingxianshen/" target="_blank">明王不动心</a> <a href="http://msg.cnblogs.com/send/%E6%98%8E%E7%8E%8B%E4%B8%8D%E5%8A%A8%E5%BF%83" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3841025" class="blog_comment_body">很全面</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3841025,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3841025,'Bury',this)">反对(0)</a></div><span id="comment_3841025_avatar" style="display:none;">http://pic.cnblogs.com/face/1260387/20171022132051.png</span>
			</div>
		</div>
	
		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="#4030836" class="layer">#5楼</a><a name="4030836" id="comment_anchor_4030836"></a><span id="comment-maxId" style="display:none;">4030836</span><span id="comment-maxDate" style="display:none;">2018/7/28 16:53:32</span>  <span class="comment_date">2018-07-28 16:53</span> <a id="a_comment_author_4030836" href="http://home.cnblogs.com/u/1436652/" target="_blank">lin_pei_de</a> <a href="http://msg.cnblogs.com/send/lin_pei_de" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_4030836" class="blog_comment_body">满分，优秀</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(4030836,'Digg',this)">支持(0)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(4030836,'Bury',this)">反对(0)</a></div>
			</div>
		</div>
	<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login('commentform');">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-工控')">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://cloud.baidu.com/campaign/purchase-2019/index.html?track=cp:dsp|pf:pc|pp:chui-bokeyuan-huodong-19caigouji-BCC-neiyeCH-190311|pu:neiyeCH-wenzilian|ci:2019cgj|kw:2105959" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-百度云')">【推荐】百度云“猪”你开年行大运，红包疯狂拿，低至1折</a><br><a href="https://gitee.com/enterprises?from=bky-2" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-gitee')">【推荐】专业便捷的企业级代码托管服务 - Gitee 码云</a><br><a href="https://www.bagevent.com/event/2468856" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'T2-GAITC')">【活动】2019第四届全球人工技术大会解码“智能+时代”</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="Python%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88json%E3%80%81pickle%E3%80%81shelve%EF%BC%89%20-%20%E4%BA%91%E6%B8%B8%E9%81%93%E5%A3%AB%20-%20%E5%8D%9A%E5%AE%A2%E5%9B%AD_files/gpt.js"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CNmn-q7ap-ECFUGzlgodABACSw"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" data-google-container-id="1" data-load-complete="true" width="300" height="250" frameborder="0"></iframe></div></div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/jason-lv/p/8270697.html" target="_blank" onclick="clickRecomItmem(8270697)">python3 序列化模块（json、pickle、shelve）</a><br>·  <a href="https://www.cnblogs.com/friday69/p/9261017.html" target="_blank" onclick="clickRecomItmem(9261017)">python序列化_json,pickle,shelve模块</a><br>·  <a href="https://www.cnblogs.com/my-times/p/7354617.html" target="_blank" onclick="clickRecomItmem(7354617)">Python的json and pickle序列化</a><br>·  <a href="https://www.cnblogs.com/xiao-xue-di/p/9450013.html" target="_blank" onclick="clickRecomItmem(9450013)">python序列化模块json&amp;&amp;pickle&amp;&amp;shelve</a><br>·  <a href="https://www.cnblogs.com/12345huangchun/p/9965042.html" target="_blank" onclick="clickRecomItmem(9965042)">序列化（pickle，shelve，json，configparser）</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CNqn-q7ap-ECFUGzlgodABACSw"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" data-google-container-id="2" data-load-complete="true" width="468" height="60" frameborder="0"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/623039/" target="_blank">团贷网一夜陨落：上周六称40亿元资金将到位，四天后唐军竟投案自首</a><br> ·  <a href="https://news.cnblogs.com/n/623037/" target="_blank">我计划收购200个公共厕所，谋求科创板上市</a><br> ·  <a href="https://news.cnblogs.com/n/623018/" target="_blank">小鹏汽车取消等速续航宣传：将带头宣传真续航</a><br> ·  <a href="https://news.cnblogs.com/n/623020/" target="_blank">蔚来汽车阻止为其进行IPO的8家投行为竞争对手服务</a><br> ·  <a href="https://news.cnblogs.com/n/623021/" target="_blank">阿里巴巴成立技术公益委员会，号召工程师用技术做公益</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/yyds/">云游道士</a><br>园龄：<a href="https://home.cnblogs.com/u/yyds/" title="入园时间：2016-11-14">2年4个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/yyds/followers/">213</a><br>关注：<a href="https://home.cnblogs.com/u/yyds/followees/">0</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow('ddbe9fe8-42aa-e611-845c-ac853d9f53ac')">+加关注</a></div><script>getFollowStatus('ddbe9fe8-42aa-e611-845c-ac853d9f53ac')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" title="Calendar" cellspacing="0" cellpadding="0">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar('2019/02/01');return false;">&lt;</a></td><td align="center">2019年3月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar('2019/04/01');return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" abbr="日" scope="col" align="center">日</th><th class="CalDayHeader" abbr="一" scope="col" align="center">一</th><th class="CalDayHeader" abbr="二" scope="col" align="center">二</th><th class="CalDayHeader" abbr="三" scope="col" align="center">三</th><th class="CalDayHeader" abbr="四" scope="col" align="center">四</th><th class="CalDayHeader" abbr="五" scope="col" align="center">五</th><th class="CalDayHeader" abbr="六" scope="col" align="center">六</th></tr><tr><td class="CalOtherMonthDay" align="center">24</td><td class="CalOtherMonthDay" align="center">25</td><td class="CalOtherMonthDay" align="center">26</td><td class="CalOtherMonthDay" align="center">27</td><td class="CalOtherMonthDay" align="center">28</td><td align="center">1</td><td class="CalWeekendDay" align="center">2</td></tr><tr><td class="CalWeekendDay" align="center">3</td><td align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td class="CalWeekendDay" align="center">9</td></tr><tr><td class="CalWeekendDay" align="center">10</td><td align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td class="CalWeekendDay" align="center">16</td></tr><tr><td class="CalWeekendDay" align="center">17</td><td align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td class="CalWeekendDay" align="center">23</td></tr><tr><td class="CalWeekendDay" align="center">24</td><td align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td class="CalTodayDay" align="center">29</td><td class="CalWeekendDay" align="center">30</td></tr><tr><td class="CalWeekendDay" align="center">31</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="https://www.cnblogs.com/yyds/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="https://www.cnblogs.com/yyds/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="https://www.cnblogs.com/yyds/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="https://www.cnblogs.com/yyds/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="https://www.cnblogs.com/yyds/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_toptags" class="sidebar-block">
<div class="catListTag">
<h3 class="catListTitle">我的标签</h3>
<ul>
<li><a href="https://www.cnblogs.com/yyds/tag/Python%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">Python数据类型</a>(4)</li><li><a href="https://www.cnblogs.com/yyds/tag/Python%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/">Python字符编码</a>(2)</li><li><a href="https://www.cnblogs.com/yyds/tag/Python%E5%AD%97%E7%AC%A6%E4%B8%B2/">Python字符串</a>(2)</li><li><a href="https://www.cnblogs.com/yyds/tag/Python%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96/">Python字符串格式化</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/Python%E4%BD%9C%E7%94%A8%E5%9F%9F/">Python作用域</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/re%E6%A8%A1%E5%9D%97/">re模块</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/shelve%E6%A8%A1%E5%9D%97/">shelve模块</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/SSH%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/">SSH工作原理</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/subporcess%E6%A8%A1%E5%9D%97/">subporcess模块</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/windows%E4%B8%8B%E5%AE%89%E8%A3%85Python/">windows下安装Python</a>(1)</li><li><a href="https://www.cnblogs.com/yyds/tag/">更多</a></li>
</ul>
</div></div><div id="sidebar_categories">
<div id="sidebar_postcategory" class="catListPostCategory sidebar-block">
<h3 class="catListTitle">随笔分类</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/yyds/category/1009852.html">Other(2)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/yyds/category/911529.html">Python(28)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/yyds/category/911530.html">Shell</a> </li>

</ul>

</div>

<div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="https://www.cnblogs.com/yyds/archive/2017/09.html">2017年9月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="https://www.cnblogs.com/yyds/archive/2017/08.html">2017年8月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="https://www.cnblogs.com/yyds/archive/2017/06.html">2017年6月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="https://www.cnblogs.com/yyds/archive/2017/05.html">2017年5月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="https://www.cnblogs.com/yyds/archive/2017/03.html">2017年3月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_5" href="https://www.cnblogs.com/yyds/archive/2017/02.html">2017年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_6" href="https://www.cnblogs.com/yyds/archive/2017/01.html">2017年1月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_7" href="https://www.cnblogs.com/yyds/archive/2016/12.html">2016年12月 (9)</a> </li>

<li><a id="CatList_LinkList_1_Link_8" href="https://www.cnblogs.com/yyds/archive/2016/11.html">2016年11月 (3)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/yyds/p/6901864.html#4216954">1. Re:Python之日志处理（logging模块）</a></li>
        <li class="recent_comment_body">Nice blog about python logging</li>
        <li class="recent_comment_author">--Jean_V</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/yyds/p/7288916.html#4179829">2. Re:Python之系统交互（subprocess）</a></li>
        <li class="recent_comment_body">对了官方的subprocess英文版,虽然体系没有那么多，但这些基本够用。通俗易懂，赞。顺便翻了你其他阅读量高的文章，作者对待知识的研究心态很优秀，赞</li>
        <li class="recent_comment_author">--sm0nk</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/yyds/p/6171340.html#4179827">3. Re:Python中的字符串与字符编码</a></li>
        <li class="recent_comment_body">相比其他介绍中文乱码问题的中肯太多了，优秀</li>
        <li class="recent_comment_author">--sm0nk</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/yyds/p/6901864.html#4179826">4. Re:Python之日志处理（logging模块）</a></li>
        <li class="recent_comment_body">经典啊</li>
        <li class="recent_comment_author">--sm0nk</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/yyds/p/7065637.html#4178053">5. Re:Windows下安装Python扩展模块提示“Unable to find vcvarsall.bat”的问题</a></li>
        <li class="recent_comment_body">@freshman118if majorVersion &gt;= 13: # v13 was skipped and should be v14 majorVersion +=......</li>
        <li class="recent_comment_author">--chungehpu</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/yyds/p/6901864.html">1. Python之日志处理（logging模块）(76129)</a></li><li><a href="https://www.cnblogs.com/yyds/p/7288916.html">2. Python之系统交互（subprocess）(39300)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6080826.html">3. Windows下安装python2和python3双版本(31499)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6186621.html">4. Python之文件读写(25697)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6563608.html">5. Python之数据序列化（json、pickle、shelve）(23905)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="https://www.cnblogs.com/yyds/p/6992125.html">1. 网络数据传输安全及SSH与HTTPS工作原理(11)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6080826.html">2. Windows下安装python2和python3双版本(9)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6901864.html">3. Python之日志处理（logging模块）(7)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6281453.html">4. Python之列表生成式、生成器、可迭代对象与迭代器(7)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6186621.html">5. Python之文件读写(6)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/yyds/p/6901864.html">1. Python之日志处理（logging模块）(34)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6563608.html">2. Python之数据序列化（json、pickle、shelve）(9)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6281453.html">3. Python之列表生成式、生成器、可迭代对象与迭代器(7)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6186621.html">4. Python之文件读写(6)</a></li><li><a href="https://www.cnblogs.com/yyds/p/6992125.html">5. 网络数据传输安全及SSH与HTTPS工作原理(6)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2019 云游道士
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->



<iframe id="google_osd_static_frame_1418793500243" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>