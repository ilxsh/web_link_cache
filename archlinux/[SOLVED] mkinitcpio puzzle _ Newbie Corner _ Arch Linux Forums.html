<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0049)https://bbs.archlinux.org/viewtopic.php?id=183045 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>[SOLVED] mkinitcpio puzzle / Newbie Corner / Arch Linux Forums</title>
<link rel="stylesheet" type="text/css" href="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/ArchLinux.css">
<link rel="canonical" href="https://bbs.archlinux.org/viewtopic.php?id=183045" title="Page 1">
<link rel="alternate" type="application/atom+xml" href="https://bbs.archlinux.org/extern.php?action=feed&amp;tid=183045&amp;type=atom" title="Atom topic feed">
    <link rel="stylesheet" media="screen" href="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/arch.css">
        <link rel="stylesheet" media="screen" href="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/archnavbar.css">
    
<link rel="shortcut icon" href="https://bbs.archlinux.org/style/ArchLinux/favicon.ico">
</head>

<body>
<div id="archnavbar" class="anb-forum">
	<div id="archnavbarlogo"><h1><a href="http://www.archlinux.org/">Arch Linux</a></h1></div>
	<div id="archnavbarmenu">
		<ul id="archnavbarlist">
			<li id="anb-home"><a href="http://www.archlinux.org/">Home</a></li><li id="anb-packages"><a href="http://www.archlinux.org/packages/">Packages</a></li><li id="anb-forums" class="anb-selected"><a href="https://bbs.archlinux.org/">Forums</a></li><li id="anb-wiki"><a href="https://wiki.archlinux.org/">Wiki</a></li><li id="anb-bugs"><a href="https://bugs.archlinux.org/">Bugs</a></li><li id="anb-security"><a href="https://security.archlinux.org/">Security</a></li><li id="anb-aur"><a href="https://aur.archlinux.org/">AUR</a></li><li id="anb-download"><a href="http://www.archlinux.org/download/">Download</a></li>		</ul>
	</div>
</div>


<div id="punviewtopic" class="pun">
<div class="top-box"></div>
<div class="punwrap">

<div id="brdheader" class="block">
	<div class="box">
		<div id="brdmenu" class="inbox">
			<ul>
				<li id="navindex" class="isactive"><a href="https://bbs.archlinux.org/index.php">Index</a></li>
				<li id="navrules"><a href="https://bbs.archlinux.org/misc.php?action=rules">Rules</a></li>
				<li id="navsearch"><a href="https://bbs.archlinux.org/search.php">Search</a></li>
				<li id="navregister"><a href="https://bbs.archlinux.org/register.php">Register</a></li>
				<li id="navlogin"><a href="https://bbs.archlinux.org/login.php">Login</a></li>
			</ul>
		</div>
		<div id="brdwelcome" class="inbox">
			<p class="conl">You are not logged in.</p>
			<ul class="conr">
				<li><span>Topics: <a href="https://bbs.archlinux.org/search.php?action=show_recent" title="Find topics with recent posts.">Active</a> | <a href="https://bbs.archlinux.org/search.php?action=show_unanswered" title="Find topics with no replies.">Unanswered</a></span></li>
			</ul>
			<div class="clearer"></div>
		</div>
	</div>
</div>



<div id="brdmain">
<div class="linkst">
	<div class="inbox crumbsplus">
		<ul class="crumbs">
			<li><a href="https://bbs.archlinux.org/index.php">Index</a></li>
			<li><span>»&nbsp;</span><a href="https://bbs.archlinux.org/viewforum.php?id=23">Newbie Corner</a></li>
			<li><span>»&nbsp;</span><strong><a href="https://bbs.archlinux.org/viewtopic.php?id=183045">[SOLVED] mkinitcpio puzzle</a></strong></li>
		</ul>
		<div class="pagepost">
			<p class="pagelink conl"><span class="pages-label">Pages: </span><strong class="item1">1</strong></p>
		</div>
		<div class="clearer"></div>
	</div>
</div>

<div id="p1427365" class="blockpost rowodd firstpost blockpost1">
	<h2><span><span class="conr">#1</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427365#p1427365">2014-06-18 17:52:46</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>brix</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2014-05-26</span></dd>
						<dd><span>Posts: 68</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>[SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<p>I'm trying to include 'sd-vconsole' among the hooks in initcpio, but mkinitcpio says </p><div class="codebox"><pre><code>Running build hook: [sd-vconsole]
/usr/lib/initcpio/install/sd-vconsole: line 37: add_systemd_unit: command not found</code></pre></div><p>A function 'add_systemd_unit' exists in the 'systemd' hook install script</p><div class="codebox"><pre><code>grep -r add_systemd_unit /usr/lib/initcpio
/usr/lib/initcpio/install/systemd:add_systemd_unit() {</code></pre></div><p>but not in '/usr/lib/initcpio/functions' where I'd imagine it was intended to be found (and <a href="https://patchwork.archlinux.org/patch/1225/" rel="nofollow">this patch</a> suggests it should be).</p><p>Is this a bug, or am I simply befuddled? Despite the 'command not found' message I get</p><div class="codebox"><pre><code>systemctl --all | grep vconsole
systemd-vconsole-setup.service   loaded    active   exited    Setup Virtual Console</code></pre></div><p>but lsinitcpio shows no sign of 'vconsole' or anything clearly related.</p><p>(Of course today's kernel update to 3.15 changed nothing, simply bringing the issue to my attention again.)</p>
						<p class="postedit"><em>Last edited by brix (2014-06-18 23:38:29)</em></p>
					</div>
					<div class="postsignature postmsg"><hr><p>Enough is more.</p></div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1427377" class="blockpost roweven">
	<h2><span><span class="conr">#2</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427377#p1427377">2014-06-18 18:47:03</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>Spider.007</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd class="postavatar"><img src="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/1684.gif" width="60" height="60" alt=""></dd>
						<dd><span>Registered: 2004-06-20</span></dd>
						<dd><span>Posts: 1,171</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<p>Yes, this is a bug in the mkinitcpio package; I think you should report this one <a href="https://bugs.archlinux.org/" rel="nofollow">https://bugs.archlinux.org/</a></p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1427383" class="blockpost rowodd">
	<h2><span><span class="conr">#3</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427383#p1427383">2014-06-18 18:54:20</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>falconindy</strong></dt>
						<dd class="usertitle"><strong>Developer</strong></dd>
						<dd class="postavatar"><img src="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/30251.jpg" width="80" height="80" alt=""></dd>
						<dd><span>From: New York, USA</span></dd>
						<dd><span>Registered: 2009-10-22</span></dd>
						<dd><span>Posts: 4,110</span></dd>
						<dd class="usercontacts"><span class="website"><a href="http://blog.falconindy.com/" rel="nofollow">Website</a></span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<p>This isn't a bug -- you need to include the systemd hook in your initramfs (and before sd-vconsole) if you want to use systemd hooks.</p>
					</div>
					<div class="postsignature postmsg"><hr><p><a href="http://blog.falconindy.com/" rel="nofollow">blog</a> | <a href="http://www.github.com/falconindy/" rel="nofollow">±github</a></p></div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1427387" class="blockpost roweven">
	<h2><span><span class="conr">#4</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427387#p1427387">2014-06-18 19:00:46</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>brix</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd><span>Registered: 2014-05-26</span></dd>
						<dd><span>Posts: 68</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<div class="quotebox"><cite>falconindy wrote:</cite><blockquote><div><p>This isn't a bug -- you need to include the systemd hook in your initramfs (and before sd-vconsole) if you want to use systemd hooks.</p></div></blockquote></div><p>(facepalm) Once explained, it's obvious. Thanks .</p>
					</div>
					<div class="postsignature postmsg"><hr><p>Enough is more.</p></div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1427515" class="blockpost rowodd">
	<h2><span><span class="conr">#5</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427515#p1427515">2014-06-18 23:26:50</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>WonderWoofy</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd class="postavatar"><img src="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/60312.jpg" width="80" height="68" alt=""></dd>
						<dd><span>From: Los Gatos, CA</span></dd>
						<dd><span>Registered: 2012-05-19</span></dd>
						<dd><span>Posts: 8,413</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<p>Please mark the thread as [Solved]</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div id="p1427673" class="blockpost roweven">
	<h2><span><span class="conr">#6</span> <a href="https://bbs.archlinux.org/viewtopic.php?pid=1427673#p1427673">2014-06-19 11:39:02</a></span></h2>
	<div class="box">
		<div class="inbox">
			<div class="postbody">
				<div class="postleft">
					<dl>
						<dt><strong>Spider.007</strong></dt>
						<dd class="usertitle"><strong>Member</strong></dd>
						<dd class="postavatar"><img src="./[SOLVED] mkinitcpio puzzle _ Newbie Corner _ Arch Linux Forums_files/1684.gif" width="60" height="60" alt=""></dd>
						<dd><span>Registered: 2004-06-20</span></dd>
						<dd><span>Posts: 1,171</span></dd>
					</dl>
				</div>
				<div class="postright">
					<h3>Re: [SOLVED] mkinitcpio puzzle</h3>
					<div class="postmsg">
						<div class="quotebox"><cite>falconindy wrote:</cite><blockquote><div><p>This isn't a bug -- you need to include the systemd hook in your initramfs (and before sd-vconsole) if you want to use systemd hooks.</p></div></blockquote></div><p>It would be nice if the .install would detect that; instead of throwing a 'command not found' error</p>
					</div>
				</div>
			</div>
		</div>
		<div class="inbox">
			<div class="postfoot clearb">
				<div class="postfootleft"><p><span>Offline</span></p></div>
			</div>
		</div>
	</div>
</div>

<div class="postlinksb">
	<div class="inbox crumbsplus">
		<div class="pagepost">
			<p class="pagelink conl"><span class="pages-label">Pages: </span><strong class="item1">1</strong></p>
		</div>
		<ul class="crumbs">
			<li><a href="https://bbs.archlinux.org/index.php">Index</a></li>
			<li><span>»&nbsp;</span><a href="https://bbs.archlinux.org/viewforum.php?id=23">Newbie Corner</a></li>
			<li><span>»&nbsp;</span><strong><a href="https://bbs.archlinux.org/viewtopic.php?id=183045">[SOLVED] mkinitcpio puzzle</a></strong></li>
		</ul>
		<div class="clearer"></div>
	</div>
</div>
</div>

<div id="brdfooter" class="block">
	<h2><span>Board footer</span></h2>
	<div class="box">
		<div id="brdfooternav" class="inbox">
			<div class="conl">
				<form id="qjump" method="get" action="https://bbs.archlinux.org/viewforum.php">
					<div><label><span>Jump to<br></span>
					<select name="id" onchange="window.location=(&#39;viewforum.php?id=&#39;+this.options[this.selectedIndex].value)">
						<optgroup label="Technical Issues and Assistance">
							<option value="23" selected="selected">Newbie Corner</option>
							<option value="17">Installation</option>
							<option value="22">Kernel &amp; Hardware</option>
							<option value="18">Applications &amp; Desktop Environments</option>
							<option value="31">Laptop Issues</option>
							<option value="8">Networking, Server, and Protection</option>
							<option value="32">Multimedia and Games</option>
							<option value="50">System Administration</option>
							<option value="35">Other Architectures</option>
						</optgroup>
						<optgroup label="Arch-centric">
							<option value="24">Announcements, Package &amp; Security Advisories</option>
							<option value="1">Arch Discussion</option>
							<option value="13">Forum &amp; Wiki discussion</option>
						</optgroup>
						<optgroup label="Pacman Upgrades, Packaging &amp; AUR">
							<option value="44">Pacman &amp; Package Upgrade Issues</option>
							<option value="49">[testing] Repo Forum</option>
							<option value="4">Creating &amp; Modifying Packages</option>
							<option value="38">AUR Issues, Discussion &amp; PKGBUILD Requests</option>
						</optgroup>
						<optgroup label="Contributions &amp; Discussion">
							<option value="20">GNU/Linux Discussion</option>
							<option value="27">Community Contributions</option>
							<option value="33">Programming &amp; Scripting</option>
							<option value="30">Other Languages</option>
							<option value="47">Artwork and Screenshots</option>
						</optgroup>
					</select></label>
					<input type="submit" value=" Go " accesskey="g">
					</div>
				</form>
			</div>
			<div class="conr">
				<p id="feedlinks"><span class="atom"><a href="https://bbs.archlinux.org/extern.php?action=feed&amp;tid=183045&amp;type=atom">Atom topic feed</a></span></p>
				<p id="poweredby">Powered by <a href="http://fluxbb.org/">FluxBB</a></p>
			</div>
			<div class="clearer"></div>
		</div>
	</div>
</div>

</div>
<div class="end-box"></div>
</div>



</body></html>