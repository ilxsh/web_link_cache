(window.webpackJsonp=window.webpackJsonp||[]).push([[347],{"2z5K":function(e,n,i){var a=i("YpBQ"),t=i("S3pA"),r=i("R3TX"),o=i("s+R0"),s=i("Ndl3"),d=i("p1C/"),l=r(function(e){var n=d(e);return s(n)&&(n=void 0),o(a(e,1,s,!0),t(n,2))});e.exports=l},Dv78:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(i("ERkP")),t=r(i("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}var s=function(e){return a.default.createElement(t.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M18 12v8.004c0 .55-.456.996-1.002.996H7.002A.998.998 0 0 1 6 20.004V12H3.993c-.548 0-.673-.32-.287-.706l7.941-7.941a.497.497 0 0 1 .706 0l7.94 7.94c.39.39.262.707-.286.707H18zm-8 4.998V21h4v-4.002a2 2 0 0 0-4 0z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};s.displayName="HomeFilledIcon";var d=s;n.default=d},"L+/v":function(e,n,i){"use strict";i.d(n,"a",function(){return x});var a,t,r=i("VrFO"),o=i.n(r),s=i("Y9Ll"),d=i.n(s),l=i("N+ot"),u=i.n(l),c=i("AuHH"),g=i.n(c),p=i("1Pcy"),m=i.n(p),v=i("5Yy7"),f=i.n(v),k=i("KEM+"),h=i.n(k),b=i("ERkP"),S=i.n(b),I=(i("aWzz"),i("L21V")),N=i("OOEx"),y=i.n(N),P=i("Pydg"),w=i("ZmIu"),F=i("Zpwg"),E=i("hE99"),T=Object(I.f)({closeButton:{id:"error-boundary.close",description:"Button to close the dialog",defaultMessage:"Close"}}),x=Object(I.g)((t=a=function(e){function n(){var e,i;o()(this,n);for(var a=arguments.length,t=new Array(a),r=0;r<a;r++)t[r]=arguments[r];return i=u()(this,(e=g()(n)).call.apply(e,[this].concat(t))),h()(m()(i),"state",{caughtError:null}),i}return f()(n,e),d()(n,[{key:"componentDidCatch",value:function(e,n){setTimeout(function(){throw e},0),this.setState({caughtError:{error:e,info:n}})}},{key:"getErrorString",value:function(){var e=this.state.caughtError,n=e.error,i=e.info;return"Error: ".concat(n.message||String(n),".\nError info: ").concat(i.componentStack,".")}},{key:"getFrontendVersion",value:function(){var e=E.b||"undefined";return S.a.createElement(I.b,{id:"error-boundary.frontendVersion",description:"label for version",defaultMessage:"Frontend Version: {frontendVersion}",values:{frontendVersion:e},tagName:"p"})}},{key:"renderErrorDetail",value:function(){return S.a.createElement("div",null,S.a.createElement(I.b,{id:"error-boundary.description",description:"Additional text shown when displaying a technical error",defaultMessage:"Our team has been notified. If the problem persists, please contact Atlassian Support.",tagName:"p"}),this.getFrontendVersion(),S.a.createElement("h3",null,"Error details:"),S.a.createElement("pre",{style:{whiteSpace:"pre-wrap",borderLeft:"2px solid red",paddingLeft:20}},this.getErrorString()))}},{key:"render",value:function(){var e=this.state.caughtError,n=this.props,i=n.modal,a=n.intl;if(!e)return this.props.children;var t=S.a.createElement(I.b,{id:"error-boundary.title",description:"Title shown when displaying a technical error",defaultMessage:"Something's gone wrong"});if(i){var r=[{text:i.closeText||a.formatMessage(T.closeButton),onClick:i.onClose||null}];return S.a.createElement(P.b,null,S.a.createElement(w.a,{appearance:"danger",heading:t,actions:r},this.renderErrorDetail()),S.a.createElement(F.b,null))}return S.a.createElement("div",{style:{padding:20}},S.a.createElement("h3",null,S.a.createElement("span",{style:{color:"#DE350B",marginRight:10}},S.a.createElement(y.a,{size:"medium",label:""})),t),this.renderErrorDetail(),S.a.createElement(F.b,null))}}]),n}(b.Component),h()(a,"defaultProps",{modal:null}),t))},"NK/E":function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(i("ERkP")),t=r(i("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}var s=function(e){return a.default.createElement(t.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0 1 12 4a4 4 0 0 1 4 4.002V10a2 2 0 0 1 2 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 0 1 6 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0 0 12 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>'},e))};s.displayName="LockFilledIcon";var d=s;n.default=d},"X+YX":function(e,n,i){var a=i("JBn+"),t=i("OfKG"),r=i("sCL+"),o=i("H87J"),s=i("SU8Q"),d=i("S0iI"),l=200;e.exports=function(e,n,i,u){var c=-1,g=t,p=!0,m=e.length,v=[],f=n.length;if(!m)return v;i&&(n=o(n,s(i))),u?(g=r,p=!1):n.length>=l&&(g=d,p=!1,n=new a(n));e:for(;++c<m;){var k=e[c],h=null==i?k:i(k);if(k=u||0!==k?k:0,p&&h==h){for(var b=f;b--;)if(n[b]===h)continue e;v.push(k)}else g(n,h,u)||v.push(k)}return v}},bx1d:function(e,n,i){"use strict";i.d(n,"a",function(){return b});var a=i("RhWx"),t=i.n(a),r=i("tQaH"),o=i.n(r),s=i("VrFO"),d=i.n(s),l=i("N+ot"),u=i.n(l),c=i("AuHH"),g=i.n(c),p=i("1Pcy"),m=i.n(p),v=i("5Yy7"),f=i.n(v),k=i("KEM+"),h=i.n(k),b=function(e){function n(e){var i;return d()(this,n),i=u()(this,g()(n).call(this)),h()(m()(i),"showFlag",function(e){var n=i.state,a=n.flags,r=n.nextFlagId;if(!a.find(function(n){return n.id===e.id})){var s=o()({id:r},e);return i.setState({flags:[].concat(t()(i.state.flags),[s]),nextFlagId:r+1}).then(function(){return s})}}),h()(m()(i),"hideFlag",function(e){i.setState({flags:i.state.flags.filter(function(n){return n.id!==e})})}),h()(m()(i),"showSuccessFlag",function(e){var n=e.title,a=e.description,t=e.actions;return i.showFlag({type:"success",title:n,description:a,close:"auto",actions:t})}),h()(m()(i),"showInfoFlag",function(e){var n=e.title,a=e.description,t=e.actions;return i.showFlag({type:"info",title:n,description:a,actions:t})}),h()(m()(i),"showWarningFlag",function(e){var n=e.title,a=e.description,t=e.actions;return i.showFlag({type:"warning",title:n,description:a,actions:t})}),h()(m()(i),"showErrorFlag",function(e){var n=e.title,a=e.description,t=e.actions;return i.showFlag({type:"error",title:n,description:a,actions:t})}),i.state={flags:e||[],nextFlagId:e?e.length:0},i}return f()(n,e),n}(i("lZoD").a)},ltac:function(e,n,i){"use strict";function a(e){for(var n=e.offsetTop;e.offsetParent;)n+=(e=e.offsetParent).offsetTop;return n}function t(e){if(!e||e===document)return null;var n=window.getComputedStyle(e);return e.scrollHeight>e.clientHeight&&"hidden"!==e.style.overflow&&"visible"!==n.overflow?e:t(e.parentNode)}function r(e,n){n=n||t(e),e&&n&&!function(e,n){if(!e)return!1;n=n||document.scrollingElement||document.body.parentNode;var i=e.offsetHeight,t=a(e),r=a(n)+n.scrollTop,o=n.offsetHeight;return t>=r&&t+i<=r+o}(e,n)&&(n.scrollTop=a(e)-a(n)-n.clientHeight/2)}i.d(n,"a",function(){return t}),i.d(n,"b",function(){return r})},nosZ:function(e,n,i){"use strict";i.r(n);var a=i("VrFO"),t=i.n(a),r=i("Y9Ll"),o=i.n(r),s=i("N+ot"),d=i.n(s),l=i("AuHH"),u=i.n(l),c=i("5Yy7"),g=i.n(c),p=i("KEM+"),m=i.n(p),v=i("ERkP"),f=i.n(v),k=(i("aWzz"),i("2srY")),h=i.n(k),b=i("kFJ8"),S=i("lZoD"),I=i("L+/v"),N=i("bx1d"),y=i("Clud"),P=i("+mzV"),w=i("++l3"),F=i("RhWx"),E=i.n(F),T=i("VtSi"),x=i.n(T),C=i("cbiG"),D=i.n(C),A=i("tQaH"),O=i.n(A),V=i("1Pcy"),L=i.n(V),M=i("Jygk"),R=i.n(M),j=i("6R5o"),$=i.n(j),K=i("nnRT"),_=i.n(K),U=i("L21V"),q=i("0rLj"),H=i("PTiB"),B=i("+5ab"),z=i("+CY+"),G={kind:"Document",definitions:function(e){var n={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!n[i]&&(n[i]=!0,!0)})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTree"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"paginationLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nearestAncestorCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"naPreviousSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"naFollowingSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"previousSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"followingSiblingsCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"childrenCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"currentPage"},name:{kind:"Name",value:"page"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}},{kind:"Argument",name:{kind:"Name",value:"pageTree"},value:{kind:"Variable",name:{kind:"Name",value:"paginationLimit"}}},{kind:"Argument",name:{kind:"Name",value:"enablePaging"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"nearestAncestors"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nearestAncestorCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"previousSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"naPreviousSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followingSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"naFollowingSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previousSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"previousSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followingSiblings"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"followingSiblingsCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"childrenCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageListFragment"},directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"rootLevelPages"},name:{kind:"Name",value:"pages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spaceKey"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}].concat([{kind:"FragmentDefinition",name:{kind:"Name",value:"PageInfoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Page"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}],[{kind:"FragmentDefinition",name:{kind:"Name",value:"PageListFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PaginatedPageList"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}])),loc:{start:0,end:1394,source:{body:"\n  query PageTree(\n    $spaceKey: String!\n    $contentId: ID!\n    $paginationLimit: Int\n    $nearestAncestorCursor: String\n    $naPreviousSiblingsCursor: String\n    $naFollowingSiblingsCursor: String\n    $previousSiblingsCursor: String\n    $followingSiblingsCursor: String\n    $childrenCursor: String\n  ) {\n    currentPage: page(\n      id: $contentId\n      pageTree: $paginationLimit\n      enablePaging: true\n    ) {\n      ...PageInfoFragment\n      nearestAncestors(after: $nearestAncestorCursor) {\n        count\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          ...PageInfoFragment\n          previousSiblings(after: $naPreviousSiblingsCursor) {\n            ...PageListFragment\n          }\n          followingSiblings(after: $naFollowingSiblingsCursor) {\n            ...PageListFragment\n          }\n        }\n      }\n      previousSiblings(after: $previousSiblingsCursor) {\n        ...PageListFragment\n      }\n      followingSiblings(after: $followingSiblingsCursor) {\n        ...PageListFragment\n      }\n      children(after: $childrenCursor) {\n        ...PageListFragment\n      }\n    }\n    rootLevelPages: pages(spaceKey: $spaceKey) {\n      nodes {\n        ...PageInfoFragment\n      }\n    }\n    space(key: $spaceKey) {\n      id\n      homepage {\n        id\n      }\n      operations {\n        operation\n        targetType\n      }\n    }\n  }\n\n  \n  \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTreeRootLevelPages"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"rootLevelPages"},name:{kind:"Name",value:"pages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spaceKey"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"spaceKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"homepage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:422,source:{body:"\n  query PageTreeRootLevelPages($spaceKey: String!) {\n    rootLevelPages: pages(spaceKey: $spaceKey) {\n      nodes {\n        id\n        hasChildren\n        title\n        hasRestrictions\n        hasInheritedRestrictions\n        links {\n          webui\n        }\n      }\n    }\n    space(key: $spaceKey) {\n      id\n      homepage {\n        id\n      }\n      operations {\n        operation\n        targetType\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},W={kind:"Document",definitions:function(e){var n={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!n[i]&&(n[i]=!0,!0)})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PageTreeChildren"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]},{kind:"Field",name:{kind:"Name",value:"children"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PageInfoFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}].concat([{kind:"FragmentDefinition",name:{kind:"Name",value:"PageInfoFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Page"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasChildren"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasInheritedRestrictions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"links"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"webui"},arguments:[],directives:[]}]}}]}}])),loc:{start:0,end:337,source:{body:"\n  query PageTreeChildren($contentId: ID!, $first: Int, $after: String) {\n    page(id: $contentId) {\n      ...PageInfoFragment\n      children(first: $first, after: $after) {\n        count\n        nodes {\n          ...PageInfoFragment\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  }\n\n  \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageBeforeMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siblingId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageBefore"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"siblingId"},value:{kind:"Variable",name:{kind:"Name",value:"siblingId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:182,source:{body:"\n  mutation MovePageBeforeMutation($pageId: ID!, $siblingId: ID!) {\n    movePageBefore(input: { pageId: $pageId, siblingId: $siblingId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},J={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageAfterMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"siblingId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageAfter"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"siblingId"},value:{kind:"Variable",name:{kind:"Name",value:"siblingId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:180,source:{body:"\n  mutation MovePageAfterMutation($pageId: ID!, $siblingId: ID!) {\n    movePageAfter(input: { pageId: $pageId, siblingId: $siblingId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MovePageAppendMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"parentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movePageAppend"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}},{kind:"ObjectField",name:{kind:"Name",value:"parentId"},value:{kind:"Variable",name:{kind:"Name",value:"parentId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:179,source:{body:"\n  mutation MovePageAppendMutation($pageId: ID!, $parentId: ID!) {\n    movePageAppend(input: { pageId: $pageId, parentId: $parentId }) {\n      page {\n        id\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Z=i("97Jx"),ee=i.n(Z),ne=i("7wq/"),ie=i.n(ne),ae=i("KsTJ"),te=i("9rbw"),re=i("llcG"),oe=i("Ty0x"),se=i("sP66"),de=i("PLaw"),le=i.n(de),ue=i("5ypJ"),ce=i.n(ue),ge=i("Dv78"),pe=i.n(ge),me=i("NK/E"),ve=i.n(me),fe=i("POWg"),ke=i("7A9o"),he=i("ltac"),be=function(e){var n=e.spaceId;return{type:"sendTrackEvent",data:{action:"updated",source:"viewPageScreen",containerType:"space",containerId:n,objectType:"page",objectId:e.pageId,actionSubject:"page",attributes:{previousSpaceId:n,previousParentPageId:e.previousParentPageId,newSpaceId:n,newParentPageId:e.newParentPageId}}}},Se=function(){return{type:"sendUIEvent",data:{action:"dragged",actionSubject:"pageTree",source:"viewPageScreen"}}},Ie=function(e){return{type:"sendUIEvent",data:{action:"dropped",actionSubject:"pageTree",source:"viewPageScreen",attributes:{isValidTarget:e}}}},Ne=function(){return{type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen"}}},ye=function(){return{type:"sendUIEvent",data:{action:"pressed",actionSubject:"keyboardShortcut",actionSubjectId:"pageTreeDragDropUndo",source:"viewPageScreen"}}},Pe=function(e,n,i){return{type:"sendUIEvent",data:{containerType:"space",containerId:n,objectType:"page",action:e,actionSubject:"pageTree",source:i?"pageTreeDrawer":"containerNavigation",attributes:{navigationLayer:"container"}}}},we=function(){return{type:"sendUIEvent",data:{action:"clicked",actionSubject:"button",actionSubjectId:"showAllButton",source:"containerNavigation"}}};function Fe(){var e=ie()(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  flex-shrink: 0;\n  align-items: flex-start;\n"]);return Fe=function(){return e},e}var Ee=ae.default.div(Fe());function Te(){var e=ie()(["\n  margin: 10px 0 10px 0;\n  width: 100%;\n"]);return Te=function(){return e},e}function xe(){var e=ie()(["\n  margin: 0 4px;\n"]);return xe=function(){return e},e}function Ce(){var e=ie()(["\n  /* Grows to fill up the remaining space */\n  flex-grow: 1;\n  /* Expands with the content */\n  flex-shrink: 0;\n  /* Expands narrow tree to at least the width of the sidebar */\n  width: 100%;\n  /* Turns on flex so child can grow too */\n  display: flex;\n  /* Only page tree gets scrollable */\n\n  > div {\n    /* Grow atlaskit/tree div vertically, so user can go out of bound on the bottom*/\n    flex-grow: 1;\n  }\n"]);return Ce=function(){return e},e}function De(){var e=ie()(["\n  display: flex;\n  width: 100%;\n"]);return De=function(){return e},e}function Ae(){var e=ie()(["\n  width: 24px;\n  text-align: center;\n  font-size: 12pt;\n  color: ",";\n"]);return Ae=function(){return e},e}function Oe(){var e=ie()(["\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 5px;\n"]);return Oe=function(){return e},e}var Ve=16,Le="medium",Me=ae.default.div(Oe()),Re=ae.default.div(Ae(),function(e){return e.itemIsRestricted?ke.colors.R400:"inherit"}),je=ae.default.div(De()),$e=ae.default.div(Ce()),Ke=ae.default.div(xe()),_e=ae.default.div(Te()),Ue=Object(U.g)(Object(H.a)()(function(e){function n(){var e,i;t()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=d()(this,(e=u()(n)).call.apply(e,[this].concat(r))),m()(L()(i),"scrolledItemId",null),m()(L()(i),"collapsePage",function(e){var n=i.props,a=n.isInDrawer,t=n.tree;(0,n.createAnalyticsEvent)(Pe("collapsed",i.props.spaceId,a)).fire(),i.props.onCollapse(t.items[e])}),m()(L()(i),"expandPage",function(e){var n=i.props,a=n.isInDrawer,t=n.tree;(0,n.createAnalyticsEvent)(Pe("expanded",i.props.spaceId,a)).fire(),i.props.onExpand(t.items[e])}),m()(L()(i),"dragStart",function(){var e=D()(x.a.mark(function e(n){var a,t,r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=i.props,t=a.onDragStart,r=a.createAnalyticsEvent,t(n),r(Se()).fire();case 3:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()),m()(L()(i),"dragEnd",function(){var e=D()(x.a.mark(function e(n,a){var t,r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.props,r=t.onDragEnd,o=t.createAnalyticsEvent,r(n,a),o(Ie(!!a)).fire();case 3:case"end":return e.stop()}},e)}));return function(n,i){return e.apply(this,arguments)}}()),m()(L()(i),"visitPage",function(e){return function(n){var a=i.props,t=a.isInDrawer;(0,a.createAnalyticsEvent)(Pe("clicked",i.props.spaceId,t)).fire(),n.metaKey||n.shiftKey||n.altKey||n.ctrlKey||1===n.button||(n.preventDefault(),i.props.onClick(e))}}),m()(L()(i),"onIconClick",function(e){return function(n){n.preventDefault(),n.stopPropagation(),e()}}),m()(L()(i),"getIcon",function(e,n,a){return function(){var t=i.props.isSuperAdmin,r=e.isChildrenLoading,o=e.hasChildren,s=e.isExpanded,d=e.hasRestrictions,l=e.hasInheritedRestrictions,u=(d||l)&&t;return r?f.a.createElement(Ke,null,f.a.createElement(fe.a,{size:Ve})):o?s?f.a.createElement("div",{role:"button",tabIndex:"0",onClick:i.onIconClick(function(){return a(e.id)})},f.a.createElement(le.a,{primaryColor:u?ke.colors.R400:null,label:"",size:Le})):f.a.createElement("div",{role:"button",tabIndex:"0",onClick:i.onIconClick(function(){return n(e.id)})},f.a.createElement(ce.a,{primaryColor:u?ke.colors.R400:null,label:"",size:Le})):f.a.createElement(Re,{itemIsRestricted:u},"•")}}),m()(L()(i),"getText",function(e){var n=e.data?e.data.title:"";return e.id===i.props.spaceHomePageId?f.a.createElement("span",null,f.a.createElement(Me,null,f.a.createElement(pe.a,{label:"",size:"small"})),n):n}),m()(L()(i),"getItemStyle",function(e,n){return function(a){var t=n.hasRestrictions,r=n.hasInheritedRestrictions,o=i.props.isSuperAdmin,s=O()({},a);return s.itemBase["&:hover"]={backgroundColor:ke.colors.N30},s.itemBase.backgroundColor="transparent",s.beforeWrapper.marginRight=4,o&&(t||r)&&(s.textWrapper.color=ke.colors.R400),e.isDragging&&(s.itemBase.boxShadow="".concat(ke.colors.N60A," 1px 5px 11px 2px"),s.itemBase.borderRadius=5,s.itemBase.backgroundColor=ke.colors.N30),e.combineTargetFor&&(s.itemBase.backgroundColor=ke.colors.N30),i.isDragInvalid(e)&&(s.textWrapper.color=ke.colors.N80,s.beforeWrapper.color=ke.colors.N80),s}}),m()(L()(i),"isDragInvalid",function(e){return e.isDragging&&!e.draggingOver}),m()(L()(i),"patchInnerRef",function(e,n){return e.data.isSelected?function(a){n.innerRef(a),setTimeout(function(){return i.scrollToItem(e.id,a)},0)}:n.innerRef}),m()(L()(i),"getAfterIcon",function(e){return function(){var n=e.hasRestrictions,a=e.hasInheritedRestrictions;return i.props.isSuperAdmin&&n&&!a?f.a.createElement(ve.a,{primaryColor:ke.colors.R400}):null}}),m()(L()(i),"renderItem",function(e){var n=e.item,a=e.onExpand,t=e.onCollapse,r=e.provided,o=e.snapshot,s=i.patchInnerRef(n,r);return f.a.createElement("div",ee()({ref:s},r.draggableProps,r.dragHandleProps),f.a.createElement(oe.a,{href:"".concat(B.CONTEXT_PATH).concat(n.data.webui),spacing:"compact",isSelected:n.data.isSelected,text:i.getText(n),before:i.getIcon(n,a,t),after:i.getAfterIcon(n),onClick:i.visitPage(n),styles:i.getItemStyle(o,n)}))}),i}return g()(n,e),o()(n,[{key:"scrollToItem",value:function(e,n){this.scrolledItemId!==e&&Object(he.b)(n),this.scrolledItemId=e}},{key:"render",value:function(){var e=this.props,n=e.tree,i=e.loadMorePages,a=e.isTreeTruncated,t=e.isDraggable,r=e.intl,o=a?f.a.createElement(_e,null,f.a.createElement(re.a,{shouldFitContainer:!0,onClick:i},f.a.createElement(U.b,{id:"page-tree.pages.show.all",defaultMessage:"Show all pages"}))):null,s=a?je:$e;return f.a.createElement(Ee,null,f.a.createElement(se.a,{heading:r.formatMessage({id:"pages.word"})},o,f.a.createElement(s,null,f.a.createElement(te.a,{tree:n,isDragEnabled:t,renderItem:this.renderItem,onExpand:this.expandPage,onCollapse:this.collapsePage,onDragStart:this.dragStart,onDragEnd:this.dragEnd,offsetPerLevel:24,isNestingEnabled:!0})),o))}}]),n}(v.Component))),qe=i("yTLO"),He=i("1whV"),Be=i.n(He);function ze(){var e=ie()(["\n  display: flex;\n"]);return ze=function(){return e},e}function Ge(){var e=ie()(["\n  padding-left: 4px;\n  padding-right: 7px;\n  line-height: 24px;\n  cursor: default;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #42526e;\n"]);return Ge=function(){return e},e}function Qe(){var e=ie()(["\n  padding: 8px 0px 8px 0px;\n  box-sizing: border-box;\n  height: 40px;\n  width: fit-content;\n"]);return Qe=function(){return e},e}var We=ae.default.div(Qe()),Ye=ae.default.span(Ge()),Je=ae.default.div(ze()),Xe=Object(U.f)({pages:{id:"pages.word",defaultMessage:"Pages"},failedLoadTooltip:{id:"pagetree.failed.load.tooltip",defaultMessage:"Hold tight, we’re working on fixing this."},failedLoadContent:{id:"pagetree.failed.load.content",defaultMessage:"Page tree failed to load"}}),Ze=Object(U.g)(function(e){function n(){return t()(this,n),d()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props.intl;return f.a.createElement(se.a,{heading:e.formatMessage(Xe.pages)},f.a.createElement(We,null,f.a.createElement(qe.a,{content:e.formatMessage(Xe.failedLoadTooltip),position:"bottom"},f.a.createElement(Je,null,f.a.createElement(Be.a,{label:"error",primaryColor:"rgb(191, 38, 0)"}),f.a.createElement(Ye,null,e.formatMessage(Xe.failedLoadContent))))))}}]),n}(v.Component));function en(){var e=ie()(["\n  text-align: center;\n"]);return en=function(){return e},e}var nn,an,tn=ae.default.div(en()),rn=Object(U.f)({pages:{id:"pages.word",defaultMessage:"Pages"}}),on=Object(U.g)(function(e){function n(){return t()(this,n),d()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props.intl;return f.a.createElement(Ee,null,f.a.createElement(se.a,{heading:e.formatMessage(rn.pages)},f.a.createElement(tn,null,f.a.createElement(fe.a,{size:20}))))}}]),n}(v.Component)),sn=function(){function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t()(this,e),m()(this,"pop",function(){return n.stack.pop()}),m()(this,"peek",function(){return n.stack.slice(-1)[0]}),this.size=i,this.stack=[]}return o()(e,[{key:"push",value:function(e,n,i,a){var t=e[n.parentId],r=t.children[n.index],o=t.children.length>1?n:{parentId:n.parentId};this.stack.push({pageId:r,source:i,destination:o,flagId:a}),this.stack=this.stack.slice(-1*this.size)}}]),e}(),dn="https://support.atlassian.com/",ln=i("6BAR"),un=i("2z5K"),cn=i.n(un),gn=function(e){return e&&e.nodes&&e.nodes.length?e.nodes:[]},pn=function(e){return e.map(function(e){return e.id})},mn=function e(n,i,a){var t=n[i];if(!(a&&n&&i&&t))return"VIRTUAL_ROOT_ID";switch(i){case a:return a;case"VIRTUAL_LOCAL_ROOT_ID":return"VIRTUAL_LOCAL_ROOT_ID";default:return e(n,t.parentId,a)}},vn=function(e){return!e.hasChildren||Boolean(e.children)&&e.children.length>0},fn=function(e,n){return Object(ln.a)(e,function(i){for(var a in n){var t=e[a],r=n[a];if(t){var o=vn(r)?r.children:t.children;i[a]=O()({},r,{parentId:t.parentId,children:o})}else i[a]=r}return i})},kn=function(e,n){return{count:e.count+n.count,nodes:[].concat(E()(e.nodes),E()(n.nodes))}},hn=function(e){var n=e.previousSiblings,i=e.followingSiblings,a=e.children;return e.nearestAncestors.nodes.filter(function(e){return e.previousSiblings.pageInfo.hasNextPage||e.followingSiblings.pageInfo.hasNextPage}).length>0||n.pageInfo.hasNextPage||i.pageInfo.hasNextPage||a.pageInfo.hasNextPage},bn=function e(n,i,a){if(i[n]){var t=i[n].parentId;if(t)return a.add(t),e(t,i,a)}return a},Sn=function(e,n){return n?Object(ln.a)(n,function(n){var i=e.previousSiblings,a=e.followingSiblings,t=e.nearestAncestors,r=e.children,o=n.previousSiblings,s=n.followingSiblings,d=n.nearestAncestors,l=n.children;o.nodes=cn()(o.nodes,i.nodes,"id"),s.nodes=cn()(s.nodes,a.nodes,"id"),l.nodes=cn()(l.nodes,r.nodes,"id");var u=cn()(t.nodes,d.nodes,"id");return d.nodes.forEach(function(e){var n=u.filter(function(n){return n.id===e.id});if(n.length>0){var i=n[0],a=i.previousSiblings,t=i.followingSiblings;a.nodes=cn()(e.previousSiblings.nodes,a.nodes,"id"),t.nodes=cn()(e.followingSiblings.nodes,t.nodes,"id")}}),d.nodes=u,o.pageInfo.hasNextPage=o.pageInfo.hasNextPage&&i.pageInfo.hasNextPage,s.pageInfo.hasNextPage=s.pageInfo.hasNextPage&&a.pageInfo.hasNextPage,d.pageInfo.hasNextPage=d.pageInfo.hasNextPage&&t.pageInfo.hasNextPage,n}):e},In=function(e,n){if(!e)return n;var i=e.previousSiblings,a=e.followingSiblings,t=e.nearestAncestors,r=e.children,o={},s=i.pageInfo.endCursor;o.previousSiblingsCursor=s||n.previousSiblingsCursor;var d=a.pageInfo.endCursor;o.followingSiblingsCursor=d||n.followingSiblingsCursor;var l=t.pageInfo.endCursor;o.nearestAncestorsCursor=l||n.nearestAncestorsCursor;var u=r.pageInfo.endCursor;o.childrenCursor=u||n.childrenCursor;var c=t.nodes.filter(function(e){return e.previousSiblings.pageInfo.hasNextPage}),g=c.length>0?c[0].previousSiblings.pageInfo.endCursor:null;o.naPreviousSiblingsCursor=g||n.naPreviousSiblingsCursor;var p=t.nodes.filter(function(e){return e.followingSiblings.pageInfo.hasNextPage}),m=p.length>0?p[0].followingSiblings.pageInfo.endCursor:null;return o.naFollowingSiblingsCursor=m||n.naFollowingSiblingsCursor,o},Nn=i("uUTq"),yn=i.n(Nn),Pn=function(e){return{id:e.id,children:gn(e.children),parentId:null,hasChildren:e.hasChildren,isExpanded:!1,isChildrenLoading:!1,hasRestrictions:e.hasRestrictions||!1,hasInheritedRestrictions:e.hasInheritedRestrictions||!1,data:{title:e.title,webui:e.links.webui}}},wn=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=gn(e).map(function(e){var i=Pn(e);return n[e.id]=i,i});return n.VIRTUAL_ROOT_ID={id:"VIRTUAL_ROOT_ID",children:pn(a),parentId:null,hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",webui:""}},n.VIRTUAL_LOCAL_ROOT_ID={id:"VIRTUAL_LOCAL_ROOT_ID",children:[],parentId:"VIRTUAL_ROOT_ID",hasChildren:!0,isExpanded:!0,isChildrenLoading:!1,hasRestrictions:!1,hasInheritedRestrictions:!1,data:{title:"",webui:""}},i&&(n=En(n)),n},Fn=function(e,n){var i={};if(!e)return i;i=function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n){var a=gn(n.children),t=gn(n.nearestAncestors),r=[].concat(E()(gn(n.previousSiblings)),E()(gn(n.followingSiblings)));return i[n.id]=Pn(n),r.forEach(function(n){return e(n,i)}),t.forEach(function(n){return e(n,i)}),a.forEach(function(n){return e(n,i)}),i}}(e,i),i=wn(n,i,!1);var a=gn(e.nearestAncestors),t=gn(e.children),r=[].concat(E()(E()(gn(e.previousSiblings)).reverse()),[{id:e.id,children:t}],E()(gn(e.followingSiblings)));if(a.forEach(function(e,n){var t=[];if(0===n)t=r;else{var o=a[n-1];t=[].concat(E()(E()(gn(o.previousSiblings)).reverse()),[o],E()(gn(o.followingSiblings)))}i[e.id].children=pn(t)}),i[e.id].children=pn(t),a.length){var o=a[a.length-1],s=[].concat(E()(E()(gn(o.previousSiblings)).reverse()),[o],E()(gn(o.followingSiblings)));i.VIRTUAL_LOCAL_ROOT_ID.children=pn(s)}return i=En(i)},En=function(e){return Object(ln.a)(e,function(e){Object.keys(e).forEach(function(n){var i=e[n];i&&i.children&&i.children.length&&i.children.forEach(function(n){"string"!=typeof n||"VIRTUAL_LOCAL_ROOT_ID"===i.id&&"VIRTUAL_ROOT_ID"===e[n].parentId||(e[n].parentId=i.id)})})})},Tn=function(e,n,i){return Object(ln.a)(e,function(e){e[n].children=i;var a=xn(e,i,n);En(a)})},xn=function(e,n,i){return Object(ln.a)(e,function(e){n.forEach(function(n){if(e[n]&&e[n].parentId&&e[n].parentId!==i){var a=e[e[n].parentId];a.children=yn()(a.children,n)}})})},Cn=Object(U.f)({flagErrorTitle:{id:"pagetree.dragndrop.failed.title",defaultMessage:"Something went wrong."},flagErrorDescription:{id:"pagetree.dragndrop.failed.description",defaultMessage:"Refresh the page and try again. If this keeps happening, let us know using the link below."},flagErrorAction:{id:"pagetree.dragndrop.failed.action.visitsupport",defaultMessage:"Visit Atlassian Support"},flagUndoTitle:{id:"pagetree.dragndrop.undo.title",defaultMessage:'Moved "{pageTitle}"',description:"The page is moved on the page tree"},flagUndoAction:{id:"pagetree.dragndrop.undo.action",defaultMessage:"Undo",description:"Action to revert drag&drop movement on the page tree"},flagLargePageTreeTitle:{id:"pagetree.dragndrop.lpt.title",defaultMessage:"Too many pages",description:"Message when there are too many pages in the page tree"},flagLargePageTreeDescription:{id:"pagetree.dragndrop.lpt.description",defaultMessage:"You are trying to drag a page while viewing too many pages at once. To reorder, visit your space settings.",description:"Message when there are too many pages in the page tree"},flagLargePageTreeAction:{id:"pagetree.dragndrop.lpt.action",defaultMessage:"Reorder pages",description:"Link to page Reorder Pages within Space settings"}}),Dn=500,An=100,On=500,Vn="DND",Ln="LOAD",Mn=Object(U.g)(Object(H.a)()((an=nn=function(e){function n(){var e,i;t()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=d()(this,(e=u()(n)).call.apply(e,[this].concat(r))),m()(L()(i),"state",{expandedPages:new Set,loadingPages:new Set,pages:{},space:null,rootId:null,loadingMorePages:!1,isTreeTruncated:!1,initialCursors:null,initialPages:null,error:null}),m()(L()(i),"querySubscription",null),m()(L()(i),"pageMoveHistory",new sn),m()(L()(i),"queryChildren",function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{count:0,nodes:[]};return i.props.apolloClient.query({query:W,variables:{contentId:e,first:An,after:n}}).then(function(n){var t=n.data.page.children,r=kn(a,t);return t.pageInfo.hasNextPage?i.queryChildren(e,t.pageInfo.endCursor,r):r})}),m()(L()(i),"getPageQueryObservable",function(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=e?G:Q,r=e?{contentId:e,spaceKey:n}:{spaceKey:n},o=O()({paginationLimit:Dn},r);return i.props.apolloClient.watchQuery({fetchPolicy:"cache-and-network",query:t,variables:!0===a?o:r})}),m()(L()(i),"loadPages",function(){var e=D()(x.a.mark(function e(){var n,a,t,r,o,s,d=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d.length>0&&void 0!==d[0]&&d[0],a=i.state.pages,t=i.props,r=t.currentPageId,o=t.spaceKey,s=i.getPageQueryObservable(r,o,n),i.querySubscription=s.subscribe({next:function(e){var n=e.data,t=e.loading;if(t&&!n&&i.setState({loadingMorePages:!0}),n&&Object.keys(n).length>0){var r=n.currentPage,o=n.rootLevelPages,s=n.space,d=r?Fn(r,o):wn(o),l=In(r,{}),u=fn(a,d),c=r?r.id:null,g=s.homepage?s.homepage.id:null;i.setState({expandedPages:i.determineInitiallyExpandedPages(d),rootId:mn(u,c,g),pages:u,space:s,isTreeTruncated:!!r&&hn(r),initialCursors:l,initialPages:r})}t||i.setState({loadingMorePages:!1})},error:i.handleLoadingError});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()),m()(L()(i),"loadMorePages",D()(x.a.mark(function e(){var n,a,t,r,o,s,d,l,u,c;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.props,a=n.currentPageId,t=n.spaceKey,(0,n.createAnalyticsEvent)(we()).fire(),i.setState({loadingMorePages:!0}),r=i.state,o=r.initialCursors,s=r.initialPages,e.next=6,i.loadAllPages(a,t,o,s);case 6:d=e.sent,l=d.mergedPages,u=d.rootLevelPages,c=Fn(l,u,!0),i.setState({pages:c,isTreeTruncated:!1,loadingMorePages:!1});case 11:case"end":return e.stop()}},e)}))),m()(L()(i),"loadAllPages",function(e,n,a,t){var r=G,o=O()({contentId:e,spaceKey:n},a);return i.props.apolloClient.query({query:r,variables:o}).then(function(r){var o=r.data,s=r.error;if(s)i.handleLoadingError(s);else if(o&&Object.keys(o).length>0){var d=o.currentPage,l=o.rootLevelPages,u=Sn(d,t);if(hn(d)){var c=In(d,a);return i.loadAllPages(e,n,c,u)}return{mergedPages:u,rootLevelPages:l}}})}),m()(L()(i),"determineInitiallyExpandedPages",function(e){var n=i.state.expandedPages;for(var a in e){var t=e[a];t.hasChildren&&vn(t)&&n.add(t.id)}return n}),m()(L()(i),"expandPage",function(){var e=D()(x.a.mark(function e(n){var a,t,r,o,s,d,l,u,c,g;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.state.expandedPages.has(n.id)||!n.hasChildren){e.next=19;break}if(a=i.state,t=a.pages,r=a.expandedPages,o=a.loadingPages,s=t[n.id],d=[n.id].concat(E()(bn(n.id,t,r))),vn(s)){e.next=18;break}return i.setState({loadingPages:o.add(s.id)}),l={},e.t0=gn,e.next=11,i.queryChildren(s.id);case 11:e.t1=e.sent,(u=(0,e.t0)(e.t1)).forEach(function(e){l[e.id]=Pn(e)}),c=fn(t,l),o.delete(s.id),g=Tn(c,s.id,pn(u)),i.setState({loadingPages:o,pages:g});case 18:i.setState({expandedPages:new Set(d)});case 19:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()),m()(L()(i),"collapsePage",function(e){var n=i.state.expandedPages;n.delete(e.id),i.setState({expandedPages:n})}),m()(L()(i),"visitPage",function(e){var n=i.props,a=n.push,t=n.onItemClick;a("".concat(B.CONTEXT_PATH).concat(e.data.webui)),t&&t()}),m()(L()(i),"determineMutation",function(e){return void 0===e.index?X:0===e.index?Y:J}),m()(L()(i),"determineMutationVariables",function(e,n,i){if(void 0===i.index)return{pageId:n,parentId:i.parentId};var a=0===i.index,t=e[i.parentId].children.indexOf(n),r=t>-1&&t<i.index,o=a||r?i.index:i.index-1;return{pageId:n,siblingId:e[i.parentId].children[o]}}),m()(L()(i),"movePage",function(){var e=D()(x.a.mark(function e(n,a){var t,r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.state.pages,i.isValidMove(n,a)){e.next=3;break}return e.abrupt("return");case 3:return r=t[n.parentId].children[n.index],i.movePageInState(r,n,a),e.next=7,i.requestPageMove(t,r,n.parentId,a);case 7:return e.next=9,i.showUndoFlag(r);case 9:o=e.sent,i.pageMoveHistory.push(t,n,a,o.id);case 11:case"end":return e.stop()}},e)}));return function(n,i){return e.apply(this,arguments)}}()),m()(L()(i),"undo",D()(x.a.mark(function e(){var n,a,t,r,o,s,d;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.props.flags,a=i.state.pages,!(t=i.pageMoveHistory.pop())){e.next=8;break}return r=t.pageId,o=t.source,s=t.destination,d=t.flagId,i.movePageInState(r,o,s,!0),n.hideFlag(d),e.abrupt("return",i.requestPageMove(a,r,o.parentId,s));case 8:case"end":return e.stop()}},e)}))),m()(L()(i),"handleGenericError",function(e){var n=e.networkError,a=e.graphQLErrors,t=e.lastAction,r=i.props,o=r.flags,s=r.intl;(n||a&&a.length>0)&&(o.showErrorFlag({title:s.formatMessage(Cn.flagErrorTitle),description:s.formatMessage(Cn.flagErrorDescription),actions:[{content:s.formatMessage(Cn.flagErrorAction),onClick:function(){R.a.open(dn,"_blank")}}]}),console.error("PageTree error",{networkError:n,graphQLErrors:a}),i.setState({error:{networkError:n,graphQLErrors:a,lastAction:t}}))}),m()(L()(i),"handleLoadingError",function(e){return i.handleGenericError(O()({},e,{lastAction:Ln}))}),m()(L()(i),"handleDragDropSuccess",function(e,n,a){return function(){var t=i.props.createAnalyticsEvent,r=i.state.space;t(be({spaceId:r.id,pageId:e,previousParentPageId:n,newParentPageId:a})).fire()}}),m()(L()(i),"handleDragDropError",function(e){return i.handleGenericError(O()({},e,{lastAction:Vn}))}),m()(L()(i),"canMovePages",function(e,n){return!!e&&e.operations&&!!$()(e.operations,{targetType:"page",operation:"create"})&&!n}),m()(L()(i),"showUndoFlag",function(e){var n=i.props,a=n.flags,t=n.intl,r=i.state.pages;return a.showSuccessFlag({title:t.formatMessage(Cn.flagUndoTitle,{pageTitle:r[e].data.title}),actions:[{content:t.formatMessage(Cn.flagUndoAction),onClick:i.onUndoFlagClick}]})}),m()(L()(i),"onDragStart",function(){var e=i.state.pages;Object.keys(e).length>On&&(R.a.dispatchEvent(new Event("scroll")),i.showLargePageTreeFlag()),i.hideLastFlag()}),m()(L()(i),"onUndoFlagClick",function(){(0,i.props.createAnalyticsEvent)(Ne()).fire(),i.undo()}),m()(L()(i),"onUndoShortCut",function(){(0,i.props.createAnalyticsEvent)(ye()).fire(),i.undo()}),m()(L()(i),"hideLastFlag",function(){var e=i.props.flags,n=i.pageMoveHistory.peek();n&&e.hideFlag(n.flagId)}),m()(L()(i),"showLargePageTreeFlag",function(){var e=i.props,n=e.flags,a=e.intl,t=e.spaceKey,r=e.push;return n.showWarningFlag({title:a.formatMessage(Cn.flagLargePageTreeTitle),description:a.formatMessage(Cn.flagLargePageTreeDescription),actions:[{content:a.formatMessage(Cn.flagLargePageTreeAction),onClick:function(){r("/wiki/pages/reorderpages.action?key=".concat(t))}}]})}),i}return g()(n,e),o()(n,[{key:"componentDidMount",value:function(){this.loadPages(!0)}},{key:"componentDidUpdate",value:function(e){var n=this.props.currentPageId,i=this.state.pages[n];n&&e.currentPageId!==n&&(i?this.expandPage(i):this.loadPages(!0))}},{key:"componentWillUnmount",value:function(){this.querySubscription&&this.querySubscription.unsubscribe()}},{key:"requestPageMove",value:function(e,n,i,a){var t=this.props.apolloClient,r=this.determineMutation(a),o=this.determineMutationVariables(e,n,a);return t.mutate({mutation:r,variables:o}).then(this.handleDragDropSuccess(n,i,a.parentId)).catch(this.handleDragDropError)}},{key:"movePageInState",value:function(e,n,i,a){var t=this.state,r=t.rootId,o=t.pages,s=t.expandedPages,d={rootId:r,items:o};if(void 0===n.index){var l=o[n.parentId],u=l.children.indexOf(e);if(-1!==u){var c=E()(l.children);c.splice(u,1)[0],d=Object(q.d)(d,n.parentId,{children:c,hasChildren:c.length>0,isExpanded:c.length>0&&l.isExpanded})}var g=d.items[i.parentId],p=E()(g.children);p.splice(i.index,0,e),d=Object(q.d)(d,i.parentId,{children:p,hasChildren:!0})}else d=Object(q.c)(d,n,i);0===d.items[n.parentId].children.length&&s.delete(n.parentId),a&&s.add(i.parentId),this.setState({pages:d.items,rootId:d.rootId,expandedPages:s})}},{key:"isValidMove",value:function(e,n){var i=this.state.pages;return n&&!_()(e,n)&&Object.keys(i).length<On}},{key:"render",value:function(){var e=this.state,n=e.pages,i=e.rootId,a=e.space,t=e.loadingMorePages,r=e.isTreeTruncated,o=e.error;if(o&&o.lastAction===Ln)return f.a.createElement(Ze,null);if(t)return f.a.createElement(on,null);var s=this.props,d=s.currentPageId,l=s.isDraggable,u=s.isInDrawer,c=s.isSuperAdmin,g={rootId:i,items:n},p=l&&this.canMovePages(a,o);return f.a.createElement(v.Fragment,null,f.a.createElement(z.a,{accelerator:"mod+z",listener:this.onUndoShortCut}),f.a.createElement(Ue,{isSuperAdmin:c,currentPageId:d,isDraggable:p,isTreeTruncated:r,isInDrawer:u,loadMorePages:this.loadMorePages,onClick:this.visitPage,onCollapse:this.collapsePage,onDragStart:this.onDragStart,onDragEnd:this.movePage,onExpand:this.expandPage,spaceHomePageId:a&&a.homepage&&a.homepage.id,spaceId:a&&a.id,tree:g}))}}],[{key:"getDerivedStateFromProps",value:function(e,n){var i=e.currentPageId,a=n.expandedPages,t=n.loadingPages,r=function(e,n,i,a){return Object(ln.a)(e,function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r.isExpanded=i.has(t),r.isChildrenLoading=a.has(t),r.data.isSelected=r.id===n}})}(n.pages,i,a,t);return O()({},n,{pages:r})}}]),n}(v.Component),m()(nn,"defaultProps",{isDraggable:!0}),an))),Rn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IsSuperAdmin"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"current"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confluence"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isSuperAdmin"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:145,source:{body:"\n  query IsSuperAdmin {\n    user(current: true) {\n      id\n      confluence {\n        roles {\n          isSuperAdmin\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};i.d(n,"PageTree",function(){return jn});var jn=function(e){function n(){return t()(this,n),d()(this,u()(n).apply(this,arguments))}return g()(n,e),o()(n,[{key:"render",value:function(){var e=this.props,n=e.onItemClick,i=e.isInDrawer;return f.a.createElement(I.a,null,f.a.createElement(b.a,null,function(e){return f.a.createElement(S.c,{to:[N.a]},function(a){return f.a.createElement(y.b.Consumer,null,function(t){var r=t.push;return f.a.createElement(P.a.Consumer,null,function(t){var o=t.spaceKey,s=t.contentId,d=t.contentIdState;return(s||d===w.a)&&f.a.createElement(b.d,{query:Rn},function(t){var d=t.data,l=h()(d,"user.confluence.roles.isSuperAdmin")||!1;return f.a.createElement(Mn,{isSuperAdmin:l,apolloClient:e,push:r,onItemClick:n,currentPageId:s,spaceKey:o,flags:a,isInDrawer:i})})})})})}))}}]),n}(v.PureComponent);m()(jn,"defaultProps",{isInDrawer:!1}),jn.displayName="PageTree"},uUTq:function(e,n,i){var a=i("X+YX"),t=i("R3TX"),r=i("Ndl3"),o=t(function(e,n){return r(e)?a(e,n):[]});e.exports=o}}]);
//# sourceMappingURL=page-tree.e4d8ce2038b317bf6a38-v38.js.map