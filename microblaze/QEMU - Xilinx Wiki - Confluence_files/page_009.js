(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{"1BaG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(e){return e&&e.__esModule?e:{default:e}}(n("ERkP"));var r=function(e){var t=e.children,n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children"]);return i.default.createElement("div",a({},n,{className:"aui-dropdown2 aui-style-default"}),t)};r.displayName="AUIDropdownMenu",t.default=r},"609a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("ERkP")),i=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var d=function(e){return a.default.createElement(i.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12.072 17.284l-3.905 2.053a1 1 0 0 1-1.451-1.054l.745-4.349-3.159-3.08a1 1 0 0 1 .554-1.705l4.366-.635 1.953-3.956a1 1 0 0 1 1.794 0l1.952 3.956 4.366.635a1 1 0 0 1 .555 1.705l-3.16 3.08.746 4.349a1 1 0 0 1-1.45 1.054l-3.906-2.053z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};d.displayName="StarFilledIcon";var l=d;t.default=l},JGo4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("ERkP")),i=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var d=function(e){return a.default.createElement(i.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M4.02 19.23a1 1 0 0 0 1.18 1.18l3.81-.78-4.21-4.21-.78 3.81zm5.921-2.62l-2.12-2.12L16.306 6h.002l2.121 2.121-8.489 8.49zm9.903-9.903l-2.12-2.122A1.997 1.997 0 0 0 16.308 4c-.512 0-1.024.195-1.415.585l-9.757 9.758 4.95 4.95 9.757-9.758a2 2 0 0 0 0-2.828z" fill="currentColor" fill-rule="evenodd"/></svg>'},e))};d.displayName="EditIcon";var l=d;t.default=l},gn9V:function(e,t,n){(t=e.exports=n("RDo7")(!1)).push([e.i,".ViewPageHeaderComponent_header_1yn{padding:25px 0 10px}.ViewPageHeaderComponent_content_3aY{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.ViewPageHeaderComponent_headerSticky_3TZ{padding:20px 0 0;background-color:#fff}.ViewPageHeaderComponent_headerSticky_3TZ>.ViewPageHeaderComponent_stickyBorder_1wn{margin:0 -10px;height:25px;border-bottom:1px solid #e9e9e9}.ViewPageHeaderComponent_headerSticky_3TZ.sticky-header{display:block;margin-top:0}.ViewPageHeaderComponent_title_3Ip{font-size:44px;color:#205081}.ViewPageHeaderComponent_breadcrumbs_2Gv{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;padding-right:40px;width:100%}.ViewPageHeaderComponent_navigationContainer_15E{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-negative:0;flex-shrink:0;margin-top:5px}@media print{.ViewPageHeaderComponent_navigationContainer_15E{display:none!important}}",""]),t.locals={header:"ViewPageHeaderComponent_header_1yn",content:"ViewPageHeaderComponent_content_3aY",headerSticky:"ViewPageHeaderComponent_headerSticky_3TZ",stickyBorder:"ViewPageHeaderComponent_stickyBorder_1wn",title:"ViewPageHeaderComponent_title_3Ip",breadcrumbs:"ViewPageHeaderComponent_breadcrumbs_2Gv",navigationContainer:"ViewPageHeaderComponent_navigationContainer_15E"}},itPT:function(e,t,n){var a=n("gn9V"),i=n("7l8p");"string"==typeof a&&(a=[[e.i,a,""]]),e.exports=a.locals||{},e.exports._getContent=function(){return a},e.exports._getCss=function(){return a.toString()},e.exports._insertCss=function(e){return i(a,e)}},k1KV:function(e,t,n){"use strict";n.r(t);var a=n("97Jx"),i=n.n(a),r=n("VrFO"),o=n.n(r),d=n("Y9Ll"),l=n.n(d),c=n("N+ot"),s=n.n(c),u=n("AuHH"),m=n.n(u),v=n("5Yy7"),p=n.n(v),f=n("KEM+"),k=n.n(f),g=n("ERkP"),y=n.n(g),b=n("uDfI"),h=(n("aWzz"),n("kFJ8")),E=n("Bud6"),S=n("bsva"),N=n("+Prw"),I=n("1Pcy"),F=n.n(I),P=n("mc6X"),w=n.n(P),C=n("xBue"),_=n("IGvV"),T=n("sbiO"),O=n("bfgX"),A=n("2srY"),B=n.n(A),x=n("/FQd"),D=n("PTiB"),V=n("llcG"),M=n("L21V"),j=n("+CY+"),L=n("609a"),q=n.n(L),H=n("ttix"),U=n.n(H),G=n("yTLO"),R=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),k()(F()(n),"state",{isFavouritedByCurrentUser:n.props.isFavouritedByCurrentUser}),k()(F()(n),"handleFavouriteClick",function(){var e=n.props,t=e.contentId,a=e.favouritePage,i=e.unfavouritePage;n.state.isFavouritedByCurrentUser?(i({variables:{pageId:t}}),n.setState({isFavouritedByCurrentUser:!1})):(a({variables:{pageId:t}}),n.setState({isFavouritedByCurrentUser:!0}))}),n}return p()(t,e),l()(t,[{key:"render",value:function(){return y.a.createElement(g.Fragment,null,y.a.createElement(j.a,{accelerator:"f",listener:this.handleFavouriteClick}),y.a.createElement(G.a,{tag:"span",content:this.state.isFavouritedByCurrentUser?y.a.createElement(M.b,{id:"favourite-button.pageheader.unfavourite.tooltip",defaultMessage:"Remove (f)",description:"Verb: to unfavourite a page"}):y.a.createElement(M.b,{id:"favourite-button.pageheader.favourite.tooltip",defaultMessage:"Save for later (f)",description:"Verb: to favourite a page"})},y.a.createElement(V.a,{"data-test-id":"page-favourite-button",appearance:"subtle",onClick:this.handleFavouriteClick,iconBefore:this.state.isFavouritedByCurrentUser?y.a.createElement(q.a,{label:"StarFilledIcon"}):y.a.createElement(U.a,{label:"StarIcon"})})))}}]),t}(g.PureComponent);R.displayName="FavouriteButtonComponent";var K={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FavouriteButtonFavouriteMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favouritePage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"favouritePageInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:326,source:{body:"\n  mutation FavouriteButtonFavouriteMutation($pageId: ID!) {\n    favouritePage(favouritePageInput: { pageId: $pageId }) {\n      content {\n        id\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FavouriteButtonQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:360,source:{body:"\n  query FavouriteButtonQuery($pageId: ID!) {\n    content(id: $pageId) {\n      nodes {\n        id\n        type\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n        operations {\n          operation\n          targetType\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},z={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"FavouriteButtonUnfavouriteMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pageId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unfavouritePage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"favouritePageInput"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pageId"},value:{kind:"Variable",name:{kind:"Name",value:"pageId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentuser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"favourited"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFavourite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"favouritedDate"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:330,source:{body:"\n  mutation FavouriteButtonUnfavouriteMutation($pageId: ID!) {\n    unfavouritePage(favouritePageInput: { pageId: $pageId }) {\n      content {\n        id\n        metadata {\n          currentuser {\n            favourited {\n              isFavourite\n              favouritedDate\n            }\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},J=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),k()(F()(n),"fireFavouritePageAnalyticsEvent",function(e){n.fireAnalyticsEvent("created",e)}),k()(F()(n),"fireUnfavouritePageAnalyticsEvent",function(e){n.fireAnalyticsEvent("deleted",e)}),k()(F()(n),"hasReadPermission",function(e,t){return Boolean(e&&e.filter(function(e){return e.targetType===t&&"read"===e.operation}).length)}),n}return p()(t,e),l()(t,[{key:"getAnalyticsData",value:function(e,t){return{action:e,actionSubject:"favouritePage",objectId:this.props.contentId,source:"FavouriteButton",attributes:{componentVersion:"v2",pageType:t}}}},{key:"fireAnalyticsEvent",value:function(e,t){this.props.createAnalyticsEvent({type:"sendTrackEvent",data:this.getAnalyticsData(e,t)}).fire()}},{key:"render",value:function(){var e=this,t=this.props.contentId,n={pageId:t};return y.a.createElement(x.a,null,function(a){return a.userId?y.a.createElement(h.d,{query:Q,variables:n},function(a){var i=a.data,r=a.loading,o=a.error;if(r||o)return null;var d=B()(i,"content.nodes[0].type");if(!e.hasReadPermission(B()(i,"content.nodes[0].operations"),d))return null;var l=B()(i,"content.nodes[0].metadata.currentuser.favourited.isFavourite");return y.a.createElement(h.c,{mutation:K,onCompleted:function(){return e.fireFavouritePageAnalyticsEvent(d)},refetchQueries:[{query:Q,variables:n}]},function(a){return y.a.createElement(h.c,{mutation:z,onCompleted:function(){return e.fireUnfavouritePageAnalyticsEvent(d)},refetchQueries:[{query:Q,variables:n}]},function(e){return y.a.createElement(R,{contentId:t,favouritePage:a,unfavouritePage:e,isFavouritedByCurrentUser:Boolean(l)})})})}):null})}}]),t}(g.PureComponent);J.displayName="FavouriteButtonClass";var W=Object(D.a)()(J),$=n("7nmT"),Y=n.n($),Z=n("JGo4"),X=n.n(Z),ee=n("qdfj"),te=n("+5ab"),ne=Object(M.f)({editIconLabel:{id:"edit-button.icon.edit.label",defaultMessage:"Edit Icon",description:"aria-label for the edit button content"}}),ae=Object(ee.a)(Object(M.g)(function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),k()(F()(n),"editButton",null),k()(F()(n),"handleButtonClick",function(e,t){var a=n.props,i=a.isFabricSupported,r=a.contentType;t.update({data:{action:"clicked",actionSubject:"editButton",attributes:{componentVersion:"v2",contentType:r,isFabricSupported:i},source:"editContentButton"},type:"sendTrackEvent"}).fire()}),k()(F()(n),"setEditButtonRef",function(e){n.editButton=e}),k()(F()(n),"clickButton",function(){n.editButton&&Y.a.findDOMNode(n.editButton).click()}),n}return p()(t,e),l()(t,[{key:"render",value:function(){var e,t,n=this.props,a=n.contentId,i=n.contentType,r=n.intl,o=n.isFabricSupported,d=n.spaceKey,l=n.toUrl,c="blogpost"===i;o?(e=c?te.EDIT_BLOG_V2:te.EDIT_PAGE_V2,t="fabric-edit-button"):e=c?te.EDIT_BLOG:te.EDIT_PAGE;var s=l(e.name,{contentId:a,spaceKey:d,contentType:c?"blog":"pages"});return y.a.createElement(g.Fragment,null,y.a.createElement(j.a,{accelerator:"e",listener:this.clickButton}),y.a.createElement(G.a,{tag:"span",content:y.a.createElement(M.b,{id:"edit-button.tooltip",defaultMessage:"Edit (e)",description:"tooltip for button to edit, and the shortcut key"})},y.a.createElement(V.a,{appearance:"subtle",href:s,iconBefore:y.a.createElement(X.a,{label:r.formatMessage(ne.editIconLabel)}),ref:this.setEditButtonRef,onClick:this.handleButtonClick,id:"editPageLink","data-test-id":t})))}}]),t}(g.PureComponent))),ie={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EditButtonQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fabricEditorSupported"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"space"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:351,source:{body:"\n  query EditButtonQuery($contentId: ID!) {\n    content(id: $contentId) {\n      nodes {\n        id\n        type\n        metadata {\n          frontend {\n            fabricEditorSupported\n          }\n        }\n        operations {\n          operation\n          targetType\n        }\n        space {\n          id\n          key\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},re=function(e){function t(){return o()(this,t),s()(this,m()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.contentId;return y.a.createElement(h.d,{query:ie,variables:{contentId:e}},function(t){var n=t.data,a=t.loading,i=t.error;if(a||i)return null;var r=B()(n,"content.nodes[0].operations")||[],o=B()(n,"content.nodes[0].type");if(!(r.filter(function(e){var t=e.operation,n=e.targetType;return"update"===t&&n===o}).length>0))return null;var d=B()(n,"content.nodes[0].space.key"),l=B()(n,"content.nodes[0].metadata.frontend.fabricEditorSupported");return y.a.createElement(ae,{contentId:e,contentType:o,spaceKey:d,isFabricSupported:l})})}}]),t}(g.PureComponent);k()(re,"defaultProps",{isFabricSupported:!1}),re.displayName="EditContentButton";var oe=n("KkZ4"),de=n("x+QU"),le=n.n(de),ce=n("xeU+"),se=le()({loader:function(){return Promise.all([n.e(76),n.e(252)]).then(n.bind(null,"uwQx")).then(function(e){return e.Breadcrumbs})},loading:function(){return y.a.createElement(ce.a,null)}});se.displayName="Breadcrumbs";var ue,me,ve,pe,fe,ke,ge=n("b7Qj"),ye=n("3nLK"),be=n("tsjR"),he=n("S75A"),Ee=n("tQaH"),Se=n.n(Ee),Ne=n("O94r"),Ie=n.n(Ne),Fe=n("Jygk"),Pe=n.n(Fe),we=n("M2LZ"),Ce=n("M6mc"),_e=n("ZW7r"),Te=n.n(_e),Oe=n("nSLV"),Ae=Object(_.a)(Te.a)(ue=Object(we.b)(["wr!com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources"])((ve=me=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),k()(F()(n),"state",{grantAccessInitialised:!1}),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._initGrantAccessCheck(),this._initJiraMetadataCheck()}},{key:"shouldComponentUpdate",value:function(e){return e.webItems!==this.props.webItems}},{key:"componentDidUpdate",value:function(){this._initGrantAccessCheck(),this._initJiraMetadataCheck()}},{key:"_initGrantAccessCheck",value:function(){var e=this,t=this.hasWebItem(Oe.a.CONTENT_METADATA_PAGE_RESTRICTIONS);!t||t&&this.state.grantAccessInitialised||(this.setState({grantAccessInitialised:!0}),we.a.require("wr!com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources").then(function(){try{Pe.a.require("confluence-request-access-plugin/grant-access").init(Se()({},e.props))}catch(e){console.error("Logging caught error while loading confluence-request-access-plugin/grant-access",e)}}))}},{key:"_initJiraMetadataCheck",value:function(){this.hasWebItem(Oe.a.CONTENT_METADATA_JIRA)&&we.a.require("wr!com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources")}},{key:"hasWebItem",value:function(e){return this.props.webItems.some(function(t){return t.id===e})}},{key:"render",value:function(){var e=this.props,t=e.webItems,n=e.id,a=e.className;return y.a.createElement(Ce.a,{className:Ie()(Te.a.metadataButtons,a),id:n,webItems:t})}}]),t}(g.Component),k()(me,"defaultProps",{webItems:[]}),k()(me,"displayName","ViewPageMetadataWebItems"),ue=ve))||ue)||ue,Be=n("JeEl"),xe=n("6lDt"),De=n("K2x6"),Ve=n("r+Ch"),Me=n("itPT"),je=n.n(Me),Le=n("s6Th"),qe={verticalAlign:"top",display:"inline-block"},He=Object(_.a)(je.a)((ke=fe=function(e){function t(){var e,n;o()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=s()(this,(e=m()(t)).call.apply(e,[this].concat(i))),k()(F()(n),"sendEditButtonAnalytics",function(e){var t=n.props.contentType,a=!0;e&&(a=!1),Object(oe.getAnalyticsWebClient)().then(function(e){e.sendTrackEvent({action:"clicked",actionSubject:"button",source:"editContentButton",attributes:{componentVersion:"v1",contentType:t,isFabricSupported:a}})})}),k()(F()(n),"navigateToEditPage",function(e){var t=n.props,a=t.getEditorContent,i=t.isRequestingEditorContent,r=t.contentId,o=t.contentType;if(e.preventDefault(),!i){var d="confluence.".concat(o,".edit.collaborative.quick-view");Ve.a.start({key:d,isInitial:!1}),Object(O.a)("rte-collab-ready",function(){Ve.a.end({key:"".concat(d)})}),n.sendEditButtonAnalytics(!0),a(r)}}),n}return p()(t,e),l()(t,[{key:"getPageButtons",value:function(e){var t=this,n=this.props,a=n.contentId,i=n.isFabricEditorEnabled,r=n.contentType,o=n.isRequestingEditorContent,d=n.isEditEnabled,l=n.spaceKey,c=n.versionOverride,s="blogpost"===r,u=y.a.createElement(ye.a,{tagName:"span",location:xe.a.PAGE_BUTTONS,waitForSuperbatch:!0,contentId:a,version:c},function(n){var a=n.webItems,i=e?a.filter(function(e){return e.completeKey===De.a.INVITE_TO_EDIT}):a;return y.a.createElement(he.a,{actions:{"edit-page":t.navigateToEditPage,"edit-blogpost":t.navigateToEditPage},modifications:{"edit-page":{spinner:o},"edit-blogpost":{spinner:o}},webItems:i,buttonType:"aui-button-subtle"})});return e?y.a.createElement("span",{"data-test-id":"content-buttons"},y.a.createElement(re,{contentId:a}),y.a.createElement(W,{contentId:a}),u):y.a.createElement(g.Fragment,null,i&&d?y.a.createElement(C.a,{to:"".concat(T.a,"/spaces/").concat(l,"/").concat(s?"blog":"pages","/edit-v2/").concat(a),onClick:this.sendEditButtonAnalytics},y.a.createElement("span",{"data-test-id":"fabric-edit-button",id:"editPageLink",className:"edit full-load aui-button-subtle aui-button"},y.a.createElement(w.a,{icon:"edit-small"}))):null,u)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mode,a=t.spaceKey,i=t.contentId,r=t.contentTitle,o=t.isSticky,d=t.className,l=t.style,c=t.versionOverride;switch(n){case"loading":return y.a.createElement(Le.a,null);case"active":return y.a.createElement(x.a,null,function(t){var n=t.featureFlags;return y.a.createElement("header",{className:"".concat(o?je.a.headerSticky:je.a.header," ").concat(d),style:l},y.a.createElement("div",{className:je.a.content},y.a.createElement("div",{className:je.a.breadcrumbs,"data-test-id":"breadcrumb"},y.a.createElement(se,{spaceKey:a,contentId:i,contentTitle:o?r:null}),y.a.createElement(ye.a,{tagName:"span",contentId:i,location:xe.a.SYSTEM_CONTENT_METADATA,version:c,waitForSuperbatch:!0},function(e){var t=e.webItems;return y.a.createElement(Ae,{pageId:i,webItems:t,className:je.a.breadcrumbsWebItems,id:"system-content-items"})}),y.a.createElement(ye.a,{tagName:"span",location:xe.a.PAGE_METADATA_BANNER,waitForSuperbatch:!0,contentId:i,version:c},function(e){var t=e.webItems;return y.a.createElement(Ae,{webItems:t,className:je.a.breadcrumbsWebItems,id:"page-metadata-banner-items"})}),y.a.createElement(be.a,{contentId:i,location:xe.a.ATL_PAGE_METADATA,style:qe})),y.a.createElement("div",{className:"".concat(je.a.navigationContainer," content-navigation view"),style:{minHeight:31}},e.getPageButtons(n["confluence.frontend.header.action-buttons.v2"]),y.a.createElement(ye.a,{tagName:"span",location:xe.a.TOOLS_MENU_CONTAINER,hasMultipleSections:!0,contentId:i,version:c},function(e){var t=e.webItems,n=e.webSections;return y.a.createElement(Be.a,{webItems:t,webSections:n})}))),y.a.createElement("div",{className:je.a.stickyBorder}),y.a.createElement(ge.a,null))});case"error":default:return null}}}]),t}(g.Component),k()(fe,"defaultProps",{mode:"active",className:"",isSticky:!0}),pe=ke))||pe,Ue={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ViewPageHeaderQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"contentId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"operations"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"operation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetType"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"StringValue",value:"editor",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"metadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"frontend"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fabricEditorSupported"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:440,source:{body:'\n  query ViewPageHeaderQuery($contentId: ID) {\n    content(id: $contentId) {\n      nodes {\n        id\n        type\n        title\n        operations {\n          operation\n          targetType\n        }\n        properties(key: "editor") {\n          nodes {\n            id\n            key\n            value\n          }\n        }\n        metadata {\n          frontend {\n            fabricEditorSupported\n          }\n        }\n      }\n    }\n  }\n',name:"GraphQL request",locationOffset:{line:1,column:1}}}},Ge=Object(N.a)();var Re=Object(b.connect)(function(e,t){var n=t.contentId,a=t.versionOverride;return{isRequestingEditorContent:Ge(e,{contentId:n}).isRequesting,isFabricEditorEnabled:t.contentCanUseFabricEditor,isEditEnabled:t.userCanUpdateContent,versionOverride:a}},function(e){return{getEditorContent:function(t){return e(Object(E.k)({contentId:t}))}}})(He),Ke=function(e){function t(){return o()(this,t),s()(this,m()(t).apply(this,arguments))}return p()(t,e),l()(t,[{key:"renderLoading",value:function(){return y.a.createElement(Re,{mode:"loading"})}},{key:"renderActive",value:function(e){return y.a.createElement(Re,i()({mode:"active"},e))}},{key:"renderError",value:function(){return y.a.createElement(Re,{mode:"error"})}},{key:"contentMetadataShowsFabricEditorSupported",value:function(e){return e&&e.frontend&&e.frontend.fabricEditorSupported}},{key:"contentPropertiesHasFabricEditorProperty",value:function(e){return!(!e||!e.length)&&Boolean(e.filter(function(e){return"editor"===e.key&&'"v2"'===e.value}).length)}},{key:"contentOperationsHasUpdateOperation",value:function(e,t){return!(!e||!e.length)&&Boolean(e.filter(function(e){return e.targetType===t&&"update"===e.operation}).length)}},{key:"render",value:function(){var e=this;switch(this.props.mode){case"loading":return this.renderLoading();case"active":var t=this.props,n=t.spaceKey,a=t.contentId,i=t.className,r=t.style,o=t.isSticky,d=t.versionOverride,l=t.shouldRefreshContent;return n&&a?y.a.createElement(S.f,null,y.a.createElement(h.d,{query:Ue,variables:{contentId:a}},function(t){var a=t.data,c=t.loading,s=t.error,u=t.refetch;if(s)return e.renderError();if(c)return e.renderLoading();if(l&&u(),a&&a.content&&a.content.nodes&&a.content.nodes[0]){var m=a&&a.content&&a.content.nodes&&a.content.nodes[0],v={spaceKey:n,className:i,style:r,isSticky:o,versionOverride:d,contentId:m.id,contentTitle:m.title,contentType:m.type,userCanUpdateContent:e.contentOperationsHasUpdateOperation(m.operations,m.type),contentCanUseFabricEditor:e.contentMetadataShowsFabricEditorSupported(m.metadata)||m.properties&&e.contentPropertiesHasFabricEditorProperty(m.properties.nodes)};return e.renderActive(v)}return e.renderError()})):this.renderError();case"error":return this.renderError()}}}]),t}(g.Component);k()(Ke,"defaultProps",{mode:"active"}),Ke.displayName="ViewPageHeader";t.default=Ke},lyMi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("ERkP")),i=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var d=function(e){return a.default.createElement(i.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><g fill="currentColor" fill-rule="evenodd"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></g></svg>'},e))};d.displayName="MoreIcon";var l=d;t.default=l},mc6X:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n("ERkP")),i=o(n("aWzz")),r=o(n("O94r"));function o(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=void 0,n=void 0,i=e.className,o=e.icon,d=e.size,l=e.style,c=e.useIconFont,s=e.customIcon,u=e.onClick,m=e.onMouseEnter,v=e.onMouseLeave,p=e.children;return o&&(t=c?"aui-iconfont-"+o:"aui-icon-"+o),i=(0,r.default)("aui-icon","aui-icon-"+d,t,i),n=l||{},s&&(n.backgroundImage="url("+s+")"),a.default.createElement("span",{className:i,style:n,onClick:u,onMouseEnter:m,onMouseLeave:v},p)};d.displayName="AUIIcon",d.defaultProps={useIconFont:!0,size:"small"},d.propTypes={children:i.default.oneOfType([i.default.node,i.default.string]),style:i.default.object,size:i.default.oneOf(["small","medium","large"]),icon:i.default.string,customIcon:i.default.string,className:i.default.string,useIconFont:i.default.bool,onClick:i.default.func,onMouseEnter:i.default.func,onMouseLeave:i.default.func},t.default=d},ttix:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("ERkP")),i=r(n("4KTy"));function r(e){return e&&e.__esModule?e:{default:e}}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var d=function(e){return a.default.createElement(i.default,o({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" focusable="false" role="presentation"><path d="M12 16.373l3.98 2.193-.76-4.655 3.276-3.347-4.524-.69L12 5.687l-1.972 4.189-4.524.689L8.78 13.91l-.762 4.655L12 16.373zm0 2.283l-3.016 1.662a2 2 0 0 1-2.939-2.075l.599-3.656-2.57-2.624a2 2 0 0 1 1.129-3.377l3.47-.528 1.518-3.224a2 2 0 0 1 3.618 0l1.519 3.224 3.47.528a2 2 0 0 1 1.127 3.377l-2.569 2.624.599 3.656a2 2 0 0 1-2.94 2.075L12 18.656z" fill="currentColor"/></svg>'},e))};d.displayName="StarIcon";var l=d;t.default=l},"xeU+":function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n("VrFO"),i=n.n(a),r=n("Y9Ll"),o=n.n(r),d=n("N+ot"),l=n.n(d),c=n("AuHH"),s=n.n(c),u=n("5Yy7"),m=n.n(u),v=n("7wq/"),p=n.n(v),f=n("ERkP"),k=n.n(f),g=n("KsTJ");function y(){var e=p()(["\n  height: 14px;\n  line-height: 14px;\n  font-weight: bold;\n  color: #eee;\n  margin-left: 5px;\n  margin-right: 5px;\n"]);return y=function(){return e},e}function b(){var e=p()(["\n  height: 14px;\n  width: 60px;\n  border-radius: 2px;\n  background-color: #eee;\n"]);return b=function(){return e},e}function h(){var e=p()(["\n  display: flex;\n  align-items: center;\n  justify-content: left;\n  height: 24px;\n"]);return h=function(){return e},e}var E=g.default.div(h()),S=g.default.div(b()),N=g.default.div(y()),I=function(e){function t(){return i()(this,t),l()(this,s()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"render",value:function(){return k.a.createElement(E,null,k.a.createElement(S,null),k.a.createElement(N,null,"/"),k.a.createElement(S,null))}}]),t}(f.PureComponent);I.displayName="BreadcrumbsPlaceholder"}}]);
//# sourceMappingURL=page.header.92a4c1524ce515ed3412-v38.js.map