<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
            <meta content="IE=edge, chrome=1" http-equiv="X-UA-Compatible">
        <meta content="webkit" name="renderer">
        <meta content="15317273575564615446375" property="qc:admins">
        <meta property="og:image" content="https://assets.segmentfault.com/v-5e1ec062/global/img/static/touch-icon.png">
        <meta content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ" name="alexaVerifyID">
        <meta content="app-id=958101793, app-argument=" name="apple-itunes-app">
            <title>Linux虚拟网络设备之veth - Linux程序员 - SegmentFault 思否</title>
    
            <meta name="description" content="有了上一篇关于tun/tap的介绍之后，大家应该对虚拟网络设备有了一定的了解，本篇将接着介绍另一种虚拟网络设备veth。">
    
            <meta name="keywords" content="网络,linux">
    
        <link href="/opensearch.xml" rel="search" title="SegmentFault" type="application/opensearchdescription+xml">
        <link rel="shortcut icon" href="https://assets.segmentfault.com/v-5e1ec062/global/img/favicon.ico">
        <link rel="apple-touch-icon" href="https://assets.segmentfault.com/v-5e1ec062/global/img/static/touch-icon.png">

        <meta content="#00965e" name="msapplication-TileColor">
        <meta name="msapplication-square150x150logo" content="https://assets.segmentfault.com/v-5e1ec062/global/img/static/touch-icon.png">
        <meta content="bcf7fd80dca60d53d46d5b46e1b990ca" name="baidu_union_verify">

    
        <link href="/feeds/questions" rel="alternate" title="SegmentFault 最新问题" type="application/atom+xml">
        <link href="/feeds/blogs" rel="alternate" title="SegmentFault 最新文章" type="application/atom+xml">
    
    
    
    
    
            <link rel="stylesheet" href="https://assets.segmentfault.com/v-5e1ec062/css/global.css">
        <link rel="stylesheet" href="https://assets.segmentfault.com/v-5e1ec062/css/vendors.css">
        
            <link rel="stylesheet" href="https://assets.segmentfault.com/v-5e1ec062/css/detail.css">
    
    
        <script>
var _oa = [], OA_google = true;

function OA_script(src, cb) {
    var s = document.createElement('script'), m = document.getElementsByTagName('script')[0];
    
    if (cb) {
        s.onload = cb;
    }
    
    s.async = 1;
    s.defer = 1;
    s.src = src;
    m.parentNode.insertBefore(s, m);
}

function OA_show(name) {
    _oa.push(name);
    document.write('<div id="OA_holder_' + name + '"></div>');
}

OA_script('https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=0&tag=%E7%BD%91%E7%BB%9C&v=5e154194');
</script>


        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-918487-8"></script>

            <!-- 推荐引擎 -->
        <script charset="utf-8" id="ParadigmSDK" src="https://nbrecsys.4paradigm.com/sdk/js/ParadigmSDK_v2.js" data="216" defSI="594">
        </script>
        <script>
            ParadigmSDK.init("46e957bd9dea4acdaa15b4b64aff728f");
            ParadigmSDK.trackDetailPageShow();
        </script>
                </head>
    <body>

    <img style="height: 0; width: 0; display: none" src="https://assets.segmentfault.com/v-5e1ec062/global/img/static/touch-icon.png">

<div id="gridMapHoverBox" style="position:absolute; border: 1px solid #00965e; z-index: 99; font-size: 10px; background:#fff"></div>

<nav id="sf-header" class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
        <a class="navbar-brand text-hide sf-header-logo" href="/">SegmentFault</a>

                    <a class="btn btn-primary d-lg-none ml-auto mr-2" href="/user/login">注册登录</a>
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
                aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

                <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav font-weight-bold">
                <li class="nav-item">
                    <a href="/" class="nav-link ">首页</a>
                </li>
                <li class="nav-item">
                    <a href="/questions" class="nav-link ">问答</a>
                </li>
                <li class="nav-item">
                    <a href="/blogs" class="nav-link active">专栏</a>
                </li>
                <li class="nav-item">
                    <a href="/lives" class="nav-link ">课程</a>
                </li>
                <li class="nav-item">
                    <a href="/events" class="nav-link ">活动</a>
                </li>
                <li class="nav-item dropdown hover-down">
                    <a href="###" id="navbarDiscover" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link  dropdown-toggle ">发现</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDiscover">
                        <a class="dropdown-item" href="/groups">圈子</a>
                        <a class="dropdown-item" href="/tags">标签</a>
                        <a class="dropdown-item" href="/groups?tab=jobs">酷工作</a>
                        <a class="dropdown-item" href="/users">排行榜</a>
                        <a class="dropdown-item" href="/badges">徽章</a>
                        <a class="dropdown-item" href="/notes">笔记</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="https://docs.segmentfault.com" target="_blank">开发手册</a>
                        <a class="dropdown-item" href="https://business.segmentfault.com/ads?utm_source=sf-header"
                           target="_blank">广告投放<i class="ml-2 text-warning fas fa-external-link-square"></i></a>
                    </div>
                </li>
            </ul>

            <form class="form-inline my-2 my-lg-0 flex-fill d-none d-xl-block px-4" action="/search">
                <input class="form-control w-100" id="searchBox" name="q" type="search" value="" placeholder="搜索关键字" aria-label="搜索">
            </form>

            <ul class="navbar-nav navbar-user ml-auto align-items-lg-center">
                                    <li class="nav-item d-none d-lg-flex">
                        <a href="/user/login" class="btn btn-link mr-2 require-login">立即登录</a>
                    </li>
                    <li class="nav-item d-none d-lg-flex">
                        <a href="/user/register" class="btn btn-primary require-login">免费注册</a>
                    </li>
                            </ul>
        </div>
    </div>
</nav>
    <input id="articleId" value="1190000009251098" class="hidden"/>
    <div class="d-none d-xl-flex justify-content-center">
        <script type="text/javascript">
          OA_show(2);
        </script>
    </div>
    <div class="position-relative">
        <div class="container my-sm-4 my-1" id="sf-article">
            <div class="row">
                                <div class="col-12 col-xl w-0">
                    <div class="card border-0 mb-4">
                        <div class="card-body p-lg-30">
                            <div class="d-flex justify-content-between align-items-center mb-3" id="sf-article_author">
                                <div class="information d-flex align-items-center">
                                    <a class="d-flex align-items-centers mr-1" href="/u/wuyangchun">
                                        <picture class="mr-2 d-sm-block d-none">
                                            <img class="d-inline-block rounded-circle " width="32"
                                                 src="https://cdn.segmentfault.com/v-5e154194/global/img/user-64.png" aria-hidden="true"/>
                                        </picture>
                                        <strong class="align-self-center">wuyangchun</strong>
                                    </a>
                                    <ul class="list-inline mb-0 authentication-info sflex-center font-size-14">
                                                                                <li class="list-inline-item">
                                            <i class="fas fa-dice-d8" style="color:#BF7158"></i>
                                            <span style="color: #BF7158;font-weight:bold">2.4k</span>
                                        </li>
                                        
                                                                            </ul>
                                </div>

                            </div>
                            <div class="functional-area-left sticky-top d-none d-xl-flex"></div>
                            <h1 class="h2 mb-3" id="sf-article_title">
                                <a class="text-body" href="/a/1190000009251098">Linux虚拟网络设备之veth</a>
                            </h1>
                            <div class="d-sm-flex d-none flex-wrap align-items-center mb-4" id="sf-article_tags">
                                <div class="m-n1"><a class="m-1 badge-tag" href="/t/%E7%BD%91%E7%BB%9C"
                                           data-toggle="popover"
                                           data-img="" data-placement="top"
                                           data-original-title="网络"
                                           data-id="1040000000089481">
                                                                                        网络
                                        </a><a class="m-1 badge-tag" href="/t/linux"
                                           data-toggle="popover"
                                           data-img="https://avatar-static.segmentfault.com/329/062/3290625956-1040000000089392_big64" data-placement="top"
                                           data-original-title="linux"
                                           data-id="1040000000089392">
                                                                                        linux
                                        </a></div>
                                <div class="font-size-14">
                                    <span class="text-secondary ml-2">&nbsp;阅读约 19 分钟</span>
                                                                                                        </div>
                            </div>
                            <article class="article fmt article-content" data-id="1190000009251098"
                                     data-license="cc">
                                
<p>有了上一篇关于<a href="https://segmentfault.com/a/1190000009249039">tun/tap的介绍</a>之后，大家应该对虚拟网络设备有了一定的了解，本篇将接着介绍另一种虚拟网络设备veth。</p>
<h2>veth设备的特点</h2>
<ul>
<li>veth和其它的网络设备都一样，一端连接的是内核协议栈。</li>
<li>veth设备是成对出现的，另一端两个设备彼此相连</li>
<li>一个设备收到协议栈的数据发送请求后，会将数据发送到另一个设备上去。</li>
</ul>
<p>下面这张关系图很清楚的说明了veth设备的特点：</p>
<pre><code>+----------------------------------------------------------------+
|                                                                |
|       +------------------------------------------------+       |
|       |             Newwork Protocol Stack             |       |
|       +------------------------------------------------+       |
|              ↑               ↑               ↑                 |
|..............|...............|...............|.................|
|              ↓               ↓               ↓                 |
|        +----------+    +-----------+   +-----------+           |
|        |   eth0   |    |   veth0   |   |   veth1   |           |
|        +----------+    +-----------+   +-----------+           |
|192.168.1.11  ↑               ↑               ↑                 |
|              |               +---------------+                 |
|              |         192.168.2.11     192.168.2.1            |
+--------------|-------------------------------------------------+
               ↓
         Physical Network</code></pre>
<p>上图中，我们给物理网卡eth0配置的IP为192.168.1.11， 而veth0和veth1的IP分别是192.168.2.11和192.168.2.1。</p>
<h2>示例</h2>
<p>我们通过示例的方式来一步一步的看看veth设备的特点。</p>
<h3>只给一个veth设备配置IP</h3>
<p>先通过ip link命令添加veth0和veth1，然后配置veth0的IP，并将两个设备都启动起来</p>
<pre><code class="bash">dev@debian:~$ sudo ip link add veth0 type veth peer name veth1
dev@debian:~$ sudo ip addr add 192.168.2.11/24 dev veth0
dev@debian:~$ sudo ip link set veth0 up
dev@debian:~$ sudo ip link set veth1 up</code></pre>
<p>这里不给veth1设备配置IP的原因就是想看看在veth1没有IP的情况下，veth0收到协议栈的数据后会不会转发给veth1。</p>
<p>ping一下192.168.2.1，由于veth1还没配置IP，所以肯定不通</p>
<pre><code class="bash">dev@debian:~$ ping -c 4 192.168.2.1
PING 192.168.2.1 (192.168.2.1) 56(84) bytes of data.
From 192.168.2.11 icmp_seq=1 Destination Host Unreachable
From 192.168.2.11 icmp_seq=2 Destination Host Unreachable
From 192.168.2.11 icmp_seq=3 Destination Host Unreachable
From 192.168.2.11 icmp_seq=4 Destination Host Unreachable

--- 192.168.2.1 ping statistics ---
4 packets transmitted, 0 received, +4 errors, 100% packet loss, time 3015ms
pipe 3</code></pre>
<p>但为什么ping不通呢？是到哪一步失败的呢？</p>
<p>先看看抓包的情况，从下面的输出可以看出，veth0和veth1收到了同样的ARP请求包，但没有看到ARP应答包：</p>
<pre><code class="bash">dev@debian:~$ sudo tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth0, link-type EN10MB (Ethernet), capture size 262144 bytes
20:20:18.285230 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:19.282018 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:20.282038 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:21.300320 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:22.298783 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:23.298923 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28

dev@debian:~$ sudo tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
20:20:48.570459 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:49.570012 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:50.570023 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:51.570023 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:52.569988 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28
20:20:53.570833 ARP, Request who-has 192.168.2.1 tell 192.168.2.11, length 28</code></pre>
<p>为什么会这样呢？了解ping背后发生的事情后就明白了：</p>
<ol>
<li>ping进程构造ICMP echo请求包，并通过socket发给协议栈，</li>
<li>协议栈根据目的IP地址和系统路由表，知道去192.168.2.1的数据包应该要由192.168.2.11口出去</li>
<li>由于是第一次访问192.168.2.1，且目的IP和本地IP在同一个网段，所以协议栈会先发送ARP出去，询问192.168.2.1的mac地址</li>
<li>协议栈将ARP包交给veth0，让它发出去</li>
<li>由于veth0的另一端连的是veth1，所以ARP请求包就转发给了veth1</li>
<li>veth1收到ARP包后，转交给另一端的协议栈</li>
<li>协议栈一看自己的设备列表，发现本地没有192.168.2.1这个IP，于是就丢弃了该ARP请求包，这就是为什么只能看到ARP请求包，看不到应答包的原因</li>
</ol>
<h3>给两个veth设备都配置IP</h3>
<p>给veth1也配置上IP</p>
<pre><code class="bash">dev@debian:~$ sudo ip addr add 192.168.2.1/24 dev veth1</code></pre>
<p>再ping 192.168.2.1成功（由于192.168.2.1是本地IP，所以默认会走lo设备，为了避免这种情况，这里使用ping命令带上了-I参数，指定数据包走指定设备）</p>
<pre><code class="bash">dev@debian:~$ ping -c 4 192.168.2.1 -I veth0
PING 192.168.2.1 (192.168.2.1) from 192.168.2.11 veth0: 56(84) bytes of data.
64 bytes from 192.168.2.1: icmp_seq=1 ttl=64 time=0.032 ms
64 bytes from 192.168.2.1: icmp_seq=2 ttl=64 time=0.048 ms
64 bytes from 192.168.2.1: icmp_seq=3 ttl=64 time=0.055 ms
64 bytes from 192.168.2.1: icmp_seq=4 ttl=64 time=0.050 ms

--- 192.168.2.1 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3002ms
rtt min/avg/max/mdev = 0.032/0.046/0.055/0.009 ms</code></pre>
<blockquote>注意：对于非debian系统，这里有可能ping不通，主要是因为内核中的一些ARP相关配置导致veth1不返回ARP应答包，如ubuntu上就会出现这种情况，解决办法如下：<br>root@ubuntu:~# echo 1 &gt; /proc/sys/net/ipv4/conf/veth1/accept_local<br>root@ubuntu:~# echo 1 &gt; /proc/sys/net/ipv4/conf/veth0/accept_local<br>root@ubuntu:~# echo 0 &gt; /proc/sys/net/ipv4/conf/all/rp_filter<br>root@ubuntu:~# echo 0 &gt; /proc/sys/net/ipv4/conf/veth0/rp_filter<br>root@ubuntu:~# echo 0 &gt; /proc/sys/net/ipv4/conf/veth1/rp_filter</blockquote>
<p>再来看看抓包情况，我们在veth0和veth1上都看到了ICMP echo的请求包，但为什么没有应答包呢？上面不是显示ping进程已经成功收到了应答包吗？</p>
<pre><code class="bash">dev@debian:~$ sudo tcpdump -n -i veth0
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth0, link-type EN10MB (Ethernet), capture size 262144 bytes
20:23:43.113062 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24169, seq 1, length 64
20:23:44.112078 IP 192.168.2.11 
&gt; 192.168.2.1: ICMP echo request, id 24169, seq 2, length 64
20:23:45.111091 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24169, seq 3, length 64
20:23:46.110082 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24169, seq 4, length 64


dev@debian:~$ sudo tcpdump -n -i veth1
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
20:24:12.221372 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24174, seq 1, length 64
20:24:13.222089 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24174, seq 2, length 64
20:24:14.224836 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24174, seq 3, length 64
20:24:15.223826 IP 192.168.2.11 &gt; 192.168.2.1: ICMP echo request, id 24174, seq 4, length 64</code></pre>
<p>看看数据包的流程就明白了：</p>
<ol>
<li>ping进程构造ICMP echo请求包，并通过socket发给协议栈，</li>
<li>由于ping程序指定了走veth0，并且本地ARP缓存里面已经有了相关记录，所以不用再发送ARP出去，协议栈就直接将该数据包交给了veth0</li>
<li>由于veth0的另一端连的是veth1，所以ICMP echo请求包就转发给了veth1</li>
<li>veth1收到ICMP echo请求包后，转交给另一端的协议栈</li>
<li>协议栈一看自己的设备列表，发现本地有192.168.2.1这个IP，于是构造ICMP echo应答包，准备返回</li>
<li>协议栈查看自己的路由表，发现回给192.168.2.11的数据包应该走lo口，于是将应答包交给lo设备</li>
<li>lo接到协议栈的应答包后，啥都没干，转手又把数据包还给了协议栈（相当于协议栈通过发送流程把数据包给lo，然后lo再将数据包交给协议栈的接收流程）</li>
<li>协议栈收到应答包后，发现有socket需要该包，于是交给了相应的socket</li>
<li>这个socket正好是ping进程创建的socket，于是ping进程收到了应答包</li>
</ol>
<p>抓一下lo设备上的数据，发现应答包确实是从lo口回来的：</p>
<pre><code class="bash">dev@debian:~$ sudo tcpdump -n -i lo
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on lo, link-type EN10MB (Ethernet), capture size 262144 bytes
20:25:49.590273 IP 192.168.2.1 &gt; 192.168.2.11: ICMP echo reply, id 24177, seq 1, length 64
20:25:50.590018 IP 192.168.2.1 &gt; 192.168.2.11: ICMP echo reply, id 24177, seq 2, length 64
20:25:51.590027 IP 192.168.2.1 &gt; 192.168.2.11: ICMP echo reply, id 24177, seq 3, length 64
20:25:52.590030 IP 192.168.2.1 &gt; 192.168.2.11: ICMP echo reply, id 24177, seq 4, length 64</code></pre>
<h3>试着ping下其它的IP</h3>
<p>ping 192.168.2.0/24网段的其它IP失败，ping一个公网的IP也失败：</p>
<pre><code class="bash">dev@debian:~$ ping -c 1 -I veth0 192.168.2.2
PING 192.168.2.2 (192.168.2.2) from 192.168.2.11 veth0: 56(84) bytes of data.
From 192.168.2.11 icmp_seq=1 Destination Host Unreachable

--- 192.168.2.2 ping statistics ---
1 packets transmitted, 0 received, +1 errors, 100% packet loss, time 0ms

dev@debian:~$ ping -c 1 -I veth0 baidu.com
PING baidu.com (111.13.101.208) from 192.168.2.11 veth0: 56(84) bytes of data.
From 192.168.2.11 icmp_seq=1 Destination Host Unreachable

--- baidu.com ping statistics ---
1 packets transmitted, 0 received, +1 errors, 100% packet loss, time 0ms</code></pre>
<p>从抓包来看，和上面第一种veth1没有配置IP的情况是一样的，ARP请求没人处理</p>
<pre><code class="bash">dev@debian:~$ sudo tcpdump -i veth1
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on veth1, link-type EN10MB (Ethernet), capture size 262144 bytes
02:25:23.223947 ARP, Request who-has 192.168.2.2 tell 192.168.2.11, length 28
02:25:24.224352 ARP, Request who-has 192.168.2.2 tell 192.168.2.11, length 28
02:25:25.223471 ARP, Request who-has 192.168.2.2 tell 192.168.2.11, length 28
02:25:27.946539 ARP, Request who-has 123.125.114.144 tell 192.168.2.11, length 28
02:25:28.946633 ARP, Request who-has 123.125.114.144 tell 192.168.2.11, length 28
02:25:29.948055 ARP, Request who-has 123.125.114.144 tell 192.168.2.11, length 28</code></pre>
<h2>结束语</h2>
<p>从上面的介绍中可以看出，从veth0设备出去的数据包，会转发到veth1上，如果目的地址是veth1的IP的话，就能被协议栈处理，否则连ARP那关都过不了，IP forward啥的都用不上，所以不借助其它虚拟设备的话，这样的数据包只能在本地协议栈里面打转转，没法走到eth0上去，即没法发送到外面的网络中去。</p>
<p>下一篇将介绍Linux下的网桥，到时候veth设备就有用武之地了。</p>
<h2>参考</h2>
<ul><li><a href="http://www.opencloudblog.com/?p=66" rel="nofollow noreferrer">Linux Switching – Interconnecting Namespaces</a></li></ul>

                            </article>
                            <div class="text-secondary font-size-14 mb-5 d-flex justify-content-between row">
                                                                    <div class="col-6 text-secondary" id="sf-article_metas">阅读 30.6k<span class="split-dot"></span><span
                                                data-toggle="tooltip" data-placement="top"
                                                title="发布于 2017-05-01 ">更新于 2018-11-07 </span>
                                    </div>
                                                                <div class="operation col-6 text-right">
                                                                                                                                                                                                                        
                                                                                                        </div>
                            </div>

                            
                                                                                    
                            <div class="functional-area-bottom"></div>

                            <div class="text-center mb-5 mt-3 text-secondary font-size-14">
                                本作品系
                                原创
                                 ，
                                                                    <a target="_blank"
                                       class="text-secondary"
                                       href="https://creativecommons.org/licenses/by-nc-nd/4.0/">采用《署名-非商业性使用-禁止演绎 4.0
                                        国际》许可协议</a>
                                                            </div>
                            <hr class="mb-0"/>
                            <div class="article-author d-flex flex-sm-row align-items-center pt-4 row">
                                <div class="d-flex align-items-center flex-grow-1 author-left col-sm-9 col-12">
                                    <a href="/u/wuyangchun">
                                        <img class="rounded-circle mr-3" width="64" src="https://cdn.segmentfault.com/v-5e154194/global/img/user-64.png"
                                             aria-hidden="true"/>
                                    </a>
                                    <div>
                                        <h5><a class="text-body" href="/u/wuyangchun">wuyangchun</a></h5>
                                        <ul class="list-inline mb-0 authentication-info">
                                                                                        <li class="list-inline-item">
                                                <i class="fas fa-dice-d8" style="color:#BF7158"></i>
                                                <span style="color: #BF7158; font-size:16px; font-weight:bold">2.4k</span>
                                            </li>
                                                                                    </ul>
                                    </div>
                                </div>
                                <div class="author-right flex-shrink-0 col-sm-3 col-12 text-sm-right text-left mt-sm-0 mt-3">
                                                                                                                <button type="button"
                                                class="btn btn-primary follow-user sf_do"
                                                data-doType="post"
                                                data-content="{&quot;type&quot;:&quot;state&quot;,&quot;state&quot;:false,&quot;true&quot;:&quot;\u5173\u6ce8\u4f5c\u8005&quot;,&quot;false&quot;:&quot;\u6b63\u5728\u5173\u6ce8&quot;}"
                                                data-api="/iteration/api/user/1030000006806480/follow">关注作者
                                        </button>
                                                                    </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-none d-lg-block">
                        <script type='text/javascript'>
                          OA_show(3);
                        </script>
                    </div>
                                                            <div id="comment-area" class="my-4" data-type="article" data-id="1190000009251098" data-page="1"
                         data-user="null"></div>
                                        <h5 class="mt-4">推荐阅读</h5>
                    <div class="card border-0 mb-4">
                        <div class="list-group list-group-flush" id="paradigm-article-related"></div>
                    </div>

                </div>

                                <div class="col-12 col-xl-auto">
                    <div class="w-xl-300">
                                                    <div class="blog card mb-4 border-0">
                                <div class="card-body">
                                    <div class="d-flex align-items-center mb-3">
                                        <div class="media-avatar rounded mr-3" aria-hidden="true"></div>
                                        <div style="flex:1">
                                            <h5><a class="text-body"
                                                   href="/blog/wuyangchun">Linux程序员</a></h5>
                                            <span class="badge badge-primary"
                                                  style="background-color: #007bff">用户专栏</span>
                                        </div>
                                    </div>
                                    <p class="text-secondary text-truncate-2">专注Linux相关技术</p>
                                    <div class="d-flex mb-3">
                                        <div class="mr-4">
                                            <strong id="blog-followers-count"
                                                    class="followNum">444</strong>
                                            <span class="text-secondary">人关注</span>
                                        </div>
                                        <div>
                                            <strong>39</strong>
                                            <span class="text-secondary">篇文章</span>
                                        </div>
                                    </div>
                                                                        <div class="d-flex">
                                                                                    <button type="button"
                                                    class="btn btn-primary mr-2 sf_do"
                                                    data-number-tag-class="followNum"
                                                    data-doType="post"
                                                    data-content="{&quot;type&quot;:&quot;state&quot;,&quot;state&quot;:false,&quot;true&quot;:&quot;\u5173\u6ce8\u4e13\u680f&quot;,&quot;false&quot;:&quot;\u6b63\u5728\u5173\u6ce8&quot;}"
                                                    data-api="/iteration/api/blog/1200000006806596/follow">关注专栏
                                            </button>
                                        
                                        <a class="btn btn-outline-primary" href="/blog/wuyangchun">专栏主页</a>
                                    </div>
                                </div>
                            </div>
                            <!-- / 专栏信息 -->
                        
                        <div class="card border-0 overflow-hidden d-none d-xl-flex justify-content-center align-items-center float-ads">
                            <script type='text/javascript'>
                              OA_show(1);
                            </script>
                        </div>
                        <!-- / 矩形广告位 -->

                        <div class="card border-0 d-none d-xl-flex mt-4">
                            <div class="card-body">
                                <div class="text-center mb-3">
                                    <div class="mb25 hidden-md hidden-sm hidden-xs">
    <img src="https://cdn.segmentfault.com/sponsor/20200115.png" alt="Planets" usemap ="#gridsMap" width=255 height=136>
    <map name="gridsMap" id="gridsMap"></map>
    <div style="text-align: center;"><a style="color:#9E9E9E; font-size:12px" href="/sponsor">广告位促销，月曝光三千万，10 元/天</a></div>
        <script async src="https://cdn.segmentfault.com/sponsor/20200115.js"></script>
</div>
                                </div>

                                <div class="side-promote-link">
                                    <script type='text/javascript'>
                                      OA_show(7);
                                      OA_show(9);
                                      OA_show(10);
                                      OA_show(15);
                                      OA_show(16);
                                    </script>
                                </div>
                            </div>
                        </div>
                        <!-- / 格子广告、链接广告 -->

                        <div class="card border-0 mt-4 overflow-hidden d-none d-xl-flex" data-article-nav>
                            <div class="card-body">
                                <h6 class="pt-3 position-relative bg-white" style="margin-top:-1.25rem; height:45px">
                                    目录</h6>
                                <nav id="article-nav-list" data-article-nav-list class="font-size-14">

                                </nav>
                            </div>
                        </div>
                        <!-- / 目录 -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
      var ARTICLE = {
        articleId: 1190000009251098,
        title: "Linux虚拟网络设备之veth",
        isLiked: false,
        votes: 39,
        isBookmarked: false,
        bookmarks: 43,
        canReward: false
      }
    </script>

    







<script type='text/javascript'>
  OA_show(4);
</script>

<footer id="footer" class="bg-white py-5 font-size-14">
    <div class="container">
        <div class="row">
            <dl class="col-4 col-md-2">
                <dt class="h6">产品</dt>
                                <dd class="my-1"><a class="text-secondary" href="/questions/hottest?utm_source=sf-footer" target="_blank">热门问答</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/blogs/hottest?utm_source=sf-footer" target="_blank">热门专栏</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/lives?utm_source=sf-footer" target="_blank">热门课程</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/events?utm_source=sf-footer" target="_blank">最新活动</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/groups?utm_source=sf-footer" target="_blank">技术圈</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/groups?tab=jobs&amp;utm_source=sf-footer" target="_blank">酷工作</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/app?utm_source=sf-footer" target="_blank">移动客户端</a></dd>
                            </dl>

            <dl class="col-4 col-md-2">
                <dt class="h6">课程</dt>
                                <dd class="my-1"><a class="text-secondary" href="/lives/edu?tag=java&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank">Java 开发课程</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/lives/edu?tag=php&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank">PHP 开发课程</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/lives/edu?tag=python&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank">Python 开发课程</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/lives/edu?category=1&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank">前端开发课程</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/lives/study?category=3&amp;sort=hottest&amp;utm_source=sf-footer" target="_blank">移动开发课程</a></dd>
                            </dl>

            <dl class="col-4 col-md-2 ">
                <dt class="h6">资源</dt>
                                <dd class="my-1"><a class="text-secondary" href="/weekly?utm_source=sf-footer" target="_blank">每周精选</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/users?utm_source=sf-footer" target="_blank">用户排行榜</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/badges?utm_source=sf-footer" target="_blank">徽章</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/faq?utm_source=sf-footer" target="_blank">帮助中心</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/repu?utm_source=sf-footer" target="_blank">声望与权限</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/community?utm_source=sf-footer" target="_blank">社区服务中心</a></dd>
                            </dl>

            <dl class="col-4 col-md-2">
                <dt class="h6">合作</dt>
                                <dd class="my-1"><a class="text-secondary" href="https://about.segmentfault.com/?utm_source=sf-footer" target="_blank">关于我们</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="https://business.segmentfault.com/ads?utm_source=sf-footer" target="_blank">广告投放</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/groups?tab=jobs&amp;utm_source=sf-footer" target="_blank">职位发布</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="https://jinshuju.net/f/HK5r9K?utm_source=sf-footer" target="_blank">讲师招募</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="https://about.segmentfault.com/contact.html?utm_source=sf-footer" target="_blank">联系我们</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/link?utm_source=sf-footer" target="_blank">合作伙伴</a></dd>
                            </dl>

            <dl class="col-4 col-md-2">
                <dt class="h6">关注</dt>
                                <dd class="my-1"><a class="text-secondary" href="/blog/segmentfault?utm_source=sf-footer" target="_blank">产品技术日志</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/blog/community_admin?utm_source=sf-footer" target="_blank">社区运营日志</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/blog/segmentfault_news?utm_source=sf-footer" target="_blank">市场运营日志</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/blog/segmentfault_team?utm_source=sf-footer" target="_blank">团队日志</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/blog/interview?utm_source=sf-footer" target="_blank">社区访谈</a></dd>
                            </dl>

            <dl class="col-4 col-md-2" id="license">
                <dt class="h6">条款</dt>
                                <dd class="my-1"><a class="text-secondary" href="/tos?utm_source=sf-footer" target="_blank">服务条款</a></dd>
                                <dd class="my-1"><a class="text-secondary" href="/privacy?utm_source=sf-footer" target="_blank">隐私政策</a></dd>
                                <dd class="my-1">
                    <a class="text-secondary" href="/app?utm_source=sf-footer"><img width="60" src="https://cdn.segmentfault.com/v-5e154194/page/img/app/appQrcode.png" class="app-qrcode"><br>下载 App</a>
                </dd>
            </dl>
        </div>
        <hr class="mt-2 mb-4">
        <div class="row">
            <div class="col-md-8">
                <div class="text-secondary">
                    <p class="mb-1">Copyright &copy; 2011-2020 SegmentFault. 当前呈现版本 19.02.27</p>
                    <p class="mb-1">
                        <a class="text-secondary mr-2" target="_blank" href="http://beian.miit.gov.cn" rel="nofollow">浙ICP备 15005796号-2</a>
                        <a class="text-secondary mr-2" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow">浙公网安备 33010602002000号</a>
                        杭州堆栈科技有限公司版权所有
                    </p>
                    <p class="mb-0">CDN 存储服务由 <a class="text-secondary" target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 赞助提供 </p>
                </div>
            </div>
            <div class="col-md-4 text-right">
                <div class="shareContent ">
                </div>
            </div>
        </div>
    </div>
</footer>
<script>
    window.serverTime = 1579103045000;
</script>

<script>
(function (w) {
    w.SF = {
        staticUrl: "https://assets.segmentfault.com/v-5e1ec062/"
    };
    w.SF.token = (function () {
    var _nCDYd = //'dQ'
'25'+'d'//'uQ'
+''///*'X'*/'X'
+'7'//'aLD'
+'06c'//'BF'
+'66'//'6AP'
+/* 'mf'//'mf' */''+'cfc'//'W'
+'801'//'V'
+//'oYm'
'02'+//'A0e'
'65'+'ac'//'wsf'
+'f2'//'E3'
+//'5Qe'
'5Qe'+//'Ap5'
'5'+'60'//'g'
+//'8'
'8e2'+'ChM'//'ChM'
+//'qDU'
'f'+'7'//'T'
+'5'//'D'
, _C8Fp = [[23,26],[29,32]];

    for (var i = 0; i < _C8Fp.length; i ++) {
        _nCDYd = _nCDYd.substring(0, _C8Fp[i][0]) + _nCDYd.substring(_C8Fp[i][1]);
    }

    return _nCDYd;
})();;
})(window);

var lock = {
    type: "",
    text: '',
    table: {"ban_post":[1,"\u4f60\u5df2\u7ecf\u88ab\u7981\u8a00, \u65e0\u6cd5\u8fdb\u884c\u6b64\u64cd\u4f5c, \u5982\u6709\u7591\u4e49\u8bf7\u63d0\u4ea4\u7533\u8bc9, \u6216\u8005\u53d1\u90ae\u4ef6\u5230pr@segmentfault.com"]}
};

    var ddosMode = false;

(function (currentUrl) {
if (typeof URL != 'undefined') {
    var baseUrl = new URL('https://segmentfault.com');

    if (baseUrl.protocol != currentUrl.protocol || baseUrl.host != currentUrl.host) {
            window.location.href = baseUrl.protocol + '//' + baseUrl.host
                + currentUrl.pathname + currentUrl.search + currentUrl.hash;
        }
    }
})(window.location);
</script>

<script src="https://assets.segmentfault.com/v-5e1ec062/js/jquery.js"></script>
<script src="https://assets.segmentfault.com/v-5e1ec062/js/vendors.js"></script>
<script src="https://assets.segmentfault.com/v-5e1ec062/js/detail.bundle.js"></script>

<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-918487-8');
    </script>

</body>
</html>

