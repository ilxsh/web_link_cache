<!DOCTYPE html>
<!-- saved from url=(0046)http://www.cnblogs.com/ilinuxer/p/6188303.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="never">
    <title>理解Docker容器的进程管理 - ilinux_one - 博客园</title>
<meta property="og:description" content="摘要： Docker在进程管理上有一些特殊之处，如果不注意这些细节中的魔鬼就会带来一些隐患。另外Docker鼓励“一个容器一个进程(one process per container)”的方">
    <link type="text/css" rel="stylesheet" href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/bundle-ClearGertrude.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/bundle-ClearGertrude-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/ilinuxer/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/ilinuxer/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/ilinuxer/wlwmanifest.xml">
    <script src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/osd.js.download"></script><script src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/pubads_impl_rendering_2019051301.js.download"></script><script async="" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/analytics.js.download"></script><script src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/jquery-2.2.0.min.js.download"></script>
    <script>var currentBlogId=225906;var currentBlogApp='ilinuxer',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/blog-common.js.download" type="text/javascript"></script>
<link rel="preload" href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/f.txt" as="script"><script type="text/javascript" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/f.txt"></script><script src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/pubads_impl_2019051301.js.download" async=""></script><link rel="prefetch" href="http://tpc.googlesyndication.com/safeframe/1-0-33/html/container.html"></head>
<body>
<a name="top"></a>


<div id="header">
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/ilinuxer/">ilinux_one</a></h1>
<p id="tagline"></p></div>
<div id="main">
	
        <div id="post_detail">
	<div class="post">
		<h2>
			<a id="cb_post_title_url" href="https://www.cnblogs.com/ilinuxer/p/6188303.html">理解Docker容器的进程管理</a>
		</h2>
		<div class="postText"><div id="cnblogs_post_body" class="blogpost-body"><p class="blog-summary">摘要：&nbsp;Docker在进程管理上有一些特殊之处，如果不注意这些细节中的魔鬼就会带来一些隐患。另外Docker鼓励“一个容器一个进程(one process per container)”的方式。这种方式非常适合以单进程为主的微服务架构的应用。然而由于一些传统的应用是由若干紧耦合的多个进程构成的，这些进程难以</p>
<div class="content-detail">
<p>Docker在进程管理上有一些特殊之处，如果不注意这些细节中的魔鬼就会带来一些隐患。另外Docker鼓励“一个容器一个进程(one process per container)”的方式。这种方式非常适合以单进程为主的微服务架构的应用。然而由于一些传统的应用是由若干紧耦合的多个进程构成的，这些进程难以拆分到不同的容器中，所以在单个容器内运行多个进程便成了一种折衷方案；此外在一些场景中，用户期望利用Docker容器来作为轻量级的虚拟化方案，动态的安装配置应用，这也需要在容器中运行多个进程。而在Docker容器中的正确运行多进程应用将给开发者带来更多的挑战。</p>
<p><a href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/c86f7ee1dee9169c02c32649d674a511b6095049.jpeg" target="_blank" data-spm-anchor-id="5176.100239.blogcont5545.12"><img title="14553279344763" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/c86f7ee1dee9169c02c32649d674a511b6095049.jpeg" alt="14553279344763"></a></p>
<p>今天我们会分析Docker中进程管理的一些细节，并介绍一些常见问题的解决方法和注意事项。</p>
<h3 id="1">容器的PID namespace（名空间）</h3>
<p>在Docker中，进程管理的基础就是Linux内核中的PID名空间技术。在不同PID名空间中，进程ID是独立的；即在两个不同名空间下的进程可以有相同的PID。</p>
<p>Linux内核为所有的PID名空间维护了一个树状结构：最顶层的是系统初始化时创建的root namespace（根名空间），再创建的新PID namespace就称之为child namespace（子名空间），而原先的PID名空间就是新创建的PID名空间的parent namespace（父名空间）。通过这种方式，系统中的PID名空间会形成一个层级体系。父节点可以看到子节点中的进程，并可以通过信号等方式对子节点中的进程产生影响。反过来，子节点不能看到父节点名空间中的任何内容，也不可能通过kill或ptrace影响父节点或其他名空间中的进程。</p>
<p>在Docker中，每个Container都是Docker Daemon的子进程，每个Container进程缺省都具有不同的PID名空间。通过名空间技术，Docker实现容器间的进程隔离。另外Docker Daemon也会利用PID名空间的树状结构，实现了对容器中的进程交互、监控和回收。注：Docker还利用了其他名空间（UTS，IPC，USER）等实现了各种系统资源的隔离，由于这些内容和进程管理关联不多，本文不会涉及。</p>
<p>当创建一个Docker容器的时候，就会新建一个PID名空间。容器启动进程在该名空间内PID为1。当PID1进程结束之后，Docker会销毁对应的PID名空间，并向容器内所有其它的子进程发送SIGKILL。</p>
<p>下面我们来做一些试验，下面我们会利用官方的Redis镜像创建两个容器，并观察里面的进程。<br>如果你在Windows或Mac上利用"docker-machine"，请利用<code>docker-machine ssh default</code>进入Boot2docker虚拟机</p>
<p>创建名为"redis"的容器，并在容器内部和宿主机中查看容器中的进程信息</p>
<pre><code class="hljs dockerfile" data-language="">docker@default:~$ docker <span class="hljs-keyword">run<span class="bash"> <span class="hljs-_">-d --name redis redis
f6bc57cc1b464b05b07b567211cb693ee2a682546ed86c611b5d866f6acc531c
docker@default:~$ docker exec redis ps -ef
UID        PID  PPID  C STIME TTY          TIME <span class="hljs-keyword">CMD<span class="bash">
redis        1     0  0 01:49 ?        00:00:00 redis-server *:6379
root        <span class="hljs-number">11     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">01:<span class="hljs-number">49 ?        <span class="hljs-number">00:<span class="hljs-number">00:<span class="hljs-number">00 ps -ef
docker@default:~$ docker top redis
UID                 PID                 PPID                C                   STIME               TTY                 TIME                <span class="hljs-keyword">CMD<span class="bash">
999                 9302                1264                0                   01:49               ?                   00:00:00            redis-server *:6379
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>创建名为"redis2"的容器，并在容器内部和宿主机中查看容器中的进程信息</p>
<pre><code class="hljs dockerfile" data-language="">docker@default:~$ docker <span class="hljs-keyword">run<span class="bash"> <span class="hljs-_">-d --name redis2 redis
<span class="hljs-number">356eca186321ab6ef4c4337aa0c7de2af1e01430587d6b0e1add2e028ed05f60
docker@default:~$ docker exec redis2 ps -ef
UID        PID  PPID  C STIME TTY          TIME <span class="hljs-keyword">CMD<span class="bash">
redis        1     0  0 01:50 ?        00:00:00 redis-server *:6379
root        <span class="hljs-number">10     <span class="hljs-number">0  <span class="hljs-number">4 <span class="hljs-number">01:<span class="hljs-number">50 ?        <span class="hljs-number">00:<span class="hljs-number">00:<span class="hljs-number">00 ps -ef
docker@default:~$ docker top redis2
UID                 PID                 PPID                C                   STIME               TTY                 TIME                <span class="hljs-keyword">CMD<span class="bash">
999                 9342                1264                0                   01:50               ?                   00:00:00            redis-server *:6379
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们可以使用<code>docker exec</code>命令进入容器PID名空间，并执行应用。通过<code>ps -ef</code>命令，可以看到每个Redis容器都包含一个PID为1的进程，"redis-server"，它是容器的启动进程，具有特殊意义。</p>
<p>利用<code>docker top</code>命令，可以让我们从宿主机操作系统中看到容器的进程信息。在两个容器中的"redis-server"是两个独立的进程，但是他们拥有相同的父进程 Docker Daemon。所以Docker可以父子进程的方式在Docker Daemon和Redis容器之间进行交互。</p>
<p>另一个值得注意的方面是，<code>docker exec</code>命令可以进入指定的容器内部执行命令。由它启动的进程属于容器的namespace和相应的cgroup。但是这些进程的父进程是Docker Daemon而非容器的PID1进程。</p>
<p>我们下面会在Redis容器中，利用<code>docker exec</code>命令启动一个"sleep"进程</p>
<pre><code class="hljs tap" data-language="">docker@default:~$ docker exec -d redis sleep 2000
docker@default:~$ docker exec redis ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
redis       <span class="hljs-number"> 1    <span class="hljs-number"> 0 <span class="hljs-number"> 0 02:26 ?        00:00:00 redis-server *:6379
root       <span class="hljs-number"> 11    <span class="hljs-number"> 0 <span class="hljs-number"> 0 02:26 ?        00:00:00 sleep 2000
root       <span class="hljs-number"> 21    <span class="hljs-number"> 0 <span class="hljs-number"> 0 02:29 ?        00:00:00 ps -ef
docker@default:~$ docker top redis
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
999                <span class="hljs-number"> 9955               <span class="hljs-number"> 1264               <span class="hljs-number"> 0                   02:12               ?                   00:00:00            redis-server *:6379
root               <span class="hljs-number"> 9984               <span class="hljs-number"> 1264               <span class="hljs-number"> 0                   02:13               ?                   00:00:00            sleep 2000
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们可以清楚的看到exec命令创建的sleep进程属Redis容器的名空间，但是它的父进程是Docker Daemon。</p>
<p>如果我们在宿主机操作系统中手动杀掉容器的启动进程（在上文示例中是redis-server），容器会自动结束，而容器名空间中所有进程也会退出。</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ PID=<span class="hljs-variable">$(docker inspect --format=<span class="hljs-string">"{{.State.Pid}}" redis)
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ sudo kill <span class="hljs-variable">$PID
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
<span class="hljs-number">356eca186321        redis               <span class="hljs-string">"/entrypoint.sh redis"   <span class="hljs-number">23 minutes ago      Up <span class="hljs-number">4 minutes               <span class="hljs-number">6379/tcp            redis2
f6bc57cc1b46        redis               <span class="hljs-string">"/entrypoint.sh redis"   <span class="hljs-number">23 minutes ago      Exited (<span class="hljs-number">0) <span class="hljs-number">4 seconds ago                       redis
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>通过以上示例：</p>
<ul>
<li>每个容器有独立的PID名空间，</li>
<li>容器的生命周期和其PID1进程一致</li>
<li>利用<code>docker exec</code>可以进入到容器的名空间中启动进程</li>
</ul>
<p>此外，自从Docker 1.5之后，<code>docker run</code>命令引入了<code>--pid=host</code>参数来支持使用宿主机PID名空间来启动容器进程，这样可以方便的实现容器内应用和宿主机应用之间的交互：比如利用容器中的工具监控和调试宿主机进程。</p>
<h3 id="2">如何指明容器PID1进程</h3>
<p>在Docker容器中的初始化进程（PID1进程）在容器进程管理上具有特殊意义。它可以被Dockerfile中的<code>ENTRYPOINT</code>或<code>CMD</code>指令所指明；也可以被<code>docker run</code>命令的启动参数所覆盖。了解这些细节可以帮助我们更好地了解PID1的进程的行为。</p>
<p>关于ENTRYPOINT和CMD指令的不同，我们可以参见官方的Dockerfile说明和最佳实践</p>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/?spm=5176.100239.blogcont5545.13.qOGovX#entrypoint" data-spm-anchor-id="5176.100239.blogcont5545.13">https://docs.docker.com/engine/reference/builder/#entrypoint</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/?spm=5176.100239.blogcont5545.14.qOGovX#cmd" data-spm-anchor-id="5176.100239.blogcont5545.14">https://docs.docker.com/engine/reference/builder/#cmd</a></li>
</ul>
<p>值得注意的一点是：在ENTRYPOINT和CMD指令中，提供两种不同的进程执行方式&nbsp;shell&nbsp;和&nbsp;exec</p>
<p>在&nbsp;shell&nbsp;方式中，CMD/ENTRYPOINT指令以如下方式定义</p>
<pre><code class="hljs dockerfile" data-language=""><span class="hljs-keyword">CMD<span class="bash"> executable param1 param2
</span></span></code></pre>
<p>这种方式中的PID1进程是以<code>/bin/sh -c ”executable param1 param2”</code>方式启动的</p>
<p>而在&nbsp;exec&nbsp;方式中，CMD/ENTRYPOINT指令以如下方式定义</p>
<pre><code class="hljs dockerfile" data-language=""><span class="hljs-keyword">CMD<span class="bash"> [<span class="hljs-string">"executable",<span class="hljs-string">"param1",<span class="hljs-string">"param2"]
</span></span></span></span></span></code></pre>
<p>注意这里的可执行命令和参数是利用JSON字符串数组的格式定义的，这样PID1进程会以&nbsp;<code>executable param1 param2</code>&nbsp;方式启动的。另外，在<code>docker run</code>命令中指明的命令行参数也是以&nbsp;exec&nbsp;方式启动的。</p>
<p>为了解释两种不同运行方式的区别，我们利用不同的Dockerfile分别创建两个Redis镜像</p>
<p>"Dockerfile_shell"文件内容如下，会利用shell方式启动redis服务</p>
<pre><code class="hljs crystal" data-language="">FROM <span class="hljs-symbol">ubuntu:<span class="hljs-number">14.04
RUN apt-get update &amp;&amp; apt-get -y install redis-server &amp;&amp; rm -rf /var/<span class="hljs-class"><span class="hljs-keyword">lib/<span class="hljs-title">apt/<span class="hljs-title">lists/*
EXPOSE <span class="hljs-number">6379
CMD <span class="hljs-string">"/usr/bin/redis-server"
</span></span></span></span></span></span></span></span></code></pre>
<p>"Dockerfile_exec"文件内容如下，会利用exec方式启动redis服务</p>
<pre><code class="hljs crystal" data-language="">FROM <span class="hljs-symbol">ubuntu:<span class="hljs-number">14.04
RUN apt-get update &amp;&amp; apt-get -y install redis-server &amp;&amp; rm -rf /var/<span class="hljs-class"><span class="hljs-keyword">lib/<span class="hljs-title">apt/<span class="hljs-title">lists/*
EXPOSE <span class="hljs-number">6379
CMD [<span class="hljs-string">"/usr/bin/redis-server"]
</span></span></span></span></span></span></span></span></code></pre>
<p>然后基于它们构建两个镜像"myredis:shell"和"myredis:exec"</p>
<pre><code class="hljs bash" data-language="">docker build -t myredis:shell <span class="hljs-_">-f Dockerfile_shell .
docker build -t myredis:<span class="hljs-built_in">exec <span class="hljs-_">-f Dockerfile_exec .
</span></span></span></code></pre>
<p>运行"myredis:shell"镜像，我们可以发现它的启动进程(PID1)是<code>/bin/sh -c "/usr/bin/redis-server"</code>，并且它创建了一个子进程<code>/usr/bin/redis-server *:6379</code>。</p>
<pre><code class="hljs groovy" data-language="">docker<span class="hljs-meta">@default:~$ docker run -d --name myredis <span class="hljs-string">myredis:shell
<span class="hljs-number">49f7fc37f4b7cf1ed7f5296537a93b2ad23b1b6686a05e5c7e40e9a2b2d3665e
docker<span class="hljs-meta">@default:~$ docker exec myredis ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         <span class="hljs-number">1     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">08:<span class="hljs-number">12 ?        00:<span class="hljs-number">00:<span class="hljs-number">00 <span class="hljs-regexp">/bin/sh -c <span class="hljs-string">"/usr/bin/redis-server"
root         <span class="hljs-number">5     <span class="hljs-number">1  <span class="hljs-number">0 <span class="hljs-number">08:<span class="hljs-number">12 ?        00:<span class="hljs-number">00:<span class="hljs-number">00 <span class="hljs-regexp">/usr/bin/redis-server *:<span class="hljs-number">6379
root         <span class="hljs-number">8     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">08:<span class="hljs-number">12 ?        00:<span class="hljs-number">00:<span class="hljs-number">00 ps -ef
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>下面运行"myredis:exec"镜像，我们可以发现它的启动进程是<code>/usr/bin/redis-server *:6379</code>，并没有其他子进程存在。</p>
<pre><code class="hljs dockerfile" data-language="">docker@default:~$ docker <span class="hljs-keyword">run<span class="bash"> <span class="hljs-_">-d --name myredis2 myredis:<span class="hljs-built_in">exec
d1df0e4f4e3bbe36fca94f08df9ad3306fa1dee86415c853ddc5593fb9fa5673
docker@default:~$ docker exec myredis2 ps -ef
UID        PID  PPID  C STIME TTY          TIME <span class="hljs-keyword">CMD<span class="bash">
root         1     0  0 08:13 ?        00:00:00 /usr/bin/redis-server *:6379
root         <span class="hljs-number">8     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">08:<span class="hljs-number">13 ?        <span class="hljs-number">00:<span class="hljs-number">00:<span class="hljs-number">00 ps -ef
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>由此我们可以清楚的看到，以exec和shell方式执行命令可能会导致容器的PID1进程不同。然而这又有什么问题呢？</p>
<p>原因在于：PID1进程对于操作系统而言具有特殊意义。操作系统的PID1进程是init进程，以守护进程方式运行，是所有其他进程的祖先，具有完整的进程生命周期管理能力。在Docker容器中，PID1进程是启动进程，它也会负责容器内部进程管理的工作。而这也将导致进程管理在Docker容器内部和完整操作系统上的不同。</p>
<h3 id="3">进程信号处理</h3>
<p>信号是Unix/Linux中进程间异步通信机制。Docker提供了两个命令<code>docker stop</code>和<code>docker kill</code>来向容器中的PID1进程发送信号。</p>
<p>当执行<code>docker stop</code>命令时，docker会首先向容器的PID1进程发送一个SIGTERM信号，用于容器内程序的退出。如果容器在收到SIGTERM后没有结束， 那么Docker Daemon会在等待一段时间（默认是10s）后，再向容器发送SIGKILL信号，将容器杀死变为退出状态。这种方式给Docker应用提供了一个优雅的退出(graceful stop)机制，允许应用在收到stop命令时清理和释放使用中的资源。而<code>docker kill</code>可以向容器内PID1进程发送任何信号，缺省是发送SIGKILL信号来强制退出应用。</p>
<p>注：从Docker 1.9开始，Docker支持停止容器时向其发送自定义信号，开发者可以在Dockerfile使用<code>STOPSIGNAL</code>指令，或<code>docker run</code>命令中使用<code>--stop-signal</code>参数中指明。缺省是<code>SIGTERM</code></p>
<p>我们来看看不同的PID1进程，对进程信号处理的不同之处。首先，我们使用<code>docker stop</code>命令停止由&nbsp;exec&nbsp;模式启动的“myredis2”容器，并检查其日志</p>
<pre><code class="hljs sql" data-language="">docker@default:~$ docker <span class="hljs-keyword">stop myredis2
myredis2
docker@<span class="hljs-keyword">default:~$ docker <span class="hljs-keyword">logs myredis2
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">13:<span class="hljs-number">01.631 # <span class="hljs-keyword">Warning: <span class="hljs-keyword">no config <span class="hljs-keyword">file specified, <span class="hljs-keyword">using the <span class="hljs-keyword">default config. <span class="hljs-keyword">In <span class="hljs-keyword">order <span class="hljs-keyword">to specify a config <span class="hljs-keyword">file <span class="hljs-keyword">use /usr/<span class="hljs-keyword">bin/redis-<span class="hljs-keyword">server /<span class="hljs-keyword">path/<span class="hljs-keyword">to/redis.conf
                _._                                                  
           _.-<span class="hljs-string">``__ <span class="hljs-string">''-._                                             
      _.-<span class="hljs-string">``    <span class="hljs-string">`.  `_.  <span class="hljs-string">''-._           Redis <span class="hljs-number">2.8<span class="hljs-number">.4 (<span class="hljs-number">00000000/<span class="hljs-number">0) <span class="hljs-number">64 <span class="hljs-built_in">bit
  .-<span class="hljs-string">`` .-<span class="hljs-string">``<span class="hljs-string">`.  `<span class="hljs-string">``\/    _.,_ <span class="hljs-string">''-._                                   
 (    <span class="hljs-string">'      ,       .-`  | `,    )     Running in stand alone mode
 |`-._`-...-` __...-.``-._|'<span class="hljs-string">` _.-'|     Port: 6379
 |    `-._   <span class="hljs-string">`._    /     _.-'    |     PID: 1
  `-._    <span class="hljs-string">`-._  `-./  _.-<span class="hljs-string">'    _.-'                                   
 |<span class="hljs-string">`-._`-._    <span class="hljs-string">`-.__.-'    _.-'_.-'|                                  
 |    `-._<span class="hljs-string">`-._        _.-'_.-'    |           http://redis.io        
  `-._    <span class="hljs-string">`-._`-.__.-<span class="hljs-string">'_.-'    _.-<span class="hljs-string">'                                   
 |`-._`-._    `-.__.-'    _.-<span class="hljs-string">'_.-'|                                  
 |    <span class="hljs-string">`-._`-._        _.-<span class="hljs-string">'_.-'    |                                  
  <span class="hljs-string">`-._    `-._<span class="hljs-string">`-.__.-'_.-'    _.-'                                   
      `-._    <span class="hljs-string">`-.__.-'    _.-'                                       
          `-._        _.-<span class="hljs-string">'                                           
              `-.__.-'                                               

[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">13:<span class="hljs-number">01.632 # <span class="hljs-keyword">Server started, Redis <span class="hljs-keyword">version <span class="hljs-number">2.8<span class="hljs-number">.4
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">13:<span class="hljs-number">01.633 # <span class="hljs-keyword">WARNING overcommit_memory <span class="hljs-keyword">is <span class="hljs-keyword">set <span class="hljs-keyword">to <span class="hljs-number">0! Background <span class="hljs-keyword">save may fail <span class="hljs-keyword">under <span class="hljs-keyword">low <span class="hljs-keyword">memory condition. <span class="hljs-keyword">To fix this issue <span class="hljs-keyword">add <span class="hljs-string">'vm.overcommit_memory = 1' <span class="hljs-keyword">to /etc/sysctl.conf <span class="hljs-keyword">and <span class="hljs-keyword">then reboot <span class="hljs-keyword">or run the command <span class="hljs-string">'sysctl vm.overcommit_memory=1' <span class="hljs-keyword">for this <span class="hljs-keyword">to take effect.
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">13:<span class="hljs-number">01.633 * The <span class="hljs-keyword">server <span class="hljs-keyword">is <span class="hljs-keyword">now ready <span class="hljs-keyword">to <span class="hljs-keyword">accept connections <span class="hljs-keyword">on port <span class="hljs-number">6379
[<span class="hljs-number">1 | signal <span class="hljs-keyword">handler] (<span class="hljs-number">1455179074) Received SIGTERM, scheduling shutdown...
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">24:<span class="hljs-number">34.259 # <span class="hljs-keyword">User requested shutdown...
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">24:<span class="hljs-number">34.259 * Saving the <span class="hljs-keyword">final RDB <span class="hljs-keyword">snapshot <span class="hljs-keyword">before exiting.
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">24:<span class="hljs-number">34.262 * DB saved <span class="hljs-keyword">on disk
[<span class="hljs-number">1] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">24:<span class="hljs-number">34.262 # Redis <span class="hljs-keyword">is <span class="hljs-keyword">now ready <span class="hljs-keyword">to <span class="hljs-keyword">exit, bye bye...
docker@<span class="hljs-keyword">default:~$ 
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们发现对“myredis2”容器的stop命令几乎立刻生效；而且在容器日志中，我们看到了“Received SIGTERM, scheduling shutdown...”的内容，说明“redis-server”进程接收到了SIGTERM消息，并优雅地退出。</p>
<p>我们再对利用&nbsp;shell&nbsp;模式启动的“myredis”容器发出停止操作，并检查其日志</p>
<pre><code class="hljs sql" data-language="">docker@default:~$ docker <span class="hljs-keyword">stop myredis
myredis
docker@<span class="hljs-keyword">default:~$ docker <span class="hljs-keyword">logs myredis
[<span class="hljs-number">5] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">12:<span class="hljs-number">40.108 # <span class="hljs-keyword">Warning: <span class="hljs-keyword">no config <span class="hljs-keyword">file specified, <span class="hljs-keyword">using the <span class="hljs-keyword">default config. <span class="hljs-keyword">In <span class="hljs-keyword">order <span class="hljs-keyword">to specify a config <span class="hljs-keyword">file <span class="hljs-keyword">use /usr/<span class="hljs-keyword">bin/redis-<span class="hljs-keyword">server /<span class="hljs-keyword">path/<span class="hljs-keyword">to/redis.conf
                _._                                                  
           _.-<span class="hljs-string">``__ <span class="hljs-string">''-._                                             
      _.-<span class="hljs-string">``    <span class="hljs-string">`.  `_.  <span class="hljs-string">''-._           Redis <span class="hljs-number">2.8<span class="hljs-number">.4 (<span class="hljs-number">00000000/<span class="hljs-number">0) <span class="hljs-number">64 <span class="hljs-built_in">bit
  .-<span class="hljs-string">`` .-<span class="hljs-string">``<span class="hljs-string">`.  `<span class="hljs-string">``\/    _.,_ <span class="hljs-string">''-._                                   
 (    <span class="hljs-string">'      ,       .-`  | `,    )     Running in stand alone mode
 |`-._`-...-` __...-.``-._|'<span class="hljs-string">` _.-'|     Port: 6379
 |    `-._   <span class="hljs-string">`._    /     _.-'    |     PID: 5
  `-._    <span class="hljs-string">`-._  `-./  _.-<span class="hljs-string">'    _.-'                                   
 |<span class="hljs-string">`-._`-._    <span class="hljs-string">`-.__.-'    _.-'_.-'|                                  
 |    `-._<span class="hljs-string">`-._        _.-'_.-'    |           http://redis.io        
  `-._    <span class="hljs-string">`-._`-.__.-<span class="hljs-string">'_.-'    _.-<span class="hljs-string">'                                   
 |`-._`-._    `-.__.-'    _.-<span class="hljs-string">'_.-'|                                  
 |    <span class="hljs-string">`-._`-._        _.-<span class="hljs-string">'_.-'    |                                  
  <span class="hljs-string">`-._    `-._<span class="hljs-string">`-.__.-'_.-'    _.-'                                   
      `-._    <span class="hljs-string">`-.__.-'    _.-'                                       
          `-._        _.-<span class="hljs-string">'                                           
              `-.__.-'                                               

[<span class="hljs-number">5] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">12:<span class="hljs-number">40.109 # <span class="hljs-keyword">Server started, Redis <span class="hljs-keyword">version <span class="hljs-number">2.8<span class="hljs-number">.4
[<span class="hljs-number">5] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">12:<span class="hljs-number">40.109 # <span class="hljs-keyword">WARNING overcommit_memory <span class="hljs-keyword">is <span class="hljs-keyword">set <span class="hljs-keyword">to <span class="hljs-number">0! Background <span class="hljs-keyword">save may fail <span class="hljs-keyword">under <span class="hljs-keyword">low <span class="hljs-keyword">memory condition. <span class="hljs-keyword">To fix this issue <span class="hljs-keyword">add <span class="hljs-string">'vm.overcommit_memory = 1' <span class="hljs-keyword">to /etc/sysctl.conf <span class="hljs-keyword">and <span class="hljs-keyword">then reboot <span class="hljs-keyword">or run the command <span class="hljs-string">'sysctl vm.overcommit_memory=1' <span class="hljs-keyword">for this <span class="hljs-keyword">to take effect.
[<span class="hljs-number">5] <span class="hljs-number">11 Feb <span class="hljs-number">08:<span class="hljs-number">12:<span class="hljs-number">40.109 * The <span class="hljs-keyword">server <span class="hljs-keyword">is <span class="hljs-keyword">now ready <span class="hljs-keyword">to <span class="hljs-keyword">accept connections <span class="hljs-keyword">on port <span class="hljs-number">6379
docker@<span class="hljs-keyword">default:~$
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们发现对”myredis”容器的stop命令暂停了一会儿才结束，而且在日志中我们没有看到任何收到SIGTERM信号的内容。原因其PID1进程sh没有对SIGTERM信号的处理逻辑，所以它忽略了所接收到的SIGTERM信号。当Docker等待stop命令执行10秒钟超时之后，Docker Daemon发送SIGKILL强制杀死sh进程，并销毁了它的PID名空间，其子进程redis-server也在收到SIGKILL信号后被强制终止。如果此时应用还有正在执行的事务或未持久化的数据，强制进程退出可能导致数据丢失或状态不一致。</p>
<p>通过这个示例我们可以清楚的理解PID1进程在信号管理的重要作用。所以，</p>
<ul>
<li>容器的PID1进程需要能够正确的处理SIGTERM信号来支持优雅退出。</li>
<li>如果容器中包含多个进程，需要PID1进程能够正确的传播SIGTERM信号来结束所有的子进程之后再退出。</li>
<li>确保PID1进程是期望的进程。缺省sh/bash进程没有提供SIGTERM的处理，需要通过shell脚本来设置正确的PID1进程，或捕获SIGTERM信号。</li>
</ul>
<p>另外需要注意的是：由于PID1进程的特殊性，Linux内核为他做了特殊处理。如果它没有提供某个信号的处理逻辑，那么与其在同一个PID名空间下的进程发送给它的该信号都会被屏蔽。这个功能的主要作用是防止init进程被误杀。我们可以验证在容器内部发出的SIGKILL信号无法杀死PID1进程</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker start myredis
myredis
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec myredis kill -<span class="hljs-number">9 <span class="hljs-number">1
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker top myredis
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                <span class="hljs-number">3586                <span class="hljs-number">1290                <span class="hljs-number">0                   08<span class="hljs-symbol">:<span class="hljs-number">45               ?                   <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00            /bin/sh -c <span class="hljs-string">"/usr/bin/redis-server"
root                <span class="hljs-number">3591                <span class="hljs-number">3586                <span class="hljs-number">0                   08<span class="hljs-symbol">:<span class="hljs-number">45               ?                   <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00            /usr/bin/redis-server *<span class="hljs-symbol">:<span class="hljs-number">6379
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h3 id="4">孤儿进程与僵尸进程管理</h3>
<p>熟悉Unix/Linux进程管理的同学对多进程应用并不陌生。</p>
<p>当一个子进程终止后，它首先会变成一个“失效(defunct)”的进程，也称为“僵尸（zombie）”进程，等待父进程或系统收回（reap）。在Linux内核中维护了关于“僵尸”进程的一组信息（PID，终止状态，资源使用信息），从而允许父进程能够获取有关子进程的信息。如果不能正确回收“僵尸”进程，那么他们的进程描述符仍然保存在系统中，系统资源会缓慢泄露。</p>
<p>大多数设计良好的多进程应用可以正确的收回僵尸子进程，比如NGINX master进程可以收回已终止的worker子进程。如果需要自己实现，则可利用如下方法：<br>1. 利用操作系统的waitpid()函数等待子进程结束并请除它的僵死进程，<br>2. 由于当子进程成为“defunct”进程时，父进程会收到一个SIGCHLD信号，所以我们可以在父进程中指定信号处理的函数来忽略SIGCHLD信号，或者自定义收回处理逻辑。</p>
<p>下面这些文章详细介绍了对僵尸进程的处理方法</p>
<ul>
<li><a href="http://www.microhowto.info/howto/reap_zombie_processes_using_a_sigchld_handler.html?spm=5176.100239.blogcont5545.15.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.15">http://www.microhowto.info/howto/reap_zombie_processes_using_a_sigchld_handler.html</a></li>
<li><a href="http://lbolla.info/blog/2014/01/23/die-zombie-die?spm=5176.100239.blogcont5545.16.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.16">http://lbolla.info/blog/2014/01/23/die-zombie-die</a></li>

</ul>
<p>如果父进程已经结束了，那些依然在运行中的子进程会成为“孤儿（orphaned）”进程。在Linux中Init进程(PID1)作为所有进程的父进程，会维护进程树的状态，一旦有某个子进程成为了“孤儿”进程后，init就会负责接管这个子进程。当一个子进程成为“僵尸”进程之后，如果其父进程已经结束，init会收割这些“僵尸”，释放PID资源。</p>
<p>然而由于Docker容器的PID1进程是容器启动进程，它们会如何处理那些“孤儿”进程和“僵尸”进程？</p>
<p>下面我们做几个试验来验证不同的PID1进程对僵尸进程不同的处理能力</p>
<p>首先在myredis2容器中启动一个bash进程，并创建子进程“sleep 1000”</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker restart myredis2
myredis2
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec -ti myredis2 bash
root<span class="hljs-variable">@d1df0e4f4e3b<span class="hljs-symbol">:/<span class="hljs-comment"># sleep 1000

</span></span></span></span></span></span></span></span></span></code></pre>
<p>在另一个终端窗口，查看当前进程，我们可以发现一个sleep进程是bash进程的子进程。</p>
<pre><code class="hljs tap" data-language="">docker@default:~$ docker exec myredis2 ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root        <span class="hljs-number"> 1    <span class="hljs-number"> 0 <span class="hljs-number"> 0 12:21 ?        00:00:00 /usr/bin/redis-server *:6379
root        <span class="hljs-number"> 8    <span class="hljs-number"> 0 <span class="hljs-number"> 0 12:21 ?        00:00:00 bash
root       <span class="hljs-number"> 21    <span class="hljs-number"> 8 <span class="hljs-number"> 0 12:21 ?        00:00:00 sleep 1000
root       <span class="hljs-number"> 22    <span class="hljs-number"> 0 <span class="hljs-number"> 3 12:21 ?        00:00:00 ps -ef
</span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们杀死bash进程之后查看进程列表，这时候bash进程已经被杀死。这时候sleep进程(PID为21)，虽然已经结束，而且被PID1进程（redis-server）接管，但是其没有被父进程回收，成为僵尸状态。</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec myredis2 kill -<span class="hljs-number">9 <span class="hljs-number">8
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec myredis2 ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         <span class="hljs-number">1     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">12<span class="hljs-symbol">:09 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 /usr/bin/redis-server *<span class="hljs-symbol">:<span class="hljs-number">6379
root        <span class="hljs-number">21     <span class="hljs-number">1  <span class="hljs-number">0 <span class="hljs-number">12<span class="hljs-symbol">:<span class="hljs-number">10 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 [sleep] &lt;defunct&gt;
root        <span class="hljs-number">32     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">12<span class="hljs-symbol">:<span class="hljs-number">10 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 ps -ef
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ 

</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>这是因为PID1进程“redis-server”没有考虑过作为init对僵尸子进程的回收的场景。</p>
<p>我们来做另一个试验，在用/bin/sh作为PID1进程的myredis容器中，再启动一个bash进程，并创建子进程“sleep 1000”</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker start myredis
myredis
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec -ti myredis bash
root<span class="hljs-variable">@49f7fc37f4b7<span class="hljs-symbol">:/<span class="hljs-comment"># sleep 1000
</span></span></span></span></span></span></span></span></span></code></pre>
<p>查看容器中进程情况，</p>
<pre><code class="hljs tap" data-language="">docker@default:~$ docker exec myredis ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root        <span class="hljs-number"> 1    <span class="hljs-number"> 0 <span class="hljs-number"> 0 01:29 ?        00:00:00 /bin/sh -c "/usr/bin/redis-server"
root        <span class="hljs-number"> 5    <span class="hljs-number"> 1 <span class="hljs-number"> 0 01:29 ?        00:00:00 /usr/bin/redis-server *:6379
root        <span class="hljs-number"> 8    <span class="hljs-number"> 0 <span class="hljs-number"> 0 01:30 ?        00:00:00 bash
root       <span class="hljs-number"> 22    <span class="hljs-number"> 8 <span class="hljs-number"> 0 01:30 ?        00:00:00 sleep 1000
root       <span class="hljs-number"> 36    <span class="hljs-number"> 0 <span class="hljs-number"> 0 01:30 ?        00:00:00 ps -ef
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>我们杀死bash进程之后查看进程列表，发现“bash”和“sleep 1000”进程都已经被杀死和回收</p>
<pre><code class="hljs elixir" data-language="">docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec myredis kill -<span class="hljs-number">9 <span class="hljs-number">8
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ docker exec myredis ps -ef
UID        PID  PPID  C STIME TTY          TIME CMD
root         <span class="hljs-number">1     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">01<span class="hljs-symbol">:<span class="hljs-number">29 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 /bin/sh -c <span class="hljs-string">"/usr/bin/redis-server"
root         <span class="hljs-number">5     <span class="hljs-number">1  <span class="hljs-number">0 <span class="hljs-number">01<span class="hljs-symbol">:<span class="hljs-number">29 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 /usr/bin/redis-server *<span class="hljs-symbol">:<span class="hljs-number">6379
root        <span class="hljs-number">45     <span class="hljs-number">0  <span class="hljs-number">0 <span class="hljs-number">01<span class="hljs-symbol">:<span class="hljs-number">31 ?        <span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00<span class="hljs-symbol">:<span class="hljs-number">00 ps -ef
docker<span class="hljs-variable">@default<span class="hljs-symbol">:~<span class="hljs-variable">$ 
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<p>这是因为sh/bash等应用可以自动清理僵尸进程。</p>
<p>关于僵尸进程在Docker中init处理所需注意细节的详细描述，可以在如下文章得到</p>
<ul>
<li><a href="http://www.oschina.net/translate/docker-and-the-pid-1-zombie-reaping-problem?spm=5176.100239.blogcont5545.17.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.17">http://www.oschina.net/translate/docker-and-the-pid-1-zombie-reaping-problem</a></li>
</ul>
<p>简单而言，如果在容器中运行多个进程，PID1进程需要有能力接管“孤儿”进程并回收“僵尸”进程。我们可以<br>1. 利用自定义的init进程来进行进程管理，比如&nbsp;<a href="http://blog.tutum.co/2014/12/02/docker-and-s6-my-new-favorite-process-supervisor/?spm=5176.100239.blogcont5545.18.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.18">S6</a>&nbsp;，&nbsp;<a href="https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/?spm=5176.100239.blogcont5545.19.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.19">phusion myinit</a>，<a href="https://github.com/Yelp/dumb-init?spm=5176.100239.blogcont5545.20.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.20">dumb-init</a>,&nbsp;<a href="https://github.com/krallin/tini?spm=5176.100239.blogcont5545.21.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.21">tini</a>&nbsp;等<br>2. Bash/sh等缺省提供了进程管理能力，如果需要可以作为PID1进程来实现正确的进程回收。</p>
<h3 id="5">进程监控</h3>
<p>在Docker中，如果<code>docker run</code>命令中指明了<a href="https://docs.docker.com/engine/reference/run/?spm=5176.100239.blogcont5545.22.qOGovX#restart-policies-restart" data-spm-anchor-id="5176.100239.blogcont5545.22">restart policy</a>，Docker Daemon会监控PID1进程，并根据策略自动重启已结束的容器。</p>
<table>
<thead>
<tr><th>restart 策略</th><th>结果</th></tr>

</thead>
<tbody>
<tr>
<td>no</td>
<td>不自动重启，缺省值</td>

</tr>
<tr>
<td>on-failure[:max-retries]</td>
<td>当PID1进程退出值非0时，自动重启容器；可以指定最大重试次数</td>

</tr>
<tr>
<td>always</td>
<td>永远自动重启容器；当Docker Daemon启动时，会自动启动容器</td>

</tr>
<tr>
<td>unless-stopped</td>
<td>永远自动重启容器；当Docker Daemon启动时，如果之前容器不为stoped状态就自动启动容器</td>

</tr>

</tbody>

</table>
<p>注意：为防止频繁重启故障应用导致系统过载，Docker会在每次重启过程中会延迟一段时间。Docker重启进程的延迟时间从100ms开始并每次加倍，如100ms，200ms，400ms等等。</p>
<p>利用Docker内置的restart策略可以大大简化应用进程监控的负担。但是Docker Daemon只是监控PID1进程，如果容器在内包含多个进程，仍然需要开发人员来处理进程监控。</p>
<p>大家一定非常熟悉<a href="http://supervisord.org/?spm=5176.100239.blogcont5545.23.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.23">Supervisor</a>，<a href="https://mmonit.com/monit/?spm=5176.100239.blogcont5545.24.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.24">Monit</a>等进程监控工具，他们可以方便的在容器内部中实现进程监控。Docker提供了相应的<a href="https://docs.docker.com/engine/admin/using_supervisord/?spm=5176.100239.blogcont5545.25.qOGovX" data-spm-anchor-id="5176.100239.blogcont5545.25">文档</a>来介绍，互联网上也有很多资料，我们今天就不再赘述了。</p>
<p>另外利用Supervisor等工具作为PID1进程是在容器中支持多进程管理的主要实现方式；和简单利用shell脚本fork子进程相比，采用Supervisor等工具有很多好处：</p>
<ul>
<li>一些传统的服务不能以PID1进程的方式执行，利用Supervisor可以方便的适配</li>
<li>Supervisor这些监控工具大多提供了对SIGTERM的信号传播支持，可以支持子进程优雅的退出</li>

</ul>
<p>然而值得注意的是：Supervisor这些监控工具大多没有完全提供Init支持的进程管理能力，如果需要支持子进程回收的场景需要配合正确的PID1进程来完成</p>
<h3 id="6">总结</h3>
<p>进程管理在Docker容器中和在完整的操作系统有一些不同之处。在每个容器的PID1进程，需要能够正确的处理SIGTERM信号来支持容器应用的优雅退出，同时要能正确的处理孤儿进程和僵尸进程。</p>
<p>在Dockerfile中要注意shell模式和exec模式的不同。通常而言我们鼓励使用exec模式，这样可以避免由无意中选择错误PID1进程所引入的问题。</p>
<p>在Docker中“一个容器一个进程的方式”并非绝对化的要求，然而在一个容器中实现对于多个进程的管理必须考虑更多的细节，比如子进程管理，进程监控等等。所以对于常见的需求，比如日志收集，性能监控，调试程序，我们依然建议采用多个容器组装的方式来实现。</p>

</div>
<p class="Publishwithline"><span class="MsoPlaceholderText"><span lang="EN-US">[</span></span><span class="MsoPlaceholderText"><span style="font-family: 宋体; mso-ascii-font-family: Calibri; mso-ascii-theme-font: major-latin; mso-fareast-font-family: 宋体; mso-fareast-theme-font: major-fareast; mso-hansi-font-family: Calibri; mso-hansi-theme-font: major-latin;">在此处输入文章标题</span><span lang="EN-US">]</span></span></p>
<div style="mso-element: para-border-div; border: none; border-bottom: solid #4F81BD 1.0pt; mso-border-bottom-themecolor: accent1; padding: 0cm 0cm 2.0pt 0cm;">
<p class="underline"><span lang="EN-US">&nbsp;</span></p>

 </div>
<p class="PadderBetweenControlandBody"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-top: 22.5pt; margin-right: 0cm; margin-bottom: 7.5pt; margin-left: 0cm; line-height: 24.0pt; background: #F9F9F9; word-break: break-all;"><strong><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">摘要：</span></strong><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在进程管理上有一些特殊之处，如果不注意这些细节中的魔鬼就会带来一些隐患。另外</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">鼓励</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">一个容器一个进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(one process
per container)”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的方式。这种方式非常适合以单进程为主的微服务架构的应用。然而由于一些传统的应用是由若干紧耦合的多个进程构成的，这些进程难以</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在进程管理上有一些特殊之处，如果不注意这些细节中的魔鬼就会带来一些隐患。另外</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">鼓励</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">一个容器一个进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(one process
per container)”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的方式。这种方式非常适合以单进程为主的微服务架构的应用。然而由于一些传统的应用是由若干紧耦合的多个进程构成的，这些进程难以拆分到不同的容器中，所以在单个容器内运行多个进程便成了一种折衷方案；此外在一些场景中，用户期望利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器来作为轻量级的虚拟化方案，动态的安装配置应用，这也需要在容器中运行多个进程。而在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中的正确运行多进程应用将给开发者带来更多的挑战。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span lang="EN-US"><a href="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/c86f7ee1dee9169c02c32649d674a511b6095049.jpeg" target="_blank"><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #00a2ca; mso-no-proof: yes; text-decoration: none; text-underline: none;"><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="图片_x0020_1" o:spid="_x0000_i1025" type="#_x0000_t75"
 alt="说明: 14553279344763"
 href="http://img1.tbcdn.cn/L1/461/1/c86f7ee1dee9169c02c32649d674a511b6095049.jpeg"
 target="&quot;_blank&quot;" style='width:204.75pt;height:197.25pt;
 visibility:visible;mso-wrap-style:square' o:button="t">
 <v:imagedata src="file:///C:\Users\ADMINI~1\AppData\Local\Temp\msohtmlclip1\01\clip_image001.jpg"
  o:title="14553279344763"/>
</v:shape><![endif]--><!--[if !vml]--><img src="file:///C:/Users/ADMINI~1/AppData/Local/Temp/msohtmlclip1/01/clip_image001.jpg" alt="说明: 14553279344763" width="273" height="263" border="0"><!--[endif]--></span></a></span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">今天我们会分析</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中进程管理的一些细节，并介绍一些常见问题的解决方法和注意事项。</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">容器的</span><span style="font-size: 18.0pt; font-family: &#39;inherit&#39;,&#39;serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID namespace</span><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">（名空间）</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中，进程管理的基础就是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">内核中的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间技术。在不同</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间中，进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">ID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">是独立的；即在两个不同名空间下的进程可以有相同的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">内核为所有的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间维护了一个树状结构：最顶层的是系统初始化时创建的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">root
namespace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">（根名空间），再创建的新</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID namespace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">就称之为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">child
namespace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">（子名空间），而原先的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间就是新创建的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">parent
namespace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">（父名空间）。通过这种方式，系统中的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间会形成一个层级体系。父节点可以看到子节点中的进程，并可以通过信号等方式对子节点中的进程产生影响。反过来，子节点不能看到父节点名空间中的任何内容，也不可能通过</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">kill</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">或</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">ptrace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">影响父节点或其他名空间中的进程。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中，每个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Container</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">都是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的子进程，每个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Container</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程缺省都具有不同的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间。通过名空间技术，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">实现容器间的进程隔离。另外</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">也会利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间的树状结构，实现了对容器中的进程交互、监控和回收。注：</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">还利用了其他名空间（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">UTS</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">IPC</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">USER</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）等实现了各种系统资源的隔离，由于这些内容和进程管理关联不多，本文不会涉及。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">当创建一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的时候，就会新建一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间。容器启动进程在该名空间内</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。当</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程结束之后，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会销毁对应的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间，并向容器内所有其它的子进程发送</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">下面我们来做一些试验，下面我们会利用官方的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">镜像创建两个容器，并观察里面的进程。</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><br>
</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">如果你在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Windows</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">或</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Mac</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">上利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"docker-machine"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，请利用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker-machine ssh default</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进入</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Boot2docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">虚拟机</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">创建名为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"redis"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的容器，并在容器内部和宿主机中查看容器中的进程信息</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">run</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> -d --name redis redis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">f6bc57cc1b464b05b07b567211cb693ee2a682546ed86c611b5d866f6acc531c</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec redis ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">redis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;
0&nbsp; 0 01:49 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">49</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker top redis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PPID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">999&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9302&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1264&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01:49&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">创建名为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"redis2"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的容器，并在容器内部和宿主机中查看容器中的进程信息</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">run</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> -d --name redis2 redis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">356</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">eca186321ab6ef4c4337aa0c7de2af1e01430587d6b0e1add2e028ed05f60</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec redis2 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">redis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;
0&nbsp; 0 01:50 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">10</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">4</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">50</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker top redis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PPID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">999&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9342&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1264&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;01:50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们可以使用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令进入容器</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间，并执行应用。通过</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">ps -ef</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令，可以看到每个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器都包含一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的进程，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"redis-server"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，它是容器的启动进程，具有特殊意义。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">利用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
top</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令，可以让我们从宿主机操作系统中看到容器的进程信息。在两个容器中的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"redis-server"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">是两个独立的进程，但是他们拥有相同的父进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"> Docker
Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。所以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">可以父子进程的方式在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器之间进行交互。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">另一个值得注意的方面是，</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令可以进入指定的容器内部执行命令。由它启动的进程属于容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">namespace</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和相应的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">cgroup</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。但是这些进程的父进程是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">而非容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们下面会在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中，利用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令启动一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"sleep"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec -d redis sleep 2000</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec redis ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">redis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">02:26 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;11 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">02:26 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 sleep 2000</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;21 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">02:29 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker top redis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PPID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">999&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;9955 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1264 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;02:12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;9984 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1264 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;02:13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;00:00:00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sleep 2000</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们可以清楚的看到</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令创建的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sleep</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程属</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的名空间，但是它的父进程是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">如果我们在宿主机操作系统中手动杀掉容器的启动进程（在上文示例中是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">redis-server</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">），容器会自动结束，而容器名空间中所有进程也会退出。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ PID=$(docker inspect --format=</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"{{.State.Pid}}"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> redis)</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ sudo kill $PID</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker ps -a</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">CONTAINER
ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IMAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PORTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAMES</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">356</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">eca186321&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/entrypoint.sh redis"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">23</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> minutes ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Up </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">4</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> minutes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">f6bc57cc1b46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/entrypoint.sh redis"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">23</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> minutes ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Exited (</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">) </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">4</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> seconds ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; redis</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">通过以上示例：</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">每个容器有独立的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间，</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的生命周期和其</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程一致</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">利用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">可以进入到容器的名空间中启动进程</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">此外，自从</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker 1.5</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">之后，</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
run</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令引入了</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">--pid=host</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">参数来支持使用宿主机</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间来启动容器进程，这样可以方便的实现容器内应用和宿主机应用之间的交互：比如利用容器中的工具监控和调试宿主机进程。</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">如何指明容器</span><span style="font-size: 18.0pt; font-family: &#39;inherit&#39;,&#39;serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">进程</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中的初始化进程（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程）在容器进程管理上具有特殊意义。它可以被</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Dockerfile</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中的</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">ENTRYPOINT</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">或</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">CMD</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令所指明；也可以被</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker run</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令的启动参数所覆盖。了解这些细节可以帮助我们更好地了解</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的进程的行为。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">关于</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">ENTRYPOINT</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">CMD</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令的不同，我们可以参见官方的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Dockerfile</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">说明和最佳实践</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://docs.docker.com/engine/reference/builder/?spm=5176.100239.blogcont5545.13.qOGovX#entrypoint"><span style="color: #00a2ca;">https://docs.docker.com/engine/reference/builder/#entrypoint</span></a></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://docs.docker.com/engine/reference/builder/?spm=5176.100239.blogcont5545.14.qOGovX#cmd"><span style="color: #00a2ca;">https://docs.docker.com/engine/reference/builder/#cmd</span></a></span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">值得注意的一点是：在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">ENTRYPOINT</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">CMD</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令中，提供两种不同的进程执行方式</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>shell</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>exec</strong></span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>shell</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式中，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">CMD/ENTRYPOINT</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令以如下方式定义</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> executable param1 param2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">这种方式中的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是以</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">/bin/sh
-c ”executable param1 param2”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式启动的</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">而在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>exec</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式中，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">CMD/ENTRYPOINT</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令以如下方式定义</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> [</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"executable"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">,</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"param1"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">,</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"param2"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">]</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">注意这里的可执行命令和参数是利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">JSON</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">字符串数组的格式定义的，这样</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程会以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">executable param1 param2</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式启动的。另外，在</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker run</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令中指明的命令行参数也是以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>exec</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式启动的。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">为了解释两种不同运行方式的区别，我们利用不同的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Dockerfile</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">分别创建两个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">镜像</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"Dockerfile_shell"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">文件内容如下，会利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">shell</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式启动</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">服务</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">FROM
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">ubuntu:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">14.04</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">RUN
apt-get update &amp;&amp; apt-get -y install redis-server &amp;&amp; rm -rf
/var/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #66d9ef; background: #23241F;" lang="EN-US">lib</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/apt/</span><em><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #a6e22e; background: #23241F;" lang="EN-US">lists</span></em><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/*</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">EXPOSE
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">CMD
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/usr/bin/redis-server"</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"Dockerfile_exec"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">文件内容如下，会利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式启动</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">redis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">服务</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">FROM
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">ubuntu:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">14.04</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">RUN
apt-get update &amp;&amp; apt-get -y install redis-server &amp;&amp; rm -rf
/var/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #66d9ef; background: #23241F;" lang="EN-US">lib</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/apt/</span><em><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #a6e22e; background: #23241F;" lang="EN-US">lists</span></em><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/*</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">EXPOSE
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">CMD
[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/usr/bin/redis-server"</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">]</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">然后基于它们构建两个镜像</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"myredis:shell"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"myredis:exec"</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker
build -t myredis:shell -f Dockerfile_shell .</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker
build -t myredis:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> -f Dockerfile_exec .</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">运行</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"myredis:shell"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">镜像，我们可以发现它的启动进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(PID1)</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">是</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">/bin/sh -c
"/usr/bin/redis-server"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，并且它创建了一个子进程</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">/usr/bin/redis-server *:6379</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker run -d --name myredis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">myredis:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">shell</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">49</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">f7fc37f4b7cf1ed7f5296537a93b2ad23b1b6686a05e5c7e40e9a2b2d3665e</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec myredis ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">/bin/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">sh
-c </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/usr/bin/redis-server"</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">/usr/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">bin/redis-server
*:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">8</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">下面运行</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">"myredis:exec"</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">镜像，我们可以发现它的启动进程是</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">/usr/bin/redis-server *:6379</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，并没有其他子进程存在。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">run</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> -d --name myredis2 myredis:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">exec</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">d1df0e4f4e3bbe36fca94f08df9ad3306fa1dee86415c853ddc5593fb9fa5673</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec myredis2 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;
0&nbsp; 0 08:13 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 /usr/bin/redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">8</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">13</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">由此我们可以清楚的看到，以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">shell</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">方式执行命令可能会导致容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程不同。然而这又有什么问题呢？</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">原因在于：</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程对于操作系统而言具有特殊意义。操作系统的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，以守护进程方式运行，是所有其他进程的祖先，具有完整的进程生命周期管理能力。在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是启动进程，它也会负责容器内部进程管理的工作。而这也将导致进程管理在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器内部和完整操作系统上的不同。</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">进程信号处理</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Unix/Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中进程间异步通信机制。</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">提供了两个命令</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
kill</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">来向容器中的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程发送信号。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">当执行</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令时，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会首先向容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程发送一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号，用于容器内程序的退出。如果容器在收到</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">后没有结束，</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">那么</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会在等待一段时间（默认是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">10s</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）后，再向容器发送</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号，将容器杀死变为退出状态。这种方式给</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">应用提供了一个优雅的退出</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(graceful
stop)</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">机制，允许应用在收到</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令时清理和释放使用中的资源。而</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker kill</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">可以向容器内</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程发送任何信号，缺省是发送</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号来强制退出应用。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">注：从</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker 1.9</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">开始，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">支持停止容器时向其发送自定义信号，开发者可以在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Dockerfile</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">使用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">STOPSIGNAL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">指令，或</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker run</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令中使用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">--stop-signal</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">参数中指明。缺省是</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">SIGTERM</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们来看看不同的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，对进程信号处理的不同之处。首先，我们使用</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令停止由</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>exec</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">模式启动的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“myredis2”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器，并检查其日志</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> myredis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">myredis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:~$ docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">logs</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> myredis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">13</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01.631</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">Warning</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">: </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">no</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> config </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">file</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> specified, </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">using</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> the </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> config. </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">In</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">order</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
specify a config </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">file</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">use</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
/usr/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">bin</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/redis-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> /</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">path</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/redis.conf</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">__ </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`.&nbsp;
`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">_.&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Redis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">2.8.4</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> (</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00000000</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">) </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">64</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">bit</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; .-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">```.&nbsp; ```</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">\/&nbsp;&nbsp;&nbsp; _.,_ </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;(&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .-`&nbsp; | `,&nbsp;&nbsp;&nbsp;
)&nbsp;&nbsp; &nbsp;&nbsp;Running in stand alone mode</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|`-._`-...-` __...-.``-._|'` _.-'|&nbsp;&nbsp;&nbsp;&nbsp; Port: 6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`._&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;
_.-'&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; PID: 1</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;
`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-./&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp; _.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;|</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'&nbsp;&nbsp;&nbsp;
_.-'_.-'|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-'_.-'&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://redis.io&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-.__.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|`-._`-._&nbsp;&nbsp;&nbsp;
`-.__.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'_.-'&nbsp;&nbsp;&nbsp; _.-'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'&nbsp;&nbsp;&nbsp;
_.-'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;`-.__.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">13</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01.632</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">Server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> started, Redis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">version</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">2.8.4</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">13</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01.633</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">WARNING</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> overcommit_memory </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">is</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">set</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">!
Background </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">save</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> may fail </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">under</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">low</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">memory</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> condition. </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">To</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> fix this issue </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">add</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'vm.overcommit_memory
= 1'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> /etc/sysctl.conf </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">and</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">then</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> reboot </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">or</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> run the command </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'sysctl vm.overcommit_memory=1'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">for</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
this </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> take effect.</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">13</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01.633</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
* The </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">is</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">now</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> ready </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">accept</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> connections </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">on</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> port </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> | signal </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">handler</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] (</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1455179074</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">) Received SIGTERM, scheduling shutdown...</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">24</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">34.259</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">User</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> requested shutdown...</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">24</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">34.259</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
* Saving the </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">final</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> RDB </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">snapshot</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">before</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
exiting.</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">24</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">34.262</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
* DB saved </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">on</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> disk</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">24</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">34.262</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# Redis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">is</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">now</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ready </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">exit</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">,
bye bye...</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:~$ </span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们发现对</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“myredis2”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令几乎立刻生效；而且在容器日志中，我们看到了</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“Received
SIGTERM, scheduling shutdown...”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的内容，说明</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“redis-server”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程接收到了</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">消息，并优雅地退出。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们再对利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<strong>shell</strong>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">模式启动的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“myredis”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器发出停止操作，并检查其日志</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:~$ docker </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">logs</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">40.108</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">Warning</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">: </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">no</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> config </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">file</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> specified, </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">using</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> the </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> config. </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">In</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">order</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
specify a config </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">file</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">use</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
/usr/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">bin</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/redis-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> /</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">path</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/redis.conf</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">__ </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`.&nbsp;
`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">_.&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Redis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">2.8.4</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> (</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00000000</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">) </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">64</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">bit</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; .-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">``</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">```.&nbsp; ```</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">\/&nbsp;&nbsp;&nbsp; _.,_ </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">''</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;(&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .-`&nbsp;
| `,&nbsp;&nbsp;&nbsp; )&nbsp;&nbsp;&nbsp;&nbsp; Running in stand alone mode</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|`-._`-...-` __...-.``-._|'` _.-'|&nbsp;&nbsp;&nbsp;&nbsp; Port: 6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;
</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`._&nbsp;&nbsp;&nbsp; /&nbsp;&nbsp;&nbsp;&nbsp;
_.-'&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp; PID: 5</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;
`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-./&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp; _.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;|</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'&nbsp;&nbsp;&nbsp; _.-'_.-'|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-'_.-'&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://redis.io&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-.__.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;|`-._`-._&nbsp;&nbsp;&nbsp;
`-.__.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp; _.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;|&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._`</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'_.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-._&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'_.-'&nbsp;&nbsp;&nbsp; _.-'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">`-.__.-'&nbsp;&nbsp;&nbsp;
_.-'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">-._&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_.-</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `-.__.-'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">40.109</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">Server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> started, Redis </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">version</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">2.8.4</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">40.109</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
# </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">WARNING</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> overcommit_memory </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">is</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">set</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">!
Background </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">save</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> may fail </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">under</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">low</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">memory</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> condition. </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">To</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> fix this issue </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">add</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'vm.overcommit_memory
= 1'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> /etc/sysctl.conf </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">and</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">then</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> reboot </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">or</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> run the command </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">'sysctl vm.overcommit_memory=1'</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">for</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
this </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> take effect.</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">[</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">] </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">11</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> Feb </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">40.109</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
* The </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">server</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">is</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">now</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> ready </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">to</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">accept</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> connections </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">on</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> port </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">:~$</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们发现对</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”myredis”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令暂停了一会儿才结束，而且在日志中我们没有看到任何收到</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号的内容。原因其</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sh</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">没有对</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号的处理逻辑，所以它忽略了所接收到的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号。当</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等待</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">stop</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令执行</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">10</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">秒钟超时之后，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">发送</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">强制杀死</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sh</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，并销毁了它的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间，其子进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">redis-server</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">也在收到</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号后被强制终止。如果此时应用还有正在执行的事务或未持久化的数据，强制进程退出可能导致数据丢失或状态不一致。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">通过这个示例我们可以清楚的理解</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程在信号管理的重要作用。所以，</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程需要能够正确的处理</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号来支持优雅退出。</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">如果容器中包含多个进程，需要</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程能够正确的传播</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号来结束所有的子进程之后再退出。</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">确保</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是期望的进程。缺省</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sh/bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程没有提供</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的处理，需要通过</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">shell</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">脚本来设置正确的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，或捕获</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">另外需要注意的是：由于</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程的特殊性，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">内核为他做了特殊处理。如果它没有提供某个信号的处理逻辑，那么与其在同一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">名空间下的进程发送给它的该信号都会被屏蔽。这个功能的主要作用是防止</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程被误杀。我们可以验证在容器内部发出的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGKILL</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号无法杀死</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker start myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec myredis kill -</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">9</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker top myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PPID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">3586</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1290</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">45</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /bin/sh -c </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/usr/bin/redis-server"</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">3591</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">3586</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 08</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">45</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/bin/redis-server *</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">孤儿进程与僵尸进程管理</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">熟悉</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Unix/Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程管理的同学对多进程应用并不陌生。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">当一个子进程终止后，它首先会变成一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">失效</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(defunct)”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的进程，也称为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">zombie</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，等待父进程或系统收回（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">reap</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）。在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">内核中维护了关于</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程的一组信息（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，终止状态，资源使用信息），从而允许父进程能够获取有关子进程的信息。如果不能正确回收</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，那么他们的进程描述符仍然保存在系统中，系统资源会缓慢泄露。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">大多数设计良好的多进程应用可以正确的收回僵尸子进程，比如</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">NGINX master</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程可以收回已终止的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">worker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">子进程。如果需要自己实现，则可利用如下方法：</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><br>
1. </span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">利用操作系统的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">waitpid()</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">函数等待子进程结束并请除它的僵死进程，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><br>
2. </span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">由于当子进程成为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“defunct”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程时，父进程会收到一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGCHLD</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号，所以我们可以在父进程中指定信号处理的函数来忽略</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGCHLD</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号，或者自定义收回处理逻辑。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">下面这些文章详细介绍了对僵尸进程的处理方法</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="http://www.microhowto.info/howto/reap_zombie_processes_using_a_sigchld_handler.html?spm=5176.100239.blogcont5545.15.qOGovX"><span style="color: #00a2ca;">http://www.microhowto.info/howto/reap_zombie_processes_using_a_sigchld_handler.html</span></a></span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="http://lbolla.info/blog/2014/01/23/die-zombie-die?spm=5176.100239.blogcont5545.16.qOGovX"><span style="color: #00a2ca;">http://lbolla.info/blog/2014/01/23/die-zombie-die</span></a></span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">如果父进程已经结束了，那些依然在运行中的子进程会成为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">孤儿（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">orphaned</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程。在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Linux</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(PID1)</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">作为所有进程的父进程，会维护进程树的状态，一旦有某个子进程成为了</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">孤儿</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程后，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">就会负责接管这个子进程。当一个子进程成为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程之后，如果其父进程已经结束，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会收割这些</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，释放</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">资源。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">然而由于</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是容器启动进程，它们会如何处理那些</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">孤儿</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程？</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">下面我们做几个试验来验证不同的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程对僵尸进程不同的处理能力</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">首先在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">myredis2</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中启动一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，并创建子进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“sleep 1000”</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker restart myredis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">myredis2</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec -ti myredis2 bash</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root@d1df0e4f4e3b</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #75715e; background: #23241F;" lang="EN-US"># sleep 1000</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在另一个终端窗口，查看当前进程，我们可以发现一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sleep</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程的子进程。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec myredis2 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">12:21 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 /usr/bin/redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;8 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">12:21 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 bash</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;21 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;8&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">12:21 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
00:00:00 sleep 1000</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;22 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 3 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">12:21 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们杀死</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程之后查看进程列表，这时候</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程已经被杀死。这时候</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sleep</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">(PID</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">21)</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，虽然已经结束，而且被</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程（</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">redis-server</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">）接管，但是其没有被父进程回收，成为僵尸状态。</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec myredis2 kill -</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">9</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">8</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec myredis2 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">09 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> /usr/bin/redis-server *</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">21</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">10</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
[sleep] &lt;defunct&gt;</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">32</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US"> &nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">12</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">10</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ </span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">这是因为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“redis-server”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">没有考虑过作为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">对僵尸子进程的回收的场景。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们来做另一个试验，在用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">/bin/sh</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">作为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">myredis</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中，再启动一个</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，并创建子进程</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“sleep 1000”</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker start myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">myredis</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec -ti myredis bash</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root@49f7fc37f4b7</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:/</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #75715e; background: #23241F;" lang="EN-US"># sleep 1000</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">查看容器中进程情况，</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default:~$
docker exec myredis ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">01:29 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 /bin/sh -c
"/usr/bin/redis-server"</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;5 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;1&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">01:29 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 /usr/bin/redis-server *:6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;8 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">01:30 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 bash</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;22 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;8&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">01:30 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 sleep 1000</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;36 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">&nbsp;0&nbsp; 0 </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">01:30 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:00:00 ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">我们杀死</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程之后查看进程列表，发现</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“bash”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“sleep 1000”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程都已经被杀死和回收</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec myredis kill -</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">9</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">8</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ docker exec myredis ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">UID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PID&nbsp;
PPID&nbsp; C STIME TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME CMD</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">29</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
/bin/sh -c </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #e6db74; background: #23241F;" lang="EN-US">"/usr/bin/redis-server"</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">5</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">1</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">29</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
/usr/bin/redis-server *</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">6379</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">root&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">45</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">0</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">01</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">31</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #ae81ff; background: #23241F;" lang="EN-US">00</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">
ps -ef</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">docker@default</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f92672; background: #23241F;" lang="EN-US">:~</span><span style="font-size: 12.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #f8f8f2; background: #23241F;" lang="EN-US">$ </span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">这是因为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">sh/bash</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等应用可以自动清理僵尸进程。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">关于僵尸进程在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">处理所需注意细节的详细描述，可以在如下文章得到</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="http://www.oschina.net/translate/docker-and-the-pid-1-zombie-reaping-problem?spm=5176.100239.blogcont5545.17.qOGovX"><span style="color: #00a2ca;">http://www.oschina.net/translate/docker-and-the-pid-1-zombie-reaping-problem</span></a></span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">简单而言，如果在容器中运行多个进程，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程需要有能力接管</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">孤儿</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程并回收</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">僵尸</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程。我们可以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><br>
1. </span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">利用自定义的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程来进行进程管理，比如</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<a href="http://blog.tutum.co/2014/12/02/docker-and-s6-my-new-favorite-process-supervisor/?spm=5176.100239.blogcont5545.18.qOGovX"><span style="color: #00a2ca;">S6</span></a>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">&nbsp;<a href="https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/?spm=5176.100239.blogcont5545.19.qOGovX"><span style="color: #00a2ca;">phusion myinit</span></a></span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://github.com/Yelp/dumb-init?spm=5176.100239.blogcont5545.20.qOGovX"><span style="color: #00a2ca;">dumb-init</span></a>,&nbsp;<a href="https://github.com/krallin/tini?spm=5176.100239.blogcont5545.21.qOGovX"><span style="color: #00a2ca;">tini</span></a>&nbsp;</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><br>
2. Bash/sh</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等缺省提供了进程管理能力，如果需要可以作为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程来实现正确的进程回收。</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">进程监控</span></p>
<p class="MsoNormal" style="margin-bottom: 0.0001pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中，如果</span><span style="mso-bidi-font-size: 11.0pt; font-family: Consolas; mso-fareast-font-family: 宋体; color: #c7254e; background: #F9F2F4;" lang="EN-US">docker
run</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">命令中指明了</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://docs.docker.com/engine/reference/run/?spm=5176.100239.blogcont5545.22.qOGovX#restart-policies-restart"><span style="color: #00a2ca;">restart policy</span></a></span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会监控</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，并根据策略自动重启已结束的容器。</span></p>
<table class="MsoNormalTable" style="width: 0px;" border="0" cellspacing="0" cellpadding="0">
<thead>
<tr>
<td style="border-width: 1pt; border-color: #dddddd; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><strong><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;" lang="EN-US">restart
   </span></strong><strong><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">策略</span></strong></p>

   </td>
<td style="border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; border-top-color: #dddddd; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-style: none; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><strong><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">结果</span></strong></p>

   </td>

  </tr>

 </thead>
<tbody>
<tr>
<td style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-color: #dddddd; border-top-style: none; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;" lang="EN-US">no</span></p>

  </td>
<td style="border-top-style: none; border-left-style: none; border-bottom-width: 1pt; border-bottom-color: #dddddd; border-right-width: 1pt; border-right-color: #dddddd; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">不自动重启，缺省值</span></p>

  </td>

 </tr>
<tr>
<td style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-color: #dddddd; border-top-style: none; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;" lang="EN-US">on-failure[:max-retries]</span></p>

  </td>
<td style="border-top-style: none; border-left-style: none; border-bottom-width: 1pt; border-bottom-color: #dddddd; border-right-width: 1pt; border-right-color: #dddddd; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">当<span lang="EN-US">PID1</span>进程退出值非<span lang="EN-US">0</span>时，自动重启容器；可以指定最大重试次数</span></p>

  </td>

 </tr>
<tr>
<td style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-color: #dddddd; border-top-style: none; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;" lang="EN-US">always</span></p>

  </td>
<td style="border-top-style: none; border-left-style: none; border-bottom-width: 1pt; border-bottom-color: #dddddd; border-right-width: 1pt; border-right-color: #dddddd; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">永远自动重启容器；当<span lang="EN-US">Docker Daemon</span>启动时，会自动启动容器</span></p>

  </td>

 </tr>
<tr>
<td style="border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; border-right-color: #dddddd; border-bottom-color: #dddddd; border-left-color: #dddddd; border-top-style: none; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;" lang="EN-US">unless-stopped</span></p>

  </td>
<td style="border-top-style: none; border-left-style: none; border-bottom-width: 1pt; border-bottom-color: #dddddd; border-right-width: 1pt; border-right-color: #dddddd; padding: 4.5pt 9pt;" valign="top">
<p class="MsoNormal" style="margin-bottom: .0001pt;"><span style="font-size: 12.0pt; font-family: 宋体; mso-bidi-font-family: 宋体;">永远自动重启容器；当<span lang="EN-US">Docker Daemon</span>启动时，如果之前容器不为<span lang="EN-US">stoped</span>状态就自动启动容器</span></p>

  </td>

 </tr>

</tbody>
</table>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">注意：为防止频繁重启故障应用导致系统过载，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">会在每次重启过程中会延迟一段时间。</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">重启进程的延迟时间从</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">100ms</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">开始并每次加倍，如</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">100ms</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">200ms</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">400ms</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等等。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">内置的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">restart</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">策略可以大大简化应用进程监控的负担。但是</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker Daemon</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">只是监控</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，如果容器在内包含多个进程，仍然需要开发人员来处理进程监控。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">大家一定非常熟悉</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="http://supervisord.org/?spm=5176.100239.blogcont5545.23.qOGovX"><span style="color: #00a2ca;">Supervisor</span></a></span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">，</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://mmonit.com/monit/?spm=5176.100239.blogcont5545.24.qOGovX"><span style="color: #00a2ca;">Monit</span></a></span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等进程监控工具，他们可以方便的在容器内部中实现进程监控。</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">提供了相应的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US"><a href="https://docs.docker.com/engine/admin/using_supervisord/?spm=5176.100239.blogcont5545.25.qOGovX"><span style="font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; color: #00a2ca;" lang="EN-US">文档</span></a></span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">来介绍，互联网上也有很多资料，我们今天就不再赘述了。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">另外利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Supervisor</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等工具作为</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程是在容器中支持多进程管理的主要实现方式；和简单利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">shell</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">脚本</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">fork</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">子进程相比，采用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Supervisor</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">等工具有很多好处：</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">一些传统的服务不能以</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程的方式执行，利用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Supervisor</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">可以方便的适配</span></p>
<p class="MsoNormal" style="margin: 0cm 0cm 0.0001pt; text-indent: -18pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><!--[if !supportLists]--><span style="font-size: 10.0pt; mso-bidi-font-size: 12.0pt; font-family: Symbol; mso-fareast-font-family: Symbol; mso-bidi-font-family: Symbol; color: #333333;" lang="EN-US">·<span style="font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &#39;Times New Roman&#39;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Supervisor</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">这些监控工具大多提供了对</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">的信号传播支持，可以支持子进程优雅的退出</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">然而值得注意的是：</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Supervisor</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">这些监控工具大多没有完全提供</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Init</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">支持的进程管理能力，如果需要支持子进程回收的场景需要配合正确的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程来完成</span></p>
<p class="MsoNormal" style="margin: 15pt 0cm 7.5pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 18.0pt; font-family: 宋体; mso-ascii-font-family: inherit; mso-hansi-font-family: inherit; mso-bidi-font-family: 宋体; color: #333333;">总结</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程管理在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">容器中和在完整的操作系统有一些不同之处。在每个容器的</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程，需要能够正确的处理</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">SIGTERM</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">信号来支持容器应用的优雅退出，同时要能正确的处理孤儿进程和僵尸进程。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Dockerfile</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中要注意</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">shell</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">模式和</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">模式的不同。通常而言我们鼓励使用</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">exec</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">模式，这样可以避免由无意中选择错误</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">PID1</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">进程所引入的问题。</span></p>
<p class="MsoNormal" style="margin-bottom: 7.5pt; line-height: 24pt; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">在</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">Docker</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">中</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">“</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">一个容器一个进程的方式</span><span style="font-size: 12.0pt; font-family: &#39;Helvetica&#39;,&#39;sans-serif&#39;; mso-fareast-font-family: 宋体; mso-bidi-font-family: 宋体; color: #333333;" lang="EN-US">”</span><span style="font-size: 12.0pt; font-family: 宋体; mso-ascii-font-family: Helvetica; mso-hansi-font-family: Helvetica; mso-bidi-font-family: 宋体; color: #333333;">并非绝对化的要求，然而在一个容器中实现对于多个进程的管理必须考虑更多的细节，比如子进程管理，进程监控等等。所以对于常见的需求，比如日志收集，性能监控，调试程序，我们依然建议采用多个容器组装的方式来实现。</span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory">分类: <a href="https://www.cnblogs.com/ilinuxer/category/791025.html" target="_blank">Docker</a></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(6188303,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;d8ee5477-10dc-e411-b908-9dcfd8948a71&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/ilinuxer/" target="_blank"><img src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/sample_face.gif" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/ilinuxer/">ilinux_one</a><br>
            <a href="http://home.cnblogs.com/u/ilinuxer/followees">关注 - 205</a><br>
            <a href="http://home.cnblogs.com/u/ilinuxer/followers">粉丝 - 89</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;d8ee5477-10dc-e411-b908-9dcfd8948a71&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(6188303,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">1</span>
    </div>
    <div class="buryit" onclick="votePost(6188303,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/ilinuxer/p/6181698.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/ilinuxer/p/6181698.html" title="发布于2016-12-15 00:19">Docker命令详解</a><br><a href="https://www.cnblogs.com/ilinuxer/p/6188450.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/ilinuxer/p/6188450.html" title="发布于2016-12-16 21:21">Docker之Linux Namespace</a><br></div>
</div>

</div>
		<p class="postfoot">
			posted on <span id="post-date">2016-12-16 20:30</span> <a href="https://www.cnblogs.com/ilinuxer/">ilinux_one</a> 阅读(<span id="post_view_count">15443</span>) 评论(<span id="post_comment_count">0</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=6188303" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/ilinuxer/p/6188303.html#" onclick="AddToWz(6188303);return false;">收藏</a>
		</p>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=225906,cb_entryId=6188303,cb_blogApp=currentBlogApp,cb_blogUserGuid='d8ee5477-10dc-e411-b908-9dcfd8948a71',cb_entryCreatedDate='2016/12/16 20:30:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>
	
	</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="http://www.cnblogs.com/ilinuxer/p/6188303.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/ilinuxer/p/6188303.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://www.bagevent.com/event/2195041?bag_track=13072958" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-看雪&#39;)">【活动】看雪2019安全开发者峰会，共话安全领域焦点</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/gpt.js.download"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CIP1vYavpeICFcWxlgodcDgOVg"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="1" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_news" style="display: none;"></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CIT1vYavpeICFcWxlgodcDgOVg"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" data-google-container-id="2" style="border: 0px; vertical-align: bottom;" data-load-complete="true" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/saved_resource(1).html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/625501/" target="_blank">谷歌内战史</a><br> ·  <a href="https://news.cnblogs.com/n/625500/" target="_blank">华为致信全球客户：保证绝大部分产品仍能继续服务</a><br> ·  <a href="https://news.cnblogs.com/n/625499/" target="_blank">谷歌无人机快递Wing进军芬兰：将送餐馆外卖</a><br> ·  <a href="https://news.cnblogs.com/n/625498/" target="_blank">意识永存：脑机结合让大脑复活</a><br> ·  <a href="https://news.cnblogs.com/n/625497/" target="_blank">7nm Zen2三代锐龙很好很强！但最担心的事情还是发生了</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"><b>历史上的今天:</b><br>2015-12-16 <a href="https://www.cnblogs.com/ilinuxer/p/5052391.html">hadoop datanode启动失败</a><br></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
</div>
<div id="rightmenu">
	
		
<h3>导航</h3>
<ul>
<li><a id="blog_nav_sitehome" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" href="https://www.cnblogs.com/ilinuxer/">首页</a></li>
<li><a id="blog_nav_newpost" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" accesskey="9" rel="nofollow" href="https://msg.cnblogs.com/send/ilinux_one">联系</a></li>
<li><a id="blog_nav_rss" href="https://www.cnblogs.com/ilinuxer/rss">订阅</a><a id="blog_nav_rss_image" href="https://www.cnblogs.com/ilinuxer/rss"><img src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/xml.gif" alt="订阅"></a></li>
<li><a id="blog_nav_admin" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		
<h3>公告</h3>
<div class="newsItem">
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/ilinuxer/">ilinux_one</a><br>园龄：<a href="https://home.cnblogs.com/u/ilinuxer/" title="入园时间：2015-04-06">4年1个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/ilinuxer/followers/">89</a><br>关注：<a href="https://home.cnblogs.com/u/ilinuxer/followees/">205</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;d8ee5477-10dc-e411-b908-9dcfd8948a71&#39;)">+加关注</a></div><script>getFollowStatus('d8ee5477-10dc-e411-b908-9dcfd8948a71')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>					
		<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/04/01&#39;);return false;">&lt;</a></td><td align="center">2019年5月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/06/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td class="CalWeekendDay" align="center">4</td></tr><tr><td class="CalWeekendDay" align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td class="CalWeekendDay" align="center">11</td></tr><tr><td class="CalWeekendDay" align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td class="CalTodayDay" align="center">18</td></tr><tr><td class="CalWeekendDay" align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td class="CalWeekendDay" align="center">25</td></tr><tr><td class="CalWeekendDay" align="center">26</td><td align="center">27</td><td align="center">28</td><td align="center">29</td><td align="center">30</td><td align="center">31</td><td class="CalOtherMonthDay" align="center">1</td></tr><tr><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
		<div id="blog_stats">
<h3>统计</h3>
<ul>
	<li>随笔 - 321</li>
	<li>文章 - 1</li>
	<li>评论 - 17</li>
	<li>引用 - 0</li>
 </ul></div>
		<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
		
<div id="footer">
	Powered by: 
	<br>
	<a id="Footer1_Hyperlink3" href="https://www.cnblogs.com/" style="font-family:Verdana;font-size:12px;">博客园</a>
	<br>
	Copyright © ilinux_one
</div>
	
</div>			
			
	




<iframe id="google_osd_static_frame_4116044066565" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./理解Docker容器的进程管理 - ilinux_one - 博客园_files/saved_resource(2).html"></iframe></body></html>