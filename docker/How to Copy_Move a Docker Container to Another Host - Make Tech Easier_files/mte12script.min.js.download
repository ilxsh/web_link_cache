function postAjax(e,t,n){var s="string"==typeof t?t:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return a.open("POST",e),a.onreadystatechange=function(){a.readyState>3&&200==a.status&&n(a.responseText)},a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(s),a}function getAjax(e,t){var n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return n.open("GET",e),n.onreadystatechange=function(){n.readyState>3&&200==n.status&&t(n.responseText)},n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(),n}function validate_email(e){return new RegExp(/^([\w\.\-]+)@([\w\-]+)((\.(\w){2,10})+)$/i).test(e)}function serialize(e){var t=[];for(let n=0;n<e.elements.length;n++){let s=e.elements[n];s.name&&!s.disabled&&"file"!==s.type&&"reset"!==s.type&&"submit"!==s.type&&"button"!==s.type&&(("checkbox"!==s.type&&"radio"!==s.type||s.checked)&&t.push(encodeURIComponent(s.name)+"="+encodeURIComponent(s.value)))}return t.join("&")}/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1),function(){"use strict";if("querySelector"in document&&"addEventListener"in window){var e=document.getElementById("backtop"),t=function(e,t){var n,s=window.pageYOffset,a=document.body.offsetTop,i=(a-s)/(t/16);n=function(){window.pageYOffset<=(a||0)&&clearInterval(r)};var r=setInterval(function(){window.scrollBy(0,i),n()},16)};e&&(window.addEventListener("scroll",function(){var t=window.pageYOffset;t>150&&(e.classList.contains("shown")||e.classList.add("shown")),t<150&&e.classList.contains("shown")&&e.classList.remove("shown")}),e.addEventListener("click",function(e){e.preventDefault(),t(document.body,400)},!1),e.addEventListener("touchstart",function(e){e.preventDefault(),t(document.body,400)},!1))}}(),function(){"use strict";var e=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;let n=document.getElementById("comment-section");n.classList.contains("hidden")?n.classList.remove("hidden"):n.classList.add("hidden");let s=parseInt(t.getAttribute("data-comment-count")),a=document.getElementById("comment-area");if(!mte.comment_loaded&&s>0){getAjax(mte.ajaxurl+"?action=mte_load_comments&id="+mte.id,function(e){a&&n.removeChild(a);let t=document.createElement("div");t.innerHTML=e,n.prepend(t),mte.comment_loaded=!0})}};let t=document.getElementById("load-comment");t&&(t.addEventListener("click",e,!0),t.addEventListener("touchstart",e,!0));let n=document.getElementById("betterwpc-submit");n&&n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();let t=document.getElementById("betterwpc-status");t.innerHTML='<div class="alert alert-info" role="alert">Validating comments...</div>';let n=document.getElementById("comment");if(""===n.value)return void(t.innerHTML='<div class="alert alert-error" role="alert"><strong>ERROR</strong>: You cannot post an empty comment.</div>');if(!mte.logged_in){let e=document.getElementById("author").value,n=document.getElementById("email").value;if(0===e.length)return void(t.innerHTML='<div class="alert alert-error" role="alert"><strong>ERROR</strong>: Your name field cannot be blank.</div>');if(0===n.length)return void(t.innerHTML='<div class="alert alert-error" role="alert"><strong>ERROR</strong>: Your email field cannot be blank.</div>');if(!validate_email(n))return void(t.innerHTML='<div class="alert alert-error" role="alert"><strong>ERROR</strong>: You need to enter a valid email.</div>')}if(document.querySelector('input[name="betterwpc_entry"]').checked)return void(t.innerHTML='<div class="alert alert-error" role="alert"><strong>ERROR</strong>: You didn\'t pass the spam test.</div>');t.innerHTML='<div class="alert alert-info" role="alert">Submitting comment...</div>';let s=serialize(document.getElementById("betterwpc-commentform"));s+="&legit=1",postAjax(mte.ajaxurl,s,function(e){let s=JSON.parse(e);if(s.error)t.innerHTML='<div class="alert alert-error" role="alert">'+s.error.message+"</div>";else if(s.success){n.value="",t.innerHTML='<div class="alert alert-success" role="alert">'+s.success.message+"</div>";let e=document.getElementById("comment_parent").value;if(e>0){let t=document.getElementById("comment-"+e),n=document.querySelector("#comment-"+e+" .children");n?n.lastChild.innerHTML+=s.success.data:t.innerHTML+=s.success.data}else{let e=document.getElementsByClassName("comment-list");if(e.length>0)e[0].innerHTML+=s.success.data;else{let e='<h2 class="comments-title">One Comment</h2><ol class="comment-list">'+s.success.data+"</ol>";n.innerHTML=e+n.innerHTML}}setTimeout(function(){t.innerHTML=""},5e3),document.getElementById("cancel-comment-reply-link").click()}})})}(),function(){"use strict";if("querySelector"in document&&"addEventListener"in window){var e=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;var n=t.closest(".dropdown");n.classList.contains("open")?(n.classList.remove("open"),t.setAttribute("aria-expanded","false")):(a(),n.classList.add("open"),t.setAttribute("aria-expanded","true"))},t=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;var n=document.getElementById("primary-menu");n.classList.contains("open")?(n.classList.remove("open"),t.setAttribute("aria-expanded","false")):(n.classList.add("open"),t.setAttribute("aria-expanded","true")),t.classList.toggle("open")},n=document.querySelectorAll('[data-toggle="dropdown"]');if(n)for(var s=0;s<n.length;s++)n[s].addEventListener("click",e,!0),n[s].addEventListener("touchstart",e,!0);document.getElementById("menu-toggle").addEventListener("click",t,!0),document.getElementById("menu-toggle").addEventListener("touchstart",t,!0);var a=function(){var e=document.querySelectorAll(".dropdown.open");if(e)for(var t=0;t<e.length;t++)e[t].classList.remove("open"),e[t].querySelector("a").setAttribute("aria-expanded","false")};document.addEventListener("click",function(e){e.target.closest(".dropdown.open")||a()},!1),document.addEventListener("keydown",function(e){"Escape"===e.key&&a()},!1)}}(),function(){var e,t,n,s,a,i,r;if(e=document.getElementsByTagName("body")[0],(t=document.getElementById("site-navigation"))&&void 0!==(n=document.getElementById("menu-toggle")))if(void 0!==(s=t.getElementsByTagName("ul")[0])){for(s.setAttribute("aria-expanded","false"),-1===s.className.indexOf("nav-menu")&&(s.className+=" nav-menu"),n.onclick=function(){-1!==t.className.indexOf("toggled")?(t.className=t.className.replace(" toggled",""),n.setAttribute("aria-expanded","false"),s.setAttribute("aria-expanded","false"),e.classList.remove("scroll-locked")):(t.className+=" toggled",e.className+=" scroll-locked",n.setAttribute("aria-expanded","true"),s.setAttribute("aria-expanded","true"))},i=0,r=(a=s.getElementsByTagName("a")).length;i<r;i++)a[i].addEventListener("focus",o,!0),a[i].addEventListener("blur",o,!0);!function(e){var t,n,s=e.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(t=function(e){var t,n=this.parentNode;if(n.classList.contains("focus"))n.classList.remove("focus");else{for(e.preventDefault(),t=0;t<n.parentNode.children.length;++t)n!==n.parentNode.children[t]&&n.parentNode.children[t].classList.remove("focus");n.classList.add("focus")}},n=0;n<s.length;++n)s[n].addEventListener("touchstart",t,!1)}(t)}else n.style.display="none";function o(){for(var e=this;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}}(),function(){"use strict";let e=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;let n=t.querySelector(".submitbtn");n.innerHTML='<svg class="svg-icon spinner"><use aria-hidden="true" xlink:href="#icon-spinner"></use></svg>',n.setAttribute("disabled","disabled");let s=t.querySelector(".newsub-status"),a=!0,i=t.querySelector(".newsub-email");if(validate_email(i.value)||(a=!1,n.innerText="Subscribe Now",n.removeAttribute("disabled"),s.innerText="Please enter a valid email",i.focus()),a){let e=serialize(t);postAjax(mte.ajaxurl,e,function(e){let a=JSON.parse(e);a.error?(n.innerText="Subscribe",n.removeAttribute("disabled"),s.innerText=a.error.message):a.success&&(t.parentElement.innerHTML=a.success.message,a.success.redirect&&(window.location=a.success.redirect))})}},t=document.getElementsByClassName("newsub-form");if(t)for(let n=0;n<t.length;n++)t[n].addEventListener("submit",e,!1);let n=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;let n=document.getElementsByClassName(".updatesub-status")[0];n.innerHTML='<svg class="svg-icon spinner"><use aria-hidden="true" xlink:href="#icon-spinner"></use></svg> Updating...',t.setAttribute("disabled","disabled");let s=serialize(document.getElementById("updatesub-form"));postAjax(mte.ajaxurl,s,function(e){let s=JSON.parse(e);t.removeAttribute("disabled"),s.error?n.innerHTML=s.error.message:s.success&&(n.innerHTML=s.success.message)})},s=document.getElementById("updatesub-submit");s&&s.addEventListener("click",n,!0)}(),function(){"use strict";if(!mte.preview){if(1==Math.floor(10*Math.random()+1)){let e={action:"mte_count_postview",nonce:mte.pv_nonce,post_id:mte.id};postAjax(mte.ajaxurl,e,function(){})}}let e=function(e,t){if(e.preventDefault(),e.stopPropagation(),!t)t=this;let n=t.getAttribute("data-vote"),s=document.getElementsByClassName("postvote_wrap")[0];s.innerHTML='<div class="loading" style="width:100%;"><svg class="svg-icon spinner"><use aria-hidden="true" xlink:href="#icon-spinner"></use></svg></div>',postAjax(mte.ajaxurl,{action:"mte_post_vote",id:mte.id,vote:n},function(e){s.innerHTML=e})},t=document.getElementsByClassName("postvote");if(t)for(let n=0;n<t.length;n++)t[n].addEventListener("click",e,!1)}();