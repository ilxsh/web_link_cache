<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head>
<title>Dockerfile与Dockerfile实战_Linux教程_Linux公社-Linux系统门户网站</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<link rel="icon" href="https://www.linuxidc.com/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="https://www.linuxidc.com/favicon.ico" type="image/x-icon">
<meta name="description" content="本文将结合上次的内容做更加细致的介绍，从回顾到实战演练讲述Dockerfile，本文先通过三个简单的案例感受、理解Dockerfile，主要">
<meta name="keywords" content="Dockerfile,Dockerfile实战,Dockerfile与Dockerfile实战,Linux,Linux教程,Linux系统,Linux安装,Ubuntu,Fedora,RedHat,SUSE,CentOS,红旗Linux">
<link rel="canonical" href="https://www.linuxidc.com/Linux/2020-04/163011.htm">
<meta name="generator" content="Linux公社">
<meta name="generator" content="Linux">
<link rel="stylesheet" href="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/style.css" type="text/css">
<meta name="generator" content="专业的Linux网站">
<script src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/hm.js"></script><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/jquery.js"></script>
<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/iwms.js"></script>
<script type="text/javascript">iwms.urlPrefix="../../";</script>

<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/show.js"></script>
</head>
<body>
<div class="topBar">
	<div class="twidth">
	
	<div style="float:right">
		<a href="http://m.linuxidc.com/" rel="nofollow">手机版</a>
		<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/language.js"></script> <a id="StranLink" href="javascript:StranBody()" title="點擊以繁體中文方式浏覽">繁體</a>
	</div>
	
	<div id="topUser">你好，游客 <a href="#" onclick="iwms.logPop()">登录</a>
	<a href="https://www.linuxidc.com/memberreg.aspx" rel="nofollow">注册</a>
	<a href="https://www.linuxidc.com/search.aspx" rel="nofollow">搜索</a>
	</div>
	</div>
</div>
<div class="twidth">
<div id="sitehead">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<table width="100%">
	<tbody><tr align="center"><td width="160">
	<a href="https://www.linuxidc.com/"><img style="filter: chroma(color=#FFFFFF);" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/logo.jpg" alt="Linux公社" width="155" height="53" border="0"></a>
	</td><td>
	<div align="center"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux.js"></script><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/wx1.png" alt="" width="468" height="60">
</div>
	</td>
	</tr></tbody></table>
</div>
</div>
<div id="navbar">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="https://www.linuxidc.com/index.htm" class="first">首页</a><a href="https://www.linuxidc.com/it/">Linux新闻</a><a href="https://www.linuxidc.com/Linuxit/" class="thisclass">Linux教程</a><a href="https://www.linuxidc.com/MySql/">数据库技术</a><a href="https://www.linuxidc.com/RedLinux/">Linux编程</a><a href="https://www.linuxidc.com/Apache/">服务器应用</a><a href="https://www.linuxidc.com/Unix/">Linux安全</a><a href="https://www.linuxidc.com/download/">Linux下载</a><a href="https://www.linuxidc.com/theme/">Linux主题</a><a href="https://www.linuxidc.com/Linuxwallpaper/">Linux壁纸</a><a href="https://www.linuxidc.com/linuxsoft/">Linux软件</a><a href="https://www.linuxidc.com/digi/">数码</a><a href="https://www.linuxidc.com/mobile/">手机</a><a href="https://www.linuxidc.com/diannao/">电脑</a>

</div>
</div>

<div id="navsub">
<div class="l"></div>
<div class="r"></div>
<div class="m">
	<a href="https://www.linuxidc.com/index.htm">首页</a> → <a href="https://www.linuxidc.com/Linuxit/">Linux教程</a>
</div>
</div>
<div class="linuxe1"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxe1.html"></script></div>
<div class="linux1"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux1.html"></script></div>
<div class="linuxa"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxa.html"></script></div>
<div class="linuxa1"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxa1.html"></script></div>
<table id="middle" style="table-layout:fixed" width="100%" cellspacing="0" cellpadding="0">
<tbody><tr valign="top"><td>

	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<div class="moreR">
			背景：<script type="text/javascript">WriteBg()</script><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#EDF0F5" alt="#EDF0F5" onclick='ContentBg("#EDF0F5")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#FAFBE6" alt="#FAFBE6" onclick='ContentBg("#FAFBE6")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#FFF2E2" alt="#FFF2E2" onclick='ContentBg("#FFF2E2")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#FDE6E0" alt="#FDE6E0" onclick='ContentBg("#FDE6E0")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#F3FFE1" alt="#F3FFE1" onclick='ContentBg("#F3FFE1")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#DAFAF3" alt="#DAFAF3" onclick='ContentBg("#DAFAF3")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#EAEAEF" alt="#EAEAEF" onclick='ContentBg("#EAEAEF")'> <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" style="cursor:pointer;width:7px;height:6px;border:1px solid #999;background:#FFF" alt="默认" onclick='ContentBg("")'> 
		</div>
		<span class="tt">阅读新闻</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm" id="bodyTd">
		<div id="printBody" style="word-break:break-all;">
			<div style="text-align:center"><h1 class="aTitle">Dockerfile与Dockerfile实战</h1></div>
			
			<table width="97%" align="center">
				<tbody><tr>
				<td width="140">[日期：2020-04-23]</td>
				<td align="center">来源：blog.51cto.com/14557673&nbsp;
				作者：wx5d8a17c45cb5b</td>
				<td width="160" align="right">[字体：<a href="javascript:ContentSize(16)">大</a> <a href="javascript:ContentSize(0)">中</a> <a href="javascript:ContentSize(12)">小</a>]
				</td></tr>
			</tbody></table>
<div id="li_all">
<div id="li_1"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux201.js"></script></div>
<div id="li_2"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux2.html"></script></div>
</div>
			<div id="content" style="overflow-x: hidden; word-break: break-all;"><h2>前言</h2>
<p>​先前我们在讲述docker的镜像构建时对Dockerfile做了初步介绍，本文将结合上次的内容做更加细致的介绍，从回顾到实战演练讲述
Dockerfile，本文先通过三个简单的案例感受、理解Dockerfile，主要是写httpd、sshd、以及systemctl的
Dockerfile，之后会进行对其他服务如Nginx、Tomcat以及<a href="https://www.linuxidc.com/topicnews.aspx?tid=21" target="_blank" title="MySQL">MySQL</a>编写并且测试Dockerfile。</p>
<ul>
<li>揭开Docker的面纱 - 基础理论梳理和安装流程演示&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163003.htm">https://www.linuxidc.com/Linux/2020-04/163003.htm</a></li>
<li>Docker基础命令详解 - 镜像及容器操作&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163005.htm">https://www.linuxidc.com/Linux/2020-04/163005.htm</a></li>
<li>深入理解Docker的硬件资源控制与验证&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163006.htm">https://www.linuxidc.com/Linux/2020-04/163006.htm</a></li>
<li>Docker网络模式与配置Docker自定义网络（bridge模式）&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163007.htm">https://www.linuxidc.com/Linux/2020-04/163007.htm</a></li>
<li>Docker构建镜像的三种方式（Dockerfile初步）&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163008.htm">https://www.linuxidc.com/Linux/2020-04/163008.htm</a></li>
<li>教你如何搭建Docker私有仓库&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163009.htm">https://www.linuxidc.com/Linux/2020-04/163009.htm</a></li>
<li>深入理解Docker数据管理与端口映射&nbsp; <a href="https://www.linuxidc.com/Linux/2020-04/163010.htm">https://www.linuxidc.com/Linux/2020-04/163010.htm</a></li>
</ul>
<h2>回顾Dockerfile</h2>
<p>​ 说到Dockerfile，就离不开Dockerfile的核心组件，尤其是镜像。镜像是运行容器的基础环境，也就是说镜像是docker容器创建的关键，而创建镜像的三种方式之一的Dockerfile是最为灵活的。</p>
<h3>什么是Dockerfile？</h3>
<p>​ Dockerfile可以看做是被Docker程序所解释翻译的脚本，由一组命令集合而成，每一条命令都对应一条操作命令，有其翻译为Linux下的具体命令。用户可以通过自定义内容来快速构建镜像。</p>
<p>​ 其实说简单点，你可以认为Dockerfile是“专门用于构建镜像的shell脚本”。</p>
<p>​ 还记得Dockerfile的严格格式吗？我们先来看一下这个表格。</p>
<p><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/200423102334362.png" alt="Dockerfile与Dockerfile实战"></p>
<p>​ Dockerfile是一种分层结构，其中的指令每一条都会构建一层镜像及容器，只不过这是临时的，除了基础镜像，其他中间产生的容器最后都会被清除。当然有时候会出现一些“无名氏”镜像，标志就是使用docker images命令时ID和tag都是none。</p>
<p>​ 
出现none镜像的原因有两类：一则是好的none镜像；二则是坏的none镜像。好的none镜像：代表的是中间镜像，你可以认为是父镜像的子镜像，可
以使用docker images 
-a查看。这类镜像不会占用磁盘空间，但是占用了屏幕显示空间。坏的none镜像：这类可能会导致磁盘空间问题。一般这种情况是旧镜像更新产生。</p>
<p>​ 因此，一般情况我们都可以通过命令将none镜像删除（实战中会给出）。</p>
<h3>Dockerfile的作用是什么？</h3>
<p>​ Dockerfile的核心作用就是用户可以灵活、快速、支持自定义构建所需镜像。</p>
<h3>简述docker执行Dockerfile流程以及构建使用镜像过程</h3>
<h4>docker执行Dockerfile流程</h4>
<p>（1）docker从基础镜像运行一个容器；<br>（2）执行一条指令并对容器作出修改；<br>（3）执行类似docker <strong>commit</strong>的操作提交一个新的镜像层；<br>（4）docker再基于刚提交的镜像运行一个新容器；<br>（5）执行dockerfile中的下一条指令直到所有指令都执行完成。</p>
<h4>构建使用镜像过程</h4>
<p>构建镜像命令举例：docker build -t image_name . (不要忽视这个点)</p>
<p>使用镜像命令举例：docker run -d -P image_name</p>
<p>最后使用docker ps -a 查看容器运行状态，如果是up状态就可以镜像测试验证了。</p>
<h2>Dockerfile实战</h2>
<h3>1、构建httpd服务镜像</h3>
<p>首先创建工作目录</p>
<pre><code>mkdir apache
<span>cd</span> apache</code></pre>
<p>编写Dockerfile</p>
<p>vim Dockerfile</p>
<pre><code>#基于的基础镜像
FROM <a href="https://www.linuxidc.com/topicnews.aspx?tid=14" target="_blank" title="CentOS">CentOS</a>
#维护镜像的用户信息
MAINTAINER lokott@lokott.org
#镜像操作指令安装Apache软件
RUN yum -y update
RUN yum -y install httpd
#开启 80端口
EXPOSE 80
#复制网站首页文件
ADD index.html /var/www/html/index.html
#将执行脚本复制到镜像中
ADD run.sh /run.sh
RUN chmod 755 /run.sh
#启动容器是执行脚本
CMD ["/run.sh"]</code></pre>
<p>其中注意：run 命令可以有多条CMD只能有一条，若有多条则只会执行最后一条</p>
<p>编写启动httpd服务的shell脚本</p>
<p>vim run.sh</p>
<pre><code><span>#</span><span>!/bin/bash</span>
rm -rf /run/httpd/*
exec /usr/sbin/apachectl -D FOREGROUND
</code></pre>
<p>编写测试页面</p>
<p>vim index.html</p>
<pre><code><span>&lt;<span>h1</span>&gt;</span>this is docker httpd web<span>&lt;/<span>h1</span>&gt;</span>
</code></pre>
<p>使用tree命令查看目录的文件结构</p>
<pre><code>[root@localhost apache]# tree ./
./
├── Dockerfile
├── index.html
└── run.sh

0 directories, 3 files
</code></pre>
<p>构建和使用镜像（创建运行容器）</p>
<pre><code>[root@localhost apache]# docker build -t httpd:new .
<span>#</span><span>因为我之前已经构建过，所以很快，此处案例显示过程是为了体现Dockerfile执行时的特征：分层和中间容器及镜像</span>
Sending build context to Docker daemon  4.096kB
Step 1/9 : FROM centos:7
<span> ---&gt;</span><span> 5e35e350aded</span>
Step 2/9 : MAINTAINER lokott@123.com
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> 3a68b2812314</span>
Step 3/9 : RUN yum -y update
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> ecf1ecb0a774</span>
Step 4/9 : RUN yum install -y httpd
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> ae8c1ee32fbd</span>
Step 5/9 : EXPOSE 80
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> 29f12f1f7490</span>
Step 6/9 : ADD index.html /var/www/html/index.html
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> f56113e6b984</span>
Step 7/9 : ADD run.sh /run.sh
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> 886bf9e654ab</span>
Step 8/9 : RUN chmod +x /run.sh
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> bf53e19ad44f</span>
Step 9/9 : CMD ["/run.sh"]
<span> ---&gt;</span><span> Using cache</span>
<span> ---&gt;</span><span> 9500f0aefd1d</span>
Successfully built 9500f0aefd1d
Successfully tagged httpd:new

[root@localhost apache]# docker images
REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
httpd                 new                 9500f0aefd1d        35 seconds ago      524MB
centos                7                   5e35e350aded        5 months ago        203MB
...//之后的案例将不再查看镜像了哈！
<span>#</span><span>基于构建的镜像创建并运行容器，给容器取名为<span>test</span></span>
[root@localhost apache]# docker run --name test -d -P httpd:new  
b7ec122849c61e36adb4a8891a87126afb53b1d5edfa2fda2a1ea18afa1a3169
[root@localhost apache]# docker ps -a
CONTAINER ID        IMAGE                 COMMAND                  CREATED             STATUS                      PORTS                   NAMES
b7ec122849c6        httpd:new             "/run.sh"                3 seconds ago       Up 3 seconds                0.0.0.0:32768-&gt;80/tcp   test
</code></pre>
<p>这样我们进入容器中检查一下这个页面文件是否存在</p>
<pre><code>[root@localhost apache]# docker exec -it test /bin/bash
[root@b7ec122849c6 /]# cat /var/www/html/index.html 
&lt;h1&gt;this is docker httpd web&lt;/h1&gt;
</code></pre>
<p>那么此时我们可以通过浏览器访问宿主机ip地址结合端口号（32768）来访问网站，结果如下：</p>
<p><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/200423102334361.png" alt="Dockerfile与Dockerfile实战"></p>
<p>下面的案例构建就直接给出Dockerfile和构建测试命令了。主要介绍其中的关键点。</p>
<h3>2、构建sshd镜像</h3>
<pre><code>mkdir sshd 

cd sshd</code></pre>
<pre><code>#sshd服务的镜像构建——基于Dockerfile
#首先先下载基础镜像centos，创建对应的工作目录
#开始编写nginx的Dockerfile
#第一步：基础镜像
FROM centos:7
#第二步：维护者信息
MAINTAINER lokott@123.com
#第三步：指令集
RUN yum -y update
RUN yum -y install openssh* net-tools lsof telnet passwd 
RUN echo '123123' | passwd --stdin root
#不以PAM认证登录而是以密钥对登录（非对称密钥），即禁用ssh的PAM认证
RUN sed -i 's/UsePAM yes/UsePAM no/g' /etc/ssh/sshd_config
RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key
#禁用ssh中PAM会话模块
RUN sed -i '/^session\s\+required\s\+pam_loginuid.so/s/^/#/' /etc/pam.d/sshd
#创建ssh工作目录和权限设置
RUN mkdir -p /root/.ssh &amp;&amp; chown root:root /root &amp;&amp; chmod 700 /root/.ssh
#开放22端口
EXPOSE 22
#第四步：启动容器时执行指令
CMD ["/usr/sbin/sshd","-D"]
</code></pre>
<p>构建镜像和运行容器</p>
<pre><code>[root@localhost sshd]# docker build -t sshd:new .
[root@localhost sshd]# docker run -d -P sshd:new 
c7991648efebd192eb29f1d4e3503e47e0581f55381ff7a23e545041ef5d3e67
[root@localhost sshd]# docker ps -a
CONTAINER ID        IMAGE               COMMAND               CREATED             STATUS              PORTS                   NAMES
c7991648efeb        sshd:new            "/usr/sbin/sshd -D"   20 seconds ago      Up 20 seconds       0.0.0.0:32769-&gt;22/tcp   jolly_ishizaka
b7ec122849c6        httpd:new           "/run.sh"             20 minutes ago      Up 20 minutes       0.0.0.0:32768-&gt;80/tcp   test
</code></pre>
<p>测试</p>
<pre><code>[root@localhost sshd]# ssh 20.0.0.149 -p 32769
The authenticity of host '[20.0.0.149]:32769 ([20.0.0.149]:32769)' can't be established.
RSA key fingerprint is SHA256:XLezVGFvOKIKW3fTBD0sIE9rsdz4021taphmcCo8IJM.
RSA key fingerprint is MD5:1e:86:94:2a:f5:a3:6c:e2:b4:b1:e4:50:9c:ad:8e:fb.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '[20.0.0.149]:32769' (RSA) to the list of known hosts.
root@20.0.0.149's password: 
[root@c7991648efeb ~]# exit
logout
Connection to 20.0.0.149 closed.
</code></pre>
<p>此时我们登录该容器（ssh或者docker exec命令）查看sshd服务的状态（但是systemctl无法使用）</p>
<pre><code>[root@c7991648efeb ~]# systemctl status sshd
Failed to get D-Bus connection: Operation not permitted
</code></pre>
<p>一则我们可以使用下面的命令使用该命令，二则我们可以基于上面构建的镜像作为基础镜像构建systemctl的镜像来测试验证。</p>
<pre><code>[root@localhost sshd]# docker run --privileged -itd -P sshd:new  /usr/sbin/init 
8dafa05dc12fc02f91dce93c6ab3085ab55eff1ee6b18c24731205e5c2ed37a9
[root@localhost sshd]# docker ps -a
CONTAINER ID        IMAGE               COMMAND               CREATED             STATUS              PORTS                   NAMES
8dafa05dc12f        sshd:new            "/usr/sbin/init"      3 seconds ago       Up 3 seconds        0.0.0.0:32770-&gt;22/tcp   hardcore_mccarthy
c7991648efeb        sshd:new            "/usr/sbin/sshd -D"   20 minutes ago      Up 20 minutes       0.0.0.0:32769-&gt;22/tcp   jolly_ishizaka
b7ec122849c6        httpd:new           "/run.sh"             40 minutes ago      Up 40 minutes       0.0.0.0:32768-&gt;80/tcp   test
[root@localhost sshd]# ssh 20.0.0.149 -p 32770
The authenticity of host '[20.0.0.149]:32770 ([20.0.0.149]:32770)' can't be established.
ECDSA key fingerprint is SHA256:LU81jNjOCKaiWrCsxTLPmx+YsUMVOBa2rG/XLXQsv9E.
ECDSA key fingerprint is MD5:03:15:aa:8a:65:8a:cc:b4:fb:66:f8:f6:6c:89:84:7b.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '[20.0.0.149]:32770' (ECDSA) to the list of known hosts.
root@20.0.0.149's password: 
[root@8dafa05dc12f ~]# systemctl status sshd
● sshd.service - OpenSSH server daemon
   Loaded: loaded (/usr/lib/systemd/system/sshd.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2020-04-22 02:28:49 UTC; 33s ago
     Docs: man:sshd(8)
           man:sshd_config(5)
</code></pre>
<p>--privileged表示提权，使得容器真正具备root的权限</p>
<h3>3、构建systemctl镜像</h3>
<pre><code>mkdir systemctl
cd systemctl</code></pre>
<p>创建Dockerfile</p>
<p>vim Dockerfile</p>
<pre><code>FROM sshd:new
MAINTAINER lokott@123.com
ENV container docker
#下面的命令是放在一个镜像层中执行的，可以减少镜像层
#括号中的指令含义是遍历进入的目录文件，删除除了systemd-tmpfiles-setup.service的所有文件,之后删除一些其他文件
RUN (cd /lib/systemd/system/sysinit.target.wants/; for i in *; do [ $i == systemd-tmpfiles-setup.service ] || rm -f $i; done); \
rm -f /lib/systemd/system/multi-user.target.wants/*; \
rm -f /etc/systemd/system/*.wants/*; \
rm -f /lib/systemd/system/local-fs.target.wants/*; \
rm -f /lib/systemd/system/sockets.target.wants/*udev*; \
rm -f /lib/systemd/system/sockets.target.wants/*initctl*; \
rm -f /lib/systemd/system/basic.target.wants/*; \
rm -f /lib/systemd/system/anaconda.target.wants/*;
VOLUME [ "/sys/fs/cgroup" ]
CMD ["/usr/sbin/init"]
</code></pre>
<p>构建运行及测试</p>
<pre><code>[root@localhost systemctl]# docker build -t systemctl:new .
[root@localhost systemctl]# docker run --privileged -it -v /sys/fs/cgroup/:/sys/fs/cgroup:ro systemctl:new /usr/sbin/init
systemd 219 running in system mode. (+PAM +AUDIT +SELINUX +IMA -APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 -SECCOMP +BLKID +ELFUTILS +KMOD +IDN)
Detected virtualization docker.
Detected architecture x86-64.

Welcome to CentOS Linux 7 (Core)!

Set hostname to &lt;e99fd581042a&gt;.
[  OK  ] Reached target Paths.
[  OK  ] Reached target Local File Systems.
[  OK  ] Reached target Swap.
[  OK  ] Created slice Root Slice.
[  OK  ] Listening on Journal Socket.
[  OK  ] Created slice System Slice.
         Starting Create Volatile Files and Directories...
[  OK  ] Listening on Delayed Shutdown Socket.
[  OK  ] Reached target Slices.
         Starting Journal Service...
[  OK  ] Started Create Volatile Files and Directories.
[ INFO ] Update UTMP about System Boot/Shutdown is not active.
[DEPEND] Dependency failed for Update UTMP about System Runlevel Changes.
Job systemd-update-utmp-runlevel.service/start failed with result 'dependency'.
[  OK  ] Started Journal Service.
[  OK  ] Reached target System Initialization.
[  OK  ] Started Daily Cleanup of Temporary Directories.
[  OK  ] Reached target Timers.
[  OK  ] Listening on D-Bus System Message Bus Socket.
[  OK  ] Reached target Sockets.
[  OK  ] Reached target Basic System.
[  OK  ] Reached target Multi-User System.
</code></pre>
<p>重新开启一个终端进行测试</p>
<pre><code>[root@localhost systemctl]# docker ps -a
CONTAINER ID        IMAGE               COMMAND               CREATED              STATUS              PORTS                   NAMES
e99fd581042a        systemctl:new       "/usr/sbin/init"      About a minute ago   Up About a minute   22/tcp                  gifted_edison
8dafa05dc12f        sshd:new            "/usr/sbin/init"      6 minutes ago        Up 6 minutes        0.0.0.0:32770-&gt;22/tcp   hardcore_mccarthy
c7991648efeb        sshd:new            "/usr/sbin/sshd -D"   27 minutes ago       Up 27 minutes       0.0.0.0:32769-&gt;22/tcp   jolly_ishizaka
b7ec122849c6        httpd:new           "/run.sh"             46 minutes ago       Up 46 minutes       0.0.0.0:32768-&gt;80/tcp   test
[root@localhost systemctl]# docker exec -it gifted_edison /bin/bash
[root@e99fd581042a /]# systemctl status sshd
● sshd.service - OpenSSH server daemon
   Loaded: loaded (/usr/lib/systemd/system/sshd.service; disabled; vendor preset: enabled)
   Active: inactive (dead)
     Docs: man:sshd(8)
           man:sshd_config(5)
[root@e99fd581042a /]# systemctl start sshd
[root@e99fd581042a /]# systemctl status sshd
● sshd.service - OpenSSH server daemon
   Loaded: loaded (/usr/lib/systemd/system/sshd.service; disabled; vendor preset: enabled)
   Active: active (running) since Wed 2020-04-22 02:36:18 UTC; 1s ago
     Docs: man:sshd(8)
           man:sshd_config(5)
 Main PID: 51 (sshd)
   CGroup: /docker/e99fd581042af009c4a15e9ab7bdd231c0052056051a1b18e9996f57eb7f2c6b/system.slice/sshd.service
           └─51 /usr/sbin/sshd -D

Apr 22 02:36:18 e99fd581042a systemd[1]: Starting OpenSSH server daemon...
Apr 22 02:36:18 e99fd581042a sshd[51]: WARNING: 'UsePAM no' is not supported in <a href="https://www.linuxidc.com/topicnews.aspx?tid=10" target="_blank" title="Red Hat">Red Hat</a> Enterprise Linux and may cause several problems.
Apr 22 02:36:18 e99fd581042a sshd[51]: Server listening on 0.0.0.0 port 22.
Apr 22 02:36:18 e99fd581042a sshd[51]: Server listening on :: port 22.
Apr 22 02:36:18 e99fd581042a systemd[1]: Started OpenSSH server daemon.
<span>#</span><span>开启sshd服务后进行访问宿主机测试成功</span>
[root@e99fd581042a /]# ssh 20.0.0.149 -p 22
The authenticity of host '20.0.0.149 (20.0.0.149)' can't be established.
ECDSA key fingerprint is SHA256:pT/8N0H/tNaMm4Zqh7u28Jm5EtmDkidSaih4lWzFIQY.
ECDSA key fingerprint is MD5:16:47:40:1f:40:1b:34:e9:ff:f9:15:7b:0b:f4:02:8b.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added '20.0.0.149' (ECDSA) to the list of known hosts.
root@20.0.0.149's password: 
Last login: Wed Apr 22 10:35:20 2020 from 20.0.0.149
[root@localhost ~]# exit
登出
Connection to 20.0.0.149 closed.
[root@e99fd581042a /]# exit
exit
</code></pre>
<h2>总结</h2>
<p>​ 本文回顾了Dockerfile，结合三个案例（httpd服务、sshd服务、systemd服务）来深入理解Dockerfile构建镜像的过程。其中我们需要理解的是</p>
<p>1、每个服务都需要有自己的目录和文件</p>
<p>2、Dockerfile的分层和中间缓存镜像和容器的创建和删除特点</p>
<p>3、--privileged的作用</p>
<p>4、体会整个从构建镜像、创建运行容器到测试验证的过程</p>
<p>谢谢阅读！</p>
<p><span style="color: #ff0000;">Linux公社的RSS地址</span>：<a href="https://www.linuxidc.com/rssFeed.aspx">https://www.linuxidc.com/rssFeed.aspx</a></p>
<p><strong>本文永久更新链接地址</strong>：<a href="https://www.linuxidc.com/Linux/2020-04/163011.htm">https://www.linuxidc.com/Linux/2020-04/163011.htm</a></p>
<p style="text-align: center;"><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/20042310179218.png" alt="" align="middle"></p><a href="http://www.linuxidc.com/" target="_blank"><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/logo.gif" alt="linux" width="15" height="17"></a></div><a href="http://www.linuxidc.com/" target="_blank">
<div class="linux3"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux3.html"></script></div>
</a><div class="linux302"><a href="http://www.linuxidc.com/" target="_blank"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux302.js"></script></a><p style="text-align: center;"><a href="http://www.linuxidc.com/" target="_blank"></a><a href="https://www.linuxidc.com/Linux/2014-08/106019.htm" target="_blank"><span style="color: #ff0000; font-size: medium;"><strong>关注Linux公社（LinuxIDC.com）官方微信与QQ群，随机发放邀请码</strong></span></a></p>
</div>		
			
			
		</div>
<div class="linuxfx"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/fx.html"></script></div>	
<div class="linux8"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux8.js"></script></div>
<div class="linux801"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux801.js"></script></div>
		<div class="nearNews">
			<div class="prevNews"><a href="https://www.linuxidc.com/Linux/2020-04/163010.htm">深入理解Docker数据管理与端口映射</a></div>
			<div class="nextNews"><a href="https://www.linuxidc.com/Linux/2020-04/163012.htm">基于Dockerfile构建Nginx、Tomcat、MySQL镜像（含包源）</a></div>
		</div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux809"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux809.html"></script></div>
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">相关资讯</span> &nbsp; &nbsp; &nbsp;
		<a href="https://www.linuxidc.com/search.aspx?where=nkey&amp;keyword=34122" target="_blank">dockerfile</a>&nbsp; <a href="https://www.linuxidc.com/search.aspx?where=nkey&amp;keyword=65599" target="_blank">Dockerfile实战</a>&nbsp; 
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table width="100%"><tbody><tr><td width="50%" valign="top"><ul class="nl"><li><a href="https://www.linuxidc.com/Linux/2020-04/163012.htm" target="_blank" title="基于Dockerfile构建Nginx、Tomcat、MySQL镜像（含包源）">基于Dockerfile构建Nginx、Tomcat</a>&nbsp; <span class="gray">(<span class="time">今 10:43</span>)</span></li>
<li><a href="https://www.linuxidc.com/Linux/2019-03/157804.htm" target="_blank">Docker利用Dockerfile来制作镜像</a>&nbsp; <span class="gray">(03/29/2019 20:20:52)</span></li>
<li><a href="https://www.linuxidc.com/Linux/2018-09/154016.htm" target="_blank">使用Dockerfile制作JDK+Tomcat镜像</a>&nbsp; <span class="gray">(09/11/2018 10:19:16)</span></li>
</ul></td><td width="50%" valign="top"><ul class="nl"><li><a href="https://www.linuxidc.com/Linux/2020-04/163008.htm" target="_blank" title="Docker构建镜像的三种方式（Dockerfile初步）">Docker构建镜像的三种方式（</a>&nbsp; <span class="gray">(<span class="time">今 10:01</span>)</span></li>
<li><a href="https://www.linuxidc.com/Linux/2018-09/154111.htm" target="_blank" title="Docker的安装和使用及dockerfile简单使用">Docker的安装和使用及dockerfile简</a>&nbsp; <span class="gray">(09/15/2018 07:31:02)</span></li>
<li><a href="https://www.linuxidc.com/Linux/2018-09/153982.htm" target="_blank" title="Dockerfile 中的 multi-stage(多阶段构建)">Dockerfile 中的 multi-stage(多阶</a>&nbsp; <span class="gray">(09/09/2018 20:10:04)</span></li>
</ul></td></tr></tbody></table>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
<div class="linux808"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux808.html"></script></div>
	
	<div class="mframe mR">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">本文评论</span>
		 	　　<a href="https://www.linuxidc.com/remark.aspx?id=163011" target="_blank">查看全部评论</a> <span class="gray">(0)</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<table style="margin:6px" width="100%">		
		<tbody><tr><td width="50%">
			<form action="" name="fmRemarkSt" onsubmit="return remark.post(this);">
			<input type="hidden" value="1" name="face" disabled="disabled">
			表情： <img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/b.gif" alt="表情" class="face1" style="cursor:pointer;vertical-align:middle" onclick="remark.dispFace(this)" onmouseout="remark.hideFace()">
			姓名： <input type="text" name="username" value="匿名" maxlength="15" style="width:60px" class="inputbg" disabled="disabled">
			<input type="checkbox" id="rmAnonymitySt" onclick="remark.anony(this)" disabled="disabled" checked="checked"><label for="rmAnonymitySt">匿名</label>
			字数 <input type="text" id="bodyLen" size="3" readonly="readonly" style="border-width:0;background:transparent;vertical-align:middle" value="0" disabled="disabled">
			<br>
			<textarea name="body" cols="40" rows="4" onkeydown="remark.dispLen(this)" onkeyup="remark.handle(event,this);remark.dispLen(this)" style="width:39em;height:100px;margin:3px 0;overflow-y:auto" disabled="disabled"></textarea>
				<br>
		　　　<input type="checkbox" checked="checked" id="rmAgreeSt" disabled="disabled"><label for="rmAgreeSt">同意评论声明</label>
		　　　<button type="submit" style="width: 50px; padding: 0px;" disabled="disabled">请登录</button>
			</form><br>
			评论声明
			<ul style="list-style-type:square;margin:5px 0 0 1em;padding:0">
			<li>尊重网上道德，遵守中华人民共和国的各项有关法律法规</li>
			<li>承担一切因您的行为而直接或间接导致的民事或刑事法律责任</li>
			<li>本站管理人员有权保留或删除其管辖留言中的任意内容</li>
			<li>本站有权在网站内转载或引用您的评论</li>
			<li>参与本评论即表明您已经阅读并接受上述条款</li>
			</ul>
		</td>
		<td width="50%"><div class="linux799"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux799.js"></script><img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/weixin.png" alt="" width="291" height="250">
</div></td></tr>
		</tbody></table>
		<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/remark.js"></script>
		<script type="text/javascript">
			remark.maxSize=500;
			remark.minSize=2;
			remark.sourceEle=$(document.fmRemarkSt).find("button").get(0);
			iwms.vCode="CC74440A";
			iwms.user.name.length==0 ? $i("rmAnonymitySt").click() : $i("rmAnonymitySt").form.username.value=iwms.user.name;
		</script>
		<div class="reCont" id="reContainer"></div>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	
</td><td width="300" valign="top">
<div class="linux901"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux901.js"></script></div>
<div class="linux902"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux902.html"></script></div>
<div class="linux903"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux903.js"></script></div>
<div class="linux905"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux905.html"></script></div>
	
	<div class="lframe">
	<div class="tl"></div>
	<div class="tr"></div>
	<div class="tm">
		<span class="tt">最新资讯</span>
	</div>
	<div class="wrapper">
	<div class="ml"></div>
	<div class="mr"></div>
	<div class="mm">
		<ul class="nl">
<li><a href="https://www.linuxidc.com/Linux/2020-04/163012.htm" target="_blank" title="基于Dockerfile构建Nginx、Tomcat、MySQL镜像（含包源）">基于Dockerfile构建Nginx、Tomcat、MySQL镜</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163011.htm" target="_blank">Dockerfile与Dockerfile实战</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163010.htm" target="_blank">深入理解Docker数据管理与端口映射</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163009.htm" target="_blank">教你如何搭建Docker私有仓库</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163008.htm" target="_blank" title="Docker构建镜像的三种方式（Dockerfile初步）">Docker构建镜像的三种方式（Dockerfile初步</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163007.htm" target="_blank" title="Docker网络模式与配置Docker自定义网络（bridge模式）">Docker网络模式与配置Docker自定义网络（</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163006.htm" target="_blank">深入理解Docker的硬件资源控制与验证</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163005.htm" target="_blank">Docker基础命令详解 - 镜像及容器操作</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163004.htm" target="_blank" title="揭开Docker的面纱 - 基础理论梳理和安装流程演示">揭开Docker的面纱 - 基础理论梳理和安装流</a></li>
<li><a href="https://www.linuxidc.com/Linux/2020-04/163003.htm" target="_blank" title="LLVM Clang现在通过_ExtInt支持自定义宽度整数">LLVM Clang现在通过_ExtInt支持自定义宽度</a></li>
</ul>
	</div>
	</div>
	<div class="bl"></div>
	<div class="br"></div>
	<div class="bm"></div>
	</div>
	<div class="u70"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/u70.html"></script></div>
	<div class="u80"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/u80.html"></script></div>
	<div class="u90"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/u90.html"></script></div>
	<div class="space"></div>
	<div id="pin" style="position: static; top: 0px;">
	<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/pin.js"></script>
	</div>
</td></tr>
</tbody></table>
<div class="linux906"><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linux906.html"></script></div>
<div id="footer">
<a href="https://www.linuxidc.com/aboutus.htm">Linux公社简介</a> - <a href="https://www.linuxidc.com/adsense.htm">广告服务</a> - <a href="https://www.linuxidc.com/sitemap.aspx">网站地图</a> - <a href="https://www.linuxidc.com/help.htm">帮助信息</a> - <a href="https://www.linuxidc.com/contactus.htm">联系我们</a><br>本站（LinuxIDC）所刊载文章不代表同意其说法或描述，仅为提供更多信息，也不构成任何建议。<br><script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/qq.js"></script>主编：漏网的鱼 联系邮箱:<img src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/email.png" alt="" width="138" height="20"> (如有合作请联系)
<br>
<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/foot.js"></script>本站带宽由[<font color="red">300.ai</font>]友情提供<br>关注Linux，关注LinuxIDC.com，<font color="red">请向您的QQ好友宣传LinuxIDC.com</font>，多谢支持！
<br>Copyright © 2006-2020　<a href="https://www.linuxidc.com/">Linux公社</a>　All rights reserved 浙ICP备07014134号-8
	<script type="text/javascript">iwms.aId=163011;$(function(){iwms.imgCont=$i('content');iwms.imgResize();InitContStyle();iwms.getVars();})</script>
	
</div>
</div>
<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxren1.js"></script><script type="text/javascript">
document.body.oncopy = function () { setTimeout( function () { var text = clipboardData.getData("text"); if (text) { text = text + "\r\n本篇文章来源于 Linux公社网站(www.linuxidc.com)  原文链接："+location.href; clipboardData.setData("text", text); } }, 100 ) }
</script>

<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxren2.js"></script>
<script type="text/javascript" src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/linuxren3.js"></script><script src="Dockerfile%E4%B8%8EDockerfile%E5%AE%9E%E6%88%98_Linux%E6%95%99%E7%A8%8B_Linux%E5%85%AC%E7%A4%BE-Linux%E7%B3%BB%E7%BB%9F%E9%97%A8%E6%88%B7%E7%BD%91%E7%AB%99_files/tj.js"></script>

</body></html>