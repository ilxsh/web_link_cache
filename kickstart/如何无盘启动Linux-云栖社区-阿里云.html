        <!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>如何无盘启动Linux-云栖社区-阿里云</title>
  <meta name="keywords" content="linux,服务器,ubuntu,配置,镜像,NFS" />
  <meta name="description" content="
如何无盘启动Linux

无盘启动意味着一台客户端电脑在启动操作系统时没有任何的磁盘存储介质。在这种情形之下，电脑能够通过网络从远程NFS服务器上加载内核和根文件系统。在这过程中可能会用到多种不同的方法来从NFS服务器上加载内核和根文件系统：RARP，BOOTP或是DHCP协议。">
  <meta name="applicable-device" content="pc">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="alternate" media="only screen and(max-width: 640px)" href="https://m.aliyun.com/yunqi/articles/84691" >
  <meta name="mobile-agent" content="format=html5;url=https://m.aliyun.com/yunqi/articles/84691">
  <meta name="mobile-agent" content="format=xhtml;url=https://m.aliyun.com/yunqi/articles/84691">
  <meta name="mobile-agent" content="format=wml;url=https://m.aliyun.com/yunqi/articles/84691">
  <link rel="canonical" href="https://yq.aliyun.com/articles/84691"/>
  <meta name="renderer" content="webkit">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-param" content="yunqi_csrf"/>
  <meta name="csrf-token" content="P7GRYF928I"/>
  <meta name="data-spm" content="a2c4e"/>
  <meta name="ahot-aplus" content="1">
      <link rel="stylesheet" href="//at.alicdn.com/t/font_422887_hlfuaa72mk70t3xr.css">
    <style>
    .yq-blog-detail .content-detail{
        line-height: 1.8;
    }
    .yq-blog-detail .content-detail p{
        margin: 0 0 16px;
    }
</style>
    <style>
        .markdown-body pre{
            padding: 9.5px;
            margin: 0 0 10px;
        }
    </style>
    <link rel="stylesheet" href="//g.alicdn.com/aliyun/yunqi/1.2.14/css/blogDetail2019.css" charset="utf-8" />
    <script src="//www.aliyun.com/rgn/aliyun_assets?renderer=js&nonce=GJCWD2QUNQ"></script>
    <script src="//g.alicdn.com/aliyun/goldeneye-deploy/0.0.1/static/goldeneye.js"></script>
    <link rel="stylesheet" href="//at.alicdn.com/t/font_422887_vrqbpml6oos.css">
</head>

<body data-spm="11153940"><script type="text/javascript"
id="beacon-aplus"
src="//g.alicdn.com/alilog/mlog/aplus_v2.js"
exparams="category=&userid=&aplus&yunid=&yunpk=&channel=&cps="
nonce="GJCWD2QUNQ"
cspx="GJCWD2QUNQ"
async>
</script>

<script type="text/javascript" src="//www.aliyun.com/rgn/aliyun_topbar/index.js?nonce=GJCWD2QUNQ"></script>

      <!-- pc头部  -->
<div class="home-topbar-wrap active" data-spm="spm-yq-header">
    <div class="home-topbar-menu">
        <div class="common-topbar">
            <div class="right-panel">
                <div class="search-pannel">
                    <form action="/search" id="sitesearchform" data-spm-click="gostr=/aliyunqi.default.search;locaid=sitesearchform;" rel="nofollow">
                        <input class="sear-text" type="text" name="q" placeholder="找社区文章、答案、技术大拿">
                        <input type="hidden" name="type" value="ARTICLE">
                    </form>
                </div>
                <div class="msg-panel" data-spm="headeruserinfo">
                    <a rel="nofollow" href="/notifications" class="msg"></a>
                                          <a href="https://account.aliyun.com/login/login.htm?from_type=yqclub&amp;oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin" rel="nofollow" class="login">登录社区</a>
                                      </div>
            </div>
            <div class="yq-nav-panel" data-spm="headermainnav">
    <h1><a href="/"><img src="https://yqfile.alicdn.com/dfb80b22c483698f031f2e5859e9335b.png" alt="云栖社区" height="24" width="110"></a></h1>
    <ul class="yq-new-nav-bar">
        <li class="active"><a href="/articles/">博客</a></li>
        <li ><a href="/live/" >直播</a></li>
        <li ><a href="/roundtable" >聚能聊</a></li>
        <li ><a href="/teams" >团队号</a></li>
        

                        <li ><a href="/expert">专家</a></li>
        <li ><a href="https://www.aliyun.com/acts/miniapps" >小程序<i>NEW</i></a></li>
                        <li class="more">
            <span>更多</span>
            <div class="drop-menu">
                <div class="drop-inner">
                <dl>
                    <dd><a href="/ask" target="_blank" >问答</a></dd>
                                                            <dd><a href="/download" target="_blank" >下载</a></dd>
                    <dd><a href="/publication" target="_blank" >订阅</a></dd>
                                                                                <dd><a href="/topic" target="_blank">专题</a></dd>
                    <dd><a href="/mall" target="_blank" >商城</a></dd>
                                        <dd><a href="https://developer.aliyun.com/" target="_blank">开发者社区</a></dd>
                                        <dd><i>|</i></dd>
                </dl>
                <dl>
                                                                                <dd><a href="/marketplace" target="_blank" >云生态</a></dd>
                                    </dl>
                </div>
            </div>
        </li>
        <div class="line" style="width: 0px; left: 0px;"></div>
    </ul>
</div>
        </div>
    </div>
</div>
<!-- h5头部 -->
<div class="nav-head">
    <div class="nav-head-fix">
        <div class="head-inner">
            <div class="aliyun-logo"><a href="//m.aliyun.com"><img src="https://gw.alicdn.com/tfs/TB1DQZsbBUSMeJjSszbXXberFXa-681-160.png" alt="阿里云"></a></div>
            <div class="icon-more"><img src="//img.alicdn.com/tfs/TB1n1OeRFXXXXb3aXXXXXXXXXXX-20-18.svg" alt=""></div>
        </div>
    </div>
    <div class="second-nav">
        <ul>
            <li><a href="/cloud">阿里云头条</a></li>
            <li><a href="/articles/">博客</a></li>
            <li><a href="/ask">问答</a></li>
            <li><a href="/roundtable" rel="nofollow">聚能聊</a></li>
            <li><a href="/live/" target="_blank" rel="nofollow">直播</a></li>
            <li><a href="/download" rel="nofollow">下载</a></li>
            <li><a href="https://bbs.aliyun.com">论坛</a></li>
            <li><a href="https://yunqi.aliyun.com" rel="nofollow">云栖大会</a></li>
            <li><a href="https://developer.aliyun.com/" rel="nofollow">开发者社区</a></li>
                    </ul>
                <div class="login-register">
            <a href="https://account.aliyun.com/login/login.htm?from_type=yqclub&oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin" class="login" rel="nofollow">登录社区</a>
            <a href="https://account.aliyun.com/register/register.htm?from_type=yqclub&oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin" class="register" rel="nofollow">注册账号</a>
        </div>
                    </div>
</div>
      <style>
        .cnblogs_code pre{
            background-color: #ececec;
        }
    </style>
    <div class="hiddenTitleArea ">
        <p class="hiddenTitle">如何无盘启动Linux</p>
    </div>
    <div class="yq-main">
                <div class="yq-ribbons">
            <div class="fixed-content">
                <div class="fixed-simple">
                    <div class="simple-circle">
                        <a href="/articles/84691?type=2">
                            <div class="img"></div>
                        </a>
                    </div>
                    <div class="simple-text">
                        <a href="/articles/84691?type=2"> 精简版</a>
                    </div>
                </div>
                <div class="fixed-item">
                    <div id="vote_btn" has_voted="" data-aid="84691"
                         data-islogin="false"
                         title="点赞"
                         class="opt-btn vote_btn "></div>
                    <span id="vote_num" class="fixed-num">0</span>
                </div>
                <div class="fixed-item">
                    <div id="mark_btn" has_marked="" data-aid="84691"
                         data-islogin="false"
                         title="收藏"
                         class="opt-btn mark_btn "></div>
                    <span id="mark_num" class="fixed-num">0</span>
                </div>
                <div class="fixed-item">
                    <a href="#comment" class="comment_btn" data-spm-anchor-id="5176.100239.blogcont371439.15"></a>
                    <span class="fixed-num">0</span>
                </div>
                <div class="fixed-item">
                    <div class="weibo-icon" id="weibo">
                        <a href="" target="_blank" class="weibo-icon-url"></a>
                    </div>
                </div>
                <div class="fixed-item">
                    <div class="weixin-icon" id="weixin-bar">
                        <div class="weixin-icon1" id="weixin-icon">
                            <img src="" class="qrcode-weixin">
                        </div>
                    </div>
                </div>
            </div>
        </div>
                <ol class="yq-breadcrumb tag-breadcrumb">
            <li><a href="/">云栖社区</a><span>&gt;</span></li>
                            <li><a href="/articles/">博客</a><span>&gt;</span></li>
                        <li class="active">正文</li>
        </ol>

        <div class="yq-main-left yq-blog-detail">
            <h2 class="blog-title">                                                如何无盘启动Linux</h2>
            <div class="blog-o-info">
                                    <div class="other-opt">
                                                <!-- 管理推荐 -->
                                            </div>
                                <a href="/users/xlyqrd2zxlspg" class="b-author" target="_blank"
                   rel="nofollow">玄学酱</a>
                <span class="b-time icon-shijian1">2017-05-02 11:17:00</span>
                <span class="b-watch icon-View">浏览1292</span>
                            </div>

                            <ul class="tag-group">
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_10/" target="_blank"
                               class="label-item"><span>linux</span></a>
                        </li>
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_372/" target="_blank"
                               class="label-item"><span>服务器</span></a>
                        </li>
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_418/" target="_blank"
                               class="label-item"><span>ubuntu</span></a>
                        </li>
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_698/" target="_blank"
                               class="label-item"><span>配置</span></a>
                        </li>
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_713/" target="_blank"
                               class="label-item"><span>镜像</span></a>
                        </li>
                                            <li class="tag tag-item">
                            <a href="/tags/type_blog-tagid_1439/" target="_blank"
                               class="label-item"><span>NFS</span></a>
                        </li>
                                    </ul>
            
            
                                                                                                    <div id="aaa"></div>
            <div class="article-hide-content">
                <div class="article-hide-box">
                    <div class="article-hide-btn" id="btn-readmore">展开阅读全文</div>
                </div>
                <div class="content-detail unsafe markdown-body">
                                                                        
<h1 style="margin:0px;padding:15px 0px 10px;font-size:32px;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:100;text-align:center;">如何无盘启动Linux</h1>
<div>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">无盘启动意味着一台客户端电脑在启动操作系统时没有任何的磁盘存储介质。在这种情形之下，电脑能够通过网络从远程NFS服务器上加载内核和根文件系统。在这过程中可能会用到多种不同的方法来从NFS服务器上加载内核和根文件系统：RARP，BOOTP或是DHCP协议。在这个指导教程中，我会使用BOOTP/DHCP协议，因为它们能够被大多数的网卡所支持。</p>
<p style="margin-top:5px;margin-bottom:5px;padding:0px;line-height:2em;text-align:center;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;"><img src="https://dn-linuxcn.qbox.me/data/attachment/album/201408/01/180952gro1owmwslj55ec7.jpg" alt="" style="border:none;margin:10px 5px;"></p>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E6%2597%25A0%25E7%259B%2598%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA%25E7%259A%2584%25E4%25BC%2598%25E5%258A%25BF" name="user-content-%E6%97%A0%E7%9B%98%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E4%BC%98%E5%8A%BF" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E6%97%A0%E7%9B%98%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E4%BC%98%E5%8A%BF"></a>无盘计算机的优势</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">想象一下你的办公室内有30台电脑，每一台都需要使用相同的应用程序。如果你作为管理这些电脑的管理员，你会怎么做？如果你在每一台电脑上安装应用程序，那只是在浪费你的时间。另一方面来说，一套无盘系统就能解决你的问题。有了一套无盘系统，你只需在中央NFS服务器上安装需要的程序，然后通过网络启动这30台客户机即可。</p>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E9%259C%2580%25E8%25A6%2581%25E4%25BB%2580%25E4%25B9%2588" name="user-content-%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88"></a>需要什么</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">两台或更多的装备有支持DHCP协议的网卡的Linux电脑。这些将扮演NFS服务器角色的电脑应当配有硬盘，其它客户机不需要任何的硬盘。服务器和客户机需要连接到同一个本地网络之内。</p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">设置一个无盘系统共需要五步。</p>
<ol style="margin:1em 2em;padding:0px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">
<li style="margin:0px;padding:0px;list-style-type:decimal;line-height:2em;">安装所需的包</li>
<li style="margin:0px;padding:0px;list-style-type:decimal;line-height:2em;">配置TFTP服务器</li>
<li style="margin:0px;padding:0px;list-style-type:decimal;line-height:2em;">配置DHCP服务器</li>
<li style="margin:0px;padding:0px;list-style-type:decimal;line-height:2em;">配置NFS服务器</li>
<li style="margin:0px;padding:0px;list-style-type:decimal;line-height:2em;">启动无盘客户机</li>
</ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">在这个指导教程中，我假设作为启动服务器的电脑运行的是 Ubuntu。如何你正在使用其它的Linux发行版，原理是一样的。</p>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E7%25AC%25AC%25E4%25B8%2580%25E6%25AD%25A5%25E5%25AE%2589%25E8%25A3%2585%25E6%2589%2580%25E9%259C%2580%25E7%259A%2584%25E5%258C%2585" name="user-content-%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E7%9A%84%E5%8C%85" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E7%AC%AC%E4%B8%80%E6%AD%A5%E5%AE%89%E8%A3%85%E6%89%80%E9%9C%80%E7%9A%84%E5%8C%85"></a>第一步：安装所需的包</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">像下面这样使用 apt-get 命令来安装所有需要的包。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">apt-get</span><span class="pln" style="color:rgb(184,255,184);"> install dhcp3</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">server tftpd</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">hpa syslinux nfs</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">kernel</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">server initramfs</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">tools</span>
</li></ol>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E7%25AC%25AC%25E4%25BA%258C%25E6%25AD%25A5%25E9%2585%258D%25E7%25BD%25AEtftp%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8" name="user-content-%E7%AC%AC%E4%BA%8C%E6%AD%A5%E9%85%8D%E7%BD%AEtftp%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E9%85%8D%E7%BD%AEtftp%E6%9C%8D%E5%8A%A1%E5%99%A8"></a>第二步：配置TFTP服务器</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">TFTP服务器是一个小型FTP服务器，需要用它来在本地网络中的客户机和服务器之间自动传输启动文件。</p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">向/etc/default/tftpd-hpa中添加以下行：</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);">
<li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">RUN_DAEMON</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="str" style="color:rgb(101,176,66);">"yes"</span>
</li>
<li class="L1" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">OPTIONS</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="str" style="color:rgb(101,176,66);">"-l -s /var/lib/tftpboot/"</span>
</li>
</ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">接着，创建一个启动文件夹。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">mkdir</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">p </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">var</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tftpboot</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">pxelinux</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">cfg</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">复制引导程序镜像。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">cp</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">usr</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">syslinux</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">pxelinux</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">0</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">var</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tftpboot</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">像下面这样创建一个默认启动配置文件。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">vi</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tftpboot</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">pxelinux</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">cfg</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">default</span>
</li></ol>
<hr style="clear:both;margin:0px 10px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);">
<li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">LABEL </span><span class="typ" style="color:rgb(137,189,255);">Ubuntu</span>
</li>
<li class="L1" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;"><span class="pln" style="color:rgb(184,255,184);">KERNEL vmlinuz</span></li>
<li class="L2" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">APPEND root</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="str" style="color:rgb(101,176,66);">/dev/</span><span class="pln" style="color:rgb(184,255,184);">nfs initrd</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="pln" style="color:rgb(184,255,184);">initrd</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">img nfsroot</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.1</span><span class="pun" style="color:rgb(184,255,184);">:/</span><span class="pln" style="color:rgb(184,255,184);">nfsroot </span><span class="kwd" style="color:rgb(226,137,100);">ip</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="pln" style="color:rgb(184,255,184);">dhcp rw</span>
</li>
</ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">注意：</p>
<ul class="task-list" style="margin:1em 2em;padding:0px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">
<li style="margin:0px;padding:0px;list-style:disc;line-height:2em;">"root=/dev/nfs"表示服务器上的网络文件系统（不需要修改）。</li>
<li style="margin:0px;padding:0px;list-style:disc;line-height:2em;">"initrd=initrd.img"是一个用于系统启动的启动脚本。</li>
<li style="margin:0px;padding:0px;list-style:disc;line-height:2em;">"nfsroot=10.10.101.1/nfsroot"指明了服务器的IP地址以及NFS共享文件夹的名称。用你的服务器地址来替换掉IP地址。</li>
<li style="margin:0px;padding:0px;list-style:disc;line-height:2em;">"ip=dhcp"表示客户端电脑使用DHCP寻址方案。</li>
<li style="margin:0px;padding:0px;list-style:disc;line-height:2em;">"rw"表示NFS共享是可读/可写的。</li>
</ul>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">最后，重启TFTPD服务。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">etc</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">init</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">d</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tftpd</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">hpa restart</span>
</li></ol>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E7%25AC%25AC%25E4%25B8%2589%25E6%25AD%25A5%25E9%2585%258D%25E7%25BD%25AEdhcp%25E6%259C%258D%25E5%258A%25A1" name="user-content-%E7%AC%AC%E4%B8%89%E6%AD%A5%E9%85%8D%E7%BD%AEdhcp%E6%9C%8D%E5%8A%A1" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E7%AC%AC%E4%B8%89%E6%AD%A5%E9%85%8D%E7%BD%AEdhcp%E6%9C%8D%E5%8A%A1"></a>第三步：配置DHCP服务</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">你还需要在NFS服务器上配置DHCP服务来允许使用/var/lib/tftpboot/pxelinux.0启动。假设你在使用10.10.101.0作为子网，你的配置可能看起来像下面这样子。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">vi</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">etc</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">dhcp3</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">dhcpd</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">conf</span>
</li></ol>
<hr style="clear:both;margin:0px 10px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);">
<li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">allow booting</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L1" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">allow bootp</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L2" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;"><span class="pln" style="color:rgb(184,255,184);"> </span></li>
<li class="L3" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">subnet </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.0</span><span class="pln" style="color:rgb(184,255,184);"> netmask </span><span class="lit" style="color:rgb(51,135,204);">255.255</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">255.0</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">{</span>
</li>
<li class="L4" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    range </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.2</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.254</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L5" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    option broadcast</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">address </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.255</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L6" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    option routers </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.1</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L7" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    filename </span><span class="str" style="color:rgb(101,176,66);">"/pxelinux.0"</span><span class="pun" style="color:rgb(184,255,184);">;</span>
</li>
<li class="L8" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;"><span class="pun" style="color:rgb(184,255,184);">}</span></li>
</ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">然后重启DHCP服务。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> service isc</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">dhcp</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">server restart</span>
</li></ol>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E7%25AC%25AC%25E5%259B%259B%25E6%25AD%25A5%25E9%2585%258D%25E7%25BD%25AEnfs%25E6%259C%258D%25E5%258A%25A1%25E5%2599%25A8" name="user-content-%E7%AC%AC%E5%9B%9B%E6%AD%A5%E9%85%8D%E7%BD%AEnfs%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E7%AC%AC%E5%9B%9B%E6%AD%A5%E9%85%8D%E7%BD%AEnfs%E6%9C%8D%E5%8A%A1%E5%99%A8"></a>第四步：配置NFS服务器</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">创建一个保存客户机根文件系统目录的文件夹。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">mkdir</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">nfsroot</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">接着，设置NFS服务器导出客户机根文件系统。向/etc/exports添加以下行来实现。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">nfsroot             </span><span class="pun" style="color:rgb(184,255,184);">*(</span><span class="pln" style="color:rgb(184,255,184);">rw</span><span class="pun" style="color:rgb(184,255,184);">,</span><span class="pln" style="color:rgb(184,255,184);">no_root_squash</span><span class="pun" style="color:rgb(184,255,184);">,</span><span class="pln" style="color:rgb(184,255,184);">async</span><span class="pun" style="color:rgb(184,255,184);">,</span><span class="pln" style="color:rgb(184,255,184);">insecure</span><span class="pun" style="color:rgb(184,255,184);">,</span><span class="pln" style="color:rgb(184,255,184);">no_subtree_check</span><span class="pun" style="color:rgb(184,255,184);">)</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">运行下列命令来重新载入修改过的/etc/exports。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> exportfs </span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">rv</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">默认情况下，Ubuntu在initrd镜像中不提供网络启动支持。因此你需要创建一个新的initrd.img文件。首先添加下列行到/etc/initramfs-tools/initramfs.conf中。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);">
<li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">BOOT</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="pln" style="color:rgb(184,255,184);">nfs</span>
</li>
<li class="L1" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">MODULES</span><span class="pun" style="color:rgb(184,255,184);">=</span><span class="pln" style="color:rgb(184,255,184);">netboot</span>
</li>
</ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">然后运行下列命令来创建一个新的initrd.img。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> mkinitramfs </span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">o </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">var</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tftpboot</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">initrd</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="pln" style="color:rgb(184,255,184);">img</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">将新的内核镜像文件复制到/var/lib/tftpboot中。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">cp</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">boot</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">vmlinuz</span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="str" style="color:rgb(101,176,66);">`uname -r`</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">var</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tfftpboot</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">vmlinuz</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">是时候将整个根文件系统拷贝到/nfsroot中了。</p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">假设您使用的是一个全新的Ubuntu服务器安装，你只需将文件系统拷贝到NFS的根之中。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">cp</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">ax </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">nfsroot</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">然后通过文本编辑器打开/nfsroot/etc/fstab 并添加以下行。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="str" style="color:rgb(101,176,66);">/dev/</span><span class="pln" style="color:rgb(184,255,184);">nfs       </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">               nfs    defaults          </span><span class="lit" style="color:rgb(51,135,204);">1</span><span class="pln" style="color:rgb(184,255,184);">       </span><span class="lit" style="color:rgb(51,135,204);">1</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">文件夹/var/lib/tftpboot应拥有全局读写权限。否则客户机无法从网络启动。</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);"><li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">$ </span><span class="kwd" style="color:rgb(226,137,100);">sudo</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="kwd" style="color:rgb(226,137,100);">chmod</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">-</span><span class="pln" style="color:rgb(184,255,184);">R </span><span class="lit" style="color:rgb(51,135,204);">777</span><span class="pln" style="color:rgb(184,255,184);"> </span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="kwd" style="color:rgb(226,137,100);">var</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">lib</span><span class="pun" style="color:rgb(184,255,184);">/</span><span class="pln" style="color:rgb(184,255,184);">tfftpboot</span>
</li></ol>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">最后，为了避免任何服务器设置出现错误，我推荐对运行DHCP服务的网卡使用静态IP。举个例子，如果网卡名为eth0，你的/etc/network/interfaces中的配置应该看起来像这样：</p>
<pre class="prettyprint linenums prettyprinted">
</pre>
<ol style="margin:1em 2em;padding:1px;border-left:2px solid rgb(0,153,0);color:rgb(174,174,174);">
<li class="L0" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">iface eth0 inet </span><span class="kwd" style="color:rgb(226,137,100);">static</span>
</li>
<li class="L1" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    address </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.1</span>
</li>
<li class="L2" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    netmask </span><span class="lit" style="color:rgb(51,135,204);">255.255</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">255.0</span>
</li>
<li class="L3" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    broadcast </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.255</span>
</li>
<li class="L4" style="margin:0px;padding:0px 0px 0px 28px;text-indent:-28px;line-height:2em;list-style-type:decimal;">
<span class="pln" style="color:rgb(184,255,184);">    network </span><span class="lit" style="color:rgb(51,135,204);">10.10</span><span class="pun" style="color:rgb(184,255,184);">.</span><span class="lit" style="color:rgb(51,135,204);">101.0</span>
</li>
</ol>
<a class="target-fix ext" target="_blank" style="color:rgb(77,138,216);display:inline-block;height:0px;overflow:hidden;border-bottom:2px solid rgb(238,238,238);padding:0px 4px 2px;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;visibility:hidden;border-top:none;border-right:none;border-left:none;"></a>
<h3 style="margin:10px 10px 10px 0px;padding:8px 15px;font-size:1.4em;font-family:'Microsoft YaHei', 'Hiragino Sans GB', STHeiti, Tahoma, SimHei, sans-serif;font-weight:300;background-color:rgb(244,67,54);color:rgb(255,255,255);line-height:1.8em;letter-spacing:3px;border-left:10px solid rgb(51,51,51);">
<a class="anchor ext" href="https://yq.aliyun.com/go/articleRenderRedirect?url=https%3A%2F%2Fgithub.com%2FLCTT%2FTranslateProject%2Fblob%2Fmaster%2Ftranslated%2Ftech%2F20140616%2520How%2520to%2520diskless%2520boot%2520a%2520Linux%2520machine.md%23%25E7%25AC%25AC%25E4%25BA%2594%25E6%25AD%25A5%25E5%2590%25AF%25E5%258A%25A8%25E6%2597%25A0%25E7%259B%2598%25E5%25AE%25A2%25E6%2588%25B7%25E6%259C%25BA" name="user-content-%E7%AC%AC%E4%BA%94%E6%AD%A5%E5%90%AF%E5%8A%A8%E6%97%A0%E7%9B%98%E5%AE%A2%E6%88%B7%E6%9C%BA" target="_blank" style="color:rgb(255,255,221);text-decoration:none;padding:0px 4px 2px;border-bottom:2px solid rgb(238,238,238);" data-url="https://github.com/LCTT/TranslateProject/blob/master/translated/tech/20140616%20How%20to%20diskless%20boot%20a%20Linux%20machine.md#%E7%AC%AC%E4%BA%94%E6%AD%A5%E5%90%AF%E5%8A%A8%E6%97%A0%E7%9B%98%E5%AE%A2%E6%88%B7%E6%9C%BA"></a>第五步：启动无盘客户机</h3>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">在您完成了服务器上的配置之后，从网络启动你的客户机。要从网络启动一般你只需修改BIOS设置中的启动优先顺序即可。</p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;font-family:'Lantinghei SC', 'Helvetica Neue', 'Microsoft YaHei', '微软雅黑', Arial, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif;font-size:16px;">如果客户机启动成功，您的无盘环境就配置好了。无需做任何修改就可以任意添加一台或多台客户端电脑。</p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;"><font>原文发布时间：2014-08-01</font></p>
<p style="margin-top:1.5em;margin-bottom:1.5em;padding:0px;line-height:2em;"><font>本文来自云栖合作伙伴“linux中国”</font></p>
</div>

                                                            </div>
                                <div class="copyright-outer-line">
                                            <div class="yq-blog-sem-remove copyright-notice">
                            版权声明：本文内容由互联网用户自发贡献，版权归作者所有，本社区不拥有所有权，也不承担相关法律责任。如果您发现本社区中有涉嫌抄袭的内容，欢迎发送邮件至：<a
                                    href="mailto:yqgroup@service.aliyun.com">yqgroup@service.aliyun.com</a>
                            进行举报，并提供相关证据，一经查实，本社区将立刻删除涉嫌侵权内容。
                        </div>
                                    </div>


                <div class="yq-line"></div>
                <div class="yq-blog-comment yq-blog-sem-remove"
                                                    data-async-load="true"
                            data-type="article"
                            data-pid="84691"
                            data-p="1"
                                        >
                    <h3 class="title-info">网友评论</h3>
                                            <section class="comments-box clearfix">


                            <form accept-charset="UTF-8" action="/comments" method="POST" data-remote="true"
                                  data-target="#comments"
                                  class="js-comment-create js-active-on-valid">
                                <input type="hidden" name="type" value="article">
                                <input type="hidden" name="yunqi_csrf" value="P7GRYF928I">
                                <input type="hidden" name="isCheck" value="1">
                                <input type="hidden" name="pid" value="84691">
                                
                                    <div class="form-group">
                                        <div class="editor js-editor">
                                            <div class="editor-container">
                                                <div class="editor-actions">
                                                    <a href="https://account.aliyun.com/login/login.htm?from_type=yqclub&oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin">登录</a><span>后评论</span>
                                                </div><!-- /.editor-actions -->
                                                <div class="computed-count unlogin-count">
                                                    <span class="font-count">0</span>/500
                                                </div>
                                                <textarea name="content" rows="4" maxlength="500"
                                                          class="form-control js-mention js-auto-expand editor-content"
                                                          style="height: 82px" id="comment"
                                                          placeholder="写下你的评论…" required></textarea>
                                            </div><!-- /.editor-container -->

                                        </div><!-- /.editor  -->
                                    </div>

                                

                                <div class="form-group text-right">
                                                                            <div class="comment_button comment_new_button" data-toggle="modal"
                                             name="showLoginBtn">评论
                                        </div>
                                                                    </div>
                            </form>
                            <div class="media-list comments" id="comments">
                                

<div class="pages comment-tip">
        
    
</div>
                            </div>
                        </section>
                                    </div>
            </div>

            <div class="yq-line"></div>
            <div class="yq-blog-related-articles">
                <h3 class="title-info">相关文章</h3>
                <div class="related-articles-content">
                                                                    <div class="item-uninclude-img">
                            <a href="/articles/79719" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                虚拟化平台无盘安装：PXE+FTP+TFTP安装ESXI 4.1
                            </div>
                            <div class="item-info">
                                <a href="/users/kqadmzd2h7t36" target="_blank" class="item-author">知与谁同</a>
                                <span class="item-time icon-shijian1">2017-05-02 21:29:00</span>
                                <span class="item-watch icon-View">浏览1244</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/472383" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                零接触式云数据中心架构Windows Server 2012实现iSCSI SAN无盘引导（2）
                            </div>
                            <div class="item-info">
                                <a href="/users/fy5hholq4xfqs" target="_blank" class="item-author">余二五</a>
                                <span class="item-time icon-shijian1">2017-11-16 13:52:00</span>
                                <span class="item-watch icon-View">浏览1142</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/472388" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                零接触式云数据中心架构Windows Server 2012实现iSCSI SAN无盘引导
                            </div>
                            <div class="item-info">
                                <a href="/users/fy5hholq4xfqs" target="_blank" class="item-author">余二五</a>
                                <span class="item-time icon-shijian1">2017-11-15 13:56:00</span>
                                <span class="item-watch icon-View">浏览1083</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/432695" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                CITRIX XenDesktop与无盘工作站
                            </div>
                            <div class="item-info">
                                <a href="/users/77hzxr65teps2" target="_blank" class="item-author">技术小牛人</a>
                                <span class="item-time icon-shijian1">2017-11-01 18:00:00</span>
                                <span class="item-watch icon-View">浏览885</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/526033" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                linux（DHCP服务）
                            </div>
                            <div class="item-info">
                                <a href="/users/qkixv43wa7m4w" target="_blank" class="item-author">技术小甜</a>
                                <span class="item-time icon-shijian1">2017-11-23 16:01:00</span>
                                <span class="item-watch icon-View">浏览665</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/401635" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                PXE+TFTP+DHCP网络自动引导安装Linux
                            </div>
                            <div class="item-info">
                                <a href="/users/qkixv43wa7m4w" target="_blank" class="item-author">技术小甜</a>
                                <span class="item-time icon-shijian1">2017-11-16 18:50:00</span>
                                <span class="item-watch icon-View">浏览965</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/249169" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                redhat网络安装系统 之一
                            </div>
                            <div class="item-info">
                                <a href="/users/vciyxqgiaapec" target="_blank" class="item-author">长烟慢慢</a>
                                <span class="item-time icon-shijian1">2012-04-07 20:33:11</span>
                                <span class="item-watch icon-View">浏览682</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/402774" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                通过PXE安装Linux实况
                            </div>
                            <div class="item-info">
                                <a href="/users/bnch2y3za6tla" target="_blank" class="item-author">技术小胖子</a>
                                <span class="item-time icon-shijian1">2017-11-08 02:02:00</span>
                                <span class="item-watch icon-View">浏览716</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/404656" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                呕心编写的《金牌网管师——金牌网吧网管》
                            </div>
                            <div class="item-info">
                                <a href="/users/awitaclaxchh6" target="_blank" class="item-author">科技探索者</a>
                                <span class="item-time icon-shijian1">2017-11-22 19:48:00</span>
                                <span class="item-watch icon-View">浏览965</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/411356" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                Pxe+dhcp+nfs+tftp 网络安装linux
                            </div>
                            <div class="item-info">
                                <a href="/users/ik6exorzxmjwk" target="_blank" class="item-author">科技小先锋</a>
                                <span class="item-time icon-shijian1">2017-11-07 01:55:00</span>
                                <span class="item-watch icon-View">浏览728</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/420382" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                锐起无盘安装图文教程
                            </div>
                            <div class="item-info">
                                <a href="/users/qkixv43wa7m4w" target="_blank" class="item-author">技术小甜</a>
                                <span class="item-time icon-shijian1">2017-11-16 15:10:00</span>
                                <span class="item-watch icon-View">浏览1340</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/424679" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                无盘技术项目案例总结
                            </div>
                            <div class="item-info">
                                <a href="/users/fy5hholq4xfqs" target="_blank" class="item-author">余二五</a>
                                <span class="item-time icon-shijian1">2017-11-21 19:51:00</span>
                                <span class="item-watch icon-View">浏览1276</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/426377" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                无盘中用户数据的保存
                            </div>
                            <div class="item-info">
                                <a href="/users/grng7az2sxifq" target="_blank" class="item-author">技术小阿哥</a>
                                <span class="item-time icon-shijian1">2017-11-27 16:17:00</span>
                                <span class="item-watch icon-View">浏览711</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/430211" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                欢迎软件行业的高手参与合作。
                            </div>
                            <div class="item-info">
                                <a href="/users/7qyxbv2zwgawg" target="_blank" class="item-author">技术小美</a>
                                <span class="item-time icon-shijian1">2017-11-25 20:22:00</span>
                                <span class="item-watch icon-View">浏览631</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/430317" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                有人对Linux无盘系统开发感兴趣不？
                            </div>
                            <div class="item-info">
                                <a href="/users/7qyxbv2zwgawg" target="_blank" class="item-author">技术小美</a>
                                <span class="item-time icon-shijian1">2017-11-23 20:44:00</span>
                                <span class="item-watch icon-View">浏览747</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/473946" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                Vmware vsphere知识中易混淆和忽略的多个概念
                            </div>
                            <div class="item-info">
                                <a href="/users/gtdqzn4uqwgsg" target="_blank" class="item-author">科技小能手</a>
                                <span class="item-time icon-shijian1">2017-11-12 01:21:00</span>
                                <span class="item-watch icon-View">浏览981</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/475006" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                锐起无盘XP安装与配置图文（二）
                            </div>
                            <div class="item-info">
                                <a href="/users/fy5hholq4xfqs" target="_blank" class="item-author">余二五</a>
                                <span class="item-time icon-shijian1">2017-11-16 23:52:00</span>
                                <span class="item-watch icon-View">浏览826</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/475007" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                锐起无盘XP安装与配置图文（一）
                            </div>
                            <div class="item-info">
                                <a href="/users/fy5hholq4xfqs" target="_blank" class="item-author">余二五</a>
                                <span class="item-time icon-shijian1">2017-11-16 23:53:00</span>
                                <span class="item-watch icon-View">浏览952</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/590075" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                搭建dhcp服务器
                            </div>
                            <div class="item-info">
                                <a href="/users/4sgy5jxaz6nvw" target="_blank" class="item-author">luchao669</a>
                                <span class="item-time icon-shijian1">2018-05-04 14:00:25</span>
                                <span class="item-watch icon-View">浏览1450</span>
                            </div>
                        </div>
                                                                                            <div class="item-uninclude-img">
                            <a href="/articles/591631" target="_blank" class="alllink">
                            </a>
                            <div class="item-title">
                                ctenos7 pxe无盘站
                            </div>
                            <div class="item-info">
                                <a href="/users/4sgy5jxaz6nvw" target="_blank" class="item-author">luchao669</a>
                                <span class="item-time icon-shijian1">2018-05-10 15:08:15</span>
                                <span class="item-watch icon-View">浏览2772</span>
                            </div>
                        </div>
                                                            </div>
                <div class="load-more">下拉加载更多</div>
            </div>


        </div>
        <div class="yq-main-right">
            <div class="yq-right-sider">


                <div id="huangli" data-islogin="false" data-type="small"></div>


                <div class="sign-content yq-b-detail">
                    <ul class="nav-tab">
                        <li><span>作者介绍</span></li>
                    </ul>
                    <div class="b-panel">
                        <dl>
                            <dt>
                                <div class="user-head">
                                    <a href="/users/xlyqrd2zxlspg" target="_blank" rel="nofollow">
                                        <img src="https://ucc.alicdn.com/avatar/img_64d43a710d2bf08e32c6700d818e59c3.JPG" alt="" style="width:100%;height:100%">
                                    </a>
                                </div>
                            </dt>
                            <dd class="panel-info">
                                <a href="/users/xlyqrd2zxlspg" target="_blank" class="user-name"
                                   rel="nofollow">玄学酱</a>
                                                            </dd>
                            <dd>
                                                                                                            <a href="javascript:;" class="interest-opt"
                                           data-islogin="false"
                                           data-uid="xlyqrd2zxlspg" id="follow-btn" rel="nofollow">+ 关注</a>
                                                                                                </dd>
                        </dl>
                        <div class="article-info">
                            <div class="info-item">
                                <p class="count item-first">22874</p>
                                <p class="info item-first">文章数</p>
                            </div>
                            <div class="info-item info-middle">
                                <p class="count">22027</p>
                                <p class="info">粉丝数</p>
                            </div>
                            <div class="info-item">
                                <p class="count item-last">24</p>
                                <p class="info item-last">关注的人</p>
                            </div>
                        </div>
                    </div>

                                        
                </div>

                
                <div class="sign-content yq-b-magazine yq-product-recommend" style="margin-top: 20px">
                    <div class="next-title">
                        下一篇
                    </div>
                    <div class="next-content">
                        <a onclick="userAction('next')"
                           href="/articles/747874">2020阿里云采购季史上最全攻略</a>
                    </div>
                    <div class="next-info">
                        <a href="/users/u64scqccxauke"
                           target="_blank">云栖号</a>
                        <span class="icon-View">927人浏览</span>
                    </div>
                </div>

                <div class="sign-content yq-other-catalog yq-ads-blog" id="category-list-div">
                    <ul class="nav-tab">
                        <li><span>本文目录</span></li>
                    </ul>
                    <div class="tags-panel">
                        <ol class="notice-panel" id="category-list">
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <input type="hidden" id="weibourl" name="weibourl" value="http://service.weibo.com/share/share.php?title=%E5%A6%82%E4%BD%95%E6%97%A0%E7%9B%98%E5%90%AF%E5%8A%A8Linux+%0A%E5%A6%82%E4%BD%95%E6%97%A0%E7%9B%98%E5%90%AF%E5%8A%A8Linux%0A%0A%E6%97%A0%E7%9B%98%E5%90%AF%E5%8A%A8%E6%84%8F%E5%91%B3%E7%9D%80%E4%B8%80%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%94%B5%E8%84%91%E5%9C%A8%E5%90%AF%E5%8A%A8%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%97%B6%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95%E7%9A%84%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8%E4%BB%8B%E8%B4%A8%E3%80%82%E5%9C%A8%E8%BF%99%E7%A7%8D%E6%83%85%E5%BD%A2%E4%B9%8B%E4%B8%8B%EF%BC%8C%E7%94%B5%E8%84%91%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87%E7%BD%91%E7%BB%9C%E4%BB%8E%E8%BF%9C%E7%A8%8BNFS%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8%E5%92%8C%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E3%80%82%E5%9C%A8%E8%BF%99%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%94%A8%E5%88%B0%E5%A4%9A%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%B9%E6%B3%95%E6%9D%A5%E4%BB%8ENFS%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E5%8A%A0%E8%BD%BD%E5%86%85%E6%A0%B8%E5%92%8C%E6%A0%B9%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%9ARARP%EF%BC%8CBOOTP%E6%88%96%E6%98%AFDHCP%E5%8D%8F%E8%AE%AE%E3%80%82&amp;url=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691"/>
    <input type="hidden" id="qrcodeurl" name="qrcodeurl" value="/api/qrcode?size=140&amp;key=a7abe108d5e9d760164da517ac0fe7dc09984944&amp;text=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691"/>
    <div class="yq-footer-links">
            <dl class="link-item">
            <dt class="item-title">热点导航</dt>
            <dd class="item-content">
                                    <a href="https://www.aliyun.com/acts/hi618/index" target="_blank" title="">阿里云618大促</a>
                                    <a href="https://www.aliyun.com/" target="_blank" title="">云计算</a>
                                    <a href="https://market.aliyun.com/security" target="_blank" title="云安全">网络安全</a>
                                    <a href="https://www.aliyun.com/aliware" target="_blank" title="分布式系统aliware">互联网架构</a>
                                    <a href="https://yq.aliyun.com/ask/53742" target="_blank" title="云服务器ECS升级配置">ECS升级配置</a>
                                    <a href="https://www.aliyun.com/product/iot" target="_blank" title=" 物联网套件"> 物联网</a>
                                    <a href="https://tianchi.aliyun.com/competition/entrance/231714/introduction" target="_blank" title="中间件比赛">中间件比赛</a>
                                    <a href="https://yq.aliyun.com/articles/" target="_blank" title="云栖博客">云栖博客</a>
                            </dd>
        </dl>
                <dl class="link-item">
            <dt class="item-title">用户关注</dt>
            <dd class="item-content">
                                    <a href="https://bbs.aliyun.com/read/301499.html" target="_blank" title="如何做好自动化测试">自动化测试</a>
                                    <a href="https://www.aliyun.com/solution/all" target="_blank" title="行业解决方案">解决方案</a>
                                    <a href="https://yq.aliyun.com/articles/34777" target="_blank" title="Linux中常用命令">linux命令</a>
                                    <a href="https://www.aliyun.com/ " target="_blank" title="">云服务</a>
                                    <a href="https://yq.aliyun.com/articles/92145" target="_blank" title="">JavaScript 函数</a>
                                    <a href="https://yq.aliyun.com/articles/48786" target="_blank" title="服务器监控工具">服务器监控</a>
                                    <a href="https://yq.aliyun.com/roundtable/56407" target="_blank" title="">Python语言</a>
                                    <a href="https://www.aliyun.com/product/man" target="_blank" title="">移动数据分析</a>
                            </dd>
        </dl>
                <dl class="link-item">
            <dt class="item-title">更多推荐</dt>
            <dd class="item-content">
                                    <a href="https://yq.aliyun.com/articles/132294" target="_blank" title="用户体验质量控制">用户体验</a>
                                    <a href="https://help.aliyun.com/product/26090.html" target="_blank" title="云数据库rds服务">云数据库Rds</a>
                                    <a href="https://www.aliyun.com/product/slb/" target="_blank" title="负载均衡slb">负载均衡</a>
                                    <a href="https://wanwang.aliyun.com" target="_blank" title="域名购买">域名注册</a>
                                    <a href="https://whois.aliyun.com" target="_blank" title="域名whois查询工具">Whois查询</a>
                                    <a href="https://help.aliyun.com/product/43570.html" target="_blank" title="DataV数据可视化文档">数据可视化</a>
                                    <a href="https://beian.aliyun.com" target="_blank" title="网站备案查询">ICP备案查询</a>
                                    <a href="https://yq.aliyun.com/zt" target="_blank" title="">主题地图</a>
                                    <a href="https://edu.aliyun.com/" target="_blank" title="阿里云大学视频教程">阿里云大学</a>
                                    <a href="https://wanwang.aliyun.com/domain/cn/" target="_blank" title=".cn域名">cn域名</a>
                                    <a href="https://m.aliyun.com/yunqi/" target="_blank" title="">移动站</a>
                                    <a href="https://bbs.aliyun.com/" target="_blank" title="">IT论坛</a>
                                    <a href="https://www.aliyun.com/acts/product-section-2019/home" target="_blank" title="">阿里云开年Hi购季</a>
                                    <a href="https://mail.aliyun.com/" target="_blank" title="">企业邮箱</a>
                                    <a href="https://www.aliyun.com/acts/product-section-2019/new-users" target="_blank" title="">新用户优惠</a>
                            </dd>
        </dl>
    </div>    <script nonce="GJCWD2QUNQ">
    window.localconfigs = {
            };
    window.showDialog = {
        "show" : false,
        "cookieName" : "show_yq_login_dialog",
        "cookieTTL" : 0.5,
        "content" : '注册会员，查阅海量科技文章，更可获得阿里云千元新手礼包'
    };
    $(function () {
        if (location.hash && location.hash == "#yqblog") {
            $(".yq-blog-sem-remove").remove();
        }
        var alert_init = 0;
        $("#low-score-notice").hover(function () {
            if (alert_init == 0){
                $.Alert("下载附件需要扣除  个积分，积分是社区的虚拟货币，当前帐号积分数量为 ，请满足条件后再进行操作, <a target=\"_blank\" href=\"https://yq.aliyun.com/articles/782\">如何获取积分</a>","积分不足",true);
            }
            alert_init = 1;
        });
        $("#download-notice").click(function(){
            var _this = $(this);
            if (alert_init == 0){
                $.Confirm('下载附件需要扣除  个积分，积分是社区的虚拟货币，当前帐号积分数量 ，为请问是否继续？','确认下载',function (){
                    alert_init = 1;
                    _this.attr("href",_this.attr("data-href"));
                    location.href = _this.attr("data-href");
                });
            }
        });
    })
</script>
    <link href="/assets/TQEditor-2.3.8/prism.css" rel="stylesheet" />
    <script src="/assets/TQEditor-2.3.8/prism.js"></script>
    <script type="application/hal+json">{
        "@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
        "@id": "",
        "appid": "1603340613662633",
        "title": "如何无盘启动Linux",
        "images": "",
        "pubDate": "",
        "upDate": "",
        "data":{
            "webPage":{
                "headline":"",
                "pcUrl":"",
                "wapUrl":"",
                "appUrl":"",
                "mipUrl":"",
                "datePublished": ""
            }
        }
    }
</script>    <script nonce="GJCWD2QUNQ">
        window.localconfigs = {
            aid: "84691",
            title: "如何无盘启动Linux",
            isDeveloper: "",

            content: "\x0A\u5982\u4F55\u65E0\u76D8\u542F\u52A8Linux\x0A\x0A\u65E0\u76D8\u542F\u52A8\u610F\u5473\u7740\u4E00\u53F0\u5BA2\u6237\u7AEF\u7535\u8111\u5728\u542F\u52A8\u64CD\u4F5C\u7CFB\u7EDF\u65F6\u6CA1\u6709\u4EFB\u4F55\u7684\u78C1\u76D8\u5B58\u50A8\u4ECB\u8D28\u3002\u5728\u8FD9\u79CD\u60C5\u5F62\u4E4B\u4E0B\uFF0C\u7535\u8111\u80FD\u591F\u901A\u8FC7\u7F51\u7EDC\u4ECE\u8FDC\u7A0BNFS\u670D\u52A1\u5668\u4E0A\u52A0\u8F7D\u5185\u6838\u548C\u6839\u6587\u4EF6\u7CFB\u7EDF\u3002\u5728\u8FD9\u8FC7\u7A0B\u4E2D\u53EF\u80FD\u4F1A\u7528\u5230\u591A\u79CD\u4E0D\u540C\u7684\u65B9\u6CD5\u6765\u4ECENFS\u670D\u52A1\u5668\u4E0A\u52A0\u8F7D\u5185\u6838\u548C\u6839\u6587\u4EF6\u7CFB\u7EDF\uFF1ARARP\uFF0CBOOTP\u6216\u662FDHCP\u534F\u8BAE\u3002"
        };

        function userAction(action) {
            var aid = "84691";
            var title = "如何无盘启动Linux";
            $.get('/yqapi/blog/userBehavior', {aid: aid, title: title, action: action});
        }

        $(document).on('click', '.b-technology', function () {
            userAction('draft')
        })
        $(document).on('click', '.alllink', function () {
            userAction('readmore')
        })
    </script>

  <!--[if IE 9]>
  <script src="//g.alicdn.com/??aliyun/dblx/0.0.4/es5-shim.min.js,aliyun/dblx/0.0.4/es5-sham.min.js"></script>
  <![endif]-->
<script nonce="GJCWD2QUNQ">
    window.configs  = { "csrf-param": "yunqi_csrf",
        "csrf-token": "P7GRYF928I",
        "islogin": false,
        "registerurl": "https://account.aliyun.com/register/register.htm?from_type=yqclub&oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin",
        "loginurl": "https://account.aliyun.com/login/login.htm?from_type=yqclub&oauth_callback=https%3A%2F%2Fyq.aliyun.com%2Farticles%2F84691%3Fspm%3D5176.13394999.0.0.2b80132eQIywUX%26do%3Dlogin",
        "isNeedNickname": false,
        "isNew": false    };
</script>



  <script src="//g.alicdn.com/aliyun/yunqi/1.2.14/scripts/common.js"></script>
    <script src="//g.alicdn.com/aliyun/yunqi/1.2.14/scripts/blogDetail2019.js"></script>
  
    <script nonce="GJCWD2QUNQ">


        (function () {
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            } else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);

            $.ajax({
                url: '/yqnew/api/wechatMiniProgram/qrcode?buildType=articles&paramId=' +84691,
                type: 'GET',
                success: function (data) {
                    $('#weixin-icon img').attr('src', data.data);
                }
            });
            // $(document).on('mouseenter', '.interest-opt', (e) => {
            //     const event = e || widnow.evnet;
            //     const $this = $(event.currentTarget);
            //     if ($this.text().trim() === '已关注') {
            //         $this.addClass('over').text('取消关注');
            //     }
            //     $(document).on('mouseleave', '.interest-opt', (e) => {
            //         $this.removeClass('over');
            //         if ($this.text() === '取消关注') {
            //             $this.text('已关注');
            //         }
            //     })
            // });
                        
                    })();
    </script>
  <style>
  a, a:link, a:visited {
    color: #3366ff;
  }

  a:focus, a:hover {
    color: #4775FF;
    text-decoration: underline;
  }
  .copyright a img {vertical-align: baseline;}
</style>
  <script type="text/javascript" src="//www.aliyun.com/rgn/aliyun_footer?renderer=js&nonce=GJCWD2QUNQ"></script>
<script src="https://g.alicdn.com/??aliyun/www-dpl/0.5.47/knight/js/util/aliyun-lego-system.js"></script>
<div aliyun-lego-data="https://www.aliyun.com/lego/qpgg/910"></div>
  <script nonce="GJCWD2QUNQ">
      $(function(){
        //头像打签
        var icon_uids = [];
        $("span[name^='experticon_']").each(function(i){
            icon_uids[i] = $(this).attr('uid');
        });
        var method = '/api/getIcons/';

        $.ajax({
            type: 'POST',
            url: method,
            async: true,
            dataType:"json", 
            cache:false,
            data: {icon_uids:icon_uids},
            success: function(data, status, xhr) {
                if(data.errcode==0){
                    for(var i in data.data.expert){
                        if(data.data.expert[i].isexpert==1){//专家签
                            $("span[name='experticon_"+i+"']").each(function(){
                                var size = $(this).attr("size") || 'big';
                                var width;
                                size == 'big' ? size='middle':'';
                                size=='middle' ? width = '16px;' :'';
                                size=='small' ? width = '14px;' :'';
                                if(data.data.expert[i].category==2){//阿里专家
                                    var img_src = '//img.alicdn.com/tps/TB15.8xOpXXXXX1XFXXXXXXXXXX-14-14.png';
                                }else{
                                    var img_src = '//img.alicdn.com/tps/TB1rR75OXXXXXXKaFXXXXXXXXXX-14-14.png';
                                }
                                $(this).html('<img src="'+img_src+'" style="width: '+width+'height: '+width+'margin-right: 10px;" title="专家认证"/>');                        
                            });
                        }
                    }

                    for(var n in data.data.mvp){
                        $("span[name='experticon_"+data.data.mvp[n]+"']").each(function(){
                            $(this).after('<img src="//yqfile.alicdn.com/777a8d68e6349091f2be06099eefaa36.png" alt="" style="margin-left: 0;height: 15px;width: 21px;">');
                        });
                    }
                }
            },
            error: function(xhr, type, error) {
                console.log(error.toString());
            }
        });

      });
  </script>
  <script src='//w.cnzz.com/c.php?id=1256835944' language='JavaScript'></script>
  <script src='//w.cnzz.com/c.php?id=1256757167' language='JavaScript'></script>
  <script src="//g.alicdn.com/??aliyun/www-dpl/0.5.12/knight/js/data-statistics.js"></script>
  <script type="text/javascript"  nonce="GJCWD2QUNQ">
      const countExpo = (ele,length) => {
          var objId= ele.substring(length);
          let ctr = true;

          if($(ele).offset() === undefined){
            return;
          }
          if ($(window).scrollTop() < $(ele).offset().top+$(ele).height() && $(window).scrollTop() > $(ele).offset().top-$(window).height()) { //本身在可视区
              $.get('/yqapi/banner/exposure',{bannerId:objId});
          } else {
              $(window).on('scroll', () => { //不在可视区滚动触发
                  if ($(window).scrollTop() < $(ele).offset().top+$(ele).height() && $(window).scrollTop() > $(ele).offset().top-$(window).height() && ctr) {
                      $.get('/yqapi/banner/exposure',{bannerId:objId});
                      ctr = false;
                  }
              })
          }
      }
          window.right_bottom_ads = null;

      if (window.right_bottom_ads) {
          setTimeout(function () {
              $('.yq-a-r-bottom').addClass('yq_a_r_bottom_'+window.right_bottom_ads.id);
              countExpo('.yq_a_r_bottom_'+window.right_bottom_ads.id,15);
          },0);

          $('body').on('click', '.yq-a-r-bottom img', function (data) {
              bannerClick(window.right_bottom_ads.id);
          });
      }

    
    function bannerClick(bannerId)
    {
        $.get('/yqapi/banner/click',{bannerId:bannerId});
    }

    function clickJump(url)
    {
        location.href = url;
    }

    $(document).ready(function() {
      if ($('.usr-name').text()) {
        $('.usr-name').each(function () {
          var nickNameValue = $(this).text().replace(/&(amp;)+/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
          $(this).text(nickNameValue);
        });
      }

      if ($('.name-text').text()) {
        $('.name-text').each(function () {
          var nickNameValue = $(this).text().replace(/&(amp;)+/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
          $(this).text(nickNameValue);
        });
      }

      if ($('.user-name').text()) {
        $('.user-name').each(function () {
          var nickNameValue = $(this).text().replace(/&(amp;)+/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
          $(this).text(nickNameValue);
        });
      }

      if ($('.b-author').text()) {
        $('.b-author').each(function () {
          var nickNameValue = $(this).text().replace(/&(amp;)+/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>');
          $(this).text(nickNameValue);
        });
      }

      $('[onclick]').on("click",function (event) {
          // event.preventDefault();
          eval($(this).attr("onclick"));
      })

        $('[onfocus]').on("focus",function (event) {
            eval($(this).attr("onfocus"));
        })
    });
  </script>


</body>
</html>
